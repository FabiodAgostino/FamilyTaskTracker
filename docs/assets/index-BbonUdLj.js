var jE=Object.freeze,TE=Object.defineProperty,vV=Object.defineProperties;var yV=Object.getOwnPropertyDescriptors;var Am=Object.getOwnPropertySymbols;var PE=Object.prototype.hasOwnProperty,OE=Object.prototype.propertyIsEnumerable;var IE=t=>{throw TypeError(t)},Ml=Math.pow,Mx=(t,e,r)=>e in t?TE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,C=(t,e)=>{for(var r in e||(e={}))PE.call(e,r)&&Mx(t,r,e[r]);if(Am)for(var r of Am(e))OE.call(e,r)&&Mx(t,r,e[r]);return t},M=(t,e)=>vV(t,yV(e));var K=(t,e)=>{var r={};for(var n in t)PE.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Am)for(var n of Am(t))e.indexOf(n)<0&&OE.call(t,n)&&(r[n]=t[n]);return r};var xV=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Rt=(t,e,r)=>Mx(t,typeof e!="symbol"?e+"":e,r),Rx=(t,e,r)=>e.has(t)||IE("Cannot "+r);var pe=(t,e,r)=>(Rx(t,e,"read from private field"),r?r.call(t):e.get(t)),It=(t,e,r)=>e.has(t)?IE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),lt=(t,e,r,n)=>(Rx(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Mn=(t,e,r)=>(Rx(t,e,"access private method"),r);var Sm=(t,e,r,n)=>({set _(i){lt(t,e,i,r)},get _(){return pe(t,e,n)}});var Gn=(t,e)=>jE(TE(t,"raw",{value:jE(e||t.slice())})),G=(t,e,r)=>new Promise((n,i)=>{var a=l=>{try{s(r.next(l))}catch(u){i(u)}},o=l=>{try{s(r.throw(l))}catch(u){i(u)}},s=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,o);s((r=r.apply(t,e)).next())});import{r as x,a as Dd,R as bA,b as $,c as bV,g as er}from"./vendor-jH1_zuJk.js";import{_ as el,C as tl,r as Os,S as wV,a as AV,F as wA,g as AA,b as kd,c as Md,d as SV,i as _V,p as CV,u as EV,e as NV,E as SA,o as _A,L as jV,f as TV,h as B4,v as z4,j as DE,k as PV,l as V4,m as OV,n as IV,q as DV,s as Is,t as Uc,w as fs,x as U4,y as kV,z as $x,A as Aa,B as Tn,D as gu,G as vu,H as Sa,I as Mu,T as _i,J as W4,K as MV,M as RV}from"./firebase-TNIgAk48.js";var DBe=xV(Gt=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var H4={exports:{}},Nv={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $V=x,LV=Symbol.for("react.element"),FV=Symbol.for("react.fragment"),BV=Object.prototype.hasOwnProperty,zV=$V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VV={key:!0,ref:!0,__self:!0,__source:!0};function G4(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)BV.call(e,n)&&!VV.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:LV,type:t,key:a,ref:o,props:i,_owner:zV.current}}Nv.Fragment=FV;Nv.jsx=G4;Nv.jsxs=G4;H4.exports=Nv;var c=H4.exports,q4,kE=Dd;q4=kE.createRoot,kE.hydrateRoot;function UV(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var r,n,i,a,o=[],s="",l=t.split("/");for(l[0]||l.shift();i=l.shift();)r=i[0],r==="*"?(o.push(r),s+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~n?n:~a?a:i.length)),s+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(s+=(~n?"?":"")+"\\"+i.substring(a))):s+="/"+i;return{keys:o,pattern:new RegExp("^"+s+(e?"(?=$|/)":"/?$"),"i")}}var K4={exports:{}},X4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru=x;function WV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var HV=typeof Object.is=="function"?Object.is:WV,GV=Ru.useState,qV=Ru.useEffect,KV=Ru.useLayoutEffect,XV=Ru.useDebugValue;function YV(t,e){var r=e(),n=GV({inst:{value:r,getSnapshot:e}}),i=n[0].inst,a=n[1];return KV(function(){i.value=r,i.getSnapshot=e,Lx(i)&&a({inst:i})},[t,r,e]),qV(function(){return Lx(i)&&a({inst:i}),t(function(){Lx(i)&&a({inst:i})})},[t]),XV(r),r}function Lx(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!HV(t,r)}catch(n){return!0}}function ZV(t,e){return e()}var QV=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?ZV:YV;X4.useSyncExternalStore=Ru.useSyncExternalStore!==void 0?Ru.useSyncExternalStore:QV;K4.exports=X4;var Y4=K4.exports;const JV=bA.useInsertionEffect,eU=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",Z4=eU?x.useLayoutEffect:x.useEffect,tU=JV||Z4,CA=t=>{const e=x.useRef([t,(...r)=>e[0](...r)]).current;return tU(()=>{e[0]=t}),e[1]},rU="popstate",EA="pushState",NA="replaceState",nU="hashchange",ME=[rU,EA,NA,nU],iU=t=>{for(const e of ME)addEventListener(e,t);return()=>{for(const e of ME)removeEventListener(e,t)}},Q4=(t,e)=>Y4.useSyncExternalStore(iU,t,e),aU=()=>location.search,oU=({ssrSearch:t=""}={})=>Q4(aU,()=>t),RE=()=>location.pathname,sU=({ssrPath:t}={})=>Q4(RE,t?()=>t:RE),cU=(t,{replace:e=!1,state:r=null}={})=>history[e?NA:EA](r,"",t),lU=(t={})=>[sU(t),cU],$E=Symbol.for("wouter_v3");if(typeof history!="undefined"&&typeof window[$E]=="undefined"){for(const t of[EA,NA]){const e=history[t];history[t]=function(){const r=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,$E,{value:!0})}const uU=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",J4=(t="")=>t==="/"?"":t,dU=(t,e)=>t[0]==="~"?t.slice(1):J4(e)+t,fU=(t="",e)=>uU(LE(J4(t)),LE(e)),LE=t=>{try{return decodeURI(t)}catch(e){return t}},ek={hook:lU,searchHook:oU,parser:UV,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},tk=x.createContext(ek),Rd=()=>x.useContext(tk),rk={},nk=x.createContext(rk),hU=()=>x.useContext(nk),Mp=t=>{const[e,r]=t.hook(t);return[fU(t.base,e),CA((n,i)=>r(dU(n,t.base),i))]},ik=()=>Mp(Rd()),ak=(t,e,r,n)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),o=i.exec(r)||[],[s,...l]=o;return s!==void 0?[!0,(()=>{const u=a!==!1?Object.fromEntries(a.map((f,h)=>[f,l[h]])):o.groups;let d=C({},l);return u&&Object.assign(d,u),d})(),...n?[s]:[]]:[!1,null]},ok=r=>{var n=r,{children:t}=n,e=K(n,["children"]);var h,p,m,g;const i=Rd(),a=e.hook?ek:i;let o=a;const[s,l]=(p=(h=e.ssrPath)==null?void 0:h.split("?"))!=null?p:[];l&&(e.ssrSearch=l,e.ssrPath=s),e.hrefs=(g=e.hrefs)!=null?g:(m=e.hook)==null?void 0:m.hrefs;let u=x.useRef({}),d=u.current,f=d;for(let v in a){const y=v==="base"?a[v]+(e[v]||""):e[v]||a[v];d===f&&y!==f[v]&&(u.current=f=C({},f)),f[v]=y,(y!==a[v]||y!==o[v])&&(o=f)}return x.createElement(tk.Provider,{value:o,children:t})},FE=({children:t,component:e},r)=>e?x.createElement(e,{params:r}):typeof t=="function"?t(r):t,pU=t=>{let e=x.useRef(rk);const r=e.current;return e.current=Object.keys(t).length!==Object.keys(r).length||Object.entries(t).some(([n,i])=>i!==r[n])?t:r},li=i=>{var a=i,{path:t,nest:e,match:r}=a,n=K(a,["path","nest","match"]);const o=Rd(),[s]=Mp(o),[l,u,d]=r!=null?r:ak(o.parser,t,s,e),f=pU(C(C({},hU()),u));if(!l)return null;const h=d?x.createElement(ok,{base:d},FE(n,f)):FE(n,f);return x.createElement(nk.Provider,{value:f,children:h})},Zl=x.forwardRef((t,e)=>{const r=Rd(),[n,i]=Mp(r),v=t,{to:a="",href:o=a,onClick:s,asChild:l,children:u,className:d,replace:f,state:h}=v,p=K(v,["to","href","onClick","asChild","children","className","replace","state"]),m=CA(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(s==null||s(y),y.defaultPrevented||(y.preventDefault(),i(o,t)))}),g=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return l&&x.isValidElement(u)?x.cloneElement(u,{onClick:m,href:g}):x.createElement("a",M(C({},p),{onClick:m,href:g,className:d!=null&&d.call?d(n===o):d,children:u,ref:e}))}),sk=t=>Array.isArray(t)?t.flatMap(e=>sk(e&&e.type===x.Fragment?e.props.children:e)):[t],ck=({children:t,location:e})=>{const r=Rd(),[n]=Mp(r);for(const i of sk(t)){let a=0;if(x.isValidElement(i)&&(a=ak(r.parser,i.props.path,e||n,i.props.nest))[0])return x.cloneElement(i,{match:a})}return null},mU=t=>{const{to:e,href:r=e}=t,n=Rd(),[,i]=Mp(n),a=CA(()=>i(e||r,t)),{ssrContext:o}=n;return Z4(()=>{a()},[]),o&&(o.redirectTo=e),null};var jv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Tv=typeof window=="undefined"||"Deno"in globalThis;function ha(){}function gU(t,e){return typeof t=="function"?t(e):t}function vU(t){return typeof t=="number"&&t>=0&&t!==1/0}function yU(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Cb(t,e){return typeof t=="function"?t(e):t}function xU(t,e){return typeof t=="function"?t(e):t}function BE(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:s}=t;if(o){if(n){if(e.queryHash!==jA(o,e.options))return!1}else if(!Ch(e.queryKey,o))return!1}if(r!=="all"){const l=e.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||i&&i!==e.state.fetchStatus||a&&!a(e))}function zE(t,e){const{exact:r,status:n,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(r){if(_h(e.options.mutationKey)!==_h(a))return!1}else if(!Ch(e.options.mutationKey,a))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function jA(t,e){return((e==null?void 0:e.queryKeyHashFn)||_h)(t)}function _h(t){return JSON.stringify(t,(e,r)=>Eb(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Ch(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Ch(t[r],e[r])):!1}function lk(t,e){if(t===e)return t;const r=VE(t)&&VE(e);if(r||Eb(t)&&Eb(e)){const n=r?t:Object.keys(t),i=n.length,a=r?e:Object.keys(e),o=a.length,s=r?[]:{},l=new Set(n);let u=0;for(let d=0;d<o;d++){const f=r?d:a[d];(!r&&l.has(f)||r)&&t[f]===void 0&&e[f]===void 0?(s[f]=void 0,u++):(s[f]=lk(t[f],e[f]),s[f]===t[f]&&t[f]!==void 0&&u++)}return i===o&&u===i?t:s}return e}function VE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Eb(t){if(!UE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!UE(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function UE(t){return Object.prototype.toString.call(t)==="[object Object]"}function bU(t){return new Promise(e=>{setTimeout(e,t)})}function wU(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?lk(t,e):e}function AU(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function SU(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var TA=Symbol();function uk(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===TA?()=>Promise.reject(new Error("Missing queryFn: '".concat(t.queryHash,"'"))):t.queryFn}var $c,gs,Nu,y4,_U=(y4=class extends jv{constructor(){super();It(this,$c);It(this,gs);It(this,Nu);lt(this,Nu,e=>{if(!Tv&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){pe(this,gs)||this.setEventListener(pe(this,Nu))}onUnsubscribe(){var e;this.hasListeners()||((e=pe(this,gs))==null||e.call(this),lt(this,gs,void 0))}setEventListener(e){var r;lt(this,Nu,e),(r=pe(this,gs))==null||r.call(this),lt(this,gs,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){pe(this,$c)!==e&&(lt(this,$c,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof pe(this,$c)=="boolean"?pe(this,$c):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$c=new WeakMap,gs=new WeakMap,Nu=new WeakMap,y4),dk=new _U,ju,vs,Tu,x4,CU=(x4=class extends jv{constructor(){super();It(this,ju,!0);It(this,vs);It(this,Tu);lt(this,Tu,e=>{if(!Tv&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){pe(this,vs)||this.setEventListener(pe(this,Tu))}onUnsubscribe(){var e;this.hasListeners()||((e=pe(this,vs))==null||e.call(this),lt(this,vs,void 0))}setEventListener(e){var r;lt(this,Tu,e),(r=pe(this,vs))==null||r.call(this),lt(this,vs,e(this.setOnline.bind(this)))}setOnline(e){pe(this,ju)!==e&&(lt(this,ju,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return pe(this,ju)}},ju=new WeakMap,vs=new WeakMap,Tu=new WeakMap,x4),I0=new CU;function EU(){let t,e;const r=new Promise((i,a)=>{t=i,e=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}function NU(t){return Math.min(1e3*Ml(2,t),3e4)}function fk(t){return(t!=null?t:"online")==="online"?I0.isOnline():!0}var hk=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Fx(t){return t instanceof hk}function pk(t){let e=!1,r=0,n=!1,i;const a=EU(),o=g=>{var v;n||(h(new hk(g)),(v=t.abort)==null||v.call(t))},s=()=>{e=!0},l=()=>{e=!1},u=()=>dk.isFocused()&&(t.networkMode==="always"||I0.isOnline())&&t.canRun(),d=()=>fk(t.networkMode)&&t.canRun(),f=g=>{var v;n||(n=!0,(v=t.onSuccess)==null||v.call(t,g),i==null||i(),a.resolve(g))},h=g=>{var v;n||(n=!0,(v=t.onError)==null||v.call(t,g),i==null||i(),a.reject(g))},p=()=>new Promise(g=>{var v;i=y=>{(n||u())&&g(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var g;i=void 0,n||(g=t.onContinue)==null||g.call(t)}),m=()=>{if(n)return;let g;const v=r===0?t.initialPromise:void 0;try{g=v!=null?v:t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(f).catch(y=>{var _,E,N;if(n)return;const b=(_=t.retry)!=null?_:Tv?0:3,w=(E=t.retryDelay)!=null?E:NU,S=typeof w=="function"?w(r,y):w,A=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!A){h(y);return}r++,(N=t.onFail)==null||N.call(t,r,y),bU(S).then(()=>u()?void 0:p()).then(()=>{e?h(y):m()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:s,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),a)}}var jU=t=>setTimeout(t,0);function TU(){let t=[],e=0,r=s=>{s()},n=s=>{s()},i=jU;const a=s=>{e?t.push(s):i(()=>{r(s)})},o=()=>{const s=t;t=[],s.length&&i(()=>{n(()=>{s.forEach(l=>{r(l)})})})};return{batch:s=>{let l;e++;try{l=s()}finally{e--,e||o()}return l},batchCalls:s=>(...l)=>{a(()=>{s(...l)})},schedule:a,setNotifyFunction:s=>{r=s},setBatchNotifyFunction:s=>{n=s},setScheduler:s=>{i=s}}}var Jn=TU(),Lc,b4,mk=(b4=class{constructor(){It(this,Lc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vU(this.gcTime)&&lt(this,Lc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t!=null?t:Tv?1/0:5*60*1e3)}clearGcTimeout(){pe(this,Lc)&&(clearTimeout(pe(this,Lc)),lt(this,Lc,void 0))}},Lc=new WeakMap,b4),Pu,Fc,Hi,Bc,$n,Dp,zc,pa,So,w4,PU=(w4=class extends mk{constructor(e){var r;super();It(this,pa);It(this,Pu);It(this,Fc);It(this,Hi);It(this,Bc);It(this,$n);It(this,Dp);It(this,zc);lt(this,zc,!1),lt(this,Dp,e.defaultOptions),this.setOptions(e.options),this.observers=[],lt(this,Bc,e.client),lt(this,Hi,pe(this,Bc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,lt(this,Pu,IU(this.options)),this.state=(r=e.state)!=null?r:pe(this,Pu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=pe(this,$n))==null?void 0:e.promise}setOptions(e){this.options=C(C({},pe(this,Dp)),e),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&pe(this,Hi).remove(this)}setData(e,r){const n=wU(this.state.data,e,this.options);return Mn(this,pa,So).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Mn(this,pa,So).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=pe(this,$n))==null?void 0:n.promise;return(i=pe(this,$n))==null||i.cancel(e),r?r.then(ha).catch(ha):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(pe(this,Pu))}isActive(){return this.observers.some(e=>xU(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===TA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Cb(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!yU(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=pe(this,$n))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=pe(this,$n))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),pe(this,Hi).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(pe(this,$n)&&(pe(this,zc)?pe(this,$n).cancel({revert:!0}):pe(this,$n).cancelRetry()),this.scheduleGc()),pe(this,Hi).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mn(this,pa,So).call(this,{type:"invalidate"})}fetch(e,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(pe(this,$n))return pe(this,$n).continueRetry(),pe(this,$n).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(lt(this,zc,!0),n.signal)})},a=()=>{const h=uk(this.options,r),m=(()=>{const g={client:pe(this,Bc),queryKey:this.queryKey,meta:this.meta};return i(g),g})();return lt(this,zc,!1),this.options.persister?this.options.persister(h,m,this):h(m)},s=(()=>{const h={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:pe(this,Bc),state:this.state,fetchFn:a};return i(h),h})();(u=this.options.behavior)==null||u.onFetch(s,this),lt(this,Fc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=s.fetchOptions)==null?void 0:d.meta))&&Mn(this,pa,So).call(this,{type:"fetch",meta:(f=s.fetchOptions)==null?void 0:f.meta});const l=h=>{var p,m,g,v;Fx(h)&&h.silent||Mn(this,pa,So).call(this,{type:"error",error:h}),Fx(h)||((m=(p=pe(this,Hi).config).onError)==null||m.call(p,h,this),(v=(g=pe(this,Hi).config).onSettled)==null||v.call(g,this.state.data,h,this)),this.scheduleGc()};return lt(this,$n,pk({initialPromise:r==null?void 0:r.initialPromise,fn:s.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var p,m,g,v;if(h===void 0){l(new Error("".concat(this.queryHash," data is undefined")));return}try{this.setData(h)}catch(y){l(y);return}(m=(p=pe(this,Hi).config).onSuccess)==null||m.call(p,h,this),(v=(g=pe(this,Hi).config).onSettled)==null||v.call(g,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,p)=>{Mn(this,pa,So).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{Mn(this,pa,So).call(this,{type:"pause"})},onContinue:()=>{Mn(this,pa,So).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0})),pe(this,$n).start()}},Pu=new WeakMap,Fc=new WeakMap,Hi=new WeakMap,Bc=new WeakMap,$n=new WeakMap,Dp=new WeakMap,zc=new WeakMap,pa=new WeakSet,So=function(e){const r=n=>{var i,a;switch(e.type){case"failed":return M(C({},n),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return M(C({},n),{fetchStatus:"paused"});case"continue":return M(C({},n),{fetchStatus:"fetching"});case"fetch":return M(C(C({},n),OU(n.data,this.options)),{fetchMeta:(i=e.meta)!=null?i:null});case"success":return lt(this,Fc,void 0),C(M(C({},n),{data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(a=e.dataUpdatedAt)!=null?a:Date.now(),error:null,isInvalidated:!1,status:"success"}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const o=e.error;return Fx(o)&&o.revert&&pe(this,Fc)?M(C({},pe(this,Fc)),{fetchStatus:"idle"}):M(C({},n),{error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"});case"invalidate":return M(C({},n),{isInvalidated:!0});case"setState":return C(C({},n),e.state)}};this.state=r(this.state),Jn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),pe(this,Hi).notify({query:this,type:"updated",action:e})})},w4);function OU(t,e){return C({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fk(e.networkMode)?"fetching":"paused"},t===void 0&&{error:null,status:"pending"})}function IU(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n!=null?n:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ra,A4,DU=(A4=class extends jv{constructor(e={}){super();It(this,Ra);this.config=e,lt(this,Ra,new Map)}build(e,r,n){var s;const i=r.queryKey,a=(s=r.queryHash)!=null?s:jA(i,r);let o=this.get(a);return o||(o=new PU({client:e,queryKey:i,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){pe(this,Ra).has(e.queryHash)||(pe(this,Ra).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=pe(this,Ra).get(e.queryHash);r&&(e.destroy(),r===e&&pe(this,Ra).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return pe(this,Ra).get(e)}getAll(){return[...pe(this,Ra).values()]}find(e){const r=C({exact:!0},e);return this.getAll().find(n=>BE(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>BE(e,n)):r}notify(e){Jn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ra=new WeakMap,A4),$a,Yn,Vc,La,as,S4,kU=(S4=class extends mk{constructor(e){super();It(this,La);It(this,$a);It(this,Yn);It(this,Vc);this.mutationId=e.mutationId,lt(this,Yn,e.mutationCache),lt(this,$a,[]),this.state=e.state||MU(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){pe(this,$a).includes(e)||(pe(this,$a).push(e),this.clearGcTimeout(),pe(this,Yn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){lt(this,$a,pe(this,$a).filter(r=>r!==e)),this.scheduleGc(),pe(this,Yn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){pe(this,$a).length||(this.state.status==="pending"?this.scheduleGc():pe(this,Yn).remove(this))}continue(){var e,r;return(r=(e=pe(this,Vc))==null?void 0:e.continue())!=null?r:this.execute(this.state.variables)}execute(e){return G(this,null,function*(){var a,o,s,l,u,d,f,h,p,m,g,v,y,b,w,S,A,_,E,N,T;const r=()=>{Mn(this,La,as).call(this,{type:"continue"})};lt(this,Vc,pk({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(O,j)=>{Mn(this,La,as).call(this,{type:"failed",failureCount:O,error:j})},onPause:()=>{Mn(this,La,as).call(this,{type:"pause"})},onContinue:r,retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>pe(this,Yn).canRun(this)}));const n=this.state.status==="pending",i=!pe(this,Vc).canStart();try{if(n)r();else{Mn(this,La,as).call(this,{type:"pending",variables:e,isPaused:i}),yield(s=(o=pe(this,Yn).config).onMutate)==null?void 0:s.call(o,e,this);const j=yield(u=(l=this.options).onMutate)==null?void 0:u.call(l,e);j!==this.state.context&&Mn(this,La,as).call(this,{type:"pending",context:j,variables:e,isPaused:i})}const O=yield pe(this,Vc).start();return yield(f=(d=pe(this,Yn).config).onSuccess)==null?void 0:f.call(d,O,e,this.state.context,this),yield(p=(h=this.options).onSuccess)==null?void 0:p.call(h,O,e,this.state.context),yield(g=(m=pe(this,Yn).config).onSettled)==null?void 0:g.call(m,O,null,this.state.variables,this.state.context,this),yield(y=(v=this.options).onSettled)==null?void 0:y.call(v,O,null,e,this.state.context),Mn(this,La,as).call(this,{type:"success",data:O}),O}catch(O){try{throw yield(w=(b=pe(this,Yn).config).onError)==null?void 0:w.call(b,O,e,this.state.context,this),yield(A=(S=this.options).onError)==null?void 0:A.call(S,O,e,this.state.context),yield(E=(_=pe(this,Yn).config).onSettled)==null?void 0:E.call(_,void 0,O,this.state.variables,this.state.context,this),yield(T=(N=this.options).onSettled)==null?void 0:T.call(N,void 0,O,e,this.state.context),O}finally{Mn(this,La,as).call(this,{type:"error",error:O})}}finally{pe(this,Yn).runNext(this)}})}},$a=new WeakMap,Yn=new WeakMap,Vc=new WeakMap,La=new WeakSet,as=function(e){const r=n=>{switch(e.type){case"failed":return M(C({},n),{failureCount:e.failureCount,failureReason:e.error});case"pause":return M(C({},n),{isPaused:!0});case"continue":return M(C({},n),{isPaused:!1});case"pending":return M(C({},n),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return M(C({},n),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return M(C({},n),{data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}};this.state=r(this.state),Jn.batch(()=>{pe(this,$a).forEach(n=>{n.onMutationUpdate(e)}),pe(this,Yn).notify({mutation:this,type:"updated",action:e})})},S4);function MU(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Eo,ma,kp,_4,RU=(_4=class extends jv{constructor(e={}){super();It(this,Eo);It(this,ma);It(this,kp);this.config=e,lt(this,Eo,new Set),lt(this,ma,new Map),lt(this,kp,0)}build(e,r,n){const i=new kU({mutationCache:this,mutationId:++Sm(this,kp)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){pe(this,Eo).add(e);const r=_m(e);if(typeof r=="string"){const n=pe(this,ma).get(r);n?n.push(e):pe(this,ma).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(pe(this,Eo).delete(e)){const r=_m(e);if(typeof r=="string"){const n=pe(this,ma).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&pe(this,ma).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=_m(e);if(typeof r=="string"){const n=pe(this,ma).get(r),i=n==null?void 0:n.find(a=>a.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n,i;const r=_m(e);if(typeof r=="string"){const a=(n=pe(this,ma).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(i=a==null?void 0:a.continue())!=null?i:Promise.resolve()}else return Promise.resolve()}clear(){Jn.batch(()=>{pe(this,Eo).forEach(e=>{this.notify({type:"removed",mutation:e})}),pe(this,Eo).clear(),pe(this,ma).clear()})}getAll(){return Array.from(pe(this,Eo))}find(e){const r=C({exact:!0},e);return this.getAll().find(n=>zE(r,n))}findAll(e={}){return this.getAll().filter(r=>zE(e,r))}notify(e){Jn.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Jn.batch(()=>Promise.all(e.map(r=>r.continue().catch(ha))))}},Eo=new WeakMap,ma=new WeakMap,kp=new WeakMap,_4);function _m(t){var e;return(e=t.options.scope)==null?void 0:e.id}function WE(t){return{onFetch:(e,r)=>{var d,f,h,p,m;const n=e.options,i=(h=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let s={pages:[],pageParams:[]},l=0;const u=()=>G(this,null,function*(){var w;let g=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=uk(e.options,e.fetchOptions),b=(S,A,_)=>G(this,null,function*(){if(g)return Promise.reject();if(A==null&&S.pages.length)return Promise.resolve(S);const N=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:_?"backward":"forward",meta:e.options.meta};return v(P),P})(),T=yield y(N),{maxPages:O}=e.options,j=_?SU:AU;return{pages:j(S.pages,T,O),pageParams:j(S.pageParams,A,O)}});if(i&&a.length){const S=i==="backward",A=S?$U:HE,_={pages:a,pageParams:o},E=A(n,_);s=yield b(_,E,S)}else{const S=t!=null?t:a.length;do{const A=l===0?(w=o[0])!=null?w:n.initialPageParam:HE(n,s);if(l>0&&A==null)break;s=yield b(s,A),l++}while(l<S)}return s});e.options.persister?e.fetchFn=()=>{var g,v;return(v=(g=e.options).persister)==null?void 0:v.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=u}}}function HE(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function $U(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var jr,ys,xs,Ou,Iu,bs,Du,ku,C4,LU=(C4=class{constructor(t={}){It(this,jr);It(this,ys);It(this,xs);It(this,Ou);It(this,Iu);It(this,bs);It(this,Du);It(this,ku);lt(this,jr,t.queryCache||new DU),lt(this,ys,t.mutationCache||new RU),lt(this,xs,t.defaultOptions||{}),lt(this,Ou,new Map),lt(this,Iu,new Map),lt(this,bs,0)}mount(){Sm(this,bs)._++,pe(this,bs)===1&&(lt(this,Du,dk.subscribe(t=>G(this,null,function*(){t&&(yield this.resumePausedMutations(),pe(this,jr).onFocus())}))),lt(this,ku,I0.subscribe(t=>G(this,null,function*(){t&&(yield this.resumePausedMutations(),pe(this,jr).onOnline())}))))}unmount(){var t,e;Sm(this,bs)._--,pe(this,bs)===0&&((t=pe(this,Du))==null||t.call(this),lt(this,Du,void 0),(e=pe(this,ku))==null||e.call(this),lt(this,ku,void 0))}isFetching(t){return pe(this,jr).findAll(M(C({},t),{fetchStatus:"fetching"})).length}isMutating(t){return pe(this,ys).findAll(M(C({},t),{status:"pending"})).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=pe(this,jr).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=pe(this,jr).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Cb(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return pe(this,jr).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=pe(this,jr).get(n.queryHash),a=i==null?void 0:i.state.data,o=gU(e,a);if(o!==void 0)return pe(this,jr).build(this,n).setData(o,M(C({},r),{manual:!0}))}setQueriesData(t,e,r){return Jn.batch(()=>pe(this,jr).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=pe(this,jr).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=pe(this,jr);Jn.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=pe(this,jr);return Jn.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries(C({type:"active"},t),e)))}cancelQueries(t,e={}){const r=C({revert:!0},e),n=Jn.batch(()=>pe(this,jr).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(ha).catch(ha)}invalidateQueries(t,e={}){return Jn.batch(()=>{var r,n;return pe(this,jr).findAll(t).forEach(i=>{i.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries(M(C({},t),{type:(n=(r=t==null?void 0:t.refetchType)!=null?r:t==null?void 0:t.type)!=null?n:"active"}),e)})}refetchQueries(t,e={}){var i;const r=M(C({},e),{cancelRefetch:(i=e.cancelRefetch)!=null?i:!0}),n=Jn.batch(()=>pe(this,jr).findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,r);return r.throwOnError||(o=o.catch(ha)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(ha)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=pe(this,jr).build(this,e);return r.isStaleByTime(Cb(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ha).catch(ha)}fetchInfiniteQuery(t){return t.behavior=WE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ha).catch(ha)}ensureInfiniteQueryData(t){return t.behavior=WE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return I0.isOnline()?pe(this,ys).resumePausedMutations():Promise.resolve()}getQueryCache(){return pe(this,jr)}getMutationCache(){return pe(this,ys)}getDefaultOptions(){return pe(this,xs)}setDefaultOptions(t){lt(this,xs,t)}setQueryDefaults(t,e){pe(this,Ou).set(_h(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...pe(this,Ou).values()],r={};return e.forEach(n=>{Ch(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){pe(this,Iu).set(_h(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...pe(this,Iu).values()],r={};return e.forEach(n=>{Ch(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e=M(C(C(C({},pe(this,xs).queries),this.getQueryDefaults(t.queryKey)),t),{_defaulted:!0});return e.queryHash||(e.queryHash=jA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===TA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:M(C(C(C({},pe(this,xs).mutations),(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey)),t),{_defaulted:!0})}clear(){pe(this,jr).clear(),pe(this,ys).clear()}},jr=new WeakMap,ys=new WeakMap,xs=new WeakMap,Ou=new WeakMap,Iu=new WeakMap,bs=new WeakMap,Du=new WeakMap,ku=new WeakMap,C4),FU=x.createContext(void 0),BU=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(FU.Provider,{value:t,children:e}));function zU(t){return G(this,null,function*(){if(!t.ok){const e=(yield t.text())||t.statusText;throw new Error("".concat(t.status,": ").concat(e))}})}const VU=({on401:t})=>r=>G(Gt,[r],function*({queryKey:e}){const n=yield fetch(e[0],{credentials:"include"});return yield zU(n),yield n.json()}),UU=new LU({defaultOptions:{queries:{queryFn:VU({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),WU=1,HU=1e6;let Bx=0;function GU(){return Bx=(Bx+1)%Number.MAX_SAFE_INTEGER,Bx.toString()}const zx=new Map,GE=t=>{if(zx.has(t))return;const e=setTimeout(()=>{zx.delete(t),oh({type:"REMOVE_TOAST",toastId:t})},HU);zx.set(t,e)},qU=(t,e)=>{switch(e.type){case"ADD_TOAST":return M(C({},t),{toasts:[e.toast,...t.toasts].slice(0,WU)});case"UPDATE_TOAST":return M(C({},t),{toasts:t.toasts.map(r=>r.id===e.toast.id?C(C({},r),e.toast):r)});case"DISMISS_TOAST":{const{toastId:r}=e;return r?GE(r):t.toasts.forEach(n=>{GE(n.id)}),M(C({},t),{toasts:t.toasts.map(n=>n.id===r||r===void 0?M(C({},n),{open:!1}):n)})}case"REMOVE_TOAST":return e.toastId===void 0?M(C({},t),{toasts:[]}):M(C({},t),{toasts:t.toasts.filter(r=>r.id!==e.toastId)})}},f0=[];let h0={toasts:[]};function oh(t){h0=qU(h0,t),f0.forEach(e=>{e(h0)})}function KU(e){var t=K(e,[]);const r=GU(),n=a=>oh({type:"UPDATE_TOAST",toast:M(C({},a),{id:r})}),i=()=>oh({type:"DISMISS_TOAST",toastId:r});return oh({type:"ADD_TOAST",toast:M(C({},t),{id:r,open:!0,onOpenChange:a=>{a||i()},duration:2e3})}),{id:r,dismiss:i,update:n}}function Nr(){const[t,e]=x.useState(h0);return x.useEffect(()=>(f0.push(e),()=>{const r=f0.indexOf(e);r>-1&&f0.splice(r,1)}),[t]),M(C({},t),{toast:KU,dismiss:r=>oh({type:"DISMISS_TOAST",toastId:r})})}function Ae(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function qE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Pv(...t){return e=>{let r=!1;const n=t.map(i=>{const a=qE(i,e);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():qE(t[i],null)}}}}function ft(...t){return x.useCallback(Pv(...t),t)}function XU(t,e){const r=x.createContext(e),n=a=>{const u=a,{children:o}=u,s=K(u,["children"]),l=x.useMemo(()=>s,Object.values(s));return c.jsx(r.Provider,{value:l,children:o})};n.displayName=t+"Provider";function i(a){const o=x.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error("`".concat(a,"` must be used within `").concat(t,"`"))}return[n,i]}function ai(t,e=[]){let r=[];function n(a,o){const s=x.createContext(o),l=r.length;r=[...r,o];const u=f=>{var b;const y=f,{scope:h,children:p}=y,m=K(y,["scope","children"]),g=((b=h==null?void 0:h[t])==null?void 0:b[l])||s,v=x.useMemo(()=>m,Object.values(m));return c.jsx(g.Provider,{value:v,children:p})};u.displayName=a+"Provider";function d(f,h){var g;const p=((g=h==null?void 0:h[t])==null?void 0:g[l])||s,m=x.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error("`".concat(f,"` must be used within `").concat(a,"`"))}return[u,d]}const i=()=>{const a=r.map(o=>x.createContext(o));return function(s){const l=(s==null?void 0:s[t])||a;return x.useMemo(()=>({["__scope".concat(t)]:M(C({},s),{[t]:l})}),[s,l])}};return i.scopeName=t,[n,YU(i,...e)]}function YU(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((s,{useScope:l,scopeName:u})=>{const f=l(a)["__scope".concat(u)];return C(C({},s),f)},{});return x.useMemo(()=>({["__scope".concat(e.scopeName)]:o}),[o])}};return r.scopeName=e.scopeName,r}function Ds(t){const e=ZU(t),r=x.forwardRef((n,i)=>{const u=n,{children:a}=u,o=K(u,["children"]),s=x.Children.toArray(a),l=s.find(QU);if(l){const d=l.props.children,f=s.map(h=>h===l?x.Children.count(d)>1?x.Children.only(null):x.isValidElement(d)?d.props.children:null:h);return c.jsx(e,M(C({},o),{ref:i,children:x.isValidElement(d)?x.cloneElement(d,void 0,f):null}))}return c.jsx(e,M(C({},o),{ref:i,children:a}))});return r.displayName="".concat(t,".Slot"),r}var gk=Ds("Slot");function ZU(t){const e=x.forwardRef((r,n)=>{const o=r,{children:i}=o,a=K(o,["children"]);if(x.isValidElement(i)){const s=eW(i),l=JU(a,i.props);return i.type!==x.Fragment&&(l.ref=n?Pv(n,s):s),x.cloneElement(i,l)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName="".concat(t,".SlotClone"),e}var vk=Symbol("radix.slottable");function yk(t){const e=({children:r})=>c.jsx(c.Fragment,{children:r});return e.displayName="".concat(t,".Slottable"),e.__radixId=vk,e}function QU(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===vk}function JU(t,e){const r=C({},e);for(const n in e){const i=t[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...s)=>{const l=a(...s);return i(...s),l}:i&&(r[n]=i):n==="style"?r[n]=C(C({},i),a):n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return C(C({},t),r)}function eW(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ov(t){const e=t+"CollectionProvider",[r,n]=ai(e),[i,a]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:y}=g,b=$.useRef(null),w=$.useRef(new Map).current;return c.jsx(i,{scope:v,itemMap:w,collectionRef:b,children:y})};o.displayName=e;const s=t+"CollectionSlot",l=Ds(s),u=$.forwardRef((g,v)=>{const{scope:y,children:b}=g,w=a(s,y),S=ft(v,w.collectionRef);return c.jsx(l,{ref:S,children:b})});u.displayName=s;const d=t+"CollectionItemSlot",f="data-radix-collection-item",h=Ds(d),p=$.forwardRef((g,v)=>{const E=g,{scope:y,children:b}=E,w=K(E,["scope","children"]),S=$.useRef(null),A=ft(v,S),_=a(d,y);return $.useEffect(()=>(_.itemMap.set(S,C({ref:S},w)),()=>void _.itemMap.delete(S))),c.jsx(h,{[f]:"",ref:A,children:b})});p.displayName=d;function m(g){const v=a(t+"CollectionConsumer",g);return $.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll("[".concat(f,"]")));return Array.from(v.itemMap.values()).sort((_,E)=>w.indexOf(_.ref.current)-w.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},m,n]}var tW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=tW.reduce((t,e)=>{const r=Ds("Primitive.".concat(e)),n=x.forwardRef((i,a)=>{const u=i,{asChild:o}=u,s=K(u,["asChild"]),l=o?r:e;return typeof window!="undefined"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,M(C({},s),{ref:a}))});return n.displayName="Primitive.".concat(e),M(C({},t),{[e]:n})},{});function PA(t,e){t&&Dd.flushSync(()=>t.dispatchEvent(e))}function Fr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function rW(t,e=globalThis==null?void 0:globalThis.document){const r=Fr(t);x.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var nW="DismissableLayer",Nb="dismissableLayer.update",iW="dismissableLayer.pointerDownOutside",aW="dismissableLayer.focusOutside",KE,xk=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xl=x.forwardRef((t,e)=>{var N;const E=t,{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:s}=E,l=K(E,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),u=x.useContext(xk),[d,f]=x.useState(null),h=(N=d==null?void 0:d.ownerDocument)!=null?N:globalThis==null?void 0:globalThis.document,[,p]=x.useState({}),m=ft(e,T=>f(T)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(v),b=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,A=sW(T=>{const O=T.target,j=[...u.branches].some(P=>P.contains(O));!S||j||(i==null||i(T),o==null||o(T),T.defaultPrevented||s==null||s())},h),_=cW(T=>{const O=T.target;[...u.branches].some(P=>P.contains(O))||(a==null||a(T),o==null||o(T),T.defaultPrevented||s==null||s())},h);return rW(T=>{b===u.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&s&&(T.preventDefault(),s()))},h),x.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(KE=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),XE(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=KE)}},[d,h,r,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),XE())},[d,u]),x.useEffect(()=>{const T=()=>p({});return document.addEventListener(Nb,T),()=>document.removeEventListener(Nb,T)},[]),c.jsx(Ge.div,M(C({},l),{ref:m,style:C({pointerEvents:w?S?"auto":"none":void 0},t.style),onFocusCapture:Ae(t.onFocusCapture,_.onFocusCapture),onBlurCapture:Ae(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Ae(t.onPointerDownCapture,A.onPointerDownCapture)}))});xl.displayName=nW;var oW="DismissableLayerBranch",bk=x.forwardRef((t,e)=>{const r=x.useContext(xk),n=x.useRef(null),i=ft(e,n);return x.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),c.jsx(Ge.div,M(C({},t),{ref:i}))});bk.displayName=oW;function sW(t,e=globalThis==null?void 0:globalThis.document){const r=Fr(t),n=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=s=>{if(s.target&&!n.current){let l=function(){wk(iW,r,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function cW(t,e=globalThis==null?void 0:globalThis.document){const r=Fr(t),n=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!n.current&&wk(aW,r,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function XE(){const t=new CustomEvent(Nb);document.dispatchEvent(t)}function wk(t,e,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?PA(i,a):i.dispatchEvent(a)}var lW=xl,uW=bk,bn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},dW="Portal",$d=x.forwardRef((t,e)=>{var l;const s=t,{container:r}=s,n=K(s,["container"]),[i,a]=x.useState(!1);bn(()=>a(!0),[]);const o=r||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?bV.createPortal(c.jsx(Ge.div,M(C({},n),{ref:e})),o):null});$d.displayName=dW;function fW(t,e){return x.useReducer((r,n)=>{const i=e[r][n];return i!=null?i:r},t)}var Dn=t=>{const{present:e,children:r}=t,n=hW(e),i=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),a=ft(n.ref,pW(i));return typeof r=="function"||n.isPresent?x.cloneElement(i,{ref:a}):null};Dn.displayName="Presence";function hW(t){const[e,r]=x.useState(),n=x.useRef(null),i=x.useRef(t),a=x.useRef("none"),o=t?"mounted":"unmounted",[s,l]=fW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const u=Cm(n.current);a.current=s==="mounted"?u:"none"},[s]),bn(()=>{const u=n.current,d=i.current;if(d!==t){const h=a.current,p=Cm(u);t?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),bn(()=>{var u;if(e){let d;const f=(u=e.ownerDocument.defaultView)!=null?u:window,h=m=>{const v=Cm(n.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",d=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},p=m=>{m.target===e&&(a.current=Cm(n.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{f.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:x.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Cm(t){return(t==null?void 0:t.animationName)||"none"}function pW(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var mW=bA[" useInsertionEffect ".trim().toString()]||bn;function io({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[i,a,o]=gW({defaultProp:e,onChange:r}),s=t!==void 0,l=s?t:i;{const d=x.useRef(t!==void 0);x.useEffect(()=>{const f=d.current;if(f!==s){const h=f?"controlled":"uncontrolled",p=s?"controlled":"uncontrolled";console.warn("".concat(n," is changing from ").concat(h," to ").concat(p,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}d.current=s},[s,n])}const u=x.useCallback(d=>{var f;if(s){const h=vW(d)?d(t):d;h!==t&&((f=o.current)==null||f.call(o,h))}else a(d)},[s,t,a,o]);return[l,u]}function gW({defaultProp:t,onChange:e}){const[r,n]=x.useState(t),i=x.useRef(r),a=x.useRef(e);return mW(()=>{a.current=e},[e]),x.useEffect(()=>{var o;i.current!==r&&((o=a.current)==null||o.call(a,r),i.current=r)},[r,i]),[r,n,a]}function vW(t){return typeof t=="function"}var Ak=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yW="VisuallyHidden",Iv=x.forwardRef((t,e)=>c.jsx(Ge.span,M(C({},t),{ref:e,style:C(C({},Ak),t.style)})));Iv.displayName=yW;var xW=Iv,OA="ToastProvider",[IA,bW,wW]=Ov("Toast"),[Sk,$Be]=ai("Toast",[wW]),[AW,Dv]=Sk(OA),_k=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=t,[s,l]=x.useState(null),[u,d]=x.useState(0),f=x.useRef(!1),h=x.useRef(!1);return r.trim()||console.error("Invalid prop `label` supplied to `".concat(OA,"`. Expected non-empty `string`.")),c.jsx(IA.Provider,{scope:e,children:c.jsx(AW,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:s,onViewportChange:l,onToastAdd:x.useCallback(()=>d(p=>p+1),[]),onToastRemove:x.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};_k.displayName=OA;var Ck="ToastViewport",SW=["F8"],jb="toast.viewportPause",Tb="toast.viewportResume",Ek=x.forwardRef((t,e)=>{const v=t,{__scopeToast:r,hotkey:n=SW,label:i="Notifications ({hotkey})"}=v,a=K(v,["__scopeToast","hotkey","label"]),o=Dv(Ck,r),s=bW(r),l=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=x.useRef(null),h=ft(e,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;x.useEffect(()=>{const y=b=>{var S;n.length!==0&&n.every(A=>b[A]||b.code===A)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n]),x.useEffect(()=>{const y=l.current,b=f.current;if(m&&y&&b){const w=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(jb);b.dispatchEvent(E),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(Tb);b.dispatchEvent(E),o.isClosePausedRef.current=!1}},A=E=>{!y.contains(E.relatedTarget)&&S()},_=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",w),y.addEventListener("focusout",A),y.addEventListener("pointermove",w),y.addEventListener("pointerleave",_),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",w),y.removeEventListener("focusout",A),y.removeEventListener("pointermove",w),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[m,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:y})=>{const w=s().map(S=>{const A=S.ref.current,_=[A,...RW(A)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?w.reverse():w).flat()},[s]);return x.useEffect(()=>{const y=f.current;if(y){const b=w=>{var _,E,N;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const T=document.activeElement,O=w.shiftKey;if(w.target===y&&O){(_=u.current)==null||_.focus();return}const D=g({tabbingDirection:O?"backwards":"forwards"}),F=D.findIndex(I=>I===T);Vx(D.slice(F+1))?w.preventDefault():O?(E=u.current)==null||E.focus():(N=d.current)==null||N.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[s,g]),c.jsxs(uW,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&c.jsx(Pb,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});Vx(y)}}),c.jsx(IA.Slot,{scope:r,children:c.jsx(Ge.ol,M(C({tabIndex:-1},a),{ref:h}))}),m&&c.jsx(Pb,{ref:d,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});Vx(y)}})]})});Ek.displayName=Ck;var Nk="ToastFocusProxy",Pb=x.forwardRef((t,e)=>{const o=t,{__scopeToast:r,onFocusFromOutsideViewport:n}=o,i=K(o,["__scopeToast","onFocusFromOutsideViewport"]),a=Dv(Nk,r);return c.jsx(Iv,M(C({"aria-hidden":!0,tabIndex:0},i),{ref:e,style:{position:"fixed"},onFocus:s=>{var d;const l=s.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&n()}}))});Pb.displayName=Nk;var Rp="Toast",_W="toast.swipeStart",CW="toast.swipeMove",EW="toast.swipeCancel",NW="toast.swipeEnd",jk=x.forwardRef((t,e)=>{const u=t,{forceMount:r,open:n,defaultOpen:i,onOpenChange:a}=u,o=K(u,["forceMount","open","defaultOpen","onOpenChange"]),[s,l]=io({prop:n,defaultProp:i!=null?i:!0,onChange:a,caller:Rp});return c.jsx(Dn,{present:r||s,children:c.jsx(PW,M(C({open:s},o),{ref:e,onClose:()=>l(!1),onPause:Fr(t.onPause),onResume:Fr(t.onResume),onSwipeStart:Ae(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ae(t.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(f,"px")),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(h,"px"))}),onSwipeCancel:Ae(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ae(t.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(f,"px")),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(h,"px")),l(!1)})}))})});jk.displayName=Rp;var[jW,TW]=Sk(Rp,{onClose(){}}),PW=x.forwardRef((t,e)=>{const F=t,{__scopeToast:r,type:n="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:s,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:p}=F,m=K(F,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),g=Dv(Rp,r),[v,y]=x.useState(null),b=ft(e,I=>y(I)),w=x.useRef(null),S=x.useRef(null),A=i||g.duration,_=x.useRef(0),E=x.useRef(A),N=x.useRef(0),{onToastAdd:T,onToastRemove:O}=g,j=Fr(()=>{var k;(v==null?void 0:v.contains(document.activeElement))&&((k=g.viewport)==null||k.focus()),o()}),P=x.useCallback(I=>{!I||I===1/0||(window.clearTimeout(N.current),_.current=new Date().getTime(),N.current=window.setTimeout(j,I))},[j]);x.useEffect(()=>{const I=g.viewport;if(I){const k=()=>{P(E.current),u==null||u()},R=()=>{const L=new Date().getTime()-_.current;E.current=E.current-L,window.clearTimeout(N.current),l==null||l()};return I.addEventListener(jb,R),I.addEventListener(Tb,k),()=>{I.removeEventListener(jb,R),I.removeEventListener(Tb,k)}}},[g.viewport,A,l,u,P]),x.useEffect(()=>{a&&!g.isClosePausedRef.current&&P(A)},[a,A,g.isClosePausedRef,P]),x.useEffect(()=>(T(),()=>O()),[T,O]);const D=x.useMemo(()=>v?Mk(v):null,[v]);return g.viewport?c.jsxs(c.Fragment,{children:[D&&c.jsx(OW,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),c.jsx(jW,{scope:r,onClose:j,children:Dd.createPortal(c.jsx(IA.ItemSlot,{scope:r,children:c.jsx(lW,{asChild:!0,onEscapeKeyDown:Ae(s,()=>{g.isFocusedToastEscapeKeyDownRef.current||j(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(Ge.li,M(C({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection},m),{ref:b,style:C({userSelect:"none",touchAction:"none"},t.style),onKeyDown:Ae(t.onKeyDown,I=>{I.key==="Escape"&&(s==null||s(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:Ae(t.onPointerDown,I=>{I.button===0&&(w.current={x:I.clientX,y:I.clientY})}),onPointerMove:Ae(t.onPointerMove,I=>{if(!w.current)return;const k=I.clientX-w.current.x,R=I.clientY-w.current.y,L=!!S.current,V=["left","right"].includes(g.swipeDirection),W=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,q=V?W(0,k):0,H=V?0:W(0,R),J=I.pointerType==="touch"?10:2,de={x:q,y:H},se={originalEvent:I,delta:de};L?(S.current=de,Em(CW,f,se,{discrete:!1})):YE(de,g.swipeDirection,J)?(S.current=de,Em(_W,d,se,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(k)>J||Math.abs(R)>J)&&(w.current=null)}),onPointerUp:Ae(t.onPointerUp,I=>{const k=S.current,R=I.target;if(R.hasPointerCapture(I.pointerId)&&R.releasePointerCapture(I.pointerId),S.current=null,w.current=null,k){const L=I.currentTarget,V={originalEvent:I,delta:k};YE(k,g.swipeDirection,g.swipeThreshold)?Em(NW,p,V,{discrete:!0}):Em(EW,h,V,{discrete:!0}),L.addEventListener("click",W=>W.preventDefault(),{once:!0})}})}))})}),g.viewport)})]}):null}),OW=t=>{const u=t,{__scopeToast:e,children:r}=u,n=K(u,["__scopeToast","children"]),i=Dv(Rp,e),[a,o]=x.useState(!1),[s,l]=x.useState(!1);return kW(()=>o(!0)),x.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),s?null:c.jsx($d,{asChild:!0,children:c.jsx(Iv,M(C({},n),{children:a&&c.jsxs(c.Fragment,{children:[i.label," ",r]})}))})},IW="ToastTitle",Tk=x.forwardRef((t,e)=>{const i=t,{__scopeToast:r}=i,n=K(i,["__scopeToast"]);return c.jsx(Ge.div,M(C({},n),{ref:e}))});Tk.displayName=IW;var DW="ToastDescription",Pk=x.forwardRef((t,e)=>{const i=t,{__scopeToast:r}=i,n=K(i,["__scopeToast"]);return c.jsx(Ge.div,M(C({},n),{ref:e}))});Pk.displayName=DW;var Ok="ToastAction",Ik=x.forwardRef((t,e)=>{const i=t,{altText:r}=i,n=K(i,["altText"]);return r.trim()?c.jsx(kk,{altText:r,asChild:!0,children:c.jsx(DA,M(C({},n),{ref:e}))}):(console.error("Invalid prop `altText` supplied to `".concat(Ok,"`. Expected non-empty `string`.")),null)});Ik.displayName=Ok;var Dk="ToastClose",DA=x.forwardRef((t,e)=>{const a=t,{__scopeToast:r}=a,n=K(a,["__scopeToast"]),i=TW(Dk,r);return c.jsx(kk,{asChild:!0,children:c.jsx(Ge.button,M(C({type:"button"},n),{ref:e,onClick:Ae(t.onClick,i.onClose)}))})});DA.displayName=Dk;var kk=x.forwardRef((t,e)=>{const a=t,{__scopeToast:r,altText:n}=a,i=K(a,["__scopeToast","altText"]);return c.jsx(Ge.div,M(C({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},i),{ref:e}))});function Mk(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),MW(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Mk(n))}}),e}function Em(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?PA(i,a):i.dispatchEvent(a)}var YE=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),a=n>i;return e==="left"||e==="right"?a&&n>r:!a&&i>r};function kW(t=()=>{}){const e=Fr(t);bn(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function MW(t){return t.nodeType===t.ELEMENT_NODE}function RW(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Vx(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var $W=_k,Rk=Ek,$k=jk,Lk=Tk,Fk=Pk,Bk=Ik,zk=DA;function Vk(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Vk(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function ut(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Vk(t))&&(n&&(n+=" "),n+=e);return n}const ZE=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,QE=ut,Ld=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return QE(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(u=>{const d=r==null?void 0:r[u],f=a==null?void 0:a[u];if(d===null)return null;const h=ZE(d)||ZE(f);return i[u][h]}),s=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let m=d,{class:f,className:h}=m,p=K(m,["class","className"]);return Object.entries(p).every(g=>{let[v,y]=g;return Array.isArray(y)?y.includes(C(C({},a),s)[v]):C(C({},a),s)[v]===y})?[...u,f,h]:u},[]);return QE(t,o,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Uk=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=x.forwardRef((u,l)=>{var d=u,{color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o}=d,s=K(d,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return x.createElement("svg",C(M(C({ref:l},FW),{width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Uk("lucide",i)}),s),[...o.map(([f,h])=>x.createElement(f,h)),...Array.isArray(a)?a:[a]])});/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(t,e)=>{const r=x.forwardRef((o,a)=>{var s=o,{className:n}=s,i=K(s,["className"]);return x.createElement(BW,C({ref:a,iconNode:e,className:Uk("lucide-".concat(LW(t)),n)},i))});return r.displayName="".concat(t),r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ve("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=ve("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ve("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=ve("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=ve("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=ve("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=ve("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=ve("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=ve("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ve("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=ve("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=ve("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=ve("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ve("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=ve("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=ve("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=ve("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=ve("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl=ve("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=ve("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=ve("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ve("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=ve("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=ve("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=ve("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ve("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=ve("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=ve("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ve("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=ve("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ve("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=ve("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=ve("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=ve("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=ve("NotebookText",[["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["path",{d:"M9.5 8h5",key:"11mslq"}],["path",{d:"M9.5 12H16",key:"ktog6x"}],["path",{d:"M9.5 16H14",key:"p1seyn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=ve("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=ve("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=ve("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=ve("Pizza",[["path",{d:"M15 11h.01",key:"rns66s"}],["path",{d:"M11 15h.01",key:"k85uqc"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"m2 16 20 6-6-20A20 20 0 0 0 2 16",key:"e4slt2"}],["path",{d:"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4",key:"rerf8f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=ve("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=ve("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=ve("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=ve("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=ve("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=ve("ShoppingBasket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=ve("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=ve("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=ve("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=ve("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=ve("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=ve("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=ve("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=ve("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=ve("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=ve("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=ve("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=ve("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),FA="-",mH=t=>{const e=vH(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const s=o.split(FA);return s[0]===""&&s.length!==1&&s.shift(),Jk(s,e)||gH(o)},getConflictingClassGroupIds:(o,s)=>{const l=r[o]||[];return s&&n[o]?[...l,...n[o]]:l}}},Jk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?Jk(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(FA);return(o=e.validators.find(({validator:s})=>s(a)))==null?void 0:o.classGroupId},nN=/^\[(.+)\]$/,gH=t=>{if(nN.test(t)){const e=nN.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},vH=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return xH(Object.entries(t.classGroups),r).forEach(([a,o])=>{Rb(o,n,a,e)}),n},Rb=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:iN(e,i);a.classGroupId=r;return}if(typeof i=="function"){if(yH(i)){Rb(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{Rb(o,iN(e,a),r,n)})})},iN=(t,e)=>{let r=t;return e.split(FA).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},yH=t=>t.isThemeGetter,xH=(t,e)=>e?t.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,s])=>[e+o,s])):a);return[r,i]}):t,bH=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(a,o)=>{r.set(a,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}},eM="!",wH=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],a=e.length,o=s=>{const l=[];let u=0,d=0,f;for(let v=0;v<s.length;v++){let y=s[v];if(u===0){if(y===i&&(n||s.slice(v,v+a)===e)){l.push(s.slice(d,v)),d=v+a;continue}if(y==="/"){f=v;continue}}y==="["?u++:y==="]"&&u--}const h=l.length===0?s:s.substring(d),p=h.startsWith(eM),m=p?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return r?s=>r({className:s,parseClassName:o}):o},AH=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},SH=t=>C({cache:bH(t.cacheSize),parseClassName:wH(t)},mH(t)),_H=/\s+/,CH=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,a=[],o=t.trim().split(_H);let s="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=r(u);let m=!!p,g=n(m?h.substring(0,p):h);if(!g){if(!m){s=u+(s.length>0?" "+s:s);continue}if(g=n(h),!g){s=u+(s.length>0?" "+s:s);continue}m=!1}const v=AH(d).join(":"),y=f?v+eM:v,b=y+g;if(a.includes(b))continue;a.push(b);const w=i(g,m);for(let S=0;S<w.length;++S){const A=w[S];a.push(y+A)}s=u+(s.length>0?" "+s:s)}return s};function EH(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=tM(e))&&(n&&(n+=" "),n+=r);return n}const tM=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=tM(t[n]))&&(r&&(r+=" "),r+=e);return r};function NH(t,...e){let r,n,i,a=o;function o(l){const u=e.reduce((d,f)=>f(d),t());return r=SH(u),n=r.cache.get,i=r.cache.set,a=s,s(l)}function s(l){const u=n(l);if(u)return u;const d=CH(l,r);return i(l,d),d}return function(){return a(EH.apply(null,arguments))}}const mr=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},rM=/^\[(?:([a-z-]+):)?(.+)\]$/i,jH=/^\d+\/\d+$/,TH=new Set(["px","full","screen"]),PH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,OH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,kH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,yo=t=>yu(t)||TH.has(t)||jH.test(t),es=t=>Fd(t,"length",VH),yu=t=>!!t&&!Number.isNaN(Number(t)),Ux=t=>Fd(t,"number",yu),Sf=t=>!!t&&Number.isInteger(Number(t)),MH=t=>t.endsWith("%")&&yu(t.slice(0,-1)),ht=t=>rM.test(t),ts=t=>PH.test(t),RH=new Set(["length","size","percentage"]),$H=t=>Fd(t,RH,nM),LH=t=>Fd(t,"position",nM),FH=new Set(["image","url"]),BH=t=>Fd(t,FH,WH),zH=t=>Fd(t,"",UH),_f=()=>!0,Fd=(t,e,r)=>{const n=rM.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},VH=t=>OH.test(t)&&!IH.test(t),nM=()=>!1,UH=t=>DH.test(t),WH=t=>kH.test(t),HH=()=>{const t=mr("colors"),e=mr("spacing"),r=mr("blur"),n=mr("brightness"),i=mr("borderColor"),a=mr("borderRadius"),o=mr("borderSpacing"),s=mr("borderWidth"),l=mr("contrast"),u=mr("grayscale"),d=mr("hueRotate"),f=mr("invert"),h=mr("gap"),p=mr("gradientColorStops"),m=mr("gradientColorStopPositions"),g=mr("inset"),v=mr("margin"),y=mr("opacity"),b=mr("padding"),w=mr("saturate"),S=mr("scale"),A=mr("sepia"),_=mr("skew"),E=mr("space"),N=mr("translate"),T=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",ht,e],P=()=>[ht,e],D=()=>["",yo,es],F=()=>["auto",yu,ht],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],k=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",ht],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[yu,ht];return{cacheSize:500,separator:":",theme:{colors:[_f],spacing:[yo,es],blur:["none","",ts,ht],brightness:q(),borderColor:[t],borderRadius:["none","","full",ts,ht],borderSpacing:P(),borderWidth:D(),contrast:q(),grayscale:V(),hueRotate:q(),invert:V(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[MH,es],inset:j(),margin:j(),opacity:q(),padding:P(),saturate:q(),scale:q(),sepia:V(),skew:q(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",ht]}],container:["container"],columns:[{columns:[ts]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),ht]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Sf,ht]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ht]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Sf,ht]}],"grid-cols":[{"grid-cols":[_f]}],"col-start-end":[{col:["auto",{span:["full",Sf,ht]},ht]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[_f]}],"row-start-end":[{row:["auto",{span:[Sf,ht]},ht]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ht]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ht]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ht,e]}],"min-w":[{"min-w":[ht,e,"min","max","fit"]}],"max-w":[{"max-w":[ht,e,"none","full","min","max","fit","prose",{screen:[ts]},ts]}],h:[{h:[ht,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ht,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ht,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ht,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ts,es]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ux]}],"font-family":[{font:[_f]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ht]}],"line-clamp":[{"line-clamp":["none",yu,Ux]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",yo,ht]}],"list-image":[{"list-image":["none",ht]}],"list-style-type":[{list:["none","disc","decimal",ht]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...k(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",yo,es]}],"underline-offset":[{"underline-offset":["auto",yo,ht]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ht]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ht]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),LH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$H]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},BH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...k(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:k()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...k()]}],"outline-offset":[{"outline-offset":[yo,ht]}],"outline-w":[{outline:[yo,es]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[yo,es]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ts,zH]}],"shadow-color":[{shadow:[_f]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ts,ht]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ht]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",ht]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",ht]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Sf,ht]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ht]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ht]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ht]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[yo,es,Ux]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},GH=NH(HH);function ie(...t){return GH(ut(t))}function gi(t){const e={};for(const[r,n]of Object.entries(t))if(n!==void 0)if(Array.isArray(n)){const i=n.map(a=>a&&typeof a=="object"&&!(a instanceof Date)?gi(a):a).filter(a=>a!==void 0);i.length>0&&(e[r]=i)}else if(n&&typeof n=="object"&&!(n instanceof Date)){const i=gi(n);Object.keys(i).length>0&&(e[r]=i)}else e[r]=n;return e}function $v(t){const e=window.location.origin+window.location.pathname;return e.includes("localhost")?t:e+t}function qH(t){return t&&t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}const KH=$W,iM=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Rk,C({ref:r,className:ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t)},e))});iM.displayName=Rk.displayName;const XH=Ld("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),aM=x.forwardRef((i,n)=>{var a=i,{className:t,variant:e}=a,r=K(a,["className","variant"]);return c.jsx($k,C({ref:n,className:ie(XH({variant:e}),t)},r))});aM.displayName=$k.displayName;const YH=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Bk,C({ref:r,className:ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t)},e))});YH.displayName=Bk.displayName;const oM=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(zk,M(C({ref:r,className:ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":""},e),{children:c.jsx(oo,{className:"h-4 w-4"})}))});oM.displayName=zk.displayName;const sM=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Lk,C({ref:r,className:ie("text-sm font-semibold",t)},e))});sM.displayName=Lk.displayName;const cM=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Fk,C({ref:r,className:ie("text-sm opacity-90",t)},e))});cM.displayName=Fk.displayName;function ZH({duration:t=2e3}){const{toasts:e}=Nr();return c.jsxs(KH,{duration:t,children:[e.map(s=>{var l=s,{id:r,title:n,description:i,action:a}=l,o=K(l,["id","title","description","action"]);return c.jsxs(aM,M(C({},o),{duration:t,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(sM,{children:n}),i&&c.jsx(cM,{children:i})]}),a,c.jsx(oM,{})]}),r)}),c.jsx(iM,{})]})}var QH=bA[" useId ".trim().toString()]||(()=>{}),JH=0;function Qi(t){const[e,r]=x.useState(QH());return bn(()=>{r(n=>n!=null?n:String(JH++))},[t]),e?"radix-".concat(e):""}const eG=["top","right","bottom","left"],ks=Math.min,Ci=Math.max,B0=Math.round,Nm=Math.floor,Ya=t=>({x:t,y:t}),tG={left:"right",right:"left",bottom:"top",top:"bottom"},rG={start:"end",end:"start"};function $b(t,e,r){return Ci(t,ks(e,r))}function Vo(t,e){return typeof t=="function"?t(e):t}function Uo(t){return t.split("-")[0]}function Bd(t){return t.split("-")[1]}function BA(t){return t==="x"?"y":"x"}function zA(t){return t==="y"?"height":"width"}function Ua(t){return["top","bottom"].includes(Uo(t))?"y":"x"}function VA(t){return BA(Ua(t))}function nG(t,e,r){r===void 0&&(r=!1);const n=Bd(t),i=VA(t),a=zA(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=z0(o)),[o,z0(o)]}function iG(t){const e=z0(t);return[Lb(t),e,Lb(e)]}function Lb(t){return t.replace(/start|end/g,e=>rG[e])}function aG(t,e,r){const n=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?a:o;default:return[]}}function oG(t,e,r,n){const i=Bd(t);let a=aG(Uo(t),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(Lb)))),a}function z0(t){return t.replace(/left|right|bottom|top/g,e=>tG[e])}function sG(t){return C({top:0,right:0,bottom:0,left:0},t)}function lM(t){return typeof t!="number"?sG(t):{top:t,right:t,bottom:t,left:t}}function V0(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function aN(t,e,r){let{reference:n,floating:i}=t;const a=Ua(e),o=VA(e),s=zA(o),l=Uo(e),u=a==="y",d=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,h=n[s]/2-i[s]/2;let p;switch(l){case"top":p={x:d,y:n.y-i.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-i.width,y:f};break;default:p={x:n.x,y:n.y}}switch(Bd(e)){case"start":p[o]-=h*(r&&u?-1:1);break;case"end":p[o]+=h*(r&&u?-1:1);break}return p}const cG=(t,e,r)=>G(Gt,null,function*(){const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,s=a.filter(Boolean),l=yield o.isRTL==null?void 0:o.isRTL(e);let u=yield o.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=aN(u,n,l),h=n,p={},m=0;for(let g=0;g<s.length;g++){const{name:v,fn:y}=s[g],{x:b,y:w,data:S,reset:A}=yield y({x:d,y:f,initialPlacement:n,placement:h,strategy:i,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});d=b!=null?b:d,f=w!=null?w:f,p=M(C({},p),{[v]:C(C({},p[v]),S)}),A&&m<=50&&(m++,typeof A=="object"&&(A.placement&&(h=A.placement),A.rects&&(u=A.rects===!0?yield o.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:d,y:f}=aN(u,h,l)),g=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:p}});function Oh(t,e){return G(this,null,function*(){var r;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:o,elements:s,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Vo(e,t),m=lM(p),v=s[h?f==="floating"?"reference":"floating":f],y=V0(yield a.getClippingRect({element:(r=yield a.isElement==null?void 0:a.isElement(v))==null||r?v:v.contextElement||(yield a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:l})),b=f==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=yield a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating),S=(yield a.isElement==null?void 0:a.isElement(w))?(yield a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},A=V0(a.convertOffsetParentRelativeRectToViewportRelativeRect?yield a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:b,offsetParent:w,strategy:l}):b);return{top:(y.top-A.top+m.top)/S.y,bottom:(A.bottom-y.bottom+m.bottom)/S.y,left:(y.left-A.left+m.left)/S.x,right:(A.right-y.right+m.right)/S.x}})}const lG=t=>({name:"arrow",options:t,fn(r){return G(this,null,function*(){const{x:n,y:i,placement:a,rects:o,platform:s,elements:l,middlewareData:u}=r,{element:d,padding:f=0}=Vo(t,r)||{};if(d==null)return{};const h=lM(f),p={x:n,y:i},m=VA(a),g=zA(m),v=yield s.getDimensions(d),y=m==="y",b=y?"top":"left",w=y?"bottom":"right",S=y?"clientHeight":"clientWidth",A=o.reference[g]+o.reference[m]-p[m]-o.floating[g],_=p[m]-o.reference[m],E=yield s.getOffsetParent==null?void 0:s.getOffsetParent(d);let N=E?E[S]:0;(!N||!(yield s.isElement==null?void 0:s.isElement(E)))&&(N=l.floating[S]||o.floating[g]);const T=A/2-_/2,O=N/2-v[g]/2-1,j=ks(h[b],O),P=ks(h[w],O),D=j,F=N-v[g]-P,I=N/2-v[g]/2+T,k=$b(D,I,F),R=!u.arrow&&Bd(a)!=null&&I!==k&&o.reference[g]/2-(I<D?j:P)-v[g]/2<0,L=R?I<D?I-D:I-F:0;return{[m]:p[m]+L,data:C({[m]:k,centerOffset:I-k-L},R&&{alignmentOffset:L}),reset:R}})}}),uG=function(t){return t===void 0&&(t={}),{name:"flip",options:t,fn(r){return G(this,null,function*(){var n,i;const{placement:a,middlewareData:o,rects:s,initialPlacement:l,platform:u,elements:d}=r,I=Vo(t,r),{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=I,y=K(I,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const b=Uo(a),w=Ua(l),S=Uo(l)===l,A=yield u.isRTL==null?void 0:u.isRTL(d.floating),_=p||(S||!v?[z0(l)]:iG(l)),E=g!=="none";!p&&E&&_.push(...oG(l,v,g,A));const N=[l,..._],T=yield Oh(r,y),O=[];let j=((i=o.flip)==null?void 0:i.overflows)||[];if(f&&O.push(T[b]),h){const k=nG(a,s,A);O.push(T[k[0]],T[k[1]])}if(j=[...j,{placement:a,overflows:O}],!O.every(k=>k<=0)){var P,D;const k=(((P=o.flip)==null?void 0:P.index)||0)+1,R=N[k];if(R&&(!(h==="alignment"?w!==Ua(R):!1)||j.every(W=>W.overflows[0]>0&&Ua(W.placement)===w)))return{data:{index:k,overflows:j},reset:{placement:R}};let L=(D=j.filter(V=>V.overflows[0]<=0).sort((V,W)=>V.overflows[1]-W.overflows[1])[0])==null?void 0:D.placement;if(!L)switch(m){case"bestFit":{var F;const V=(F=j.filter(W=>{if(E){const q=Ua(W.placement);return q===w||q==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(q=>q>0).reduce((q,H)=>q+H,0)]).sort((W,q)=>W[1]-q[1])[0])==null?void 0:F[0];V&&(L=V);break}case"initialPlacement":L=l;break}if(a!==L)return{reset:{placement:L}}}return{}})}}};function oN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sN(t){return eG.some(e=>t[e]>=0)}const dG=function(t){return t===void 0&&(t={}),{name:"hide",options:t,fn(r){return G(this,null,function*(){const{rects:n}=r,o=Vo(t,r),{strategy:i="referenceHidden"}=o,a=K(o,["strategy"]);switch(i){case"referenceHidden":{const s=yield Oh(r,M(C({},a),{elementContext:"reference"})),l=oN(s,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:sN(l)}}}case"escaped":{const s=yield Oh(r,M(C({},a),{altBoundary:!0})),l=oN(s,n.floating);return{data:{escapedOffsets:l,escaped:sN(l)}}}default:return{}}})}}};function fG(t,e){return G(this,null,function*(){const{placement:r,platform:n,elements:i}=t,a=yield n.isRTL==null?void 0:n.isRTL(i.floating),o=Uo(r),s=Bd(r),l=Ua(r)==="y",u=["left","top"].includes(o)?-1:1,d=a&&l?-1:1,f=Vo(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof m=="number"&&(p=s==="end"?m*-1:m),l?{x:p*d,y:h*u}:{x:h*u,y:p*d}})}const hG=function(t){return t===void 0&&(t=0),{name:"offset",options:t,fn(r){return G(this,null,function*(){var n,i;const{x:a,y:o,placement:s,middlewareData:l}=r,u=yield fG(r,t);return s===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:a+u.x,y:o+u.y,data:M(C({},u),{placement:s})}})}}},pG=function(t){return t===void 0&&(t={}),{name:"shift",options:t,fn(r){return G(this,null,function*(){const{x:n,y:i,placement:a}=r,y=Vo(t,r),{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:b=>{let{x:w,y:S}=b;return{x:w,y:S}}}}=y,u=K(y,["mainAxis","crossAxis","limiter"]),d={x:n,y:i},f=yield Oh(r,u),h=Ua(Uo(a)),p=BA(h);let m=d[p],g=d[h];if(o){const b=p==="y"?"top":"left",w=p==="y"?"bottom":"right",S=m+f[b],A=m-f[w];m=$b(S,m,A)}if(s){const b=h==="y"?"top":"left",w=h==="y"?"bottom":"right",S=g+f[b],A=g-f[w];g=$b(S,g,A)}const v=l.fn(M(C({},r),{[p]:m,[h]:g}));return M(C({},v),{data:{x:v.x-n,y:v.y-i,enabled:{[p]:o,[h]:s}}})})}}},mG=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=e,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=Vo(t,e),d={x:r,y:n},f=Ua(i),h=BA(f);let p=d[h],m=d[f];const g=Vo(s,e),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:C({mainAxis:0,crossAxis:0},g);if(l){const w=h==="y"?"height":"width",S=a.reference[h]-a.floating[w]+v.mainAxis,A=a.reference[h]+a.reference[w]-v.mainAxis;p<S?p=S:p>A&&(p=A)}if(u){var y,b;const w=h==="y"?"width":"height",S=["top","left"].includes(Uo(i)),A=a.reference[f]-a.floating[w]+(S&&((y=o.offset)==null?void 0:y[f])||0)+(S?0:v.crossAxis),_=a.reference[f]+a.reference[w]+(S?0:((b=o.offset)==null?void 0:b[f])||0)-(S?v.crossAxis:0);m<A?m=A:m>_&&(m=_)}return{[h]:p,[f]:m}}}},gG=function(t){return t===void 0&&(t={}),{name:"size",options:t,fn(r){return G(this,null,function*(){var n,i;const{placement:a,rects:o,platform:s,elements:l}=r,j=Vo(t,r),{apply:u=()=>{}}=j,d=K(j,["apply"]),f=yield Oh(r,d),h=Uo(a),p=Bd(a),m=Ua(a)==="y",{width:g,height:v}=o.floating;let y,b;h==="top"||h==="bottom"?(y=h,b=p===((yield s.isRTL==null?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(b=h,y=p==="end"?"top":"bottom");const w=v-f.top-f.bottom,S=g-f.left-f.right,A=ks(v-f[y],w),_=ks(g-f[b],S),E=!r.middlewareData.shift;let N=A,T=_;if((n=r.middlewareData.shift)!=null&&n.enabled.x&&(T=S),(i=r.middlewareData.shift)!=null&&i.enabled.y&&(N=w),E&&!p){const P=Ci(f.left,0),D=Ci(f.right,0),F=Ci(f.top,0),I=Ci(f.bottom,0);m?T=g-2*(P!==0||D!==0?P+D:Ci(f.left,f.right)):N=v-2*(F!==0||I!==0?F+I:Ci(f.top,f.bottom))}yield u(M(C({},r),{availableWidth:T,availableHeight:N}));const O=yield s.getDimensions(l.floating);return g!==O.width||v!==O.height?{reset:{rects:!0}}:{}})}}};function Lv(){return typeof window!="undefined"}function zd(t){return uM(t)?(t.nodeName||"").toLowerCase():"#document"}function Ti(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ho(t){var e;return(e=(uM(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function uM(t){return Lv()?t instanceof Node||t instanceof Ti(t).Node:!1}function ja(t){return Lv()?t instanceof Element||t instanceof Ti(t).Element:!1}function so(t){return Lv()?t instanceof HTMLElement||t instanceof Ti(t).HTMLElement:!1}function cN(t){return!Lv()||typeof ShadowRoot=="undefined"?!1:t instanceof ShadowRoot||t instanceof Ti(t).ShadowRoot}function Fp(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Ta(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function vG(t){return["table","td","th"].includes(zd(t))}function Fv(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch(r){return!1}})}function UA(t){const e=WA(),r=ja(t)?Ta(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function yG(t){let e=Ms(t);for(;so(e)&&!Fu(e);){if(UA(e))return e;if(Fv(e))return null;e=Ms(e)}return null}function WA(){return typeof CSS=="undefined"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fu(t){return["html","body","#document"].includes(zd(t))}function Ta(t){return Ti(t).getComputedStyle(t)}function Bv(t){return ja(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ms(t){if(zd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||cN(t)&&t.host||ho(t);return cN(e)?e.host:e}function dM(t){const e=Ms(t);return Fu(e)?t.ownerDocument?t.ownerDocument.body:t.body:so(e)&&Fp(e)?e:dM(e)}function Ih(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=dM(t),a=i===((n=t.ownerDocument)==null?void 0:n.body),o=Ti(i);if(a){const s=Fb(o);return e.concat(o,o.visualViewport||[],Fp(i)?i:[],s&&r?Ih(s):[])}return e.concat(i,Ih(i,[],r))}function Fb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function fM(t){const e=Ta(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=so(t),a=i?t.offsetWidth:r,o=i?t.offsetHeight:n,s=B0(r)!==a||B0(n)!==o;return s&&(r=a,n=o),{width:r,height:n,$:s}}function HA(t){return ja(t)?t:t.contextElement}function xu(t){const e=HA(t);if(!so(e))return Ya(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:a}=fM(e);let o=(a?B0(r.width):r.width)/n,s=(a?B0(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const xG=Ya(0);function hM(t){const e=Ti(t);return!WA()||!e.visualViewport?xG:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bG(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Ti(t)?!1:e}function nl(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),a=HA(t);let o=Ya(1);e&&(n?ja(n)&&(o=xu(n)):o=xu(t));const s=bG(a,r,n)?hM(a):Ya(0);let l=(i.left+s.x)/o.x,u=(i.top+s.y)/o.y,d=i.width/o.x,f=i.height/o.y;if(a){const h=Ti(a),p=n&&ja(n)?Ti(n):n;let m=h,g=Fb(m);for(;g&&n&&p!==m;){const v=xu(g),y=g.getBoundingClientRect(),b=Ta(g),w=y.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,S=y.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,u*=v.y,d*=v.x,f*=v.y,l+=w,u+=S,m=Ti(g),g=Fb(m)}}return V0({width:d,height:f,x:l,y:u})}function GA(t,e){const r=Bv(t).scrollLeft;return e?e.left+r:nl(ho(t)).left+r}function pM(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:GA(t,n)),a=n.top+e.scrollTop;return{x:i,y:a}}function wG(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const a=i==="fixed",o=ho(n),s=e?Fv(e.floating):!1;if(n===o||s&&a)return r;let l={scrollLeft:0,scrollTop:0},u=Ya(1);const d=Ya(0),f=so(n);if((f||!f&&!a)&&((zd(n)!=="body"||Fp(o))&&(l=Bv(n)),so(n))){const p=nl(n);u=xu(n),d.x=p.x+n.clientLeft,d.y=p.y+n.clientTop}const h=o&&!f&&!a?pM(o,l,!0):Ya(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-l.scrollTop*u.y+d.y+h.y}}function AG(t){return Array.from(t.getClientRects())}function SG(t){const e=ho(t),r=Bv(t),n=t.ownerDocument.body,i=Ci(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Ci(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+GA(t);const s=-r.scrollTop;return Ta(n).direction==="rtl"&&(o+=Ci(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:s}}function _G(t,e){const r=Ti(t),n=ho(t),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const u=WA();(!u||u&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}function CG(t,e){const r=nl(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,a=so(t)?xu(t):Ya(1),o=t.clientWidth*a.x,s=t.clientHeight*a.y,l=i*a.x,u=n*a.y;return{width:o,height:s,x:l,y:u}}function lN(t,e,r){let n;if(e==="viewport")n=_G(t,r);else if(e==="document")n=SG(ho(t));else if(ja(e))n=CG(e,r);else{const i=hM(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return V0(n)}function mM(t,e){const r=Ms(t);return r===e||!ja(r)||Fu(r)?!1:Ta(r).position==="fixed"||mM(r,e)}function EG(t,e){const r=e.get(t);if(r)return r;let n=Ih(t,[],!1).filter(s=>ja(s)&&zd(s)!=="body"),i=null;const a=Ta(t).position==="fixed";let o=a?Ms(t):t;for(;ja(o)&&!Fu(o);){const s=Ta(o),l=UA(o);!l&&s.position==="fixed"&&(i=null),(a?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Fp(o)&&!l&&mM(t,o))?n=n.filter(d=>d!==o):i=s,o=Ms(o)}return e.set(t,n),n}function NG(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?Fv(e)?[]:EG(e,this._c):[].concat(r),n],s=o[0],l=o.reduce((u,d)=>{const f=lN(e,d,i);return u.top=Ci(f.top,u.top),u.right=ks(f.right,u.right),u.bottom=ks(f.bottom,u.bottom),u.left=Ci(f.left,u.left),u},lN(e,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function jG(t){const{width:e,height:r}=fM(t);return{width:e,height:r}}function TG(t,e,r){const n=so(e),i=ho(e),a=r==="fixed",o=nl(t,!0,a,e);let s={scrollLeft:0,scrollTop:0};const l=Ya(0);function u(){l.x=GA(i)}if(n||!n&&!a)if((zd(e)!=="body"||Fp(i))&&(s=Bv(e)),n){const p=nl(e,!0,a,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&u();a&&!n&&i&&u();const d=i&&!n&&!a?pM(i,s):Ya(0),f=o.left+s.scrollLeft-l.x-d.x,h=o.top+s.scrollTop-l.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function Wx(t){return Ta(t).position==="static"}function uN(t,e){if(!so(t)||Ta(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ho(t)===r&&(r=r.ownerDocument.body),r}function gM(t,e){const r=Ti(t);if(Fv(t))return r;if(!so(t)){let i=Ms(t);for(;i&&!Fu(i);){if(ja(i)&&!Wx(i))return i;i=Ms(i)}return r}let n=uN(t,e);for(;n&&vG(n)&&Wx(n);)n=uN(n,e);return n&&Fu(n)&&Wx(n)&&!UA(n)?r:n||yG(t)||r}const PG=function(t){return G(this,null,function*(){const e=this.getOffsetParent||gM,r=this.getDimensions,n=yield r(t.floating);return{reference:TG(t.reference,yield e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}})};function OG(t){return Ta(t).direction==="rtl"}const IG={convertOffsetParentRelativeRectToViewportRelativeRect:wG,getDocumentElement:ho,getClippingRect:NG,getOffsetParent:gM,getElementRects:PG,getClientRects:AG,getDimensions:jG,getScale:xu,isElement:ja,isRTL:OG};function vM(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function DG(t,e){let r=null,n;const i=ho(t);function a(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const u=t.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(s||e(),!h||!p)return;const m=Nm(f),g=Nm(i.clientWidth-(d+h)),v=Nm(i.clientHeight-(f+p)),y=Nm(d),w={rootMargin:-m+"px "+-g+"px "+-v+"px "+-y+"px",threshold:Ci(0,ks(1,l))||1};let S=!0;function A(_){const E=_[0].intersectionRatio;if(E!==l){if(!S)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!vM(u,t.getBoundingClientRect())&&o(),S=!1}try{r=new IntersectionObserver(A,M(C({},w),{root:i.ownerDocument}))}catch(_){r=new IntersectionObserver(A,w)}r.observe(t)}return o(!0),a}function kG(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=HA(t),d=i||a?[...u?Ih(u):[],...Ih(e)]:[];d.forEach(y=>{i&&y.addEventListener("scroll",r,{passive:!0}),a&&y.addEventListener("resize",r)});const f=u&&s?DG(u,r):null;let h=-1,p=null;o&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),r()}),u&&!l&&p.observe(u),p.observe(e));let m,g=l?nl(t):null;l&&v();function v(){const y=nl(t);g&&!vM(g,y)&&r(),g=y,m=requestAnimationFrame(v)}return r(),()=>{var y;d.forEach(b=>{i&&b.removeEventListener("scroll",r),a&&b.removeEventListener("resize",r)}),f==null||f(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const MG=hG,RG=pG,$G=uG,LG=gG,FG=dG,dN=lG,BG=mG,zG=(t,e,r)=>{const n=new Map,i=C({platform:IG},r),a=M(C({},i.platform),{_c:n});return cG(t,e,M(C({},i),{platform:a}))};var VG=typeof document!="undefined",UG=function(){},y0=VG?x.useLayoutEffect:UG;function U0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!U0(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&t.$$typeof)&&!U0(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function yM(t){return typeof window=="undefined"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function fN(t,e){const r=yM(t);return Math.round(e*r)/r}function Hx(t){const e=x.useRef(t);return y0(()=>{e.current=t}),e}function WG(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:s=!0,whileElementsMounted:l,open:u}=t,[d,f]=x.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=x.useState(n);U0(h,n)||p(n);const[m,g]=x.useState(null),[v,y]=x.useState(null),b=x.useCallback(L=>{L!==_.current&&(_.current=L,g(L))},[]),w=x.useCallback(L=>{L!==E.current&&(E.current=L,y(L))},[]),S=a||m,A=o||v,_=x.useRef(null),E=x.useRef(null),N=x.useRef(d),T=l!=null,O=Hx(l),j=Hx(i),P=Hx(u),D=x.useCallback(()=>{if(!_.current||!E.current)return;const L={placement:e,strategy:r,middleware:h};j.current&&(L.platform=j.current),zG(_.current,E.current,L).then(V=>{const W=M(C({},V),{isPositioned:P.current!==!1});F.current&&!U0(N.current,W)&&(N.current=W,Dd.flushSync(()=>{f(W)}))})},[h,e,r,j,P]);y0(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(L=>M(C({},L),{isPositioned:!1})))},[u]);const F=x.useRef(!1);y0(()=>(F.current=!0,()=>{F.current=!1}),[]),y0(()=>{if(S&&(_.current=S),A&&(E.current=A),S&&A){if(O.current)return O.current(S,A,D);D()}},[S,A,D,O,T]);const I=x.useMemo(()=>({reference:_,floating:E,setReference:b,setFloating:w}),[b,w]),k=x.useMemo(()=>({reference:S,floating:A}),[S,A]),R=x.useMemo(()=>{const L={position:r,left:0,top:0};if(!k.floating)return L;const V=fN(k.floating,d.x),W=fN(k.floating,d.y);return s?C(M(C({},L),{transform:"translate("+V+"px, "+W+"px)"}),yM(k.floating)>=1.5&&{willChange:"transform"}):{position:r,left:V,top:W}},[r,s,k.floating,d.x,d.y]);return x.useMemo(()=>M(C({},d),{update:D,refs:I,elements:k,floatingStyles:R}),[d,D,I,k,R])}const HG=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?dN({element:n.current,padding:i}).fn(r):{}:n?dN({element:n,padding:i}).fn(r):{}}}},GG=(t,e)=>M(C({},MG(t)),{options:[t,e]}),qG=(t,e)=>M(C({},RG(t)),{options:[t,e]}),KG=(t,e)=>M(C({},BG(t)),{options:[t,e]}),XG=(t,e)=>M(C({},$G(t)),{options:[t,e]}),YG=(t,e)=>M(C({},LG(t)),{options:[t,e]}),ZG=(t,e)=>M(C({},FG(t)),{options:[t,e]}),QG=(t,e)=>M(C({},HG(t)),{options:[t,e]});var JG="Arrow",xM=x.forwardRef((t,e)=>{const o=t,{children:r,width:n=10,height:i=5}=o,a=K(o,["children","width","height"]);return c.jsx(Ge.svg,M(C({},a),{ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:c.jsx("polygon",{points:"0,0 30,0 15,10"})}))});xM.displayName=JG;var eq=xM;function bM(t){const[e,r]=x.useState(void 0);return bn(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,s;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,s=u.blockSize}else o=t.offsetWidth,s=t.offsetHeight;r({width:o,height:s})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var qA="Popper",[wM,Ks]=ai(qA),[tq,AM]=wM(qA),SM=t=>{const{__scopePopper:e,children:r}=t,[n,i]=x.useState(null);return c.jsx(tq,{scope:e,anchor:n,onAnchorChange:i,children:r})};SM.displayName=qA;var _M="PopperAnchor",CM=x.forwardRef((t,e)=>{const l=t,{__scopePopper:r,virtualRef:n}=l,i=K(l,["__scopePopper","virtualRef"]),a=AM(_M,r),o=x.useRef(null),s=ft(e,o);return x.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:c.jsx(Ge.div,M(C({},i),{ref:s}))});CM.displayName=_M;var KA="PopperContent",[rq,nq]=wM(KA),EM=x.forwardRef((t,e)=>{var ge,Y,te,ae,X,be,ue,Pe;const Ue=t,{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m}=Ue,g=K(Ue,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),v=AM(KA,r),[y,b]=x.useState(null),w=ft(e,oe=>b(oe)),[S,A]=x.useState(null),_=bM(S),E=(ge=_==null?void 0:_.width)!=null?ge:0,N=(Y=_==null?void 0:_.height)!=null?Y:0,T=n+(a!=="center"?"-"+a:""),O=typeof d=="number"?d:C({top:0,right:0,bottom:0,left:0},d),j=Array.isArray(u)?u:[u],P=j.length>0,D={padding:O,boundary:j.filter(aq),altBoundary:P},{refs:F,floatingStyles:I,placement:k,isPositioned:R,middlewareData:L}=WG({strategy:"fixed",placement:T,whileElementsMounted:(...oe)=>kG(...oe,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[GG({mainAxis:i+N,alignmentAxis:o}),l&&qG(C({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?KG():void 0},D)),l&&XG(C({},D)),YG(M(C({},D),{apply:({elements:oe,rects:_e,availableWidth:De,availableHeight:he})=>{const{width:z,height:U}=_e.reference,Z=oe.floating.style;Z.setProperty("--radix-popper-available-width","".concat(De,"px")),Z.setProperty("--radix-popper-available-height","".concat(he,"px")),Z.setProperty("--radix-popper-anchor-width","".concat(z,"px")),Z.setProperty("--radix-popper-anchor-height","".concat(U,"px"))}})),S&&QG({element:S,padding:s}),oq({arrowWidth:E,arrowHeight:N}),h&&ZG(C({strategy:"referenceHidden"},D))]}),[V,W]=TM(k),q=Fr(m);bn(()=>{R&&(q==null||q())},[R,q]);const H=(te=L.arrow)==null?void 0:te.x,J=(ae=L.arrow)==null?void 0:ae.y,de=((X=L.arrow)==null?void 0:X.centerOffset)!==0,[se,Ee]=x.useState();return bn(()=>{y&&Ee(window.getComputedStyle(y).zIndex)},[y]),c.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:C(M(C({},I),{transform:R?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(be=L.transformOrigin)==null?void 0:be.x,(ue=L.transformOrigin)==null?void 0:ue.y].join(" ")}),((Pe=L.hide)==null?void 0:Pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:c.jsx(rq,{scope:r,placedSide:V,onArrowChange:A,arrowX:H,arrowY:J,shouldHideArrow:de,children:c.jsx(Ge.div,M(C({"data-side":V,"data-align":W},g),{ref:w,style:M(C({},g.style),{animation:R?void 0:"none"})}))})})});EM.displayName=KA;var NM="PopperArrow",iq={top:"bottom",right:"left",bottom:"top",left:"right"},jM=x.forwardRef(function(e,r){const s=e,{__scopePopper:n}=s,i=K(s,["__scopePopper"]),a=nq(NM,n),o=iq[a.placedSide];return c.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:c.jsx(eq,M(C({},i),{ref:r,style:M(C({},i.style),{display:"block"})}))})});jM.displayName=NM;function aq(t){return t!==null}var oq=t=>({name:"transformOrigin",options:t,fn(e){var v,y,b,w,S;const{placement:r,rects:n,middlewareData:i}=e,o=((v=i.arrow)==null?void 0:v.centerOffset)!==0,s=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=TM(r),f={start:"0%",center:"50%",end:"100%"}[d],h=((b=(y=i.arrow)==null?void 0:y.x)!=null?b:0)+s/2,p=((S=(w=i.arrow)==null?void 0:w.y)!=null?S:0)+l/2;let m="",g="";return u==="bottom"?(m=o?f:"".concat(h,"px"),g="".concat(-l,"px")):u==="top"?(m=o?f:"".concat(h,"px"),g="".concat(n.floating.height+l,"px")):u==="right"?(m="".concat(-l,"px"),g=o?f:"".concat(p,"px")):u==="left"&&(m="".concat(n.floating.width+l,"px"),g=o?f:"".concat(p,"px")),{data:{x:m,y:g}}}});function TM(t){const[e,r="center"]=t.split("-");return[e,r]}var zv=SM,Bp=CM,Vv=EM,Uv=jM,[Wv,LBe]=ai("Tooltip",[Ks]),Hv=Ks(),PM="TooltipProvider",sq=700,Bb="tooltip.open",[cq,XA]=Wv(PM),OM=t=>{const{__scopeTooltip:e,delayDuration:r=sq,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=t,o=x.useRef(!0),s=x.useRef(!1),l=x.useRef(0);return x.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(cq,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:x.useCallback(u=>{s.current=u},[]),disableHoverableContent:i,children:a})};OM.displayName=PM;var Dh="Tooltip",[lq,Gv]=Wv(Dh),IM=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:s}=t,l=XA(Dh,t.__scopeTooltip),u=Hv(e),[d,f]=x.useState(null),h=Qi(),p=x.useRef(0),m=o!=null?o:l.disableHoverableContent,g=s!=null?s:l.delayDuration,v=x.useRef(!1),[y,b]=io({prop:n,defaultProp:i!=null?i:!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(Bb))):l.onClose(),a==null||a(E)},caller:Dh}),w=x.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),S=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v.current=!1,b(!0)},[b]),A=x.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),_=x.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,b(!0),p.current=0},g)},[g,b]);return x.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),c.jsx(zv,M(C({},u),{children:c.jsx(lq,{scope:e,contentId:h,open:y,stateAttribute:w,trigger:d,onTriggerChange:f,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayedRef.current?_():S()},[l.isOpenDelayedRef,_,S]),onTriggerLeave:x.useCallback(()=>{m?A():(window.clearTimeout(p.current),p.current=0)},[A,m]),onOpen:S,onClose:A,disableHoverableContent:m,children:r})}))};IM.displayName=Dh;var zb="TooltipTrigger",DM=x.forwardRef((t,e)=>{const h=t,{__scopeTooltip:r}=h,n=K(h,["__scopeTooltip"]),i=Gv(zb,r),a=XA(zb,r),o=Hv(r),s=x.useRef(null),l=ft(e,s,i.onTriggerChange),u=x.useRef(!1),d=x.useRef(!1),f=x.useCallback(()=>u.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(Bp,M(C({asChild:!0},o),{children:c.jsx(Ge.button,M(C({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},n),{ref:l,onPointerMove:Ae(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ae(t.onPointerLeave,()=>{i.onTriggerLeave(),d.current=!1}),onPointerDown:Ae(t.onPointerDown,()=>{i.open&&i.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Ae(t.onFocus,()=>{u.current||i.onOpen()}),onBlur:Ae(t.onBlur,i.onClose),onClick:Ae(t.onClick,i.onClose)}))}))});DM.displayName=zb;var uq="TooltipPortal",[FBe,dq]=Wv(uq,{forceMount:void 0}),Bu="TooltipContent",kM=x.forwardRef((t,e)=>{const r=dq(Bu,t.__scopeTooltip),s=t,{forceMount:n=r.forceMount,side:i="top"}=s,a=K(s,["forceMount","side"]),o=Gv(Bu,t.__scopeTooltip);return c.jsx(Dn,{present:n||o.open,children:o.disableHoverableContent?c.jsx(MM,M(C({side:i},a),{ref:e})):c.jsx(fq,M(C({side:i},a),{ref:e}))})}),fq=x.forwardRef((t,e)=>{const r=Gv(Bu,t.__scopeTooltip),n=XA(Bu,t.__scopeTooltip),i=x.useRef(null),a=ft(e,i),[o,s]=x.useState(null),{trigger:l,onClose:u}=r,d=i.current,{onPointerInTransitChange:f}=n,h=x.useCallback(()=>{s(null),f(!1)},[f]),p=x.useCallback((m,g)=>{const v=m.currentTarget,y={x:m.clientX,y:m.clientY},b=vq(y,v.getBoundingClientRect()),w=yq(y,b),S=xq(g.getBoundingClientRect()),A=wq([...w,...S]);s(A),f(!0)},[f]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(l&&d){const m=v=>p(v,d),g=v=>p(v,l);return l.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[l,d,p,h]),x.useEffect(()=>{if(o){const m=g=>{const v=g.target,y={x:g.clientX,y:g.clientY},b=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),w=!bq(y,o);b?h():w&&(h(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,d,o,u,h]),c.jsx(MM,M(C({},t),{ref:a}))}),[hq,pq]=Wv(Dh,{isInside:!1}),mq=yk("TooltipContent"),MM=x.forwardRef((t,e)=>{const f=t,{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o}=f,s=K(f,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),l=Gv(Bu,r),u=Hv(r),{onClose:d}=l;return x.useEffect(()=>(document.addEventListener(Bb,d),()=>document.removeEventListener(Bb,d)),[d]),x.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),c.jsx(xl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:c.jsxs(Vv,M(C(C({"data-state":l.stateAttribute},u),s),{ref:e,style:M(C({},s.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[c.jsx(mq,{children:n}),c.jsx(hq,{scope:r,isInside:!0,children:c.jsx(xW,{id:l.contentId,role:"tooltip",children:i||n})})]}))})});kM.displayName=Bu;var RM="TooltipArrow",gq=x.forwardRef((t,e)=>{const o=t,{__scopeTooltip:r}=o,n=K(o,["__scopeTooltip"]),i=Hv(r);return pq(RM,r).isInside?null:c.jsx(Uv,M(C(C({},i),n),{ref:e}))});gq.displayName=RM;function vq(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(r,n,i,a)){case a:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function yq(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function xq(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function bq(t,e){const{x:r,y:n}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const s=e[a],l=e[o],u=s.x,d=s.y,f=l.x,h=l.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(i=!i)}return i}function wq(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Aq(e)}function Aq(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var Sq=OM,_q=IM,Cq=DM,$M=kM;const YA=Sq,Ur=_q,Wr=Cq,kr=x.forwardRef((i,n)=>{var a=i,{className:t,sideOffset:e=4}=a,r=K(a,["className","sideOffset"]);return c.jsx($M,C({ref:n,sideOffset:e,className:ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t)},r))});kr.displayName=$M.displayName;class Za{constructor(e,r,n,i,a,o=new Date,s=!1,l,u,d="medium",f,h,p=new Date,m=!0,g,v,y,b,w=!0,S=[],A,_,E){Rt(this,"priceSelection");Rt(this,"needsPriceSelection",!1);this.id=e,this.category=r,this.createdBy=n,this.link=i,this.name=a,this.createdAt=o,this.completed=s,this.completedBy=l,this.completedAt=u,this.priority=d,this.estimatedPrice=f,this.notes=h,this.updatedAt=p,this.isPublic=m,this.scrapingData=g,this.brandName=v,this.imageUrl=y,this.imageUpdated=b,this.available=w,this.historicalPrice=S,this.lastPriceCheck=A,this.priceMonitoring=_,this.historicalPriceWithDates=E,this.validate&&this.validate()}updateWithMultiplePrices(e){if(e.length===0)this.priceSelection={status:"error",detectedPrices:[],detectionErrors:["Nessun prezzo rilevato nella pagina"],lastDetectionAttempt:new Date},this.needsPriceSelection=!1;else if(e.length===1){const r=e[0];this.estimatedPrice=r.numericValue,this.priceSelection={status:"single_price",detectedPrices:e,selectedPriceIndex:0,selectedCssSelector:r.cssSelector,selectionTimestamp:new Date,lastDetectionAttempt:new Date},this.needsPriceSelection=!1}else this.priceSelection={status:"needs_selection",detectedPrices:e,lastDetectionAttempt:new Date},this.needsPriceSelection=!0;this.updatedAt=new Date}selectPrice(e){if(!this.priceSelection||!this.priceSelection.detectedPrices[e])throw new Error("Prezzo non valido selezionato");const r=this.priceSelection.detectedPrices[e];this.estimatedPrice=r.numericValue,this.priceSelection.status="selected",this.priceSelection.selectedPriceIndex=e,this.priceSelection.selectedCssSelector=r.cssSelector,this.priceSelection.selectionTimestamp=new Date,this.needsPriceSelection=!1,this.updatedAt=new Date,this.addPriceToHistoryWithDate(r.numericValue,new Date)}getSelectedCssSelector(){var e;return((e=this.priceSelection)==null?void 0:e.selectedCssSelector)||null}hasValidPriceSelector(){var e,r;return((e=this.priceSelection)==null?void 0:e.status)==="selected"||((r=this.priceSelection)==null?void 0:r.status)==="single_price"}canBeMonitored(){return this.hasValidPriceSelector()&&!this.needsPriceSelection}getPriceSelectionSummary(){var e;if(!this.priceSelection)return"Nessun dato prezzi";switch(this.priceSelection.status){case"needs_selection":return"".concat(this.priceSelection.detectedPrices.length," prezzi trovati - necessita selezione");case"selected":const r=this.priceSelection.detectedPrices[this.priceSelection.selectedPriceIndex];return"Prezzo selezionato: ".concat(r.value);case"single_price":return"Prezzo unico: ".concat(this.priceSelection.detectedPrices[0].value);case"error":return"Errore rilevamento: ".concat((e=this.priceSelection.detectionErrors)==null?void 0:e.join(", "));default:return"Stato sconosciuto"}}validate(){var n,i,a;const e=[];if((n=this.category)!=null&&n.trim()||e.push("La categoria  obbligatoria"),(i=this.createdBy)!=null&&i.trim()||e.push("Il creatore  obbligatorio"),!((a=this.link)!=null&&a.trim()))e.push("Il link  obbligatorio");else try{new URL(this.link)}catch(o){e.push("Il link deve essere un URL valido")}this.estimatedPrice!==void 0&&this.estimatedPrice<0&&e.push("Il prezzo stimato non pu essere negativo"),this.historicalPrice&&!Array.isArray(this.historicalPrice)&&e.push("Lo storico prezzi deve essere un array"),this.historicalPrice&&this.historicalPrice.some(o=>typeof o!="number"||o<0)&&e.push("Lo storico prezzi deve contenere solo numeri positivi"),this.historicalPriceWithDates&&!Array.isArray(this.historicalPriceWithDates)&&e.push("Lo storico prezzi con date deve essere un array"),this.historicalPriceWithDates&&this.historicalPriceWithDates.some(o=>!o||typeof o.price!="number"||o.price<0||!(o.date instanceof Date))&&e.push("Lo storico prezzi con date deve contenere oggetti validi con prezzo e data"),typeof this.available!="boolean"&&e.push("La disponibilit deve essere un booleano");const r={isValid:e.length===0,errors:e};if(!r.isValid)throw new xt("Validazione fallita: ".concat(e.join(", ")),e);return r}static getAlternativeSelectors(e){var r;try{const n=(r=e==null?void 0:e.priceSelection)==null?void 0:r.detectedPrices;if(!Array.isArray(n))return[];const i=[];return n.forEach(a=>{a!=null&&a.alternativeSelectors&&Array.isArray(a.alternativeSelectors)&&i.push(...a.alternativeSelectors)}),i}catch(n){return console.error("Errore nell'estrazione dei selettori:",n),[]}}static fromFirestore(e){try{this.getAlternativeSelectors(e);const r=l=>{if(!l)return new Date;if(l instanceof Date)return l;if(typeof l=="object"&&l.toDate)return l.toDate();const u=new Date(l);return isNaN(u.getTime())?new Date:u},n=l=>Array.isArray(l)?l.map(u=>typeof u=="object"&&u!==null?{price:typeof u.price=="number"?u.price:0,date:r(u.date),oldPrice:typeof u.oldPrice=="number"?u.oldPrice:null,changeType:u.changeType||"initial"}:{price:typeof u=="number"?u:0,date:new Date,changeType:"initial"}):[],i=e.category||"Articoli",a=e.createdBy||"Unknown",o=e.link||"",s=Object.create(Za.prototype);if(s.id=e.id,s.category=i,s.createdBy=a,s.link=o,s.name=e.name,s.createdAt=r(e.createdAt),s.completed=e.completed||!1,s.completedBy=e.completedBy,s.completedAt=e.completedAt?r(e.completedAt):void 0,s.priority=e.priority||"medium",s.estimatedPrice=e.estimatedPrice,s.notes=e.notes,s.updatedAt=r(e.updatedAt),s.isPublic=e.isPublic!==void 0?e.isPublic:!0,s.brandName=e.brandName,s.imageUrl=e.imageUrl,s.imageUpdated=e.imageUpdated||!1,e.scrapingData&&typeof e.scrapingData=="object"&&(s.scrapingData={lastScraped:r(e.scrapingData.lastScraped),scrapingMode:e.scrapingData.scrapingMode||"html_analysis",scrapingSuccess:e.scrapingData.scrapingSuccess||!1,scrapingText:e.scrapingData.scrapingText,errors:e.scrapingData.errors}),s.available=e.available!==void 0?e.available:!0,s.historicalPrice=Array.isArray(e.historicalPrice)?e.historicalPrice:[],s.lastPriceCheck=e.lastPriceCheck?r(e.lastPriceCheck):void 0,s.historicalPriceWithDates=n(e.historicalPriceWithDates),e.priceMonitoring&&typeof e.priceMonitoring=="object"&&(s.priceMonitoring={lastCheck:r(e.priceMonitoring.lastCheck),changesDetected:e.priceMonitoring.changesDetected||!1,priceChanged:e.priceMonitoring.priceChanged||!1,availabilityChanged:e.priceMonitoring.availabilityChanged||!1,analysisText:e.priceMonitoring.analysisText}),e.priceSelection&&typeof e.priceSelection=="object"){let l=[];if(e.priceSelection.detectedPrices)try{const u=e.priceSelection.detectedPrices;Array.isArray(u)?l=u.map((d,f)=>hN(d,f)):typeof u=="object"&&(l=Object.values(u).map((f,h)=>hN(f,h)))}catch(u){console.error(" Error parsing detectedPrices:",u,e.priceSelection.detectedPrices),l=[]}s.priceSelection={status:ru(e.priceSelection.status)||"error",detectedPrices:l,selectedPriceIndex:ru(e.priceSelection.selectedPriceIndex),selectedCssSelector:ru(e.priceSelection.selectedCssSelector),selectionTimestamp:e.priceSelection.selectionTimestamp?r(e.priceSelection.selectionTimestamp):void 0,lastDetectionAttempt:e.priceSelection.lastDetectionAttempt?r(e.priceSelection.lastDetectionAttempt):void 0,detectionErrors:e.priceSelection.detectionErrors?W0(e.priceSelection.detectionErrors):void 0}}if(s.needsPriceSelection=ru(e.needsPriceSelection)||!1,o&&i&&a)try{s.validate()}catch(l){console.warn("Validation warning for existing document:",e.id,l)}return s}catch(r){console.error("Error in fromFirestore for ShoppingItem:",r,e);const n=Object.create(Za.prototype);return n.id=e.id||"unknown",n.category=e.category||"Articoli",n.createdBy=e.createdBy||"Unknown",n.link=e.link||"https://example.com",n.name=e.name||"Prodotto sconosciuto",n.createdAt=new Date,n.completed=!1,n.priority="medium",n.updatedAt=new Date,n.isPublic=!0,n.imageUpdated=!1,n.available=!0,n.historicalPrice=[],n.historicalPriceWithDates=[],n}}toFirestore(){const e={category:this.category,createdBy:this.createdBy,link:this.link,name:this.name,createdAt:this.createdAt,completed:this.completed,completedBy:this.completedBy,completedAt:this.completedAt,priority:this.priority,estimatedPrice:this.estimatedPrice,notes:this.notes,updatedAt:new Date,isPublic:this.isPublic,scrapingData:this.scrapingData,brandName:this.brandName,imageUrl:this.imageUrl,imageUpdated:this.imageUpdated,available:this.available,historicalPrice:this.historicalPrice,lastPriceCheck:this.lastPriceCheck,priceMonitoring:this.priceMonitoring,historicalPriceWithDates:this.historicalPriceWithDates,priceSelection:this.priceSelection?this.serializePriceSelection():void 0,needsPriceSelection:this.needsPriceSelection};return gi(e)}complete(e){this.completed=!0,this.completedBy=e,this.completedAt=new Date,this.updatedAt=new Date}uncomplete(){this.completed=!1,this.completedBy=void 0,this.completedAt=void 0,this.updatedAt=new Date}updateName(e){this.name=e,this.updatedAt=new Date,this.validate()}updateNotes(e){this.notes=e,this.updatedAt=new Date}updateCategory(e){this.category=e,this.updatedAt=new Date,this.validate()}updatePriority(e){this.priority=e,this.updatedAt=new Date}updatePrice(e){if(e<0)throw new Error("Il prezzo non pu essere negativo");this.estimatedPrice=e,this.updatedAt=new Date}togglePublic(){this.isPublic=!this.isPublic,this.updatedAt=new Date}updateBrand(e){this.brandName=e,this.updatedAt=new Date}updateImageUrl(e){this.canUpdateImage()&&(this.imageUrl=e,this.imageUpdated=!0,this.updatedAt=new Date)}removeImage(){this.imageUrl=void 0,this.imageUpdated=!1,this.updatedAt=new Date}isValidLink(){if(!this.link)return!1;try{return new URL(this.link),!0}catch(e){return!1}}isValidImageUrl(){if(!this.imageUrl)return!0;try{const e=new URL(this.imageUrl);return e.protocol==="http:"||e.protocol==="https:"}catch(e){return!1}}canUpdateImage(){return!this.imageUpdated}hasPrice(){return this.estimatedPrice!==void 0&&this.estimatedPrice!==null}isCompleted(){return this.completed}isPublicItem(){return this.isPublic}isOwnedBy(e){return this.createdBy===e}getLastPrice(){return this.historicalPrice.length===0?this.estimatedPrice||null:this.historicalPrice[this.historicalPrice.length-1]}addPriceToHistory(e){if(typeof e!="number"||e<0)throw new Error("Il prezzo deve essere un numero positivo");this.getLastPrice()!==e&&(this.historicalPrice.push(e),this.historicalPrice.length>50&&(this.historicalPrice=this.historicalPrice.slice(-50)),this.updatedAt=new Date)}addPriceToHistoryWithDate(e,r=new Date,n){if(typeof e!="number"||e<0)throw new Error("Il prezzo deve essere un numero positivo");this.getLastPrice()!==e&&(this.historicalPrice.push(e),this.historicalPrice.length>50&&(this.historicalPrice=this.historicalPrice.slice(-50))),this.historicalPriceWithDates||(this.historicalPriceWithDates=[]);const a=this.getLastPriceWithDate();if(!a||a.price!==e){const o=n==null?"initial":e>n?"increase":e<n?"decrease":"initial";this.historicalPriceWithDates.push({price:e,date:r,oldPrice:n||null,changeType:o}),this.historicalPriceWithDates.length>50&&(this.historicalPriceWithDates=this.historicalPriceWithDates.slice(-50))}this.updatedAt=new Date}getLastPriceWithDate(){return!this.historicalPriceWithDates||this.historicalPriceWithDates.length===0?null:this.historicalPriceWithDates[this.historicalPriceWithDates.length-1]}getMinPrice(){return this.historicalPrice.length===0?this.estimatedPrice||null:Math.min(...this.historicalPrice)}getMaxPrice(){return this.historicalPrice.length===0?this.estimatedPrice||null:Math.max(...this.historicalPrice)}getPriceChangePercentage(){if(this.historicalPrice.length<2)return null;const e=this.historicalPrice[0],r=this.historicalPrice[this.historicalPrice.length-1];return e===0?null:(r-e)/e*100}isPriceTrendingUp(){if(this.historicalPrice.length<3)return!1;const e=this.historicalPrice.slice(-3);return e[0]<e[1]&&e[1]<e[2]}isPriceTrendingDown(){if(this.historicalPrice.length<3)return!1;const e=this.historicalPrice.slice(-3);return e[0]>e[1]&&e[1]>e[2]}updateAvailability(e,r){const n=this.available;this.available=e,this.priceMonitoring={lastCheck:new Date,changesDetected:n!==e,priceChanged:!1,availabilityChanged:n!==e,analysisText:r},this.lastPriceCheck=new Date,this.updatedAt=new Date}updatePriceAndAvailability(e,r,n){const i=this.estimatedPrice,a=this.available;e!==null&&e!==i&&(this.estimatedPrice=e,this.addPriceToHistoryWithDate(e,new Date,i)),this.available=r,this.priceMonitoring={lastCheck:new Date,changesDetected:e!==i||a!==r,priceChanged:e!==i,availabilityChanged:a!==r,analysisText:n},this.lastPriceCheck=new Date,this.updatedAt=new Date}isAvailable(){return this.available}needsPriceCheck(e=24){return this.lastPriceCheck?(new Date().getTime()-this.lastPriceCheck.getTime())/(1e3*60*60)>=e:!0}markAsChecked(){this.lastPriceCheck=new Date,this.priceMonitoring&&(this.priceMonitoring.lastCheck=new Date)}hasRecentChanges(){var e;return((e=this.priceMonitoring)==null?void 0:e.changesDetected)||!1}updateWithScrapingData(e){if(e.nameProduct&&!this.name&&(this.name=e.nameProduct),e.nameBrand&&!this.brandName&&(this.brandName=e.nameBrand),e.category&&this.category==="Articoli"&&(this.category=e.category),e.price&&!this.estimatedPrice){const r=e.price.match(/(\d+[.,]\d+|\d+)/);if(r){const n=parseFloat(r[1].replace(",","."));this.estimatedPrice=n,this.addPriceToHistoryWithDate(n)}}e.imageUrl&&!this.imageUrl&&(this.imageUrl=e.imageUrl),typeof e.available=="boolean"&&(this.available=e.available),this.scrapingData={lastScraped:new Date,scrapingMode:e.mode||"html_analysis",scrapingSuccess:!0,scrapingText:e.scrapingText||JSON.stringify(e),errors:null},this.updatedAt=new Date;try{this.validate()}catch(r){console.warn("Validation warning after scraping update:",r),this.imageUrl&&!this.isValidImageUrl()&&(this.imageUrl=void 0)}}hasScrapingData(){return this.scrapingData!==void 0}getLastScrapingDate(){var e;return((e=this.scrapingData)==null?void 0:e.lastScraped)||null}wasScrapingSuccessful(){var e;return((e=this.scrapingData)==null?void 0:e.scrapingSuccess)||!1}getAge(){return Math.floor((new Date().getTime()-this.createdAt.getTime())/(1e3*60*60*24))}getAgeInHours(){return Math.floor((new Date().getTime()-this.createdAt.getTime())/(1e3*60*60))}getTimeSinceLastUpdate(){const e=new Date,r=this.updatedAt||this.createdAt;return Math.floor((e.getTime()-r.getTime())/(1e3*60*60))}getSummary(){const e=[];return this.name&&e.push(this.name),this.brandName&&e.push("by ".concat(this.brandName)),this.estimatedPrice&&e.push("".concat(this.estimatedPrice)),this.available||e.push("(Non disponibile)"),this.completed&&e.push("(Completato)"),e.join(" ")}clone(){return new Za("".concat(this.id,"_copy"),this.category,this.createdBy,this.link,this.name,new Date,!1,void 0,void 0,this.priority,this.estimatedPrice,this.notes,new Date,this.isPublic,void 0,this.brandName,this.imageUrl,this.imageUpdated,this.available,[],void 0,void 0,[])}serializePriceSelection(){if(this.priceSelection)return{status:this.priceSelection.status,detectedPrices:this.priceSelection.detectedPrices||[],selectedPriceIndex:this.priceSelection.selectedPriceIndex,selectedCssSelector:this.priceSelection.selectedCssSelector,selectionTimestamp:this.priceSelection.selectionTimestamp,lastDetectionAttempt:this.priceSelection.lastDetectionAttempt,detectionErrors:this.priceSelection.detectionErrors}}toJSON(){var e,r;return{id:this.id,category:this.category,createdBy:this.createdBy,link:this.link,name:this.name,createdAt:this.createdAt.toISOString(),completed:this.completed,completedBy:this.completedBy,completedAt:(e=this.completedAt)==null?void 0:e.toISOString(),priority:this.priority,estimatedPrice:this.estimatedPrice,notes:this.notes,updatedAt:this.updatedAt.toISOString(),isPublic:this.isPublic,brandName:this.brandName,imageUrl:this.imageUrl,imageUpdated:this.imageUpdated,available:this.available,historicalPrice:this.historicalPrice,lastPriceCheck:(r=this.lastPriceCheck)==null?void 0:r.toISOString(),hasScrapingData:this.hasScrapingData(),age:this.getAge(),summary:this.getSummary()}}}function ru(t){if(typeof t!="string")return t;const e=[{regex:/^@\{stringValue=(.+)\}$/,parser:r=>r},{regex:/^@\{integerValue=(.+)\}$/,parser:r=>parseInt(r,10)},{regex:/^@\{doubleValue=(.+)\}$/,parser:r=>parseFloat(r)},{regex:/^@\{booleanValue=(.+)\}$/,parser:r=>r.toLowerCase()==="true"},{regex:/^@\{arrayValue=\}$/,parser:()=>[]},{regex:/^@\{mapValue=\}$/,parser:()=>({})},{regex:/^@\{nullValue=.*\}$/,parser:()=>null}];for(const r of e){const n=t.match(r.regex);if(n)return r.parser(n[1]||"")}return t}function W0(t){if(t==null)return t;if(Array.isArray(t))return t.map(e=>W0(e));if(typeof t=="object"){const e={};for(const[r,n]of Object.entries(t))e[r]=W0(ru(n));return e}return ru(t)}function hN(t,e=0){const r=W0(t);return{value:r.value||"",numericValue:typeof r.numericValue=="number"?r.numericValue:0,cssSelector:r.cssSelector||"",parentClasses:Array.isArray(r.parentClasses)?r.parentClasses:[],elementText:r.elementText||"",confidence:typeof r.confidence=="number"?r.confidence:0,isStrikethrough:typeof r.isStrikethrough=="boolean"?r.isStrikethrough:!1,priority:typeof r.priority=="number"?r.priority:0,source:r.source||"unknown",conversionType:r.conversionType,position:r.position||{index:e,depth:0},context:r.context||{nearbyText:"",isProminent:!1},alternativeSelectors:r.alternativeSelectors||[]}}class xt extends Error{constructor(e,r){super(e),this.errors=r,this.name="ValidationError"}}class Vb{constructor(e,r="user",n,i){this.username=e,this.role=r,this.email=n,this.password=i}isAdmin(){return this.role==="admin"}toSafeUser(){return{username:this.username,role:this.role,email:this.email,isAdmin:()=>this.isAdmin()}}}class zp{constructor(e,r,n="user",i,a,o,s=new Date,l,u,d=!0,f,h){this.id=e,this.username=r,this.role=n,this.email=i,this.displayName=a,this.photoURL=o,this.createdAt=s,this.lastLoginAt=l,this.updatedAt=u,this.isActive=d,this.passwordEncrypted=f,this.passwordIV=h}static fromFirestore(e){var r,n,i;return new zp(e.id,e.username,e.role,e.email,e.displayName,e.photoURL,((r=e.createdAt)==null?void 0:r.toDate())||new Date,(n=e.lastLoginAt)==null?void 0:n.toDate(),(i=e.updatedAt)==null?void 0:i.toDate(),e.isActive!==void 0?e.isActive:!0,e.passwordEncrypted,e.passwordIV)}toFirestore(){const e={username:this.username,role:this.role,email:this.email,displayName:this.displayName,photoURL:this.photoURL,createdAt:this.createdAt,lastLoginAt:this.lastLoginAt,updatedAt:this.updatedAt||new Date,isActive:this.isActive,passwordEncrypted:this.passwordEncrypted,passwordIV:this.passwordIV};return gi(e)}isAdmin(){return this.role==="admin"}toUserLogin(e=""){return new Vb(this.username,this.role,this.email||"".concat(this.username,"@familytasktracker.local"),e)}}class Oo{constructor(e,r,n,i=new Date,a,o="#6B7280",s,l=!1,u=0,d){this.id=e,this.name=r,this.createdBy=n,this.createdAt=i,this.description=a,this.color=o,this.icon=s,this.isDefault=l,this.itemCount=u,this.updatedAt=d}static fromFirestore(e){var r;return new Oo(e.id,e.name,e.createdBy,((r=e.createdAt)==null?void 0:r.toDate())||new Date,e.description,e.color||"#6B7280",e.icon,e.isDefault||!1,e.itemCount||0)}toFirestore(){const e={name:this.name,createdBy:this.createdBy,createdAt:this.createdAt,description:this.description,color:this.color,icon:this.icon,isDefault:this.isDefault,itemCount:this.itemCount};return gi(e)}incrementItemCount(){this.itemCount++}decrementItemCount(){this.itemCount>0&&this.itemCount--}isValidColor(){return/^#[0-9A-F]{6}$/i.test(this.color)}}class Vd{constructor(e,r,n,i,a=new Date,o=new Date,s=!1,l=[],u=!1,d="#F3F4F6",f=[],h){this.id=e,this.title=r,this.content=n,this.createdBy=i,this.createdAt=a,this.updatedAt=o,this.isPublic=s,this.tags=l,this.isPinned=u,this.color=d,this.sharedWith=f,this.lastViewedAt=h,this.validate()}validate(){const e=[];if((!this.title||this.title.trim().length===0)&&e.push("Title is required"),this.title&&this.title.length>100&&e.push("Title must be less than 100 characters"),(!this.content||this.content.trim().length===0)&&e.push("Content is required"),(!this.createdBy||this.createdBy.trim().length===0)&&e.push("Created by is required"),this.isValidColor()||e.push("Invalid color format"),e.length>0)throw new xt("Note validation failed",e);return{isValid:!0,errors:[]}}static fromFirestore(e){var r,n,i;return new Vd(e.id,e.title,e.content,e.createdBy,((r=e.createdAt)==null?void 0:r.toDate())||new Date,((n=e.updatedAt)==null?void 0:n.toDate())||new Date,e.isPublic||!1,e.tags||[],e.isPinned||!1,e.color||"#F3F4F6",e.sharedWith||[],(i=e.lastViewedAt)==null?void 0:i.toDate())}toFirestore(){const e={title:this.title,content:this.content,createdBy:this.createdBy,createdAt:this.createdAt,updatedAt:this.updatedAt,isPublic:this.isPublic,tags:this.tags,isPinned:this.isPinned,color:this.color,sharedWith:this.sharedWith,lastViewedAt:this.lastViewedAt};return gi(e)}update(e,r){e&&(this.title=e),r&&(this.content=r),this.updatedAt=new Date,this.validate()}isValidColor(){return/^#[0-9A-F]{6}$/i.test(this.color)}addTag(e){this.tags.includes(e)||(this.tags.push(e),this.updatedAt=new Date)}removeTag(e){this.tags=this.tags.filter(r=>r!==e),this.updatedAt=new Date}shareWith(e){this.sharedWith.includes(e)||(this.sharedWith.push(e),this.updatedAt=new Date)}unshareWith(e){this.sharedWith=this.sharedWith.filter(r=>r!==e),this.updatedAt=new Date}togglePin(){this.isPinned=!this.isPinned,this.updatedAt=new Date}togglePublic(){this.isPublic=!this.isPublic,this.updatedAt=new Date}markAsViewed(){this.lastViewedAt=new Date}canBeViewedBy(e){return this.isPublic||this.createdBy===e||this.sharedWith.includes(e)}canBeEditedBy(e){return this.createdBy===e}}class Ud{constructor(e,r,n,i,a,o,s=!1,l=!1,u="personal",d="#E07A5F",f,h=[],p=new Date,m=new Date,g,v,y,b){this.id=e,this.title=r,this.startDate=n,this.endDate=i,this.createdBy=a,this.description=o,this.isAllDay=s,this.isPublic=l,this.eventType=u,this.color=d,this.location=f,this.attendees=h,this.createdAt=p,this.updatedAt=m,this.reminderMinutes=g,this.reminderSent=v,this.reminderSentAt=y,this.cloudTaskId=b,this.validate()}validate(){const e=[];if((!this.title||this.title.trim().length===0)&&e.push("Title is required"),this.title&&this.title.length>100&&e.push("Title must be less than 100 characters"),(!this.createdBy||this.createdBy.trim().length===0)&&e.push("Created by is required"),this.endDate<=this.startDate&&e.push("End date must be after start date"),this.isValidColor()||e.push("Invalid color format"),e.length>0)throw new xt("Calendar event validation failed",e);return{isValid:!0,errors:[]}}isValidColor(){return/^#[0-9A-F]{6}$/i.test(this.color)}static fromFirestore(e){var r,n,i,a,o;return new Ud(e.id,e.title,((r=e.startDate)==null?void 0:r.toDate())||new Date,((n=e.endDate)==null?void 0:n.toDate())||new Date,e.createdBy,e.description,e.isAllDay||!1,e.isPublic||!1,e.eventType||"personal",e.color||"#E07A5F",e.location,e.attendees||[],((i=e.createdAt)==null?void 0:i.toDate())||new Date,((a=e.updatedAt)==null?void 0:a.toDate())||new Date,e.reminderMinutes,e.reminderSent||!1,(o=e.reminderSentAt)==null?void 0:o.toDate(),e.cloudTaskId)}toFirestore(){const e={title:this.title,startDate:this.startDate,endDate:this.endDate,createdBy:this.createdBy,description:this.description,isAllDay:this.isAllDay,isPublic:this.isPublic,eventType:this.eventType,color:this.color,location:this.location,attendees:this.attendees,createdAt:this.createdAt,updatedAt:this.updatedAt,reminderMinutes:this.reminderMinutes,reminderSent:this.reminderSent,reminderSentAt:this.reminderSentAt,cloudTaskId:this.cloudTaskId};return gi(e)}getDuration(){return this.endDate.getTime()-this.startDate.getTime()}getDurationInHours(){return this.getDuration()/(1e3*60*60)}isOnDate(e){const r=new Date(this.startDate),n=new Date(this.endDate),i=new Date(e);return r.setHours(0,0,0,0),n.setHours(23,59,59,999),i.setHours(12,0,0,0),i>=r&&i<=n}isInRange(e,r){return this.startDate<=r&&this.endDate>=e}addAttendee(e){this.attendees.includes(e)||(this.attendees.push(e),this.updatedAt=new Date)}removeAttendee(e){this.attendees=this.attendees.filter(r=>r!==e),this.updatedAt=new Date}updateDates(e,r){this.startDate=e,this.endDate=r,this.updatedAt=new Date,this.validate()}canBeViewedBy(e){return this.isPublic||this.createdBy===e||this.attendees.includes(e)}canBeEditedBy(e){return this.createdBy===e}isUpcoming(){return this.startDate>new Date}isPast(){return this.endDate<new Date}isOngoing(){const e=new Date;return this.startDate<=e&&this.endDate>=e}}class kh{static createCategory(e){var r;try{if(!e.name||e.name.trim().length===0)throw new xt("Category validation failed",["Category name is required"]);if(e.name.length>50)throw new xt("Category validation failed",["Category name must be less than 50 characters"]);if(!e.createdBy||e.createdBy.trim().length===0)throw new xt("Category validation failed",["Created by is required"]);if(e.color&&!/^#[0-9A-F]{6}$/i.test(e.color))throw new xt("Category validation failed",["Invalid color format - must be hex color (e.g., #FF0000)"]);if(e.description&&e.description.length>100)throw new xt("Category validation failed",["Description must be less than 100 characters"]);if(e.icon&&e.icon.length>2)throw new xt("Category validation failed",["Icon must be less than 2 characters"]);const n=new Oo(e.id||"category_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),e.name.trim(),e.createdBy,e.createdAt||new Date,((r=e.description)==null?void 0:r.trim())||void 0,e.color||"#6B7280",e.icon||"",e.isDefault||!1,e.itemCount||0);if(!n.isValidColor())throw new xt("Category validation failed",["Invalid color format"]);return n}catch(n){throw n instanceof xt?n:new xt("Failed to create category",["Unknown validation error"])}}static createNote(e){try{return new Vd(e.id||"",e.title||"",e.content||"",e.createdBy||"",e.createdAt||new Date,e.updatedAt||new Date,e.isPublic||!1,e.tags||[],e.isPinned||!1,e.color||"#F3F4F6",e.sharedWith||[],e.lastViewedAt)}catch(r){throw r instanceof xt?r:new xt("Failed to create note",["Unknown validation error"])}}static createShoppingItem(e){try{if(!e.link||!e.link.startsWith("http"))throw new xt("Shopping item validation failed",["Valid URL is required"]);if(!e.category||e.category.trim().length===0)throw new xt("Shopping item validation failed",["Category is required"]);if(!e.createdBy||e.createdBy.trim().length===0)throw new xt("Shopping item validation failed",["Created by is required"]);if(e.imageUrl&&e.imageUrl.trim().length>0)try{const r=new URL(e.imageUrl);if(r.protocol!=="http:"&&r.protocol!=="https:")throw new xt("Shopping item validation failed",["Image URL must use http or https protocol"])}catch(r){throw new xt("Shopping item validation failed",["Invalid image URL format"])}return new Za(e.id||"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),e.category,e.createdBy,e.link,e.name,e.createdAt||new Date,e.completed||!1,e.completedBy,e.completedAt,e.priority||"medium",e.estimatedPrice,e.notes,e.updatedAt||new Date,e.isPublic!==void 0?e.isPublic:!0,e.scrapingData,e.brandName,e.imageUrl)}catch(r){throw r instanceof xt?r:new xt("Failed to create shopping item",["Unknown validation error"])}}static createCalendarEvent(e){try{return new Ud(e.id||"",e.title||"",e.startDate||new Date,e.endDate||new Date,e.createdBy||"",e.description,e.isAllDay||!1,e.isPublic||!1,e.eventType||"personal",e.color||"#E07A5F",e.location,e.attendees||[],e.createdAt||new Date,e.updatedAt||new Date,e.reminderMinutes)}catch(r){throw r instanceof xt?r:new xt("Failed to create calendar event",["Unknown validation error"])}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="firebasestorage.googleapis.com",Eq="storageBucket",Nq=2*60*1e3,jq=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends wA{constructor(e,r,n=0){super(Gx(e),"Firebase Storage: ".concat(r," (").concat(Gx(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,po.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var co;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(co||(co={}));function Gx(t){return"storage/"+t}function Tq(){const t="An unknown error occurred, please check the error payload for server response.";return new po(co.UNKNOWN,t)}function Pq(){return new po(co.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Oq(){return new po(co.CANCELED,"User canceled the upload/download.")}function Iq(t){return new po(co.INVALID_URL,"Invalid URL '"+t+"'.")}function Dq(t){return new po(co.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pN(t){return new po(co.INVALID_ARGUMENT,t)}function FM(){return new po(co.APP_DELETED,"The Firebase app was deleted.")}function kq(t){return new po(co.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=_a.makeFromUrl(e,r)}catch(i){return new _a(e,"")}if(n.path==="")return n;throw Dq(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",s=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(S){S.path_=decodeURIComponent(S.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp("^https?://".concat(f,"/").concat(d,"/b/").concat(i,"/o").concat(h),"i"),m={bucket:1,path:3},g=r===LM?"(?:storage.googleapis.com|storage.cloud.google.com)":r,v="([^?#]*)",y=new RegExp("^https?://".concat(g,"/").concat(i,"/").concat(v),"i"),w=[{regex:s,indices:l,postModify:a},{regex:p,indices:m,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let S=0;S<w.length;S++){const A=w[S],_=A.regex.exec(e);if(_){const E=_[A.indices.bucket];let N=_[A.indices.path];N||(N=""),n=new _a(E,N),A.postModify(n);break}}if(n==null)throw Iq(e);return n}}class Mq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rq(t,e,r){let n=1,i=null,a=null,o=!1,s=0;function l(){return s===2}let u=!1;function d(...v){u||(u=!0,e.apply(null,v))}function f(v){i=setTimeout(()=>{i=null,t(p,l())},v)}function h(){a&&clearTimeout(a)}function p(v,...y){if(u){h();return}if(v){h(),d.call(null,v,...y);return}if(l()||o){h(),d.call(null,v,...y);return}n<64&&(n*=2);let w;s===1?(s=2,w=0):w=(n+Math.random())*1e3,f(w)}let m=!1;function g(v){m||(m=!0,h(),!u&&(i!==null?(v||(s=2),clearTimeout(i),f(0)):v||(s=1)))}return f(0),a=setTimeout(()=>{o=!0,g(!0)},r),g}function $q(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lq(t){return t!==void 0}function mN(t,e,r,n){if(n<e)throw pN("Invalid value for '".concat(t,"'. Expected ").concat(e," or greater."));if(n>r)throw pN("Invalid value for '".concat(t,"'. Expected ").concat(r," or less."))}function Fq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var H0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(H0||(H0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e,r,n,i,a,o,s,l,u,d,f,h=!0,p=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new jm(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=s=>{const l=s.loaded,u=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const s=a.getErrorCode()===H0.NO_ERROR,l=a.getStatus();if(!s||Bq(l,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===H0.ABORT;n(!1,new jm(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new jm(u,a))})},r=(n,i)=>{const a=this.resolve_,o=this.reject_,s=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(s,s.getResponse());Lq(l)?a(l):a()}catch(l){o(l)}else if(s!==null){const l=Tq();l.serverResponse=s.getErrorText(),this.errorCallback_?o(this.errorCallback_(s,l)):o(l)}else if(i.canceled){const l=this.appDelete_?FM():Oq();o(l)}else{const l=Pq();o(l)}};this.canceled_?r(!1,new jm(!1,null,!0)):this.backoffId_=Rq(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$q(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jm{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Vq(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Uq(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function Wq(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Hq(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Gq(t,e,r,n,i,a,o=!0,s=!1){const l=Fq(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return Wq(d,e),Vq(d,r),Uq(d,a),Hq(d,n),new zq(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qq(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Kq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,r){this._service=e,r instanceof _a?this._location=r:this._location=_a.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new G0(e,r)}get root(){const e=new _a(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kq(this._location.path)}get storage(){return this._service}get parent(){const e=qq(this._location.path);if(e===null)return null;const r=new _a(this._location.bucket,e);return new G0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw kq(e)}}function gN(t,e){const r=e==null?void 0:e[Eq];return r==null?null:_a.makeFromBucketSpec(r,t)}function Xq(t,e,r,n={}){t.host="".concat(e,":").concat(r);const i=_V(e);i&&(CV("https://".concat(t.host,"/b")),EV("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:NV(a,t.app.options.projectId))}class Yq{constructor(e,r,n,i,a,o=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=LM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nq,this._maxUploadRetryTime=jq,this._requests=new Set,i!=null?this._bucket=_a.makeFromBucketSpec(i,this._host):this._bucket=gN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=_a.makeFromBucketSpec(this._url,e):this._bucket=gN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return G(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(r!==null)return r.accessToken}return null})}_getAppCheckToken(){return G(this,null,function*(){if(AV(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new G0(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new Mq(FM());{const o=Gq(e,this._appId,n,i,r,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,r){return G(this,null,function*(){const[n,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()})}}const vN="@firebase/storage",yN="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="storage";function Zq(t=AA(),e){t=kd(t);const n=Md(t,BM).getImmediate({identifier:e}),i=SV("storage");return i&&Qq(n,...i),n}function Qq(t,e,r,n={}){Xq(t,e,r,n)}function Jq(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Yq(r,n,i,e,wV)}function eK(){el(new tl(BM,Jq,"PUBLIC").setMultipleInstances(!0)),Os(vN,yN,""),Os(vN,yN,"esm2017")}eK();const zM="@firebase/installations",ZA="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=1e4,UM="w:".concat(ZA),WM="FIS_v2",tK="https://firebaseinstallations.googleapis.com/v1",rK=60*60*1e3,nK="installations",iK="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},il=new SA(nK,iK,aK);function HM(t){return t instanceof wA&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM({projectId:t}){return"".concat(tK,"/projects/").concat(t,"/installations")}function qM(t){return{token:t.token,requestStatus:2,expiresIn:sK(t.expiresIn),creationTime:Date.now()}}function KM(t,e){return G(this,null,function*(){const n=(yield e.json()).error;return il.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})}function XM({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function oK(t,{refreshToken:e}){const r=XM(t);return r.append("Authorization",cK(e)),r}function YM(t){return G(this,null,function*(){const e=yield t();return e.status>=500&&e.status<600?t():e})}function sK(t){return Number(t.replace("s","000"))}function cK(t){return"".concat(WM," ").concat(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(n,i){return G(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const a=GM(t),o=XM(t),s=e.getImmediate({optional:!0});if(s){const f=yield s.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}const l={fid:r,authVersion:WM,appId:t.appId,sdkVersion:UM},u={method:"POST",headers:o,body:JSON.stringify(l)},d=yield YM(()=>fetch(a,u));if(d.ok){const f=yield d.json();return{fid:f.fid||r,registrationStatus:2,refreshToken:f.refreshToken,authToken:qM(f.authToken)}}else throw yield KM("Create Installation",d)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dK=/^[cdef][\w-]{21}$/,Ub="";function fK(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=hK(t);return dK.test(r)?r:Ub}catch(t){return Ub}}function hK(t){return uK(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t){return"".concat(t.appName,"!").concat(t.appId)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new Map;function JM(t,e){const r=qv(t);eR(r,e),pK(r,e)}function eR(t,e){const r=QM.get(t);if(r)for(const n of r)n(e)}function pK(t,e){const r=mK();r&&r.postMessage({key:t,fid:e}),gK()}let Nc=null;function mK(){return!Nc&&"BroadcastChannel"in self&&(Nc=new BroadcastChannel("[Firebase] FID Change"),Nc.onmessage=t=>{eR(t.data.key,t.data.fid)}),Nc}function gK(){QM.size===0&&Nc&&(Nc.close(),Nc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK="firebase-installations-database",yK=1,al="firebase-installations-store";let qx=null;function QA(){return qx||(qx=_A(vK,yK,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(al)}}})),qx}function q0(t,e){return G(this,null,function*(){const r=qv(t),i=(yield QA()).transaction(al,"readwrite"),a=i.objectStore(al),o=yield a.get(r);return yield a.put(e,r),yield i.done,(!o||o.fid!==e.fid)&&JM(t,e.fid),e})}function tR(t){return G(this,null,function*(){const e=qv(t),n=(yield QA()).transaction(al,"readwrite");yield n.objectStore(al).delete(e),yield n.done})}function Kv(t,e){return G(this,null,function*(){const r=qv(t),i=(yield QA()).transaction(al,"readwrite"),a=i.objectStore(al),o=yield a.get(r),s=e(o);return s===void 0?yield a.delete(r):yield a.put(s,r),yield i.done,s&&(!o||o.fid!==s.fid)&&JM(t,s.fid),s})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){return G(this,null,function*(){let e;const r=yield Kv(t.appConfig,n=>{const i=xK(n),a=bK(t,i);return e=a.registrationPromise,a.installationEntry});return r.fid===Ub?{installationEntry:yield e}:{installationEntry:r,registrationPromise:e}})}function xK(t){const e=t||{fid:fK(),registrationStatus:0};return rR(e)}function bK(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(il.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=wK(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AK(t)}:{installationEntry:e}}function wK(t,e){return G(this,null,function*(){try{const r=yield lK(t,e);return q0(t.appConfig,r)}catch(r){throw HM(r)&&r.customData.serverCode===409?yield tR(t.appConfig):yield q0(t.appConfig,{fid:e.fid,registrationStatus:0}),r}})}function AK(t){return G(this,null,function*(){let e=yield xN(t.appConfig);for(;e.registrationStatus===1;)yield ZM(100),e=yield xN(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=yield JA(t);return n||r}return e})}function xN(t){return Kv(t,e=>{if(!e)throw il.create("installation-not-found");return rR(e)})}function rR(t){return SK(t)?{fid:t.fid,registrationStatus:0}:t}function SK(t){return t.registrationStatus===1&&t.registrationTime+VM<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _K(n,i){return G(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},r){const a=CK(t,r),o=oK(t,r),s=e.getImmediate({optional:!0});if(s){const f=yield s.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}const l={installation:{sdkVersion:UM,appId:t.appId}},u={method:"POST",headers:o,body:JSON.stringify(l)},d=yield YM(()=>fetch(a,u));if(d.ok){const f=yield d.json();return qM(f)}else throw yield KM("Generate Auth Token",d)})}function CK(t,{fid:e}){return"".concat(GM(t),"/").concat(e,"/authTokens:generate")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t,e=!1){return G(this,null,function*(){let r;const n=yield Kv(t.appConfig,a=>{if(!nR(a))throw il.create("not-registered");const o=a.authToken;if(!e&&jK(o))return a;if(o.requestStatus===1)return r=EK(t,e),a;{if(!navigator.onLine)throw il.create("app-offline");const s=PK(a);return r=NK(t,s),s}});return r?yield r:n.authToken})}function EK(t,e){return G(this,null,function*(){let r=yield bN(t.appConfig);for(;r.authToken.requestStatus===1;)yield ZM(100),r=yield bN(t.appConfig);const n=r.authToken;return n.requestStatus===0?eS(t,e):n})}function bN(t){return Kv(t,e=>{if(!nR(e))throw il.create("not-registered");const r=e.authToken;return OK(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function NK(t,e){return G(this,null,function*(){try{const r=yield _K(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return yield q0(t.appConfig,n),r}catch(r){if(HM(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))yield tR(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield q0(t.appConfig,n)}throw r}})}function nR(t){return t!==void 0&&t.registrationStatus===2}function jK(t){return t.requestStatus===2&&!TK(t)}function TK(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+rK}function PK(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function OK(t){return t.requestStatus===1&&t.requestTime+VM<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IK(t){return G(this,null,function*(){const e=t,{installationEntry:r,registrationPromise:n}=yield JA(e);return n?n.catch(console.error):eS(e).catch(console.error),r.fid})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DK(t,e=!1){return G(this,null,function*(){const r=t;return yield kK(r),(yield eS(r,e)).token})}function kK(t){return G(this,null,function*(){const{registrationPromise:e}=yield JA(t);e&&(yield e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MK(t){if(!t||!t.options)throw Kx("App Configuration");if(!t.name)throw Kx("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw Kx(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Kx(t){return il.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="installations",RK="installations-internal",$K=t=>{const e=t.getProvider("app").getImmediate(),r=MK(e),n=Md(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},LK=t=>{const e=t.getProvider("app").getImmediate(),r=Md(e,iR).getImmediate();return{getId:()=>IK(r),getToken:i=>DK(r,i)}};function FK(){el(new tl(iR,$K,"PUBLIC")),el(new tl(RK,LK,"PRIVATE"))}FK();Os(zM,ZA);Os(zM,ZA,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="analytics",BK="firebase_id",zK="origin",VK=60*1e3,UK="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tS="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new jV("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WK={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pi=new SA("analytics","Analytics",WK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HK(t){if(!t.startsWith(tS)){const e=Pi.create("invalid-gtag-resource",{gtagURL:t});return mi.warn(e.message),""}return t}function aR(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function GK(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function qK(t,e){const r=GK("firebase-js-sdk-policy",{createScriptURL:HK}),n=document.createElement("script"),i="".concat(tS,"?l=").concat(t,"&id=").concat(e);n.src=r?r==null?void 0:r.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function KK(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function XK(t,e,r,n,i,a){return G(this,null,function*(){const o=n[i];try{if(o)yield e[o];else{const l=(yield aR(r)).find(u=>u.measurementId===i);l&&(yield e[l.appId])}}catch(s){mi.error(s)}t("config",i,a)})}function YK(t,e,r,n,i){return G(this,null,function*(){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const s=yield aR(r);for(const l of o){const u=s.find(f=>f.measurementId===l),d=u&&e[u.appId];if(d)a.push(d);else{a=[];break}}}a.length===0&&(a=Object.values(e)),yield Promise.all(a),t("event",n,i||{})}catch(a){mi.error(a)}})}function ZK(t,e,r,n){function i(a,...o){return G(this,null,function*(){try{if(a==="event"){const[s,l]=o;yield YK(t,e,r,s,l)}else if(a==="config"){const[s,l]=o;yield XK(t,e,r,n,s,l)}else if(a==="consent"){const[s,l]=o;t("consent",s,l)}else if(a==="get"){const[s,l,u]=o;t("get",s,l,u)}else if(a==="set"){const[s]=o;t("set",s)}else t(a,...o)}catch(s){mi.error(s)}})}return i}function QK(t,e,r,n,i){let a=function(...o){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=ZK(a,t,e,r),{gtagCore:a,wrappedGtag:window[i]}}function JK(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(tS)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eX=30,tX=1e3;class rX{constructor(e={},r=tX){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const oR=new rX;function nX(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function iX(t){return G(this,null,function*(){var e;const{appId:r,apiKey:n}=t,i={method:"GET",headers:nX(n)},a=UK.replace("{app-id}",r),o=yield fetch(a,i);if(o.status!==200&&o.status!==304){let s="";try{const l=yield o.json();!((e=l.error)===null||e===void 0)&&e.message&&(s=l.error.message)}catch(l){}throw Pi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s})}return o.json()})}function aX(n){return G(this,arguments,function*(t,e=oR,r){const{appId:i,apiKey:a,measurementId:o}=t.options;if(!i)throw Pi.create("no-app-id");if(!a){if(o)return{measurementId:o,appId:i};throw Pi.create("no-api-key")}const s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new cX;return setTimeout(()=>G(this,null,function*(){l.abort()}),VK),sR({appId:i,apiKey:a,measurementId:o},s,l,e)})}function sR(a,o,s){return G(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:r},n,i=oR){var l;const{appId:u,measurementId:d}=t;try{yield oX(n,e)}catch(f){if(d)return mi.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(d,' provided in the "measurementId" field in the local Firebase config. [').concat(f==null?void 0:f.message,"]")),{appId:u,measurementId:d};throw f}try{const f=yield iX(t);return i.deleteThrottleMetadata(u),f}catch(f){const h=f;if(!sX(h)){if(i.deleteThrottleMetadata(u),d)return mi.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(d,' provided in the "measurementId" field in the local Firebase config. [').concat(h==null?void 0:h.message,"]")),{appId:u,measurementId:d};throw f}const p=Number((l=h==null?void 0:h.customData)===null||l===void 0?void 0:l.httpStatus)===503?DE(r,i.intervalMillis,eX):DE(r,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+p,backoffCount:r+1};return i.setThrottleMetadata(u,m),mi.debug("Calling attemptFetch again in ".concat(p," millis")),sR(t,m,n,i)}})}function oX(t,e){return new Promise((r,n)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(r,i);t.addEventListener(()=>{clearTimeout(a),n(Pi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sX(t){if(!(t instanceof wA)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class cX{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function lX(t,e,r,n,i){return G(this,null,function*(){if(i&&i.global){t("event",r,n);return}else{const a=yield e,o=Object.assign(Object.assign({},n),{send_to:a});t("event",r,o)}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uX(){return G(this,null,function*(){if(B4())try{yield z4()}catch(t){return mi.warn(Pi.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return mi.warn(Pi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function dX(t,e,r,n,i,a,o){return G(this,null,function*(){var s;const l=aX(t);l.then(p=>{r[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&mi.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,") does not match the measurement ID fetched from the server (").concat(p.measurementId,"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."))}).catch(p=>mi.error(p)),e.push(l);const u=uX().then(p=>{if(p)return n.getId()}),[d,f]=yield Promise.all([l,u]);JK(a)||qK(a,d.measurementId),i("js",new Date);const h=(s=o==null?void 0:o.config)!==null&&s!==void 0?s:{};return h[zK]="firebase",h.update=!0,f!=null&&(h[BK]=f),i("config",d.measurementId,h),d.measurementId})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(e){this.app=e}_delete(){return delete lh[this.app.options.appId],Promise.resolve()}}let lh={},wN=[];const AN={};let Xx="dataLayer",hX="gtag",SN,cR,_N=!1;function pX(){const t=[];if(TV()&&t.push("This is a browser extension environment."),V4()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>"(".concat(i+1,") ").concat(n)).join(" "),r=Pi.create("invalid-analytics-context",{errorInfo:e});mi.warn(r.message)}}function mX(t,e,r){pX();const n=t.options.appId;if(!n)throw Pi.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)mi.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '.concat(t.options.measurementId,' provided in the "measurementId" field in the local Firebase config.'));else throw Pi.create("no-api-key");if(lh[n]!=null)throw Pi.create("already-exists",{id:n});if(!_N){KK(Xx);const{wrappedGtag:a,gtagCore:o}=QK(lh,wN,AN,Xx,hX);cR=a,SN=o,_N=!0}return lh[n]=dX(t,wN,AN,e,SN,Xx,r),new fX(t)}function gX(t=AA()){t=kd(t);const e=Md(t,K0);return e.isInitialized()?e.getImmediate():vX(t)}function vX(t,e={}){const r=Md(t,K0);if(r.isInitialized()){const i=r.getImmediate();if(PV(e,r.getOptions()))return i;throw Pi.create("already-initialized")}return r.initialize({options:e})}function yX(t,e,r,n){t=kd(t),lX(cR,lh[t.app.options.appId],e,r,n).catch(i=>mi.error(i))}const CN="@firebase/analytics",EN="0.10.16";function xX(){el(new tl(K0,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return mX(n,i,r)},"PUBLIC")),el(new tl("analytics-internal",t,"PRIVATE")),Os(CN,EN),Os(CN,EN,"esm2017");function t(e){try{const r=e.getProvider(K0).getImmediate();return{logEvent:(n,i,a)=>yX(r,n,i,a)}}catch(r){throw Pi.create("interop-component-reg-failed",{reason:r})}}}xX();const bX={BASE_URL:"/FamilyTaskTracker/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_NAME:"Family Task Tracker",VITE_APP_VERSION:"1.0.0",VITE_DEEPSEEK_KEY:"sk-fa7a7447407641f59bccfc09fda3c3d7",VITE_FIREBASE_API_KEY:"AIzaSyDnuuXIHf37jS4syWsolJa0YTg_4bN-VUE",VITE_FIREBASE_APP_ID:"1:984085570940:web:ddc61b61702341939130f9",VITE_FIREBASE_AUTH_DOMAIN:"familytasktracker-c2dfe.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-2TFQZKTN8G",VITE_FIREBASE_MESSAGING_SENDER_ID:"984085570940",VITE_FIREBASE_PROJECT_ID:"familytasktracker-c2dfe",VITE_FIREBASE_STORAGE_BUCKET:"familytasktracker-c2dfe.firebasestorage.app",VITE_FIREBASE_VAPID_KEY:"BHvJqEIDOQuhXFouxEo9drLiqJpatiR-25GUZxorXO5GaA8viMvouU9N3oQ7wtmgCFCx3eDW_JP62fHHxAfGlNw",VITE_FITBIT_CLIENT_ID:"23QN82",VITE_FITBIT_REDIRECT_URI:"https://127.0.0.1:3000/",VITE_GOOGLE_SEARCH_API_KEY:"AIzaSyDPrsjzwVQQv-XdsBMRtthrnmq_20eOpKM",VITE_GOOGLE_SEARCH_ENGINE_ID:"45bf48bbd17764d52",VITE_OPENAI_API_KEY:"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",VITE_PASSWORD_ENCRYPTION_KEY:"SuperTopoliniArrivano1234567890AB",VITE_SPOTIFY_CLIENT_ID:"bb760b3b8ee8426f97527e93f0d14e20",VITE_SPOTIFY_REDIRECT_URI:"https://127.0.0.1:3000/"},wX={apiKey:"AIzaSyDnuuXIHf37jS4syWsolJa0YTg_4bN-VUE",authDomain:"familytasktracker-c2dfe.firebaseapp.com",projectId:"familytasktracker-c2dfe",messagingSenderId:"984085570940",appId:"1:984085570940:web:ddc61b61702341939130f9",measurementId:"G-2TFQZKTN8G"},AX=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"],NN=AX.filter(t=>!bX[t]);if(NN.length>0)throw new Error("Missing required environment variables: ".concat(NN.join(", ")));const Xv=OV(wX);IV(Xv);const wt=DV(Xv);Zq(Xv);gX(Xv);const xo={MAX_LOGIN_ATTEMPTS:3,LOCKOUT_DURATION:1*60*1e3,SESSION_DURATION:720*60*60*1e3,API_DELAY:1e3,STORAGE_KEY:"familyTaskManager_auth",FAILED_ATTEMPTS_KEY:"familyTaskManager_failedAttempts"};class rS{static generateSecurePassword(e=12){const r="abcdefghijklmnopqrstuvwxyz",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="0123456789",a="!@#$%^&*",o=r+n+i+a;let s="";s+=r[Math.floor(Math.random()*r.length)],s+=n[Math.floor(Math.random()*n.length)],s+=i[Math.floor(Math.random()*i.length)],s+=a[Math.floor(Math.random()*a.length)];for(let l=4;l<e;l++)s+=o[Math.floor(Math.random()*o.length)];return s.split("").sort(()=>Math.random()-.5).join("")}static encryptPassword(e){return G(this,null,function*(){if(!this.ENCRYPTION_KEY)throw new Error("VITE_PASSWORD_ENCRYPTION_KEY non configurata nel file .env");const r=new TextEncoder,n=r.encode(e),i=crypto.getRandomValues(new Uint8Array(12)),a=r.encode(this.ENCRYPTION_KEY.padEnd(32,"0").slice(0,32)),o=yield crypto.subtle.importKey("raw",a,{name:"AES-GCM"},!1,["encrypt","decrypt"]),s=yield crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,n),l=Array.from(new Uint8Array(s)).map(d=>d.toString(16).padStart(2,"0")).join(""),u=Array.from(i).map(d=>d.toString(16).padStart(2,"0")).join("");return{encrypted:l,iv:u}})}static decryptPassword(e,r){return G(this,null,function*(){if(!this.ENCRYPTION_KEY)throw new Error("VITE_PASSWORD_ENCRYPTION_KEY non configurata nel file .env");const n=new TextEncoder,i=new TextDecoder,a=new Uint8Array(e.match(/.{2}/g).map(d=>parseInt(d,16))),o=new Uint8Array(r.match(/.{2}/g).map(d=>parseInt(d,16))),s=n.encode(this.ENCRYPTION_KEY.padEnd(32,"0").slice(0,32)),l=yield crypto.subtle.importKey("raw",s,{name:"AES-GCM"},!1,["encrypt","decrypt"]),u=yield crypto.subtle.decrypt({name:"AES-GCM",iv:o},l,a);return i.decode(u)})}}Rt(rS,"ENCRYPTION_KEY","SuperTopoliniArrivano1234567890AB");class Io{static loadUsersFromFirestore(){return G(this,null,function*(){if(!wt)throw console.warn("Firebase non configurato, impossibile caricare utenti"),new Error("Firebase non configurato");try{const e=Is(wt,"users"),r=yield Uc(e),n=[];for(const i of r.docs){const a=i.data();try{const o=yield rS.decryptPassword(a.passwordEncrypted,a.passwordIV);n.push(new Vb(a.username,a.role,a.email,o))}catch(o){console.error("Errore nella decifratura password per ".concat(a.username,":"),o)}}if(n.length===0)throw new Error("Nessun utente valido trovato in Firestore");return n}catch(e){throw console.error(" Errore nel caricamento utenti da Firestore:",e),e}})}static login(e){return G(this,null,function*(){yield new Promise(n=>setTimeout(n,xo.API_DELAY));const r=this.validateLoginInput(e);if(r.length>0)throw new Error(r.join(". "));if(this.isUserLocked(e.username)){const n=Math.ceil(xo.LOCKOUT_DURATION/6e4);throw new Error("Account bloccato. Riprova tra ".concat(n," minuti."))}try{const i=(yield this.loadUsersFromFirestore()).find(s=>s.username===e.username&&s.password===e.password);if(!i){this.recordFailedAttempt(e.username);const s=this.getFailedAttempts(e.username),l=xo.MAX_LOGIN_ATTEMPTS-s.count;throw l<=0?new Error("Account bloccato dopo troppi tentativi fallite."):new Error("Credenziali non valide. Tentativi rimanenti: ".concat(l))}this.clearFailedAttempts(e.username);const a=new Vb(i.username,i.role,i.email,""),o={user:a,isAuthenticated:!0,loginTime:Date.now()};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(o)),a}catch(n){throw n instanceof Error&&n.message.includes("Firebase")?new Error("Servizio temporaneamente non disponibile. Riprova pi tardi."):n}})}static getAvailableUsers(){return G(this,null,function*(){try{return(yield this.loadUsersFromFirestore()).map(r=>({username:r.username,displayName:this.getDisplayName(r.username,r.role),role:r.role}))}catch(e){return console.error("Errore nel caricamento utenti per UI:",e),[]}})}static getDisplayName(e,r){return r==="admin"?"".concat(e," (Amministratore)"):"".concat(e," (Membro della famiglia)")}static logout(){localStorage.removeItem(this.STORAGE_KEY)}static getCurrentUser(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return null;const r=JSON.parse(e);return this.isSessionExpired(r)?(this.logout(),null):r.isAuthenticated?r.user:null}catch(e){return console.error("Errore nel recupero utente corrente:",e),this.logout(),null}}static isAuthenticated(){return this.getCurrentUser()!==null}static validateLoginInput(e){var n,i;const r=[];return(n=e.username)!=null&&n.trim()||r.push("Username  obbligatorio"),(i=e.password)!=null&&i.trim()||r.push("Password  obbligatoria"),e.password&&e.password.length<6&&r.push("Password troppo corta"),e.username&&!/^[a-zA-Z0-9_-]+$/.test(e.username)&&r.push("Username contiene caratteri non validi"),r}static isSessionExpired(e){return e.loginTime?Date.now()-e.loginTime>xo.SESSION_DURATION:!1}static isUserLocked(e){const r=this.getFailedAttempts(e);return r.count>=xo.MAX_LOGIN_ATTEMPTS?Date.now()-r.timestamp<xo.LOCKOUT_DURATION:!1}static recordFailedAttempt(e){const r=this.getFailedAttempts(e),n={username:e,timestamp:Date.now(),count:r.count+1};localStorage.setItem("".concat(this.FAILED_ATTEMPTS_KEY,"_").concat(e),JSON.stringify(n))}static getFailedAttempts(e){try{const r=localStorage.getItem("".concat(this.FAILED_ATTEMPTS_KEY,"_").concat(e));if(r){const n=JSON.parse(r);return Date.now()-n.timestamp>xo.LOCKOUT_DURATION?(this.clearFailedAttempts(e),{username:e,timestamp:0,count:0}):n}}catch(r){console.error("Errore nel recupero tentativi falliti:",r)}return{username:e,timestamp:0,count:0}}static clearFailedAttempts(e){localStorage.removeItem("".concat(this.FAILED_ATTEMPTS_KEY,"_").concat(e))}}Rt(Io,"STORAGE_KEY",xo.STORAGE_KEY),Rt(Io,"FAILED_ATTEMPTS_KEY",xo.FAILED_ATTEMPTS_KEY);function nS(){const[t,e]=x.useState(null),[r,n]=x.useState(!0);return x.useEffect(()=>{const o=Io.getCurrentUser();e(o),n(!1)},[]),{user:t,isLoading:r,isAuthenticated:!!t,login:o=>G(this,null,function*(){const s=yield Io.login(o);e(s)}),logout:()=>{Io.logout(),e(null)}}}const lR=x.createContext(void 0);function SX({children:t}){const e=nS();return c.jsx(lR.Provider,{value:e,children:t})}function Bt(){const t=x.useContext(lR);if(t===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return t}var Vp=t=>t.type==="checkbox",jc=t=>t instanceof Date,Zn=t=>t==null;const uR=t=>typeof t=="object";var zr=t=>!Zn(t)&&!Array.isArray(t)&&uR(t)&&!jc(t),dR=t=>zr(t)&&t.target?Vp(t.target)?t.target.checked:t.target.value:t,_X=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,fR=(t,e)=>t.has(_X(e)),CX=t=>{const e=t.constructor&&t.constructor.prototype;return zr(e)&&e.hasOwnProperty("isPrototypeOf")},iS=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Sn(t){let e;const r=Array.isArray(t),n=typeof FileList!="undefined"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(iS&&(t instanceof Blob||n))&&(r||zr(t)))if(e=r?[]:{},!r&&!CX(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Sn(t[i]));else return t;return e}var Yv=t=>/^\w*$/.test(t),Rr=t=>t===void 0,aS=t=>Array.isArray(t)?t.filter(Boolean):[],oS=t=>aS(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ne=(t,e,r)=>{if(!e||!zr(t))return r;const n=(Yv(e)?[e]:oS(e)).reduce((i,a)=>Zn(i)?i:i[a],t);return Rr(n)||n===t?Rr(t[e])?r:t[e]:n},Si=t=>typeof t=="boolean",Ut=(t,e,r)=>{let n=-1;const i=Yv(e)?[e]:oS(e),a=i.length,o=a-1;for(;++n<a;){const s=i[n];let l=r;if(n!==o){const u=t[s];l=zr(u)||Array.isArray(u)?u:isNaN(+i[n+1])?{}:[]}if(s==="__proto__"||s==="constructor"||s==="prototype")return;t[s]=l,t=t[s]}};const X0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},va={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},sS=$.createContext(null);sS.displayName="HookFormContext";const Zv=()=>$.useContext(sS),EX=t=>{const n=t,{children:e}=n,r=K(n,["children"]);return $.createElement(sS.Provider,{value:r},e)};var hR=(t,e,r,n=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==va.all&&(e._proxyFormState[o]=!n||va.all),r&&(r[o]=!0),t[o]}});return i};const cS=typeof window!="undefined"?x.useLayoutEffect:x.useEffect;function NX(t){const e=Zv(),{control:r=e.control,disabled:n,name:i,exact:a}=t||{},[o,s]=$.useState(r._formState),l=$.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return cS(()=>r._subscribe({name:i,formState:l.current,exact:a,callback:u=>{!n&&s(C(C({},r._formState),u))}}),[i,n,a]),$.useEffect(()=>{l.current.isValid&&r._setValid(!0)},[r]),$.useMemo(()=>hR(o,r,l.current,!1),[o,r])}var Wa=t=>typeof t=="string",pR=(t,e,r,n,i)=>Wa(t)?(n&&e.watch.add(t),Ne(r,t,i)):Array.isArray(t)?t.map(a=>(n&&e.watch.add(a),Ne(r,a))):(n&&(e.watchAll=!0),r);function jX(t){const e=Zv(),{control:r=e.control,name:n,defaultValue:i,disabled:a,exact:o}=t||{},s=$.useRef(i),[l,u]=$.useState(r._getWatch(n,s.current));return cS(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:d=>!a&&u(pR(n,r._names,d.values||r._formValues,!1,s.current))}),[n,r,a,o]),$.useEffect(()=>r._removeUnmounted()),l}function TX(t){const e=Zv(),{name:r,disabled:n,control:i=e.control,shouldUnregister:a}=t,o=fR(i._names.array,r),s=jX({control:i,name:r,defaultValue:Ne(i._formValues,r,Ne(i._defaultValues,r,t.defaultValue)),exact:!0}),l=NX({control:i,name:r,exact:!0}),u=$.useRef(t),d=$.useRef(i.register(r,C(M(C({},t.rules),{value:s}),Si(t.disabled)?{disabled:t.disabled}:{}))),f=$.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ne(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ne(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ne(l.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ne(l.validatingFields,r)},error:{enumerable:!0,get:()=>Ne(l.errors,r)}}),[l,r]),h=$.useCallback(v=>d.current.onChange({target:{value:dR(v),name:r},type:X0.CHANGE}),[r]),p=$.useCallback(()=>d.current.onBlur({target:{value:Ne(i._formValues,r),name:r},type:X0.BLUR}),[r,i._formValues]),m=$.useCallback(v=>{const y=Ne(i._fields,r);y&&v&&(y._f.ref={focus:()=>v.focus&&v.focus(),select:()=>v.select&&v.select(),setCustomValidity:b=>v.setCustomValidity(b),reportValidity:()=>v.reportValidity()})},[i._fields,r]),g=$.useMemo(()=>M(C({name:r,value:s},Si(n)||l.disabled?{disabled:l.disabled||n}:{}),{onChange:h,onBlur:p,ref:m}),[r,n,l.disabled,h,p,m,s]);return $.useEffect(()=>{const v=i._options.shouldUnregister||a;i.register(r,C(C({},u.current.rules),Si(u.current.disabled)?{disabled:u.current.disabled}:{}));const y=(b,w)=>{const S=Ne(i._fields,b);S&&S._f&&(S._f.mount=w)};if(y(r,!0),v){const b=Sn(Ne(i._options.defaultValues,r));Ut(i._defaultValues,r,b),Rr(Ne(i._formValues,r))&&Ut(i._formValues,r,b)}return!o&&i.register(r),()=>{(o?v&&!i._state.action:v)?i.unregister(r):y(r,!1)}},[r,i,o,a]),$.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),$.useMemo(()=>({field:g,formState:l,fieldState:f}),[g,l,f])}const PX=t=>t.render(TX(t));var mR=(t,e,r,n,i)=>e?M(C({},r[t]),{types:M(C({},r[t]&&r[t].types?r[t].types:{}),{[n]:i||!0})}):{},uh=t=>Array.isArray(t)?t:[t],jN=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Wb=t=>Zn(t)||!uR(t);function ps(t,e){if(Wb(t)||Wb(e))return t===e;if(jc(t)&&jc(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r){const a=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=e[i];if(jc(a)&&jc(o)||zr(a)&&zr(o)||Array.isArray(a)&&Array.isArray(o)?!ps(a,o):a!==o)return!1}}return!0}var ui=t=>zr(t)&&!Object.keys(t).length,lS=t=>t.type==="file",ya=t=>typeof t=="function",Y0=t=>{if(!iS)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},gR=t=>t.type==="select-multiple",uS=t=>t.type==="radio",OX=t=>uS(t)||Vp(t),Yx=t=>Y0(t)&&t.isConnected;function IX(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Rr(t)?n++:t[e[n++]];return t}function DX(t){for(const e in t)if(t.hasOwnProperty(e)&&!Rr(t[e]))return!1;return!0}function Jr(t,e){const r=Array.isArray(e)?e:Yv(e)?[e]:oS(e),n=r.length===1?t:IX(t,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(zr(n)&&ui(n)||Array.isArray(n)&&DX(n))&&Jr(t,r.slice(0,-1)),t}var vR=t=>{for(const e in t)if(ya(t[e]))return!0;return!1};function Z0(t,e={}){const r=Array.isArray(t);if(zr(t)||r)for(const n in t)Array.isArray(t[n])||zr(t[n])&&!vR(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Z0(t[n],e[n])):Zn(t[n])||(e[n]=!0);return e}function yR(t,e,r){const n=Array.isArray(t);if(zr(t)||n)for(const i in t)Array.isArray(t[i])||zr(t[i])&&!vR(t[i])?Rr(e)||Wb(r[i])?r[i]=Array.isArray(t[i])?Z0(t[i],[]):C({},Z0(t[i])):yR(t[i],Zn(e)?{}:e[i],r[i]):r[i]=!ps(t[i],e[i]);return r}var Cf=(t,e)=>yR(t,e,Z0(e));const TN={value:!1,isValid:!1},PN={value:!0,isValid:!0};var xR=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Rr(t[0].attributes.value)?Rr(t[0].value)||t[0].value===""?PN:{value:t[0].value,isValid:!0}:PN:TN}return TN},bR=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Rr(t)?t:e?t===""?NaN:t&&+t:r&&Wa(t)?new Date(t):n?n(t):t;const ON={isValid:!1,value:null};var wR=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,ON):ON;function IN(t){const e=t.ref;return lS(e)?e.files:uS(e)?wR(t.refs).value:gR(e)?[...e.selectedOptions].map(({value:r})=>r):Vp(e)?xR(t.refs).value:bR(Rr(e.value)?t.ref.value:e.value,t)}var kX=(t,e,r,n)=>{const i={};for(const a of t){const o=Ne(e,a);o&&Ut(i,a,o._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:n}},Q0=t=>t instanceof RegExp,Ef=t=>Rr(t)?t:Q0(t)?t.source:zr(t)?Q0(t.value)?t.value.source:t.value:t,DN=t=>({isOnSubmit:!t||t===va.onSubmit,isOnBlur:t===va.onBlur,isOnChange:t===va.onChange,isOnAll:t===va.all,isOnTouch:t===va.onTouched});const kN="AsyncFunction";var MX=t=>!!t&&!!t.validate&&!!(ya(t.validate)&&t.validate.constructor.name===kN||zr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===kN)),RX=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),MN=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const dh=(t,e,r,n)=>{for(const a of r||Object.keys(t)){const o=Ne(t,a);if(o){const i=o,{_f:s}=i,l=K(i,["_f"]);if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],a)&&!n)return!0;if(s.ref&&e(s.ref,s.name)&&!n)return!0;if(dh(l,e))break}else if(zr(l)&&dh(l,e))break}}};function RN(t,e,r){const n=Ne(t,r);if(n||Yv(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),o=Ne(e,a),s=Ne(t,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(s&&s.type)return{name:a,error:s};if(s&&s.root&&s.root.type)return{name:"".concat(a,".root"),error:s.root};i.pop()}return{name:r}}var $X=(t,e,r,n)=>{r(t);const o=t,{name:i}=o,a=K(o,["name"]);return ui(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(s=>e[s]===(!n||va.all))},LX=(t,e,r)=>!t||!e||t===e||uh(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),FX=(t,e,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?n.isOnBlur:i.isOnBlur)?!t:(r?n.isOnChange:i.isOnChange)?t:!0,BX=(t,e)=>!aS(Ne(t,e)).length&&Jr(t,e),zX=(t,e,r)=>{const n=uh(Ne(t,r));return Ut(n,"root",e[r]),Ut(t,r,n),t},x0=t=>Wa(t);function $N(t,e,r="validate"){if(x0(t)||Array.isArray(t)&&t.every(x0)||Si(t)&&!t)return{type:r,message:x0(t)?t:"",ref:e}}var $l=t=>zr(t)&&!Q0(t)?t:{value:t,message:""},LN=(t,e,r,n,i,a)=>G(Gt,null,function*(){const{ref:o,refs:s,required:l,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:m,name:g,valueAsNumber:v,mount:y}=t._f,b=Ne(r,g);if(!y||e.has(g))return{};const w=s?s[0]:o,S=P=>{i&&w.reportValidity&&(w.setCustomValidity(Si(P)?"":P||""),w.reportValidity())},A={},_=uS(o),E=Vp(o),N=_||E,T=(v||lS(o))&&Rr(o.value)&&Rr(b)||Y0(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,O=mR.bind(null,g,n,A),j=(P,D,F,I=bo.maxLength,k=bo.minLength)=>{const R=P?D:F;A[g]=C({type:P?I:k,message:R,ref:o},O(P?I:k,R))};if(a?!Array.isArray(b)||!b.length:l&&(!N&&(T||Zn(b))||Si(b)&&!b||E&&!xR(s).isValid||_&&!wR(s).isValid)){const{value:P,message:D}=x0(l)?{value:!!l,message:l}:$l(l);if(P&&(A[g]=C({type:bo.required,message:D,ref:w},O(bo.required,D)),!n))return S(D),A}if(!T&&(!Zn(f)||!Zn(h))){let P,D;const F=$l(h),I=$l(f);if(!Zn(b)&&!isNaN(b)){const k=o.valueAsNumber||b&&+b;Zn(F.value)||(P=k>F.value),Zn(I.value)||(D=k<I.value)}else{const k=o.valueAsDate||new Date(b),R=W=>new Date(new Date().toDateString()+" "+W),L=o.type=="time",V=o.type=="week";Wa(F.value)&&b&&(P=L?R(b)>R(F.value):V?b>F.value:k>new Date(F.value)),Wa(I.value)&&b&&(D=L?R(b)<R(I.value):V?b<I.value:k<new Date(I.value))}if((P||D)&&(j(!!P,F.message,I.message,bo.max,bo.min),!n))return S(A[g].message),A}if((u||d)&&!T&&(Wa(b)||a&&Array.isArray(b))){const P=$l(u),D=$l(d),F=!Zn(P.value)&&b.length>+P.value,I=!Zn(D.value)&&b.length<+D.value;if((F||I)&&(j(F,P.message,D.message),!n))return S(A[g].message),A}if(p&&!T&&Wa(b)){const{value:P,message:D}=$l(p);if(Q0(P)&&!b.match(P)&&(A[g]=C({type:bo.pattern,message:D,ref:o},O(bo.pattern,D)),!n))return S(D),A}if(m){if(ya(m)){const P=yield m(b,r),D=$N(P,w);if(D&&(A[g]=C(C({},D),O(bo.validate,D.message)),!n))return S(D.message),A}else if(zr(m)){let P={};for(const D in m){if(!ui(P)&&!n)break;const F=$N(yield m[D](b,r),w,D);F&&(P=C(C({},F),O(D,F.message)),S(F.message),n&&(A[g]=P))}if(!ui(P)&&(A[g]=C({ref:w},P),!n))return A}}return S(!0),A});const VX={mode:va.onSubmit,reValidateMode:va.onChange,shouldFocusError:!0};function UX(t={}){let e=C(C({},VX),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ya(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const n={};let i=zr(e.defaultValues)||zr(e.values)?Sn(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Sn(i),o={action:!1,mount:!1,watch:!1},s={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f=C({},d);const h={array:jN(),state:jN()},p=e.criteriaMode===va.all,m=z=>U=>{clearTimeout(u),u=setTimeout(z,U)},g=z=>G(this,null,function*(){if(!e.disabled&&(d.isValid||f.isValid||z)){const U=e.resolver?ui((yield E()).errors):yield T(n,!0);U!==r.isValid&&h.state.next({isValid:U})}}),v=(z,U)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((z||Array.from(s.mount)).forEach(Z=>{Z&&(U?Ut(r.validatingFields,Z,U):Jr(r.validatingFields,Z))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ui(r.validatingFields)}))},y=(z,U=[],Z,ce,xe=!0,me=!0)=>{if(ce&&Z&&!e.disabled){if(o.action=!0,me&&Array.isArray(Ne(n,z))){const Te=Z(Ne(n,z),ce.argA,ce.argB);xe&&Ut(n,z,Te)}if(me&&Array.isArray(Ne(r.errors,z))){const Te=Z(Ne(r.errors,z),ce.argA,ce.argB);xe&&Ut(r.errors,z,Te),BX(r.errors,z)}if((d.touchedFields||f.touchedFields)&&me&&Array.isArray(Ne(r.touchedFields,z))){const Te=Z(Ne(r.touchedFields,z),ce.argA,ce.argB);xe&&Ut(r.touchedFields,z,Te)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Cf(i,a)),h.state.next({name:z,isDirty:j(z,U),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ut(a,z,U)},b=(z,U)=>{Ut(r.errors,z,U),h.state.next({errors:r.errors})},w=z=>{r.errors=z,h.state.next({errors:r.errors,isValid:!1})},S=(z,U,Z,ce)=>{const xe=Ne(n,z);if(xe){const me=Ne(a,z,Rr(Z)?Ne(i,z):Z);Rr(me)||ce&&ce.defaultChecked||U?Ut(a,z,U?me:IN(xe._f)):F(z,me),o.mount&&g()}},A=(z,U,Z,ce,xe)=>{let me=!1,Te=!1;const tt={name:z};if(!e.disabled){if(!Z||ce){(d.isDirty||f.isDirty)&&(Te=r.isDirty,r.isDirty=tt.isDirty=j(),me=Te!==tt.isDirty);const rt=ps(Ne(i,z),U);Te=!!Ne(r.dirtyFields,z),rt?Jr(r.dirtyFields,z):Ut(r.dirtyFields,z,!0),tt.dirtyFields=r.dirtyFields,me=me||(d.dirtyFields||f.dirtyFields)&&Te!==!rt}if(Z){const rt=Ne(r.touchedFields,z);rt||(Ut(r.touchedFields,z,Z),tt.touchedFields=r.touchedFields,me=me||(d.touchedFields||f.touchedFields)&&rt!==Z)}me&&xe&&h.state.next(tt)}return me?tt:{}},_=(z,U,Z,ce)=>{const xe=Ne(r.errors,z),me=(d.isValid||f.isValid)&&Si(U)&&r.isValid!==U;if(e.delayError&&Z?(l=m(()=>b(z,Z)),l(e.delayError)):(clearTimeout(u),l=null,Z?Ut(r.errors,z,Z):Jr(r.errors,z)),(Z?!ps(xe,Z):xe)||!ui(ce)||me){const Te=M(C(C({},ce),me&&Si(U)?{isValid:U}:{}),{errors:r.errors,name:z});r=C(C({},r),Te),h.state.next(Te)}},E=z=>G(this,null,function*(){v(z,!0);const U=yield e.resolver(a,e.context,kX(z||s.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return v(z),U}),N=z=>G(this,null,function*(){const{errors:U}=yield E(z);if(z)for(const Z of z){const ce=Ne(U,Z);ce?Ut(r.errors,Z,ce):Jr(r.errors,Z)}else r.errors=U;return U}),T=(ce,xe,...me)=>G(this,[ce,xe,...me],function*(z,U,Z={valid:!0}){for(const tt in z){const rt=z[tt];if(rt){const Te=rt,{_f:sr}=Te,Wn=K(Te,["_f"]);if(sr){const fn=s.array.has(sr.name),An=rt._f&&MX(rt._f);An&&d.validatingFields&&v([tt],!0);const re=yield LN(rt,s.disabled,a,p,e.shouldUseNativeValidation&&!U,fn);if(An&&d.validatingFields&&v([tt]),re[sr.name]&&(Z.valid=!1,U))break;!U&&(Ne(re,sr.name)?fn?zX(r.errors,re,sr.name):Ut(r.errors,sr.name,re[sr.name]):Jr(r.errors,sr.name))}!ui(Wn)&&(yield T(Wn,U,Z))}}return Z.valid}),O=()=>{for(const z of s.unMount){const U=Ne(n,z);U&&(U._f.refs?U._f.refs.every(Z=>!Yx(Z)):!Yx(U._f.ref))&&Ue(z)}s.unMount=new Set},j=(z,U)=>!e.disabled&&(z&&U&&Ut(a,z,U),!ps(W(),i)),P=(z,U,Z)=>pR(z,s,C({},o.mount?a:Rr(U)?i:Wa(z)?{[z]:U}:U),Z,U),D=z=>aS(Ne(o.mount?a:i,z,e.shouldUnregister?Ne(i,z,[]):[])),F=(z,U,Z={})=>{const ce=Ne(n,z);let xe=U;if(ce){const me=ce._f;me&&(!me.disabled&&Ut(a,z,bR(U,me)),xe=Y0(me.ref)&&Zn(U)?"":U,gR(me.ref)?[...me.ref.options].forEach(Te=>Te.selected=xe.includes(Te.value)):me.refs?Vp(me.ref)?me.refs.forEach(Te=>{(!Te.defaultChecked||!Te.disabled)&&(Array.isArray(xe)?Te.checked=!!xe.find(tt=>tt===Te.value):Te.checked=xe===Te.value||!!xe)}):me.refs.forEach(Te=>Te.checked=Te.value===xe):lS(me.ref)?me.ref.value="":(me.ref.value=xe,me.ref.type||h.state.next({name:z,values:Sn(a)})))}(Z.shouldDirty||Z.shouldTouch)&&A(z,xe,Z.shouldTouch,Z.shouldDirty,!0),Z.shouldValidate&&V(z)},I=(z,U,Z)=>{for(const ce in U){if(!U.hasOwnProperty(ce))return;const xe=U[ce],me=z+"."+ce,Te=Ne(n,me);(s.array.has(z)||zr(xe)||Te&&!Te._f)&&!jc(xe)?I(me,xe,Z):F(me,xe,Z)}},k=(z,U,Z={})=>{const ce=Ne(n,z),xe=s.array.has(z),me=Sn(U);Ut(a,z,me),xe?(h.array.next({name:z,values:Sn(a)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Z.shouldDirty&&h.state.next({name:z,dirtyFields:Cf(i,a),isDirty:j(z,me)})):ce&&!ce._f&&!Zn(me)?I(z,me,Z):F(z,me,Z),MN(z,s)&&h.state.next(C({},r)),h.state.next({name:o.mount?z:void 0,values:Sn(a)})},R=z=>G(this,null,function*(){o.mount=!0;const U=z.target;let Z=U.name,ce=!0;const xe=Ne(n,Z),me=rt=>{ce=Number.isNaN(rt)||jc(rt)&&isNaN(rt.getTime())||ps(rt,Ne(a,Z,rt))},Te=DN(e.mode),tt=DN(e.reValidateMode);if(xe){let rt,sr;const Wn=U.type?IN(xe._f):dR(z),fn=z.type===X0.BLUR||z.type===X0.FOCUS_OUT,An=!RX(xe._f)&&!e.resolver&&!Ne(r.errors,Z)&&!xe._f.deps||FX(fn,Ne(r.touchedFields,Z),r.isSubmitted,tt,Te),re=MN(Z,s,fn);Ut(a,Z,Wn),fn?(xe._f.onBlur&&xe._f.onBlur(z),l&&l(0)):xe._f.onChange&&xe._f.onChange(z);const je=A(Z,Wn,fn),$e=!ui(je)||re;if(!fn&&h.state.next({name:Z,type:z.type,values:Sn(a)}),An)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?fn&&g():fn||g()),$e&&h.state.next(C({name:Z},re?{}:je));if(!fn&&re&&h.state.next(C({},r)),e.resolver){const{errors:Re}=yield E([Z]);if(me(Wn),ce){const Pt=RN(r.errors,n,Z),at=RN(Re,n,Pt.name||Z);rt=at.error,Z=at.name,sr=ui(Re)}}else v([Z],!0),rt=(yield LN(xe,s.disabled,a,p,e.shouldUseNativeValidation))[Z],v([Z]),me(Wn),ce&&(rt?sr=!1:(d.isValid||f.isValid)&&(sr=yield T(n,!0)));ce&&(xe._f.deps&&V(xe._f.deps),_(Z,sr,rt,je))}}),L=(z,U)=>{if(Ne(r.errors,U)&&z.focus)return z.focus(),1},V=(Z,...ce)=>G(this,[Z,...ce],function*(z,U={}){let xe,me;const Te=uh(z);if(e.resolver){const tt=yield N(Rr(z)?z:Te);xe=ui(tt),me=z?!Te.some(rt=>Ne(tt,rt)):xe}else z?(me=(yield Promise.all(Te.map(tt=>G(this,null,function*(){const rt=Ne(n,tt);return yield T(rt&&rt._f?{[tt]:rt}:rt)})))).every(Boolean),!(!me&&!r.isValid)&&g()):me=xe=yield T(n);return h.state.next(M(C(C({},!Wa(z)||(d.isValid||f.isValid)&&xe!==r.isValid?{}:{name:z}),e.resolver||!z?{isValid:xe}:{}),{errors:r.errors})),U.shouldFocus&&!me&&dh(n,L,z?Te:s.mount),me}),W=z=>{const U=C({},o.mount?a:i);return Rr(z)?U:Wa(z)?Ne(U,z):z.map(Z=>Ne(U,Z))},q=(z,U)=>({invalid:!!Ne((U||r).errors,z),isDirty:!!Ne((U||r).dirtyFields,z),error:Ne((U||r).errors,z),isValidating:!!Ne(r.validatingFields,z),isTouched:!!Ne((U||r).touchedFields,z)}),H=z=>{z&&uh(z).forEach(U=>Jr(r.errors,U)),h.state.next({errors:z?r.errors:{}})},J=(z,U,Z)=>{const ce=(Ne(n,z,{_f:{}})._f||{}).ref,sr=Ne(r.errors,z)||{},{ref:me,message:Te,type:tt}=sr,rt=K(sr,["ref","message","type"]);Ut(r.errors,z,M(C(C({},rt),U),{ref:ce})),h.state.next({name:z,errors:r.errors,isValid:!1}),Z&&Z.shouldFocus&&ce&&ce.focus&&ce.focus()},de=(z,U)=>ya(z)?h.state.subscribe({next:Z=>z(P(void 0,U),Z)}):P(z,U,!0),se=z=>h.state.subscribe({next:U=>{LX(z.name,U.name,z.exact)&&$X(U,z.formState||d,_e,z.reRenderRoot)&&z.callback(C(C({values:C({},a)},r),U))}}).unsubscribe,Ee=z=>(o.mount=!0,f=C(C({},f),z.formState),se(M(C({},z),{formState:f}))),Ue=(z,U={})=>{for(const Z of z?uh(z):s.mount)s.mount.delete(Z),s.array.delete(Z),U.keepValue||(Jr(n,Z),Jr(a,Z)),!U.keepError&&Jr(r.errors,Z),!U.keepDirty&&Jr(r.dirtyFields,Z),!U.keepTouched&&Jr(r.touchedFields,Z),!U.keepIsValidating&&Jr(r.validatingFields,Z),!e.shouldUnregister&&!U.keepDefaultValue&&Jr(i,Z);h.state.next({values:Sn(a)}),h.state.next(C(C({},r),U.keepDirty?{isDirty:j()}:{})),!U.keepIsValid&&g()},ge=({disabled:z,name:U})=>{(Si(z)&&o.mount||z||s.disabled.has(U))&&(z?s.disabled.add(U):s.disabled.delete(U))},Y=(z,U={})=>{let Z=Ne(n,z);const ce=Si(U.disabled)||Si(e.disabled);return Ut(n,z,M(C({},Z||{}),{_f:C(M(C({},Z&&Z._f?Z._f:{ref:{name:z}}),{name:z,mount:!0}),U)})),s.mount.add(z),Z?ge({disabled:Si(U.disabled)?U.disabled:e.disabled,name:z}):S(z,!0,U.value),M(C(C({},ce?{disabled:U.disabled||e.disabled}:{}),e.progressive?{required:!!U.required,min:Ef(U.min),max:Ef(U.max),minLength:Ef(U.minLength),maxLength:Ef(U.maxLength),pattern:Ef(U.pattern)}:{}),{name:z,onChange:R,onBlur:R,ref:xe=>{if(xe){Y(z,U),Z=Ne(n,z);const me=Rr(xe.value)&&xe.querySelectorAll&&xe.querySelectorAll("input,select,textarea")[0]||xe,Te=OX(me),tt=Z._f.refs||[];if(Te?tt.find(rt=>rt===me):me===Z._f.ref)return;Ut(n,z,{_f:C(C({},Z._f),Te?{refs:[...tt.filter(Yx),me,...Array.isArray(Ne(i,z))?[{}]:[]],ref:{type:me.type,name:z}}:{ref:me})}),S(z,!1,void 0,me)}else Z=Ne(n,z,{}),Z._f&&(Z._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(fR(s.array,z)&&o.action)&&s.unMount.add(z)}})},te=()=>e.shouldFocusError&&dh(n,L,s.mount),ae=z=>{Si(z)&&(h.state.next({disabled:z}),dh(n,(U,Z)=>{const ce=Ne(n,Z);ce&&(U.disabled=ce._f.disabled||z,Array.isArray(ce._f.refs)&&ce._f.refs.forEach(xe=>{xe.disabled=ce._f.disabled||z}))},0,!1))},X=(z,U)=>Z=>G(this,null,function*(){let ce;Z&&(Z.preventDefault&&Z.preventDefault(),Z.persist&&Z.persist());let xe=Sn(a);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:me,values:Te}=yield E();r.errors=me,xe=Te}else yield T(n);if(s.disabled.size)for(const me of s.disabled)Ut(xe,me,void 0);if(Jr(r.errors,"root"),ui(r.errors)){h.state.next({errors:{}});try{yield z(xe,Z)}catch(me){ce=me}}else U&&(yield U(C({},r.errors),Z)),te(),setTimeout(te);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ui(r.errors)&&!ce,submitCount:r.submitCount+1,errors:r.errors}),ce)throw ce}),be=(z,U={})=>{Ne(n,z)&&(Rr(U.defaultValue)?k(z,Sn(Ne(i,z))):(k(z,U.defaultValue),Ut(i,z,Sn(U.defaultValue))),U.keepTouched||Jr(r.touchedFields,z),U.keepDirty||(Jr(r.dirtyFields,z),r.isDirty=U.defaultValue?j(z,Sn(Ne(i,z))):j()),U.keepError||(Jr(r.errors,z),d.isValid&&g()),h.state.next(C({},r)))},ue=(z,U={})=>{const Z=z?Sn(z):i,ce=Sn(Z),xe=ui(z),me=xe?i:ce;if(U.keepDefaultValues||(i=Z),!U.keepValues){if(U.keepDirtyValues){const Te=new Set([...s.mount,...Object.keys(Cf(i,a))]);for(const tt of Array.from(Te))Ne(r.dirtyFields,tt)?Ut(me,tt,Ne(a,tt)):k(tt,Ne(me,tt))}else{if(iS&&Rr(z))for(const Te of s.mount){const tt=Ne(n,Te);if(tt&&tt._f){const rt=Array.isArray(tt._f.refs)?tt._f.refs[0]:tt._f.ref;if(Y0(rt)){const sr=rt.closest("form");if(sr){sr.reset();break}}}}for(const Te of s.mount)k(Te,Ne(me,Te))}a=Sn(me),h.array.next({values:C({},me)}),h.state.next({values:C({},me)})}s={mount:U.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!e.shouldUnregister,h.state.next({submitCount:U.keepSubmitCount?r.submitCount:0,isDirty:xe?!1:U.keepDirty?r.isDirty:!!(U.keepDefaultValues&&!ps(z,i)),isSubmitted:U.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:xe?{}:U.keepDirtyValues?U.keepDefaultValues&&a?Cf(i,a):r.dirtyFields:U.keepDefaultValues&&z?Cf(i,z):U.keepDirty?r.dirtyFields:{},touchedFields:U.keepTouched?r.touchedFields:{},errors:U.keepErrors?r.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Pe=(z,U)=>ue(ya(z)?z(a):z,U),oe=(z,U={})=>{const Z=Ne(n,z),ce=Z&&Z._f;if(ce){const xe=ce.refs?ce.refs[0]:ce.ref;xe.focus&&(xe.focus(),U.shouldSelect&&ya(xe.select)&&xe.select())}},_e=z=>{r=C(C({},r),z)},he={control:{register:Y,unregister:Ue,getFieldState:q,handleSubmit:X,setError:J,_subscribe:se,_runSchema:E,_focusError:te,_getWatch:P,_getDirty:j,_setValid:g,_setFieldArray:y,_setDisabledField:ge,_setErrors:w,_getFieldArray:D,_reset:ue,_resetDefaultValues:()=>ya(e.defaultValues)&&e.defaultValues().then(z=>{Pe(z,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:ae,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(z){o=z},get _defaultValues(){return i},get _names(){return s},set _names(z){s=z},get _formState(){return r},get _options(){return e},set _options(z){e=C(C({},e),z)}},subscribe:Ee,trigger:V,register:Y,handleSubmit:X,watch:de,setValue:k,getValues:W,reset:Pe,resetField:be,clearErrors:H,unregister:Ue,setError:J,setFocus:oe,getFieldState:q};return M(C({},he),{formControl:he})}function wl(t={}){const e=$.useRef(void 0),r=$.useRef(void 0),[n,i]=$.useState({isDirty:!1,isValidating:!1,isLoading:ya(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ya(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current=M(C({},t.formControl),{formState:n}),t.defaultValues&&!ya(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const o=UX(t),{formControl:s}=o,l=K(o,["formControl"]);e.current=M(C({},l),{formState:n})}const a=e.current.control;return a._options=t,cS(()=>{const s=a._subscribe({formState:a._proxyFormState,callback:()=>i(C({},a._formState)),reRenderRoot:!0});return i(l=>M(C({},l),{isReady:!0})),a._formState.isReady=!0,s},[a]),$.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),$.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),$.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),$.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),$.useEffect(()=>{if(a._proxyFormState.isDirty){const s=a._getDirty();s!==n.isDirty&&a._subjects.state.next({isDirty:s})}},[a,n.isDirty]),$.useEffect(()=>{t.values&&!ps(t.values,r.current)?(a._reset(t.values,a._options.resetOptions),r.current=t.values,i(s=>C({},s))):a._resetDefaultValues()},[a,t.values]),$.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next(C({},a._formState))),a._removeUnmounted()}),e.current.formState=hR(n,a),e.current}const FN=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Ne(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},AR=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?FN(n.ref,r,t):n.refs&&n.refs.forEach(i=>FN(i,r,t))}},WX=(t,e)=>{e.shouldUseNativeValidation&&AR(t,e);const r={};for(const n in t){const i=Ne(e.fields,n),a=Object.assign(t[n]||{},{ref:i&&i.ref});if(HX(e.names||Object.keys(t),n)){const o=Object.assign({},Ne(r,n));Ut(o,"root",a),Ut(r,n,o)}else Ut(r,n,a)}return r},HX=(t,e)=>t.some(r=>r.startsWith(e+"."));var GX=function(t,e){for(var r={};t.length;){var n=t[0],i=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var s=n.unionErrors[0].errors[0];r[o]={message:s.message,type:s.code}}else r[o]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var l=r[o].types,u=l&&l[n.code];r[o]=mR(o,e,r,i,u?[].concat(u,n.message):n.message)}t.shift()}return r},SR=function(t,e,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve(function(o,s){try{var l=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(u){return a.shouldUseNativeValidation&&AR({},a),{errors:{},values:r.raw?n:u}})}catch(u){return s(u)}return l&&l.then?l.then(void 0,s):l}(0,function(o){if(function(s){return Array.isArray(s==null?void 0:s.errors)}(o))return{values:{},errors:WX(GX(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},kt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(s=>typeof i[i[s]]!="number"),o={};for(const s of a)o[s]=i[s];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?"'".concat(o,"'"):o).join(a)}t.joinValues=n,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(kt||(kt={}));var BN;(function(t){t.mergeShapes=(e,r)=>C(C({},e),r)})(BN||(BN={}));const Le=kt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ls=t=>{switch(typeof t){case"undefined":return Le.undefined;case"string":return Le.string;case"number":return Number.isNaN(t)?Le.nan:Le.number;case"boolean":return Le.boolean;case"function":return Le.function;case"bigint":return Le.bigint;case"symbol":return Le.symbol;case"object":return Array.isArray(t)?Le.array:t===null?Le.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Le.promise:typeof Map!="undefined"&&t instanceof Map?Le.map:typeof Set!="undefined"&&t instanceof Set?Le.set:typeof Date!="undefined"&&t instanceof Date?Le.date:Le.object;default:return Le.unknown}},Se=kt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Wo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let s=n,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(o))):s[u]=s[u]||{_errors:[]},s=s[u],l++}}};return i(this),n}static assert(e){if(!(e instanceof Wo))throw new Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,kt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Wo.create=t=>new Wo(t);const Hb=(t,e)=>{let r;switch(t.code){case Se.invalid_type:t.received===Le.undefined?r="Required":r="Expected ".concat(t.expected,", received ").concat(t.received);break;case Se.invalid_literal:r="Invalid literal value, expected ".concat(JSON.stringify(t.expected,kt.jsonStringifyReplacer));break;case Se.unrecognized_keys:r="Unrecognized key(s) in object: ".concat(kt.joinValues(t.keys,", "));break;case Se.invalid_union:r="Invalid input";break;case Se.invalid_union_discriminator:r="Invalid discriminator value. Expected ".concat(kt.joinValues(t.options));break;case Se.invalid_enum_value:r="Invalid enum value. Expected ".concat(kt.joinValues(t.options),", received '").concat(t.received,"'");break;case Se.invalid_arguments:r="Invalid function arguments";break;case Se.invalid_return_type:r="Invalid function return type";break;case Se.invalid_date:r="Invalid date";break;case Se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r='Invalid input: must include "'.concat(t.validation.includes,'"'),typeof t.validation.position=="number"&&(r="".concat(r," at one or more positions greater than or equal to ").concat(t.validation.position))):"startsWith"in t.validation?r='Invalid input: must start with "'.concat(t.validation.startsWith,'"'):"endsWith"in t.validation?r='Invalid input: must end with "'.concat(t.validation.endsWith,'"'):kt.assertNever(t.validation):t.validation!=="regex"?r="Invalid ".concat(t.validation):r="Invalid";break;case Se.too_small:t.type==="array"?r="Array must contain ".concat(t.exact?"exactly":t.inclusive?"at least":"more than"," ").concat(t.minimum," element(s)"):t.type==="string"?r="String must contain ".concat(t.exact?"exactly":t.inclusive?"at least":"over"," ").concat(t.minimum," character(s)"):t.type==="number"?r="Number must be ".concat(t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than ").concat(t.minimum):t.type==="date"?r="Date must be ".concat(t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(t.minimum))):r="Invalid input";break;case Se.too_big:t.type==="array"?r="Array must contain ".concat(t.exact?"exactly":t.inclusive?"at most":"less than"," ").concat(t.maximum," element(s)"):t.type==="string"?r="String must contain ".concat(t.exact?"exactly":t.inclusive?"at most":"under"," ").concat(t.maximum," character(s)"):t.type==="number"?r="Number must be ".concat(t.exact?"exactly":t.inclusive?"less than or equal to":"less than"," ").concat(t.maximum):t.type==="bigint"?r="BigInt must be ".concat(t.exact?"exactly":t.inclusive?"less than or equal to":"less than"," ").concat(t.maximum):t.type==="date"?r="Date must be ".concat(t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(t.maximum))):r="Invalid input";break;case Se.custom:r="Invalid input";break;case Se.invalid_intersection_types:r="Intersection results could not be merged";break;case Se.not_multiple_of:r="Number must be a multiple of ".concat(t.multipleOf);break;case Se.not_finite:r="Number must be finite";break;default:r=e.defaultError,kt.assertNever(t)}return{message:r}};let qX=Hb;function KX(){return qX}const XX=t=>{const{data:e,path:r,errorMaps:n,issueData:i}=t,a=[...r,...i.path||[]],o=M(C({},i),{path:a});if(i.message!==void 0)return M(C({},i),{path:a,message:i.message});let s="";const l=n.filter(u=>!!u).slice().reverse();for(const u of l)s=u(o,{data:e,defaultError:s}).message;return M(C({},i),{path:a,message:s})};function Oe(t,e){const r=KX(),n=XX({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Hb?void 0:Hb].filter(i=>!!i)});t.common.issues.push(n)}class ki{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if(i.status==="aborted")return st;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,r){return G(this,null,function*(){const n=[];for(const i of r){const a=yield i.key,o=yield i.value;n.push({key:a,value:o})}return ki.mergeObjectSync(e,n)})}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return st;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value!="undefined"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:e.value,value:n}}}const st=Object.freeze({status:"aborted"}),qf=t=>({status:"dirty",value:t}),na=t=>({status:"valid",value:t}),zN=t=>t.status==="aborted",VN=t=>t.status==="dirty",zu=t=>t.status==="valid",J0=t=>typeof Promise!="undefined"&&t instanceof Promise;var We;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(We||(We={}));class Rs{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const UN=(t,e)=>{if(zu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Wo(t.common.issues);return this._error=r,this._error}}};function vt(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return e?{errorMap:e,description:i}:{errorMap:(o,s)=>{var u,d;const{message:l}=t;return o.code==="invalid_enum_value"?{message:l!=null?l:s.defaultError}:typeof s.data=="undefined"?{message:(u=l!=null?l:n)!=null?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(d=l!=null?l:r)!=null?d:s.defaultError}},description:i}}class Tt{get description(){return this._def.description}_getType(e){return ls(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ki,ctx:{common:e.parent.common,data:e.data,parsedType:ls(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(J0(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var a;const n={common:{issues:[],async:(a=r==null?void 0:r.async)!=null?a:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)},i=this._parseSync({data:e,path:n.path,parent:n});return UN(n,i)}"~validate"(e){var n,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return zu(a)?{value:a.value}:{issues:r.common.issues}}catch(a){(i=(n=a==null?void 0:a.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>zu(a)?{value:a.value}:{issues:r.common.issues})}parseAsync(e,r){return G(this,null,function*(){const n=yield this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error})}safeParseAsync(e,r){return G(this,null,function*(){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ls(e)},i=this._parse({data:e,path:n.path,parent:n}),a=yield J0(i)?i:Promise.resolve(i);return UN(n,a)})}refine(e,r){const n=i=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const o=e(i),s=()=>a.addIssue(C({code:Se.custom},n(i)));return typeof Promise!="undefined"&&o instanceof Promise?o.then(l=>l?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Uu({schema:this,typeName:ct.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Es.create(this,this._def)}nullable(){return Wu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qa.create(this)}promise(){return ng.create(this,this._def)}or(e){return tg.create([this,e],this._def)}and(e){return rg.create(this,e,this._def)}transform(e){return new Uu(M(C({},vt(this._def)),{schema:this,typeName:ct.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const r=typeof e=="function"?e:()=>e;return new qb(M(C({},vt(this._def)),{innerType:this,defaultValue:r,typeName:ct.ZodDefault}))}brand(){return new yY(C({typeName:ct.ZodBranded,type:this},vt(this._def)))}catch(e){const r=typeof e=="function"?e:()=>e;return new Kb(M(C({},vt(this._def)),{innerType:this,catchValue:r,typeName:ct.ZodCatch}))}describe(e){const r=this.constructor;return new r(M(C({},this._def),{description:e}))}pipe(e){return dS.create(this,e)}readonly(){return Xb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const YX=/^c[^\s-]{8,}$/i,ZX=/^[0-9a-z]+$/,QX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,JX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,eY=/^[a-z0-9_-]{21}$/i,tY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,nY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Zx;const aY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,sY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,uY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_R="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dY=new RegExp("^".concat(_R,"$"));function CR(t){let e="[0-5]\\d";t.precision?e="".concat(e,"\\.\\d{").concat(t.precision,"}"):t.precision==null&&(e="".concat(e,"(\\.\\d+)?"));const r=t.precision?"+":"?";return"([01]\\d|2[0-3]):[0-5]\\d(:".concat(e,")").concat(r)}function fY(t){return new RegExp("^".concat(CR(t),"$"))}function hY(t){let e="".concat(_R,"T").concat(CR(t));const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e="".concat(e,"(").concat(r.join("|"),")"),new RegExp("^".concat(e,"$"))}function pY(t,e){return!!((e==="v4"||!e)&&aY.test(t)||(e==="v6"||!e)&&sY.test(t))}function mY(t,e){if(!tY.test(t))return!1;try{const[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch(r){return!1}}function gY(t,e){return!!((e==="v4"||!e)&&oY.test(t)||(e==="v6"||!e)&&cY.test(t))}class ws extends Tt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Le.string){const a=this._getOrReturnCtx(e);return Oe(a,{code:Se.invalid_type,expected:Le.string,received:a.parsedType}),st}const n=new ki;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,s=e.data.length<a.value;(o||s)&&(i=this._getOrReturnCtx(e,i),o?Oe(i,{code:Se.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&Oe(i,{code:Se.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")nY.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"email",code:Se.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Zx||(Zx=new RegExp(iY,"u")),Zx.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"emoji",code:Se.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")JX.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"uuid",code:Se.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")eY.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"nanoid",code:Se.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")YX.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cuid",code:Se.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")ZX.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cuid2",code:Se.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")QX.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"ulid",code:Se.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch(o){i=this._getOrReturnCtx(e,i),Oe(i,{validation:"url",code:Se.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"regex",code:Se.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?hY(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?dY.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?fY(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?rY.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"duration",code:Se.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?pY(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"ip",code:Se.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?mY(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"jwt",code:Se.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?gY(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"cidr",code:Se.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?lY.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"base64",code:Se.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?uY.test(e.data)||(i=this._getOrReturnCtx(e,i),Oe(i,{validation:"base64url",code:Se.invalid_string,message:a.message}),n.dirty()):kt.assertNever(a);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),C({validation:r,code:Se.invalid_string},We.errToObj(n)))}_addCheck(e){return new ws(M(C({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(C({kind:"email"},We.errToObj(e)))}url(e){return this._addCheck(C({kind:"url"},We.errToObj(e)))}emoji(e){return this._addCheck(C({kind:"emoji"},We.errToObj(e)))}uuid(e){return this._addCheck(C({kind:"uuid"},We.errToObj(e)))}nanoid(e){return this._addCheck(C({kind:"nanoid"},We.errToObj(e)))}cuid(e){return this._addCheck(C({kind:"cuid"},We.errToObj(e)))}cuid2(e){return this._addCheck(C({kind:"cuid2"},We.errToObj(e)))}ulid(e){return this._addCheck(C({kind:"ulid"},We.errToObj(e)))}base64(e){return this._addCheck(C({kind:"base64"},We.errToObj(e)))}base64url(e){return this._addCheck(C({kind:"base64url"},We.errToObj(e)))}jwt(e){return this._addCheck(C({kind:"jwt"},We.errToObj(e)))}ip(e){return this._addCheck(C({kind:"ip"},We.errToObj(e)))}cidr(e){return this._addCheck(C({kind:"cidr"},We.errToObj(e)))}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(C({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!=null?r:!1,local:(n=e==null?void 0:e.local)!=null?n:!1},We.errToObj(e==null?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(C({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision},We.errToObj(e==null?void 0:e.message)))}duration(e){return this._addCheck(C({kind:"duration"},We.errToObj(e)))}regex(e,r){return this._addCheck(C({kind:"regex",regex:e},We.errToObj(r)))}includes(e,r){return this._addCheck(C({kind:"includes",value:e,position:r==null?void 0:r.position},We.errToObj(r==null?void 0:r.message)))}startsWith(e,r){return this._addCheck(C({kind:"startsWith",value:e},We.errToObj(r)))}endsWith(e,r){return this._addCheck(C({kind:"endsWith",value:e},We.errToObj(r)))}min(e,r){return this._addCheck(C({kind:"min",value:e},We.errToObj(r)))}max(e,r){return this._addCheck(C({kind:"max",value:e},We.errToObj(r)))}length(e,r){return this._addCheck(C({kind:"length",value:e},We.errToObj(r)))}nonempty(e){return this.min(1,We.errToObj(e))}trim(){return new ws(M(C({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new ws(M(C({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new ws(M(C({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ws.create=t=>{var e;return new ws(C({checks:[],typeName:ct.ZodString,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1},vt(t)))};function vY(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/Ml(10,i)}class Mh extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Le.number){const a=this._getOrReturnCtx(e);return Oe(a,{code:Se.invalid_type,expected:Le.number,received:a.parsedType}),st}let n;const i=new ki;for(const a of this._def.checks)a.kind==="int"?kt.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?vY(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.not_finite,message:a.message}),i.dirty()):kt.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,We.toString(r))}gt(e,r){return this.setLimit("min",e,!1,We.toString(r))}lte(e,r){return this.setLimit("max",e,!0,We.toString(r))}lt(e,r){return this.setLimit("max",e,!1,We.toString(r))}setLimit(e,r,n,i){return new Mh(M(C({},this._def),{checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:We.toString(i)}]}))}_addCheck(e){return new Mh(M(C({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:We.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:We.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:We.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:We.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:We.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:We.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:We.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:We.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:We.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&kt.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Mh.create=t=>new Mh(C({checks:[],typeName:ct.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1},vt(t)));class Rh extends Tt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(a){return this._getInvalidInput(e)}if(this._getType(e)!==Le.bigint)return this._getInvalidInput(e);let n;const i=new ki;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Oe(n,{code:Se.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):kt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Oe(r,{code:Se.invalid_type,expected:Le.bigint,received:r.parsedType}),st}gte(e,r){return this.setLimit("min",e,!0,We.toString(r))}gt(e,r){return this.setLimit("min",e,!1,We.toString(r))}lte(e,r){return this.setLimit("max",e,!0,We.toString(r))}lt(e,r){return this.setLimit("max",e,!1,We.toString(r))}setLimit(e,r,n,i){return new Rh(M(C({},this._def),{checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:We.toString(i)}]}))}_addCheck(e){return new Rh(M(C({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:We.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:We.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:We.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:We.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:We.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Rh.create=t=>{var e;return new Rh(C({checks:[],typeName:ct.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!=null?e:!1},vt(t)))};class WN extends Tt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Le.boolean){const n=this._getOrReturnCtx(e);return Oe(n,{code:Se.invalid_type,expected:Le.boolean,received:n.parsedType}),st}return na(e.data)}}WN.create=t=>new WN(C({typeName:ct.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1},vt(t)));class eg extends Tt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Le.date){const a=this._getOrReturnCtx(e);return Oe(a,{code:Se.invalid_type,expected:Le.date,received:a.parsedType}),st}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Oe(a,{code:Se.invalid_date}),st}const n=new ki;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Oe(i,{code:Se.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):kt.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eg(M(C({},this._def),{checks:[...this._def.checks,e]}))}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:We.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:We.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}eg.create=t=>new eg(C({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ct.ZodDate},vt(t)));class HN extends Tt{_parse(e){if(this._getType(e)!==Le.symbol){const n=this._getOrReturnCtx(e);return Oe(n,{code:Se.invalid_type,expected:Le.symbol,received:n.parsedType}),st}return na(e.data)}}HN.create=t=>new HN(C({typeName:ct.ZodSymbol},vt(t)));class GN extends Tt{_parse(e){if(this._getType(e)!==Le.undefined){const n=this._getOrReturnCtx(e);return Oe(n,{code:Se.invalid_type,expected:Le.undefined,received:n.parsedType}),st}return na(e.data)}}GN.create=t=>new GN(C({typeName:ct.ZodUndefined},vt(t)));class qN extends Tt{_parse(e){if(this._getType(e)!==Le.null){const n=this._getOrReturnCtx(e);return Oe(n,{code:Se.invalid_type,expected:Le.null,received:n.parsedType}),st}return na(e.data)}}qN.create=t=>new qN(C({typeName:ct.ZodNull},vt(t)));class KN extends Tt{constructor(){super(...arguments),this._any=!0}_parse(e){return na(e.data)}}KN.create=t=>new KN(C({typeName:ct.ZodAny},vt(t)));class XN extends Tt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return na(e.data)}}XN.create=t=>new XN(C({typeName:ct.ZodUnknown},vt(t)));class $s extends Tt{_parse(e){const r=this._getOrReturnCtx(e);return Oe(r,{code:Se.invalid_type,expected:Le.never,received:r.parsedType}),st}}$s.create=t=>new $s(C({typeName:ct.ZodNever},vt(t)));class YN extends Tt{_parse(e){if(this._getType(e)!==Le.undefined){const n=this._getOrReturnCtx(e);return Oe(n,{code:Se.invalid_type,expected:Le.void,received:n.parsedType}),st}return na(e.data)}}YN.create=t=>new YN(C({typeName:ct.ZodVoid},vt(t)));class Qa extends Tt{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Le.array)return Oe(r,{code:Se.invalid_type,expected:Le.array,received:r.parsedType}),st;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,s=r.data.length<i.exactLength.value;(o||s)&&(Oe(r,{code:o?Se.too_big:Se.too_small,minimum:s?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Oe(r,{code:Se.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Oe(r,{code:Se.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,s)=>i.type._parseAsync(new Rs(r,o,r.path,s)))).then(o=>ki.mergeArray(n,o));const a=[...r.data].map((o,s)=>i.type._parseSync(new Rs(r,o,r.path,s)));return ki.mergeArray(n,a)}get element(){return this._def.type}min(e,r){return new Qa(M(C({},this._def),{minLength:{value:e,message:We.toString(r)}}))}max(e,r){return new Qa(M(C({},this._def),{maxLength:{value:e,message:We.toString(r)}}))}length(e,r){return new Qa(M(C({},this._def),{exactLength:{value:e,message:We.toString(r)}}))}nonempty(e){return this.min(1,e)}}Qa.create=(t,e)=>new Qa(C({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ct.ZodArray},vt(e)));function Ql(t){if(t instanceof Gr){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Es.create(Ql(n))}return new Gr(M(C({},t._def),{shape:()=>e}))}else return t instanceof Qa?new Qa(M(C({},t._def),{type:Ql(t.element)})):t instanceof Es?Es.create(Ql(t.unwrap())):t instanceof Wu?Wu.create(Ql(t.unwrap())):t instanceof ol?ol.create(t.items.map(e=>Ql(e))):t}class Gr extends Tt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=kt.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==Le.object){const u=this._getOrReturnCtx(e);return Oe(u,{code:Se.invalid_type,expected:Le.object,received:u.parsedType}),st}const{status:n,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof $s&&this._def.unknownKeys==="strip"))for(const u in i.data)o.includes(u)||s.push(u);const l=[];for(const u of o){const d=a[u],f=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Rs(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof $s){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of s)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")s.length>0&&(Oe(i,{code:Se.unrecognized_keys,keys:s}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of s){const f=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Rs(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(()=>G(this,null,function*(){const u=[];for(const d of l){const f=yield d.key,h=yield d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u})).then(u=>ki.mergeObjectSync(n,u)):ki.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return We.errToObj,new Gr(C(M(C({},this._def),{unknownKeys:"strict"}),e!==void 0?{errorMap:(r,n)=>{var a,o,s,l;const i=(s=(o=(a=this._def).errorMap)==null?void 0:o.call(a,r,n).message)!=null?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=We.errToObj(e).message)!=null?l:i}:{message:i}}}:{}))}strip(){return new Gr(M(C({},this._def),{unknownKeys:"strip"}))}passthrough(){return new Gr(M(C({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new Gr(M(C({},this._def),{shape:()=>C(C({},this._def.shape()),e)}))}merge(e){return new Gr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>C(C({},this._def.shape()),e._def.shape()),typeName:ct.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Gr(M(C({},this._def),{catchall:e}))}pick(e){const r={};for(const n of kt.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Gr(M(C({},this._def),{shape:()=>r}))}omit(e){const r={};for(const n of kt.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new Gr(M(C({},this._def),{shape:()=>r}))}deepPartial(){return Ql(this)}partial(e){const r={};for(const n of kt.objectKeys(this.shape)){const i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new Gr(M(C({},this._def),{shape:()=>r}))}required(e){const r={};for(const n of kt.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Es;)a=a._def.innerType;r[n]=a}return new Gr(M(C({},this._def),{shape:()=>r}))}keyof(){return ER(kt.objectKeys(this.shape))}}Gr.create=(t,e)=>new Gr(C({shape:()=>t,unknownKeys:"strip",catchall:$s.create(),typeName:ct.ZodObject},vt(e)));Gr.strictCreate=(t,e)=>new Gr(C({shape:()=>t,unknownKeys:"strict",catchall:$s.create(),typeName:ct.ZodObject},vt(e)));Gr.lazycreate=(t,e)=>new Gr(C({shape:t,unknownKeys:"strip",catchall:$s.create(),typeName:ct.ZodObject},vt(e)));class tg extends Tt{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function i(a){for(const s of a)if(s.result.status==="valid")return s.result;for(const s of a)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;const o=a.map(s=>new Wo(s.ctx.common.issues));return Oe(r,{code:Se.invalid_union,unionErrors:o}),st}if(r.common.async)return Promise.all(n.map(a=>G(this,null,function*(){const o=M(C({},r),{common:M(C({},r.common),{issues:[]}),parent:null});return{result:yield a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}}))).then(i);{let a;const o=[];for(const l of n){const u=M(C({},r),{common:M(C({},r.common),{issues:[]}),parent:null}),d=l._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!a&&(a={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const s=o.map(l=>new Wo(l));return Oe(r,{code:Se.invalid_union,unionErrors:s}),st}}get options(){return this._def.options}}tg.create=(t,e)=>new tg(C({options:t,typeName:ct.ZodUnion},vt(e)));function Gb(t,e){const r=ls(t),n=ls(e);if(t===e)return{valid:!0,data:t};if(r===Le.object&&n===Le.object){const i=kt.objectKeys(e),a=kt.objectKeys(t).filter(s=>i.indexOf(s)!==-1),o=C(C({},t),e);for(const s of a){const l=Gb(t[s],e[s]);if(!l.valid)return{valid:!1};o[s]=l.data}return{valid:!0,data:o}}else if(r===Le.array&&n===Le.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],s=e[a],l=Gb(o,s);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Le.date&&n===Le.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class rg extends Tt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=(a,o)=>{if(zN(a)||zN(o))return st;const s=Gb(a.value,o.value);return s.valid?((VN(a)||VN(o))&&r.dirty(),{status:r.value,value:s.data}):(Oe(n,{code:Se.invalid_intersection_types}),st)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}rg.create=(t,e,r)=>new rg(C({left:t,right:e,typeName:ct.ZodIntersection},vt(r)));class ol extends Tt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.array)return Oe(n,{code:Se.invalid_type,expected:Le.array,received:n.parsedType}),st;if(n.data.length<this._def.items.length)return Oe(n,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),st;!this._def.rest&&n.data.length>this._def.items.length&&(Oe(n,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,s)=>{const l=this._def.items[s]||this._def.rest;return l?l._parse(new Rs(n,o,n.path,s)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>ki.mergeArray(r,o)):ki.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new ol(M(C({},this._def),{rest:e}))}}ol.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ol(C({items:t,typeName:ct.ZodTuple,rest:null},vt(e)))};class ZN extends Tt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.map)return Oe(n,{code:Se.invalid_type,expected:Le.map,received:n.parsedType}),st;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([s,l],u)=>({key:i._parse(new Rs(n,s,n.path,[u,"key"])),value:a._parse(new Rs(n,l,n.path,[u,"value"]))}));if(n.common.async){const s=new Map;return Promise.resolve().then(()=>G(this,null,function*(){for(const l of o){const u=yield l.key,d=yield l.value;if(u.status==="aborted"||d.status==="aborted")return st;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),s.set(u.value,d.value)}return{status:r.value,value:s}}))}else{const s=new Map;for(const l of o){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return st;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),s.set(u.value,d.value)}return{status:r.value,value:s}}}}ZN.create=(t,e,r)=>new ZN(C({valueType:e,keyType:t,typeName:ct.ZodMap},vt(r)));class $h extends Tt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.set)return Oe(n,{code:Se.invalid_type,expected:Le.set,received:n.parsedType}),st;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Oe(n,{code:Se.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Oe(n,{code:Se.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function o(l){const u=new Set;for(const d of l){if(d.status==="aborted")return st;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const s=[...n.data.values()].map((l,u)=>a._parse(new Rs(n,l,n.path,u)));return n.common.async?Promise.all(s).then(l=>o(l)):o(s)}min(e,r){return new $h(M(C({},this._def),{minSize:{value:e,message:We.toString(r)}}))}max(e,r){return new $h(M(C({},this._def),{maxSize:{value:e,message:We.toString(r)}}))}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}$h.create=(t,e)=>new $h(C({valueType:t,minSize:null,maxSize:null,typeName:ct.ZodSet},vt(e)));class QN extends Tt{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}QN.create=(t,e)=>new QN(C({getter:t,typeName:ct.ZodLazy},vt(e)));class JN extends Tt{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Oe(r,{received:r.data,code:Se.invalid_literal,expected:this._def.value}),st}return{status:"valid",value:e.data}}get value(){return this._def.value}}JN.create=(t,e)=>new JN(C({value:t,typeName:ct.ZodLiteral},vt(e)));function ER(t,e){return new Vu(C({values:t,typeName:ct.ZodEnum},vt(e)))}class Vu extends Tt{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Oe(r,{expected:kt.joinValues(n),received:r.parsedType,code:Se.invalid_type}),st}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Oe(r,{received:r.data,code:Se.invalid_enum_value,options:n}),st}return na(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Vu.create(e,C(C({},this._def),r))}exclude(e,r=this._def){return Vu.create(this.options.filter(n=>!e.includes(n)),C(C({},this._def),r))}}Vu.create=ER;class ej extends Tt{_parse(e){const r=kt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Le.string&&n.parsedType!==Le.number){const i=kt.objectValues(r);return Oe(n,{expected:kt.joinValues(i),received:n.parsedType,code:Se.invalid_type}),st}if(this._cache||(this._cache=new Set(kt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=kt.objectValues(r);return Oe(n,{received:n.data,code:Se.invalid_enum_value,options:i}),st}return na(e.data)}get enum(){return this._def.values}}ej.create=(t,e)=>new ej(C({values:t,typeName:ct.ZodNativeEnum},vt(e)));class ng extends Tt{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.promise&&r.common.async===!1)return Oe(r,{code:Se.invalid_type,expected:Le.promise,received:r.parsedType}),st;const n=r.parsedType===Le.promise?r.data:Promise.resolve(r.data);return na(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ng.create=(t,e)=>new ng(C({type:t,typeName:ct.ZodPromise},vt(e)));class Uu extends Tt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Oe(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(s=>G(this,null,function*(){if(r.value==="aborted")return st;const l=yield this._def.schema._parseAsync({data:s,path:n.path,parent:n});return l.status==="aborted"?st:l.status==="dirty"||r.value==="dirty"?qf(l.value):l}));{if(r.value==="aborted")return st;const s=this._def.schema._parseSync({data:o,path:n.path,parent:n});return s.status==="aborted"?st:s.status==="dirty"||r.value==="dirty"?qf(s.value):s}}if(i.type==="refinement"){const o=s=>{const l=i.refinement(s,a);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?st:(s.status==="dirty"&&r.dirty(),o(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>s.status==="aborted"?st:(s.status==="dirty"&&r.dirty(),o(s.value).then(()=>({status:r.value,value:s.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!zu(o))return st;const s=i.transform(o.value,a);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>zu(o)?Promise.resolve(i.transform(o.value,a)).then(s=>({status:r.value,value:s})):st);kt.assertNever(i)}}Uu.create=(t,e,r)=>new Uu(C({schema:t,typeName:ct.ZodEffects,effect:e},vt(r)));Uu.createWithPreprocess=(t,e,r)=>new Uu(C({schema:e,effect:{type:"preprocess",transform:t},typeName:ct.ZodEffects},vt(r)));class Es extends Tt{_parse(e){return this._getType(e)===Le.undefined?na(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Es.create=(t,e)=>new Es(C({innerType:t,typeName:ct.ZodOptional},vt(e)));class Wu extends Tt{_parse(e){return this._getType(e)===Le.null?na(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wu.create=(t,e)=>new Wu(C({innerType:t,typeName:ct.ZodNullable},vt(e)));class qb extends Tt{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Le.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}qb.create=(t,e)=>new qb(C({innerType:t,typeName:ct.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default},vt(e)));class Kb extends Tt{_parse(e){const{ctx:r}=this._processInputParams(e),n=M(C({},r),{common:M(C({},r.common),{issues:[]})}),i=this._def.innerType._parse({data:n.data,path:n.path,parent:C({},n)});return J0(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Wo(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wo(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Kb.create=(t,e)=>new Kb(C({innerType:t,typeName:ct.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch},vt(e)));class tj extends Tt{_parse(e){if(this._getType(e)!==Le.nan){const n=this._getOrReturnCtx(e);return Oe(n,{code:Se.invalid_type,expected:Le.nan,received:n.parsedType}),st}return{status:"valid",value:e.data}}}tj.create=t=>new tj(C({typeName:ct.ZodNaN},vt(t)));class yY extends Tt{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class dS extends Tt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return G(this,null,function*(){const a=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?st:a.status==="dirty"?(r.dirty(),qf(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})});{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?st:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new dS({in:e,out:r,typeName:ct.ZodPipeline})}}class Xb extends Tt{_parse(e){const r=this._def.innerType._parse(e),n=i=>(zu(i)&&(i.value=Object.freeze(i.value)),i);return J0(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Xb.create=(t,e)=>new Xb(C({innerType:t,typeName:ct.ZodReadonly},vt(e)));var ct;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ct||(ct={}));const nu=ws.create;$s.create;Qa.create;const NR=Gr.create;tg.create;rg.create;ol.create;const xY=Vu.create;ng.create;Es.create;Wu.create;const Lh=Ld("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Q=x.forwardRef((o,a)=>{var s=o,{className:t,variant:e,size:r,asChild:n=!1}=s,i=K(s,["className","variant","size","asChild"]);const l=n?gk:"button";return c.jsx(l,C({className:ie(Lh({variant:e,size:r,className:t})),ref:a},i))});Q.displayName="Button";const Ie=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("div",C({ref:r,className:ie("rounded-lg border bg-card text-card-foreground shadow-sm dark:bg-slate-800 dark:border-slate-600",t)},e))});Ie.displayName="Card";const $r=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("div",C({ref:r,className:ie("flex flex-col space-y-1.5 p-6",t)},e))});$r.displayName="CardHeader";const Qn=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("h3",C({ref:r,className:ie("text-2xl font-semibold leading-none tracking-tight",t)},e))});Qn.displayName="CardTitle";const bY=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("p",C({ref:r,className:ie("text-sm text-muted-foreground",t)},e))});bY.displayName="CardDescription";const Ve=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("div",C({ref:r,className:ie("p-6 pt-0",t)},e))});Ve.displayName="CardContent";const wY=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("div",C({ref:r,className:ie("flex items-center p-6 pt-0",t)},e))});wY.displayName="CardFooter";var AY="Label",jR=x.forwardRef((t,e)=>c.jsx(Ge.label,M(C({},t),{ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}})));jR.displayName=AY;var TR=jR;const SY=Ld("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Wt=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(TR,C({ref:r,className:ie(SY(),t)},e))});Wt.displayName=TR.displayName;const Al=EX,PR=x.createContext({}),ot=e=>{var t=K(e,[]);return c.jsx(PR.Provider,{value:{name:t.name},children:c.jsx(PX,C({},t))})},Qv=()=>{const t=x.useContext(PR),e=x.useContext(OR),{getFieldState:r,formState:n}=Zv(),i=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:a}=e;return C({id:a,name:t.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message")},i)},OR=x.createContext({}),nt=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);const a=x.useId();return c.jsx(OR.Provider,{value:{id:a},children:c.jsx("div",C({ref:r,className:ie("space-y-2",t)},e))})});nt.displayName="FormItem";const it=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);const{error:a,formItemId:o}=Qv();return c.jsx(Wt,C({ref:r,className:ie(a&&"text-destructive",t),htmlFor:o},e))});it.displayName="FormLabel";const gt=x.forwardRef((r,e)=>{var t=K(r,[]);const{error:n,formItemId:i,formDescriptionId:a,formMessageId:o}=Qv();return c.jsx(gk,C({ref:e,id:i,"aria-describedby":n?"".concat(a," ").concat(o):"".concat(a),"aria-invalid":!!n},t))});gt.displayName="FormControl";const _Y=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);const{formDescriptionId:a}=Qv();return c.jsx("p",C({ref:r,id:a,className:ie("text-sm text-muted-foreground",t)},e))});_Y.displayName="FormDescription";const Ft=x.forwardRef((i,n)=>{var a=i,{className:t,children:e}=a,r=K(a,["className","children"]);var u;const{error:o,formMessageId:s}=Qv(),l=o?String((u=o==null?void 0:o.message)!=null?u:""):e;return l?c.jsx("p",M(C({ref:n,id:s,className:ie("text-sm font-medium text-destructive",t)},r),{children:l})):null});Ft.displayName="FormMessage";function Yb(t,[e,r]){return Math.min(r,Math.max(e,t))}var CY=x.createContext(void 0);function Up(t){const e=x.useContext(CY);return t||e||"ltr"}var Qx=0;function Jv(){x.useEffect(()=>{var e,r;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=t[0])!=null?e:rj()),document.body.insertAdjacentElement("beforeend",(r=t[1])!=null?r:rj()),Qx++,()=>{Qx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Qx--}},[])}function rj(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Jx="focusScope.autoFocusOnMount",e1="focusScope.autoFocusOnUnmount",nj={bubbles:!1,cancelable:!0},EY="FocusScope",Wp=x.forwardRef((t,e)=>{const g=t,{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a}=g,o=K(g,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[s,l]=x.useState(null),u=Fr(i),d=Fr(a),f=x.useRef(null),h=ft(e,v=>l(v)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let v=function(S){if(p.paused||!s)return;const A=S.target;s.contains(A)?f.current=A:os(f.current,{select:!0})},y=function(S){if(p.paused||!s)return;const A=S.relatedTarget;A!==null&&(s.contains(A)||os(f.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const _ of S)_.removedNodes.length>0&&os(s)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const w=new MutationObserver(b);return s&&w.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),w.disconnect()}}},[n,s,p.paused]),x.useEffect(()=>{if(s){aj.add(p);const v=document.activeElement;if(!s.contains(v)){const b=new CustomEvent(Jx,nj);s.addEventListener(Jx,u),s.dispatchEvent(b),b.defaultPrevented||(NY(IY(IR(s)),{select:!0}),document.activeElement===v&&os(s))}return()=>{s.removeEventListener(Jx,u),setTimeout(()=>{const b=new CustomEvent(e1,nj);s.addEventListener(e1,d),s.dispatchEvent(b),b.defaultPrevented||os(v!=null?v:document.body,{select:!0}),s.removeEventListener(e1,d),aj.remove(p)},0)}}},[s,u,d,p]);const m=x.useCallback(v=>{if(!r&&!n||p.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(y&&b){const w=v.currentTarget,[S,A]=jY(w);S&&A?!v.shiftKey&&b===A?(v.preventDefault(),r&&os(S,{select:!0})):v.shiftKey&&b===S&&(v.preventDefault(),r&&os(A,{select:!0})):b===w&&v.preventDefault()}},[r,n,p.paused]);return c.jsx(Ge.div,M(C({tabIndex:-1},o),{ref:h,onKeyDown:m}))});Wp.displayName=EY;function NY(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(os(n,{select:e}),document.activeElement!==r)return}function jY(t){const e=IR(t),r=ij(e,t),n=ij(e.reverse(),t);return[r,n]}function IR(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function ij(t,e){for(const r of t)if(!TY(r,{upTo:e}))return r}function TY(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function PY(t){return t instanceof HTMLInputElement&&"select"in t}function os(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&PY(t)&&e&&t.select()}}var aj=OY();function OY(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=oj(t,e),t.unshift(e)},remove(e){var r;t=oj(t,e),(r=t[0])==null||r.resume()}}}function oj(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function IY(t){return t.filter(e=>e.tagName!=="A")}function DR(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var DY=function(t){if(typeof document=="undefined")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ll=new WeakMap,Tm=new WeakMap,Pm={},t1=0,kR=function(t){return t&&(t.host||kR(t.parentNode))},kY=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=kR(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},MY=function(t,e,r,n){var i=kY(e,Array.isArray(t)?t:[t]);Pm[r]||(Pm[r]=new WeakMap);var a=Pm[r],o=[],s=new Set,l=new Set(i),u=function(f){!f||s.has(f)||(s.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(s.has(h))d(h);else try{var p=h.getAttribute(n),m=p!==null&&p!=="false",g=(Ll.get(h)||0)+1,v=(a.get(h)||0)+1;Ll.set(h,g),a.set(h,v),o.push(h),g===1&&m&&Tm.set(h,!0),v===1&&h.setAttribute(r,"true"),m||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return d(e),s.clear(),t1++,function(){o.forEach(function(f){var h=Ll.get(f)-1,p=a.get(f)-1;Ll.set(f,h),a.set(f,p),h||(Tm.has(f)||f.removeAttribute(n),Tm.delete(f)),p||f.removeAttribute(r)}),t1--,t1||(Ll=new WeakMap,Ll=new WeakMap,Tm=new WeakMap,Pm={})}},ey=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=DY(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),MY(n,i,r,"aria-hidden")):function(){return null}},b0="right-scroll-bar-position",w0="width-before-scroll-bar",RY="with-scroll-bars-hidden",$Y="--removed-body-scroll-bar-size";function r1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function LY(t,e){var r=x.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var FY=typeof window!="undefined"?x.useLayoutEffect:x.useEffect,sj=new WeakMap;function BY(t,e){var r=LY(null,function(n){return t.forEach(function(i){return r1(i,n)})});return FY(function(){var n=sj.get(r);if(n){var i=new Set(n),a=new Set(t),o=r.current;i.forEach(function(s){a.has(s)||r1(s,null)}),a.forEach(function(s){i.has(s)||r1(s,o)})}sj.set(r,t)},[t]),r}function zY(t){return t}function VY(t,e){e===void 0&&(e=zY);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(a){var o=e(a,n);return r.push(o),function(){r=r.filter(function(s){return s!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(s){return a(s)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var s=r;r=[],s.forEach(a),o=r}var l=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(l)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return i}function UY(t){t===void 0&&(t={});var e=VY(null);return e.options=fs({async:!0,ssr:!1},t),e}var MR=function(t){var e=t.sideCar,r=U4(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,fs({},r))};MR.isSideCarExport=!0;function WY(t,e){return t.useMedium(e),MR}var RR=UY(),n1=function(){},ty=x.forwardRef(function(t,e){var r=x.useRef(null),n=x.useState({onScrollCapture:n1,onWheelCapture:n1,onTouchMoveCapture:n1}),i=n[0],a=n[1],o=t.forwardProps,s=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,y=t.as,b=y===void 0?"div":y,w=t.gapMode,S=U4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=h,_=BY([r,e]),E=fs(fs({},S),i);return x.createElement(x.Fragment,null,d&&x.createElement(A,{sideCar:RR,removeScrollBar:u,shards:f,noRelative:p,noIsolation:m,inert:g,setCallbacks:a,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?x.cloneElement(x.Children.only(s),fs(fs({},E),{ref:_})):x.createElement(b,fs({},E,{className:l,ref:_}),s))});ty.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ty.classNames={fullWidth:w0,zeroRight:b0};var HY=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function GY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=HY();return e&&t.setAttribute("nonce",e),t}function qY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function KY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var XY=function(){var t=0,e=null;return{add:function(r){t==0&&(e=GY())&&(qY(e,r),KY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},YY=function(){var t=XY();return function(e,r){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},$R=function(){var t=YY(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},ZY={left:0,top:0,right:0,gap:0},i1=function(t){return parseInt(t||"",10)||0},QY=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[i1(r),i1(n),i1(i)]},JY=function(t){if(t===void 0&&(t="margin"),typeof window=="undefined")return ZY;var e=QY(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},eZ=$R(),bu="data-scroll-locked",tZ=function(t,e,r,n){var i=t.left,a=t.top,o=t.right,s=t.gap;return r===void 0&&(r="margin"),"\n  .".concat(RY," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(s,"px ").concat(n,";\n  }\n  body[").concat(bu,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([e&&"position: relative ".concat(n,";"),r==="margin"&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(n,";\n    "),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(b0," {\n    right: ").concat(s,"px ").concat(n,";\n  }\n  \n  .").concat(w0," {\n    margin-right: ").concat(s,"px ").concat(n,";\n  }\n  \n  .").concat(b0," .").concat(b0," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(w0," .").concat(w0," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(bu,"] {\n    ").concat($Y,": ").concat(s,"px;\n  }\n")},cj=function(){var t=parseInt(document.body.getAttribute(bu)||"0",10);return isFinite(t)?t:0},rZ=function(){x.useEffect(function(){return document.body.setAttribute(bu,(cj()+1).toString()),function(){var t=cj()-1;t<=0?document.body.removeAttribute(bu):document.body.setAttribute(bu,t.toString())}},[])},nZ=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;rZ();var a=x.useMemo(function(){return JY(i)},[i]);return x.createElement(eZ,{styles:tZ(a,!e,i,r?"":"!important")})},Zb=!1;if(typeof window!="undefined")try{var Om=Object.defineProperty({},"passive",{get:function(){return Zb=!0,!0}});window.addEventListener("test",Om,Om),window.removeEventListener("test",Om,Om)}catch(t){Zb=!1}var Fl=Zb?{passive:!1}:!1,iZ=function(t){return t.tagName==="TEXTAREA"},LR=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!iZ(t)&&r[e]==="visible")},aZ=function(t){return LR(t,"overflowY")},oZ=function(t){return LR(t,"overflowX")},lj=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot!="undefined"&&n instanceof ShadowRoot&&(n=n.host);var i=FR(t,n);if(i){var a=BR(t,n),o=a[1],s=a[2];if(o>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},sZ=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},cZ=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},FR=function(t,e){return t==="v"?aZ(e):oZ(e)},BR=function(t,e){return t==="v"?sZ(e):cZ(e)},lZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},uZ=function(t,e,r,n,i){var a=lZ(t,window.getComputedStyle(e).direction),o=a*n,s=r.target,l=e.contains(s),u=!1,d=o>0,f=0,h=0;do{if(!s)break;var p=BR(t,s),m=p[0],g=p[1],v=p[2],y=g-v-a*m;(m||y)&&FR(t,s)&&(f+=y,h+=m);var b=s.parentNode;s=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&s!==document.body||l&&(e.contains(s)||e===s));return(d&&Math.abs(f)<1||!d&&Math.abs(h)<1)&&(u=!0),u},Im=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},uj=function(t){return[t.deltaX,t.deltaY]},dj=function(t){return t&&"current"in t?t.current:t},dZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},fZ=function(t){return"\n  .block-interactivity-".concat(t," {pointer-events: none;}\n  .allow-interactivity-").concat(t," {pointer-events: all;}\n")},hZ=0,Bl=[];function pZ(t){var e=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),i=x.useState(hZ++)[0],a=x.useState($R)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=kV([t.lockRef.current],(t.shards||[]).map(dj),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=x.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var y=Im(g),b=r.current,w="deltaX"in g?g.deltaX:b[0]-y[0],S="deltaY"in g?g.deltaY:b[1]-y[1],A,_=g.target,E=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&E==="h"&&_.type==="range")return!1;var N=lj(E,_);if(!N)return!0;if(N?A=E:(A=E==="v"?"h":"v",N=lj(E,_)),!N)return!1;if(!n.current&&"changedTouches"in g&&(w||S)&&(n.current=A),!A)return!0;var T=n.current||A;return uZ(T,v,g,T==="h"?w:S)},[]),l=x.useCallback(function(g){var v=g;if(!(!Bl.length||Bl[Bl.length-1]!==a)){var y="deltaY"in v?uj(v):Im(v),b=e.current.filter(function(A){return A.name===v.type&&(A.target===v.target||v.target===A.shadowParent)&&dZ(A.delta,y)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(dj).filter(Boolean).filter(function(A){return A.contains(v.target)}),S=w.length>0?s(v,w[0]):!o.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),u=x.useCallback(function(g,v,y,b){var w={name:g,delta:v,target:y,should:b,shadowParent:mZ(y)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),d=x.useCallback(function(g){r.current=Im(g),n.current=void 0},[]),f=x.useCallback(function(g){u(g.type,uj(g),g.target,s(g,t.lockRef.current))},[]),h=x.useCallback(function(g){u(g.type,Im(g),g.target,s(g,t.lockRef.current))},[]);x.useEffect(function(){return Bl.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Fl),document.addEventListener("touchmove",l,Fl),document.addEventListener("touchstart",d,Fl),function(){Bl=Bl.filter(function(g){return g!==a}),document.removeEventListener("wheel",l,Fl),document.removeEventListener("touchmove",l,Fl),document.removeEventListener("touchstart",d,Fl)}},[]);var p=t.removeScrollBar,m=t.inert;return x.createElement(x.Fragment,null,m?x.createElement(a,{styles:fZ(i)}):null,p?x.createElement(nZ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function mZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const gZ=WY(RR,pZ);var Hp=x.forwardRef(function(t,e){return x.createElement(ty,fs({},t,{ref:e,sideCar:gZ}))});Hp.classNames=ty.classNames;var vZ=[" ","Enter","ArrowUp","ArrowDown"],yZ=[" ","Enter"],sl="Select",[ry,ny,xZ]=Ov(sl),[Wd,BBe]=ai(sl,[xZ,Ks]),iy=Ks(),[bZ,Xs]=Wd(sl),[wZ,AZ]=Wd(sl),zR=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:a,value:o,defaultValue:s,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:h,required:p,form:m}=t,g=iy(e),[v,y]=x.useState(null),[b,w]=x.useState(null),[S,A]=x.useState(!1),_=Up(u),[E,N]=io({prop:n,defaultProp:i!=null?i:!1,onChange:a,caller:sl}),[T,O]=io({prop:o,defaultProp:s,onChange:l,caller:sl}),j=x.useRef(null),P=v?m||!!v.closest("form"):!0,[D,F]=x.useState(new Set),I=Array.from(D).map(k=>k.props.value).join(";");return c.jsx(zv,M(C({},g),{children:c.jsxs(bZ,{required:p,scope:e,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:A,contentId:Qi(),value:T,onValueChange:O,open:E,onOpenChange:N,dir:_,triggerPointerDownPosRef:j,disabled:h,children:[c.jsx(ry.Provider,{scope:e,children:c.jsx(wZ,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(k=>{F(R=>new Set(R).add(k))},[]),onNativeOptionRemove:x.useCallback(k=>{F(R=>{const L=new Set(R);return L.delete(k),L})},[]),children:r})}),P?c.jsxs(d8,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:T,onChange:k=>O(k.target.value),disabled:h,form:m,children:[T===void 0?c.jsx("option",{value:""}):null,Array.from(D)]},I):null]})}))};zR.displayName=sl;var VR="SelectTrigger",UR=x.forwardRef((t,e)=>{const g=t,{__scopeSelect:r,disabled:n=!1}=g,i=K(g,["__scopeSelect","disabled"]),a=iy(r),o=Xs(VR,r),s=o.disabled||n,l=ft(e,o.onTriggerChange),u=ny(r),d=x.useRef("touch"),[f,h,p]=h8(v=>{const y=u().filter(S=>!S.disabled),b=y.find(S=>S.value===o.value),w=p8(y,v,b);w!==void 0&&o.onValueChange(w.value)}),m=v=>{s||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return c.jsx(Bp,M(C({asChild:!0},a),{children:c.jsx(Ge.button,M(C({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":f8(o.value)?"":void 0},i),{ref:l,onClick:Ae(i.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&m(v)}),onPointerDown:Ae(i.onPointerDown,v=>{d.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(m(v),v.preventDefault())}),onKeyDown:Ae(i.onKeyDown,v=>{const y=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(y&&v.key===" ")&&vZ.includes(v.key)&&(m(),v.preventDefault())})}))}))});UR.displayName=VR;var WR="SelectValue",HR=x.forwardRef((t,e)=>{const h=t,{__scopeSelect:r,className:n,style:i,children:a,placeholder:o=""}=h,s=K(h,["__scopeSelect","className","style","children","placeholder"]),l=Xs(WR,r),{onValueNodeHasChildrenChange:u}=l,d=a!==void 0,f=ft(e,l.onValueNodeChange);return bn(()=>{u(d)},[u,d]),c.jsx(Ge.span,M(C({},s),{ref:f,style:{pointerEvents:"none"},children:f8(l.value)?c.jsx(c.Fragment,{children:o}):a}))});HR.displayName=WR;var SZ="SelectIcon",GR=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:r,children:n}=a,i=K(a,["__scopeSelect","children"]);return c.jsx(Ge.span,M(C({"aria-hidden":!0},i),{ref:e,children:n||""}))});GR.displayName=SZ;var _Z="SelectPortal",qR=t=>c.jsx($d,C({asChild:!0},t));qR.displayName=_Z;var cl="SelectContent",KR=x.forwardRef((t,e)=>{const r=Xs(cl,t.__scopeSelect),[n,i]=x.useState();if(bn(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?Dd.createPortal(c.jsx(XR,{scope:t.__scopeSelect,children:c.jsx(ry.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),a):null}return c.jsx(YR,M(C({},t),{ref:e}))});KR.displayName=cl;var da=10,[XR,Ys]=Wd(cl),CZ="SelectContentImpl",EZ=Ds("SelectContent.RemoveScroll"),YR=x.forwardRef((t,e)=>{const Ue=t,{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v}=Ue,y=K(Ue,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),b=Xs(cl,r),[w,S]=x.useState(null),[A,_]=x.useState(null),E=ft(e,ge=>S(ge)),[N,T]=x.useState(null),[O,j]=x.useState(null),P=ny(r),[D,F]=x.useState(!1),I=x.useRef(!1);x.useEffect(()=>{if(w)return ey(w)},[w]),Jv();const k=x.useCallback(ge=>{const[Y,...te]=P().map(be=>be.ref.current),[ae]=te.slice(-1),X=document.activeElement;for(const be of ge)if(be===X||(be==null||be.scrollIntoView({block:"nearest"}),be===Y&&A&&(A.scrollTop=0),be===ae&&A&&(A.scrollTop=A.scrollHeight),be==null||be.focus(),document.activeElement!==X))return},[P,A]),R=x.useCallback(()=>k([N,w]),[k,N,w]);x.useEffect(()=>{D&&R()},[D,R]);const{onOpenChange:L,triggerPointerDownPosRef:V}=b;x.useEffect(()=>{if(w){let ge={x:0,y:0};const Y=ae=>{var X,be,ue,Pe;ge={x:Math.abs(Math.round(ae.pageX)-((be=(X=V.current)==null?void 0:X.x)!=null?be:0)),y:Math.abs(Math.round(ae.pageY)-((Pe=(ue=V.current)==null?void 0:ue.y)!=null?Pe:0))}},te=ae=>{ge.x<=10&&ge.y<=10?ae.preventDefault():w.contains(ae.target)||L(!1),document.removeEventListener("pointermove",Y),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",te,{capture:!0})}}},[w,L,V]),x.useEffect(()=>{const ge=()=>L(!1);return window.addEventListener("blur",ge),window.addEventListener("resize",ge),()=>{window.removeEventListener("blur",ge),window.removeEventListener("resize",ge)}},[L]);const[W,q]=h8(ge=>{const Y=P().filter(X=>!X.disabled),te=Y.find(X=>X.ref.current===document.activeElement),ae=p8(Y,ge,te);ae&&setTimeout(()=>ae.ref.current.focus())}),H=x.useCallback((ge,Y,te)=>{const ae=!I.current&&!te;(b.value!==void 0&&b.value===Y||ae)&&(T(ge),ae&&(I.current=!0))},[b.value]),J=x.useCallback(()=>w==null?void 0:w.focus(),[w]),de=x.useCallback((ge,Y,te)=>{const ae=!I.current&&!te;(b.value!==void 0&&b.value===Y||ae)&&j(ge)},[b.value]),se=n==="popper"?Qb:ZR,Ee=se===Qb?{side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:v}:{};return c.jsx(XR,{scope:r,content:w,viewport:A,onViewportChange:_,itemRefCallback:H,selectedItem:N,onItemLeave:J,itemTextRefCallback:de,focusSelectedItem:R,selectedItemText:O,position:n,isPositioned:D,searchRef:W,children:c.jsx(Hp,{as:EZ,allowPinchZoom:!0,children:c.jsx(Wp,{asChild:!0,trapped:b.open,onMountAutoFocus:ge=>{ge.preventDefault()},onUnmountAutoFocus:Ae(i,ge=>{var Y;(Y=b.trigger)==null||Y.focus({preventScroll:!0}),ge.preventDefault()}),children:c.jsx(xl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:ge=>ge.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:c.jsx(se,M(C(C({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:ge=>ge.preventDefault()},y),Ee),{onPlaced:()=>F(!0),ref:E,style:C({display:"flex",flexDirection:"column",outline:"none"},y.style),onKeyDown:Ae(y.onKeyDown,ge=>{const Y=ge.ctrlKey||ge.altKey||ge.metaKey;if(ge.key==="Tab"&&ge.preventDefault(),!Y&&ge.key.length===1&&q(ge.key),["ArrowUp","ArrowDown","Home","End"].includes(ge.key)){let ae=P().filter(X=>!X.disabled).map(X=>X.ref.current);if(["ArrowUp","End"].includes(ge.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(ge.key)){const X=ge.target,be=ae.indexOf(X);ae=ae.slice(be+1)}setTimeout(()=>k(ae)),ge.preventDefault()}})}))})})})})});YR.displayName=CZ;var NZ="SelectItemAlignedPosition",ZR=x.forwardRef((t,e)=>{const E=t,{__scopeSelect:r,onPlaced:n}=E,i=K(E,["__scopeSelect","onPlaced"]),a=Xs(cl,r),o=Ys(cl,r),[s,l]=x.useState(null),[u,d]=x.useState(null),f=ft(e,N=>d(N)),h=ny(r),p=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=o,w=x.useCallback(()=>{if(a.trigger&&a.valueNode&&s&&u&&g&&v&&y){const N=a.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),O=a.valueNode.getBoundingClientRect(),j=y.getBoundingClientRect();if(a.dir!=="rtl"){const X=j.left-T.left,be=O.left-X,ue=N.left-be,Pe=N.width+ue,oe=Math.max(Pe,T.width),_e=window.innerWidth-da,De=Yb(be,[da,Math.max(da,_e-oe)]);s.style.minWidth=Pe+"px",s.style.left=De+"px"}else{const X=T.right-j.right,be=window.innerWidth-O.right-X,ue=window.innerWidth-N.right-be,Pe=N.width+ue,oe=Math.max(Pe,T.width),_e=window.innerWidth-da,De=Yb(be,[da,Math.max(da,_e-oe)]);s.style.minWidth=Pe+"px",s.style.right=De+"px"}const P=h(),D=window.innerHeight-da*2,F=g.scrollHeight,I=window.getComputedStyle(u),k=parseInt(I.borderTopWidth,10),R=parseInt(I.paddingTop,10),L=parseInt(I.borderBottomWidth,10),V=parseInt(I.paddingBottom,10),W=k+R+F+V+L,q=Math.min(v.offsetHeight*5,W),H=window.getComputedStyle(g),J=parseInt(H.paddingTop,10),de=parseInt(H.paddingBottom,10),se=N.top+N.height/2-da,Ee=D-se,Ue=v.offsetHeight/2,ge=v.offsetTop+Ue,Y=k+R+ge,te=W-Y;if(Y<=se){const X=P.length>0&&v===P[P.length-1].ref.current;s.style.bottom="0px";const be=u.clientHeight-g.offsetTop-g.offsetHeight,ue=Math.max(Ee,Ue+(X?de:0)+be+L),Pe=Y+ue;s.style.height=Pe+"px"}else{const X=P.length>0&&v===P[0].ref.current;s.style.top="0px";const ue=Math.max(se,k+g.offsetTop+(X?J:0)+Ue)+te;s.style.height=ue+"px",g.scrollTop=Y-se+g.offsetTop}s.style.margin="".concat(da,"px 0"),s.style.minHeight=q+"px",s.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[h,a.trigger,a.valueNode,s,u,g,v,y,a.dir,n]);bn(()=>w(),[w]);const[S,A]=x.useState();bn(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const _=x.useCallback(N=>{N&&m.current===!0&&(w(),b==null||b(),m.current=!1)},[w,b]);return c.jsx(TZ,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:_,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:c.jsx(Ge.div,M(C({},i),{ref:f,style:C({boxSizing:"border-box",maxHeight:"100%"},i.style)}))})})});ZR.displayName=NZ;var jZ="SelectPopperPosition",Qb=x.forwardRef((t,e)=>{const s=t,{__scopeSelect:r,align:n="start",collisionPadding:i=da}=s,a=K(s,["__scopeSelect","align","collisionPadding"]),o=iy(r);return c.jsx(Vv,M(C(C({},o),a),{ref:e,align:n,collisionPadding:i,style:M(C({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Qb.displayName=jZ;var[TZ,fS]=Wd(cl,{}),Jb="SelectViewport",QR=x.forwardRef((t,e)=>{const u=t,{__scopeSelect:r,nonce:n}=u,i=K(u,["__scopeSelect","nonce"]),a=Ys(Jb,r),o=fS(Jb,r),s=ft(e,a.onViewportChange),l=x.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),c.jsx(ry.Slot,{scope:r,children:c.jsx(Ge.div,M(C({"data-radix-select-viewport":"",role:"presentation"},i),{ref:s,style:C({position:"relative",flex:1,overflow:"hidden auto"},i.style),onScroll:Ae(i.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const m=Math.abs(l.current-f.scrollTop);if(m>0){const g=window.innerHeight-da*2,v=parseFloat(h.style.minHeight),y=parseFloat(h.style.height),b=Math.max(v,y);if(b<g){const w=b+m,S=Math.min(g,w),A=w-S;h.style.height=S+"px",h.style.bottom==="0px"&&(f.scrollTop=A>0?A:0,h.style.justifyContent="flex-end")}}}l.current=f.scrollTop})}))})]})});QR.displayName=Jb;var JR="SelectGroup",[PZ,OZ]=Wd(JR),IZ=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:r}=a,n=K(a,["__scopeSelect"]),i=Qi();return c.jsx(PZ,{scope:r,id:i,children:c.jsx(Ge.div,M(C({role:"group","aria-labelledby":i},n),{ref:e}))})});IZ.displayName=JR;var e8="SelectLabel",t8=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:r}=a,n=K(a,["__scopeSelect"]),i=OZ(e8,r);return c.jsx(Ge.div,M(C({id:i.id},n),{ref:e}))});t8.displayName=e8;var ig="SelectItem",[DZ,r8]=Wd(ig),n8=x.forwardRef((t,e)=>{const b=t,{__scopeSelect:r,value:n,disabled:i=!1,textValue:a}=b,o=K(b,["__scopeSelect","value","disabled","textValue"]),s=Xs(ig,r),l=Ys(ig,r),u=s.value===n,[d,f]=x.useState(a!=null?a:""),[h,p]=x.useState(!1),m=ft(e,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,n,i)}),g=Qi(),v=x.useRef("touch"),y=()=>{i||(s.onValueChange(n),s.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(DZ,{scope:r,value:n,disabled:i,textId:g,isSelected:u,onItemTextChange:x.useCallback(w=>{f(S=>{var A;return S||((A=w==null?void 0:w.textContent)!=null?A:"").trim()})},[]),children:c.jsx(ry.ItemSlot,{scope:r,value:n,disabled:i,textValue:d,children:c.jsx(Ge.div,M(C({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o),{ref:m,onFocus:Ae(o.onFocus,()=>p(!0)),onBlur:Ae(o.onBlur,()=>p(!1)),onClick:Ae(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:Ae(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:Ae(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:Ae(o.onPointerMove,w=>{var S;v.current=w.pointerType,i?(S=l.onItemLeave)==null||S.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(o.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:Ae(o.onKeyDown,w=>{var A;((A=l.searchRef)==null?void 0:A.current)!==""&&w.key===" "||(yZ.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})}))})})});n8.displayName=ig;var Kf="SelectItemText",i8=x.forwardRef((t,e)=>{const y=t,{__scopeSelect:r,className:n,style:i}=y,a=K(y,["__scopeSelect","className","style"]),o=Xs(Kf,r),s=Ys(Kf,r),l=r8(Kf,r),u=AZ(Kf,r),[d,f]=x.useState(null),h=ft(e,b=>f(b),l.onItemTextChange,b=>{var w;return(w=s.itemTextRefCallback)==null?void 0:w.call(s,b,l.value,l.disabled)}),p=d==null?void 0:d.textContent,m=x.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return bn(()=>(g(m),()=>v(m)),[g,v,m]),c.jsxs(c.Fragment,{children:[c.jsx(Ge.span,M(C({id:l.textId},a),{ref:h})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Dd.createPortal(a.children,o.valueNode):null]})});i8.displayName=Kf;var a8="SelectItemIndicator",o8=x.forwardRef((t,e)=>{const a=t,{__scopeSelect:r}=a,n=K(a,["__scopeSelect"]);return r8(a8,r).isSelected?c.jsx(Ge.span,M(C({"aria-hidden":!0},n),{ref:e})):null});o8.displayName=a8;var ew="SelectScrollUpButton",s8=x.forwardRef((t,e)=>{const r=Ys(ew,t.__scopeSelect),n=fS(ew,t.__scopeSelect),[i,a]=x.useState(!1),o=ft(e,n.onScrollButtonChange);return bn(()=>{if(r.viewport&&r.isPositioned){let s=function(){const u=l.scrollTop>0;a(u)};const l=r.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),i?c.jsx(l8,M(C({},t),{ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=r;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}})):null});s8.displayName=ew;var tw="SelectScrollDownButton",c8=x.forwardRef((t,e)=>{const r=Ys(tw,t.__scopeSelect),n=fS(tw,t.__scopeSelect),[i,a]=x.useState(!1),o=ft(e,n.onScrollButtonChange);return bn(()=>{if(r.viewport&&r.isPositioned){let s=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;a(d)};const l=r.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),i?c.jsx(l8,M(C({},t),{ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=r;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}})):null});c8.displayName=tw;var l8=x.forwardRef((t,e)=>{const u=t,{__scopeSelect:r,onAutoScroll:n}=u,i=K(u,["__scopeSelect","onAutoScroll"]),a=Ys("SelectScrollButton",r),o=x.useRef(null),s=ny(r),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),bn(()=>{var f;const d=s().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),c.jsx(Ge.div,M(C({"aria-hidden":!0},i),{ref:e,style:C({flexShrink:0},i.style),onPointerDown:Ae(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Ae(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Ae(i.onPointerLeave,()=>{l()})}))}),kZ="SelectSeparator",u8=x.forwardRef((t,e)=>{const i=t,{__scopeSelect:r}=i,n=K(i,["__scopeSelect"]);return c.jsx(Ge.div,M(C({"aria-hidden":!0},n),{ref:e}))});u8.displayName=kZ;var rw="SelectArrow",MZ=x.forwardRef((t,e)=>{const s=t,{__scopeSelect:r}=s,n=K(s,["__scopeSelect"]),i=iy(r),a=Xs(rw,r),o=Ys(rw,r);return a.open&&o.position==="popper"?c.jsx(Uv,M(C(C({},i),n),{ref:e})):null});MZ.displayName=rw;var RZ="SelectBubbleInput",d8=x.forwardRef((i,n)=>{var a=i,{__scopeSelect:t,value:e}=a,r=K(a,["__scopeSelect","value"]);const o=x.useRef(null),s=ft(n,o),l=DR(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&h){const p=new Event("change",{bubbles:!0});h.call(u,e),u.dispatchEvent(p)}},[l,e]),c.jsx(Ge.select,M(C({},r),{style:C(C({},Ak),r.style),ref:s,defaultValue:e}))});d8.displayName=RZ;function f8(t){return t===""||t===void 0}function h8(t){const e=Fr(t),r=x.useRef(""),n=x.useRef(0),i=x.useCallback(o=>{const s=r.current+o;e(s),function l(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(s)},[e]),a=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function p8(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=$Z(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function $Z(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var LZ=zR,m8=UR,FZ=HR,BZ=GR,zZ=qR,g8=KR,VZ=QR,v8=t8,y8=n8,UZ=i8,WZ=o8,x8=s8,b8=c8,w8=u8;const Nt=LZ,jt=FZ,St=x.forwardRef((i,n)=>{var a=i,{className:t,children:e}=a,r=K(a,["className","children"]);return c.jsxs(m8,M(C({ref:n,className:ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t)},r),{children:[e,c.jsx(BZ,{asChild:!0,children:c.jsx(Na,{className:"h-4 w-4 opacity-50"})})]}))});St.displayName=m8.displayName;const A8=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(x8,M(C({ref:r,className:ie("flex cursor-default items-center justify-center py-1",t)},e),{children:c.jsx(Bo,{className:"h-4 w-4"})}))});A8.displayName=x8.displayName;const S8=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(b8,M(C({ref:r,className:ie("flex cursor-default items-center justify-center py-1",t)},e),{children:c.jsx(Na,{className:"h-4 w-4"})}))});S8.displayName=b8.displayName;const _t=x.forwardRef((a,i)=>{var o=a,{className:t,children:e,position:r="popper"}=o,n=K(o,["className","children","position"]);return c.jsx(zZ,{children:c.jsxs(g8,M(C({ref:i,className:ie("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r},n),{children:[c.jsx(A8,{}),c.jsx(VZ,{className:ie("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(S8,{})]}))})});_t.displayName=g8.displayName;const HZ=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(v8,C({ref:r,className:ie("py-1.5 pl-8 pr-2 text-sm font-semibold",t)},e))});HZ.displayName=v8.displayName;const ye=x.forwardRef((i,n)=>{var a=i,{className:t,children:e}=a,r=K(a,["className","children"]);return c.jsxs(y8,M(C({ref:n,className:ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},r),{children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(WZ,{children:c.jsx(Er,{className:"h-4 w-4"})})}),c.jsx(UZ,{children:e})]}))});ye.displayName=y8.displayName;const GZ=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(w8,C({ref:r,className:ie("-mx-1 my-1 h-px bg-muted",t)},e))});GZ.displayName=w8.displayName;const At=x.forwardRef((i,n)=>{var a=i,{className:t,type:e}=a,r=K(a,["className","type"]);return c.jsx("input",C({type:e,className:ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n},r))});At.displayName="Input";const qZ=Ld("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Wc=x.forwardRef((i,n)=>{var a=i,{className:t,variant:e}=a,r=K(a,["className","variant"]);return c.jsx("div",C({ref:n,role:"alert",className:ie(qZ({variant:e}),t)},r))});Wc.displayName="Alert";const KZ=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("h5",C({ref:r,className:ie("mb-1 font-medium leading-none tracking-tight",t)},e))});KZ.displayName="AlertTitle";const Hc=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("div",C({ref:r,className:ie("text-sm [&_p]:leading-relaxed",t)},e))});Hc.displayName="AlertDescription";const XZ=NR({username:nu().min(1,"Seleziona un nome utente").max(50,"Username troppo lungo"),password:nu().min(1,"Inserisci una password").max(100,"Password troppo lunga")});function YZ(){const{login:t}=Bt(),{toast:e}=Nr(),[r,n]=x.useState(!1),[i,a]=x.useState(!0),[o,s]=x.useState([]),[l,u]=x.useState(null),d=wl({resolver:SR(XZ),defaultValues:{username:"",password:""}});x.useEffect(()=>{G(this,null,function*(){try{a(!0);const p=yield Io.getAvailableUsers();s(p)}catch(p){console.error("Errore nel caricamento utenti:",p);const m=(y,b)=>{if(b==="admin")return"".concat(y," (Amministratore)");const w=y.charAt(0).toUpperCase()+y.slice(1);return"".concat(w," (Membro della famiglia)")},v=["admin","Fabio","Ludovica"].map(y=>{const b=y==="admin"?"admin":"user";return{username:y,displayName:m(y,b),role:b}});s(v)}finally{a(!1)}})},[]);const f=h=>G(this,null,function*(){n(!0),u(null);try{yield t(h),e({title:"Bentornato!",description:"Accesso effettuato con successo."})}catch(p){const m=p instanceof Error?p.message:"Credenziali non valide";u(m),e({title:"Accesso fallito",description:m,variant:"destructive"})}finally{n(!1)}});return c.jsx("div",{className:"min-h-screen bg-eggshell flex items-center justify-center p-4",children:c.jsx(Ie,{className:"w-full max-w-md",children:c.jsxs(Ve,{className:"pt-8 pb-8 px-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-burnt-newStyle rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(MA,{className:"h-8 w-8 text-white"})}),c.jsx("h1",{className:"text-3xl font-bold text-delft-blue mb-2",children:"HomeTask"}),c.jsx("p",{className:"text-gray-600",children:"Accedi per gestire le attivit"})]}),l&&c.jsxs(Wc,{variant:"destructive",className:"mb-6",children:[c.jsx(Lp,{className:"h-4 w-4"}),c.jsx(Hc,{children:l})]}),c.jsx(Al,M(C({},d),{children:c.jsxs("form",{onSubmit:d.handleSubmit(f),className:"space-y-6",children:[c.jsx(ot,{control:d.control,name:"username",render:({field:h})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(Lr,{className:"h-4 w-4 mr-2"}),"Nome utente"]}),c.jsxs(Nt,{onValueChange:h.onChange,defaultValue:h.value,disabled:i||r,children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:i?"Caricamento utenti...":"Seleziona un utente"})})}),c.jsx(_t,{children:o.map(p=>c.jsx(ye,{value:p.username,children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:p.displayName}),p.role==="admin"&&c.jsx(Ec,{className:"h-3 w-3 text-yellow-600"})]})},p.username))})]}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:d.control,name:"password",render:({field:h})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Password"}),c.jsx(gt,{children:c.jsx(At,M(C({},h),{type:"password",placeholder:"Inserisci la password",disabled:r}))}),c.jsx(Ft,{})]})}),c.jsxs(Q,{type:"submit",className:"w-full bg-cambridge-newStyle hover:bg-burnt-newStyle/90 text-white font-semibold py-3",disabled:r||i,children:[r&&c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Accesso in corso...":"Accedi"]})]})}))]})})})}function ZZ(){return c.jsx(YZ,{})}const _8=x.createContext(void 0);function QZ({children:t}){const[e,r]=x.useState(()=>typeof window!="undefined"&&sessionStorage.getItem("theme")||"light");x.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(e),sessionStorage.setItem("theme",e)},[e]);const n=a=>{r(a)},i=()=>{r(a=>a==="light"?"dark":"light")};return c.jsx(_8.Provider,{value:{theme:e,toggleTheme:i,setTheme:n},children:t})}function hS(){const t=x.useContext(_8);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JZ="/firebase-messaging-sw.js",eQ="/firebase-cloud-messaging-push-scope",C8="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",tQ="https://fcmregistrations.googleapis.com/v1",E8="google.c.a.c_id",rQ="google.c.a.c_l",nQ="google.c.a.ts",iQ="google.c.a.e",fj=1e4;var hj;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(hj||(hj={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Fh;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Fh||(Fh={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function aQ(t){const e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(r),i=new Uint8Array(n.length);for(let a=0;a<n.length;++a)i[a]=n.charCodeAt(a);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="fcm_token_details_db",oQ=5,pj="fcm_token_object_Store";function sQ(t){return G(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(a1))return null;let e=null;return(yield _A(a1,oQ,{upgrade:(n,i,a,o)=>G(this,null,function*(){var s;if(i<2||!n.objectStoreNames.contains(pj))return;const l=o.objectStore(pj),u=yield l.index("fcmSenderId").get(t);if(yield l.clear(),!!u){if(i===2){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(s=d.createTime)!==null&&s!==void 0?s:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:_o(d.vapidKey)}}}else if(i===3){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:_o(d.auth),p256dh:_o(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:_o(d.vapidKey)}}}else if(i===4){const d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:_o(d.auth),p256dh:_o(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:_o(d.vapidKey)}}}}})})).close(),yield $x(a1),yield $x("fcm_vapid_details_db"),yield $x("undefined"),cQ(e)?e:null})}function cQ(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lQ="firebase-messaging-database",uQ=1,Bh="firebase-messaging-store";let o1=null;function N8(){return o1||(o1=_A(lQ,uQ,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Bh)}}})),o1}function dQ(t){return G(this,null,function*(){const e=j8(t),n=yield(yield N8()).transaction(Bh).objectStore(Bh).get(e);if(n)return n;{const i=yield sQ(t.appConfig.senderId);if(i)return yield pS(t,i),i}})}function pS(t,e){return G(this,null,function*(){const r=j8(t),i=(yield N8()).transaction(Bh,"readwrite");return yield i.objectStore(Bh).put(e,r),yield i.done,e})}function j8({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fQ={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Vn=new SA("messaging","Messaging",fQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(t,e){return G(this,null,function*(){const r=yield gS(t),n=T8(e),i={method:"POST",headers:r,body:JSON.stringify(n)};let a;try{a=yield(yield fetch(mS(t.appConfig),i)).json()}catch(o){throw Vn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw Vn.create("token-subscribe-failed",{errorInfo:o})}if(!a.token)throw Vn.create("token-subscribe-no-token");return a.token})}function pQ(t,e){return G(this,null,function*(){const r=yield gS(t),n=T8(e.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(n)};let a;try{a=yield(yield fetch("".concat(mS(t.appConfig),"/").concat(e.token),i)).json()}catch(o){throw Vn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(a.error){const o=a.error.message;throw Vn.create("token-update-failed",{errorInfo:o})}if(!a.token)throw Vn.create("token-update-no-token");return a.token})}function mQ(t,e){return G(this,null,function*(){const n={method:"DELETE",headers:yield gS(t)};try{const a=yield(yield fetch("".concat(mS(t.appConfig),"/").concat(e),n)).json();if(a.error){const o=a.error.message;throw Vn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Vn.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}})}function mS({projectId:t}){return"".concat(tQ,"/projects/").concat(t,"/registrations")}function gS(r){return G(this,arguments,function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(n)})})}function T8({p256dh:t,auth:e,endpoint:r,vapidKey:n}){const i={web:{endpoint:r,auth:e,p256dh:t}};return n!==C8&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ=7*24*60*60*1e3;function vQ(t){return G(this,null,function*(){const e=yield xQ(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:_o(e.getKey("auth")),p256dh:_o(e.getKey("p256dh"))},n=yield dQ(t.firebaseDependencies);if(n){if(bQ(n.subscriptionOptions,r))return Date.now()>=n.createTime+gQ?yQ(t,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{yield mQ(t.firebaseDependencies,n.token)}catch(i){console.warn(i)}return mj(t.firebaseDependencies,r)}else return mj(t.firebaseDependencies,r)})}function yQ(t,e){return G(this,null,function*(){try{const r=yield pQ(t.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:r,createTime:Date.now()});return yield pS(t.firebaseDependencies,n),r}catch(r){throw r}})}function mj(t,e){return G(this,null,function*(){const n={token:yield hQ(t,e),createTime:Date.now(),subscriptionOptions:e};return yield pS(t,n),n.token})}function xQ(t,e){return G(this,null,function*(){const r=yield t.pushManager.getSubscription();return r||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:aQ(e)})})}function bQ(t,e){const r=e.vapidKey===t.vapidKey,n=e.endpoint===t.endpoint,i=e.auth===t.auth,a=e.p256dh===t.p256dh;return r&&n&&i&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gj(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return wQ(e,t),AQ(e,t),SQ(e,t),e}function wQ(t,e){if(!e.notification)return;t.notification={};const r=e.notification.title;r&&(t.notification.title=r);const n=e.notification.body;n&&(t.notification.body=n);const i=e.notification.image;i&&(t.notification.image=i);const a=e.notification.icon;a&&(t.notification.icon=a)}function AQ(t,e){e.data&&(t.data=e.data)}function SQ(t,e){var r,n,i,a,o;if(!e.fcmOptions&&!(!((r=e.notification)===null||r===void 0)&&r.click_action))return;t.fcmOptions={};const s=(i=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&i!==void 0?i:(a=e.notification)===null||a===void 0?void 0:a.click_action;s&&(t.fcmOptions.link=s);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Q(t){return typeof t=="object"&&!!t&&E8 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CQ(t){if(!t||!t.options)throw s1("App Configuration Object");if(!t.name)throw s1("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(const n of e)if(!r[n])throw s1(n);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function s1(t){return Vn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EQ{constructor(e,r,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=CQ(e);this.firebaseDependencies={app:e,appConfig:i,installations:r,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NQ(t){return G(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(JZ,{scope:eQ}),t.swRegistration.update().catch(()=>{}),yield jQ(t.swRegistration)}catch(e){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}})}function jQ(t){return G(this,null,function*(){return new Promise((e,r)=>{const n=setTimeout(()=>r(new Error("Service worker not registered after ".concat(fj," ms"))),fj),i=t.installing||t.waiting;t.active?(clearTimeout(n),e()):i?i.onstatechange=a=>{var o;((o=a.target)===null||o===void 0?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(n),e())}:(clearTimeout(n),r(new Error("No incoming service worker found.")))})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TQ(t,e){return G(this,null,function*(){if(!e&&!t.swRegistration&&(yield NQ(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");t.swRegistration=e}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t,e){return G(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=C8)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t,e){return G(this,null,function*(){if(!navigator)throw Vn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Vn.create("permission-blocked");return yield PQ(t,e==null?void 0:e.vapidKey),yield TQ(t,e==null?void 0:e.serviceWorkerRegistration),vQ(t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OQ(t,e,r){return G(this,null,function*(){const n=IQ(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[E8],message_name:r[rQ],message_time:r[nQ],message_device_time:Math.floor(Date.now()/1e3)})})}function IQ(t){switch(t){case Fh.NOTIFICATION_CLICKED:return"notification_open";case Fh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DQ(t,e){return G(this,null,function*(){const r=e.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===Fh.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(gj(r)):t.onMessageHandler.next(gj(r)));const n=r.data;_Q(n)&&n[iQ]==="1"&&(yield OQ(t,r.messageType,n))})}const vj="@firebase/messaging",yj="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kQ=t=>{const e=new EQ(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>DQ(e,r)),e},MQ=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:n=>P8(e,n)}};function RQ(){el(new tl("messaging",kQ,"PUBLIC")),el(new tl("messaging-internal",MQ,"PRIVATE")),Os(vj,yj),Os(vj,yj,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Q(){return G(this,null,function*(){try{yield z4()}catch(t){return!1}return typeof window!="undefined"&&B4()&&V4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(t,e){if(!navigator)throw Vn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t=AA()){return $Q().then(e=>{if(!e)throw Vn.create("unsupported-browser")},e=>{throw Vn.create("indexed-db-unsupported")}),Md(kd(t),"messaging").getImmediate()}function FQ(t,e){return G(this,null,function*(){return t=kd(t),P8(t,e)})}function BQ(t,e){return t=kd(t),LQ(t,e)}RQ();class Fa{constructor(e,r,n,i,a="unknown",o=!0,s=new Date,l=new Date,u=new Date,d){this.id=e,this.token=r,this.username=n,this.userAgent=i,this.deviceType=a,this.isActive=o,this.createdAt=s,this.updatedAt=l,this.lastUsedAt=u,this.expiresAt=d}static fromFirestore(e){var r,n,i,a;return new Fa(e.id,e.token,e.username,e.userAgent,e.deviceType||"unknown",e.isActive!==void 0?e.isActive:!0,((r=e.createdAt)==null?void 0:r.toDate())||new Date,((n=e.updatedAt)==null?void 0:n.toDate())||new Date,((i=e.lastUsedAt)==null?void 0:i.toDate())||new Date,(a=e.expiresAt)==null?void 0:a.toDate())}toFirestore(){const e={token:this.token,username:this.username,userAgent:this.userAgent,deviceType:this.deviceType,isActive:this.isActive,createdAt:this.createdAt,updatedAt:this.updatedAt,lastUsedAt:this.lastUsedAt,expiresAt:this.expiresAt};return gi(e)}isExpired(){return this.expiresAt?new Date>this.expiresAt:!1}isValid(){return this.isActive&&!this.isExpired()}updateLastUsed(){this.lastUsedAt=new Date,this.updatedAt=new Date}deactivate(){this.isActive=!1,this.updatedAt=new Date}static detectDeviceType(e){const r=e.toLowerCase();return/mobile|android|iphone|ipod|blackberry|windows phone/.test(r)?"mobile":/tablet|ipad/.test(r)?"tablet":/desktop|windows|macintosh|linux/.test(r)?"desktop":"unknown"}static getDefaultExpirationDate(e=30){const r=new Date;return r.setDate(r.getDate()+e),r}}const zQ="BHvJqEIDOQuhXFouxEo9drLiqJpatiR-25GUZxorXO5GaA8viMvouU9N3oQ7wtmgCFCx3eDW_JP62fHHxAfGlNw";let ac=null,oc=null,sc=!1,zl=null,bj=null;function vS(){const[t,e]=x.useState("default"),[r,n]=x.useState(null),[i,a]=x.useState(!1),[o,s]=x.useState(null),[l,u]=x.useState(!1),[d,f]=x.useState(!1),{toast:h}=Nr(),{user:p}=nS(),m=()=>typeof window!="undefined"&&"Notification"in window&&"serviceWorker"in navigator,g=()=>{try{return m()?Notification.permission:"default"}catch(D){return"default"}},v=D=>G(this,null,function*(){if(wt)try{const F=Is(wt,"fcm-tokens"),I=Aa(F,Tn("username","==",D),gu("createdAt","desc")),R=(yield Uc(I)).docs.map(H=>Fa.fromFirestore(C({id:H.id},H.data()))),L=[],V=new Set,W=new Map;for(const H of R){if(V.has(H.token)){L.push(H.id);continue}if(!H.isValid()){L.push(H.id);continue}const J="".concat(H.deviceType),de=W.get(J);de?H.createdAt>de.createdAt?(L.push(de.id),W.set(J,H)):L.push(H.id):W.set(J,H),V.add(H.token)}for(const H of L)yield vu(Sa(wt,"fcm-tokens",H));const q=R.filter(H=>!L.includes(H.id));if(q.length>2){const H=q.slice(2);for(const J of H)yield vu(Sa(wt,"fcm-tokens",J.id))}}catch(F){}}),y=D=>G(this,null,function*(){if(!p||!wt)return null;try{yield v(p.username);const F=Is(wt,"fcm-tokens"),I=Aa(F,Tn("username","==",p.username),Tn("token","==",D)),k=yield Uc(I);if(!k.empty){const de=k.docs[0],se=Fa.fromFirestore(C({id:de.id},de.data()));return se.updateLastUsed(),yield Mu(Sa(wt,"fcm-tokens",de.id),{lastUsedAt:_i.fromDate(se.lastUsedAt),updatedAt:_i.fromDate(se.updatedAt)}),se}const R=navigator.userAgent,L=Fa.detectDeviceType(R),V=Aa(F,Tn("username","==",p.username),Tn("deviceType","==",L)),W=yield Uc(V);if(!W.empty){const de=W.docs[0];yield vu(Sa(wt,"fcm-tokens",de.id))}const q=Fa.getDefaultExpirationDate(30),H=new Fa("",D,p.username,R,L,!0,new Date,new Date,new Date,q),J=yield W4(F,M(C({},H.toFirestore()),{createdAt:_i.fromDate(H.createdAt),updatedAt:_i.fromDate(H.updatedAt),lastUsedAt:_i.fromDate(H.lastUsedAt),expiresAt:_i.fromDate(H.expiresAt)}));return H.id=J.id,H}catch(F){return null}}),b=D=>G(this,null,function*(){return new Promise((F,I)=>{const k=setTimeout(()=>{I(new Error("Service Worker activation timeout"))},3e4);(()=>{if(D.active){clearTimeout(k),F(D.active);return}if(D.installing){D.installing.addEventListener("statechange",function L(){this.state==="activated"?(this.removeEventListener("statechange",L),clearTimeout(k),F(D.active)):this.state==="redundant"&&(this.removeEventListener("statechange",L),clearTimeout(k),I(new Error("Service Worker became redundant")))});return}if(D.waiting){D.waiting.postMessage({type:"SKIP_WAITING"}),D.waiting.addEventListener("statechange",function L(){this.state==="activated"&&(this.removeEventListener("statechange",L),clearTimeout(k),F(D.active))});return}clearTimeout(k),I(new Error("Service Worker not found"))})()})}),w=()=>G(this,null,function*(){if(ac)return;const D="/FamilyTaskTracker/firebase-messaging-sw.js";try{if(!(yield fetch(D)).ok)throw new Error("Service Worker file not found");const I=yield navigator.serviceWorker.register(D,{scope:"/FamilyTaskTracker/"});yield b(I),ac=I}catch(F){throw new Error("Failed to register Service Worker")}}),S=()=>G(this,null,function*(){if(!p)throw new Error("Missing VAPID key or user not authenticated");if(!ac)throw new Error("Service Worker not registered");ac.active||(yield b(ac));try{oc||(oc=xj());const D={vapidKey:zQ,serviceWorkerRegistration:ac};let F=0;const I=3;for(;F<I;)try{F++;const k=yield FQ(oc,D);if(k){const R=yield y(k);return n(k),s(R),k}else F<I&&(yield new Promise(R=>setTimeout(R,2e3)))}catch(k){if(F>=I)throw k;yield new Promise(R=>setTimeout(R,3e3))}throw new Error("No FCM token available after retries")}catch(D){throw D}}),A=()=>G(this,null,function*(){if(!(!oc||bj))try{bj=BQ(oc,D=>{var F,I,k,R;if(h({title:((F=D.notification)==null?void 0:F.title)||"Nuova notifica",description:((I=D.notification)==null?void 0:I.body)||"Controlla l'app"}),Notification.permission==="granted"){const L="/FamilyTaskTracker/icons/icon-192x192.png";new Notification(((k=D.notification)==null?void 0:k.title)||"Family Task Tracker",{body:(R=D.notification)==null?void 0:R.body,icon:L,badge:L,tag:"foreground-notification",requireInteraction:!1,silent:!1})}})}catch(D){}}),_=()=>G(this,null,function*(){if(!sc){if(zl){yield zl;return}zl=G(this,null,function*(){try{u(!0),ac||(yield w()),oc||(oc=xj()),yield A(),sc=!0}catch(D){throw sc=!1,zl=null,D}finally{u(!1)}}),yield zl}});x.useEffect(()=>{const D=g();e(D),m()&&!sc&&!zl&&_().catch(()=>{})},[p]),x.useEffect(()=>{G(this,null,function*(){if(t==="granted"&&p&&!r&&sc&&!l&&!d)try{u(!0),yield S()}catch(F){}finally{u(!1)}})},[t,p,sc,r,l,d]),x.useEffect(()=>{p||(n(null),s(null),f(!1))},[p]);const E=()=>G(this,null,function*(){if(!m()){h({title:"Non supportato",description:"Le notifiche non sono supportate su questo dispositivo.",variant:"destructive"});return}if(!p){h({title:"Accesso richiesto",description:"Devi essere autenticato per abilitare le notifiche.",variant:"destructive"});return}try{if(a(!0),t==="granted"){yield _(),yield S(),h({title:"Notifiche attivate",description:"Riceverai aggiornamenti famiglia!"});return}const D=yield Notification.requestPermission();e(D),D==="granted"?(f(!1),yield _(),yield S(),h({title:"Notifiche attivate",description:"Riceverai aggiornamenti famiglia!"})):h({title:"Notifiche bloccate",description:"Puoi riabilitarle nelle impostazioni del browser.",variant:"destructive"})}catch(D){h({title:"Errore notifiche",description:"Impossibile attivare le notifiche",variant:"destructive"})}finally{a(!1)}}),N=()=>G(this,null,function*(){if(t!=="granted"){h({title:"Permessi necessari",description:"Abilita prima le notifiche",variant:"destructive"});return}try{const D="/FamilyTaskTracker/icon-192.png";new Notification("Test Notifica Locale",{body:"Se vedi questa notifica, il sistema funziona!",icon:D,badge:D,tag:"test-notification",requireInteraction:!1,silent:!1}),h({title:"Test inviato!",description:"Controlla se  apparsa la notifica"})}catch(D){h({title:"Errore test",description:"Impossibile inviare notifica di test",variant:"destructive"})}}),T=()=>G(this,null,function*(){if(!(!p||t!=="granted"))try{a(!0),yield _(),yield S()}catch(D){h({title:"Errore aggiornamento",description:"Impossibile aggiornare il token",variant:"destructive"})}finally{a(!1)}}),O=()=>G(this,null,function*(){if(!(!p||!wt))try{yield v(p.username),n(null),s(null),h({title:"Token rimossi",description:"Tutti i token FCM sono stati rimossi"})}catch(D){h({title:"Errore rimozione",description:"Impossibile rimuovere i token",variant:"destructive"})}}),j=()=>G(this,null,function*(){try{u(!0),f(!0),p&&(yield v(p.username)),n(null),s(null),yield new Promise(D=>setTimeout(D,100)),h({title:"Notifiche disabilitate",description:"Non riceverai pi notifiche da questo dispositivo"})}catch(D){h({title:"Errore disabilitazione",description:"Impossibile disabilitare le notifiche",variant:"destructive"})}finally{u(!1)}}),P=()=>G(this,null,function*(){try{u(!0),f(!1),h({title:"Notifiche riabilitate",description:"Configurazione automatica in corso..."})}catch(D){h({title:"Errore riabilitazione",description:"Impossibile riabilitare le notifiche",variant:"destructive"})}finally{u(!1)}});return{permission:t,token:r,tokenRecord:o,isRegistering:i,isInitializing:l,isManuallyDisabled:d,isSupported:m(),isInitialized:sc,requestPermission:E,testNotification:N,refreshToken:T,clearUserTokens:O,disableNotifications:j,enableNotifications:P,debug:{setupFCM:S,runDiagnostics:()=>G(this,null,function*(){try{return r||(yield S()),{success:!0,message:"Sistema FCM funzionante"}}catch(D){return{success:!1,message:"Errore nel sistema FCM"}}})}}}var c1="rovingFocusGroup.onEntryFocus",VQ={bubbles:!1,cancelable:!0},Gp="RovingFocusGroup",[nw,O8,UQ]=Ov(Gp),[WQ,ay]=ai(Gp,[UQ]),[HQ,GQ]=WQ(Gp),I8=x.forwardRef((t,e)=>c.jsx(nw.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(nw.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(qQ,M(C({},t),{ref:e}))})}));I8.displayName=Gp;var qQ=x.forwardRef((t,e)=>{const N=t,{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1}=N,f=K(N,["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"]),h=x.useRef(null),p=ft(e,h),m=Up(a),[g,v]=io({prop:o,defaultProp:s!=null?s:null,onChange:l,caller:Gp}),[y,b]=x.useState(!1),w=Fr(u),S=O8(r),A=x.useRef(!1),[_,E]=x.useState(0);return x.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(c1,w),()=>T.removeEventListener(c1,w)},[w]),c.jsx(HQ,{scope:r,orientation:n,dir:m,loop:i,currentTabStopId:g,onItemFocus:x.useCallback(T=>v(T),[v]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>E(T=>T+1),[]),onFocusableItemRemove:x.useCallback(()=>E(T=>T-1),[]),children:c.jsx(Ge.div,M(C({tabIndex:y||_===0?-1:0,"data-orientation":n},f),{ref:p,style:C({outline:"none"},t.style),onMouseDown:Ae(t.onMouseDown,()=>{A.current=!0}),onFocus:Ae(t.onFocus,T=>{const O=!A.current;if(T.target===T.currentTarget&&O&&!y){const j=new CustomEvent(c1,VQ);if(T.currentTarget.dispatchEvent(j),!j.defaultPrevented){const P=S().filter(R=>R.focusable),D=P.find(R=>R.active),F=P.find(R=>R.id===g),k=[D,F,...P].filter(Boolean).map(R=>R.ref.current);M8(k,d)}}A.current=!1}),onBlur:Ae(t.onBlur,()=>b(!1))}))})}),D8="RovingFocusGroupItem",k8=x.forwardRef((t,e)=>{const v=t,{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,children:o}=v,s=K(v,["__scopeRovingFocusGroup","focusable","active","tabStopId","children"]),l=Qi(),u=a||l,d=GQ(D8,r),f=d.currentTabStopId===u,h=O8(r),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:g}=d;return x.useEffect(()=>{if(n)return p(),()=>m()},[n,p,m]),c.jsx(nw.ItemSlot,{scope:r,id:u,focusable:n,active:i,children:c.jsx(Ge.span,M(C({tabIndex:f?0:-1,"data-orientation":d.orientation},s),{ref:e,onMouseDown:Ae(t.onMouseDown,y=>{n?d.onItemFocus(u):y.preventDefault()}),onFocus:Ae(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ae(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){d.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const b=YQ(y,d.orientation,d.dir);if(b!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let S=h().filter(A=>A.focusable).map(A=>A.ref.current);if(b==="last")S.reverse();else if(b==="prev"||b==="next"){b==="prev"&&S.reverse();const A=S.indexOf(y.currentTarget);S=d.loop?ZQ(S,A+1):S.slice(A+1)}setTimeout(()=>M8(S))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o}))})});k8.displayName=D8;var KQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function XQ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function YQ(t,e,r){const n=XQ(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return KQ[n]}function M8(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function ZQ(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var R8=I8,$8=k8,iw=["Enter"," "],QQ=["ArrowDown","PageUp","Home"],L8=["ArrowUp","PageDown","End"],JQ=[...QQ,...L8],eJ={ltr:[...iw,"ArrowRight"],rtl:[...iw,"ArrowLeft"]},tJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qp="Menu",[zh,rJ,nJ]=Ov(qp),[Sl,F8]=ai(qp,[nJ,Ks,ay]),oy=Ks(),B8=ay(),[iJ,_l]=Sl(qp),[aJ,Kp]=Sl(qp),z8=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:i,onOpenChange:a,modal:o=!0}=t,s=oy(e),[l,u]=x.useState(null),d=x.useRef(!1),f=Fr(a),h=Up(i);return x.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),c.jsx(zv,M(C({},s),{children:c.jsx(iJ,{scope:e,open:r,onOpenChange:f,content:l,onContentChange:u,children:c.jsx(aJ,{scope:e,onClose:x.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})}))};z8.displayName=qp;var oJ="MenuAnchor",yS=x.forwardRef((t,e)=>{const a=t,{__scopeMenu:r}=a,n=K(a,["__scopeMenu"]),i=oy(r);return c.jsx(Bp,M(C(C({},i),n),{ref:e}))});yS.displayName=oJ;var xS="MenuPortal",[sJ,V8]=Sl(xS,{forceMount:void 0}),U8=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:i}=t,a=_l(xS,e);return c.jsx(sJ,{scope:e,forceMount:r,children:c.jsx(Dn,{present:r||a.open,children:c.jsx($d,{asChild:!0,container:i,children:n})})})};U8.displayName=xS;var Ji="MenuContent",[cJ,bS]=Sl(Ji),W8=x.forwardRef((t,e)=>{const r=V8(Ji,t.__scopeMenu),s=t,{forceMount:n=r.forceMount}=s,i=K(s,["forceMount"]),a=_l(Ji,t.__scopeMenu),o=Kp(Ji,t.__scopeMenu);return c.jsx(zh.Provider,{scope:t.__scopeMenu,children:c.jsx(Dn,{present:n||a.open,children:c.jsx(zh.Slot,{scope:t.__scopeMenu,children:o.modal?c.jsx(lJ,M(C({},i),{ref:e})):c.jsx(uJ,M(C({},i),{ref:e}))})})})}),lJ=x.forwardRef((t,e)=>{const r=_l(Ji,t.__scopeMenu),n=x.useRef(null),i=ft(e,n);return x.useEffect(()=>{const a=n.current;if(a)return ey(a)},[]),c.jsx(wS,M(C({},t),{ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Ae(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)}))}),uJ=x.forwardRef((t,e)=>{const r=_l(Ji,t.__scopeMenu);return c.jsx(wS,M(C({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)}))}),dJ=Ds("MenuContent.ScrollLock"),wS=x.forwardRef((t,e)=>{const V=t,{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m}=V,g=K(V,["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"]),v=_l(Ji,r),y=Kp(Ji,r),b=oy(r),w=B8(r),S=rJ(r),[A,_]=x.useState(null),E=x.useRef(null),N=ft(e,E,v.onContentChange),T=x.useRef(0),O=x.useRef(""),j=x.useRef(0),P=x.useRef(null),D=x.useRef("right"),F=x.useRef(0),I=m?Hp:x.Fragment,k=m?{as:dJ,allowPinchZoom:!0}:void 0,R=W=>{var ge,Y;const q=O.current+W,H=S().filter(te=>!te.disabled),J=document.activeElement,de=(ge=H.find(te=>te.ref.current===J))==null?void 0:ge.textValue,se=H.map(te=>te.textValue),Ee=SJ(se,q,de),Ue=(Y=H.find(te=>te.textValue===Ee))==null?void 0:Y.ref.current;(function te(ae){O.current=ae,window.clearTimeout(T.current),ae!==""&&(T.current=window.setTimeout(()=>te(""),1e3))})(q),Ue&&setTimeout(()=>Ue.focus())};x.useEffect(()=>()=>window.clearTimeout(T.current),[]),Jv();const L=x.useCallback(W=>{var H,J;return D.current===((H=P.current)==null?void 0:H.side)&&CJ(W,(J=P.current)==null?void 0:J.area)},[]);return c.jsx(cJ,{scope:r,searchRef:O,onItemEnter:x.useCallback(W=>{L(W)&&W.preventDefault()},[L]),onItemLeave:x.useCallback(W=>{var q;L(W)||((q=E.current)==null||q.focus(),_(null))},[L]),onTriggerLeave:x.useCallback(W=>{L(W)&&W.preventDefault()},[L]),pointerGraceTimerRef:j,onPointerGraceIntentChange:x.useCallback(W=>{P.current=W},[]),children:c.jsx(I,M(C({},k),{children:c.jsx(Wp,{asChild:!0,trapped:i,onMountAutoFocus:Ae(a,W=>{var q;W.preventDefault(),(q=E.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:c.jsx(xl,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:c.jsx(R8,M(C({asChild:!0},w),{dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:A,onCurrentTabStopIdChange:_,onEntryFocus:Ae(l,W=>{y.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(Vv,M(C(C({role:"menu","aria-orientation":"vertical","data-state":o6(v.open),"data-radix-menu-content":"",dir:y.dir},b),g),{ref:N,style:C({outline:"none"},g.style),onKeyDown:Ae(g.onKeyDown,W=>{const H=W.target.closest("[data-radix-menu-content]")===W.currentTarget,J=W.ctrlKey||W.altKey||W.metaKey,de=W.key.length===1;H&&(W.key==="Tab"&&W.preventDefault(),!J&&de&&R(W.key));const se=E.current;if(W.target!==se||!JQ.includes(W.key))return;W.preventDefault();const Ue=S().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);L8.includes(W.key)&&Ue.reverse(),wJ(Ue)}),onBlur:Ae(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(T.current),O.current="")}),onPointerMove:Ae(t.onPointerMove,Vh(W=>{const q=W.target,H=F.current!==W.clientX;if(W.currentTarget.contains(q)&&H){const J=W.clientX>F.current?"right":"left";D.current=J,F.current=W.clientX}}))}))}))})})}))})});W8.displayName=Ji;var fJ="MenuGroup",AS=x.forwardRef((t,e)=>{const i=t,{__scopeMenu:r}=i,n=K(i,["__scopeMenu"]);return c.jsx(Ge.div,M(C({role:"group"},n),{ref:e}))});AS.displayName=fJ;var hJ="MenuLabel",H8=x.forwardRef((t,e)=>{const i=t,{__scopeMenu:r}=i,n=K(i,["__scopeMenu"]);return c.jsx(Ge.div,M(C({},n),{ref:e}))});H8.displayName=hJ;var ag="MenuItem",wj="menu.itemSelect",sy=x.forwardRef((t,e)=>{const f=t,{disabled:r=!1,onSelect:n}=f,i=K(f,["disabled","onSelect"]),a=x.useRef(null),o=Kp(ag,t.__scopeMenu),s=bS(ag,t.__scopeMenu),l=ft(e,a),u=x.useRef(!1),d=()=>{const h=a.current;if(!r&&h){const p=new CustomEvent(wj,{bubbles:!0,cancelable:!0});h.addEventListener(wj,m=>n==null?void 0:n(m),{once:!0}),PA(h,p),p.defaultPrevented?u.current=!1:o.onClose()}};return c.jsx(G8,M(C({},i),{ref:l,disabled:r,onClick:Ae(t.onClick,d),onPointerDown:h=>{var p;(p=t.onPointerDown)==null||p.call(t,h),u.current=!0},onPointerUp:Ae(t.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Ae(t.onKeyDown,h=>{const p=s.searchRef.current!=="";r||p&&h.key===" "||iw.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})}))});sy.displayName=ag;var G8=x.forwardRef((t,e)=>{const m=t,{__scopeMenu:r,disabled:n=!1,textValue:i}=m,a=K(m,["__scopeMenu","disabled","textValue"]),o=bS(ag,r),s=B8(r),l=x.useRef(null),u=ft(e,l),[d,f]=x.useState(!1),[h,p]=x.useState("");return x.useEffect(()=>{var v;const g=l.current;g&&p(((v=g.textContent)!=null?v:"").trim())},[a.children]),c.jsx(zh.ItemSlot,{scope:r,disabled:n,textValue:i!=null?i:h,children:c.jsx($8,M(C({asChild:!0},s),{focusable:!n,children:c.jsx(Ge.div,M(C({role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},a),{ref:u,onPointerMove:Ae(t.onPointerMove,Vh(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ae(t.onPointerLeave,Vh(g=>o.onItemLeave(g))),onFocus:Ae(t.onFocus,()=>f(!0)),onBlur:Ae(t.onBlur,()=>f(!1))}))}))})}),pJ="MenuCheckboxItem",q8=x.forwardRef((t,e)=>{const a=t,{checked:r=!1,onCheckedChange:n}=a,i=K(a,["checked","onCheckedChange"]);return c.jsx(Q8,{scope:t.__scopeMenu,checked:r,children:c.jsx(sy,M(C({role:"menuitemcheckbox","aria-checked":og(r)?"mixed":r},i),{ref:e,"data-state":_S(r),onSelect:Ae(i.onSelect,()=>n==null?void 0:n(og(r)?!0:!r),{checkForDefaultPrevented:!1})}))})});q8.displayName=pJ;var K8="MenuRadioGroup",[mJ,gJ]=Sl(K8,{value:void 0,onValueChange:()=>{}}),X8=x.forwardRef((t,e)=>{const o=t,{value:r,onValueChange:n}=o,i=K(o,["value","onValueChange"]),a=Fr(n);return c.jsx(mJ,{scope:t.__scopeMenu,value:r,onValueChange:a,children:c.jsx(AS,M(C({},i),{ref:e}))})});X8.displayName=K8;var Y8="MenuRadioItem",Z8=x.forwardRef((t,e)=>{const o=t,{value:r}=o,n=K(o,["value"]),i=gJ(Y8,t.__scopeMenu),a=r===i.value;return c.jsx(Q8,{scope:t.__scopeMenu,checked:a,children:c.jsx(sy,M(C({role:"menuitemradio","aria-checked":a},n),{ref:e,"data-state":_S(a),onSelect:Ae(n.onSelect,()=>{var s;return(s=i.onValueChange)==null?void 0:s.call(i,r)},{checkForDefaultPrevented:!1})}))})});Z8.displayName=Y8;var SS="MenuItemIndicator",[Q8,vJ]=Sl(SS,{checked:!1}),J8=x.forwardRef((t,e)=>{const o=t,{__scopeMenu:r,forceMount:n}=o,i=K(o,["__scopeMenu","forceMount"]),a=vJ(SS,r);return c.jsx(Dn,{present:n||og(a.checked)||a.checked===!0,children:c.jsx(Ge.span,M(C({},i),{ref:e,"data-state":_S(a.checked)}))})});J8.displayName=SS;var yJ="MenuSeparator",e6=x.forwardRef((t,e)=>{const i=t,{__scopeMenu:r}=i,n=K(i,["__scopeMenu"]);return c.jsx(Ge.div,M(C({role:"separator","aria-orientation":"horizontal"},n),{ref:e}))});e6.displayName=yJ;var xJ="MenuArrow",t6=x.forwardRef((t,e)=>{const a=t,{__scopeMenu:r}=a,n=K(a,["__scopeMenu"]),i=oy(r);return c.jsx(Uv,M(C(C({},i),n),{ref:e}))});t6.displayName=xJ;var bJ="MenuSub",[zBe,r6]=Sl(bJ),Xf="MenuSubTrigger",n6=x.forwardRef((t,e)=>{const r=_l(Xf,t.__scopeMenu),n=Kp(Xf,t.__scopeMenu),i=r6(Xf,t.__scopeMenu),a=bS(Xf,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=a,u={__scopeMenu:t.__scopeMenu},d=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>d,[d]),x.useEffect(()=>{const f=s.current;return()=>{window.clearTimeout(f),l(null)}},[s,l]),c.jsx(yS,M(C({asChild:!0},u),{children:c.jsx(G8,M(C({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":o6(r.open)},t),{ref:Pv(e,i.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Ae(t.onPointerMove,Vh(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:Ae(t.onPointerLeave,Vh(f=>{var p,m;d();const h=(p=r.content)==null?void 0:p.getBoundingClientRect();if(h){const g=(m=r.content)==null?void 0:m.dataset.side,v=g==="right",y=v?-5:5,b=h[v?"left":"right"],w=h[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+y,y:f.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:g}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(t.onKeyDown,f=>{var p;const h=a.searchRef.current!=="";t.disabled||h&&f.key===" "||eJ[n.dir].includes(f.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),f.preventDefault())})}))}))});n6.displayName=Xf;var i6="MenuSubContent",a6=x.forwardRef((t,e)=>{const r=V8(Ji,t.__scopeMenu),d=t,{forceMount:n=r.forceMount}=d,i=K(d,["forceMount"]),a=_l(Ji,t.__scopeMenu),o=Kp(Ji,t.__scopeMenu),s=r6(i6,t.__scopeMenu),l=x.useRef(null),u=ft(e,l);return c.jsx(zh.Provider,{scope:t.__scopeMenu,children:c.jsx(Dn,{present:n||a.open,children:c.jsx(zh.Slot,{scope:t.__scopeMenu,children:c.jsx(wS,M(C({id:s.contentId,"aria-labelledby":s.triggerId},i),{ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ae(t.onFocusOutside,f=>{f.target!==s.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Ae(t.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ae(t.onKeyDown,f=>{var m;const h=f.currentTarget.contains(f.target),p=tJ[o.dir].includes(f.key);h&&p&&(a.onOpenChange(!1),(m=s.trigger)==null||m.focus(),f.preventDefault())})}))})})})});a6.displayName=i6;function o6(t){return t?"open":"closed"}function og(t){return t==="indeterminate"}function _S(t){return og(t)?"indeterminate":t?"checked":"unchecked"}function wJ(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function AJ(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function SJ(t,e,r){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=r?t.indexOf(r):-1;let o=AJ(t,Math.max(a,0));i.length===1&&(o=o.filter(u=>u!==r));const l=o.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return l!==r?l:void 0}function _J(t,e){const{x:r,y:n}=t;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const s=e[a],l=e[o],u=s.x,d=s.y,f=l.x,h=l.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(i=!i)}return i}function CJ(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return _J(r,e)}function Vh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var EJ=z8,NJ=yS,jJ=U8,TJ=W8,PJ=AS,OJ=H8,IJ=sy,DJ=q8,kJ=X8,MJ=Z8,RJ=J8,$J=e6,LJ=t6,FJ=n6,BJ=a6,cy="DropdownMenu",[zJ,VBe]=ai(cy,[F8]),oi=F8(),[VJ,s6]=zJ(cy),c6=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:i,defaultOpen:a,onOpenChange:o,modal:s=!0}=t,l=oi(e),u=x.useRef(null),[d,f]=io({prop:i,defaultProp:a!=null?a:!1,onChange:o,caller:cy});return c.jsx(VJ,{scope:e,triggerId:Qi(),triggerRef:u,contentId:Qi(),open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(h=>!h),[f]),modal:s,children:c.jsx(EJ,M(C({},l),{open:d,onOpenChange:f,dir:n,modal:s,children:r}))})};c6.displayName=cy;var l6="DropdownMenuTrigger",u6=x.forwardRef((t,e)=>{const s=t,{__scopeDropdownMenu:r,disabled:n=!1}=s,i=K(s,["__scopeDropdownMenu","disabled"]),a=s6(l6,r),o=oi(r);return c.jsx(NJ,M(C({asChild:!0},o),{children:c.jsx(Ge.button,M(C({type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n},i),{ref:Pv(e,a.triggerRef),onPointerDown:Ae(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:Ae(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})}))}))});u6.displayName=l6;var UJ="DropdownMenuPortal",d6=t=>{const i=t,{__scopeDropdownMenu:e}=i,r=K(i,["__scopeDropdownMenu"]),n=oi(e);return c.jsx(jJ,C(C({},n),r))};d6.displayName=UJ;var f6="DropdownMenuContent",h6=x.forwardRef((t,e)=>{const s=t,{__scopeDropdownMenu:r}=s,n=K(s,["__scopeDropdownMenu"]),i=s6(f6,r),a=oi(r),o=x.useRef(!1);return c.jsx(TJ,M(C(C({id:i.contentId,"aria-labelledby":i.triggerId},a),n),{ref:e,onCloseAutoFocus:Ae(t.onCloseAutoFocus,l=>{var u;o.current||(u=i.triggerRef.current)==null||u.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ae(t.onInteractOutside,l=>{const u=l.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,f=u.button===2||d;(!i.modal||f)&&(o.current=!0)}),style:M(C({},t.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});h6.displayName=f6;var WJ="DropdownMenuGroup",HJ=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(PJ,M(C(C({},i),n),{ref:e}))});HJ.displayName=WJ;var GJ="DropdownMenuLabel",p6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(OJ,M(C(C({},i),n),{ref:e}))});p6.displayName=GJ;var qJ="DropdownMenuItem",m6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(IJ,M(C(C({},i),n),{ref:e}))});m6.displayName=qJ;var KJ="DropdownMenuCheckboxItem",g6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(DJ,M(C(C({},i),n),{ref:e}))});g6.displayName=KJ;var XJ="DropdownMenuRadioGroup",YJ=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(kJ,M(C(C({},i),n),{ref:e}))});YJ.displayName=XJ;var ZJ="DropdownMenuRadioItem",v6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(MJ,M(C(C({},i),n),{ref:e}))});v6.displayName=ZJ;var QJ="DropdownMenuItemIndicator",y6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(RJ,M(C(C({},i),n),{ref:e}))});y6.displayName=QJ;var JJ="DropdownMenuSeparator",x6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx($J,M(C(C({},i),n),{ref:e}))});x6.displayName=JJ;var eee="DropdownMenuArrow",tee=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(LJ,M(C(C({},i),n),{ref:e}))});tee.displayName=eee;var ree="DropdownMenuSubTrigger",b6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(FJ,M(C(C({},i),n),{ref:e}))});b6.displayName=ree;var nee="DropdownMenuSubContent",w6=x.forwardRef((t,e)=>{const a=t,{__scopeDropdownMenu:r}=a,n=K(a,["__scopeDropdownMenu"]),i=oi(r);return c.jsx(BJ,M(C(C({},i),n),{ref:e,style:M(C({},t.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});w6.displayName=nee;var iee=c6,aee=u6,oee=d6,A6=h6,S6=p6,_6=m6,C6=g6,E6=v6,N6=y6,j6=x6,T6=b6,P6=w6;const Uh=iee,Wh=aee,see=x.forwardRef((a,i)=>{var o=a,{className:t,inset:e,children:r}=o,n=K(o,["className","inset","children"]);return c.jsxs(T6,M(C({ref:i,className:ie("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t)},n),{children:[r,c.jsx(Rv,{className:"ml-auto"})]}))});see.displayName=T6.displayName;const cee=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(P6,C({ref:r,className:ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t)},e))});cee.displayName=P6.displayName;const Hu=x.forwardRef((i,n)=>{var a=i,{className:t,sideOffset:e=4}=a,r=K(a,["className","sideOffset"]);return c.jsx(oee,{children:c.jsx(A6,C({ref:n,sideOffset:e,className:ie("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t)},r))})});Hu.displayName=A6.displayName;const Tr=x.forwardRef((i,n)=>{var a=i,{className:t,inset:e}=a,r=K(a,["className","inset"]);return c.jsx(_6,C({ref:n,className:ie("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t)},r))});Tr.displayName=_6.displayName;const lee=x.forwardRef((a,i)=>{var o=a,{className:t,children:e,checked:r}=o,n=K(o,["className","children","checked"]);return c.jsxs(C6,M(C({ref:i,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r},n),{children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(N6,{children:c.jsx(Er,{className:"h-4 w-4"})})}),e]}))});lee.displayName=C6.displayName;const uee=x.forwardRef((i,n)=>{var a=i,{className:t,children:e}=a,r=K(a,["className","children"]);return c.jsxs(E6,M(C({ref:n,className:ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},r),{children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(N6,{children:c.jsx(Sc,{className:"h-2 w-2 fill-current"})})}),e]}))});uee.displayName=E6.displayName;const O6=x.forwardRef((i,n)=>{var a=i,{className:t,inset:e}=a,r=K(a,["className","inset"]);return c.jsx(S6,C({ref:n,className:ie("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t)},r))});O6.displayName=S6.displayName;const Jl=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(j6,C({ref:r,className:ie("-mx-1 my-1 h-px bg-muted",t)},e))});Jl.displayName=j6.displayName;const dee=Ld("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),ne=x.forwardRef((i,n)=>{var a=i,{className:t,variant:e}=a,r=K(a,["className","variant"]);return c.jsx("div",C({ref:n,className:ie(dee({variant:e}),t)},r))});ne.displayName="Badge";var ly="Popover",[I6,UBe]=ai(ly,[Ks]),Xp=Ks(),[fee,Zs]=I6(ly),D6=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!1}=t,s=Xp(e),l=x.useRef(null),[u,d]=x.useState(!1),[f,h]=io({prop:n,defaultProp:i!=null?i:!1,onChange:a,caller:ly});return c.jsx(zv,M(C({},s),{children:c.jsx(fee,{scope:e,contentId:Qi(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:x.useCallback(()=>d(!0),[]),onCustomAnchorRemove:x.useCallback(()=>d(!1),[]),modal:o,children:r})}))};D6.displayName=ly;var k6="PopoverAnchor",hee=x.forwardRef((t,e)=>{const l=t,{__scopePopover:r}=l,n=K(l,["__scopePopover"]),i=Zs(k6,r),a=Xp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=i;return x.useEffect(()=>(o(),()=>s()),[o,s]),c.jsx(Bp,M(C(C({},a),n),{ref:e}))});hee.displayName=k6;var M6="PopoverTrigger",R6=x.forwardRef((t,e)=>{const l=t,{__scopePopover:r}=l,n=K(l,["__scopePopover"]),i=Zs(M6,r),a=Xp(r),o=ft(e,i.triggerRef),s=c.jsx(Ge.button,M(C({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":z6(i.open)},n),{ref:o,onClick:Ae(t.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?s:c.jsx(Bp,M(C({asChild:!0},a),{children:s}))});R6.displayName=M6;var CS="PopoverPortal",[pee,mee]=I6(CS,{forceMount:void 0}),$6=t=>{const{__scopePopover:e,forceMount:r,children:n,container:i}=t,a=Zs(CS,e);return c.jsx(pee,{scope:e,forceMount:r,children:c.jsx(Dn,{present:r||a.open,children:c.jsx($d,{asChild:!0,container:i,children:n})})})};$6.displayName=CS;var Gu="PopoverContent",L6=x.forwardRef((t,e)=>{const r=mee(Gu,t.__scopePopover),o=t,{forceMount:n=r.forceMount}=o,i=K(o,["forceMount"]),a=Zs(Gu,t.__scopePopover);return c.jsx(Dn,{present:n||a.open,children:a.modal?c.jsx(vee,M(C({},i),{ref:e})):c.jsx(yee,M(C({},i),{ref:e}))})});L6.displayName=Gu;var gee=Ds("PopoverContent.RemoveScroll"),vee=x.forwardRef((t,e)=>{const r=Zs(Gu,t.__scopePopover),n=x.useRef(null),i=ft(e,n),a=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return ey(o)},[]),c.jsx(Hp,{as:gee,allowPinchZoom:!0,children:c.jsx(F6,M(C({},t),{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(t.onCloseAutoFocus,o=>{var s;o.preventDefault(),a.current||(s=r.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Ae(t.onPointerDownOutside,o=>{const s=o.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,u=s.button===2||l;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ae(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})}))})}),yee=x.forwardRef((t,e)=>{const r=Zs(Gu,t.__scopePopover),n=x.useRef(!1),i=x.useRef(!1);return c.jsx(F6,M(C({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,s;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(s=r.triggerRef.current)==null||s.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}}))}),F6=x.forwardRef((t,e)=>{const m=t,{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d}=m,f=K(m,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),h=Zs(Gu,r),p=Xp(r);return Jv(),c.jsx(Wp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:c.jsx(xl,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:c.jsx(Vv,M(C(C({"data-state":z6(h.open),role:"dialog",id:h.contentId},p),f),{ref:e,style:M(C({},f.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),B6="PopoverClose",xee=x.forwardRef((t,e)=>{const a=t,{__scopePopover:r}=a,n=K(a,["__scopePopover"]),i=Zs(B6,r);return c.jsx(Ge.button,M(C({type:"button"},n),{ref:e,onClick:Ae(t.onClick,()=>i.onOpenChange(!1))}))});xee.displayName=B6;var bee="PopoverArrow",wee=x.forwardRef((t,e)=>{const a=t,{__scopePopover:r}=a,n=K(a,["__scopePopover"]),i=Xp(r);return c.jsx(Uv,M(C(C({},i),n),{ref:e}))});wee.displayName=bee;function z6(t){return t?"open":"closed"}var Aee=D6,See=R6,_ee=$6,V6=L6;const Yp=Aee,Zp=See,Hd=x.forwardRef((a,i)=>{var o=a,{className:t,align:e="center",sideOffset:r=4}=o,n=K(o,["className","align","sideOffset"]);return c.jsx(_ee,{children:c.jsx(V6,C({ref:i,align:e,sideOffset:r,className:ie("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t)},n))})});Hd.displayName=V6.displayName;function U6(){const[t,e]=x.useState({version:"1.0.0",buildNumber:parseInt("0"),buildDate:new Date().toISOString(),commitSha:"dev",environment:"development",deploymentId:void 0});return x.useEffect(()=>{e({version:"1.0.0",buildNumber:parseInt("0"),buildDate:new Date().toISOString(),commitSha:"dev",environment:"development",deploymentId:void 0})},[]),t}function Cee(t){try{return new Date(t).toLocaleString("it-IT",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(e){return"Data sconosciuta"}}function Eee(t){switch(t){case"production":return"text-green-600";case"staging":return"text-yellow-600";case"development":case"local":return"text-blue-600";default:return"text-gray-600"}}function Nee(t){switch(t){case"production":return"";case"staging":return"";case"development":case"local":return"";default:return""}}function Aj({variant:t="default",showPopover:e=!0,className:r=""}){const n=U6(),[i,a]=x.useState(!1),o=Eee(n.environment),s=Nee(n.environment);if(t==="compact")return c.jsx(ne,{variant:"secondary",className:"text-xs ".concat(r),children:n.version});if(t==="icon-only")return c.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 ".concat(r),title:"".concat(n.version," - ").concat(n.environment)});const l=c.jsxs(ne,{variant:"outline",className:"\n        cursor-pointer transition-all duration-200 \n        hover:shadow-md hover:scale-105\n        flex items-center gap-1 text-xs\n        ".concat(o," \n        ").concat(r,"\n      "),children:[c.jsx("span",{className:"text-xs",children:s}),c.jsx("span",{className:"font-mono",children:n.version}),n.environment!=="production"&&c.jsx("span",{className:"text-[10px] opacity-70",children:n.environment})]});return e?c.jsxs(Yp,{open:i,onOpenChange:a,children:[c.jsx(Zp,{asChild:!0,children:l}),c.jsx(Hd,{className:"w-80 p-4",align:"end",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[c.jsx(Ob,{className:"h-4 w-4 text-blue-500"}),c.jsx("h4",{className:"font-semibold text-sm",children:"Informazioni Versione"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Versione:"}),c.jsx(ne,{variant:"default",className:"font-mono",children:n.version})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Build:"}),c.jsxs("span",{className:"text-sm font-mono",children:["#",n.buildNumber]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-muted-foreground",children:"Ambiente:"}),c.jsxs(ne,{variant:"secondary",className:"text-xs ".concat(o),children:[s," ",n.environment]})]})]}),c.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(Ca,{className:"h-3 w-3 text-muted-foreground mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:"Build Date:"}),c.jsx("p",{className:"text-xs font-mono",children:Cee(n.buildDate)})]})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(XW,{className:"h-3 w-3 text-muted-foreground mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:"Commit:"}),c.jsx("p",{className:"text-xs font-mono",children:n.commitSha})]})]}),n.deploymentId&&c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(YW,{className:"h-3 w-3 text-muted-foreground mt-0.5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:"Deploy ID:"}),c.jsx("p",{className:"text-xs font-mono break-all",children:n.deploymentId})]})]})]}),c.jsx("div",{className:"pt-2 border-t",children:c.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Family Task Tracker"})})]})})]}):l}function jee({className:t=""}){const e=U6();return c.jsxs("div",{className:"flex items-center gap-1 ".concat(t),children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),c.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:e.version})]})}var uy="Dialog",[W6,H6]=ai(uy),[Tee,Oa]=W6(uy),G6=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=t,s=x.useRef(null),l=x.useRef(null),[u,d]=io({prop:n,defaultProp:i!=null?i:!1,onChange:a,caller:uy});return c.jsx(Tee,{scope:e,triggerRef:s,contentRef:l,contentId:Qi(),titleId:Qi(),descriptionId:Qi(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};G6.displayName=uy;var q6="DialogTrigger",K6=x.forwardRef((t,e)=>{const o=t,{__scopeDialog:r}=o,n=K(o,["__scopeDialog"]),i=Oa(q6,r),a=ft(e,i.triggerRef);return c.jsx(Ge.button,M(C({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":jS(i.open)},n),{ref:a,onClick:Ae(t.onClick,i.onOpenToggle)}))});K6.displayName=q6;var ES="DialogPortal",[Pee,X6]=W6(ES,{forceMount:void 0}),Y6=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:i}=t,a=Oa(ES,e);return c.jsx(Pee,{scope:e,forceMount:r,children:x.Children.map(n,o=>c.jsx(Dn,{present:r||a.open,children:c.jsx($d,{asChild:!0,container:i,children:o})}))})};Y6.displayName=ES;var sg="DialogOverlay",Z6=x.forwardRef((t,e)=>{const r=X6(sg,t.__scopeDialog),o=t,{forceMount:n=r.forceMount}=o,i=K(o,["forceMount"]),a=Oa(sg,t.__scopeDialog);return a.modal?c.jsx(Dn,{present:n||a.open,children:c.jsx(Iee,M(C({},i),{ref:e}))}):null});Z6.displayName=sg;var Oee=Ds("DialogOverlay.RemoveScroll"),Iee=x.forwardRef((t,e)=>{const a=t,{__scopeDialog:r}=a,n=K(a,["__scopeDialog"]),i=Oa(sg,r);return c.jsx(Hp,{as:Oee,allowPinchZoom:!0,shards:[i.contentRef],children:c.jsx(Ge.div,M(C({"data-state":jS(i.open)},n),{ref:e,style:C({pointerEvents:"auto"},n.style)}))})}),ll="DialogContent",Q6=x.forwardRef((t,e)=>{const r=X6(ll,t.__scopeDialog),o=t,{forceMount:n=r.forceMount}=o,i=K(o,["forceMount"]),a=Oa(ll,t.__scopeDialog);return c.jsx(Dn,{present:n||a.open,children:a.modal?c.jsx(Dee,M(C({},i),{ref:e})):c.jsx(kee,M(C({},i),{ref:e}))})});Q6.displayName=ll;var Dee=x.forwardRef((t,e)=>{const r=Oa(ll,t.__scopeDialog),n=x.useRef(null),i=ft(e,r.contentRef,n);return x.useEffect(()=>{const a=n.current;if(a)return ey(a)},[]),c.jsx(J6,M(C({},t),{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ae(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&a.preventDefault()}),onFocusOutside:Ae(t.onFocusOutside,a=>a.preventDefault())}))}),kee=x.forwardRef((t,e)=>{const r=Oa(ll,t.__scopeDialog),n=x.useRef(!1),i=x.useRef(!1);return c.jsx(J6,M(C({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,s;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(n.current||(s=r.triggerRef.current)==null||s.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}}))}),J6=x.forwardRef((t,e)=>{const d=t,{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a}=d,o=K(d,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),s=Oa(ll,r),l=x.useRef(null),u=ft(e,l);return Jv(),c.jsxs(c.Fragment,{children:[c.jsx(Wp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:c.jsx(xl,M(C({role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":jS(s.open)},o),{ref:u,onDismiss:()=>s.onOpenChange(!1)}))}),c.jsxs(c.Fragment,{children:[c.jsx(Ree,{titleId:s.titleId}),c.jsx(Lee,{contentRef:l,descriptionId:s.descriptionId})]})]})}),NS="DialogTitle",e5=x.forwardRef((t,e)=>{const a=t,{__scopeDialog:r}=a,n=K(a,["__scopeDialog"]),i=Oa(NS,r);return c.jsx(Ge.h2,M(C({id:i.titleId},n),{ref:e}))});e5.displayName=NS;var t5="DialogDescription",r5=x.forwardRef((t,e)=>{const a=t,{__scopeDialog:r}=a,n=K(a,["__scopeDialog"]),i=Oa(t5,r);return c.jsx(Ge.p,M(C({id:i.descriptionId},n),{ref:e}))});r5.displayName=t5;var n5="DialogClose",i5=x.forwardRef((t,e)=>{const a=t,{__scopeDialog:r}=a,n=K(a,["__scopeDialog"]),i=Oa(n5,r);return c.jsx(Ge.button,M(C({type:"button"},n),{ref:e,onClick:Ae(t.onClick,()=>i.onOpenChange(!1))}))});i5.displayName=n5;function jS(t){return t?"open":"closed"}var a5="DialogTitleWarning",[Mee,o5]=XU(a5,{contentName:ll,titleName:NS,docsSlug:"dialog"}),Ree=({titleId:t})=>{const e=o5(a5),r="`".concat(e.contentName,"` requires a `").concat(e.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(e.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(e.docsSlug);return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},$ee="DialogDescriptionWarning",Lee=({contentRef:t,descriptionId:e})=>{const r=o5($ee),n="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(r.contentName,"}.");return x.useEffect(()=>{var a;const i=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},dy=G6,fy=K6,hy=Y6,Gd=Z6,qd=Q6,Kd=e5,Xd=r5,Qp=i5;const Fee=dy,Bee=fy,zee=hy,s5=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Gd,M(C({className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},e),{ref:r}))});s5.displayName=Gd.displayName;const Vee=Ld("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),c5=x.forwardRef((a,i)=>{var o=a,{side:t="right",className:e,children:r}=o,n=K(o,["side","className","children"]);return c.jsxs(zee,{children:[c.jsx(s5,{}),c.jsxs(qd,M(C({ref:i,className:ie(Vee({side:t}),e)},n),{children:[r,c.jsxs(Qp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(oo,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});c5.displayName=qd.displayName;const l5=r=>{var n=r,{className:t}=n,e=K(n,["className"]);return c.jsx("div",C({className:ie("flex flex-col space-y-2 text-center sm:text-left",t)},e))};l5.displayName="SheetHeader";const u5=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Kd,C({ref:r,className:ie("text-lg font-semibold text-foreground",t)},e))});u5.displayName=Kd.displayName;const d5=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Xd,C({ref:r,className:ie("text-sm text-muted-foreground",t)},e))});d5.displayName=Xd.displayName;function Uee(t,e){return x.useReducer((r,n)=>{const i=e[r][n];return i!=null?i:r},t)}var TS="ScrollArea",[f5,WBe]=ai(TS),[Wee,ia]=f5(TS),h5=x.forwardRef((t,e)=>{const j=t,{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:a=600}=j,o=K(j,["__scopeScrollArea","type","dir","scrollHideDelay"]),[s,l]=x.useState(null),[u,d]=x.useState(null),[f,h]=x.useState(null),[p,m]=x.useState(null),[g,v]=x.useState(null),[y,b]=x.useState(0),[w,S]=x.useState(0),[A,_]=x.useState(!1),[E,N]=x.useState(!1),T=ft(e,P=>l(P)),O=Up(i);return c.jsx(Wee,{scope:r,type:n,dir:O,scrollHideDelay:a,scrollArea:s,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:A,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:N,onCornerWidthChange:b,onCornerHeightChange:S,children:c.jsx(Ge.div,M(C({dir:O},o),{ref:T,style:C({position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px"},t.style)}))})});h5.displayName=TS;var p5="ScrollAreaViewport",m5=x.forwardRef((t,e)=>{const u=t,{__scopeScrollArea:r,children:n,nonce:i}=u,a=K(u,["__scopeScrollArea","children","nonce"]),o=ia(p5,r),s=x.useRef(null),l=ft(e,s,o.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),c.jsx(Ge.div,M(C({"data-radix-scroll-area-viewport":""},a),{ref:l,style:C({overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden"},t.style),children:c.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})}))]})});m5.displayName=p5;var mo="ScrollAreaScrollbar",PS=x.forwardRef((t,e)=>{const l=t,{forceMount:r}=l,n=K(l,["forceMount"]),i=ia(mo,t.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,s=t.orientation==="horizontal";return x.useEffect(()=>(s?a(!0):o(!0),()=>{s?a(!1):o(!1)}),[s,a,o]),i.type==="hover"?c.jsx(Hee,M(C({},n),{ref:e,forceMount:r})):i.type==="scroll"?c.jsx(Gee,M(C({},n),{ref:e,forceMount:r})):i.type==="auto"?c.jsx(g5,M(C({},n),{ref:e,forceMount:r})):i.type==="always"?c.jsx(OS,M(C({},n),{ref:e})):null});PS.displayName=mo;var Hee=x.forwardRef((t,e)=>{const s=t,{forceMount:r}=s,n=K(s,["forceMount"]),i=ia(mo,t.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const l=i.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",f)}}},[i.scrollArea,i.scrollHideDelay]),c.jsx(Dn,{present:r||a,children:c.jsx(g5,M(C({"data-state":a?"visible":"hidden"},n),{ref:e}))})}),Gee=x.forwardRef((t,e)=>{const u=t,{forceMount:r}=u,n=K(u,["forceMount"]),i=ia(mo,t.__scopeScrollArea),a=t.orientation==="horizontal",o=my(()=>l("SCROLL_END"),100),[s,l]=Uee("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(s==="idle"){const d=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[s,i.scrollHideDelay,l]),x.useEffect(()=>{const d=i.viewport,f=a?"scrollLeft":"scrollTop";if(d){let h=d[f];const p=()=>{const m=d[f];h!==m&&(l("SCROLL"),o()),h=m};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[i.viewport,a,l,o]),c.jsx(Dn,{present:r||s!=="hidden",children:c.jsx(OS,M(C({"data-state":s==="hidden"?"hidden":"visible"},n),{ref:e,onPointerEnter:Ae(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ae(t.onPointerLeave,()=>l("POINTER_LEAVE"))}))})}),g5=x.forwardRef((t,e)=>{const r=ia(mo,t.__scopeScrollArea),u=t,{forceMount:n}=u,i=K(u,["forceMount"]),[a,o]=x.useState(!1),s=t.orientation==="horizontal",l=my(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;o(s?d:f)}},10);return qu(r.viewport,l),qu(r.content,l),c.jsx(Dn,{present:n||a,children:c.jsx(OS,M(C({"data-state":a?"visible":"hidden"},i),{ref:e}))})}),OS=x.forwardRef((t,e)=>{const h=t,{orientation:r="vertical"}=h,n=K(h,["orientation"]),i=ia(mo,t.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[s,l]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=w5(s.viewport,s.content),d=M(C({},n),{sizes:s,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p});function f(p,m){return Qee(p,o.current,s,m)}return r==="horizontal"?c.jsx(qee,M(C({},d),{ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollLeft,m=Sj(p,s,i.dir);a.current.style.transform="translate3d(".concat(m,"px, 0, 0)")}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=f(p,i.dir))}})):r==="vertical"?c.jsx(Kee,M(C({},d),{ref:e,onThumbPositionChange:()=>{if(i.viewport&&a.current){const p=i.viewport.scrollTop,m=Sj(p,s);a.current.style.transform="translate3d(0, ".concat(m,"px, 0)")}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=f(p))}})):null}),qee=x.forwardRef((t,e)=>{const d=t,{sizes:r,onSizesChange:n}=d,i=K(d,["sizes","onSizesChange"]),a=ia(mo,t.__scopeScrollArea),[o,s]=x.useState(),l=x.useRef(null),u=ft(e,l,a.onScrollbarXChange);return x.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),c.jsx(y5,M(C({"data-orientation":"horizontal"},i),{ref:u,sizes:r,style:C({bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":py(r)+"px"},t.style),onThumbPointerDown:f=>t.onThumbPointerDown(f.x),onDragScroll:f=>t.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(a.viewport){const p=a.viewport.scrollLeft+f.deltaX;t.onWheelScroll(p),S5(p,h)&&f.preventDefault()}},onResize:()=>{l.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:lg(o.paddingLeft),paddingEnd:lg(o.paddingRight)}})}}))}),Kee=x.forwardRef((t,e)=>{const d=t,{sizes:r,onSizesChange:n}=d,i=K(d,["sizes","onSizesChange"]),a=ia(mo,t.__scopeScrollArea),[o,s]=x.useState(),l=x.useRef(null),u=ft(e,l,a.onScrollbarYChange);return x.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),c.jsx(y5,M(C({"data-orientation":"vertical"},i),{ref:u,sizes:r,style:C({top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":py(r)+"px"},t.style),onThumbPointerDown:f=>t.onThumbPointerDown(f.y),onDragScroll:f=>t.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(a.viewport){const p=a.viewport.scrollTop+f.deltaY;t.onWheelScroll(p),S5(p,h)&&f.preventDefault()}},onResize:()=>{l.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:lg(o.paddingTop),paddingEnd:lg(o.paddingBottom)}})}}))}),[Xee,v5]=f5(mo),y5=x.forwardRef((t,e)=>{const T=t,{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:f}=T,h=K(T,["__scopeScrollArea","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize"]),p=ia(mo,r),[m,g]=x.useState(null),v=ft(e,O=>g(O)),y=x.useRef(null),b=x.useRef(""),w=p.viewport,S=n.content-n.viewport,A=Fr(d),_=Fr(l),E=my(f,10);function N(O){if(y.current){const j=O.clientX-y.current.left,P=O.clientY-y.current.top;u({x:j,y:P})}}return x.useEffect(()=>{const O=j=>{const P=j.target;(m==null?void 0:m.contains(P))&&A(j,S)};return document.addEventListener("wheel",O,{passive:!1}),()=>document.removeEventListener("wheel",O,{passive:!1})},[w,m,S,A]),x.useEffect(_,[n,_]),qu(m,E),qu(p.content,E),c.jsx(Xee,{scope:r,scrollbar:m,hasThumb:i,onThumbChange:Fr(a),onThumbPointerUp:Fr(o),onThumbPositionChange:_,onThumbPointerDown:Fr(s),children:c.jsx(Ge.div,M(C({},h),{ref:v,style:C({position:"absolute"},h.style),onPointerDown:Ae(t.onPointerDown,O=>{O.button===0&&(O.target.setPointerCapture(O.pointerId),y.current=m.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(O))}),onPointerMove:Ae(t.onPointerMove,N),onPointerUp:Ae(t.onPointerUp,O=>{const j=O.target;j.hasPointerCapture(O.pointerId)&&j.releasePointerCapture(O.pointerId),document.body.style.webkitUserSelect=b.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})}))})}),cg="ScrollAreaThumb",x5=x.forwardRef((t,e)=>{const a=t,{forceMount:r}=a,n=K(a,["forceMount"]),i=v5(cg,t.__scopeScrollArea);return c.jsx(Dn,{present:r||i.hasThumb,children:c.jsx(Yee,C({ref:e},n))})}),Yee=x.forwardRef((t,e)=>{const f=t,{__scopeScrollArea:r,style:n}=f,i=K(f,["__scopeScrollArea","style"]),a=ia(cg,r),o=v5(cg,r),{onThumbPositionChange:s}=o,l=ft(e,h=>o.onThumbChange(h)),u=x.useRef(void 0),d=my(()=>{u.current&&(u.current(),u.current=void 0)},100);return x.useEffect(()=>{const h=a.viewport;if(h){const p=()=>{if(d(),!u.current){const m=Jee(h,s);u.current=m,s()}};return s(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[a.viewport,d,s]),c.jsx(Ge.div,M(C({"data-state":o.hasThumb?"visible":"hidden"},i),{ref:l,style:C({width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)"},n),onPointerDownCapture:Ae(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),g=h.clientX-m.left,v=h.clientY-m.top;o.onThumbPointerDown({x:g,y:v})}),onPointerUp:Ae(t.onPointerUp,o.onThumbPointerUp)}))});x5.displayName=cg;var IS="ScrollAreaCorner",b5=x.forwardRef((t,e)=>{const r=ia(IS,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?c.jsx(Zee,M(C({},t),{ref:e})):null});b5.displayName=IS;var Zee=x.forwardRef((t,e)=>{const d=t,{__scopeScrollArea:r}=d,n=K(d,["__scopeScrollArea"]),i=ia(IS,r),[a,o]=x.useState(0),[s,l]=x.useState(0),u=!!(a&&s);return qu(i.scrollbarX,()=>{var h;const f=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(f),l(f)}),qu(i.scrollbarY,()=>{var h;const f=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),u?c.jsx(Ge.div,M(C({},n),{ref:e,style:C({width:a,height:s,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0},t.style)})):null});function lg(t){return t?parseInt(t,10):0}function w5(t,e){const r=t/e;return isNaN(r)?0:r}function py(t){const e=w5(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function Qee(t,e,r,n="ltr"){const i=py(r),a=i/2,o=e||a,s=i-o,l=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-s,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return A5([l,u],f)(t)}function Sj(t,e,r="ltr"){const n=py(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-i,o=e.content-e.viewport,s=a-n,l=r==="ltr"?[0,o]:[o*-1,0],u=Yb(t,l);return A5([0,o],[0,s])(u)}function A5(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function S5(t,e){return t>0&&t<e}var Jee=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function i(){const a={left:t.scrollLeft,top:t.scrollTop},o=r.left!==a.left,s=r.top!==a.top;(o||s)&&e(),r=a,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function my(t,e){const r=Fr(t),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function qu(t,e){const r=Fr(e);bn(()=>{let n=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(t),()=>{window.cancelAnimationFrame(n),i.unobserve(t)}}},[t,r])}var _5=h5,ete=m5,tte=b5;const DS=$.forwardRef((i,n)=>{var a=i,{className:t,children:e}=a,r=K(a,["className","children"]);return c.jsxs(_5,M(C({ref:n,className:ie("relative overflow-hidden",t)},r),{children:[c.jsx(ete,{className:"h-full w-full rounded-[inherit]",children:e}),c.jsx(C5,{}),c.jsx(tte,{})]}))});DS.displayName=_5.displayName;const C5=$.forwardRef((i,n)=>{var a=i,{className:t,orientation:e="vertical"}=a,r=K(a,["className","orientation"]);return c.jsx(PS,M(C({ref:n,orientation:e,className:ie("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t)},r),{children:c.jsx(x5,{className:"relative flex-1 rounded-full bg-border"})}))});C5.displayName=PS.displayName;class Ku{constructor(e,r,n,i=new Date,a,o="#81B29A",s,l=0,u){this.id=e,this.name=r,this.createdBy=n,this.createdAt=i,this.description=a,this.color=o,this.icon=s,this.order=l,this.updatedAt=u}static fromFirestore(e){try{const r=n=>{if(!n)return new Date;if(n instanceof Date)return n;if(typeof n=="object"&&n.toDate)return n.toDate();const i=new Date(n);return isNaN(i.getTime())?new Date:i};return new Ku(e.id,e.name||"Categoria Senza Nome",e.createdBy||"Unknown",r(e.createdAt),e.description,e.color||"#81B29A",e.icon,e.order||0,e.updatedAt?r(e.updatedAt):void 0)}catch(r){return console.error("Error in CategoryFood.fromFirestore:",r,e),new Ku(e.id||"unknown",e.name||"Categoria Senza Nome",e.createdBy||"Unknown")}}toFirestore(){const e={name:this.name,createdBy:this.createdBy,createdAt:this.createdAt,description:this.description,color:this.color,icon:this.icon,order:this.order,updatedAt:new Date};return gi(e)}validate(){const e=[];return(!this.name||this.name.trim().length===0)&&e.push("Nome categoria  obbligatorio"),this.name&&this.name.length>50&&e.push("Nome categoria non pu superare 50 caratteri"),(!this.createdBy||this.createdBy.trim().length===0)&&e.push("Campo createdBy  obbligatorio"),this.description&&this.description.length>200&&e.push("Descrizione non pu superare 200 caratteri"),{isValid:e.length===0,errors:e}}}class Xu{constructor(e,r,n,i=new Date,a,o,s,l,u,d="#E07A5F",f=!0,h){this.id=e,this.name=r,this.createdBy=n,this.createdAt=i,this.address=a,this.city=o,this.phone=s,this.website=l,this.notes=u,this.color=d,this.isActive=f,this.updatedAt=h}static fromFirestore(e){try{const r=n=>{if(!n)return new Date;if(n instanceof Date)return n;if(typeof n=="object"&&n.toDate)return n.toDate();const i=new Date(n);return isNaN(i.getTime())?new Date:i};return new Xu(e.id,e.name||"Supermercato Senza Nome",e.createdBy||"Unknown",r(e.createdAt),e.address,e.city,e.phone,e.website,e.notes,e.color||"#E07A5F",e.isActive!==void 0?e.isActive:!0,e.updatedAt?r(e.updatedAt):void 0)}catch(r){return console.error("Error in Supermarket.fromFirestore:",r,e),new Xu(e.id||"unknown",e.name||"Supermercato Senza Nome",e.createdBy||"Unknown")}}toFirestore(){const e={name:this.name,createdBy:this.createdBy,createdAt:this.createdAt,address:this.address,city:this.city,phone:this.phone,website:this.website,notes:this.notes,color:this.color,isActive:this.isActive,updatedAt:new Date};return gi(e)}validate(){const e=[];return(!this.name||this.name.trim().length===0)&&e.push("Nome supermercato  obbligatorio"),this.name&&this.name.length>100&&e.push("Nome supermercato non pu superare 100 caratteri"),(!this.createdBy||this.createdBy.trim().length===0)&&e.push("Campo createdBy  obbligatorio"),this.website&&!this.website.startsWith("http")&&e.push("Website deve iniziare con http:// o https://"),{isValid:e.length===0,errors:e}}}class ul{constructor(e,r,n=[],i,a=new Date,o,s=!1,l=!1,u,d,f,h,p=[],m,g){this.id=e,this.title=r,this.items=n,this.createdBy=i,this.createdAt=a,this.supermarketId=o,this.isPublic=s,this.isCompleted=l,this.completedAt=u,this.notes=d,this.estimatedTotal=f,this.actualTotal=h,this.sharedWith=p,this.updatedAt=m,this.isDeleted=g}static fromFirestore(e){try{const r=i=>{if(!i)return new Date;if(i instanceof Date)return i;if(typeof i=="object"&&i.toDate)return i.toDate();const a=new Date(i);return isNaN(a.getTime())?new Date:a},n=i=>{let a=[];if(Array.isArray(i))a=i;else if(i&&typeof i=="object")a=Object.values(i);else return[];return a.map((o,s)=>({id:o.id||"item_".concat(s,"_").concat(Date.now()),text:o.text||"",completed:!!o.completed,category:o.category||"Altro",assignedAutomatically:!!o.assignedAutomatically,createdAt:r(o.createdAt),completedAt:o.completedAt?r(o.completedAt):void 0,completedBy:o.completedBy,isDeleted:o.isDeleted}))};return new ul(e.id,e.title||"Spesa del ".concat(new Date().toLocaleDateString("it-IT")),n(e.items),e.createdBy||"Unknown",r(e.createdAt),e.supermarketId,e.isPublic||!1,e.isCompleted||!1,e.completedAt?r(e.completedAt):void 0,e.notes,e.estimatedTotal,e.actualTotal,e.sharedWith||[],e.updatedAt?r(e.updatedAt):void 0,e.isDeleted||!1)}catch(r){return console.error("Error in ShoppingFood.fromFirestore:",r,e),new ul(e.id||"unknown",e.title||"Spesa del ".concat(new Date().toLocaleDateString("it-IT")),[],e.createdBy||"Unknown")}}toFirestore(){const e={title:this.title,items:this.items,createdBy:this.createdBy,createdAt:this.createdAt,supermarketId:this.supermarketId,isPublic:this.isPublic,isCompleted:this.isCompleted,completedAt:this.completedAt,notes:this.notes,estimatedTotal:this.estimatedTotal,actualTotal:this.actualTotal,sharedWith:this.sharedWith,updatedAt:new Date,isDeleted:this.isDeleted};return gi(e)}addItem(e,r="Altro",n=!1){const i=e.trim().charAt(0).toUpperCase()+e.trim().slice(1).toLowerCase(),a={id:"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),text:i,completed:!1,category:r,assignedAutomatically:n,createdAt:new Date,completedAt:void 0,completedBy:void 0};return this.items.push(a),this.updatedAt=new Date,a}removeItem(e){const r=this.items.length;return this.items=this.items.filter(n=>n.id!==e),this.items.length<r?(this.updatedAt=new Date,!0):!1}toggleItemCompleted(e,r){const n=this.items.find(i=>i.id===e);return n?(n.completed=!n.completed,n.completedAt=n.completed?new Date:void 0,n.completedBy=n.completed?r:void 0,this.updatedAt=new Date,!0):!1}updateItemText(e,r){const n=this.items.find(a=>a.id===e);if(!n)return!1;const i=r.trim().charAt(0).toUpperCase()+r.trim().slice(1).toLowerCase();return n.text=i,this.updatedAt=new Date,!0}updateItemCategory(e,r){const n=this.items.find(i=>i.id===e);return n?(n.category=r,this.updatedAt=new Date,!0):!1}getItemsByCategory(){const e=new Map;return this.items.forEach(r=>{const n=r.category||"Altro";e.has(n)||e.set(n,[]),e.get(n).push(r)}),e}getCompletionStats(){const e=this.items.length,r=this.items.filter(n=>n.completed).length;return{completed:r,total:e,percentage:e>0?Math.round(r/e*100):0}}areAllItemsCompleted(){return this.items.length>0&&this.items.every(e=>e.completed)}toggleAllItemsCompleted(e,r){this.items.forEach(n=>{n.completed=e,n.completedAt=e?new Date:void 0,n.completedBy=e?r:void 0}),this.isCompleted=e,this.completedAt=e?new Date:void 0,this.updatedAt=new Date}getCategoryStats(){const e=new Map;return this.items.forEach(r=>{const n=r.category||"Altro";e.set(n,(e.get(n)||0)+1)}),e}getItemsByCompletionStatus(e){return this.items.filter(r=>r.completed===e)}searchItems(e){const r=e.toLowerCase().trim();return r?this.items.filter(n=>n.text.toLowerCase().includes(r)||n.category&&n.category.toLowerCase().includes(r)):this.items}sortItemsByDate(e=!1){return[...this.items].sort((r,n)=>{const i=r.createdAt.getTime(),a=n.createdAt.getTime();return e?i-a:a-i})}duplicateItem(e){const r=this.items.find(n=>n.id===e);return r?this.addItem("".concat(r.text," (copia)"),r.category,r.assignedAutomatically):null}moveItemToCategory(e,r){return this.updateItemCategory(e,r)}addMultipleItems(e,r="Altro"){const n=e.split("\n").map(a=>a.trim()).filter(a=>a.length>0),i=[];return n.forEach(a=>{const o=this.addItem(a,r);i.push(o)}),i}getSummary(){const e=this.getCompletionStats(),r=this.getCategoryStats().size;return'Lista "'.concat(this.title,'": ').concat(e.completed,"/").concat(e.total," completati (").concat(e.percentage,"%) in ").concat(r," categorie")}clearCompletedItems(){const e=this.items.filter(r=>r.completed);return this.items=this.items.filter(r=>!r.completed),this.updatedAt=new Date,e}getItemsCount(){const e=this.items.length,r=this.items.filter(i=>i.completed).length,n=e-r;return{total:e,completed:r,pending:n}}getItemsSortedByCategoryAndDate(){const e=this.getItemsByCategory();for(const[r,n]of e.entries())e.set(r,n.sort((i,a)=>new Date(a.createdAt).getTime()-new Date(i.createdAt).getTime()));return e}hasItemWithText(e){return this.items.some(r=>r.text.toLowerCase().trim()===e.toLowerCase().trim())}updateTitle(e){this.title=e.trim(),this.updatedAt=new Date}updateNotes(e){this.notes=e.trim()||void 0,this.updatedAt=new Date}setSupermarket(e){this.supermarketId=e,this.updatedAt=new Date}togglePublic(){this.isPublic=!this.isPublic,this.updatedAt=new Date}validate(){const e=[];return(!this.title||this.title.trim().length===0)&&e.push("Titolo lista spesa  obbligatorio"),(!this.createdBy||this.createdBy.trim().length===0)&&e.push("Campo createdBy  obbligatorio"),this.estimatedTotal!==void 0&&this.estimatedTotal<0&&e.push("Total stimato non pu essere negativo"),this.actualTotal!==void 0&&this.actualTotal<0&&e.push("Total effettivo non pu essere negativo"),this.items.forEach((r,n)=>{(!r.text||r.text.trim().length===0)&&e.push("Item ".concat(n+1,": testo  obbligatorio"))}),{isValid:e.length===0,errors:e}}}class As{constructor(e,r,n,i,a,o=new Date,s=new Date,l=!0,u=!0,d=!1,f,h="personal",p=!1,m,g,v,y=0,b="medium",w,S,A,_){this.id=e,this.title=r,this.message=n,this.scheduledTime=i,this.createdBy=a,this.createdAt=o,this.updatedAt=s,this.isActive=l,this.isPublic=u,this.isRecurring=d,this.recurrencePattern=f,this.reminderType=h,this.notificationSent=p,this.notificationSentAt=m,this.cloudTaskId=g,this.lastTriggered=v,this.triggerCount=y,this.priority=b,this.tags=w,this.notes=S,this.snoozeUntil=A,this.completedAt=_,this.validate&&this.validate()}validate(){var n,i,a;const e=[];(n=this.title)!=null&&n.trim()||e.push("Il titolo  obbligatorio"),(i=this.message)!=null&&i.trim()||e.push("Il messaggio  obbligatorio"),(a=this.createdBy)!=null&&a.trim()||e.push("Il creatore  obbligatorio"),(!this.scheduledTime||!(this.scheduledTime instanceof Date))&&e.push("L'orario programmato  obbligatorio e deve essere una data valida"),this.scheduledTime&&this.scheduledTime<=new Date&&this.isActive&&e.push("L'orario programmato deve essere nel futuro per promemoria attivi"),this.isRecurring&&!this.recurrencePattern&&e.push("Il pattern di ricorrenza  richiesto per promemoria ricorrenti"),this.snoozeUntil&&this.snoozeUntil<=new Date&&e.push("La data di posticipo deve essere nel futuro");const r={isValid:e.length===0,errors:e};if(!r.isValid)throw new xt("Validazione fallita: ".concat(e.join(", ")),e);return r}static fromFirestore(e){try{const r=i=>{if(!i)return new Date;if(i instanceof Date)return i;if(typeof i=="object"&&i.toDate)return i.toDate();const a=new Date(i);return isNaN(a.getTime())?new Date:a},n=Object.create(As.prototype);n.id=e.id,n.title=e.title||"Promemoria senza titolo",n.message=e.message||"",n.scheduledTime=r(e.scheduledTime),n.createdBy=e.createdBy||"Unknown",n.createdAt=r(e.createdAt),n.updatedAt=r(e.updatedAt),n.isActive=e.isActive!==void 0?e.isActive:!0,n.isPublic=e.isPublic!==void 0?e.isPublic:!0,n.isRecurring=e.isRecurring||!1,n.reminderType=e.reminderType||"personal",n.notificationSent=e.notificationSent||!1,n.triggerCount=e.triggerCount||0,n.priority=e.priority||"medium",n.notificationSentAt=e.notificationSentAt?r(e.notificationSentAt):void 0,n.cloudTaskId=e.cloudTaskId,n.lastTriggered=e.lastTriggered?r(e.lastTriggered):void 0,n.tags=Array.isArray(e.tags)?e.tags:void 0,n.notes=e.notes,n.snoozeUntil=e.snoozeUntil?r(e.snoozeUntil):void 0,n.completedAt=e.completedAt?r(e.completedAt):void 0,e.recurrencePattern&&typeof e.recurrencePattern=="object"&&(n.recurrencePattern={type:e.recurrencePattern.type||"daily",interval:e.recurrencePattern.interval||1,daysOfWeek:Array.isArray(e.recurrencePattern.daysOfWeek)?e.recurrencePattern.daysOfWeek:void 0,dayOfMonth:e.recurrencePattern.dayOfMonth,endDate:e.recurrencePattern.endDate?r(e.recurrencePattern.endDate):void 0,maxOccurrences:e.recurrencePattern.maxOccurrences});try{n.validate()}catch(i){console.warn("Validation warning for existing reminder:",e.id,i)}return n}catch(r){console.error("Error in fromFirestore for Reminder:",r,e);const n=Object.create(As.prototype);return n.id=e.id||"unknown",n.title=e.title||"Promemoria senza titolo",n.message=e.message||"Messaggio non disponibile",n.scheduledTime=new Date(Date.now()+36e5),n.createdBy=e.createdBy||"Unknown",n.createdAt=new Date,n.updatedAt=new Date,n.isActive=!0,n.isPublic=!0,n.isRecurring=!1,n.reminderType="personal",n.notificationSent=!1,n.triggerCount=0,n.priority="medium",n}}toFirestore(){const e={title:this.title,message:this.message,scheduledTime:this.scheduledTime,createdBy:this.createdBy,createdAt:this.createdAt,updatedAt:new Date,isActive:this.isActive,isPublic:this.isPublic,isRecurring:this.isRecurring,recurrencePattern:this.recurrencePattern,reminderType:this.reminderType,notificationSent:this.notificationSent,notificationSentAt:this.notificationSentAt,cloudTaskId:this.cloudTaskId,lastTriggered:this.lastTriggered,triggerCount:this.triggerCount,priority:this.priority,tags:this.tags,notes:this.notes,snoozeUntil:this.snoozeUntil,completedAt:this.completedAt};return gi(e)}activate(){this.isActive=!0,this.updatedAt=new Date}deactivate(){this.isActive=!1,this.updatedAt=new Date}complete(){this.completedAt=new Date,this.isActive=!1,this.updatedAt=new Date}snooze(e){this.snoozeUntil=new Date(this.scheduledTime),this.snoozeUntil.setMinutes(this.snoozeUntil.getMinutes()+e),this.updatedAt=new Date}markAsTriggered(){this.lastTriggered=new Date,this.triggerCount+=1,this.notificationSent=!0,this.notificationSentAt=new Date,this.updatedAt=new Date}updateScheduledTime(e){if(e<=new Date)throw new Error("Il nuovo orario deve essere nel futuro");this.scheduledTime=e,this.notificationSent=!1,this.notificationSentAt=void 0,this.updatedAt=new Date,this.validate()}updateTitle(e){this.title=e,this.updatedAt=new Date,this.validate()}updateMessage(e){this.message=e,this.updatedAt=new Date,this.validate()}updatePriority(e){this.priority=e,this.updatedAt=new Date}togglePublic(){this.isPublic=!this.isPublic,this.updatedAt=new Date}addTag(e){this.tags||(this.tags=[]),this.tags.includes(e)||(this.tags.push(e),this.updatedAt=new Date)}removeTag(e){this.tags&&(this.tags=this.tags.filter(r=>r!==e),this.updatedAt=new Date)}setCloudTaskId(e){this.cloudTaskId=e,this.updatedAt=new Date}isOverdue(){return this.scheduledTime<new Date&&this.isActive&&!this.isCompleted()}isDue(e=5){const r=new Date;return Math.abs(this.scheduledTime.getTime()-r.getTime())<=e*60*1e3}isUpcoming(e=24){const r=new Date,n=new Date(r.getTime()+e*60*60*1e3);return this.scheduledTime>r&&this.scheduledTime<=n}isSnoozed(){return this.snoozeUntil?this.snoozeUntil>new Date:!1}isCompleted(){return this.completedAt!==void 0}isPersonal(){return this.reminderType==="personal"||!this.isPublic}isFamily(){return this.reminderType==="family"&&this.isPublic}isOwnedBy(e){return this.createdBy===e}hasCloudTask(){return this.cloudTaskId!==void 0}needsCloudTask(){return this.isActive&&!this.hasCloudTask()&&this.scheduledTime>new Date}getNextOccurrence(){if(!this.isRecurring||!this.recurrencePattern)return null;const e=this.recurrencePattern,r=this.lastTriggered||this.createdAt;let n=new Date(r);switch(e.type){case"daily":n.setDate(n.getDate()+e.interval);break;case"weekly":n.setDate(n.getDate()+7*e.interval);break;case"monthly":n.setMonth(n.getMonth()+e.interval),e.dayOfMonth&&n.setDate(e.dayOfMonth);break;case"yearly":n.setFullYear(n.getFullYear()+e.interval);break;case"custom":if(e.daysOfWeek&&e.daysOfWeek.length>0){const i=n.getDay(),a=e.daysOfWeek.sort((s,l)=>s-l);let o=a.find(s=>s>i);o?n.setDate(n.getDate()+(o-i)):(o=a[0],n.setDate(n.getDate()+(7-i+o)))}break}return e.endDate&&n>e.endDate||e.maxOccurrences&&this.triggerCount>=e.maxOccurrences?null:n}shouldCreateNextOccurrence(){return!this.isRecurring||!this.notificationSent?!1:this.getNextOccurrence()!==null}createNextOccurrence(){const e=this.getNextOccurrence();return e?new As("".concat(this.id,"_").concat(Date.now()),this.title,this.message,e,this.createdBy,new Date,new Date,!0,this.isPublic,this.isRecurring,this.recurrencePattern,this.reminderType,!1,void 0,void 0,void 0,0,this.priority,this.tags?[...this.tags]:void 0,this.notes):null}getMinutesUntilDue(){const e=new Date;return Math.floor((this.scheduledTime.getTime()-e.getTime())/(1e3*60))}getAge(){return Math.floor((new Date().getTime()-this.createdAt.getTime())/(1e3*60*60*24))}getFormattedScheduledTime(){return this.scheduledTime.toLocaleString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}getSummary(){const e=[this.title];return this.priority==="high"&&e.push(""),this.priority==="low"&&e.push(""),this.isRecurring&&e.push(""),this.isOverdue()&&e.push(""),this.isCompleted()&&e.push(""),this.isSnoozed()&&e.push(""),e.join(" ")}clone(e){return new As("".concat(this.id,"_copy"),this.title,this.message,e||new Date(this.scheduledTime.getTime()+24*60*60*1e3),this.createdBy,new Date,new Date,!0,this.isPublic,!1,void 0,this.reminderType,!1,void 0,void 0,void 0,0,this.priority,this.tags?[...this.tags]:void 0,this.notes)}toJSON(){return{id:this.id,title:this.title,message:this.message,scheduledTime:this.scheduledTime.toISOString(),createdBy:this.createdBy,createdAt:this.createdAt.toISOString(),updatedAt:this.updatedAt.toISOString(),isActive:this.isActive,isPublic:this.isPublic,isRecurring:this.isRecurring,reminderType:this.reminderType,notificationSent:this.notificationSent,priority:this.priority,isOverdue:this.isOverdue(),isDue:this.isDue(),isUpcoming:this.isUpcoming(),isSnoozed:this.isSnoozed(),isCompleted:this.isCompleted(),minutesUntilDue:this.getMinutesUntilDue(),formattedTime:this.getFormattedScheduledTime(),summary:this.getSummary(),hasCloudTask:this.hasCloudTask(),needsCloudTask:this.needsCloudTask()}}}class Ja{constructor(e,r,n,i,a,o,s,l,u,d=new Date,f,h,p,m){this.id=e,this.name=r,this.number=n,this.brand=i,this.logo=a,this.barcode=o,this.priority=s,this.lastUsed=l,this.isPublic=u,this.createdAt=d,this.updatedAt=f,this.createdBy=h,this.color=p,this.tag=m}static fromFirestore(e){try{const r=n=>{if(!n)return new Date;if(n instanceof Date)return n;if(typeof n=="object"&&n.toDate)return n.toDate();const i=new Date(n);return isNaN(i.getTime())?new Date:i};return new Ja(e.id,e.name||"Carta Senza Nome",e.number||"",e.brand||"Brand Sconosciuto",e.logo||"",e.barcode||"",e.priority||0,r(e.lastUsed),e.isPublic,r(e.createdAt),e.updatedAt?r(e.updatedAt):void 0,e.createdBy,e.color,e.tag)}catch(r){return console.error("Error in FidelityCard.fromFirestore:",r,e),new Ja(e.id||"unknown",e.name||"Carta Senza Nome",e.number||"",e.brand||"Brand Sconosciuto",e.logo||"",e.barcode||"",e.priority||0,new Date,e.isPublic,new Date,void 0,e.createdBy,e.color,e.tag)}}toFirestore(){const e={name:this.name,number:this.number,brand:this.brand,logo:this.logo,barcode:this.barcode,priority:this.priority,lastUsed:this.lastUsed,isPublic:this.isPublic,createdAt:this.createdAt,updatedAt:new Date,createdBy:this.createdBy,color:this.color,tag:this.tag};return gi(e)}validate(){const e=[];return(!this.name||this.name.trim().length===0)&&e.push("Nome carta  obbligatorio"),this.name&&this.name.length>100&&e.push("Nome carta non pu superare 100 caratteri"),(!this.number||this.number.trim().length===0)&&e.push("Numero carta  obbligatorio"),(!this.brand||this.brand.trim().length===0)&&e.push("Brand carta  obbligatorio"),(!this.barcode||this.barcode.trim().length===0)&&e.push("Barcode carta  obbligatorio"),this.priority<0&&e.push("Priorit non pu essere negativa"),{isValid:e.length===0,errors:e}}incrementPriority(){return this.priority+=1,this.lastUsed=new Date,this.updatedAt=new Date,this}getFormattedLastUsed(){return this.lastUsed.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric"})}getMaskedNumber(){return this.number.length<=4?this.number:"**** **** **** "+this.number.slice(-4)}isNew(){return this.priority<3}isPopular(){return this.priority>=10}static sortByPriority(e){return e.sort((r,n)=>n.priority!==r.priority?n.priority-r.priority:new Date(n.lastUsed).getTime()-new Date(r.lastUsed).getTime())}static createSampleCards(){return[new Ja("dsadsadsa","CONAD INSIEME","2847 3951 6208 1537","CONAD","","2847395162081537",5,new Date("2024-12-10"),!0)]}}class rte{static createFidelityCard(e,r){return new Ja(e.id||"card_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),e.name||"Nuova Carta",e.number||"",e.brand||"",e.logo||"",e.barcode||"",e.priority||0,e.lastUsed||new Date,e.isPublic||!1,new Date,void 0,r,e.color,e.tag)}}function nte(t,e){var n,i;const r=M(C({},e),{createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date,startDate:e.startDate||void 0,endDate:e.endDate||void 0,completedAt:e.completedAt||void 0,lastLoginAt:e.lastLoginAt||void 0,lastViewedAt:e.lastViewedAt||void 0,lastUsedAt:((n=e.lastUsedAt)==null?void 0:n.toDate())||void 0,expiresAt:((i=e.expiresAt)==null?void 0:i.toDate())||void 0});try{switch(t){case"shopping_items":return Za.fromFirestore(r);case"categories":return Oo.fromFirestore(r);case"notes":return Vd.fromFirestore(r);case"calendar_events":return Ud.fromFirestore(r);case"users":return zp.fromFirestore(r);case"shopping_food":return ul.fromFirestore(r);case"food_categories":return Ku.fromFirestore(r);case"supermarkets":return Xu.fromFirestore(r);case"fcm-tokens":return Fa.fromFirestore(r);case"reminders":return As.fromFirestore(r);case"fidelity_cards":return Ja.fromFirestore(r);default:return console.warn('Collection "'.concat(t,'" non riconosciuta, usando deserializzazione di default')),r}}catch(a){return console.error('Errore deserializzazione per collection "'.concat(t,'":'),a),r}}function _j(t){if(typeof t.toFirestore=="function")return t.toFirestore();const n=t,{id:e}=n;return K(n,["id"])}function Jt(t,e){const[r,n]=x.useState([]),[i,a]=x.useState(!0),[o,s]=x.useState(null),{user:l}=nS();return x.useEffect(()=>{if(!l){a(!0),n([]),a(!1);return}if(!wt){s("Firebase not configured"),a(!1);return}a(!0);const v=Is(wt,t);let y;t==="shopping_food"?e!=null&&e.onlyDeleted?(y=Aa(v,Tn("isDeleted","==",!0),gu("createdAt","desc")),a(!1)):e!=null&&e.includeDeleted?(y=Aa(v,gu("createdAt","desc")),a(!1)):(y=Aa(v,Tn("isDeleted","in",[!1,null]),gu("createdAt","desc")),a(!1)):y=v;const b=MV(y,w=>{try{a(!0);const S=w.docs.map(_=>{const E=C({id:_.id},_.data());return nte(t,E)});let A=S;t==="shopping_food"&&!(e!=null&&e.includeDeleted)&&(e!=null&&e.onlyDeleted?A=S.filter(_=>_.isDeleted===!0):A=S.filter(_=>!_.isDeleted)),n(A)}catch(S){console.error("Errore durante la deserializzazione batch:",S),s("Errore durante il caricamento dei dati"),a(!1)}finally{a(!1),s(null)}},w=>{console.error("Errore Firebase onSnapshot:",w),s(w.message),a(!1)});return()=>b()},[t,l]),{data:r,loading:i,error:o,add:v=>G(this,null,function*(){if(!l)throw new Error("User not authenticated");if(!wt)throw new Error("Firebase not configured");try{const y=_j(v),b=M(C({},y),{createdBy:l.username,createdAt:_i.now(),updatedAt:_i.now()});return(yield W4(Is(wt,t),b)).id}catch(y){throw console.error("Errore durante l'aggiunta:",y),new Error("Impossibile aggiungere l'elemento: ".concat(y instanceof Error?y.message:"Errore sconosciuto"))}}),update:(v,y)=>G(this,null,function*(){if(!wt)throw new Error("Firebase not configured");try{const w=Sa(wt,t,v);let S;typeof y.toFirestore=="function"?S=_j(y):S=C({},y);var b=S;b.updatedAt=_i.now(),yield Mu(w,b)}catch(w){throw console.error("Errore durante l'aggiornamento:",w),new Error("Impossibile aggiornare l'elemento: ".concat(w instanceof Error?w.message:"Errore sconosciuto"))}}),remove:v=>G(this,null,function*(){if(!wt)throw new Error("Firebase not configured");try{const y=Sa(wt,t,v);yield vu(y)}catch(y){throw console.error("Errore durante l'eliminazione:",y),new Error("Impossibile eliminare l'elemento: ".concat(y instanceof Error?y.message:"Errore sconosciuto"))}}),getByUser:v=>{var y=r.filter(b=>b.createdBy===v||b.isPublic===!0||(l==null?void 0:l.role)==="admin");return y},getById:v=>r.find(y=>y.id===v),getByCategory:v=>r.filter(y=>y.category===v),search:(v,y=["name","title"])=>{const b=v.toLowerCase();return r.filter(w=>y.some(S=>{var A,_;return(_=(A=w[S])==null?void 0:A.toLowerCase)==null?void 0:_.call(A).includes(b)}))}}}const l1=768;function Li(){const[t,e]=x.useState(void 0);return x.useEffect(()=>{const r=window.matchMedia("(max-width: ".concat(l1-1,"px)")),n=()=>{e(window.innerWidth<l1)};return r.addEventListener("change",n),e(window.innerWidth<l1),()=>r.removeEventListener("change",n)},[]),!!t}function et(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ii(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function jn(t,e){const r=et(t);return isNaN(e)?ii(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Mi(t,e){const r=et(t);if(isNaN(e))return ii(t,NaN);if(!e)return r;const n=r.getDate(),i=ii(t,r.getTime());i.setMonth(r.getMonth()+e+1,0);const a=i.getDate();return n>=a?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}function E5(t,e){const r=+et(t);return ii(t,r+e)}const kS=6048e5,ite=864e5,ate=6e4,ote=36e5,Dm=43200,Cj=1440;function km(t,e){return E5(t,e*ote)}let ste={};function Yd(){return ste}function Ri(t,e){var s,l,u,d,f,h,p,m;const r=Yd(),n=(m=(p=(d=(u=e==null?void 0:e.weekStartsOn)!=null?u:(l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)!=null?d:r.weekStartsOn)!=null?p:(h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)!=null?m:0,i=et(t),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function dl(t){return Ri(t,{weekStartsOn:1})}function N5(t){const e=et(t),r=e.getFullYear(),n=ii(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=dl(n),a=ii(t,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=dl(a);return e.getTime()>=i.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function Yu(t){const e=et(t);return e.setHours(0,0,0,0),e}function Zu(t){const e=et(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Ha(t,e){const r=Yu(t),n=Yu(e),i=+r-Zu(r),a=+n-Zu(n);return Math.round((i-a)/ite)}function cte(t){const e=N5(t),r=ii(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),dl(r)}function lte(t,e){return E5(t,e*ate)}function aw(t,e){const r=e*7;return jn(t,r)}function ute(t,e){return Mi(t,e*12)}function j5(t){let e;return t.forEach(function(r){const n=et(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function T5(t){let e;return t.forEach(r=>{const n=et(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function A0(t,e){const r=et(t),n=et(e),i=r.getTime()-n.getTime();return i<0?-1:i>0?1:i}function MS(t){return ii(t,Date.now())}function cn(t,e){const r=Yu(t),n=Yu(e);return+r==+n}function RS(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function gy(t){if(!RS(t)&&typeof t!="number")return!1;const e=et(t);return!isNaN(Number(e))}function Qu(t,e){const r=et(t),n=et(e),i=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return i*12+a}function dte(t,e,r){const n=Ri(t,r),i=Ri(e,r),a=+n-Zu(n),o=+i-Zu(i);return Math.round((a-o)/kS)}function fte(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function hte(t,e){return+et(t)-+et(e)}function pte(t){const e=et(t);return e.setHours(23,59,59,999),e}function Jp(t){const e=et(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function mte(t){const e=et(t);return+pte(e)==+Jp(e)}function gte(t,e){const r=et(t),n=et(e),i=A0(r,n),a=Math.abs(Qu(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*a);let s=A0(r,n)===-i;mte(et(t))&&a===1&&A0(t,n)===1&&(s=!1),o=i*(a-Number(s))}return o===0?0:o}function vte(t,e,r){const n=hte(t,e)/1e3;return fte(r==null?void 0:r.roundingMethod)(n)}function ni(t){const e=et(t);return e.setDate(1),e.setHours(0,0,0,0),e}function P5(t){const e=et(t),r=ii(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function vy(t,e){var s,l,u,d,f,h,p,m;const r=Yd(),n=(m=(p=(d=(u=e==null?void 0:e.weekStartsOn)!=null?u:(l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)!=null?d:r.weekStartsOn)!=null?p:(h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)!=null?m:0,i=et(t),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function O5(t){return vy(t,{weekStartsOn:1})}const yte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xte=(t,e,r)=>{let n;const i=yte[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function wu(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const bte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ate={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ste={date:wu({formats:bte,defaultWidth:"full"}),time:wu({formats:wte,defaultWidth:"full"}),dateTime:wu({formats:Ate,defaultWidth:"full"})},_te={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cte=(t,e,r,n)=>_te[t];function Ba(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,s=r!=null&&r.width?String(r.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{const o=t.defaultWidth,s=r!=null&&r.width?String(r.width):t.defaultWidth;i=t.values[s]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Ete={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ote={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ite=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Dte={ordinalNumber:Ite,era:Ba({values:Ete,defaultWidth:"wide"}),quarter:Ba({values:Nte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ba({values:jte,defaultWidth:"wide"}),day:Ba({values:Tte,defaultWidth:"wide"}),dayPeriod:Ba({values:Pte,defaultWidth:"wide",formattingValues:Ote,defaultFormattingWidth:"wide"})};function za(t){return(e,r={})=>{const n=r.width,i=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?Mte(s,f=>f.test(o)):kte(s,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const d=e.slice(o.length);return{value:u,rest:d}}}function kte(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Mte(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function I5(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const i=n[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const Rte=/^(\d+)(th|st|nd|rd)?/i,$te=/\d+/i,Lte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Fte={any:[/^b/i,/^(a|c)/i]},Bte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zte={any:[/1/i,/2/i,/3/i,/4/i]},Vte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ute={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Wte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Hte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Gte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},qte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Kte={ordinalNumber:I5({matchPattern:Rte,parsePattern:$te,valueCallback:t=>parseInt(t,10)}),era:za({matchPatterns:Lte,defaultMatchWidth:"wide",parsePatterns:Fte,defaultParseWidth:"any"}),quarter:za({matchPatterns:Bte,defaultMatchWidth:"wide",parsePatterns:zte,defaultParseWidth:"any",valueCallback:t=>t+1}),month:za({matchPatterns:Vte,defaultMatchWidth:"wide",parsePatterns:Ute,defaultParseWidth:"any"}),day:za({matchPatterns:Wte,defaultMatchWidth:"wide",parsePatterns:Hte,defaultParseWidth:"any"}),dayPeriod:za({matchPatterns:Gte,defaultMatchWidth:"any",parsePatterns:qte,defaultParseWidth:"any"})},$S={code:"en-US",formatDistance:xte,formatLong:Ste,formatRelative:Cte,localize:Dte,match:Kte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Xte(t){const e=et(t);return Ha(e,P5(e))+1}function D5(t){const e=et(t),r=+dl(e)-+cte(e);return Math.round(r/kS)+1}function k5(t,e){var d,f,h,p,m,g,v,y;const r=et(t),n=r.getFullYear(),i=Yd(),a=(y=(v=(p=(h=e==null?void 0:e.firstWeekContainsDate)!=null?h:(f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)!=null?p:i.firstWeekContainsDate)!=null?v:(g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)!=null?y:1,o=ii(t,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const s=Ri(o,e),l=ii(t,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const u=Ri(l,e);return r.getTime()>=s.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Yte(t,e){var s,l,u,d,f,h,p,m;const r=Yd(),n=(m=(p=(d=(u=e==null?void 0:e.firstWeekContainsDate)!=null?u:(l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)!=null?d:r.firstWeekContainsDate)!=null?p:(h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)!=null?m:1,i=k5(t,e),a=ii(t,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),Ri(a,e)}function M5(t,e){const r=et(t),n=+Ri(r,e)-+Yte(r,e);return Math.round(n/kS)+1}function Xt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const rs={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return Xt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):Xt(r+1,2)},d(t,e){return Xt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return Xt(t.getHours()%12||12,e.length)},H(t,e){return Xt(t.getHours(),e.length)},m(t,e){return Xt(t.getMinutes(),e.length)},s(t,e){return Xt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return Xt(i,e.length)}},Vl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ej={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return rs.y(t,e)},Y:function(t,e,r,n){const i=k5(t,n),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return Xt(o,2)}return e==="Yo"?r.ordinalNumber(a,{unit:"year"}):Xt(a,e.length)},R:function(t,e){const r=N5(t);return Xt(r,e.length)},u:function(t,e){const r=t.getFullYear();return Xt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Xt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Xt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return rs.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return Xt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const i=M5(t,n);return e==="wo"?r.ordinalNumber(i,{unit:"week"}):Xt(i,e.length)},I:function(t,e,r){const n=D5(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):Xt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):rs.d(t,e)},D:function(t,e,r){const n=Xte(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Xt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Xt(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const i=t.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Xt(a,e.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return Xt(i,e.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let i;switch(n===12?i=Vl.noon:n===0?i=Vl.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let i;switch(n>=17?i=Vl.evening:n>=12?i=Vl.afternoon:n>=4?i=Vl.morning:i=Vl.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return rs.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):rs.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Xt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):Xt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):rs.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):rs.s(t,e)},S:function(t,e){return rs.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return jj(n);case"XXXX":case"XX":return gc(n);case"XXXXX":case"XXX":default:return gc(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return jj(n);case"xxxx":case"xx":return gc(n);case"xxxxx":case"xxx":default:return gc(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Nj(n,":");case"OOOO":default:return"GMT"+gc(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Nj(n,":");case"zzzz":default:return"GMT"+gc(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return Xt(n,e.length)},T:function(t,e,r){const n=t.getTime();return Xt(n,e.length)}};function Nj(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+e+Xt(a,2)}function jj(t,e){return t%60===0?(t>0?"-":"+")+Xt(Math.abs(t)/60,2):gc(t,e)}function gc(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),i=Xt(Math.trunc(n/60),2),a=Xt(n%60,2);return r+i+e+a}const Tj=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},R5=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Zte=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return Tj(t,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Tj(n,e)).replace("{{time}}",R5(i,e))},Qte={p:R5,P:Zte},Jte=/^D+$/,ere=/^Y+$/,tre=["D","DD","YY","YYYY"];function rre(t){return Jte.test(t)}function nre(t){return ere.test(t)}function ire(t,e,r){const n=are(t,e,r);if(console.warn(n),tre.includes(t))throw new RangeError(n)}function are(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return"Use `".concat(t.toLowerCase(),"` instead of `").concat(t,"` (in `").concat(e,"`) for formatting ").concat(n," to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}const ore=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cre=/^'([^]*?)'?$/,lre=/''/g,ure=/[a-zA-Z]/;function ur(t,e,r){var d,f,h,p,m,g,v,y,b,w,S,A,_,E,N,T,O,j;const n=Yd(),i=(f=(d=r==null?void 0:r.locale)!=null?d:n.locale)!=null?f:$S,a=(w=(b=(g=(m=r==null?void 0:r.firstWeekContainsDate)!=null?m:(p=(h=r==null?void 0:r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)!=null?g:n.firstWeekContainsDate)!=null?b:(y=(v=n.locale)==null?void 0:v.options)==null?void 0:y.firstWeekContainsDate)!=null?w:1,o=(j=(O=(E=(_=r==null?void 0:r.weekStartsOn)!=null?_:(A=(S=r==null?void 0:r.locale)==null?void 0:S.options)==null?void 0:A.weekStartsOn)!=null?E:n.weekStartsOn)!=null?O:(T=(N=n.locale)==null?void 0:N.options)==null?void 0:T.weekStartsOn)!=null?j:0,s=et(t);if(!gy(s))throw new RangeError("Invalid time value");let l=e.match(sre).map(P=>{const D=P[0];if(D==="p"||D==="P"){const F=Qte[D];return F(P,i.formatLong)}return P}).join("").match(ore).map(P=>{if(P==="''")return{isToken:!1,value:"'"};const D=P[0];if(D==="'")return{isToken:!1,value:dre(P)};if(Ej[D])return{isToken:!0,value:P};if(D.match(ure))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:P}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(P=>{if(!P.isToken)return P.value;const D=P.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&nre(D)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&rre(D))&&ire(D,e,String(t));const F=Ej[D[0]];return F(s,D,i.localize,u)}).join("")}function dre(t){const e=t.match(cre);return e?e[1].replace(lre,"'"):t}function fre(t,e,r){var m,g;const n=Yd(),i=(g=(m=r==null?void 0:r.locale)!=null?m:n.locale)!=null?g:$S,a=2520,o=A0(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let l,u;o>0?(l=et(e),u=et(t)):(l=et(t),u=et(e));const d=vte(u,l),f=(Zu(u)-Zu(l))/1e3,h=Math.round((d-f)/60);let p;if(h<2)return r!=null&&r.includeSeconds?d<5?i.formatDistance("lessThanXSeconds",5,s):d<10?i.formatDistance("lessThanXSeconds",10,s):d<20?i.formatDistance("lessThanXSeconds",20,s):d<40?i.formatDistance("halfAMinute",0,s):d<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):h===0?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",h,s);if(h<45)return i.formatDistance("xMinutes",h,s);if(h<90)return i.formatDistance("aboutXHours",1,s);if(h<Cj){const v=Math.round(h/60);return i.formatDistance("aboutXHours",v,s)}else{if(h<a)return i.formatDistance("xDays",1,s);if(h<Dm){const v=Math.round(h/Cj);return i.formatDistance("xDays",v,s)}else if(h<Dm*2)return p=Math.round(h/Dm),i.formatDistance("aboutXMonths",p,s)}if(p=gte(u,l),p<12){const v=Math.round(h/Dm);return i.formatDistance("xMonths",v,s)}else{const v=p%12,y=Math.trunc(p/12);return v<3?i.formatDistance("aboutXYears",y,s):v<9?i.formatDistance("overXYears",y,s):i.formatDistance("almostXYears",y+1,s)}}function Ju(t,e){return fre(t,MS(t),e)}function Pj(t){return et(t).getDay()}function hre(t){const e=et(t),r=e.getFullYear(),n=e.getMonth(),i=ii(t,0);return i.setFullYear(r,n+1,0),i.setHours(0,0,0,0),i.getDate()}function pre(t){return Math.trunc(+et(t)/1e3)}function mre(t){const e=et(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function gre(t,e){return dte(mre(t),ni(t),e)+1}function ug(t,e){const r=et(t),n=et(e);return r.getTime()>n.getTime()}function LS(t,e){const r=et(t),n=et(e);return+r<+n}function Oj(t,e,r){const n=Ri(t,r),i=Ri(e,r);return+n==+i}function yy(t,e){const r=et(t),n=et(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function vre(t,e){const r=et(t),n=et(e);return r.getFullYear()===n.getFullYear()}function ow(t){return cn(t,MS(t))}function Ij(t){return cn(t,jn(MS(t),1))}function u1(t,e){return jn(t,-e)}function d1(t,e){const r=et(t),n=r.getFullYear(),i=r.getDate(),a=ii(t,0);a.setFullYear(n,e,15),a.setHours(0,0,0,0);const o=hre(a);return r.setMonth(e,Math.min(i,o)),r}function Dj(t,e){const r=et(t);return isNaN(+r)?ii(t,NaN):(r.setFullYear(e),r)}function yre(t,e){return Mi(t,-1)}const xre={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"pi di un anno",other:"pi di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},bre=(t,e,r)=>{let n;const i=xre[t];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"tra "+n:n+" fa":n},wre={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},Are={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Sre={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},_re={date:wu({formats:wre,defaultWidth:"full"}),time:wu({formats:Are,defaultWidth:"full"}),dateTime:wu({formats:Sre,defaultWidth:"full"})},FS=["domenica","luned","marted","mercoled","gioved","venerd","sabato"];function Cre(t){switch(t){case 0:return"'domenica scorsa alle' p";default:return"'"+FS[t]+" scorso alle' p"}}function kj(t){return"'"+FS[t]+" alle' p"}function Ere(t){switch(t){case 0:return"'domenica prossima alle' p";default:return"'"+FS[t]+" prossimo alle' p"}}const Nre={lastWeek:(t,e,r)=>{const n=t.getDay();return Oj(t,e,r)?kj(n):Cre(n)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(t,e,r)=>{const n=t.getDay();return Oj(t,e,r)?kj(n):Ere(n)},other:"P"},jre=(t,e,r,n)=>{const i=Nre[t];return typeof i=="function"?i(e,r,n):i},Tre={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},Pre={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Ore={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},Ire={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","luned","marted","mercoled","gioved","venerd","sabato"]},Dre={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},kre={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},Mre=(t,e)=>{const r=Number(t);return String(r)},Rre={ordinalNumber:Mre,era:Ba({values:Tre,defaultWidth:"wide"}),quarter:Ba({values:Pre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ba({values:Ore,defaultWidth:"wide"}),day:Ba({values:Ire,defaultWidth:"wide"}),dayPeriod:Ba({values:Dre,defaultWidth:"wide",formattingValues:kre,defaultFormattingWidth:"wide"})},$re=/^(\d+)()?/i,Lre=/\d+/i,Fre={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},Bre={any:[/^a/i,/^(d|e)/i]},zre={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234]()? trimestre/i},Vre={any:[/1/i,/2/i,/3/i,/4/i]},Ure={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},Wre={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},Hre={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|]|marted[i|]|mercoled[i|]|gioved[i|]|venerd[i|]|sabato)/i},Gre={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},qre={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},Kre={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},Xre={ordinalNumber:I5({matchPattern:$re,parsePattern:Lre,valueCallback:t=>parseInt(t,10)}),era:za({matchPatterns:Fre,defaultMatchWidth:"wide",parsePatterns:Bre,defaultParseWidth:"any"}),quarter:za({matchPatterns:zre,defaultMatchWidth:"wide",parsePatterns:Vre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:za({matchPatterns:Ure,defaultMatchWidth:"wide",parsePatterns:Wre,defaultParseWidth:"any"}),day:za({matchPatterns:Hre,defaultMatchWidth:"wide",parsePatterns:Gre,defaultParseWidth:"any"}),dayPeriod:za({matchPatterns:qre,defaultMatchWidth:"any",parsePatterns:Kre,defaultParseWidth:"any"})},qr={code:"it",formatDistance:bre,formatLong:_re,formatRelative:jre,localize:Rre,match:Xre,options:{weekStartsOn:1,firstWeekContainsDate:4}};function dg({variant:t="desktop",priceSelectionService:e}){const{user:r}=Bt(),{toast:n}=Nr(),i=Li(),[a,o]=x.useState(!1),{data:s,update:l}=Jt("shopping_items"),u=x.useMemo(()=>{if(!s||!r)return[];const b=[],w=s.filter(N=>N.createdBy===r.username||r.role==="admin");return w.filter(N=>{var D,F,I,k,R,L,V,W,q,H;const T=((D=N.priceSelection)==null?void 0:D.status)==="skipped"&&!N.completed,O=N.needsPriceSelection===!0&&!N.completed,j=((I=(F=N.priceSelection)==null?void 0:F.detectedPrices)==null?void 0:I.length)&&((R=(k=N.priceSelection)==null?void 0:k.detectedPrices)==null?void 0:R.length)>0&&!((L=N.priceSelection)!=null&&L.selectedPriceIndex)&&((V=N.priceSelection)==null?void 0:V.status)!=="selected"&&!N.completed,P=((W=N.priceSelection)==null?void 0:W.status)==="selected"||((q=N.priceSelection)==null?void 0:q.selectedPriceIndex)!==void 0&&((H=N.priceSelection)==null?void 0:H.selectedPriceIndex)!==null;return(T||O||j)&&!P}).forEach(N=>{var j,P,D;const T=((P=(j=N.priceSelection)==null?void 0:j.detectedPrices)==null?void 0:P.length)||0,O=((D=N.priceSelection)==null?void 0:D.status)==="skipped";b.push({id:"price_selection_".concat(N.id),type:"price_selection",title:O?"Prezzo saltato - richiede attenzione":"Selezione prezzo richiesta",description:'"'.concat(N.name||"Prodotto",'" ').concat(T>0?"ha ".concat(T," prezzi rilevati"):"necessita analisi prezzi"),timestamp:N.updatedAt||N.createdAt,priority:O?"medium":"high",data:{item:N,isSkipped:O},actionLabel:O?"Rivaluta prezzo":"Seleziona prezzo",onAction:()=>{e?(O?e.reopenSkippedItem(N.id):e.openPriceSelection(N.id),o(!1)):n({title:"Servizio non disponibile",description:"Il servizio di selezione prezzi non  disponibile.",variant:"destructive"})}})}),w.filter(N=>{var T,O;return((T=N.scrapingData)==null?void 0:T.scrapingSuccess)===!1&&((O=N.scrapingData)==null?void 0:O.errors)&&!N.completed}).forEach(N=>{var T,O;b.push({id:"scraping_error_".concat(N.id),type:"system",title:"Errore estrazione dati",description:'"'.concat(N.name||"Prodotto",'" - ').concat(((T=N.scrapingData)==null?void 0:T.errors)||"Errore sconosciuto"),timestamp:((O=N.scrapingData)==null?void 0:O.lastScraped)||N.updatedAt||N.createdAt,priority:"medium",data:{item:N},actionLabel:"Riprova",onAction:()=>f(N)})}),w.filter(N=>{const T=N.historicalPriceWithDates||[];if(T.length===0)return!1;const O=T[T.length-1];return O.date&&new Date().getTime()-new Date(O.date).getTime()<24*60*60*1e3&&O.changeType!=="initial"}).forEach(N=>{const T=N.historicalPriceWithDates[N.historicalPriceWithDates.length-1],O=T.changeType==="increase";b.push({id:"price_change_".concat(N.id),type:"price_change",title:"Prezzo ".concat(O?"aumentato":"diminuito"),description:'"'.concat(N.name||"Prodotto",'" - ').concat(T.price.toFixed(2),""),timestamp:new Date(T.date),priority:O?"high":"medium",data:{item:N,change:T},actionLabel:"Visualizza",onAction:()=>d(N)})}),w.filter(N=>N.completed?!1:(new Date().getTime()-new Date(N.createdAt).getTime())/(1e3*60*60*24)>30).forEach(N=>{const T=Math.floor((new Date().getTime()-new Date(N.createdAt).getTime())/864e5);b.push({id:"old_item_".concat(N.id),type:"expired_item",title:"Articolo non completato",description:'"'.concat(N.name||"Prodotto",'" aggiunto ').concat(T," giorni fa"),timestamp:N.createdAt,priority:"low",data:{item:N},actionLabel:"Completa",onAction:()=>h(N)})}),b.sort((N,T)=>{const O={high:3,medium:2,low:1};return O[N.priority]!==O[T.priority]?O[T.priority]-O[N.priority]:new Date(T.timestamp).getTime()-new Date(N.timestamp).getTime()})},[s,r,e]),d=b=>{window.open(b.link,"_blank"),o(!1)},f=b=>G(this,null,function*(){n({title:"Riprova scraping",description:'Riprovando estrazione dati per "'.concat(b.name||"Prodotto",'"')}),o(!1)}),h=b=>G(this,null,function*(){try{yield l(b.id,{completed:!0,updatedAt:new Date}),n({title:"Articolo completato",description:'"'.concat(b.name||"Prodotto",'"  stato segnato come completato')}),o(!1)}catch(w){n({title:"Errore",description:"Impossibile completare l'articolo",variant:"destructive"})}}),p=b=>{n({title:"Notifica ignorata",description:"La notifica  stata rimossa temporaneamente"})},m=x.useMemo(()=>{const b=u.filter(A=>A.priority==="high").length,w=u.filter(A=>A.priority==="medium").length,S=u.filter(A=>A.priority==="low").length;return{high:b,medium:w,low:S,total:u.length}},[u]),g=b=>{switch(b){case"price_selection":case"price_change":return c.jsx(Nh,{className:"h-4 w-4 text-blue-600"});case"expired_item":return c.jsx(Xr,{className:"h-4 w-4 text-orange-600"});default:return c.jsx(Lp,{className:"h-4 w-4 text-red-600"})}},v=b=>{switch(b){case"high":return" text-red-500 border-red-500";case"medium":return"text-orange-700  border-orange-200";case"low":return"text-gray-600  border-gray-200"}},y=()=>c.jsxs("div",{className:"w-full",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Avvisi"}),c.jsx("p",{className:"text-sm text-gray-600",children:m.total===0?"Nessun avviso":"".concat(m.total," avvisi totali")})]}),m.total>0&&c.jsxs("div",{className:"flex items-center gap-2",children:[m.high>0&&c.jsxs(ne,{className:"text-xs bg-red-500 text-white border-none",children:[m.high," urgenti"]}),m.medium>0&&c.jsxs(ne,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-700",children:[m.medium," medi"]})]})]}),c.jsx(DS,{className:"h-96",children:c.jsx("div",{className:"space-y-3",children:u.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(eu,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600",children:"Tutto a posto!"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Nessun avviso al momento"})]}):u.map(b=>c.jsx(Ie,{className:"border-l-4 ".concat(v(b.priority)),children:c.jsx(Ve,{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[g(b.type),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:"font-medium text-sm text-gray-900 truncate",children:b.title}),c.jsx(ne,{variant:"outline",className:"text-xs ".concat(v(b.priority)),children:b.priority})]}),c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:b.description}),c.jsx("p",{className:"text-xs text-gray-500",children:Ju(b.timestamp,{addSuffix:!0,locale:qr})}),b.actionLabel&&b.onAction&&c.jsxs(Q,{size:"sm",variant:"outline",className:"mt-2 h-7 text-xs border-blue-500 text-blue-600 hover:bg-blue-50",onClick:b.onAction,children:[b.actionLabel,c.jsx(Rv,{className:"h-3 w-3 ml-1"})]})]})]}),c.jsx(Q,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600",onClick:()=>p(b.id),children:c.jsx(oo,{className:"h-3 w-3"})})]})})},b.id))})})]});return t==="mobile"||i?c.jsxs(Fee,{open:a,onOpenChange:o,children:[c.jsx(Bee,{asChild:!0,children:c.jsxs(Q,{variant:"ghost",size:"default",className:"relative p-2",children:[m.total>0?c.jsx(JE,{className:"h-5 w-5 text-red-500"}):c.jsx(In,{className:"h-5 w-5"}),m.total>0&&c.jsx(ne,{className:"absolute -top-1 -right-1 h-5 w-5 text-xs p-0 flex items-center justify-center bg-red-500 text-white border-none",children:m.total>99?"99+":m.total})]})}),c.jsxs(c5,{side:"right",className:"w-full sm:w-96",children:[c.jsxs(l5,{className:"sr-only",children:[c.jsx(u5,{children:"Avvisi"}),c.jsx(d5,{children:"Lista degli avvisi e notifiche"})]}),c.jsx(y,{})]})]}):c.jsxs(Yp,{open:a,onOpenChange:o,children:[c.jsx(Zp,{asChild:!0,children:c.jsxs(Q,{variant:"ghost",size:"sm",className:"relative p-2",children:[m.total>0?c.jsx(JE,{className:"h-5 w-5 text-red-500"}):c.jsx(In,{className:"h-5 w-5"}),m.total>0&&c.jsx(ne,{className:"absolute -top-1 -right-1 h-4 w-4 text-xs p-0 flex items-center justify-center bg-red-500 text-white border-none",children:m.total>99?"99+":m.total})]})}),c.jsx(Hd,{className:"w-96 p-0",align:"end",children:c.jsx("div",{className:"p-4",children:c.jsx(y,{})})})]})}const Yt=dy,BS=fy,Yre=hy,$5=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Gd,C({ref:r,className:ie("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},e))});$5.displayName=Gd.displayName;const Ht=x.forwardRef((a,i)=>{var o=a,{className:t,children:e,hideCloseButton:r=!1}=o,n=K(o,["className","children","hideCloseButton"]);return c.jsxs(Yre,{children:[c.jsx($5,{}),c.jsxs(qd,M(C({ref:i,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:bg-slate-900 dark:border-slate-800",t)},n),{children:[e,r&&c.jsxs(Qp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(oo,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Ht.displayName=qd.displayName;const Zt=r=>{var n=r,{className:t}=n,e=K(n,["className"]);return c.jsx("div",C({className:ie("flex flex-col space-y-1.5 text-center sm:text-left",t)},e))};Zt.displayName="DialogHeader";const Qt=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Kd,C({ref:r,className:ie("text-lg font-semibold leading-none tracking-tight",t)},e))});Qt.displayName=Kd.displayName;const Oi=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Xd,C({ref:r,className:ie("text-sm text-muted-foreground",t)},e))});Oi.displayName=Xd.displayName;function Zre({isOpen:t,onClose:e,item:r,onPriceSelected:n,onSkip:i}){var m;const[a,o]=x.useState(null),[s,l]=x.useState(!1);if(!r||!((m=r.priceSelection)!=null&&m.detectedPrices))return null;const u=r.priceSelection.detectedPrices;u.forEach((g,v)=>{});const d=()=>G(this,null,function*(){if(a!==null){l(!0);try{(yield n(r.id,a))&&e()}catch(g){console.error("Errore selezione prezzo:",g)}finally{l(!1)}}}),f=()=>{var g;i&&((g=r.priceSelection)==null?void 0:g.status)!=="skipped"&&i(r.id),e()},h=g=>{const v=g!=null?g:.5,y=Math.round(v*100);return v>=.7?c.jsxs(ne,{variant:"default",className:"bg-green-100 text-green-800",children:["Alta (",y,"%)"]}):v>=.4?c.jsxs(ne,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:["Media (",y,"%)"]}):c.jsxs(ne,{variant:"outline",className:"bg-red-100 text-red-800",children:["Bassa (",y,"%)"]})},p=(g,v)=>{const y=b=>{const w=/[$]/,S=b.match(w);return S?S[0]:""};if(console.log(v),g!=null&&!isNaN(g)){const b=v?y(v):"";return"".concat(g.toFixed(2)).concat(b)}if(v){const b=y(v),w=v.match(/(\d+[.,]\d{2})/);if(w){const S=parseFloat(w[1].replace(",","."));if(!isNaN(S))return"".concat(S.toFixed(2)).concat(b)}}return v||"N/A"};return c.jsx(Yt,{open:t,onOpenChange:e,children:c.jsxs(Ht,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[c.jsxs(Zt,{children:[c.jsxs(Qt,{className:"flex items-center gap-2 text-xl",children:[c.jsx(Nh,{className:"h-6 w-6 text-blue-600"}),"Seleziona il prezzo corretto"]}),c.jsx(Oi,{children:"Sono stati rilevati pi prezzi in questa pagina. Seleziona quello del prodotto che vuoi monitorare."})]}),c.jsx("div",{className:"border-b pb-4 mb-4",children:c.jsx("div",{className:"flex items-start gap-3",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg",children:r.name||"Prodotto"}),c.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-gray-600",children:[c.jsx(rl,{className:"h-4 w-4"}),c.jsx("a",{href:r.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline truncate max-w-md",children:r.link})]})]})})}),c.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map((g,v)=>{var y,b;return c.jsx(Ie,{className:ie("cursor-pointer transition-all border-2",a===v?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>o(v),children:c.jsx(Ve,{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx("div",{className:"flex items-center justify-center w-6 h-6",children:a===v?c.jsx(eu,{className:"h-5 w-5 text-blue-600"}):c.jsx(Sc,{className:"h-5 w-5 text-gray-400"})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("span",{className:"text-2xl font-bold text-gray-900",children:p(g.numericValue,g.elementText)}),((y=g.context)==null?void 0:y.isProminent)&&c.jsxs(ne,{variant:"default",className:"bg-orange-100 text-orange-800",children:[c.jsx(Qk,{className:"h-3 w-3 mr-1"}),"Prominente"]}),h(g.confidence)]}),((b=g.context)==null?void 0:b.nearbyText)&&c.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[c.jsx("strong",{children:"Contesto:"}),' "',g.context.nearbyText,'"']}),c.jsxs("div",{className:"text-sm text-gray-500 mb-2 bg-gray-50 p-2 rounded font-mono",children:[c.jsx("strong",{children:"HTML:"})," ",(g.elementText||"").substring(0,100),(g.elementText||"").length>100&&"..."]}),c.jsxs("details",{className:"text-sm",children:[c.jsxs("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-800 flex items-center gap-1",children:[c.jsx(WW,{className:"h-3 w-3"}),"CSS Selector"]}),c.jsx("div",{className:"mt-2 p-2 bg-gray-900 text-green-400 rounded font-mono text-xs break-all",children:g.cssSelector||"N/A"}),g.parentClasses&&g.parentClasses.length>0&&c.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[c.jsx("strong",{children:"Parent classes:"})," ",g.parentClasses.slice(0,5).join(", "),g.parentClasses.length>5&&" +".concat(g.parentClasses.length-5," altre")]})]})]})]}),c.jsx("div",{className:ie("w-4 h-4 rounded-full border-2 transition-colors",a===v?"bg-blue-600 border-blue-600":"border-gray-300")})]})})},v)})}),a===null&&c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[c.jsx(Lp,{className:"h-5 w-5 text-amber-600"}),c.jsx("span",{className:"text-sm text-amber-800",children:"Seleziona un prezzo per continuare"})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[c.jsxs("div",{className:"text-sm text-gray-500",children:[u.length," prezzi rilevati"]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Q,{variant:"outline",onClick:f,disabled:s,children:"Salta per ora"}),c.jsx(Q,{onClick:d,disabled:a===null||s,className:"min-w-[120px]",children:s?c.jsxs(c.Fragment,{children:[c.jsx(Pn,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):"Conferma"})]})]})]})})}function Qre(){const[t,e]=x.useState(null),[r,n]=x.useState(!1),{user:i}=Bt(),{toast:a}=Nr(),{data:o,update:s}=Jt("shopping_items"),l=o?o.filter(v=>{var N;const y=v.needsPriceSelection===!0,b=((N=v.priceSelection)==null?void 0:N.status)!=="skipped",w=v.completed===!1,S=(i==null?void 0:i.username)===v.createdBy||(i==null?void 0:i.role)==="admin",A=v.priceSelection,E=(A==null?void 0:A.detectedPrices)&&Array.isArray(A.detectedPrices)&&A.detectedPrices.length>0&&A.detectedPrices.some(T=>T&&typeof T.value=="string"&&typeof T.numericValue=="number"&&T.numericValue>0);return y&&b&&w&&S&&E}):[],u=x.useCallback(v=>{var b,w;console.log(" Opening price selection for item: ".concat(v));const y=o==null?void 0:o.find(S=>S.id===v);if(!y){console.error(" Item ".concat(v," not found"));return}if(!((w=(b=y.priceSelection)==null?void 0:b.detectedPrices)!=null&&w.length)){a({title:"Errore",description:"Nessun prezzo rilevato per questo item.",variant:"destructive"});return}e(y),n(!0)},[o,a]),d=x.useCallback(()=>{console.log(" Closing price selection modal"),n(!1),e(null)},[]),f=x.useCallback((v,y)=>G(this,null,function*(){var b;try{console.log(" Selecting price ".concat(y," for item ").concat(v));const w=o==null?void 0:o.find(N=>N.id===v);if(!((b=w==null?void 0:w.priceSelection)!=null&&b.detectedPrices))throw new Error("Item o prezzi non trovati");const S=w.priceSelection.detectedPrices;if(y<0||y>=S.length)throw new Error("Indice prezzo non valido");const A=S[y];if(!A||typeof A.numericValue!="number"||A.numericValue<=0)throw new Error("Prezzo selezionato non valido");const _=Za.fromFirestore(M(C({},w),{id:w.id}));_.selectPrice(y);const E=_.toFirestore();return yield s(v,E),a({title:"Prezzo selezionato",description:"Il prezzo ".concat(A.value,"  stato salvato.")}),!0}catch(w){console.error(" Errore selezione prezzo:",w);const S=w instanceof Error?w.message:"Errore sconosciuto";return a({title:"Errore",description:"Errore durante il salvataggio: ".concat(S),variant:"destructive"}),!1}}),[o,s,a]),h=x.useCallback(v=>G(this,null,function*(){try{console.log(" Skipping item ".concat(v));const y=o==null?void 0:o.find(S=>S.id===v);if(!y)throw new Error("Item non trovato");const b=Za.fromFirestore(M(C({},y),{id:y.id}));b.priceSelection&&(b.priceSelection.status="skipped"),b.needsPriceSelection=!0,b.updatedAt=new Date;const w=b.toFirestore();yield s(v,w),a({title:"Item saltato",description:"L'item  stato saltato temporaneamente."})}catch(y){console.error(" Errore skip item:",y);const b=y instanceof Error?y.message:"Errore sconosciuto";a({title:"Errore",description:"Impossibile saltare l'item: ".concat(b),variant:"destructive"})}}),[o,s,a]),p=x.useCallback(v=>G(this,null,function*(){try{console.log(" Reopening skipped item ".concat(v));const y=o==null?void 0:o.find(S=>S.id===v);if(!y)throw new Error("Item non trovato");const b=Za.fromFirestore(M(C({},y),{id:y.id}));b.priceSelection&&(b.priceSelection.status="needs_selection"),b.needsPriceSelection=!0,b.updatedAt=new Date;const w=b.toFirestore();yield s(v,w),u(v),a({title:"Item riaperto",description:"L'item  stato riaggiunto per la selezione prezzo."})}catch(y){console.error(" Errore reopening item:",y);const b=y instanceof Error?y.message:"Errore sconosciuto";a({title:"Errore",description:"Impossibile riaprire l'item: ".concat(b),variant:"destructive"})}}),[o,s,u,a]),m=x.useCallback(()=>{var v;return(v=t==null?void 0:t.priceSelection)!=null&&v.detectedPrices?t.priceSelection.detectedPrices:[]},[t]),g=x.useCallback(v=>{var b;if(!v.priceSelection)return"Nessun dato prezzi";const y=((b=v.priceSelection.detectedPrices)==null?void 0:b.length)||0;switch(v.priceSelection.status){case"needs_selection":return"".concat(y," prezzi trovati - necessita selezione");case"selected":return"Prezzo selezionato";case"single_price":return"Prezzo unico rilevato";case"skipped":return"Saltato dall'utente";case"error":return"Errore rilevamento prezzi";default:return"Stato sconosciuto"}},[]);return{pendingItems:l,currentItem:t,isModalOpen:r,loading:!1,openPriceSelection:u,closeModal:d,selectPrice:f,skipItem:h,reopenSkippedItem:p,getCurrentItemPrices:m,getPriceSelectionSummary:g,hasPendingItems:l.length>0,stats:{totalPending:l.length,currentIndex:t?l.findIndex(v=>v.id===t.id)+1:0}}}function Jre(){const{currentItem:t,isModalOpen:e,selectPrice:r,closeModal:n,skipItem:i,openPriceSelection:a,reopenSkippedItem:o}=Qre();return $.useEffect(()=>(window.priceSelectionService={openPriceSelection:a,reopenSkippedItem:o},()=>{delete window.priceSelectionService}),[a,o]),!e||!t?null:c.jsx(Zre,{isOpen:e,onClose:n,item:t,onPriceSelected:r,onSkip:i})}function L5(){const t=window.priceSelectionService;return t||console.warn("PriceSelectionService non disponibile. Assicurati di aver incluso PriceSelectionManager."),t||{openPriceSelection:e=>console.warn("PriceSelectionService non disponibile:",e),reopenSkippedItem:e=>console.warn("PriceSelectionService non disponibile:",e)}}var F5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Mj=$.createContext&&$.createContext(F5),ene=["attr","size","title"];function tne(t,e){if(t==null)return{};var r=rne(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rne(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fg(){return fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fg.apply(this,arguments)}function Rj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rj(Object(r),!0).forEach(function(n){nne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rj(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nne(t,e,r){return e=ine(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ine(t){var e=ane(t,"string");return typeof e=="symbol"?e:e+""}function ane(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B5(t){return t&&t.map((e,r)=>$.createElement(e.tag,hg({key:r},e.attr),B5(e.child)))}function Cl(t){return e=>$.createElement(one,fg({attr:hg({},t.attr)},e),B5(t.child))}function one(t){var e=r=>{var{attr:n,size:i,title:a}=t,o=tne(t,ene),s=i||r.size||"1em",l;return r.className&&(l=r.className),t.className&&(l=(l?l+" ":"")+t.className),$.createElement("svg",fg({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:l,style:hg(hg({color:t.color||r.color},r.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&$.createElement("title",null,a),t.children)};return Mj!==void 0?$.createElement(Mj.Consumer,null,r=>e(r)):e(F5)}function zS(t){return Cl({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"},child:[]}]})(t)}function sne(t){return Cl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function cne(t){return Cl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"},child:[]}]})(t)}function VS(){return[{name:"Shopping",path:"/shopping",icon:cH,onlyHeader:!0,color:"bg-burnt-newStyle"},{name:"Note",path:"/notes",icon:rH,onlyHeader:!0,color:"bg-burnt-newStyle"},{name:"Calendario",path:"/calendar",icon:VW,onlyHeader:!0,color:"bg-burnt-newStyle"},{name:"Spesa",path:"/shoppingfood",icon:oH,onlyHeader:!0,color:"bg-burnt-newStyle"},{name:"Wallet",path:"/digitalwallet",icon:m0,color:"bg-burnt-newStyle"},{name:"TripTaste",path:"https://fabiodagostino.github.io/TripTaste/#/",icon:rl,color:"bg-burnt-newStyle"},{name:"SpotifyStat",path:"/spotystat",icon:zS,color:"bg-burnt-newStyle"}]}const Mm=({className:t})=>c.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/6457/6457403.png",alt:"rat icon",className:t,style:{filter:"brightness(0) invert(1)"}});function lne({onMenuToggle:t}){const{permission:e,requestPermission:r,isSupported:n,token:i,isInitializing:a,disableNotifications:o,enableNotifications:s,isManuallyDisabled:l}=vS(),u=L5(),{user:d,logout:f}=Bt(),{theme:h,toggleTheme:p}=hS(),[m]=ik(),g=VS().filter(A=>A.onlyHeader),v=()=>e!=="granted"?{icon:Eh,text:"Attiva Notifiche",color:"text-muted-foreground"}:a?{icon:In,text:"Configurazione token in corso...",color:"text-blue-500"}:i?{icon:In,text:"Notifiche Attive",color:"text-green-500"}:l?{icon:Eh,text:"Notifiche Disabilitate",color:"text-red-500"}:{icon:In,text:"Configurazione token in corso...",color:"text-blue-500"},y=(d==null?void 0:d.username)==="Fabio"||(d==null?void 0:d.username)==="Ludovica",b=(d==null?void 0:d.role)==="admin",w=y?{icon:Mm,title:"TopiniTask",iconBgColor:"bg-burnt-newStyle",iconTextColor:"text-white"}:{icon:MA,title:"HomeTask",iconBgColor:"bg-burnt-newStyle",iconBgStyle:{},iconTextColor:"text-white"},S=w.icon;return c.jsx(c.Fragment,{children:c.jsx("header",{className:"bg-card shadow-md border-b border-border sticky top-0 z-50 transition-colors duration-200",children:c.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Q,{variant:"ghost",size:"sm",className:"lg:hidden p-2 text-delft-blue hover:bg-muted",onClick:t,children:c.jsx(eH,{className:"h-6 w-6"})}),c.jsxs("div",{className:"flex items-center ml-2 lg:ml-0",children:[c.jsx("div",{className:"w-8 h-8 ".concat(w.iconBgColor," rounded-lg flex items-center justify-center mr-3 shadow-sm"),style:w.iconBgStyle,children:c.jsx(S,{className:"h-5 w-5 ".concat(w.iconTextColor)})}),c.jsx("h1",{className:"text-xl font-bold text-delft-blue",children:w.title}),y&&c.jsx("div",{className:"ml-2 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 text-xs rounded-full font-medium",children:" topiiiiiiii"})]})]}),c.jsx("nav",{className:"hidden md:flex space-x-8",children:g.map(A=>c.jsx(Zl,{href:A.path,children:c.jsx("span",{className:"font-medium px-1 pb-4 border-b-2 transition-colors cursor-pointer block ".concat(m===A.path?"text-burnt-newStyle border-burnt-newStyle":"text-muted-foreground hover:text-delft-blue border-transparent hover:border-muted"),children:A.name})},A.name))}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[c.jsx(Aj,{variant:"default"}),c.jsx(dg,{variant:"desktop",priceSelectionService:u})]}),c.jsx("div",{className:"hidden sm:block md:hidden",children:c.jsx(Aj,{variant:"compact"})}),c.jsxs(Uh,{children:[c.jsx(Wh,{asChild:!0,children:c.jsxs(Q,{variant:"ghost",className:"hidden sm:flex items-center space-x-2 ml-2 h-auto p-2 hover:bg-muted transition-colors rounded-lg",children:[c.jsx("div",{className:"w-8 h-8 ".concat(y?"":"bg-cambridge-newStyle"," rounded-full flex items-center justify-center shadow-sm"),style:y?{backgroundColor:"rgb(37, 99, 235)"}:{},children:y?c.jsx(Mm,{className:"h-4 w-4 text-white"}):c.jsx(ji,{className:"h-4 w-4 text-white"})}),c.jsx("span",{className:"text-sm font-medium text-delft-blue",children:d==null?void 0:d.username}),c.jsx(Na,{className:"h-3 w-3 text-muted-foreground"})]})}),c.jsxs(Hu,{align:"end",className:"w-56",children:[c.jsxs(O6,{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-6 h-6 ".concat(y?"":"bg-cambridge-newStyle"," rounded-full flex items-center justify-center"),style:y?{backgroundColor:"rgb(37, 99, 235)"}:{},children:y?c.jsx(Mm,{className:"h-3 w-3 text-white"}):c.jsx(ji,{className:"h-3 w-3 text-white"})}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:d==null?void 0:d.username}),c.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[c.jsx(ne,{variant:"outline",className:"px-1 py-0 text-xs",children:d==null?void 0:d.role}),y&&c.jsx("span",{children:""})]})]})]}),c.jsx(Jl,{}),c.jsxs(Tr,{onClick:p,className:"flex items-center cursor-pointer",children:[h==="light"?c.jsx(k0,{className:"mr-2 h-4 w-4"}):c.jsx(L0,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:h==="light"?"Tema Scuro":"Tema Chiaro"})]}),n&&(()=>{const A=v(),_=A.icon;return c.jsxs(Tr,{onClick:()=>G(this,null,function*(){try{e==="granted"?i?yield o():l&&(yield s()):yield r()}catch(E){console.error(" Errore:",E)}}),className:"flex items-center cursor-pointer",children:[c.jsx(_,{className:"mr-2 h-4 w-4 ".concat(A.color)}),c.jsx("span",{className:A.color,children:A.text})]})})(),c.jsx(Jl,{}),c.jsx(Tr,{asChild:!0,children:c.jsxs(Zl,{href:"/settings",className:"flex items-center cursor-pointer",children:[c.jsx(Lu,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Impostazioni"})]})}),b&&c.jsx(Tr,{asChild:!0,children:c.jsxs(Zl,{href:"/admin/panel",className:"flex items-center cursor-pointer",children:[c.jsx(Lr,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Pannello amministratore"})]})}),c.jsx(Jl,{}),c.jsxs(Tr,{onClick:f,className:"flex items-center cursor-pointer text-destructive focus:text-destructive",children:[c.jsx(Ib,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Esci"})]})]})]}),c.jsxs("div",{className:"sm:hidden flex items-center space-x-2",children:[c.jsx(dg,{variant:"mobile",priceSelectionService:u}),c.jsxs(Uh,{children:[c.jsx(Wh,{asChild:!0,children:c.jsx(Q,{variant:"ghost",size:"default",className:"w-12 h-12 rounded-full p-2 text-muted-foreground hover:text-delft-blue hover:bg-muted transition-colors",children:c.jsx("div",{className:"w-8 h-8 ".concat(y?"":"bg-cambridge-newStyle"," rounded-full flex items-center justify-center shadow-sm"),style:y?{backgroundColor:"rgb(37, 99, 235)"}:{},children:y?c.jsx(Mm,{className:"h-5 w-5 text-white"}):c.jsx(ji,{className:"h-5 w-5 text-white"})})})}),c.jsxs(Hu,{align:"end",className:"w-52",children:[c.jsx("div",{className:"p-3 border-b",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-sm",children:d==null?void 0:d.username}),c.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[c.jsx(ne,{variant:"outline",className:"px-1 py-0 text-xs",children:d==null?void 0:d.role}),y&&c.jsx("span",{children:""})]})]}),c.jsx(jee,{})]})}),c.jsxs(Tr,{onClick:p,className:"flex items-center cursor-pointer",children:[h==="light"?c.jsx(k0,{className:"mr-2 h-4 w-4"}):c.jsx(L0,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:h==="light"?"Tema Scuro":"Tema Chiaro"})]}),n&&(()=>{const A=v(),_=A.icon;return c.jsxs(Tr,{onClick:()=>G(this,null,function*(){try{e==="granted"?i?yield o():l&&(yield s()):yield r()}catch(E){console.error(" Errore:",E)}}),className:"flex items-center cursor-pointer",children:[c.jsx(_,{className:"mr-2 h-4 w-4 ".concat(A.color)}),c.jsx("span",{className:A.color,children:A.text})]})})(),c.jsx(Jl,{}),c.jsx(Tr,{asChild:!0,children:c.jsxs(Zl,{href:"/settings",className:"flex items-center cursor-pointer",children:[c.jsx(Lu,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Impostazioni"})]})}),b&&c.jsx(Tr,{asChild:!0,children:c.jsxs(Zl,{href:"/admin/panel",className:"flex items-center cursor-pointer",children:[c.jsx(Lr,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Pannello amministratore"})]})}),c.jsx(Jl,{}),c.jsxs(Tr,{onClick:f,className:"flex items-center cursor-pointer text-destructive focus:text-destructive",children:[c.jsx(Ib,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Esci"})]})]})]})]})]})]})})})})}function une({isOpen:t,onClose:e}){const[r]=ik(),{user:n}=Bt(),{data:i}=Jt("shopping_items"),{data:a}=Jt("notes"),{data:o}=Jt("calendar_events"),{data:s}=Jt("shopping_food"),l=x.useMemo(()=>{const d=new Date,f=i.filter(S=>S.isPublic||S.createdBy===(n==null?void 0:n.username)||(n==null?void 0:n.role)==="admin"),p=s.filter(S=>S.isPublic||S.createdBy===(n==null?void 0:n.username)||(n==null?void 0:n.role)==="admin").length,m=a.filter(S=>S.isPublic||S.createdBy===(n==null?void 0:n.username)||(n==null?void 0:n.role)==="admin"),g=o.filter(S=>S.isPublic||S.createdBy===(n==null?void 0:n.username)||(n==null?void 0:n.role)==="admin"),v=f.filter(S=>!S.completed).length,y=f.filter(S=>S.completed&&S.completedAt&&cn(S.completedAt,d)).length,b=m.length,w=g.filter(S=>ug(S.startDate,d)).length;return{shopping:v,notes:b,calendar:w,completedToday:y,upcomingEvents:w,shoppingFood:p}},[i,a,o,n]),u=VS();return u.forEach(d=>{switch(d.name){case"Shopping":d.count=l.shopping;break;case"Note":d.count=l.notes;break;case"Spesa":d.count=l.shoppingFood;break;case"Calendario":d.count=l.calendar;break}}),c.jsxs(c.Fragment,{children:[t&&c.jsx("div",{className:"fixed inset-0 z-20 bg-black/50 lg:hidden",onClick:e}),c.jsx("aside",{className:ie("fixed inset-y-0 left-0 z-30 w-64 bg-card border-r border-border shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:w-64",t?"translate-x-0":"-translate-x-full"),children:c.jsxs("div",{className:"flex flex-col h-full pt-16 lg:pt-0",children:[c.jsx("div",{className:"hidden lg:block px-6 py-4 border-b border-border",children:c.jsx("h2",{className:"text-lg font-semibold text-card-foreground",children:"Menu"})}),c.jsxs("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:[u.map(d=>{const f=d.icon,h=r===d.path;return c.jsx(Zl,{href:d.path,children:c.jsxs("div",{className:ie("group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 cursor-pointer",h?"bg-burnt-newStyle/10 text-burnt-newStyle border border-burnt-newStyle/20":"text-muted-foreground hover:bg-muted hover:text-card-foreground border border-transparent"),onClick:()=>window.innerWidth<1024&&e(),children:[c.jsx(f,{className:ie("mr-3 h-5 w-5 transition-colors",h?"text-burnt-newStyle":"text-muted-foreground group-hover:text-card-foreground")}),c.jsx("span",{className:"flex-1",children:d.name}),d.count!=null&&d.count>0&&c.jsx("span",{className:ie("text-xs px-2 py-1 rounded-full font-medium transition-colors",h?"bg-burnt-newStyle text-white":"bg-muted text-muted-foreground group-hover:bg-muted-foreground/10"),children:d.count})]})},d.name)}),c.jsx("div",{className:"border-t border-border my-4"}),c.jsxs("a",{href:"https://fabiodagostino.github.io/TripTaste/#/",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 cursor-pointer text-muted-foreground hover:bg-muted hover:text-card-foreground border border-transparent",onClick:()=>window.innerWidth<1024&&e(),children:[c.jsx(rl,{className:"mr-3 h-5 w-5 transition-colors text-muted-foreground group-hover:text-card-foreground"}),c.jsx("span",{className:"flex-1",children:"TripTaste"}),c.jsx("span",{className:"text-xs px-2 py-1 rounded-full font-medium transition-colors bg-muted text-muted-foreground group-hover:bg-muted-foreground/10",children:""})]})]}),c.jsx("div",{className:"px-4 py-4 border-t border-border mt-auto",children:c.jsxs("div",{className:"bg-cambridge-newStyle/10 dark:bg-cambridge-newStyle/20 rounded-lg p-4 border border-cambridge-newStyle/20",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsx(Xr,{className:"h-4 w-4 text-cambridge-newStyle mr-2"}),c.jsx("h3",{className:"text-sm font-semibold text-card-foreground",children:"Statistiche Rapide"})]}),c.jsxs("div",{className:"space-y-2 text-xs",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-muted-foreground",children:"Archiviati Oggi"}),c.jsx("span",{className:"font-medium text-cambridge-newStyle bg-cambridge-newStyle/10 px-2 py-1 rounded-full",children:l.completedToday})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-muted-foreground",children:"Eventi Prossimi"}),c.jsx("span",{className:"font-medium text-sunset bg-sunset/10 px-2 py-1 rounded-full",children:l.upcomingEvents})]})]})]})})]})})]})}const dne=()=>{const[t,e]=x.useState(!0),[r,n]=x.useState(0);return x.useEffect(()=>{const i=()=>{const a=window.scrollY,o=a>r;e(!o),n(a)};return window.addEventListener("scroll",i,{passive:!0}),()=>window.removeEventListener("scroll",i)},[r]),t},Gc={primary:"linear-gradient(50deg, #536DFE 0%, #663EF3 100%)",accent:"#ff6b35",white:"#ffffff"},qc={buttonAriaLabel:"Apri chat AI",closeAriaLabel:"Chiudi chat",assistantName:"Task AI",statusOnline:"Online",welcomeMessage:"Ciao! Sono il tuo Garibaldi. Come posso aiutarti oggi?"};class z5{constructor(e={},r){Rt(this,"apiEndpoint","https://api.openai.com/v1/chat/completions");Rt(this,"apiKey");Rt(this,"model");Rt(this,"maxTokens");Rt(this,"temperature");Rt(this,"systemPrompt");Rt(this,"openAIHistory",[]);this.apiKey=e.apiKey||"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",this.model=e.model||"gpt-4.1-nano",this.maxTokens=e.maxTokens||1e3,this.temperature=e.temperature||.7,this.systemPrompt=e.systemPrompt||"Sei un assistente AI utile, ti chiami Garibaldi, amichevole, familiare e usi le emoji e ogni tanto (una volta su 3 circa) mi chiami per nome: "+r,this.apiKey||(console.error(" ATTENZIONE: Chiave API OpenAI mancante!"),console.log(" Configura OPENAI_API_KEY nelle variabili d'ambiente")),this.initializeSystemPrompt()}sendMessage(e){return G(this,null,function*(){this.validateApiKey();try{this.addUserMessageToContext(e),console.log(" Context: ".concat(this.openAIHistory.length," messaggi, ~").concat(this.estimateTokens()," token")),console.log(this.openAIHistory);const r=yield this.callOpenAI();console.log(r);const n=this.extractResponseText(r),i={id:this.generateId(),text:n,isUser:!1,timestamp:new Date,isVoice:!1};return this.addAssistantMessageToContext(i),i}catch(r){throw console.error(" Errore nell'invio del messaggio:",r),this.handleApiError(r)}})}getContextStats(){const e=this.estimateTokens(),r=1e6;return{messageCount:this.openAIHistory.length,estimatedTokens:e,maxTokens:r,utilization:"".concat((e/r*100).toFixed(2),"%")}}clearContext(){this.openAIHistory=this.openAIHistory.slice(0,1)}setSystemPrompt(e){this.systemPrompt=e,this.openAIHistory[0]={role:"system",content:e},console.log(" Prompt di sistema aggiornato")}getConversationHistory(){const e=[];for(let r=1;r<this.openAIHistory.length;r++){const n=this.openAIHistory[r];n.content.startsWith("")||e.push({id:this.generateId(),text:n.content,isUser:n.role==="user",timestamp:new Date,isVoice:!1})}return e}initializeSystemPrompt(){this.openAIHistory=[{role:"system",content:this.systemPrompt}]}validateApiKey(){if(!this.apiKey)throw new Error(" Chiave API OpenAI non configurata. Imposta OPENAI_API_KEY nelle variabili d'ambiente.")}addUserMessageToContext(e){this.openAIHistory.push({role:"user",content:e.text})}addAssistantMessageToContext(e){this.openAIHistory.push({role:"assistant",content:e.text})}callOpenAI(){return G(this,null,function*(){var r;const e=yield fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey)},body:JSON.stringify({model:this.model,messages:this.openAIHistory,max_tokens:this.maxTokens,temperature:this.temperature,top_p:1,frequency_penalty:0,presence_penalty:0})});if(!e.ok){const n=yield e.json().catch(()=>({}));throw new Error("API Error ".concat(e.status,": ").concat(((r=n.error)==null?void 0:r.message)||"Unknown error"))}return e.json()})}extractResponseText(e){if(!e.choices||e.choices.length===0)throw new Error("Nessuna risposta ricevuta da OpenAI");return e.choices[0].message.content.trim()}handleApiError(e){if(e instanceof Error){const r=e.message.toLowerCase();if(r.includes("401"))return new Error(" Chiave API non valida. Verifica la tua chiave OpenAI.");if(r.includes("429"))return new Error(" Limite di rate raggiunto. Riprova tra qualche momento.");if(r.includes("insufficient_quota"))return new Error(" Quota API esaurita. Verifica il tuo account OpenAI.");if(r.includes("context_length_exceeded"))return new Error(" Context troppo lungo. Pulisci la cronologia con clearContext().")}return new Error(" Errore del servizio chat: ".concat(e instanceof Error?e.message:"Errore sconosciuto"))}estimateTokens(){const e=this.openAIHistory.map(r=>r.content).join(" ");return Math.ceil(e.length/4)}generateId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}}const fne=(t,e)=>new z5(e,t);class V5{constructor(e,r="user"){Rt(this,"chatService");Rt(this,"currentUsername");this.currentUsername=r,this.chatService=new z5({apiKey:e,systemPrompt:this.getSystemPrompt(),temperature:.3,maxTokens:1500},this.currentUsername)}processUserMessage(e){return G(this,null,function*(){try{const r={id:this.generateId(),text:e,isUser:!0,timestamp:new Date,isVoice:!1},n=yield this.chatService.sendMessage(r);return console.log(n),this.parseAIResponse(n.text)}catch(r){return console.error(" Errore nel processamento del messaggio:",r),{type:"conversation",message:"Mi dispiace, ho avuto un problema nel comprendere la tua richiesta. Puoi riprovare?"}}})}continueConversation(e){return G(this,null,function*(){return this.processUserMessage(e)})}clearConversation(){this.chatService.clearContext()}setCurrentUser(e){this.currentUsername=e}getSystemPrompt(){const e=new Date,r=e.toISOString().split("T")[0],n=e.toTimeString().split(" ")[0];return"Sei un assistente AI chiamato Garibaldi specializzato nella gestione di una Family Task Tracker App. \nIl tuo compito  interpretare le richieste dell'utente e creare JSON strutturati per gestire:\n-  Eventi del calendario\n-  Promemoria\n-  Note\n-  Liste della spesa\n\n**NUOVE FUNZIONALIT**: Puoi anche gestire cancellazione e modifica di elementi esistenti.\n\n **INFORMAZIONI UTENTE**:\n- L'utente si chiama: ".concat(this.currentUsername,"\n- Usa SEMPRE il suo nome nelle conversazioni normali\n- Comportati come se lo conoscessi personalmente\n- Personalizza le risposte per lui/lei\n\n **CONTESTO TEMPORALE**:\n- Data di oggi: ").concat(r,"\n- Ora corrente: ").concat(n,'\n- Fuso orario dell\'utente: Europe/Rome (CET/CEST, considera UTC+2 durante l\'ora legale estiva e UTC+1 in quella solare).\n\n **GESTIONE CONVERSAZIONI MULTI-TURN**:\n- MANTIENI il contesto della conversazione precedente\n- Se hai chiesto chiarimenti per creare/modificare/eliminare un elemento, COMBINA le risposte con la richiesta originale\n- RICONOSCI risposte come "tutto il giorno", "pane e latte", "alle 15:00"\n- Quando hai abbastanza informazioni, GENERA il JSON finale per l\'elemento\n- NON dimenticare cosa l\'utente stava cercando di creare\n\n **REGOLE FONDAMENTALI**:\n\n1. **RICONOSCIMENTO INTENTI**: Analizza il messaggio per identificare cosa vuole creare/modificare/cancellare\n2. **ESTRAZIONE DATI**: Estrai tutti i dati disponibili dal testo E dai messaggi precedenti\n3. **VALIDAZIONE**: Se mancano dati essenziali, chiedi chiarimenti SPECIFICI\n4. **FORMATO RISPOSTA**: Rispondi SEMPRE e SOLO con JSON valido\n\n **FORMATI DI RISPOSTA**:\n\n**CANCELLAZIONE ELEMENTI**:\n```json\n{\n  "type": "delete_query",\n  "data": {\n    "entityType": "shopping_food|reminders|notes|calendar_events",\n    "searchCriteria": {\n      "searchText": "testo di ricerca libero estratto dal messaggio",\n      "dateRange": {\n        "from": "2025-MM-DDTHH:mm:00.000Z",\n        "to": "2025-MM-DDTHH:mm:00.000Z"\n      },\n      "filters": {\n        "title": "titolo esatto o parziale",\n        "createdBy": "').concat(this.currentUsername,'",\n        "isCompleted": true/false,\n        "isActive": true/false,\n        "category": "categoria se specificata",\n        "reminderType": "personal|family|work|health|shopping|event|other",\n        "eventType": "personal|family|work|appointment|reminder",\n        "isPublic": true/false,\n        "isPinned": true/false,\n        "isAllDay": true/false\n      },\n      "limit": 10\n    },\n    "confirmationRequired": true,\n    "deleteType": "single|multiple|all_matching"\n  }\n}\n```\n\n**MODIFICA ELEMENTI**:\n```json\n{\n  "type": "update_query", \n  "data": {\n    "entityType": "shopping_food|reminders|notes|calendar_events",\n    "searchCriteria": {\n      "searchText": "testo per identificare elemento da modificare",\n      "dateRange": {\n        "from": "2025-MM-DDTHH:mm:00.000Z",\n        "to": "2025-MM-DDTHH:mm:00.000Z"\n      },\n      "filters": {\n        "title": "titolo per trovare elemento",\n        "createdBy": "').concat(this.currentUsername,'",\n        "isCompleted": true/false,\n        "isActive": true/false,\n        "category": "categoria",\n        "reminderType": "tipo promemoria",\n        "eventType": "tipo evento",\n        "isPublic": true/false,\n        "isPinned": true/false,\n        "isAllDay": true/false\n      },\n      "limit": 1\n    },\n    "updates": {\n      "title": "nuovo titolo se specificato",\n      "scheduledTime": "2025-MM-DDTHH:mm:00.000Z",\n      "message": "nuovo messaggio promemoria",\n      "content": "nuovo contenuto nota",\n      "startDate": "2025-MM-DDTHH:mm:00.000Z",\n      "endDate": "2025-MM-DDTHH:mm:00.000Z",\n      "isAllDay": true/false,\n      "isPublic": true/false,\n      "isPinned": true/false,\n      "items": {\n        "action": "add|remove|update",\n        "items": ["elemento1", "elemento2"]\n      }\n    },\n    "confirmationRequired": true\n  }\n}\n```\n\n**EVENTO CALENDARIO**:\n```json\n{\n  "type": "calendar_events",\n  "data": {\n    "title": "string", // OBBLIGATORIO - se manca, chiedi chiarimenti\n    "description": "",\n    "startDate": "2025-MM-DDTHH:mm:00.000Z", // OBBLIGATORIO - formato ISO\n    "endDate": "2025-MM-DDTHH:mm:00.000Z", // OBBLIGATORIO - formato ISO\n    "isAllDay": boolean, // true se "tutto il giorno" o nessun orario specifico\n    "isPublic": boolean, // false di default\n    "eventType": "personal|family|work|appointment|reminder", // "personal" di default\n    "color": "#E07A5F", // colore di default\n    "reminderMinutes": number // 15 se non isAllDay, 240 (4 ore) se isAllDay\n  }\n}\n```\n\n**PROMEMORIA**:\n```json\n{\n  "type": "reminders",\n  "data": {\n    "title": "string", // OBBLIGATORIO - se manca, chiedi chiarimenti\n    "message": "string", // uguale a title se non specificato\n    "scheduledTime": "2025-MM-DDTHH:mm:00.000Z", // OBBLIGATORIO - formato ISO\n    "isPublic": boolean, // false di default\n    "reminderType": "personal|family|work|health|shopping|event|other" // "personal" di default\n  }\n}\n```\n\n**NOTA**:\n```json\n{\n  "type": "notes",\n  "data": {\n    "title": "string", // OBBLIGATORIO - se manca, chiedi chiarimenti\n    "content": "string", // uguale a title se non specificato\n    "isPublic": boolean, // false di default\n    "isPinned": boolean // false di default\n  }\n}\n```\n\n**LISTA DELLA SPESA**:\n```json\n{\n  "type": "shopping_food",\n  "data": {\n    "title": "string", // se manca utilizza: "Spesa del ').concat(r.split("-").reverse().join("/"),'"\n    "items": ["item1", "item2", "item3"], // OBBLIGATORIO - array di stringhe\n    "isPublic": boolean // false di default\n  }\n}\n```\n\n**RICHIESTA CHIARIMENTI**:\n```json\n{\n  "type": "clarification",\n  "message": "Ciao ').concat(this.currentUsername,'! Per completare [operazione], puoi dirmi [informazione specifica mancante]?",\n  "missingFields": ["campo1", "campo2"]\n}\n```\n\n**CONVERSAZIONE NORMALE**:\n```json\n{\n  "type": "conversation",\n  "message": "Risposta conversazionale cordiale e personalizzata"\n}\n```\n\n **ESEMPI DI RICONOSCIMENTO**:\n\n**Cancellazione**:\n- "cancella il promemoria del dentista"  delete_query:\n```json\n{\n  "type": "delete_query",\n  "data": {\n    "entityType": "reminders",\n    "searchCriteria": {\n      "searchText": "dentista",\n      "filters": {\n        "createdBy": "').concat(this.currentUsername,'",\n        "isActive": true\n      },\n      "limit": 5\n    },\n    "confirmationRequired": true,\n    "deleteType": "single"\n  }\n}\n```\n\n- "elimina la lista della spesa di ieri"  delete_query:\n```json\n{\n  "type": "delete_query",\n  "data": {\n    "entityType": "shopping_food",\n    "searchCriteria": {\n      "dateRange": {\n        "from": "2025-07-29T00:00:00.000Z",\n        "to": "2025-07-29T23:59:59.000Z"\n      },\n      "filters": {\n        "createdBy": "').concat(this.currentUsername,'"\n      },\n      "limit": 10\n    },\n    "confirmationRequired": true,\n    "deleteType": "multiple"\n  }\n}\n```\n\n**Modifica**:\n- "cambia l\'orario del promemoria dentista alle 15:00"  update_query:\n```json\n{\n  "type": "update_query",\n  "data": {\n    "entityType": "reminders",\n    "searchCriteria": {\n      "searchText": "dentista",\n      "filters": {\n        "createdBy": "').concat(this.currentUsername,'",\n        "isActive": true\n      },\n      "limit": 1\n    },\n    "updates": {\n      "scheduledTime": "2025-07-31T13:00:00.000Z"\n    },\n    "confirmationRequired": true\n  }\n}\n```\n\n- "aggiungi pane alla lista spesa"  update_query:\n```json\n{\n  "type": "update_query",\n  "data": {\n    "entityType": "shopping_food",\n    "searchCriteria": {\n      "filters": {\n        "createdBy": "').concat(this.currentUsername,'",\n        "isCompleted": false\n      },\n      "limit": 1\n    },\n    "updates": {\n      "items": {\n        "action": "add",\n        "items": ["pane"]\n      }\n    },\n    "confirmationRequired": false\n  }\n}\n```\n\n **PER CONVERSAZIONI NORMALI (type: conversation)**:\n- Sii sempre gentile e cordiale con ').concat(this.currentUsername,"\n- Usa emoji appropriate per rendere la conversazione pi vivace\n- Crea un'esperienza conversazionale piacevole e personalizzata\n- Se ti chiedono il nome, rispondi che si chiama ").concat(this.currentUsername,'\n- Comportati come un assistente personale che conosce l\'utente\n\n **IMPORTANTE - STRUTTURA JSON**:\n- Rispondi SEMPRE con JSON valido in italiano\n- NON aggiungere testo prima o dopo il JSON\n- Per delete_query e update_query, i filtri DEVONO essere dentro searchCriteria.filters, NON direttamente in searchCriteria\n- Usa sempre il formato ISO per le date (YYYY-MM-DDTHH:mm:ss.sssZ)\n- Interpreta date relative (domani, tra 2 ore, luned prossimo, etc.)\n- MANTIENI il contesto della conversazione per completare creazioni multi-turn\n- Considera gli orari e le date all\'italiana. Quindi 17 vuol dire 5PM e le date saranno sempre giorno/mese/anno\n- Esempio CORRETTO di searchCriteria:\n```json\n"searchCriteria": {\n  "searchText": "testo libero",\n  "filters": {\n    "title": "titolo",\n    "createdBy": "').concat(this.currentUsername,'"\n  }\n}\n```\n- Esempio SBAGLIATO (NON fare cos):\n```json\n"searchCriteria": {\n  "title": "titolo",\n  "createdBy": "').concat(this.currentUsername,'"\n}\n```')}parseAIResponse(e){var r,n,i;try{let a=e.trim();a.startsWith("```json")?a=a.replace(/^```json\s*/,"").replace(/\s*```$/,""):a.startsWith("```")&&(a=a.replace(/^```\s*/,"").replace(/\s*```$/,""));const o=JSON.parse(a);if(!o.type)throw new Error("Tipo di risposta mancante");return o.type==="calendar_events"&&o.data&&(o.data.startDate&&(o.data.startDate=new Date(o.data.startDate)),o.data.endDate&&(o.data.endDate=new Date(o.data.endDate))),o.type==="reminders"&&((r=o.data)!=null&&r.scheduledTime)&&(o.data.scheduledTime=new Date(o.data.scheduledTime)),o.type==="delete_query"&&o.data&&(n=o.data.searchCriteria)!=null&&n.dateRange&&(o.data.searchCriteria.dateRange.from&&(o.data.searchCriteria.dateRange.from=new Date(o.data.searchCriteria.dateRange.from)),o.data.searchCriteria.dateRange.to&&(o.data.searchCriteria.dateRange.to=new Date(o.data.searchCriteria.dateRange.to))),o.type==="update_query"&&o.data&&((i=o.data.searchCriteria)!=null&&i.dateRange&&(o.data.searchCriteria.dateRange.from&&(o.data.searchCriteria.dateRange.from=new Date(o.data.searchCriteria.dateRange.from)),o.data.searchCriteria.dateRange.to&&(o.data.searchCriteria.dateRange.to=new Date(o.data.searchCriteria.dateRange.to))),o.data.updates&&(o.data.updates.scheduledTime&&(o.data.updates.scheduledTime=new Date(o.data.updates.scheduledTime)),o.data.updates.startDate&&(o.data.updates.startDate=new Date(o.data.updates.startDate)),o.data.updates.endDate&&(o.data.updates.endDate=new Date(o.data.updates.endDate)))),o}catch(a){return console.error(" Errore nel parsing della risposta AI:",a),console.error(" Risposta originale:",e),{type:"conversation",message:e}}}generateId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}debugParseMessage(e){return G(this,null,function*(){try{const r={id:this.generateId(),text:e,isUser:!0,timestamp:new Date,isVoice:!1};console.log("RISPOSTA");const n=yield this.chatService.sendMessage(r);console.log(n);const i=this.parseAIResponse(n.text);return console.log(i),{input:e,rawResponse:n.text,parsedResponse:i}}catch(r){return{input:e,rawResponse:"",parsedResponse:{type:"conversation",message:"Errore nel debug"},errors:[r instanceof Error?r.message:"Errore sconosciuto"]}}})}}const $j=(t,e)=>new V5(t,e);new V5(void 0,"user");class hne{constructor(e){Rt(this,"smartAssistant",null);Rt(this,"normalChatService");Rt(this,"username");Rt(this,"enableSmartAssistant");Rt(this,"searchProvider");Rt(this,"searchConfigs",{shopping_food:{collection:"shopping_food",titleField:"title",searchableFields:["title","items"],dateField:"createdAt",filterMappings:{isCompleted:"isCompleted",isPublic:"isPublic",createdBy:"createdBy"}},reminders:{collection:"reminders",titleField:"title",searchableFields:["title","message"],dateField:"scheduledTime",filterMappings:{isActive:"isActive",isPublic:"isPublic",reminderType:"reminderType",createdBy:"createdBy"}},notes:{collection:"notes",titleField:"title",searchableFields:["title","content"],dateField:"createdAt",filterMappings:{isPinned:"isPinned",isPublic:"isPublic",createdBy:"createdBy"}},calendar_events:{collection:"calendar_events",titleField:"title",searchableFields:["title","description"],dateField:"startDate",filterMappings:{eventType:"eventType",isAllDay:"isAllDay",isPublic:"isPublic",createdBy:"createdBy"}}});var r;this.username=e.username,this.enableSmartAssistant=(r=e.enableSmartAssistant)!=null?r:!0,this.searchProvider=e.searchProvider,this.normalChatService=fne(this.username,{apiKey:e.apiKey}),this.enableSmartAssistant&&(this.smartAssistant=$j(e.apiKey,e.username))}processMessage(e,r=!1){return G(this,null,function*(){try{return this.enableSmartAssistant?yield this.handleWithSmartAssistant(e,r):yield this.handleWithNormalChat(e,r)}catch(n){return console.error(" Errore nel processamento del messaggio:",n),yield this.handleWithNormalChat(e,r)}})}clearConversation(){this.normalChatService.clearContext(),this.enableSmartAssistant&&this.smartAssistant&&this.smartAssistant.clearConversation()}toggleSmartAssistant(e){this.enableSmartAssistant=e,e&&!this.smartAssistant&&(this.smartAssistant=$j(void 0,this.username))}handleWithSmartAssistant(e,r){return G(this,null,function*(){if(!this.smartAssistant)return yield this.handleWithNormalChat(e,r);const n=yield this.smartAssistant.processUserMessage(e);switch(n.type){case"calendar_events":return this.handleCalendarEventCreation(n.data,e,r);case"reminders":return this.handleReminderCreation(n.data,e,r);case"notes":return this.handleNoteCreation(n.data,e,r);case"shopping_food":return this.handleShoppingListCreation(n.data,e,r);case"clarification":return this.handleClarificationRequest(n,e,r);case"update_query":return yield this.handleUpdateItem(n,e,r);case"delete_query":return yield this.handleDeleteItem(n,e,r);case"conversation":default:return yield this.handleWithNormalChat(e,r)}})}handleWithNormalChat(e,r){return G(this,null,function*(){const n={id:this.generateId(),text:e,isUser:!0,timestamp:new Date,isVoice:r};return{message:yield this.normalChatService.sendMessage(n)}})}executeSearch(e,r){return G(this,null,function*(){var n;console.log(" Esecuzione ricerca dinamica:",e);try{if(console.log(e),(n=this.searchProvider)!=null&&n.executeQuery)return yield this.searchProvider.executeQuery(e,r);throw"searchProvider non registrato"}catch(i){throw console.error(" Errore nella ricerca:",i),i}})}__mockDynamicSearch(e){return G(this,null,function*(){const r=this.searchConfigs[e.entityType];if(!r)return[];let i=this.generateMockData(e.entityType).filter(a=>{var o;if(a.createdBy!==this.username)return!1;if(e.searchText){const s=e.searchText.toLowerCase(),l=(o=a.title)==null?void 0:o.toLowerCase().includes(s),u=r.searchableFields.some(d=>{var f;return(f=a[d])==null?void 0:f.toString().toLowerCase().includes(s)});if(!l&&!u)return!1}if(e.filters)for(const[s,l]of Object.entries(e.filters)){const u=r.filterMappings[s]||s;if(a[u]!==void 0&&a[u]!==l)return!1}if(e.dateRange){const s=new Date(a[r.dateField]);if(e.dateRange.from&&s<e.dateRange.from||e.dateRange.to&&s>e.dateRange.to)return!1}return!0});return e.limit&&e.limit>0&&(i=i.slice(0,e.limit)),i})}generateMockData(e){const r=new Date;switch(e){case"shopping_food":return[{id:"1",title:"Spesa del 30/07",items:["pane","latte","uova"],createdBy:this.username,createdAt:r,isCompleted:!1},{id:"2",title:"Lista per cena",items:["pasta","pomodori"],createdBy:this.username,createdAt:new Date(r.getTime()-864e5),isCompleted:!0}];case"reminders":return[{id:"1",title:"Dentista",message:"Controllo annuale",scheduledTime:new Date(r.getTime()+864e5),createdBy:this.username,isActive:!0,reminderType:"health"},{id:"2",title:"Chiamare Mario",message:"Per il progetto",scheduledTime:new Date(r.getTime()+36e5),createdBy:this.username,isActive:!0,reminderType:"work"}];case"notes":return[{id:"1",title:"Appunti riunione",content:"Discusso budget Q4",createdBy:this.username,createdAt:r,isPinned:!1}];case"calendar_events":return[{id:"1",title:"Compleanno Sara",startDate:new Date(r.getTime()+1728e5),endDate:new Date(r.getTime()+1728e5),createdBy:this.username,isAllDay:!0,eventType:"personal"}];default:return[]}}handleDeleteItem(e,r,n){return G(this,null,function*(){let i="",a=[],o="";try{try{if(a=yield this.executeSearch(e.data.searchCriteria,e.data.entityType),o=this.generateResultsPreview(a,e.data.entityType),a.length===0)i=' Non ho trovato nessun elemento corrispondente a "'.concat(r,'". Puoi essere pi specifico?');else if(a.length===1)i="Mi hai chiesto di eliminare ".concat(o,", vero? Sei davvero sicuro? l'azione non pu essere annullata! ");else{const l=this.getEntityDisplayName(e.data.entityType);i=" Trovati ".concat(a.length," ").concat(l,": \n\n ").concat(o,"\n\n **Attenzione:** Verranno cancellati tutti gli elementi trovati.\n\n Vuoi procedere con la cancellazione di tutti?")}}catch(l){l instanceof Error&&(l.message.includes("The query requires an index")?i="Devi aggiungere agli indici la propriet per effettuare la ricerca: "+l.message:i=l.message)}return{message:{id:this.generateId(),text:i,isUser:!1,timestamp:new Date,isVoice:!1},actionRequired:a.length>0?{type:"delete_query",data:e.data,isValid:!0,searchResults:{count:a.length,items:a,preview:o}}:void 0}}catch(s){return this.createErrorResponse("Errore durante la ricerca per cancellazione",s)}})}handleUpdateItem(e,r,n){return G(this,null,function*(){console.log(" Gestione modifica:",e.data);try{const i=yield this.executeSearch(e.data.searchCriteria,e.data.entityType),a=this.generateResultsPreview(i,e.data.entityType);let o;if(i.length===0)o=' Non ho trovato nessun elemento da modificare corrispondente a "'.concat(r,'". Prova ad essere pi specifico!');else if(i.length===1){const l=this.describeUpdates(e.data.updates,e.data.entityType);o="Vuoi che modifico ".concat(a," con le seguenti modifiche da applicare: ").concat(l,"\n\n").concat(e.data.confirmationRequired?", confermi le modifiche?":" procedo con le modifiche!")}else{const l=this.getEntityDisplayName(e.data.entityType),u=this.describeUpdates(e.data.updates,e.data.entityType);o="Trovati ".concat(i.length," ").concat(l,": ").concat(a,". Modifiche da applicare: ").concat(u,". Quale elemento vuoi modificare? Puoi essere pi specifico per identificare quello giusto.")}return{message:{id:this.generateId(),text:o,isUser:!1,timestamp:new Date,isVoice:!1},actionRequired:i.length>0?{type:"update_query",data:e.data,isValid:i.length===1,searchResults:{count:i.length,items:i,preview:a}}:void 0}}catch(i){return this.createErrorResponse("Errore durante la ricerca per modifica",i)}})}generateResultsPreview(e,r){var a;if(e.length===0)return"Nessun elemento trovato";if(e.length===1){const o=e[0];switch(r){case"shopping_food":return'una lista chiamata "'.concat(o.title,'" da ').concat(((a=o.items)==null?void 0:a.length)||0," elementi");case"reminders":return'un promemoria: "'.concat(o.title,'" per ').concat(new Date(o.scheduledTime).toLocaleDateString("it-IT"));case"notes":return'una nota: "'.concat(o.title,'"');case"calendar_events":return'un evento: "'.concat(o.title,'" del ').concat(new Date(o.startDate).toLocaleDateString("it-IT"));default:return'un elemento: "'.concat(o.title||o.id,'"')}}const n=e.slice(0,3).map(o=>'"'.concat(o.title,'"')).join(", "),i=e.length>3?" e altri ".concat(e.length-3):"";return"".concat(n).concat(i)}describeUpdates(e,r){const n=[];if(e.title&&n.push('Titolo: "'.concat(e.title,'"')),e.scheduledTime&&n.push("Nuovo orario: ".concat(this.formatDateTime(e.scheduledTime))),e.message&&n.push('Messaggio: "'.concat(e.message,'"')),e.content&&n.push('Contenuto: "'.concat(e.content,'"')),e.items)switch(e.items.action){case"add":n.push("Aggiungi elementi: ".concat(e.items.items.join(", ")));break;case"remove":n.push("Rimuovi elementi: ".concat(e.items.items.join(", ")));break;case"update":n.push("Modifica elementi della lista");break}return e.isPublic!==void 0&&n.push("Visibilit: ".concat(e.isPublic?"Pubblico":"Privato")),e.isPinned!==void 0&&n.push("".concat(e.isPinned?"Fissa":"Sfissa","** nota")),e.isAllDay!==void 0&&n.push("Modalit: ".concat(e.isAllDay?"Tutto il giorno":"Orario specifico")),e.startDate&&e.endDate&&n.push("Nuovo periodo: ".concat(this.formatDateRange(e.startDate,e.endDate,e.isAllDay||!1))),n.length>0?n.join("\n"):"Nessuna modifica specificata"}getEntityDisplayName(e){return{shopping_food:"liste della spesa",reminders:"promemoria",notes:"note",calendar_events:"eventi del calendario"}[e]||"elementi"}createErrorResponse(e,r){const n=r instanceof Error?r.message:"Errore sconosciuto";return console.error(" ".concat(e,":"),r),{message:{id:this.generateId(),text:"".concat(e," ").concat(n,". Puoi riprovare o essere pi specifico nella richiesta."),isUser:!1,timestamp:new Date,isVoice:!1}}}validateCalendarEventData(e){try{return new Ud("temp-id",e.title,e.startDate,e.endDate,this.username,void 0,e.isAllDay,e.isPublic,e.eventType,e.color,void 0,[],new Date,new Date,e.reminderMinutes).validate(),{isValid:!0,errors:[]}}catch(r){return r instanceof xt?{isValid:!1,errors:r.errors}:{isValid:!1,errors:["Errore di validazione sconosciuto"]}}}validateReminderData(e){try{return new As("temp-id",e.title,e.message,e.scheduledTime,this.username,new Date,new Date,!0,e.isPublic,!1,void 0,e.reminderType,!1,void 0,void 0,void 0,0,"medium",[],void 0).validate(),{isValid:!0,errors:[]}}catch(r){return r instanceof xt?{isValid:!1,errors:r.errors}:{isValid:!1,errors:["Errore di validazione sconosciuto"]}}}validateNoteData(e){try{return new Vd("temp-id",e.title,e.content,this.username,new Date,new Date,e.isPublic,[],e.isPinned,"#F3F4F6",[],void 0).validate(),{isValid:!0,errors:[]}}catch(r){return r instanceof xt?{isValid:!1,errors:r.errors}:{isValid:!1,errors:["Errore di validazione sconosciuto"]}}}validateShoppingFoodData(e){try{const r=[];if((!e.title||e.title.trim().length===0)&&r.push("Titolo lista  obbligatorio"),(!e.items||!Array.isArray(e.items)||e.items.length===0)&&r.push("La lista deve contenere almeno un elemento"),e.items&&Array.isArray(e.items))for(let n=0;n<e.items.length;n++){const i=e.items[n];if(!i||i.trim().length===0){r.push("Elemento ".concat(n+1," della lista  vuoto"));continue}try{kh.createShoppingItem({id:"temp-id",category:"Alimentari",createdBy:this.username,link:"https://example.com/search?q=".concat(encodeURIComponent(i)),name:i,isPublic:e.isPublic,completed:!1,priority:"medium",createdAt:new Date,updatedAt:new Date})}catch(a){a instanceof xt?r.push('Elemento "'.concat(i,'": ').concat(a.errors.join(", "))):r.push('Elemento "'.concat(i,'": errore validazione'))}}return{isValid:r.length===0,errors:r}}catch(r){return{isValid:!1,errors:["Errore di validazione lista spesa"]}}}handleCalendarEventCreation(e,r,n){const i=this.validateCalendarEventData(e),a=i.isValid?'Dunque il titolo  "'.concat(e.title,"\" e l'ho fissato per il ").concat(this.formatDateRange(e.startDate,e.endDate,e.isAllDay),".\nIl promemoria ti avvertir ").concat(e.reminderMinutes," minuti prima."):"Mi scuso ma non posso creare l'evento. Mancano alcune informazioni: ".concat(i.errors.map(s=>" ".concat(s)).join("\n"),". Puoi fornire maggiori dettagli?");return{message:{id:this.generateId(),text:a,isUser:!1,timestamp:new Date,isVoice:!1},actionRequired:i.isValid?{type:"calendar_events",data:e,isValid:!0}:{type:"calendar_events",data:e,isValid:!1,errors:i.errors}}}handleReminderCreation(e,r,n){const i=this.validateReminderData(e),a=i.isValid?"Ok! vediamo un po'... Il titolo : \"".concat(e.title,'", schedulata per il ').concat(this.formatDateTime(e.scheduledTime),' con il messaggio: "').concat(e.message,'".'):"Mi mancano alcune informazioni: ".concat(i.errors.map(s=>" ".concat(s)).join("\n"),". Puoi fornirmi maggiori dettagli?");return{message:{id:this.generateId(),text:a,isUser:!1,timestamp:new Date,isVoice:!1},actionRequired:i.isValid?{type:"reminders",data:e,isValid:!0}:{type:"reminders",data:e,isValid:!1,errors:i.errors}}}handleNoteCreation(e,r,n){const i=this.validateNoteData(e),a=i.isValid?'Quindi la nota avr questo titolo: "'.concat(e.title,'" e il contenuto: ').concat(e.content,"?.\n"):"Mi scuso ma non posso creare la nota. Mancano alcune informazioni:\n".concat(i.errors.map(s=>" ".concat(s)).join("\n"),". Puoi fornire maggiori dettagli?");return{message:{id:this.generateId(),text:a,isUser:!1,timestamp:new Date,isVoice:!1},actionRequired:i.isValid?{type:"notes",data:e,isValid:!0}:{type:"notes",data:e,isValid:!1,errors:i.errors}}}handleShoppingListCreation(e,r,n){const i=this.validateShoppingFoodData(e),a=i.isValid?'Quindi il titolo sar "'.concat(e.title,'" e i prodotti saranno: ').concat(e.items.slice(0,5).map(s=>"".concat(s,",")).join("\n")).concat(e.items.length>5?"\n... e altri ".concat(e.items.length-5," prodotti, corretto?"):" corretto?"):"Non posso creare la lista se mancano queste informazioni: ".concat(i.errors.map(s=>" ".concat(s)).join("\n"),". Puoi fornire maggiori dettagli?");return{message:{id:this.generateId(),text:a,isUser:!1,timestamp:new Date,isVoice:!1},actionRequired:i.isValid?{type:"shopping_food",data:e,isValid:!0}:{type:"shopping_food",data:e,isValid:!1,errors:i.errors}}}handleClarificationRequest(e,r,n){return{message:{id:this.generateId(),text:e.message,isUser:!1,timestamp:new Date,isVoice:!1}}}formatDateTime(e){return e.toLocaleString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}formatDateRange(e,r,n){return n?e.toDateString()===r.toDateString()?e.toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"".concat(e.toLocaleDateString("it-IT")," - ").concat(r.toLocaleDateString("it-IT")):"".concat(this.formatDateTime(e)," - ").concat(r.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}))}generateId(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}}const pne=t=>new hne(t);class fh{static categorizeProducts(e,r){return G(this,null,function*(){try{this.validateInput(e,r);const n=e.filter(s=>!s.category||s.category==="Altro"||s.category.trim()==="");if(n.length===0)return[];const i=this.createCategorizationPrompt(n,r),a=yield this.callDeepSeekAPI(i);return this.parseCategorizationResponse(a)}catch(n){throw console.error(" Errore durante categorizzazione AI:",n),this.createDetailedError(n)}})}static validateInput(e,r){if(!e||e.length===0)throw new Error("Lista prodotti vuota");if(!r||r.length===0)throw new Error("Lista categorie vuota");if(!"sk-fa7a7447407641f59bccfc09fda3c3d7".startsWith("sk-"))throw new Error("API key DeepSeek mancante o invalida");const i=e.filter(a=>!a.text||a.text.trim()==="");if(i.length>0)throw new Error("".concat(i.length," prodotti hanno testo vuoto"))}static createCategorizationPrompt(e,r){const n=r.map(a=>"- ".concat(a.name,": ").concat(a.description)).join("\n"),i=e.map((a,o)=>"".concat(o+1,'. "').concat(a.text,'"')).join("\n");return"Sei un esperto di categorizzazione prodotti per supermercati. Il tuo compito  assegnare la categoria pi appropriata a ciascun prodotto.\n\nCATEGORIE DISPONIBILI:\n".concat(n,"\n\nPRODOTTI DA CATEGORIZZARE:\n").concat(i,'\n\nISTRUZIONI:\n1. Analizza attentamente ogni prodotto\n2. Assegna la categoria pi specifica e appropriata\n3. Se un prodotto non si adatta a nessuna categoria specifica, usa "Altro"\n4. Considera sinonimi, varianti e marchi comuni\n5. Per prodotti ambigui, scegli la categoria pi probabile\n\nFORMATO RISPOSTA:\nRispondi SOLO con un array JSON valido, senza commenti o spiegazioni:\n[\n  {"productText": "nome esatto del prodotto", "suggestedCategory": "nome categoria"},\n  {"productText": "altro prodotto", "suggestedCategory": "altra categoria"}\n]\n\nIMPORTANTE: \n- Usa ESATTAMENTE i nomi delle categorie fornite\n- Usa ESATTAMENTE il testo dei prodotti come fornito\n- Non aggiungere commenti o testo extra\n- Il JSON deve essere valido e parsabile')}static callDeepSeekAPI(e){return G(this,null,function*(){var s,l,u;const r="sk-fa7a7447407641f59bccfc09fda3c3d7",n={model:this.MODEL,messages:[{role:"user",content:e}],temperature:.1,max_tokens:2e3,stream:!1},i={"Content-Type":"application/json",Authorization:"Bearer ".concat(r),"User-Agent":"FamilyTaskTracker-Categorization/1.0"},a=new AbortController,o=setTimeout(()=>a.abort(),this.TIMEOUT);try{const d=yield fetch(this.API_ENDPOINT,{method:"POST",headers:i,body:JSON.stringify(n),signal:a.signal});if(clearTimeout(o),!d.ok){const p=yield d.text();throw new Error("HTTP ".concat(d.status,": ").concat(p))}const h=(u=(l=(s=(yield d.json()).choices)==null?void 0:s[0])==null?void 0:l.message)==null?void 0:u.content;if(!h)throw new Error("Risposta DeepSeek vuota o malformata");return h}catch(d){throw clearTimeout(o),d==="AbortError"?new Error("Timeout: DeepSeek non ha risposto entro 30 secondi"):d}})}static parseCategorizationResponse(e){try{let r=e.trim();r=r.replace(/```json\s*/g,"").replace(/```\s*/g,"");const n=r.match(/\[[\s\S]*\]/);if(!n)throw new Error("Nessun array JSON trovato nella risposta");const i=n[0],a=JSON.parse(i);if(!Array.isArray(a))throw new Error("La risposta non  un array");return a.filter(s=>{const l=s&&typeof s.productText=="string"&&typeof s.suggestedCategory=="string"&&s.productText.trim()!==""&&s.suggestedCategory.trim()!=="";return l||console.warn(" Elemento invalido ignorato:",s),l})}catch(r){throw console.error(" Errore parsing JSON:",r),console.error(" Risposta originale:",e.substring(0,500)+"..."),new Error("Errore parsing risposta: ".concat(r))}}static createDetailedError(e){let r="Errore categorizzazione AI";e.message&&(r=e.message),r.includes("401")||r.includes("Unauthorized")?r="API key DeepSeek invalida o scaduta":r.includes("429")||r.includes("rate limit")?r="Limite di rate raggiunto. Riprova tra qualche minuto":r.includes("timeout")||r.includes("network")?r="Errore di connessione. Verifica la tua connessione internet":(r.includes("JSON")||r.includes("parse"))&&(r="DeepSeek ha restituito una risposta malformata. Riprova");const n=new Error(r);return n.name="DeepSeekCategorizationError",e.stack&&(n.stack=e.stack),n}static testConnection(){return G(this,null,function*(){try{const e=[{text:"mela"}],r=[{name:"Ortofrutta",description:"Frutta e verdura"}];return yield this.categorizeProducts(e,r),!0}catch(e){return console.error(" Test connessione DeepSeek fallito:",e),!1}})}static getConfig(){return{apiEndpoint:this.API_ENDPOINT,model:this.MODEL,timeout:this.TIMEOUT,hasApiKey:!0,apiKeyValid:"sk-fa7a7447407641f59bccfc09fda3c3d7".startsWith("sk-")||!1}}}Rt(fh,"API_ENDPOINT","https://api.deepseek.com/chat/completions"),Rt(fh,"MODEL","deepseek-chat"),Rt(fh,"TIMEOUT",3e4);function mne(t,e){var n,i,a,o,s,l,u,d,f,h,p,m,g,v,y,b,w,S,A,_;const r=M(C({},e),{createdAt:((i=(n=e.createdAt)==null?void 0:n.toDate)==null?void 0:i.call(n))||e.createdAt||new Date,updatedAt:((o=(a=e.updatedAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||e.updatedAt||new Date,startDate:((l=(s=e.startDate)==null?void 0:s.toDate)==null?void 0:l.call(s))||e.startDate||void 0,endDate:((d=(u=e.endDate)==null?void 0:u.toDate)==null?void 0:d.call(u))||e.endDate||void 0,completedAt:((h=(f=e.completedAt)==null?void 0:f.toDate)==null?void 0:h.call(f))||e.completedAt||void 0,lastLoginAt:((m=(p=e.lastLoginAt)==null?void 0:p.toDate)==null?void 0:m.call(p))||e.lastLoginAt||void 0,lastViewedAt:((v=(g=e.lastViewedAt)==null?void 0:g.toDate)==null?void 0:v.call(g))||e.lastViewedAt||void 0,lastUsedAt:((b=(y=e.lastUsedAt)==null?void 0:y.toDate)==null?void 0:b.call(y))||e.lastUsedAt||void 0,expiresAt:((S=(w=e.expiresAt)==null?void 0:w.toDate)==null?void 0:S.call(w))||e.expiresAt||void 0,scheduledTime:((_=(A=e.scheduledTime)==null?void 0:A.toDate)==null?void 0:_.call(A))||e.scheduledTime||void 0});try{switch(t){case"shopping_items":return Za.fromFirestore(r);case"categories":return Oo.fromFirestore(r);case"notes":return Vd.fromFirestore(r);case"calendar_events":return Ud.fromFirestore(r);case"users":return zp.fromFirestore(r);case"shopping_food":return ul.fromFirestore(r);case"food_categories":return Ku.fromFirestore(r);case"supermarkets":return Xu.fromFirestore(r);case"fcm-tokens":return Fa.fromFirestore(r);case"reminders":return As.fromFirestore(r);case"fidelity_cards":return Ja.fromFirestore(r);default:return console.warn('Collection "'.concat(t,'" non riconosciuta, usando deserializzazione di default')),r}}catch(E){return console.error('Errore deserializzazione per collection "'.concat(t,'":'),E),r}}class gne{executeQuery(e,r){return G(this,null,function*(){var n;if(!wt)throw new Error("Firebase not configured");console.log(" FirestoreSearchProvider - Esecuzione query:",e);try{const i=this.getCollectionName(r),a=Is(wt,i),o=[];if((n=e.filters)!=null&&n.createdBy&&o.push(Tn("createdBy","==",e.filters.createdBy)),e.filters)for(const[f,h]of Object.entries(e.filters))f!=="createdBy"&&h!==void 0&&(i==="shopping_food"&&f==="isCompleted"?o.push(Tn("isCompleted","==",h)):i==="shopping_food"&&f==="isDeleted"?h===!1?o.push(Tn("isDeleted","in",[!1,null])):o.push(Tn("isDeleted","==",!0)):o.push(Tn(f,"==",h)));if(e.dateRange){const f=this.getDateField(e.entityType);e.dateRange.from&&o.push(Tn(f,">=",_i.fromDate(e.dateRange.from))),e.dateRange.to&&o.push(Tn(f,"<=",_i.fromDate(e.dateRange.to)))}const s=this.getDateField(e.entityType);o.push(gu(s,"desc"));const l=Aa(a,...o);let d=(yield Uc(l)).docs.map(f=>{const h=C({id:f.id},f.data());return mne(i,h)});if(e.searchText){const f=e.searchText.toLowerCase().trim();d=d.filter(h=>{console.log(h);const p=(v,y)=>{if(!v)return!1;const b=v.toLowerCase().replace(/[]/g,"a").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"n").replace(/[]/g,"c"),w=y.toLowerCase().replace(/[]/g,"a").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"n").replace(/[]/g,"c");if(b.includes(w))return!0;const S=w.replace(/\b(il|lo|la|i|gli|le|del|dello|della|dei|degli|delle|dal|dallo|dalla|dai|dagli|dalle|al|allo|alla|ai|agli|alle|nel|nello|nella|nei|negli|nelle|sul|sullo|sulla|sui|sugli|sulle|col|collo|colla|coi|cogli|colle)\b/g,"").replace(/\s+/g," ").trim(),A=b.replace(/\b(il|lo|la|i|gli|le|del|dello|della|dei|degli|delle|dal|dallo|dalla|dai|dagli|dalle|al|allo|alla|ai|agli|alle|nel|nello|nella|nei|negli|nelle|sul|sullo|sulla|sui|sugli|sulle|col|collo|colla|coi|cogli|colle)\b/g,"").replace(/\s+/g," ").trim();if(S&&A.includes(S)||S&&b.includes(S))return!0;const _=w.split(/\s+/).filter(N=>N.length>1);if(_.every(N=>b.includes(N)||A.includes(N))&&_.length>0)return!0;try{const N=S.split("").map(O=>O.match(/[a-z0-9]/)?"".concat(O,".{0,1}"):O).join("");if(new RegExp(N,"i").test(b))return!0}catch(N){}if(w.length>b.length){const N=b.split(/\s+/).filter(O=>O.length>2);if(N.every(O=>w.includes(O))&&N.length>0)return!0}return!1},m=p(h.title||"",f),g=this.searchInContent(h,f,e.entityType)||p(h.content||"",f)||p(h.description||"",f)||p(h.notes||"",f);return m||g})}return e.limit&&e.limit>0&&(d=d.slice(0,e.limit)),console.log(" FirestoreSearchProvider - Trovati ".concat(d.length," risultati")),d}catch(i){throw console.error(" FirestoreSearchProvider - Errore query:",i),new Error("Errore durante la ricerca: ".concat(i instanceof Error?i.message:"Errore sconosciuto"))}})}deleteItem(e,r){return G(this,null,function*(){if(!wt)throw new Error("Firebase not configured");try{const n=this.getCollectionName(e),i=Sa(wt,n,r);return n==="shopping_food"?yield Mu(i,{isDeleted:!0,updatedAt:_i.now()}):yield vu(i),console.log(" FirestoreSearchProvider - Eliminato ".concat(e," con ID: ").concat(r)),!0}catch(n){return console.error(" FirestoreSearchProvider - Errore cancellazione:",n),!1}})}updateItem(e,r,n){return G(this,null,function*(){if(!wt)throw new Error("Firebase not configured");try{const i=this.getCollectionName(e),a=Sa(wt,i,r),o=typeof n.toFirestore=="function"?n.toFirestore():C({},n);o.updatedAt=_i.now(),console.log(o);let s=gi(o);return yield Mu(a,s),console.log(" FirestoreSearchProvider - Aggiornato ".concat(e," con ID: ").concat(r)),!0}catch(i){return console.error(" FirestoreSearchProvider - Errore aggiornamento:",i),!1}})}getCollectionName(e){return{shopping_food:"shopping_food",reminders:"reminders",notes:"notes",calendar_events:"calendar_events"}[e]||e}getDateField(e){return{shopping_food:"createdAt",reminders:"scheduledTime",notes:"createdAt",calendar_events:"startDate"}[e]||"createdAt"}searchInContent(e,r,n){var i,a,o,s;switch(n){case"shopping_food":return((i=e.items)==null?void 0:i.some(l=>{var u;return(u=l.text)==null?void 0:u.toLowerCase().includes(r)}))||!1;case"reminders":return((a=e.message)==null?void 0:a.toLowerCase().includes(r))||!1;case"notes":return((o=e.content)==null?void 0:o.toLowerCase().includes(r))||!1;case"calendar_events":return((s=e.description)==null?void 0:s.toLowerCase().includes(r))||!1;default:return!1}}}let f1=null;const vne=()=>(f1||(f1=new gne),f1),yne=()=>{const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[i,a]=x.useState([]),o=x.useRef(null);x.useEffect(()=>{if(typeof window!="undefined"&&"speechSynthesis"in window){n(!0);const h=()=>{const p=speechSynthesis.getVoices();a(p)};return h(),speechSynthesis.onvoiceschanged=h,()=>{speechSynthesis.onvoiceschanged=null}}},[]);const s=x.useCallback(()=>{if(i.length===0)return null;const h=i.filter(m=>m.lang.startsWith("it-IT")||m.lang.startsWith("it"));if(h.length>0){const m=h.find(g=>g.name.toLowerCase().includes("google"));return m||h[0]}const p=i.filter(m=>m.name.toLowerCase().includes("italian")||m.name.toLowerCase().includes("italia"));return p.length>0?p[0]:null},[i]),l=x.useCallback(h=>{var p,m;if(!r){console.warn("Speech Synthesis non supportato in questo browser"),(p=h.onError)==null||p.call(h,"Speech Synthesis non supportato");return}if(!h.text.trim()){console.warn("Testo vuoto fornito a Speech Synthesis");return}u();try{const g=new SpeechSynthesisUtterance(h.text.trim()),v=h.voice||s();v?(g.voice=v,console.log(" Uso voce: ".concat(v.name," (").concat(v.lang,")"))):console.log(" Voce italiana non trovata, uso voce di default"),g.rate=h.rate||1.3,g.pitch=h.pitch||1,g.volume=h.volume||1,g.onstart=()=>{var y;console.log(" Speech Synthesis: Started"),e(!0),(y=h.onStart)==null||y.call(h)},g.onend=()=>{var y;console.log(" Speech Synthesis: Completed"),e(!1),o.current=null,(y=h.onEnd)==null||y.call(h)},g.onerror=y=>{var b;console.error(" Speech Synthesis Error:",y),e(!1),o.current=null,(b=h.onError)==null||b.call(h,y)},g.onpause=()=>{console.log(" Speech Synthesis: Paused")},g.onresume=()=>{console.log(" Speech Synthesis: Resumed")},o.current=g,speechSynthesis.speak(g)}catch(g){console.error(" Speech Synthesis Exception:",g),e(!1),(m=h.onError)==null||m.call(h,g)}},[r,s]),u=x.useCallback(()=>{r&&(speechSynthesis.cancel(),e(!1),o.current=null,console.log(" Speech Synthesis: Cancelled"))},[r]),d=x.useCallback(()=>{r&&t&&(speechSynthesis.pause(),console.log(" Speech Synthesis: Paused"))},[r,t]),f=x.useCallback(()=>{r&&(speechSynthesis.resume(),console.log(" Speech Synthesis: Resumed"))},[r]);return x.useEffect(()=>()=>{r&&t&&speechSynthesis.cancel()},[r,t]),{speak:l,cancel:u,pause:d,resume:f,speaking:t,supported:r,voices:i,getItalianVoice:s}},xne=t=>{const[e,r]=x.useState(!1),n=x.useRef(!1),[i,a]=x.useState(!1),[o,s]=x.useState(!1),[l,u]=x.useState(!1),d=x.useRef(null),f=x.useRef(null),h=x.useRef(null),p=x.useRef(Math.random().toString(36).substr(2,9)),{speak:m,cancel:g,speaking:v,supported:y,getItalianVoice:b}=yne(),w=x.useCallback((j,P)=>G(Gt,null,function*(){var F,I,k;const D=p.current;if(!y){console.error(" Voice Chat [".concat(D,"]: Speech Synthesis non supportato")),(F=t.onError)==null||F.call(t,"Sintesi vocale non supportata dal browser"),s(!1);return}console.log(" Voice Chat [".concat(D,"]: Fallback Speech Synthesis (").concat(P,"):"),j.substring(0,50));try{s(!0),(I=t.onTTSStart)==null||I.call(t),m({text:j.trim(),rate:1,pitch:1,volume:1,voice:b(),onStart:()=>{console.log(" Voice Chat [".concat(D,"]: Speech Synthesis avviato"))},onEnd:()=>{var R;console.log(" Voice Chat [".concat(D,"]: Speech Synthesis completato")),s(!1),(R=t.onTTSEnd)==null||R.call(t),n.current&&setTimeout(()=>{S()},500)},onError:R=>{var L;console.error(" Voice Chat [".concat(D,"]: Speech Synthesis Error:"),R),s(!1),(L=t.onError)==null||L.call(t,"Errore sintesi vocale nativa")}})}catch(R){console.error(" Voice Chat [".concat(D,"]: Fallback Speech Synthesis failed:"),R),s(!1),(k=t.onError)==null||k.call(t,"Errore fallback sintesi vocale")}}),[m,y,b,t]),S=x.useCallback(()=>{var F;const j=p.current;if(!n.current){console.log(" Voice Chat [".concat(j,"]: Voice chat non attiva, ignoro startListening"));return}if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){console.error(" Voice Chat [".concat(j,"]: Speech Recognition non supportato")),(F=t.onError)==null||F.call(t,"Speech Recognition non supportato");return}d.current&&(d.current.stop(),d.current=null),console.log(" Voice Chat [".concat(j,"]: Avvio ascolto per chat vocale"));const P=window.SpeechRecognition||window.webkitSpeechRecognition,D=new P;D.continuous=!1,D.interimResults=!1,D.lang="it-IT",D.onstart=()=>{if(!n.current){console.log(" Voice Chat [".concat(j,"]: Voice chat non pi attiva, ferma ascolto")),D.stop();return}console.log(" Voice Chat [".concat(j,"]: Ascolto ATTIVO per chat vocale")),a(!0)},D.onresult=I=>{var R;if(!n.current)return;const k=I.results[0][0].transcript;console.log(" Voice Chat [".concat(j,"]: Trascritto:"),k),a(!1),u(!0),(R=t.onTranscript)==null||R.call(t,k),h.current&&clearTimeout(h.current),h.current=window.setTimeout(()=>{n.current&&(console.log(" Voice Chat [".concat(j,"]: Timeout processing, riprovo ascolto")),u(!1),S())},1e4)},D.onerror=I=>{var k;console.error(" Voice Chat [".concat(j,"]: Speech Recognition Error:"),I.error),a(!1),I.error==="no-speech"?n.current&&(console.log(" Voice Chat [".concat(j,"]: No-speech, riprovo in 500ms")),setTimeout(()=>{n.current&&S()},500)):I.error==="aborted"?console.log(" Voice Chat [".concat(j,"]: Riconoscimento interrotto (normale)")):(console.warn(" Voice Chat [".concat(j,"]: Errore riconoscimento ").concat(I.error)),(k=t.onError)==null||k.call(t,"Errore riconoscimento: ".concat(I.error)))},D.onend=()=>{console.log(" Voice Chat [".concat(j,"]: Riconoscimento terminato")),a(!1)},d.current=D,D.start()},[t]),A=x.useCallback((j,P)=>{const D=atob(j),F=new Array(D.length);for(let k=0;k<D.length;k++)F[k]=D.charCodeAt(k);const I=new Uint8Array(F);return new Blob([I],{type:P})},[]),_=x.useCallback(j=>G(Gt,null,function*(){var F,I,k,R,L;const P=p.current;if(j.trim()){if(!n.current){console.log(" Voice Chat [".concat(P,"]: Voice chat non attiva, ignoro speakText"));return}s(!0),(F=t.onTTSStart)==null||F.call(t);try{console.log(" Voice Chat [".concat(P,"]: TTS Cloud tentativo:"),j.substring(0,50));var D=yield fetch(t.ttsEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:j.trim()})});if(!D.ok){console.log(" Voice Chat [".concat(P,"]: HTTP Error ").concat(D.status,", uso fallback")),(I=t.onInfo)==null||I.call(t,"Servizio cloud non disponibile (".concat(D.status,"), uso sintesi nativa")),yield w(j,"HTTP ".concat(D.status));return}const V=yield D.json();if(V.success&&V.audioContent){console.log(" Voice Chat [".concat(P,"]: TTS Cloud riuscito")),f.current&&(f.current.pause(),URL.revokeObjectURL(f.current.src));const W=A(V.audioContent,"audio/mp3"),q=URL.createObjectURL(W),H=new Audio(q);return f.current=H,new Promise(J=>{H.onended=()=>{var de;s(!1),URL.revokeObjectURL(q),(de=t.onTTSEnd)==null||de.call(t),n.current&&setTimeout(()=>{S()},500),J()},H.onerror=de=>{console.log(" Voice Chat [".concat(P,"]: Audio playback failed, uso fallback")),URL.revokeObjectURL(q),w(j,"audio playback error"),J()},H.play().catch(de=>{console.log(" Voice Chat [".concat(P,"]: Audio play failed, uso fallback:"),de),URL.revokeObjectURL(q),w(j,"audio play error"),J()})})}else{const W=V.reason||"service_error",q=V.error||"Errore TTS";console.log(" Voice Chat [".concat(P,"]: TTS Cloud fallito: ").concat(q)),W==="QUOTA_EXCEEDED"?(console.log(" Voice Chat [".concat(P,"]: Quota raggiunta, uso fallback")),(k=t.onInfo)==null||k.call(t,"Quota cloud raggiunta, uso sintesi nativa del browser")):(console.log(" Voice Chat [".concat(P,"]: Servizio non disponibile, uso fallback")),(R=t.onInfo)==null||R.call(t,"Servizio cloud non disponibile, uso sintesi nativa")),yield w(j,W)}}catch(V){console.log(" Voice Chat [".concat(P,"]: Errore rete, uso fallback:"),V),(L=t.onInfo)==null||L.call(t,"Connessione non disponibile, uso sintesi nativa del browser"),yield w(j,"network error")}}}),[t,A,S,w]),E=x.useCallback(()=>{const j=p.current;console.log(" Voice Chat [".concat(j,"]: Avvio chat vocale")),r(!0),n.current=!0,setTimeout(()=>{n.current&&S()},200)},[S]),N=x.useCallback(()=>{const j=p.current;console.log(" Voice Chat [".concat(j,"]: Stop chat vocale")),n.current=!1,r(!1),a(!1),s(!1),u(!1),d.current&&(d.current.stop(),d.current=null),f.current&&(f.current.pause(),URL.revokeObjectURL(f.current.src),f.current=null),g(),h.current&&(clearTimeout(h.current),h.current=null),console.log(" Voice Chat [".concat(j,"]: Chat vocale completamente fermata"))},[g]),T=x.useCallback(j=>G(Gt,null,function*(){const P=p.current;h.current&&(clearTimeout(h.current),h.current=null);const D=j.replace(new RegExp("[\\u{1F000}-\\u{1F9FF}]|[\\u{2600}-\\u{26FF}]|[\\u{2700}-\\u{27BF}]","gu"),"").replace(new RegExp("[\\u{FE00}-\\u{FE0F}]","gu"),"").trim();console.log(" Voice Chat [".concat(P,"]: Risposta vocale:"),D.substring(0,50)),u(!1),yield _(D)}),[_]);return{isVoiceChatActive:e,isListening:i,isSpeaking:o||v,isProcessing:l,isVoiceChatActiveRef:n,startVoiceChat:E,stopVoiceChat:N,respondWithVoice:T,speakText:_,speechSupported:y,hasCloudTTS:!0,hasNativeTTS:y}},bne=t=>{const{data:e}=Jt("shopping_food",{includeDeleted:!0}),{data:r}=Jt("food_categories"),n=vne(),[i,a]=x.useState([{id:"1",text:t.enableSmartAssistant?"Invia un messaggio per cominciare la chat.":qc.welcomeMessage,isUser:!0,timestamp:new Date,isVoice:!1,isSystem:!0}]),[o,s]=x.useState(!1),[l,u]=x.useState(!1),[d,f]=x.useState(""),[h,p]=x.useState(!1),[m,g]=x.useState(!1),[v,y]=x.useState(null);var[b,w]=x.useState(null);const S=x.useRef(null),A=x.useCallback(Y=>{S.current=Y,console.log(" CAMBIO vocalConfirmationActionRef:",Y)},[]),_=x.useCallback(()=>S.current,[]),E=x.useRef(null),N=x.useRef(null),T=xne({ttsEndpoint:"https://europe-west1-familytasktracker-c2dfe.cloudfunctions.net/textToSpeech",onTranscript:Y=>G(Gt,null,function*(){V(Y.toLowerCase(),!0)}),onTTSStart:()=>{console.log(" TTS iniziato")},onTTSEnd:()=>{console.log(" TTS completato")},onError:Y=>{console.error(" Voice Chat Error:",Y),y(Y)}}),O=x.useCallback(Y=>G(Gt,null,function*(){var X;const te=[],ae=[];for(const be of Y){let ue;console.log(e);for(const Pe of e||[]){const oe=Pe.items.find(_e=>_e.text.toLowerCase().trim()===be.toLowerCase().trim());if(oe!=null&&oe.category){ue=oe.category;break}}ue?te.push({id:"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),text:be,completed:!1,category:ue,assignedAutomatically:!0,createdAt:new Date}):ae.push({text:be})}if(ae.length>0)try{const be=(r==null?void 0:r.map(Pe=>({name:Pe.name,description:Pe.description||"Nessuna descrizione disponibile"})))||[],ue=yield fh.categorizeProducts(ae,be);for(let Pe=0;Pe<ae.length;Pe++){const oe=ae[Pe].text,_e=(X=ue[Pe])==null?void 0:X.suggestedCategory;te.push({id:"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),text:oe,completed:!1,category:_e,assignedAutomatically:!0,createdAt:new Date})}}catch(be){console.warn(" Errore nella categorizzazione AI, creo item senza categoria:",be);for(const ue of ae)te.push({id:"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),text:ue.text,completed:!1,assignedAutomatically:!1,createdAt:new Date})}return te.forEach(be=>{be.text=qH(be.text)}),te}),[e,r]);x.useEffect(()=>(N.current=pne({username:t.username,apiKey:t.apiKey,enableSmartAssistant:t.enableSmartAssistant,searchProvider:{executeQuery:n.executeQuery.bind(n),deleteItem:n.deleteItem.bind(n),updateItem:n.updateItem.bind(n)}}),()=>{N.current&&N.current.clearConversation()}),[t.username,t.apiKey,t.enableSmartAssistant]);const j=x.useCallback(()=>{E.current&&(E.current.stop(),p(!1))},[]),P=x.useCallback(()=>{h&&j(),T.startVoiceChat();const Y={id:Date.now().toString(),text:" **Chat vocale attivata!** Ora puoi parlare liberamente con me. D qualcosa per iniziare!",isUser:!1,timestamp:new Date,isVoice:!1,isSystem:!0};a(te=>[...te,Y])},[h,j,T]),D=x.useCallback(()=>{T.stopVoiceChat();const Y={id:Date.now().toString(),text:" **Chat vocale disattivata.** Ora puoi tornare a scrivere normalmente.",isUser:!1,timestamp:new Date,isVoice:!1,isSystem:!0};a(te=>[...te,Y])},[T]),F=x.useCallback(()=>{T.isVoiceChatActive?D():P()},[T.isVoiceChatActive,P,D]),I=x.useCallback((Y=null)=>G(Gt,null,function*(){var te,ae,X,be,ue,Pe,oe,_e;if(Y&&Y.isValid&&(b=Y),!(!b||!b.isValid)){u(!0);try{let De=!1,he="";try{switch(b.type){case"delete_query":if((te=b.searchResults)!=null&&te.items&&b.searchResults.items.length>0)try{let U=0;const Z=b.searchResults.items.length;for(const ce of b.searchResults.items)console.log(" Cancellazione elemento: ".concat(ce.id," (").concat(ce.title,")")),(yield n.deleteItem(b.data.entityType,ce.id))?U++:console.warn(" Impossibile cancellare elemento ".concat(ce.id));U===Z?(De=!0,he=U===1?'Elemento cancellato! "'.concat(b.searchResults.items[0].title,'"  stato eliminato definitivamente'):"".concat(U," elementi cancellati! Tutti gli elementi selezionati sono stati eliminati.")):U>0?(De=!0,he="Cancellazione parziale: ".concat(U," su ").concat(Z," elementi sono stati cancellati. Alcuni potrebbero non essere stati eliminati a causa di errori.")):(De=!1,he="Nessun elemento cancellato! Si  verificato un errore durante la cancellazione.")}catch(U){console.error("Errore durante la cancellazione:",U),De=!1,he="Errore durante la cancellazione: ".concat(U instanceof Error?U.message:"Errore sconosciuto")}else De=!1,he="Nessun elemento da cancellare** trovato.";break;case"update_query":if(((X=(ae=b.searchResults)==null?void 0:ae.items)==null?void 0:X.length)===1){const U=b.searchResults.items[0];try{if(console.log(" Modifica elemento: ".concat(U.id," (").concat(U.title,")")),console.log(" Updates da applicare:",b.data.updates),b.data.entityType==="shopping_food"&&((be=b.data.updates.items)==null?void 0:be.action)==="add"){const Z=U.items||[],ce=b.data.updates.items.items;console.log(" Aggiunta elementi alla lista spesa:",ce),console.log(" Items attuali:",Z);const xe=yield O(ce);console.log(" Items convertiti:",xe);const me=M(C({},U),{items:[...Z,...xe],updatedAt:new Date});De=yield n.updateItem(b.data.entityType,U.id,me),De&&(he="Lista aggiornata! Ho aggiunto ".concat(ce.length===1?'"'.concat(ce[0],'"'):"".concat(ce.length," elementi"),' alla lista "').concat(U.title,'"'))}else if(b.data.entityType==="shopping_food"&&((ue=b.data.updates.items)==null?void 0:ue.action)==="remove"){const Z=U.items||[],ce=b.data.updates.items.items;console.log(" Rimozione elementi dalla lista:",ce);const xe=Z.filter(Te=>!ce.some(tt=>Te.text.toLowerCase().includes(tt.toLowerCase()))),me=M(C({},U),{items:xe,updatedAt:new Date});if(De=yield n.updateItem(b.data.entityType,U.id,me),De){const Te=Z.length-xe.length;he=" **Elementi rimossi!** Ho rimosso ".concat(Te," elemento").concat(Te!==1?"i":"",' dalla lista "').concat(U.title,'"')}}else{const Z=C({},b.data.updates);if(Z.items&&b.data.entityType!=="shopping_food"&&delete Z.items,De=yield n.updateItem(b.data.entityType,U.id,Z),De){const ce=[];Z.title&&ce.push('titolo in "'.concat(Z.title,'"')),Z.scheduledTime&&ce.push("orario a ".concat(W(Z.scheduledTime))),Z.message&&ce.push('messaggio in "'.concat(Z.message,'"')),Z.content&&ce.push("contenuto"),Z.startDate&&Z.endDate&&ce.push("data/orario");const xe=q(b.data.entityType,!0);he=" **".concat(xe," modificat").concat(xe.endsWith("a")?"a":"o","!** Ho cambiato ").concat(ce.join(", "),' per "').concat(U.title,'"')}}De||(he="Errore nella modifica dell'elemento \"".concat(U.title,'". Riprova.'))}catch(Z){console.error("Errore durante l'aggiornamento:",Z),De=!1,he="Errore durante la modifica: ".concat(Z instanceof Error?Z.message:"Errore sconosciuto")}}else((oe=(Pe=b.searchResults)==null?void 0:Pe.items)==null?void 0:oe.length)===0?(De=!1,he="Nessun elemento da modificare trovato."):(_e=b.searchResults)!=null&&_e.items&&b.searchResults.items.length>1&&(De=!1,he="Trovati ".concat(b.searchResults.items.length," elementi. Puoi essere pi specifico per identificare quello da modificare?"));break;case"calendar_events":t.onAddCalendarEvent?(yield t.onAddCalendarEvent(b.data),he="Ho creato il nuovo evento a calendario!"):(console.log(" Creazione evento:",b.data),De=!0);break;case"reminders":t.onAddReminder?(yield t.onAddReminder(b.data),he="Ho creato il nuovo promemoria!"):(console.log(" Creazione promemoria:",b.data),De=!0);break;case"notes":t.onAddNote?(yield t.onAddNote(b.data),he="Ho creato la nuova nota!"):(console.log(" Creazione nota:",b.data),De=!0);break;case"shopping_food":if(he="Ho creato la nuova lista della spesa!",t.onAddShoppingFood){console.log(" Dati originali AI:",b.data);const{title:U,items:Z,isPublic:ce}=b.data,xe=new Date().toISOString().split("T")[0],me=U||"Spesa del ".concat(xe.split("-").reverse().join("/")),Te=yield O(Z),tt=new ul("",me,Te,t.username,new Date,void 0,ce||!1,!1,void 0,void 0,void 0,void 0,[],void 0,!1);yield t.onAddShoppingFood(tt)}else console.log(" Creazione lista spesa (simulazione):",b.data),De=!0;break}De=!0}catch(U){console.error(" Errore nella creazione:",U),De=!1}const z={id:Date.now().toString(),text:De?"Perfetto! ".concat(he,"!"):"Errore! Riprova o contatta il supporto.",isUser:!1,timestamp:new Date,isVoice:!1};a(U=>[...U,z]),w(null),T.isVoiceChatActiveRef.current&&(yield T.respondWithVoice(z.text))}catch(De){const he=De instanceof Error?De.message:"Errore sconosciuto";y("Errore nella creazione: ".concat(he));const z={id:Date.now().toString(),text:"Errore nella creazione: ".concat(he),isUser:!1,timestamp:new Date,isVoice:!1};a(U=>[...U,z])}finally{u(!1)}}}),[b,t,O]),k=x.useCallback(()=>{w(null);const Y={id:Date.now().toString(),text:"Come non detto... Posso aiutarti con qualcos'altro?",isUser:!1,timestamp:new Date,isVoice:!1};a(te=>[...te,Y])},[]),R=x.useCallback(Y=>G(Gt,null,function*(){yield new Promise(X=>setTimeout(X,1e3));const te='Mi dispiace, ho avuto un problema con la connessione. Per ora posso solo rispondere in modo limitato.\n\n **Messaggio ricevuto:** "'.concat(Y,'"\n\n **Suggerimento:** Verifica la configurazione della chiave API.'),ae={id:Date.now().toString(),text:te,isUser:!1,timestamp:new Date,isVoice:!1};a(X=>[...X,ae])}),[]),L=x.useCallback((Y,te=!1)=>G(Gt,null,function*(){const ae=_();if(ae){console.log(" Gestendo conferma vocale per:",ae);const X=Y.toLowerCase().trim();if(["conferma","s","confermo","ok","procedi"].includes(X)){w(ae),A(null),setTimeout(()=>I(ae),50);return}else if(["annulla","no","cancella","ferma"].includes(X)){A(null),k(),yield T.respondWithVoice("Va bene, hai altro da chiedermi?");return}else{A(null),yield T.respondWithVoice("Non ho capito. Per sicurezza, ho annullato l'operazione."),k();return}}else console.log(" vocalConfirmationAction  falsy, procedo con AI");if(!N.current){console.error(" Chat service non inizializzato");return}u(!0),y(null);try{const X=yield N.current.processMessage(Y,te);console.log(X),a(be=>[...be,X.message]),T.isVoiceChatActiveRef.current&&(!X.actionRequired||!X.actionRequired.isValid)&&(yield T.respondWithVoice(X.message.text)),X.actionRequired&&(X.actionRequired.isValid?T.isVoiceChatActiveRef.current?(A(X.actionRequired),yield T.respondWithVoice(X.message.text+". Confermi?")):(console.log(X.actionRequired),w(X.actionRequired)):w(null))}catch(X){const be=X instanceof Error?X.message:"Errore sconosciuto";y(be),T.isVoiceChatActiveRef.current?yield T.respondWithVoice("Mi dispiace, ho avuto un problema. Puoi ripetere?"):yield R(Y)}finally{u(!1)}}),[_,A,I,k,T,N]),V=x.useCallback((Y,te=!1)=>G(Gt,null,function*(){if(!Y.trim())return;if(te&&!_()&&["annulla","no","cancella","ferma","nulla"].includes(Y)){A(null),k(),Ee();return}const ae={id:Date.now().toString(),text:Y.trim(),isUser:!0,timestamp:new Date,isVoice:te};a(X=>[...X,ae]),f(""),yield L(Y.trim(),te)}),[L]),W=x.useCallback(Y=>Y.toLocaleString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),[]),q=x.useCallback((Y,te=!1)=>{const X={shopping_food:{singular:"lista della spesa",plural:"liste della spesa"},reminders:{singular:"promemoria",plural:"promemoria"},notes:{singular:"nota",plural:"note"},calendar_events:{singular:"evento",plural:"eventi"}}[Y];return X?te?X.singular:X.plural:te?"elemento":"elementi"},[]),H=x.useCallback(()=>{a([{id:"1",text:t.enableSmartAssistant?"".concat(qc.welcomeMessage,"\n\n **Smart Assistant riavviato!**"):qc.welcomeMessage,isUser:!1,timestamp:new Date,isVoice:!1}]),w(null),y(null),N.current&&N.current.clearConversation()},[t.enableSmartAssistant]),J=x.useCallback(Y=>{N.current&&N.current.toggleSmartAssistant(Y);const te={id:Date.now().toString(),text:Y?" **Smart Assistant attivato!** Ora posso creare eventi, promemoria, note e liste della spesa.":" **Smart Assistant disattivato.** Ora funziono come chat normale.",isUser:!1,timestamp:new Date,isVoice:!1};a(ae=>[...ae,te])},[]),de=x.useCallback(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){y("Il tuo browser non supporta la registrazione vocale");return}const Y=window.SpeechRecognition||window.webkitSpeechRecognition,te=new Y,ae=window.SpeechGrammarList||window.webkitSpeechGrammarList;if(ae){const be="#JSGF V1.0; grammar parole; public <parola> = "+["aggiungi","promemoria","evento","nota","domani","spesa","oggi","dopo","calendario"].join(" | ")+" ;",ue=new ae;ue.addFromString(be,1),te.grammars=ue,console.log(" Grammatica del discorso applicata.")}else console.warn(" Questo browser non supporta SpeechGrammarList. Il riconoscimento funzioner senza la grammatica specifica.");te.continuous=!1,te.interimResults=!1,te.lang="it-IT",console.log(" Tentativo di avvio della registrazione..."),te.onstart=()=>{console.log(" Registrazione avviata."),p(!0),y(null)},te.onsoundstart=()=>{console.log(" Suono rilevato.")},te.onspeechstart=()=>{console.log(" Rilevato inizio del parlato.")},te.onspeechend=()=>{console.log(" Rilevata fine del parlato.")},te.onsoundend=()=>{console.log(" Suono terminato.")},te.onresult=X=>{console.log(" RISULTATO OTTENUTO!",X.results),p(!1),g(!0);const be=X.results[0][0].transcript;be&&V(be,!0),setTimeout(()=>g(!1),300)},te.onerror=X=>{console.error(" ERRORE DI RICONOSCIMENTO:",X.error,X.message),p(!1),g(!1),X.error==="not-allowed"?y("Permesso microfono negato. Abilita il microfono nelle impostazioni del browser."):X.error==="no-speech"?y("Nessun discorso rilevato. Prova a parlare pi forte o in un ambiente meno rumoroso."):y("Errore durante la registrazione: ".concat(X.error))},te.onend=()=>{console.log(" Registrazione terminata (evento onend)."),p(!1)},E.current=te,te.start()},[V,m]),se=x.useCallback(()=>{s(!0)},[]),Ee=x.useCallback(()=>{s(!1),h&&j(),T.isVoiceChatActiveRef.current&&T.stopVoiceChat(),w(null)},[h,j,T]),Ue=x.useCallback(Y=>{f(Y),v&&y(null)},[v]),ge=x.useCallback(()=>{V(d,!1)},[V,d]);return{messages:i,isOpen:o,isTyping:l,inputText:d,isRecording:h,isTranscribing:m,error:v,pendingAction:b,isVoiceChatActive:T.isVoiceChatActive,isListening:T.isListening,isSpeaking:T.isSpeaking,isProcessing:T.isProcessing,sendMessage:V,openChat:se,closeChat:Ee,setInputText:Ue,handleSendMessage:ge,startRecording:de,stopRecording:j,startVoiceChat:P,stopVoiceChat:D,toggleVoiceChat:F,confirmPendingAction:I,cancelPendingAction:k,clearConversation:H,toggleSmartAssistant:J}},wne=t=>{const{wakeWord:e="garibaldi",onWakeWordDetected:r,onError:n,onPermissionDenied:i,confidence:a=.7,autoStart:o=!1,enabled:s=!0,playConfirmationSound:l=!0}=t,[u,d]=x.useState(!1),[f,h]=x.useState(null),p=x.useRef(null),m=x.useRef(null),g=x.useRef(!1),v=x.useRef(!1),y=x.useRef(0),b=x.useRef(0),w=x.useRef(Math.random().toString(36).substr(2,9)),S=x.useRef(!0),A=3,_=2e3,E=!!(window.SpeechRecognition||window.webkitSpeechRecognition),N=x.useCallback(()=>{if(l)try{const k=new window.AudioContext,R=(L,V,W=0)=>{setTimeout(()=>{const q=k.createOscillator(),H=k.createGain();q.connect(H),H.connect(k.destination),q.frequency.setValueAtTime(L,k.currentTime),q.type="sine",H.gain.setValueAtTime(0,k.currentTime),H.gain.linearRampToValueAtTime(.1,k.currentTime+.01),H.gain.linearRampToValueAtTime(0,k.currentTime+V),q.start(k.currentTime),q.stop(k.currentTime+V)},W)};R(261.63,.15,0),R(329.63,.15,100),console.log(" Wake Word: Suono di conferma riprodotto")}catch(k){console.warn(" Wake Word: Impossibile riprodurre il suono:",k)}},[l]),T=x.useCallback(()=>{const R=Date.now()-b.current;return R<_?(console.log(" Wake Word [".concat(w.current,"]: Anti-spam attivo - aspetto ").concat(_-R,"ms")),!1):!0},[_]),O=x.useCallback(()=>G(Gt,null,function*(){if(!S.current)return!1;try{return(yield navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(R=>R.stop()),S.current&&h(!0),!0}catch(k){return console.error(" Permesso microfono negato:",k),S.current&&(h(!1),i==null||i()),!1}}),[i]),j=x.useCallback(()=>{const k=w.current;if(console.log(" Wake Word [".concat(k,"]: Cleanup sicuro")),m.current&&(clearTimeout(m.current),m.current=null),p.current){try{p.current.stop()}catch(R){}p.current=null}S.current&&(g.current=!1,v.current=!1,d(!1)),y.current=0},[]),P=x.useCallback(()=>{const k=w.current;if(!S.current||!g.current){console.log(" Wake Word [".concat(k,"]: Non pi attivo, annullo restart"));return}if(!s){console.log(" Wake Word [".concat(k,"]: Disabilitato, annullo restart"));return}if(y.current>=A){console.log(" Wake Word [".concat(k,"]: Troppi errori, interrompo definitivamente")),j(),n==null||n("Troppi errori consecutivi. Wake word disattivato.");return}const R=Math.min(3e3+y.current*1e3,1e4);console.log(" Wake Word [".concat(k,"]: Schedule restart in ").concat(R,"ms (errori: ").concat(y.current,")")),m.current=window.setTimeout(()=>{S.current&&g.current&&!v.current&&T()&&s?(console.log(" Wake Word [".concat(k,"]: Esecuzione restart programmato")),D().catch(L=>{console.error(" Wake Word [".concat(k,"]: Errore restart:"),L)})):console.log(" Wake Word [".concat(k,"]: Restart annullato (enabled=").concat(s,", active=").concat(g.current,")"))},R)},[j,n,T,s]),D=x.useCallback(()=>G(Gt,null,function*(){const k=w.current;if(!S.current){console.log(" Wake Word [".concat(k,"]: Componente unmounted, interrompo"));return}if(v.current){console.log(" Wake Word [".concat(k,"]: Avvio gi in corso, ignoro"));return}if(T()){if(!E){console.log(" Wake Word [".concat(k,"]: Speech Recognition non supportato")),n==null||n("Speech Recognition non supportato");return}v.current=!0,b.current=Date.now(),console.log(" Wake Word [".concat(k,"]: Avvio riconoscimento (tentativo)"));try{p.current&&(p.current.stop(),p.current=null),yield new Promise(V=>setTimeout(V,100));const R=window.SpeechRecognition||window.webkitSpeechRecognition,L=new R;L.continuous=!0,L.interimResults=!1,L.lang="it-IT",L.maxAlternatives=1,L.onstart=()=>{S.current&&(console.log(" Wake Word [".concat(k,']: Riconoscimento ATTIVO per "').concat(e,'"')),d(!0),v.current=!1,y.current=0)},L.onresult=V=>{if(!S.current)return;const W=V.results;for(let q=V.resultIndex;q<W.length;q++){const H=W[q];if(H.isFinal){const J=H[0].transcript.toLowerCase().trim(),de=H[0].confidence||1;console.log(" Wake Word [".concat(k,']: Rilevato "').concat(J,'" (confidence: ').concat(de,")")),J.includes(e.toLowerCase())&&de>=a&&(console.log(" Wake Word [".concat(k,']: "').concat(e,'" CONFERMATO! ')),y.current=0,N(),setTimeout(()=>{r==null||r()},50))}}},L.onerror=V=>{if(S.current){if(console.error(" Wake Word [".concat(k,"]: Error ").concat(V.error)),v.current=!1,V.error==="not-allowed"){h(!1),i==null||i(),j();return}if(V.error==="no-speech"||V.error==="aborted"){console.log(" Wake Word [".concat(k,"]: ").concat(V.error," (normale)"));return}y.current++,console.warn(" Wake Word [".concat(k,"]: Errore ").concat(V.error," (consecutivi: ").concat(y.current,")")),y.current>=A&&(n==null||n("Errore wake word: ".concat(V.error)),j())}},L.onend=()=>{S.current&&(console.log(" Wake Word [".concat(k,"]: Riconoscimento terminato")),d(!1),v.current=!1,g.current&&y.current<A&&s?P():console.log(" Wake Word [".concat(k,"]: Non riavvio (enabled=").concat(s,", active=").concat(g.current,")")))},p.current=L,L.start()}catch(R){console.error(" Wake Word [".concat(k,"]: Errore creazione:"),R),v.current=!1,y.current++,y.current>=A?(n==null||n("Errore inizializzazione wake word"),j()):P()}}}),[E,e,a,r,i,n,j,P,T]),F=x.useCallback(()=>G(Gt,null,function*(){const k=w.current;if(!S.current){console.log(" Wake Word [".concat(k,"]: Componente unmounted, ignoro startListening"));return}if(!E){n==null||n("Speech Recognition non supportato in questo browser");return}if(!s){console.log(" Wake Word [".concat(k,"]: Disabilitato, ignoro startListening"));return}if(g.current){console.log(" Wake Word [".concat(k,"]: Gi attivo, ignoro startListening"));return}if(console.log(" Wake Word [".concat(k,']: START richiesto per "').concat(e,'"')),f===null){if(!(yield O())||!S.current||!s)return}else if(f===!1){i==null||i();return}j(),g.current=!0,setTimeout(()=>{S.current&&g.current&&s&&D().catch(R=>{console.error(" Wake Word [".concat(k,"]: Errore avvio:"),R)})},500)}),[E,f,O,e,n,i,j,D,s]),I=x.useCallback(()=>{const k=w.current;console.log(" Wake Word [".concat(k,"]: STOP richiesto")),j()},[j]);return x.useEffect(()=>(o&&E&&S.current&&s&&(console.log(" Wake Word [".concat(w.current,"]: Auto-start attivato")),F()),()=>{if(S.current=!1,console.log(" Wake Word [".concat(w.current,"]: Componente unmounted - cleanup finale")),m.current&&clearTimeout(m.current),p.current)try{p.current.stop()}catch(k){}}),[]),x.useEffect(()=>{if(!S.current)return;const k=w.current;!s&&g.current?(console.log(" Wake Word [".concat(k,"]: Disabilitato - ferma ascolto (enabled=").concat(s,")")),j()):s&&!g.current&&f===!0&&(console.log(" Wake Word [".concat(k,"]: Riabilitato - riavvia ascolto (enabled=").concat(s,")")),setTimeout(()=>G(Gt,null,function*(){if(S.current&&s&&!g.current){console.log(" Wake Word [".concat(k,"]: Eseguo riavvio differito (enabled=").concat(s,")"));try{yield F()}catch(R){console.error(" Wake Word [".concat(k,"]: Errore riavvio differito:"),R)}}else console.log(" Wake Word [".concat(k,"]: Riavvio differito annullato (mounted=").concat(S.current,", enabled=").concat(s,", active=").concat(g.current,")"))}),1500))},[s,f,F]),{isListeningForWakeWord:u,isSupported:E,hasPermission:f,startListening:F,stopListening:I,requestPermission:O}},Ane=(t,e=!0)=>wne({wakeWord:"garibaldi",onWakeWordDetected:t,confidence:.6,autoStart:!0,enabled:e,playConfirmationSound:!0,onError:r=>{console.error(" Garibaldi Wake Word Error:",r)},onPermissionDenied:()=>{console.warn(" Permessi microfono negati per Garibaldi Wake Word")}}),Sne=({onClick:t,isVisible:e,hide:r})=>{const i=Li()?"fixed bottom-28 right-4 z-50":"fixed bottom-4 right-4 z-50";return!r&&c.jsx("div",{className:"".concat(i," transition-all duration-300 ").concat(e?"opacity-100 translate-y-0":"opacity-30 translate-y-10 translate-x-3"),children:c.jsxs("button",{onClick:t,className:"group relative overflow-hidden rounded-full p-2 shadow-lg transition-all duration-300 hover:scale-110 hover:shadow-xl active:scale-95",style:{background:Gc.primary,color:Gc.white},"aria-label":qc.buttonAriaLabel,children:[c.jsx("div",{className:"absolute inset-0 bg-white opacity-0 transition-opacity duration-300 group-hover:opacity-10"}),c.jsx(tH,{size:18,className:"transition-transform duration-300 group-hover:rotate-12"}),c.jsx("div",{className:"absolute -top-1 -right-1 h-3 w-3 rounded-full animate-pulse",style:{backgroundColor:Gc.accent}})]})})},U5=x.createContext({});function _ne(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const US=x.createContext(null),W5=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Cne(t=!0){const e=x.useContext(US);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:i}=e,a=x.useId();x.useEffect(()=>{t&&i(a)},[t]);const o=x.useCallback(()=>t&&n&&n(a),[a,n,t]);return!r&&n?[!1,o]:[!0]}const WS=typeof window!="undefined",Ene=WS?x.useLayoutEffect:x.useEffect,Ii=t=>t;let H5=Ii;function HS(t){let e;return()=>(e===void 0&&(e=t()),e)}const ed=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},Do=t=>t*1e3,ko=t=>t/1e3,Nne={useManualTiming:!1};function jne(t){let e=new Set,r=new Set,n=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function s(u){a.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,d=!1,f=!1)=>{const p=f&&n?e:r;return d&&a.add(u),p.has(u)||p.add(u),u},cancel:u=>{r.delete(u),a.delete(u)},process:u=>{if(o=u,n){i=!0;return}n=!0,[e,r]=[r,e],e.forEach(s),e.clear(),n=!1,i&&(i=!1,l.process(u))}};return l}const Rm=["read","resolveKeyframes","update","preRender","render","postRender"],Tne=40;function G5(t,e){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,o=Rm.reduce((y,b)=>(y[b]=jne(a),y),{}),{read:s,resolveKeyframes:l,update:u,preRender:d,render:f,postRender:h}=o,p=()=>{const y=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(y-i.timestamp,Tne),1),i.timestamp=y,i.isProcessing=!0,s.process(i),l.process(i),u.process(i),d.process(i),f.process(i),h.process(i),i.isProcessing=!1,r&&e&&(n=!1,t(p))},m=()=>{r=!0,n=!0,i.isProcessing||t(p)};return{schedule:Rm.reduce((y,b)=>{const w=o[b];return y[b]=(S,A=!1,_=!1)=>(r||m(),w.schedule(S,A,_)),y},{}),cancel:y=>{for(let b=0;b<Rm.length;b++)o[Rm[b]].cancel(y)},state:i,steps:o}}const{schedule:br,cancel:Ls,state:Nn,steps:h1}=G5(typeof requestAnimationFrame!="undefined"?requestAnimationFrame:Ii,!0),q5=x.createContext({strict:!1}),Lj={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},td={};for(const t in Lj)td[t]={isEnabled:e=>Lj[t].some(r=>!!e[r])};function Pne(t){for(const e in t)td[e]=C(C({},td[e]),t[e])}const One=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||One.has(t)}let K5=t=>!pg(t);function Ine(t){t&&(K5=e=>e.startsWith("on")?!pg(e):t(e))}try{Ine(require("@emotion/is-prop-valid").default)}catch(t){}function Dne(t,e,r){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(K5(i)||r===!0&&pg(i)||!e&&!pg(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function kne(t){if(typeof Proxy=="undefined")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const xy=x.createContext({});function Hh(t){return typeof t=="string"||Array.isArray(t)}function by(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const GS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qS=["initial",...GS];function wy(t){return by(t.animate)||qS.some(e=>Hh(t[e]))}function X5(t){return!!(wy(t)||t.variants)}function Mne(t,e){if(wy(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Hh(r)?r:void 0,animate:Hh(n)?n:void 0}}return t.inherit!==!1?e:{}}function Rne(t){const{initial:e,animate:r}=Mne(t,x.useContext(xy));return x.useMemo(()=>({initial:e,animate:r}),[Fj(e),Fj(r)])}function Fj(t){return Array.isArray(t)?t.join(" "):t}const $ne=Symbol.for("motionComponentSymbol");function iu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Lne(t,e,r){return x.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):iu(r)&&(r.current=n))},[e])}const KS=t=>t.replace(new RegExp("([a-z])([A-Z])","gu"),"$1-$2").toLowerCase(),Fne="framerAppearId",Y5="data-"+KS(Fne),{schedule:XS}=G5(queueMicrotask,!1),Z5=x.createContext({});function Bne(t,e,r,n,i){var a,o;const{visualElement:s}=x.useContext(xy),l=x.useContext(q5),u=x.useContext(US),d=x.useContext(W5).reducedMotion,f=x.useRef(null);n=n||l.renderer,!f.current&&n&&(f.current=n(t,{visualState:e,parent:s,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,p=x.useContext(Z5);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&zne(f.current,r,i,p);const m=x.useRef(!1);x.useInsertionEffect(()=>{h&&m.current&&h.update(r,u)});const g=r[Y5],v=x.useRef(!!g&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return Ene(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),XS.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),x.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),v.current=!1))}),h}function zne(t,e,r,n){const{layoutId:i,layout:a,drag:o,dragConstraints:s,layoutScroll:l,layoutRoot:u}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Q5(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||s&&iu(s),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:u})}function Q5(t){if(t)return t.options.allowProjection!==!1?t.projection:Q5(t.parent)}function Vne({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:i}){var a,o;t&&Pne(t);function s(u,d){let f;const h=M(C(C({},x.useContext(W5)),u),{layoutId:Une(u)}),{isStatic:p}=h,m=Rne(u),g=n(u,p);if(!p&&WS){Wne();const v=Hne(h);f=v.MeasureLayout,m.visualElement=Bne(i,g,h,e,v.ProjectionNode)}return c.jsxs(xy.Provider,{value:m,children:[f&&m.visualElement?c.jsx(f,C({visualElement:m.visualElement},h)):null,r(i,u,Lne(g,m.visualElement,d),g,p,m.visualElement)]})}s.displayName="motion.".concat(typeof i=="string"?i:"create(".concat((o=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&o!==void 0?o:"",")"));const l=x.forwardRef(s);return l[$ne]=i,l}function Une({layoutId:t}){const e=x.useContext(U5).id;return e&&t!==void 0?e+"-"+t:t}function Wne(t,e){x.useContext(q5).strict}function Hne(t){const{drag:e,layout:r}=td;if(!e&&!r)return{};const n=C(C({},e),r);return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Gne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YS(t){return typeof t!="string"||t.includes("-")?!1:!!(Gne.indexOf(t)>-1||new RegExp("[A-Z]","u").test(t))}function Bj(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function ZS(t,e,r,n){if(typeof e=="function"){const[i,a]=Bj(n);e=e(r!==void 0?r:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Bj(n);e=e(r!==void 0?r:t.custom,i,a)}return e}const sw=t=>Array.isArray(t),qne=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Kne=t=>sw(t)?t[t.length-1]||0:t,zn=t=>!!(t&&t.getVelocity);function S0(t){const e=zn(t)?t.get():t;return qne(e)?e.toValue():e}function Xne({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},n,i,a){const o={latestValues:Yne(n,i,a,t),renderState:e()};return r&&(o.onMount=s=>r(C({props:n,current:s},o)),o.onUpdate=s=>r(s)),o}const J5=t=>(e,r)=>{const n=x.useContext(xy),i=x.useContext(US),a=()=>Xne(t,e,n,i);return r?a():_ne(a)};function Yne(t,e,r,n){const i={},a=n(t,{});for(const p in a)i[p]=S0(a[p]);let{initial:o,animate:s}=t;const l=wy(t),u=X5(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),s===void 0&&(s=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?s:o;if(f&&typeof f!="boolean"&&!by(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const g=ZS(t,p[m]);if(g){const h=g,{transitionEnd:v,transition:y}=h,b=K(h,["transitionEnd","transition"]);for(const w in b){let S=b[w];if(Array.isArray(S)){const A=d?S.length-1:0;S=S[A]}S!==null&&(i[w]=S)}for(const w in v)i[w]=v[w]}}}return i}const Zd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],El=new Set(Zd),e$=t=>e=>typeof e=="string"&&e.startsWith(t),t$=e$("--"),Zne=e$("var(--"),QS=t=>Zne(t)?Qne.test(t.split("/*")[0].trim()):!1,Qne=new RegExp("var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$","iu"),r$=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ho=(t,e,r)=>r>e?e:r<t?t:r,Qd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gh=M(C({},Qd),{transform:t=>Ho(0,1,t)}),$m=M(C({},Qd),{default:1}),em=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>"".concat(e).concat(t)}),ss=em("deg"),eo=em("%"),Ye=em("px"),Jne=em("vh"),eie=em("vw"),zj=M(C({},eo),{parse:t=>eo.parse(t)/100,transform:t=>eo.transform(t*100)}),tie={borderWidth:Ye,borderTopWidth:Ye,borderRightWidth:Ye,borderBottomWidth:Ye,borderLeftWidth:Ye,borderRadius:Ye,radius:Ye,borderTopLeftRadius:Ye,borderTopRightRadius:Ye,borderBottomRightRadius:Ye,borderBottomLeftRadius:Ye,width:Ye,maxWidth:Ye,height:Ye,maxHeight:Ye,top:Ye,right:Ye,bottom:Ye,left:Ye,padding:Ye,paddingTop:Ye,paddingRight:Ye,paddingBottom:Ye,paddingLeft:Ye,margin:Ye,marginTop:Ye,marginRight:Ye,marginBottom:Ye,marginLeft:Ye,backgroundPositionX:Ye,backgroundPositionY:Ye},rie={rotate:ss,rotateX:ss,rotateY:ss,rotateZ:ss,scale:$m,scaleX:$m,scaleY:$m,scaleZ:$m,skew:ss,skewX:ss,skewY:ss,distance:Ye,translateX:Ye,translateY:Ye,translateZ:Ye,x:Ye,y:Ye,z:Ye,perspective:Ye,transformPerspective:Ye,opacity:Gh,originX:zj,originY:zj,originZ:Ye},Vj=M(C({},Qd),{transform:Math.round}),JS=M(C(C({},tie),rie),{zIndex:Vj,size:Ye,fillOpacity:Gh,strokeOpacity:Gh,numOctaves:Vj}),nie={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iie=Zd.length;function aie(t,e,r){let n="",i=!0;for(let a=0;a<iie;a++){const o=Zd[a],s=t[o];if(s===void 0)continue;let l=!0;if(typeof s=="number"?l=s===(o.startsWith("scale")?1:0):l=parseFloat(s)===0,!l||r){const u=r$(s,JS[o]);if(!l){i=!1;const d=nie[o]||o;n+="".concat(d,"(").concat(u,") ")}r&&(e[o]=u)}}return n=n.trim(),r?n=r(e,i?"":n):i&&(n="none"),n}function e_(t,e,r){const{style:n,vars:i,transformOrigin:a}=t;let o=!1,s=!1;for(const l in e){const u=e[l];if(El.has(l)){o=!0;continue}else if(t$(l)){i[l]=u;continue}else{const d=r$(u,JS[l]);l.startsWith("origin")?(s=!0,a[l]=d):n[l]=d}}if(e.transform||(o||r?n.transform=aie(e,t.transform,r):n.transform&&(n.transform="none")),s){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin="".concat(l," ").concat(u," ").concat(d)}}const oie={offset:"stroke-dashoffset",array:"stroke-dasharray"},sie={offset:"strokeDashoffset",array:"strokeDasharray"};function cie(t,e,r=1,n=0,i=!0){t.pathLength=1;const a=i?oie:sie;t[a.offset]=Ye.transform(-n);const o=Ye.transform(e),s=Ye.transform(r);t[a.array]="".concat(o," ").concat(s)}function Uj(t,e,r){return typeof t=="string"?t:Ye.transform(e+r*t)}function lie(t,e,r){const n=Uj(e,t.x,t.width),i=Uj(r,t.y,t.height);return"".concat(n," ").concat(i)}function t_(t,h,d,f){var p=h,{attrX:e,attrY:r,attrScale:n,originX:i,originY:a,pathLength:o,pathSpacing:s=1,pathOffset:l=0}=p,u=K(p,["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"]);if(e_(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:v}=t;m.transform&&(v&&(g.transform=m.transform),delete m.transform),v&&(i!==void 0||a!==void 0||g.transform)&&(g.transformOrigin=lie(v,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(m.x=e),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),o!==void 0&&cie(m,o,s,l,!1)}const r_=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),n$=()=>M(C({},r_()),{attrs:{}}),n_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function i$(t,{style:e,vars:r},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const a in r)t.style.setProperty(a,r[a])}const a$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o$(t,e,r,n){i$(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(a$.has(i)?i:KS(i),e.attrs[i])}const mg={};function uie(t){Object.assign(mg,t)}function s$(t,{layout:e,layoutId:r}){return El.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!mg[t]||t==="opacity")}function i_(t,e,r){var n;const{style:i}=t,a={};for(const o in i)(zn(i[o])||e.style&&zn(e.style[o])||s$(o,t)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function c$(t,e,r){const n=i_(t,e,r);for(const i in t)if(zn(t[i])||zn(e[i])){const a=Zd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=t[i]}return n}function die(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch(r){e.dimensions={x:0,y:0,width:0,height:0}}}const Wj=["x","y","width","height","cx","cy","r"],fie={useVisualState:J5({scrapeMotionValuesFromProps:c$,createRenderState:n$,onUpdate:({props:t,prevProps:e,current:r,renderState:n,latestValues:i})=>{if(!r)return;let a=!!t.drag;if(!a){for(const s in i)if(El.has(s)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let s=0;s<Wj.length;s++){const l=Wj[s];t[l]!==e[l]&&(o=!0)}o&&br.read(()=>{die(r,n),br.render(()=>{t_(n,i,n_(r.tagName),t.transformTemplate),o$(r,n)})})}})},hie={useVisualState:J5({scrapeMotionValuesFromProps:i_,createRenderState:r_})};function l$(t,e,r){for(const n in e)!zn(e[n])&&!s$(n,r)&&(t[n]=e[n])}function pie({transformTemplate:t},e){return x.useMemo(()=>{const r=r_();return e_(r,e,t),Object.assign({},r.vars,r.style)},[e])}function mie(t,e){const r=t.style||{},n={};return l$(n,r,t),Object.assign(n,pie(t,e)),n}function gie(t,e){const r={},n=mie(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":"pan-".concat(t.drag==="x"?"y":"x")),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function vie(t,e,r,n){const i=x.useMemo(()=>{const a=n$();return t_(a,e,n_(n),t.transformTemplate),M(C({},a.attrs),{style:C({},a.style)})},[e]);if(t.style){const a={};l$(a,t.style,t),i.style=C(C({},a),i.style)}return i}function yie(t=!1){return(r,n,i,{latestValues:a},o)=>{const l=(YS(r)?vie:gie)(n,a,o,r),u=Dne(n,typeof r=="string",t),d=r!==x.Fragment?M(C(C({},u),l),{ref:i}):{},{children:f}=n,h=x.useMemo(()=>zn(f)?f.get():f,[f]);return x.createElement(r,M(C({},d),{children:h}))}}function xie(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const a=YS(n)?fie:hie,o=M(C({},a),{preloadedFeatures:t,useRender:yie(i),createVisualElement:e,Component:n});return Vne(o)}}function u$(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ay(t,e,r){const n=t.getProps();return ZS(n,e,r!==void 0?r:n.custom,t)}const bie=HS(()=>window.ScrollTimeline!==void 0);class wie{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(i=>{if(bie()&&i.attachTimeline)return i.attachTimeline(e);if(typeof r=="function")return r(i)});return()=>{n.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Aie extends wie{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function a_(t,e){return t?t[e]||t.default||t:void 0}const cw=2e4;function d$(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<cw;)e+=r,n=t.next(e);return e>=cw?1/0:e}function o_(t){return typeof t=="function"}function Hj(t,e){t.timeline=e,t.onfinish=null}const s_=t=>Array.isArray(t)&&typeof t[0]=="number",Sie={linearEasing:void 0};function _ie(t,e){const r=HS(t);return()=>{var n;return(n=Sie[e])!==null&&n!==void 0?n:r()}}const gg=_ie(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing"),f$=(t,e,r=10)=>{let n="";const i=Math.max(Math.round(e/r),2);for(let a=0;a<i;a++)n+=t(ed(0,i-1,a))+", ";return"linear(".concat(n.substring(0,n.length-2),")")};function h$(t){return!!(typeof t=="function"&&gg()||!t||typeof t=="string"&&(t in lw||gg())||s_(t)||Array.isArray(t)&&t.every(h$))}const Yf=([t,e,r,n])=>"cubic-bezier(".concat(t,", ").concat(e,", ").concat(r,", ").concat(n,")"),lw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yf([0,.65,.55,1]),circOut:Yf([.55,0,1,.45]),backIn:Yf([.31,.01,.66,-.59]),backOut:Yf([.33,1.53,.69,.99])};function p$(t,e){if(t)return typeof t=="function"&&gg()?f$(t,e):s_(t)?Yf(t):Array.isArray(t)?t.map(r=>p$(r,e)||lw.easeOut):lw[t]}const fa={x:!1,y:!1};function m$(){return fa.x||fa.y}function Cie(t,e,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function g$(t,e){const r=Cie(t),n=new AbortController,i=M(C({passive:!0},e),{signal:n.signal});return[r,i,()=>n.abort()]}function Gj(t){return e=>{e.pointerType==="touch"||m$()||t(e)}}function Eie(t,e,r={}){const[n,i,a]=g$(t,r),o=Gj(s=>{const{target:l}=s,u=e(s);if(typeof u!="function"||!l)return;const d=Gj(f=>{u(f),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return n.forEach(s=>{s.addEventListener("pointerenter",o,i)}),a}const v$=(t,e)=>e?t===e?!0:v$(t,e.parentElement):!1,c_=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Nie=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jie(t){return Nie.has(t.tagName)||t.tabIndex!==-1}const Zf=new WeakSet;function qj(t){return e=>{e.key==="Enter"&&t(e)}}function p1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Tie=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=qj(()=>{if(Zf.has(r))return;p1(r,"down");const i=qj(()=>{p1(r,"up")}),a=()=>p1(r,"cancel");r.addEventListener("keyup",i,e),r.addEventListener("blur",a,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Kj(t){return c_(t)&&!m$()}function Pie(t,e,r={}){const[n,i,a]=g$(t,r),o=s=>{const l=s.currentTarget;if(!Kj(s)||Zf.has(l))return;Zf.add(l);const u=e(s),d=(p,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!Kj(p)||!Zf.has(l))&&(Zf.delete(l),typeof u=="function"&&u(p,{success:m}))},f=p=>{d(p,r.useGlobalTarget||v$(l,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return n.forEach(s=>{!jie(s)&&s.getAttribute("tabindex")===null&&(s.tabIndex=0),(r.useGlobalTarget?window:s).addEventListener("pointerdown",o,i),s.addEventListener("focus",u=>Tie(u,i),i)}),a}function Oie(t){return t==="x"||t==="y"?fa[t]?null:(fa[t]=!0,()=>{fa[t]=!1}):fa.x||fa.y?null:(fa.x=fa.y=!0,()=>{fa.x=fa.y=!1})}const y$=new Set(["width","height","top","left","right","bottom",...Zd]);let _0;function Iie(){_0=void 0}const to={now:()=>(_0===void 0&&to.set(Nn.isProcessing||Nne.useManualTiming?Nn.timestamp:performance.now()),_0),set:t=>{_0=t,queueMicrotask(Iie)}};function l_(t,e){t.indexOf(e)===-1&&t.push(e)}function u_(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class d_{constructor(){this.subscriptions=[]}add(e){return l_(this.subscriptions,e),()=>u_(this.subscriptions,e)}notify(e,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,n);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function x$(t,e){return e?t*(1e3/e):0}const Xj=30,Die=t=>!isNaN(parseFloat(t));class kie{constructor(e,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const a=to.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=to.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Die(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new d_);const n=this.events[e].add(r);return e==="change"?()=>{n(),br.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=to.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xj)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Xj);return x$(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qh(t,e){return new kie(t,e)}function Mie(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,qh(r))}function Rie(t,e){let o=Ay(t,e)||{},{transitionEnd:n={},transition:i={}}=o,a=K(o,["transitionEnd","transition"]);a=C(C({},a),n);for(const s in a){const l=Kne(a[s]);Mie(t,s,l)}}function $ie(t){return!!(zn(t)&&t.add)}function uw(t,e){const r=t.getValue("willChange");if($ie(r))return r.add(e)}function b$(t){return t.props[Y5]}const w$=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Lie=1e-7,Fie=12;function Bie(t,e,r,n,i){let a,o,s=0;do o=e+(r-e)/2,a=w$(o,n,i)-t,a>0?r=o:e=o;while(Math.abs(a)>Lie&&++s<Fie);return o}function tm(t,e,r,n){if(t===e&&r===n)return Ii;const i=a=>Bie(a,0,1,t,r);return a=>a===0||a===1?a:w$(i(a),e,n)}const A$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,S$=t=>e=>1-t(1-e),_$=tm(.33,1.53,.69,.99),f_=S$(_$),C$=A$(f_),E$=t=>(t*=2)<1?.5*f_(t):.5*(2-Math.pow(2,-10*(t-1))),h_=t=>1-Math.sin(Math.acos(t)),N$=S$(h_),j$=A$(h_),T$=t=>new RegExp("^0[^.\\s]+$","u").test(t);function zie(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||T$(t):!0}const hh=t=>Math.round(t*1e5)/1e5,p_=new RegExp("-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)","gu");function Vie(t){return t==null}const Uie=new RegExp("^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$","iu"),m_=(t,e)=>r=>!!(typeof r=="string"&&Uie.test(r)&&r.startsWith(t)||e&&!Vie(r)&&Object.prototype.hasOwnProperty.call(r,e)),P$=(t,e,r)=>n=>{if(typeof n!="string")return n;const[i,a,o,s]=n.match(p_);return{[t]:parseFloat(i),[e]:parseFloat(a),[r]:parseFloat(o),alpha:s!==void 0?parseFloat(s):1}},Wie=t=>Ho(0,255,t),m1=M(C({},Qd),{transform:t=>Math.round(Wie(t))}),Tc={test:m_("rgb","red"),parse:P$("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+m1.transform(t)+", "+m1.transform(e)+", "+m1.transform(r)+", "+hh(Gh.transform(n))+")"};function Hie(t){let e="",r="",n="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const dw={test:m_("#"),parse:Hie,transform:Tc.transform},au={test:m_("hsl","hue"),parse:P$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+eo.transform(hh(e))+", "+eo.transform(hh(r))+", "+hh(Gh.transform(n))+")"},Ln={test:t=>Tc.test(t)||dw.test(t)||au.test(t),parse:t=>Tc.test(t)?Tc.parse(t):au.test(t)?au.parse(t):dw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Tc.transform(t):au.transform(t)},Gie=new RegExp("(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))","giu");function qie(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(p_))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(Gie))===null||r===void 0?void 0:r.length)||0)>0}const O$="number",I$="color",Kie="var",Xie="var(",Yj="${}",Yie=new RegExp("var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)","giu");function Kh(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},i=[];let a=0;const s=e.replace(Yie,l=>(Ln.test(l)?(n.color.push(a),i.push(I$),r.push(Ln.parse(l))):l.startsWith(Xie)?(n.var.push(a),i.push(Kie),r.push(l)):(n.number.push(a),i.push(O$),r.push(parseFloat(l))),++a,Yj)).split(Yj);return{values:r,split:s,indexes:n,types:i}}function D$(t){return Kh(t).values}function k$(t){const{split:e,types:r}=Kh(t),n=e.length;return i=>{let a="";for(let o=0;o<n;o++)if(a+=e[o],i[o]!==void 0){const s=r[o];s===O$?a+=hh(i[o]):s===I$?a+=Ln.transform(i[o]):a+=i[o]}return a}}const Zie=t=>typeof t=="number"?0:t;function Qie(t){const e=D$(t);return k$(t)(e.map(Zie))}const Fs={test:qie,parse:D$,createTransformer:k$,getAnimatableNone:Qie},Jie=new Set(["brightness","contrast","saturate","opacity"]);function eae(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(p_)||[];if(!n)return t;const i=r.replace(n,"");let a=Jie.has(e)?1:0;return n!==r&&(a*=100),e+"("+a+i+")"}const tae=new RegExp("\\b([a-z-]*)\\(.*?\\)","gu"),fw=M(C({},Fs),{getAnimatableNone:t=>{const e=t.match(tae);return e?e.map(eae).join(" "):t}}),rae=M(C({},JS),{color:Ln,backgroundColor:Ln,outlineColor:Ln,fill:Ln,stroke:Ln,borderColor:Ln,borderTopColor:Ln,borderRightColor:Ln,borderBottomColor:Ln,borderLeftColor:Ln,filter:fw,WebkitFilter:fw}),g_=t=>rae[t];function M$(t,e){let r=g_(t);return r!==fw&&(r=Fs),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const nae=new Set(["auto","none","0"]);function iae(t,e,r){let n=0,i;for(;n<t.length&&!i;){const a=t[n];typeof a=="string"&&!nae.has(a)&&Kh(a).values.length&&(i=t[n]),n++}if(i&&r)for(const a of e)t[a]=M$(r,i)}const Zj=t=>t===Qd||t===Ye,Qj=(t,e)=>parseFloat(t.split(", ")[e]),Jj=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(new RegExp("^matrix3d\\((.+)\\)$","u"));if(i)return Qj(i[1],e);{const a=n.match(new RegExp("^matrix\\((.+)\\)$","u"));return a?Qj(a[1],t):0}},aae=new Set(["x","y","z"]),oae=Zd.filter(t=>!aae.has(t));function sae(t){const e=[];return oae.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const rd={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Jj(4,13),y:Jj(5,14)};rd.translateX=rd.x;rd.translateY=rd.y;const Kc=new Set;let hw=!1,pw=!1;function R$(){if(pw){const t=Array.from(Kc).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const i=sae(n);i.length&&(r.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([a,o])=>{var s;(s=n.getValue(a))===null||s===void 0||s.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}pw=!1,hw=!1,Kc.forEach(t=>t.complete()),Kc.clear()}function $$(){Kc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(pw=!0)})}function cae(){$$(),R$()}class v_{constructor(e,r,n,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Kc.add(this),hw||(hw=!0,br.read($$),br.resolveKeyframes(R$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),s=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const l=n.readValue(r,s);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=s),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Kc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Kc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const L$=t=>new RegExp("^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$","u").test(t),lae=new RegExp("^var\\(--(?:([\\w-]+)|([\\w-]+), ?([a-zA-Z\\d ()%#.,-]+))\\)","u");function uae(t){const e=lae.exec(t);if(!e)return[,];const[,r,n,i]=e;return["--".concat(r!=null?r:n),i]}function F$(t,e,r=1){const[n,i]=uae(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const o=a.trim();return L$(o)?parseFloat(o):o}return QS(i)?F$(i,e,r+1):i}const B$=t=>e=>e.test(t),dae={test:t=>t==="auto",parse:t=>t},z$=[Qd,Ye,eo,ss,eie,Jne,dae],eT=t=>z$.find(B$(t));class V$ extends v_{constructor(e,r,n,i,a){super(e,r,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),QS(u))){const d=F$(u,r.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!y$.has(n)||e.length!==2)return;const[i,a]=e,o=eT(i),s=eT(a);if(o!==s)if(Zj(o)&&Zj(s))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let i=0;i<e.length;i++)zie(e[i])&&n.push(i);n.length&&iae(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const a=r.getValue(n);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,s=i[o];i[o]=rd[n](r.measureViewportBox(),window.getComputedStyle(r.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{r.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const tT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Fs.test(t)||t==="0")&&!t.startsWith("url("));function fae(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function hae(t,e,r,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=tT(i,e),s=tT(a,e);return!o||!s?!1:fae(t)||(r==="spring"||o_(r))&&n}const pae=t=>t!==null;function Sy(t,{repeat:e,repeatType:r="loop"},n){const i=t.filter(pae),a=e&&r!=="loop"&&e%2===1?0:i.length-1;return!a||n===void 0?i[a]:n}const mae=40;class U${constructor(l){var u=l,{autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop"}=u,s=K(u,["autoplay","delay","type","repeat","repeatDelay","repeatType"]);this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=to.now(),this.options=C({autoplay:e,delay:r,type:n,repeat:i,repeatDelay:a,repeatType:o},s),this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>mae?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&cae(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=to.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:a,delay:o,onComplete:s,onUpdate:l,isGenerator:u}=this.options;if(!u&&!hae(e,n,i,a))if(o)this.options.duration=0;else{l&&l(Sy(e,this.options,r)),s&&s(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,r);d!==!1&&(this._resolved=C({keyframes:e,finalKeyframe:r},d),this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Cr=(t,e,r)=>t+(e-t)*r;function g1(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function gae({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let i=0,a=0,o=0;if(!e)i=a=o=r;else{const s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;i=g1(l,s,t+1/3),a=g1(l,s,t),o=g1(l,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}function vg(t,e){return r=>r>0?e:t}const v1=(t,e,r)=>{const n=t*t,i=r*(e*e-n)+n;return i<0?0:Math.sqrt(i)},vae=[dw,Tc,au],yae=t=>vae.find(e=>e.test(t));function rT(t){const e=yae(t);if(!e)return!1;let r=e.parse(t);return e===au&&(r=gae(r)),r}const nT=(t,e)=>{const r=rT(t),n=rT(e);if(!r||!n)return vg(t,e);const i=C({},r);return a=>(i.red=v1(r.red,n.red,a),i.green=v1(r.green,n.green,a),i.blue=v1(r.blue,n.blue,a),i.alpha=Cr(r.alpha,n.alpha,a),Tc.transform(i))},xae=(t,e)=>r=>e(t(r)),rm=(...t)=>t.reduce(xae),mw=new Set(["none","hidden"]);function bae(t,e){return mw.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function wae(t,e){return r=>Cr(t,e,r)}function y_(t){return typeof t=="number"?wae:typeof t=="string"?QS(t)?vg:Ln.test(t)?nT:_ae:Array.isArray(t)?W$:typeof t=="object"?Ln.test(t)?nT:Aae:vg}function W$(t,e){const r=[...t],n=r.length,i=t.map((a,o)=>y_(a)(a,e[o]));return a=>{for(let o=0;o<n;o++)r[o]=i[o](a);return r}}function Aae(t,e){const r=C(C({},t),e),n={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(n[i]=y_(t[i])(t[i],e[i]));return i=>{for(const a in n)r[a]=n[a](i);return r}}function Sae(t,e){var r;const n=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],s=t.indexes[o][i[o]],l=(r=t.values[s])!==null&&r!==void 0?r:0;n[a]=l,i[o]++}return n}const _ae=(t,e)=>{const r=Fs.createTransformer(e),n=Kh(t),i=Kh(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?mw.has(t)&&!i.values.length||mw.has(e)&&!n.values.length?bae(t,e):rm(W$(Sae(n,i),i.values),r):vg(t,e)};function H$(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Cr(t,e,r):y_(t)(t,e)}const Cae=5;function G$(t,e,r){const n=Math.max(e-Cae,0);return x$(r-t(n),e-n)}const Pr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},y1=.001;function Eae({duration:t=Pr.duration,bounce:e=Pr.bounce,velocity:r=Pr.velocity,mass:n=Pr.mass}){let i,a,o=1-e;o=Ho(Pr.minDamping,Pr.maxDamping,o),t=Ho(Pr.minDuration,Pr.maxDuration,ko(t)),o<1?(i=u=>{const d=u*o,f=d*t,h=d-r,p=gw(u,o),m=Math.exp(-f);return y1-h/p*m},a=u=>{const f=u*o*t,h=f*r+r,p=Math.pow(o,2)*Math.pow(u,2)*t,m=Math.exp(-f),g=gw(Math.pow(u,2),o);return(-i(u)+y1>0?-1:1)*((h-p)*m)/g}):(i=u=>{const d=Math.exp(-u*t),f=(u-r)*t+1;return-y1+d*f},a=u=>{const d=Math.exp(-u*t),f=(r-u)*(t*t);return d*f});const s=5/t,l=jae(i,a,s);if(t=Do(t),isNaN(l))return{stiffness:Pr.stiffness,damping:Pr.damping,duration:t};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const Nae=12;function jae(t,e,r){let n=r;for(let i=1;i<Nae;i++)n=n-t(n)/e(n);return n}function gw(t,e){return t*Math.sqrt(1-e*e)}const Tae=["duration","bounce"],Pae=["stiffness","damping","mass"];function iT(t,e){return e.some(r=>t[r]!==void 0)}function Oae(t){let e=C({velocity:Pr.velocity,stiffness:Pr.stiffness,damping:Pr.damping,mass:Pr.mass,isResolvedFromDuration:!1},t);if(!iT(t,Pae)&&iT(t,Tae))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),i=n*n,a=2*Ho(.05,1,1-(t.bounce||0))*Math.sqrt(i);e=M(C({},e),{mass:Pr.mass,stiffness:i,damping:a})}else{const r=Eae(t);e=M(C(C({},e),r),{mass:Pr.mass}),e.isResolvedFromDuration=!0}return e}function q$(t=Pr.visualDuration,e=Pr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=r;const a=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],s={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=Oae(M(C({},r),{velocity:-ko(r.velocity||0)})),m=h||0,g=u/(2*Math.sqrt(l*d)),v=o-a,y=ko(Math.sqrt(l/d)),b=Math.abs(v)<5;n||(n=b?Pr.restSpeed.granular:Pr.restSpeed.default),i||(i=b?Pr.restDelta.granular:Pr.restDelta.default);let w;if(g<1){const A=gw(y,g);w=_=>{const E=Math.exp(-g*y*_);return o-E*((m+g*y*v)/A*Math.sin(A*_)+v*Math.cos(A*_))}}else if(g===1)w=A=>o-Math.exp(-y*A)*(v+(m+y*v)*A);else{const A=y*Math.sqrt(g*g-1);w=_=>{const E=Math.exp(-g*y*_),N=Math.min(A*_,300);return o-E*((m+g*y*v)*Math.sinh(N)+A*v*Math.cosh(N))/A}}const S={calculatedDuration:p&&f||null,next:A=>{const _=w(A);if(p)s.done=A>=f;else{let E=0;g<1&&(E=A===0?Do(m):G$(w,A,_));const N=Math.abs(E)<=n,T=Math.abs(o-_)<=i;s.done=N&&T}return s.value=s.done?o:_,s},toString:()=>{const A=Math.min(d$(S),cw),_=f$(E=>S.next(A*E).value,A,30);return A+"ms "+_}};return S}function aT({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:s,max:l,restDelta:u=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=N=>s!==void 0&&N<s||l!==void 0&&N>l,m=N=>s===void 0?l:l===void 0||Math.abs(s-N)<Math.abs(l-N)?s:l;let g=r*e;const v=f+g,y=o===void 0?v:o(v);y!==v&&(g=y-f);const b=N=>-g*Math.exp(-N/n),w=N=>y+b(N),S=N=>{const T=b(N),O=w(N);h.done=Math.abs(T)<=u,h.value=h.done?y:O};let A,_;const E=N=>{p(h.value)&&(A=N,_=q$({keyframes:[h.value,m(h.value)],velocity:G$(w,N,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return E(0),{calculatedDuration:null,next:N=>{let T=!1;return!_&&A===void 0&&(T=!0,S(N),E(N)),A!==void 0&&N>=A?_.next(N-A):(!T&&S(N),h)}}}const Iae=tm(.42,0,1,1),Dae=tm(0,0,.58,1),K$=tm(.42,0,.58,1),kae=t=>Array.isArray(t)&&typeof t[0]!="number",Mae={linear:Ii,easeIn:Iae,easeInOut:K$,easeOut:Dae,circIn:h_,circInOut:j$,circOut:N$,backIn:f_,backInOut:C$,backOut:_$,anticipate:E$},oT=t=>{if(s_(t)){H5(t.length===4);const[e,r,n,i]=t;return tm(e,r,n,i)}else if(typeof t=="string")return Mae[t];return t};function Rae(t,e,r){const n=[],i=r||H$,a=t.length-1;for(let o=0;o<a;o++){let s=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Ii:e;s=rm(l,s)}n.push(s)}return n}function $ae(t,e,{clamp:r=!0,ease:n,mixer:i}={}){const a=t.length;if(H5(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=Rae(e,n,i),l=s.length,u=d=>{if(o&&d<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const h=ed(t[f],t[f+1],d);return s[f](h)};return r?d=>u(Ho(t[0],t[a-1],d)):u}function Lae(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const i=ed(0,e,n);t.push(Cr(r,1,i))}}function Fae(t){const e=[0];return Lae(e,t.length-1),e}function Bae(t,e){return t.map(r=>r*e)}function zae(t,e){return t.map(()=>e||K$).splice(0,t.length-1)}function yg({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const i=kae(n)?n.map(oT):oT(n),a={done:!1,value:e[0]},o=Bae(r&&r.length===e.length?r:Fae(e),t),s=$ae(o,e,{ease:Array.isArray(i)?i:zae(e,i)});return{calculatedDuration:t,next:l=>(a.value=s(l),a.done=l>=t,a)}}const Vae=t=>{const e=({timestamp:r})=>t(r);return{start:()=>br.update(e,!0),stop:()=>Ls(e),now:()=>Nn.isProcessing?Nn.timestamp:to.now()}},Uae={decay:aT,inertia:aT,tween:yg,keyframes:yg,spring:q$},Wae=t=>t/100;class x_ extends U${constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:n,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||v_,s=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(a,s,r,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,s=o_(r)?r:Uae[r]||yg;let l,u;s!==yg&&typeof e[0]!="number"&&(l=rm(Wae,H$(e[0],e[1])),e=[0,100]);const d=s(M(C({},this.options),{keyframes:e}));a==="mirror"&&(u=s(M(C({},this.options),{keyframes:[...e].reverse(),velocity:-o}))),d.calculatedDuration===null&&(d.calculatedDuration=d$(d));const{calculatedDuration:f}=d,h=f+i,p=h*(n+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:s,keyframes:l,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=n;if(this.startTime===null)return a.next(0);const{delay:h,repeat:p,repeatType:m,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,S=a;if(p){const N=Math.min(this.currentTime,d)/f;let T=Math.floor(N),O=N%1;!O&&N>=1&&(O=1),O===1&&T--,T=Math.min(T,p+1),!!(T%2)&&(m==="reverse"?(O=1-O,g&&(O-=g/f)):m==="mirror"&&(S=o)),w=Ho(0,1,O)*f}const A=b?{done:!1,value:l[0]}:S.next(w);s&&(A.value=s(A.value));let{done:_}=A;!b&&u!==null&&(_=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return E&&i!==void 0&&(A.value=Sy(l,this.options,i)),v&&v(A.value),E&&this.finish(),A}get duration(){const{resolved:e}=this;return e?ko(e.calculatedDuration):0}get time(){return ko(this.currentTime)}set time(e){e=Do(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=ko(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Vae,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n!=null?n:this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Hae=new Set(["opacity","clipPath","filter","transform"]);function Gae(t,e,r,{delay:n=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:s="easeInOut",times:l}={}){const u={[e]:r};l&&(u.offset=l);const d=p$(s,i);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const qae=HS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xg=10,Kae=2e4;function Xae(t){return o_(t.type)||t.type==="spring"||!h$(t.ease)}function Yae(t,e){const r=new x_(M(C({},e),{keyframes:t,repeat:0,delay:0,isGenerator:!0}));let n={done:!1,value:t[0]};const i=[];let a=0;for(;!n.done&&a<Kae;)n=r.sample(a),i.push(n.value),a+=xg;return{times:void 0,keyframes:i,duration:a-xg,ease:"linear"}}const X$={anticipate:E$,backInOut:C$,circInOut:j$};function Zae(t){return t in X$}class sT extends U${constructor(e){super(e);const{name:r,motionValue:n,element:i,keyframes:a}=this.options;this.resolver=new V$(a,(o,s)=>this.onKeyframesResolved(o,s),r,n,i),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:n=300,times:i,ease:a,type:o,motionValue:s,name:l,startTime:u}=this.options;if(!s.owner||!s.owner.current)return!1;if(typeof a=="string"&&gg()&&Zae(a)&&(a=X$[a]),Xae(this.options)){const f=this.options,{onComplete:h,onUpdate:p,motionValue:m,element:g}=f,v=K(f,["onComplete","onUpdate","motionValue","element"]),y=Yae(e,v);e=y.keyframes,e.length===1&&(e[1]=e[0]),n=y.duration,i=y.times,a=y.ease,o="keyframes"}const d=Gae(s.owner.current,l,e,M(C({},this.options),{duration:n,times:i,ease:a}));return d.startTime=u!=null?u:this.calcStartTime(),this.pendingTimeline?(Hj(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;s.set(Sy(e,this.options,r)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return ko(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return ko(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Do(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return Ii;const{animation:n}=r;Hj(n,e)}return Ii}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:i,type:a,ease:o,times:s}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const u=this.options,{motionValue:d,onUpdate:f,onComplete:h,element:p}=u,m=K(u,["motionValue","onUpdate","onComplete","element"]),g=new x_(M(C({},m),{keyframes:n,duration:i,type:a,ease:o,times:s,isGenerator:!0})),v=Do(this.time);d.setWithVelocity(g.sample(v-xg).value,g.sample(v).value,xg)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:i,repeatType:a,damping:o,type:s}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=r.owner.getProps();return qae()&&n&&Hae.has(n)&&!l&&!u&&!i&&a!=="mirror"&&o!==0&&s!=="inertia"}}const Qae={type:"spring",stiffness:500,damping:25,restSpeed:10},Jae=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),eoe={type:"keyframes",duration:.8},toe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},roe=(t,{keyframes:e})=>e.length>2?eoe:El.has(t)?t.startsWith("scale")?Jae(e[1]):Qae:toe;function noe(f){var h=f,{when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:s,from:l,elapsed:u}=h,d=K(h,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"]);return!!Object.keys(d).length}const b_=(t,e,r,n={},i,a)=>o=>{const s=a_(n,t)||{},l=s.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Do(l);let d=M(C({keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity()},s),{delay:-u,onUpdate:h=>{e.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{o(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:a?void 0:i});noe(s)||(d=C(C({},d),roe(t,d))),d.duration&&(d.duration=Do(d.duration)),d.repeatDelay&&(d.repeatDelay=Do(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!a&&e.get()!==void 0){const h=Sy(d.keyframes,s);if(h!==void 0)return br.update(()=>{d.onUpdate(h),d.onComplete()}),new Aie([])}return!a&&sT.supports(d)?new sT(d):new x_(d)};function ioe({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Y$(t,e,{delay:r=0,transitionOverride:n,type:i}={}){var a;let f=e,{transition:o=t.getDefaultTransition(),transitionEnd:s}=f,l=K(f,["transition","transitionEnd"]);n&&(o=n);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const p=t.getValue(h,(a=t.latestValues[h])!==null&&a!==void 0?a:null),m=l[h];if(m===void 0||d&&ioe(d,h))continue;const g=C({delay:r},a_(o||{},h));let v=!1;if(window.MotionHandoffAnimation){const b=b$(t);if(b){const w=window.MotionHandoffAnimation(b,h,br);w!==null&&(g.startTime=w,v=!0)}}uw(t,h),p.start(b_(h,p,m,t.shouldReduceMotion&&y$.has(h)?{type:!1}:g,t,v));const y=p.animation;y&&u.push(y)}return s&&Promise.all(u).then(()=>{br.update(()=>{s&&Rie(t,s)})}),u}function vw(t,e,r={}){var n;const i=Ay(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(a=r.transitionOverride);const o=i?()=>Promise.all(Y$(t,i,r)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=a;return aoe(t,e,d+u,f,h,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[o,s]:[s,o];return u().then(()=>d())}else return Promise.all([o(),s(r.delay)])}function aoe(t,e,r=0,n=0,i=1,a){const o=[],s=(t.variantChildren.size-1)*n,l=i===1?(u=0)=>u*n:(u=0)=>s-u*n;return Array.from(t.variantChildren).sort(ooe).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(vw(u,e,M(C({},a),{delay:r+l(d)})).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function ooe(t,e){return t.sortNodePosition(e)}function soe(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>vw(t,a,r));n=Promise.all(i)}else if(typeof e=="string")n=vw(t,e,r);else{const i=typeof e=="function"?Ay(t,e,r.custom):e;n=Promise.all(Y$(t,i,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const coe=qS.length;function Z$(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Z$(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<coe;r++){const n=qS[r],i=t.props[n];(Hh(i)||i===!1)&&(e[n]=i)}return e}const loe=[...GS].reverse(),uoe=GS.length;function doe(t){return e=>Promise.all(e.map(({animation:r,options:n})=>soe(t,r,n)))}function foe(t){let e=doe(t),r=cT(),n=!0;const i=l=>(u,d)=>{var f;const h=Ay(t,d,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const p=h,{transition:m,transitionEnd:g}=p,v=K(p,["transition","transitionEnd"]);u=C(C(C({},u),v),g)}return u};function a(l){e=l(t)}function o(l){const{props:u}=t,d=Z$(t.parent)||{},f=[],h=new Set;let p={},m=1/0;for(let v=0;v<uoe;v++){const y=loe[v],b=r[y],w=u[y]!==void 0?u[y]:d[y],S=Hh(w),A=y===l?b.isActive:null;A===!1&&(m=v);let _=w===d[y]&&w!==u[y]&&S;if(_&&n&&t.manuallyAnimateOnMount&&(_=!1),b.protectedKeys=C({},p),!b.isActive&&A===null||!w&&!b.prevProp||by(w)||typeof w=="boolean")continue;const E=hoe(b.prevProp,w);let N=E||y===l&&b.isActive&&!_&&S||v>m&&S,T=!1;const O=Array.isArray(w)?w:[w];let j=O.reduce(i(y),{});A===!1&&(j={});const{prevResolvedValues:P={}}=b,D=C(C({},P),j),F=R=>{N=!0,h.has(R)&&(T=!0,h.delete(R)),b.needsAnimating[R]=!0;const L=t.getValue(R);L&&(L.liveStyle=!1)};for(const R in D){const L=j[R],V=P[R];if(p.hasOwnProperty(R))continue;let W=!1;sw(L)&&sw(V)?W=!u$(L,V):W=L!==V,W?L!=null?F(R):h.add(R):L!==void 0&&h.has(R)?F(R):b.protectedKeys[R]=!0}b.prevProp=w,b.prevResolvedValues=j,b.isActive&&(p=C(C({},p),j)),n&&t.blockInitialAnimation&&(N=!1),N&&(!(_&&E)||T)&&f.push(...O.map(R=>({animation:R,options:{type:y}})))}if(h.size){const v={};h.forEach(y=>{const b=t.getBaseTarget(y),w=t.getValue(y);w&&(w.liveStyle=!0),v[y]=b!=null?b:null}),f.push({animation:v})}let g=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(f):Promise.resolve()}function s(l,u){var d;if(r[l].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),r[l].isActive=u;const f=o(l);for(const h in r)r[h].protectedKeys={};return f}return{animateChanges:o,setActive:s,setAnimateFunction:a,getState:()=>r,reset:()=>{r=cT(),n=!0}}}function hoe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!u$(e,t):!1}function cc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cT(){return{animate:cc(!0),whileInView:cc(),whileHover:cc(),whileTap:cc(),whileDrag:cc(),whileFocus:cc(),exit:cc()}}class Qs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class poe extends Qs{constructor(e){super(e),e.animationState||(e.animationState=foe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();by(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let moe=0;class goe extends Qs{constructor(){super(...arguments),this.id=moe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);r&&!e&&i.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const voe={animation:{Feature:poe},exit:{Feature:goe}};function Xh(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function nm(t){return{point:{x:t.pageX,y:t.pageY}}}const yoe=t=>e=>c_(e)&&t(e,nm(e));function ph(t,e,r,n){return Xh(t,e,yoe(r),n)}const lT=(t,e)=>Math.abs(t-e);function xoe(t,e){const r=lT(t.x,e.x),n=lT(t.y,e.y);return Math.sqrt(Ml(r,2)+Ml(n,2))}class Q${constructor(e,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=b1(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=xoe(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:m}=f,{timestamp:g}=Nn;this.history.push(M(C({},m),{timestamp:g}));const{onStart:v,onMove:y}=this.handlers;h||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=x1(h,this.transformPagePoint),br.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=b1(f.type==="pointercancel"?this.lastMoveEventInfo:x1(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,v),m&&m(f,v)},!c_(e))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const o=nm(e),s=x1(o,this.transformPagePoint),{point:l}=s,{timestamp:u}=Nn;this.history=[M(C({},l),{timestamp:u})];const{onSessionStart:d}=r;d&&d(e,b1(s,this.history)),this.removeListeners=rm(ph(this.contextWindow,"pointermove",this.handlePointerMove),ph(this.contextWindow,"pointerup",this.handlePointerUp),ph(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ls(this.updatePoint)}}function x1(t,e){return e?{point:e(t.point)}:t}function uT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function b1({point:t},e){return{point:t,delta:uT(t,J$(e)),offset:uT(t,boe(e)),velocity:woe(e,.1)}}function boe(t){return t[0]}function J$(t){return t[t.length-1]}function woe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const i=J$(t);for(;r>=0&&(n=t[r],!(i.timestamp-n.timestamp>Do(e)));)r--;if(!n)return{x:0,y:0};const a=ko(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const eL=1e-4,Aoe=1-eL,Soe=1+eL,tL=.01,_oe=0-tL,Coe=0+tL;function $i(t){return t.max-t.min}function Eoe(t,e,r){return Math.abs(t-e)<=r}function dT(t,e,r,n=.5){t.origin=n,t.originPoint=Cr(e.min,e.max,t.origin),t.scale=$i(r)/$i(e),t.translate=Cr(r.min,r.max,t.origin)-t.originPoint,(t.scale>=Aoe&&t.scale<=Soe||isNaN(t.scale))&&(t.scale=1),(t.translate>=_oe&&t.translate<=Coe||isNaN(t.translate))&&(t.translate=0)}function mh(t,e,r,n){dT(t.x,e.x,r.x,n?n.originX:void 0),dT(t.y,e.y,r.y,n?n.originY:void 0)}function fT(t,e,r){t.min=r.min+e.min,t.max=t.min+$i(e)}function Noe(t,e,r){fT(t.x,e.x,r.x),fT(t.y,e.y,r.y)}function hT(t,e,r){t.min=e.min-r.min,t.max=t.min+$i(e)}function gh(t,e,r){hT(t.x,e.x,r.x),hT(t.y,e.y,r.y)}function joe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Cr(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Cr(r,t,n.max):Math.min(t,r)),t}function pT(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Toe(t,{top:e,left:r,bottom:n,right:i}){return{x:pT(t.x,r,i),y:pT(t.y,e,n)}}function mT(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function Poe(t,e){return{x:mT(t.x,e.x),y:mT(t.y,e.y)}}function Ooe(t,e){let r=.5;const n=$i(t),i=$i(e);return i>n?r=ed(e.min,e.max-n,t.min):n>i&&(r=ed(t.min,t.max-i,e.min)),Ho(0,1,r)}function Ioe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const yw=.35;function Doe(t=yw){return t===!1?t=0:t===!0&&(t=yw),{x:gT(t,"left","right"),y:gT(t,"top","bottom")}}function gT(t,e,r){return{min:vT(t,e),max:vT(t,r)}}function vT(t,e){return typeof t=="number"?t:t[e]||0}const yT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ou=()=>({x:yT(),y:yT()}),xT=()=>({min:0,max:0}),Dr=()=>({x:xT(),y:xT()});function Ui(t){return[t("x"),t("y")]}function rL({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function koe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Moe(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function w1(t){return t===void 0||t===1}function xw({scale:t,scaleX:e,scaleY:r}){return!w1(t)||!w1(e)||!w1(r)}function vc(t){return xw(t)||nL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function nL(t){return bT(t.x)||bT(t.y)}function bT(t){return t&&t!=="0%"}function bg(t,e,r){const n=t-r,i=e*n;return r+i}function wT(t,e,r,n,i){return i!==void 0&&(t=bg(t,i,n)),bg(t,r,n)+e}function bw(t,e=0,r=1,n,i){t.min=wT(t.min,e,r,n,i),t.max=wT(t.max,e,r,n,i)}function iL(t,{x:e,y:r}){bw(t.x,e.translate,e.scale,e.originPoint),bw(t.y,r.translate,r.scale,r.originPoint)}const AT=.999999999999,ST=1.0000000000001;function Roe(t,e,r,n=!1){const i=r.length;if(!i)return;e.x=e.y=1;let a,o;for(let s=0;s<i;s++){a=r[s],o=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&cu(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,iL(t,o)),n&&vc(a.latestValues)&&cu(t,a.latestValues))}e.x<ST&&e.x>AT&&(e.x=1),e.y<ST&&e.y>AT&&(e.y=1)}function su(t,e){t.min=t.min+e,t.max=t.max+e}function _T(t,e,r,n,i=.5){const a=Cr(t.min,t.max,i);bw(t,e,r,a,n)}function cu(t,e){_T(t.x,e.x,e.scaleX,e.scale,e.originX),_T(t.y,e.y,e.scaleY,e.scale,e.originY)}function aL(t,e){return rL(Moe(t.getBoundingClientRect(),e))}function $oe(t,e,r){const n=aL(t,r),{scroll:i}=e;return i&&(su(n.x,i.offset.x),su(n.y,i.offset.y)),n}const oL=({current:t})=>t?t.ownerDocument.defaultView:null,Loe=new WeakMap;class Foe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dr(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(nm(d).point)},a=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Oie(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ui(v=>{let y=this.getAxisMotionValue(v).get()||0;if(eo.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[v];w&&(y=$i(w)*(parseFloat(y)/100))}}this.originPoint[v]=y}),m&&br.postRender(()=>m(d,f)),uw(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=f;if(p&&this.currentDirection===null){this.currentDirection=Boe(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),g&&g(d,f)},s=(d,f)=>this.stop(d,f),l=()=>Ui(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Q$(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:s,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:oL(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&br.postRender(()=>a(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:i}=this.getProps();if(!n||!Lm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=joe(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;r&&iu(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=Toe(i.layoutBox,r):this.constraints=!1,this.elastic=Doe(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ui(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Ioe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!iu(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=$oe(n,i.root,this.visualElement.getTransformPagePoint());let o=Poe(i.layout.layoutBox,a);if(r){const s=r(koe(o));this.hasMutatedConstraints=!!s,s&&(o=rL(s))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),l=this.constraints||{},u=Ui(d=>{if(!Lm(d,r,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,m=C(C({type:"inertia",velocity:n?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10},a),f);return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(s)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return uw(this.visualElement,e),n.start(b_(e,n,0,r,this.visualElement,!1))}stopAnimation(){Ui(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ui(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ui(r=>{const{drag:n}=this.getProps();if(!Lm(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:s}=i.layout.layoutBox[r];a.set(e[r]-Cr(o,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!iu(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ui(o=>{const s=this.getAxisMotionValue(o);if(s&&this.constraints!==!1){const l=s.get();i[o]=Ooe({min:l,max:l},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ui(o=>{if(!Lm(o,e,null))return;const s=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];s.set(Cr(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Loe.set(this.visualElement,this);const e=this.visualElement.current,r=ph(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();iu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),br.read(n);const o=Xh(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ui(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),r(),a(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=yw,dragMomentum:s=!0}=e;return M(C({},e),{drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:s})}}function Lm(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Boe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class zoe extends Qs{constructor(e){super(e),this.removeGroupControls=Ii,this.removeListeners=Ii,this.controls=new Foe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ii}unmount(){this.removeGroupControls(),this.removeListeners()}}const CT=t=>(e,r)=>{t&&br.postRender(()=>t(e,r))};class Voe extends Qs{constructor(){super(...arguments),this.removePointerDownListener=Ii}onPointerDown(e){this.session=new Q$(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:CT(e),onStart:CT(r),onMove:n,onEnd:(a,o)=>{delete this.session,i&&br.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=ph(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const C0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ET(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Nf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ye.test(t))t=parseFloat(t);else return t;const r=ET(t,e.target.x),n=ET(t,e.target.y);return"".concat(r,"% ").concat(n,"%")}},Uoe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,i=Fs.parse(t);if(i.length>5)return n;const a=Fs.createTransformer(t),o=typeof i[0]!="number"?1:0,s=r.x.scale*e.x,l=r.y.scale*e.y;i[0+o]/=s,i[1+o]/=l;const u=Cr(s,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),a(i)}};class Woe extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;uie(Hoe),a&&(r.group&&r.group.add(a),n&&n.register&&i&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions(M(C({},a.options),{onExitComplete:()=>this.safeToRemove()}))),C0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:i,isPresent:a}=this.props,o=n.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||br.postRender(()=>{const s=o.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),XS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sL(t){const[e,r]=Cne(),n=x.useContext(U5);return c.jsx(Woe,M(C({},t),{layoutGroup:n,switchLayoutGroup:x.useContext(Z5),isPresent:e,safeToRemove:r}))}const Hoe={borderRadius:M(C({},Nf),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Nf,borderTopRightRadius:Nf,borderBottomLeftRadius:Nf,borderBottomRightRadius:Nf,boxShadow:Uoe};function Goe(t,e,r){const n=zn(t)?t:qh(t);return n.start(b_("",n,e,r)),n.animation}function qoe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Koe=(t,e)=>t.depth-e.depth;class Xoe{constructor(){this.children=[],this.isDirty=!1}add(e){l_(this.children,e),this.isDirty=!0}remove(e){u_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Koe),this.isDirty=!1,this.children.forEach(e)}}function Yoe(t,e){const r=to.now(),n=({timestamp:i})=>{const a=i-r;a>=e&&(Ls(n),t(a-e))};return br.read(n,!0),()=>Ls(n)}const cL=["TopLeft","TopRight","BottomLeft","BottomRight"],Zoe=cL.length,NT=t=>typeof t=="string"?parseFloat(t):t,jT=t=>typeof t=="number"||Ye.test(t);function Qoe(t,e,r,n,i,a){i?(t.opacity=Cr(0,r.opacity!==void 0?r.opacity:1,Joe(n)),t.opacityExit=Cr(e.opacity!==void 0?e.opacity:1,0,ese(n))):a&&(t.opacity=Cr(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<Zoe;o++){const s="border".concat(cL[o],"Radius");let l=TT(e,s),u=TT(r,s);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||jT(l)===jT(u)?(t[s]=Math.max(Cr(NT(l),NT(u),n),0),(eo.test(u)||eo.test(l))&&(t[s]+="%")):t[s]=u}(e.rotate||r.rotate)&&(t.rotate=Cr(e.rotate||0,r.rotate||0,n))}function TT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Joe=lL(0,.5,N$),ese=lL(.5,.95,Ii);function lL(t,e,r){return n=>n<t?0:n>e?1:r(ed(t,e,n))}function PT(t,e){t.min=e.min,t.max=e.max}function Fi(t,e){PT(t.x,e.x),PT(t.y,e.y)}function OT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function IT(t,e,r,n,i){return t-=e,t=bg(t,1/r,n),i!==void 0&&(t=bg(t,1/i,n)),t}function tse(t,e=0,r=1,n=.5,i,a=t,o=t){if(eo.test(e)&&(e=parseFloat(e),e=Cr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let s=Cr(a.min,a.max,n);t===a&&(s-=e),t.min=IT(t.min,e,r,s,i),t.max=IT(t.max,e,r,s,i)}function DT(t,e,[r,n,i],a,o){tse(t,e[r],e[n],e[i],e.scale,a,o)}const rse=["x","scaleX","originX"],nse=["y","scaleY","originY"];function kT(t,e,r,n){DT(t.x,e,rse,r?r.x:void 0,n?n.x:void 0),DT(t.y,e,nse,r?r.y:void 0,n?n.y:void 0)}function MT(t){return t.translate===0&&t.scale===1}function uL(t){return MT(t.x)&&MT(t.y)}function RT(t,e){return t.min===e.min&&t.max===e.max}function ise(t,e){return RT(t.x,e.x)&&RT(t.y,e.y)}function $T(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function dL(t,e){return $T(t.x,e.x)&&$T(t.y,e.y)}function LT(t){return $i(t.x)/$i(t.y)}function FT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ase{constructor(){this.members=[]}add(e){l_(this.members,e),e.scheduleRender()}remove(e){if(u_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ose(t,e,r){let n="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((i||a||o)&&(n="translate3d(".concat(i,"px, ").concat(a,"px, ").concat(o,"px) ")),(e.x!==1||e.y!==1)&&(n+="scale(".concat(1/e.x,", ").concat(1/e.y,") ")),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:m}=r;u&&(n="perspective(".concat(u,"px) ").concat(n)),d&&(n+="rotate(".concat(d,"deg) ")),f&&(n+="rotateX(".concat(f,"deg) ")),h&&(n+="rotateY(".concat(h,"deg) ")),p&&(n+="skewX(".concat(p,"deg) ")),m&&(n+="skewY(".concat(m,"deg) "))}const s=t.x.scale*e.x,l=t.y.scale*e.y;return(s!==1||l!==1)&&(n+="scale(".concat(s,", ").concat(l,")")),n||"none"}const yc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qf=typeof window!="undefined"&&window.MotionDebug!==void 0,A1=["","X","Y","Z"],sse={visibility:"hidden"},BT=1e3;let cse=0;function S1(t,e,r,n){const{latestValues:i}=e;i[t]&&(r[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function fL(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=b$(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",br,!(i||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&fL(n)}function hL({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},s=e==null?void 0:e()){this.id=cse++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qf&&(yc.totalNodes=yc.resolvedTargetDeltas=yc.recalculatedProjection=0),this.nodes.forEach(dse),this.nodes.forEach(gse),this.nodes.forEach(vse),this.nodes.forEach(fse),Qf&&window.MotionDebug.record(yc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Xoe)}addEventListener(o,s){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new d_),this.eventHandlers.get(o).add(s)}notifyListeners(o,...s){const l=this.eventHandlers.get(o);l&&l.notify(...s)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=qoe(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(u||l)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Yoe(h,250),C0.hasAnimatedSinceResize&&(C0.hasAnimatedSinceResize=!1,this.nodes.forEach(VT))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||Ase,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=d.getProps(),b=!this.targetLayout||!dL(this.targetLayout,m)||p,w=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const S=M(C({},a_(g,"layout")),{onPlay:v,onComplete:y});(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else h||VT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ls(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(yse),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(zT);return}this.isUpdating||this.nodes.forEach(pse),this.isUpdating=!1,this.nodes.forEach(mse),this.nodes.forEach(lse),this.nodes.forEach(use),this.clearAllSnapshots();const s=to.now();Nn.delta=Ho(0,1e3/60,s-Nn.timestamp),Nn.timestamp=s,Nn.isProcessing=!0,h1.update.process(Nn),h1.preRender.process(Nn),h1.render.process(Nn),Nn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,XS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hse),this.sharedNodes.forEach(xse)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,br.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){br.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(s=!1),s){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!uL(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(s||vc(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return o&&(l=this.removeTransform(l)),Sse(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:s}=this.options;if(!s)return Dr();const l=s.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(_se))){const{scroll:d}=this.root;d&&(su(l.x,d.offset.x),su(l.y,d.offset.y))}return l}removeElementScroll(o){var s;const l=Dr();if(Fi(l,o),!((s=this.scroll)===null||s===void 0)&&s.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Fi(l,o),su(l.x,f.offset.x),su(l.y,f.offset.y))}return l}applyTransform(o,s=!1){const l=Dr();Fi(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!s&&d.options.layoutScroll&&d.scroll&&d!==d.root&&cu(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),vc(d.latestValues)&&cu(l,d.latestValues)}return vc(this.latestValues)&&cu(l,this.latestValues),l}removeTransform(o){const s=Dr();Fi(s,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!vc(u.latestValues))continue;xw(u.latestValues)&&u.updateSnapshot();const d=Dr(),f=u.measurePageBox();Fi(d,f),kT(s,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return vc(this.latestValues)&&kT(s,this.latestValues),s}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options=M(C(C({},this.options),o),{crossfade:o.crossfade!==void 0?o.crossfade:!0})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var s;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Nn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dr(),this.relativeTargetOrigin=Dr(),gh(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dr(),this.targetWithTransforms=Dr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Noe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fi(this.target,this.layout.layoutBox),iL(this.target,this.targetDelta)):Fi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dr(),this.relativeTargetOrigin=Dr(),gh(this.relativeTargetOrigin,this.target,p.target),Fi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qf&&yc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||xw(this.parent.latestValues)||nL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const s=this.getLead(),l=!!this.resumingFrom||this!==s;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Nn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Fi(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Roe(this.layoutCorrected,this.treeScale,this.path,l),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=Dr());const{target:m}=s;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(OT(this.prevProjectionDelta.x,this.projectionDelta.x),OT(this.prevProjectionDelta.y,this.projectionDelta.y)),mh(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!FT(this.projectionDelta.x,this.prevProjectionDelta.x)||!FT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),Qf&&yc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var s;if((s=this.options.visualElement)===null||s===void 0||s.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ou(),this.projectionDelta=ou(),this.projectionDeltaWithTransform=ou()}setAnimationOrigin(o,s=!1){const l=this.snapshot,u=l?l.latestValues:{},d=C({},this.latestValues),f=ou();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=Dr(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,v=this.getStack(),y=!v||v.members.length<=1,b=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(wse));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const A=S/1e3;UT(f.x,o.x,A),UT(f.y,o.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gh(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bse(this.relativeTarget,this.relativeTargetOrigin,h,A),w&&ise(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Dr()),Fi(w,this.relativeTarget)),g&&(this.animationValues=d,Qoe(d,u,this.latestValues,A,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ls(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=br.update(()=>{C0.hasAnimatedSinceResize=!0,this.currentAnimation=Goe(0,BT,M(C({},o),{onUpdate:s=>{this.mixTargetDelta(s),o.onUpdate&&o.onUpdate(s)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:s,target:l,layout:u,latestValues:d}=o;if(!(!s||!l||!u)){if(this!==o&&this.layout&&u&&pL(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Dr();const f=$i(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=$i(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}Fi(s,l),cu(s,d),mh(this.projectionDeltaWithTransform,this.layoutCorrected,s,d)}}registerSharedNode(o,s){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ase),this.sharedNodes.get(o).add(s);const u=s.options.initialPromotionConfig;s.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(s):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:s,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let s=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const u={};l.z&&S1("z",o,u,this.animationValues);for(let d=0;d<A1.length;d++)S1("rotate".concat(A1[d]),o,u,this.animationValues),S1("skew".concat(A1[d]),o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var s,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sse;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=S0(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=S0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!vc(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=ose(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y:m}=this.projectionDelta;u.transformOrigin="".concat(p.origin*100,"% ").concat(m.origin*100,"% 0"),f.animationValues?u.opacity=f===this?(l=(s=h.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in mg){if(h[g]===void 0)continue;const{correct:v,applyTo:y}=mg[g],b=u.transform==="none"?h[g]:v(h[g],f);if(y){const w=y.length;for(let S=0;S<w;S++)u[y[S]]=b}else u[g]=b}return this.options.layoutId&&(u.pointerEvents=f===this?S0(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var s;return(s=o.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(zT),this.root.sharedNodes.clear()}}}function lse(t){t.updateLayout()}function use(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,o=r.source!==t.layout.source;a==="size"?Ui(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],p=$i(h);h.min=n[f].min,h.max=h.min+p}):pL(a,r.layoutBox,n)&&Ui(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],p=$i(n[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const s=ou();mh(s,n,r.layoutBox);const l=ou();o?mh(l,t.applyTransform(i,!0),r.measuredBox):mh(l,n,r.layoutBox);const u=!uL(s);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=Dr();gh(m,r.layoutBox,h.layoutBox);const g=Dr();gh(g,n,p.layoutBox),dL(m,g)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:s,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function dse(t){Qf&&yc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fse(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hse(t){t.clearSnapshot()}function zT(t){t.clearMeasurements()}function pse(t){t.isLayoutDirty=!1}function mse(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function VT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gse(t){t.resolveTargetDelta()}function vse(t){t.calcProjection()}function yse(t){t.resetSkewAndRotation()}function xse(t){t.removeLeadSnapshot()}function UT(t,e,r){t.translate=Cr(e.translate,0,r),t.scale=Cr(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function WT(t,e,r,n){t.min=Cr(e.min,r.min,n),t.max=Cr(e.max,r.max,n)}function bse(t,e,r,n){WT(t.x,e.x,r.x,n),WT(t.y,e.y,r.y,n)}function wse(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Ase={duration:.45,ease:[.4,0,.1,1]},HT=t=>typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),GT=HT("applewebkit/")&&!HT("chrome/")?Math.round:Ii;function qT(t){t.min=GT(t.min),t.max=GT(t.max)}function Sse(t){qT(t.x),qT(t.y)}function pL(t,e,r){return t==="position"||t==="preserve-aspect"&&!Eoe(LT(e),LT(r),.2)}function _se(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Cse=hL({attachResizeListener:(t,e)=>Xh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),_1={current:void 0},mL=hL({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!_1.current){const t=new Cse({});t.mount(window),t.setOptions({layoutScroll:!0}),_1.current=t}return _1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Ese={pan:{Feature:Voe},drag:{Feature:zoe,ProjectionNode:mL,MeasureLayout:sL}};function KT(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const i="onHover"+r,a=n[i];a&&br.postRender(()=>a(e,nm(e)))}class Nse extends Qs{mount(){const{current:e}=this.node;e&&(this.unmount=Eie(e,r=>(KT(this.node,r,"Start"),n=>KT(this.node,n,"End"))))}unmount(){}}class jse extends Qs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(r){e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rm(Xh(this.node.current,"focus",()=>this.onFocus()),Xh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function XT(t,e,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const i="onTap"+(r==="End"?"":r),a=n[i];a&&br.postRender(()=>a(e,nm(e)))}class Tse extends Qs{mount(){const{current:e}=this.node;e&&(this.unmount=Pie(e,r=>(XT(this.node,r,"Start"),(n,{success:i})=>XT(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ww=new WeakMap,C1=new WeakMap,Pse=t=>{const e=ww.get(t.target);e&&e(t)},Ose=t=>{t.forEach(Pse)};function Ise(r){var n=r,{root:t}=n,e=K(n,["root"]);const i=t||document;C1.has(i)||C1.set(i,{});const a=C1.get(i),o=JSON.stringify(e);return a[o]||(a[o]=new IntersectionObserver(Ose,C({root:t},e))),a[o]}function Dse(t,e,r){const n=Ise(e);return ww.set(t,r),n.observe(t),()=>{ww.delete(t),n.unobserve(t)}}const kse={some:0,all:1};class Mse extends Qs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:a}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:kse[i]},s=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(l)};return Dse(this.node.current,o,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver=="undefined")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Rse(e,r))&&this.startObserver()}unmount(){}}function Rse({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const $se={inView:{Feature:Mse},tap:{Feature:Tse},focus:{Feature:jse},hover:{Feature:Nse}},Lse={layout:{ProjectionNode:mL,MeasureLayout:sL}},Aw={current:null},gL={current:!1};function Fse(){if(gL.current=!0,!!WS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Aw.current=t.matches;t.addListener(e),e()}else Aw.current=!1}const Bse=[...z$,Ln,Fs],zse=t=>Bse.find(B$(t)),YT=new WeakMap;function Vse(t,e,r){for(const n in e){const i=e[n],a=r[n];if(zn(i))t.addValue(n,i);else if(zn(a))t.addValue(n,qh(i,{owner:t}));else if(a!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,qh(o!==void 0?o:i,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const ZT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Use{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=v_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=to.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,br.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget=C({},l),this.initialValues=r.initial?C({},l):{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!a,this.isControllingVariants=wy(r),this.isVariantNode=X5(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const p=this.scrapeMotionValuesFromProps(r,{},this),{willChange:f}=p,h=K(p,["willChange"]);for(const m in h){const g=h[m];l[m]!==void 0&&zn(g)&&g.set(l[m],!1)}}mount(e){this.current=e,YT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),gL.current||Fse(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Aw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){YT.delete(this.current),this.projection&&this.projection.unmount(),Ls(this.notifyUpdate),Ls(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=El.has(e),i=r.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&br.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in td){const r=td[e];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<ZT.length;n++){const i=ZT[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Vse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=qh(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(L$(i)||T$(i))?i=parseFloat(i):!zse(i)&&Fs.test(r)&&(i=M$(e,r)),this.setBaseTarget(e,zn(i)?i.get():i)),zn(i)?i.get():i}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=ZS(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!zn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new d_),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class vL extends Use{constructor(){super(...arguments),this.KeyframeResolver=V$}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent="".concat(r))}))}}function Wse(t){return window.getComputedStyle(t)}class Hse extends vL{constructor(){super(...arguments),this.type="html",this.renderInstance=i$}readValueFromInstance(e,r){if(El.has(r)){const n=g_(r);return n&&n.default||0}else{const n=Wse(e),i=(t$(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return aL(e,r)}build(e,r,n){e_(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return i_(e,r,n)}}class Gse extends vL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dr}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(El.has(r)){const n=g_(r);return n&&n.default||0}return r=a$.has(r)?r:KS(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return c$(e,r,n)}build(e,r,n){t_(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,i){o$(e,r,n,i)}mount(e){this.isSVGTag=n_(e.tagName),super.mount(e)}}const qse=(t,e)=>YS(t)?new Gse(e):new Hse(e,{allowProjection:t!==x.Fragment}),Kse=xie(C(C(C(C({},voe),$se),Ese),Lse),qse),Yh=kne(Kse);function yL(t){return Cl({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M60,96v64a12,12,0,0,1-24,0V96a12,12,0,0,1,24,0ZM88,20A12,12,0,0,0,76,32V224a12,12,0,0,0,24,0V32A12,12,0,0,0,88,20Zm40,32a12,12,0,0,0-12,12V192a12,12,0,0,0,24,0V64A12,12,0,0,0,128,52Zm40,32a12,12,0,0,0-12,12v64a12,12,0,0,0,24,0V96A12,12,0,0,0,168,84Zm40-16a12,12,0,0,0-12,12v96a12,12,0,0,0,24,0V80A12,12,0,0,0,208,68Z"},child:[]}]})(t)}const QT=({message:t,isTyping:e})=>{if(e)return c.jsx("div",{className:"flex justify-start",children:c.jsx("div",{className:"max-w-xs px-4 py-3 rounded-xl rounded-bl-sm bg-gray-100 text-gray-800",children:c.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[c.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"200ms"}}),c.jsx("span",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"400ms"}})]})})});const{isSystem:r,isUser:n,isVoice:i,text:a,timestamp:o}=t;if(r)return c.jsx("div",{className:"my-2 flex justify-center",children:c.jsx("div",{className:"rounded-full bg-gray-100 px-4 py-1 text-xs text-gray-500",children:a})});const s=n?"justify-end":"justify-start",l=n?"rounded-br-sm text-white":"rounded-bl-sm bg-gray-100 text-gray-800",u=n?{background:Gc.primary}:{},d=n?"text-white opacity-80":"text-gray-500",f=n?"text-white text-opacity-70":"text-gray-500";return c.jsx("div",{className:"flex ".concat(s),children:c.jsx("div",{className:"max-w-xs rounded-xl px-3 py-2 shadow-sm ".concat(l),style:u,children:c.jsxs("div",{className:"flex items-start space-x-2",children:[i&&c.jsx($A,{size:14,className:"mt-1 flex-shrink-0 ".concat(d)}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:a}),c.jsxs("p",{className:"mt-1 flex items-center text-xs ".concat(f),children:[i&&c.jsx("span",{className:"mr-1.5",children:""}),o.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})]})]})]})})})},Xse=t=>{const e=x.useRef(null),r=()=>{var n;(n=e.current)==null||n.scrollIntoView({behavior:"smooth"})};return x.useEffect(()=>{r()},[t]),{messagesEndRef:e,scrollToBottom:r}},E1=({delay:t,color:e})=>c.jsx(Yh.div,{className:"absolute inset-0 rounded-full border-2 ".concat(e),initial:{scale:.5,opacity:0},animate:{scale:2.2,opacity:[0,.7,0]},transition:{duration:3,repeat:1/0,repeatType:"loop",ease:"easeInOut",delay:t}}),Yse={idle:{scale:1,boxShadow:"0px 8px 20px rgba(0, 0, 0, 0.08)"},listening:{scale:1.1,boxShadow:"0px 10px 30px rgba(59, 130, 246, 0.3)"},speaking:{scale:1.05,boxShadow:"0px 10px 30px rgba(34, 197, 94, 0.3)"},processing:{scale:1,boxShadow:"0px 10px 30px rgba(249, 115, 22, 0.3)",rotate:[0,360]}},Zse=({isListening:t,isSpeaking:e,isProcessing:r,onClose:n})=>{let i="Tocca per parlare",a="idle",o="border-gray-300",s="text-gray-400";return t?(i="Ascoltando...",a="listening",o="border-blue-400/80",s="text-blue-500"):r?(i="Elaboro...",a="processing",o="border-orange-400/80",s="text-orange-500"):e&&(i="Sto parlando...",a="speaking",o="border-green-400/80",s="text-green-500"),c.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-4 overflow-hidden",children:[c.jsxs("div",{className:"relative flex items-center justify-center w-56 h-56",children:[(t||e)&&c.jsxs(c.Fragment,{children:[c.jsx(E1,{delay:0,color:o}),c.jsx(E1,{delay:1,color:o}),c.jsx(E1,{delay:2,color:o})]}),c.jsx(Yh.div,{className:"absolute w-40 h-40 rounded-full bg-white border border-gray-200 flex items-center justify-center",variants:Yse,animate:a,children:c.jsx(yL,{size:56,className:s,style:{transition:"color 0.5s"}})})]}),c.jsx(Yh.p,{className:"mt-8 text-xl font-light text-gray-700 text-center",initial:{y:10,opacity:0},animate:{y:0,opacity:1},children:i},i),c.jsxs("button",{onClick:n,className:"mt-auto flex items-center gap-2 px-5 py-2 bg-red-600 text-white rounded-full text-base font-medium hover:bg-red-700 transition-all duration-300 shadow-lg transform hover:scale-105","aria-label":"Termina conversazione",children:[c.jsx(aH,{size:20}),"Termina"]})]})},Qse=({isRecording:t,isTranscribing:e,onStart:r,onStop:n})=>e?c.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:c.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center",children:c.jsx(Pn,{size:24,className:"text-blue-600 animate-spin"})}),c.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-blue-300 animate-ping"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Trascrizione in corso..."}),c.jsx("p",{className:"text-xs text-gray-500",children:"Elaborazione del parlato"})]})]})}):t?c.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:c.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:n,className:"w-16 h-16 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-colors duration-200 z-10 relative",children:c.jsx(v0,{size:24,className:"text-white"})}),c.jsx("div",{className:"absolute inset-0 rounded-full bg-red-200 animate-pulse"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm font-medium text-red-600",children:"Registrazione in corso..."}),c.jsx("p",{className:"text-xs text-gray-500",children:"Tocca per interrompere"})]})]})}):null,Jse=({isOpen:t,onClose:e,messages:r,isTyping:n,inputText:i,isRecording:a,isTranscribing:o,onInputChange:s,onSendMessage:l,onStartRecording:u,onStopRecording:d,pendingAction:f,onConfirmPendingAction:h,onCancelPendingAction:p,error:m,isVoiceChatActive:g,isListening:v,isSpeaking:y,isProcessing:b,onToggleVoiceChat:w})=>{const{messagesEndRef:S}=Xse(r),A=Li(),_=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),l())};if(!t)return null;const E=g,N=!g&&(a||o),T=!g&&!N,O=A?"fixed inset-0 z-40 flex items-end justify-center sm:items-center":"fixed inset-0 z-40 flex items-end justify-end sm:items-end sm:justify-end",j=A?"relative w-full max-w-sm mx-4 sm:mb-4 bg-white rounded-t-2xl sm:rounded-2xl shadow-xl transition-all duration-300 transform flex flex-col":"relative w-full max-w-sm sm:mr-4 sm:mb-4 bg-white rounded-t-2xl sm:rounded-2xl shadow-xl transition-all duration-300 transform flex flex-col",P=A?{height:"calc(70vh - 2rem)",maxHeight:"500px",bottom:"7vh"}:{height:"calc(70vh - 2rem)",maxHeight:"500px"};return c.jsxs("div",{className:O,children:[c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30 transition-opacity duration-300",onClick:e}),c.jsxs("div",{className:j,style:P,children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-t-2xl text-white flex-shrink-0",style:{background:Gc.primary},children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-6 h-6 rounded-full bg-white bg-opacity-20 flex items-center justify-center",children:c.jsx($p,{size:14})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-sm",children:qc.assistantName}),c.jsx("p",{className:"text-xs opacity-80",children:g?"Conversazione vocale":n?"Sta scrivendo...":qc.statusOnline})]})]}),c.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors duration-200","aria-label":qc.closeAriaLabel,children:c.jsx(oo,{size:16})})]}),E&&c.jsx(Zse,{isListening:v,isSpeaking:y,isProcessing:b,onClose:w}),N&&c.jsx(Qse,{isRecording:a,isTranscribing:o,onStart:u,onStop:d}),T&&c.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map((D,F)=>c.jsx(QT,{message:D},F)),n&&c.jsx(QT,{message:{id:"typing",text:"...",isUser:!1,timestamp:new Date},isTyping:!0}),c.jsx("div",{ref:S})]}),T&&c.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-gray-200 bg-white",children:[m&&c.jsxs("div",{className:"mb-2 p-2 text-xs text-red-700 bg-red-100 rounded-md flex items-center gap-2",children:[c.jsx(p0,{size:14}),c.jsx("span",{children:m})]}),f?c.jsxs("div",{className:"p-2 border border-blue-200 rounded-lg bg-blue-50",children:[c.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Sei sicuro di voler eseguire l'azione?"}),c.jsxs("div",{className:"flex justify-end space-x-2",children:[c.jsx("button",{onClick:p,className:"px-3 py-1 text-xs font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Annulla"}),c.jsx("button",{onClick:h,className:"px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Conferma"})]})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("textarea",{value:i,onChange:D=>s(D.target.value),onKeyPress:_,placeholder:"Scrivi un messaggio...",className:"w-full h-10 px-3 pr-10 py-2 text-sm border-gray-300 rounded-full focus:ring-blue-500 focus:border-blue-500 transition resize-none",rows:1}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:i?c.jsx("button",{onClick:l,className:"p-2 text-white rounded-full",style:{backgroundColor:Gc.primary},children:c.jsx(Mb,{size:16})}):c.jsx("button",{onClick:u,className:"p-2 text-gray-500 hover:text-blue-600",children:c.jsx($A,{size:18})})})]}),c.jsx("button",{onClick:w,className:"p-2.5 text-white rounded-full transition-colors bg-cambridge-newStyle",style:{backgroundColor:Gc.primary},"aria-label":"Avvia chat vocale",children:c.jsx(yL,{size:16})})]})]})]})]})},ece=({isListening:t,isSupported:e,hasPermission:r,onToggle:n,onRequestPermission:i})=>{if(!e)return null;let a="",o="",s=c.jsx(v0,{size:16});r===null?(a="Permessi richiesti",o="bg-yellow-500",s=c.jsx(hH,{size:16})):r===!1?(a="Permessi negati",o="bg-red-500",s=c.jsx(v0,{size:16})):t?(a='Ascoltando "Garibaldi"',o="bg-green-500",s=c.jsx($A,{size:16})):(a="Wake word inattivo",o="bg-gray-500",s=c.jsx(v0,{size:16}));const l=()=>{r===!1?i():n()};return c.jsx(Yh.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-4 left-4 z-30",children:c.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-2 rounded-full text-white text-sm font-medium shadow-lg transition-all duration-300 hover:scale-105 ".concat(o),title:a,children:[s,c.jsx("span",{className:"hidden sm:inline",children:a}),t&&c.jsx(Yh.div,{className:"absolute inset-0 rounded-full border-2 border-white",animate:{scale:[1,1.2,1],opacity:[.7,0,.7]},transition:{duration:2,repeat:1/0}})]})})},xL=()=>{const t=dne(),{user:e}=Bt(),{add:r}=Jt("calendar_events"),{add:n}=Jt("reminders"),{add:i}=Jt("notes"),{add:a}=Jt("shopping_food"),{messages:o,isOpen:s,isTyping:l,inputText:u,isRecording:d,isTranscribing:f,isVoiceChatActive:h,isListening:p,isSpeaking:m,isProcessing:g,openChat:v,closeChat:y,setInputText:b,handleSendMessage:w,startRecording:S,stopRecording:A,toggleVoiceChat:_,startVoiceChat:E,error:N,pendingAction:T,confirmPendingAction:O,cancelPendingAction:j}=bne({username:(e==null?void 0:e.username)||"user",enableSmartAssistant:!0,onAddCalendarEvent:r,onAddReminder:n,onAddNote:i,onAddShoppingFood:a}),{isListeningForWakeWord:P,isSupported:D,hasPermission:F,startListening:I,stopListening:k,requestPermission:R}=Ane(()=>{console.log(" GARIBALDI RILEVATO! Avvio chat vocale..."),s||v(),setTimeout(()=>{E()},500)},!s&&!h&&!p&&!m&&!g),[L,V]=x.useState(!1),W=()=>{L?(k(),V(!1)):(I(),V(!0))},q=()=>G(Gt,null,function*(){(yield R())&&(I(),V(!0))});return x.useEffect(()=>{D&&F===!0&&!h&&(I(),V(!0))},[D,F,I,h]),x.useEffect(()=>{h&&L?(console.log(" Voice Chat attiva - sospendo wake word"),k()):!h&&!L&&F===!0&&D&&(console.log(" Voice Chat disattiva - riattivo wake word"),setTimeout(()=>{I(),V(!0)},1e3))},[h,L,F,D,I,k]),x.useEffect(()=>()=>{k()},[k]),c.jsxs(c.Fragment,{children:[c.jsx(ece,{isListening:P,isSupported:D,hasPermission:F,onToggle:W,onRequestPermission:q}),c.jsx(Sne,{onClick:v,isVisible:t,hide:s}),c.jsx(Jse,{isOpen:s,onClose:y,messages:o,isTyping:l,inputText:u,isRecording:d,isTranscribing:f,onInputChange:b,onSendMessage:w,onStartRecording:S,onStopRecording:A,onConfirmPendingAction:O,onCancelPendingAction:j,pendingAction:T,error:N,isVoiceChatActive:h,isListening:p,isSpeaking:m,isProcessing:g,onToggleVoiceChat:_})]})};function tce({children:t}){const[e,r]=x.useState(!1);return c.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[c.jsx(lne,{onMenuToggle:()=>r(!e)}),c.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[c.jsx(une,{isOpen:e,onClose:()=>r(!1)}),c.jsx("main",{className:"flex-1 overflow-auto bg-background",children:t})]}),c.jsx(xL,{})]})}const rce=({className:t})=>c.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/6457/6457403.png",alt:"rat icon",className:t,style:{filter:"brightness(0) invert(1)"}});function nce(){const{user:t}=Bt(),e=L5(),r=(t==null?void 0:t.username)==="Fabio"||(t==null?void 0:t.username)==="Ludovica",n=r?{icon:rce,title:"TopiniTask",iconBgColor:"bg-blue-600",iconTextColor:"text-white"}:{icon:MA,title:"HomeTask",iconBgColor:"bg-burnt-newStyle",iconTextColor:"text-white"},i=n.icon;return c.jsxs("header",{className:"sm:hidden flex items-center justify-between h-14 px-4 bg-background border-b border-border shadow-md z-10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 ".concat(n.iconBgColor," rounded-lg flex items-center justify-center shadow-sm"),children:c.jsx(i,{className:"h-5 w-5 ".concat(n.iconTextColor)})}),c.jsx("h1",{className:"text-xl font-bold text-foreground",children:n.title}),r&&c.jsx("div",{className:"px-2 py-0.5 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 text-xs rounded-full font-medium",children:""})]}),c.jsx("div",{className:"flex items-center space-x-2",children:c.jsx(dg,{variant:"mobile",priceSelectionService:e})})]})}const Jf={v:[]},JT=()=>Jf.v.forEach(t=>t()),ice=t=>(Jf.v.push(t)===1&&addEventListener("hashchange",JT),()=>{Jf.v=Jf.v.filter(e=>e!==t),Jf.v.length||removeEventListener("hashchange",JT)}),ace=()=>"/"+location.hash.replace(/^#?\/?/,""),wg=(t,{state:e=null,replace:r=!1}={})=>{const[n,i]=t.replace(/^#?\/?/,"").split("?"),a=location.pathname+(i?"?".concat(i):location.search)+"#/".concat(n),o=location.href,s=new URL(a,location.origin).href;r?history.replaceState(e,"",a):history.pushState(e,"",a);const l=typeof HashChangeEvent!="undefined"?new HashChangeEvent("hashchange",{oldURL:o,newURL:s}):new Event("hashchange",{detail:{oldURL:o,newURL:s}});dispatchEvent(l)},bL=({ssrPath:t="/"}={})=>[Y4.useSyncExternalStore(ice,ace,()=>t),wg];bL.hrefs=t=>"#"+t;const oce=({className:t=""})=>c.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/6457/6457403.png",alt:"rat icon",className:t,style:{filter:"brightness(0) invert(1)"}}),sce=({children:t})=>{const[e,r]=x.useState(!1),n=x.useRef(null);return x.useEffect(()=>{const i=a=>{n.current&&!n.current.contains(a.target)&&r(!1)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]),c.jsx("div",{className:"relative",ref:n,children:$.Children.map(t,i=>$.isValidElement(i)?$.cloneElement(i,{isOpen:e,setIsOpen:r}):i)})},cce=({children:t,setIsOpen:e})=>c.jsx("div",{onClick:()=>e==null?void 0:e(r=>!r),children:t}),lce=({children:t,className:e="",isOpen:r})=>r?c.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-56 bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg shadow-lg p-1 z-50 ".concat(e),children:t}):null,jf=({children:t,onClick:e,className:r="",setIsOpen:n})=>c.jsx("button",{className:"w-full p-2 text-sm flex items-center rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer text-left ".concat(r),onClick:()=>{e==null||e(),n==null||n(!1)},children:t}),uce=({children:t})=>c.jsx("div",{className:"p-2 text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),eP=()=>c.jsx("div",{className:"border-t dark:border-gray-700 my-1"}),dce=()=>{const[t,e]=bL(),{user:r,logout:n}=Bt(),{theme:i,toggleTheme:a}=hS(),{permission:o,requestPermission:s,isSupported:l,token:u,isInitializing:d,disableNotifications:f,enableNotifications:h,isManuallyDisabled:p}=vS(),[m,g]=x.useState(!1),v=(r==null?void 0:r.username)==="Fabio"||(r==null?void 0:r.username)==="Ludovica",y=(r==null?void 0:r.role)==="admin",b=VS(),w=b.slice(0,2),S=b.slice(2),A=S.some(O=>O.path===t||O.path.includes("https://")&&t.startsWith(O.path.split("#")[0])),_=()=>o!=="granted"?{icon:Eh,text:"Attiva Notifiche",color:"text-gray-400"}:d?{icon:In,text:"Configurazione token in corso...",color:"text-blue-500"}:u?{icon:In,text:"Notifiche Attive",color:"text-green-500"}:p?{icon:Eh,text:"Notifiche Disabilitate",color:"text-red-500"}:{icon:In,text:"Configura notifiche",color:"text-blue-500"},E=_().icon,N=v?oce:ji,T=O=>{O.includes("https://")?window.open(O,"_blank","noopener,noreferrer"):e(O),g(!1)};return c.jsxs("footer",{className:"sm:hidden fixed bottom-0 left-0 w-full border-t shadow-lg z-50 ".concat(i==="dark"?"bg-gray-900 border-gray-700 text-white":"bg-white border-gray-200 text-gray-800"),children:[m&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(!1)}),c.jsx("div",{className:"absolute bottom-20 left-1/2 rounded-3xl p-4 shadow-2xl border min-w-[280px] z-50 ".concat(i==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),style:{transform:"translateX(-50%)",animation:"slideInUp 0.3s ease-out forwards"},children:c.jsx("div",{className:"grid grid-cols-3 gap-2",children:S.map((O,j)=>{const P=O.icon,D=O.path===t||O.path.includes("https://")&&t.startsWith(O.path.split("#")[0]);return c.jsxs("button",{onClick:()=>T(O.path),className:"h-20 w-20 rounded-2xl flex flex-col items-center justify-center transition-all duration-200 hover:scale-105 ".concat(D?"text-burnt-newStyle":"hover:text-burnt-newStyle hover:bg-gray-100 dark:hover:bg-gray-700"),style:{animation:"slideInItem 0.4s ease-out ".concat(j*80,"ms forwards"),opacity:0},children:[c.jsx(P,{className:"h-5 w-5"}),c.jsx("span",{className:"text-xs mt-1 font-medium",children:O.name})]},O.path)})})})]}),c.jsxs("div",{className:"flex justify-around items-center h-16 px-2",children:[w.map(O=>{const j=O.icon,P=O.path===t||O.path.includes("https://")&&t.startsWith(O.path.split("#")[0]);return c.jsxs("button",{onClick:()=>T(O.path),className:"h-full w-20 rounded-lg flex flex-col items-center justify-center space-y-1 transition-colors ".concat(P?"text-burnt-newStyle":"text-gray-500 hover:text-burnt-newStyle"),children:[c.jsx(j,{className:"h-4 w-4"}),c.jsx("span",{className:"text-xs font-medium",children:O.name})]},O.path)}),c.jsx("button",{onClick:()=>g(!m),className:"h-14 w-14 rounded-full flex items-center justify-center transition-all duration-300 ".concat(m||A?"text-burnt-newStyle":""),style:{transform:m||A?"rotate(45deg)":"rotate(0deg)"},children:c.jsx(ar,{className:"h-4 w-4"})}),c.jsxs(sce,{children:[c.jsx(cce,{children:c.jsx("div",{className:"h-14 w-14 flex items-center justify-center",children:c.jsx("div",{className:"w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center cursor-pointer",children:c.jsx(N,{className:"h-3.5 w-3.5 text-white"})})})}),c.jsxs(lce,{children:[c.jsxs(uce,{children:[c.jsx("div",{className:"font-medium",children:r==null?void 0:r.username}),c.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r==null?void 0:r.role})]}),c.jsx(eP,{}),c.jsxs(jf,{onClick:a,children:[i==="light"?c.jsx(k0,{className:"mr-2 h-3 w-3"}):c.jsx(L0,{className:"mr-2 h-3 w-3"}),c.jsx("span",{children:i==="light"?"Tema Scuro":"Tema Chiaro"})]}),l&&c.jsxs(jf,{onClick:()=>G(Gt,null,function*(){try{o==="granted"?u?yield f():p&&(yield h()):yield s()}catch(O){console.error(" Errore:",O)}}),children:[c.jsx(E,{className:"mr-2 h-3 w-3 ".concat(_().color)}),c.jsx("span",{className:_().color,children:_().text})]}),c.jsxs(jf,{onClick:()=>T("/settings"),children:[c.jsx(Lu,{className:"mr-2 h-3 w-3"}),c.jsx("span",{children:"Impostazioni"})]}),y&&c.jsxs(jf,{onClick:()=>T("/admin/panel"),children:[c.jsx(Lr,{className:"mr-2 h-3 w-3"}),c.jsx("span",{children:"Pannello Admin"})]}),c.jsx(eP,{}),c.jsxs(jf,{onClick:n,className:"text-red-600 dark:text-red-500",children:[c.jsx(Ib,{className:"mr-2 h-3 w-3"}),c.jsx("span",{children:"Esci"})]})]})]})]}),c.jsx("style",{dangerouslySetInnerHTML:{__html:"\n        @keyframes slideInUp {\n          from { opacity: 0; transform: translateX(-50%) translateY(20px) scale(0.95); }\n          to { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }\n        }\n        @keyframes slideInItem {\n          from { opacity: 0; transform: translateY(20px) scale(0.8); }\n          to { opacity: 1; transform: translateY(0) scale(1); }\n        }\n        body { background-color: ".concat(i==="dark"?"#111827":"#f9fafb","; }\n      ")}})]})};function fce({children:t}){return c.jsxs("div",{className:"bg-background",children:[c.jsx(nce,{}),c.jsx("main",{className:"pb-24",children:c.jsx("div",{className:"p-4",children:t})}),c.jsx(xL,{}),c.jsx(dce,{})]})}var _y="Switch",[hce,GBe]=ai(_y),[pce,mce]=hce(_y),wL=x.forwardRef((t,e)=>{const w=t,{__scopeSwitch:r,name:n,checked:i,defaultChecked:a,required:o,disabled:s,value:l="on",onCheckedChange:u,form:d}=w,f=K(w,["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"]),[h,p]=x.useState(null),m=ft(e,S=>p(S)),g=x.useRef(!1),v=h?d||!!h.closest("form"):!0,[y,b]=io({prop:i,defaultProp:a!=null?a:!1,onChange:u,caller:_y});return c.jsxs(pce,{scope:r,checked:y,disabled:s,children:[c.jsx(Ge.button,M(C({type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":CL(y),"data-disabled":s?"":void 0,disabled:s,value:l},f),{ref:m,onClick:Ae(t.onClick,S=>{b(A=>!A),v&&(g.current=S.isPropagationStopped(),g.current||S.stopPropagation())})})),v&&c.jsx(_L,{control:h,bubbles:!g.current,name:n,value:l,checked:y,required:o,disabled:s,form:d,style:{transform:"translateX(-100%)"}})]})});wL.displayName=_y;var AL="SwitchThumb",SL=x.forwardRef((t,e)=>{const a=t,{__scopeSwitch:r}=a,n=K(a,["__scopeSwitch"]),i=mce(AL,r);return c.jsx(Ge.span,M(C({"data-state":CL(i.checked),"data-disabled":i.disabled?"":void 0},n),{ref:e}))});SL.displayName=AL;var gce="SwitchBubbleInput",_L=x.forwardRef((o,a)=>{var s=o,{__scopeSwitch:t,control:e,checked:r,bubbles:n=!0}=s,i=K(s,["__scopeSwitch","control","checked","bubbles"]);const l=x.useRef(null),u=ft(l,a),d=DR(r),f=bM(e);return x.useEffect(()=>{const h=l.current;if(!h)return;const p=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==r&&g){const v=new Event("click",{bubbles:n});g.call(h,r),h.dispatchEvent(v)}},[d,r,n]),c.jsx("input",M(C({type:"checkbox","aria-hidden":!0,defaultChecked:r},i),{tabIndex:-1,ref:u,style:M(C(C({},i.style),f),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});_L.displayName=gce;function CL(t){return t?"checked":"unchecked"}var EL=wL,vce=SL;const Kr=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(EL,M(C({className:ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t)},e),{ref:r,children:c.jsx(vce,{className:ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))});Kr.displayName=EL.displayName;var NL="AlertDialog",[yce,qBe]=ai(NL,[H6]),Xo=H6(),jL=t=>{const i=t,{__scopeAlertDialog:e}=i,r=K(i,["__scopeAlertDialog"]),n=Xo(e);return c.jsx(dy,M(C(C({},n),r),{modal:!0}))};jL.displayName=NL;var xce="AlertDialogTrigger",TL=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:r}=a,n=K(a,["__scopeAlertDialog"]),i=Xo(r);return c.jsx(fy,M(C(C({},i),n),{ref:e}))});TL.displayName=xce;var bce="AlertDialogPortal",PL=t=>{const i=t,{__scopeAlertDialog:e}=i,r=K(i,["__scopeAlertDialog"]),n=Xo(e);return c.jsx(hy,C(C({},n),r))};PL.displayName=bce;var wce="AlertDialogOverlay",OL=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:r}=a,n=K(a,["__scopeAlertDialog"]),i=Xo(r);return c.jsx(Gd,M(C(C({},i),n),{ref:e}))});OL.displayName=wce;var Au="AlertDialogContent",[Ace,Sce]=yce(Au),_ce=yk("AlertDialogContent"),IL=x.forwardRef((t,e)=>{const u=t,{__scopeAlertDialog:r,children:n}=u,i=K(u,["__scopeAlertDialog","children"]),a=Xo(r),o=x.useRef(null),s=ft(e,o),l=x.useRef(null);return c.jsx(Mee,{contentName:Au,titleName:DL,docsSlug:"alert-dialog",children:c.jsx(Ace,{scope:r,cancelRef:l,children:c.jsxs(qd,M(C(C({role:"alertdialog"},a),i),{ref:s,onOpenAutoFocus:Ae(i.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=l.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[c.jsx(_ce,{children:n}),c.jsx(Ece,{contentRef:o})]}))})})});IL.displayName=Au;var DL="AlertDialogTitle",kL=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:r}=a,n=K(a,["__scopeAlertDialog"]),i=Xo(r);return c.jsx(Kd,M(C(C({},i),n),{ref:e}))});kL.displayName=DL;var ML="AlertDialogDescription",RL=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:r}=a,n=K(a,["__scopeAlertDialog"]),i=Xo(r);return c.jsx(Xd,M(C(C({},i),n),{ref:e}))});RL.displayName=ML;var Cce="AlertDialogAction",$L=x.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:r}=a,n=K(a,["__scopeAlertDialog"]),i=Xo(r);return c.jsx(Qp,M(C(C({},i),n),{ref:e}))});$L.displayName=Cce;var LL="AlertDialogCancel",FL=x.forwardRef((t,e)=>{const s=t,{__scopeAlertDialog:r}=s,n=K(s,["__scopeAlertDialog"]),{cancelRef:i}=Sce(LL,r),a=Xo(r),o=ft(e,i);return c.jsx(Qp,M(C(C({},a),n),{ref:o}))});FL.displayName=LL;var Ece=({contentRef:t})=>{const e="`".concat(Au,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(Au,"` by passing a `").concat(ML,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(Au,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return x.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Nce=jL,jce=TL,Tce=PL,BL=OL,zL=IL,VL=$L,UL=FL,WL=kL,HL=RL;const fl=Nce,im=jce,Pce=Tce,GL=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(BL,M(C({className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},e),{ref:r}))});GL.displayName=BL.displayName;const Bs=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsxs(Pce,{children:[c.jsx(GL,{}),c.jsx(zL,C({ref:r,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},e))]})});Bs.displayName=zL.displayName;const zs=r=>{var n=r,{className:t}=n,e=K(n,["className"]);return c.jsx("div",C({className:ie("flex flex-col space-y-2 text-center sm:text-left",t)},e))};zs.displayName="AlertDialogHeader";const Vs=r=>{var n=r,{className:t}=n,e=K(n,["className"]);return c.jsx("div",C({className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},e))};Vs.displayName="AlertDialogFooter";const Us=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(WL,C({ref:r,className:ie("text-lg font-semibold",t)},e))});Us.displayName=WL.displayName;const Ws=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(HL,C({ref:r,className:ie("text-sm text-muted-foreground",t)},e))});Ws.displayName=HL.displayName;const Hs=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(VL,C({ref:r,className:ie(Lh(),t)},e))});Hs.displayName=VL.displayName;const Gs=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(UL,C({ref:r,className:ie(Lh({variant:"outline"}),"mt-2 sm:mt-0",t)},e))});Gs.displayName=UL.displayName;var Oce=Array.isArray,vi=Oce,Ice=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,qL=Ice,Dce=qL,kce=typeof self=="object"&&self&&self.Object===Object&&self,Mce=Dce||kce||Function("return this")(),go=Mce,Rce=go,$ce=Rce.Symbol,am=$ce,tP=am,KL=Object.prototype,Lce=KL.hasOwnProperty,Fce=KL.toString,Tf=tP?tP.toStringTag:void 0;function Bce(t){var e=Lce.call(t,Tf),r=t[Tf];try{t[Tf]=void 0;var n=!0}catch(a){}var i=Fce.call(t);return n&&(e?t[Tf]=r:delete t[Tf]),i}var zce=Bce,Vce=Object.prototype,Uce=Vce.toString;function Wce(t){return Uce.call(t)}var Hce=Wce,rP=am,Gce=zce,qce=Hce,Kce="[object Null]",Xce="[object Undefined]",nP=rP?rP.toStringTag:void 0;function Yce(t){return t==null?t===void 0?Xce:Kce:nP&&nP in Object(t)?Gce(t):qce(t)}var Yo=Yce;function Zce(t){return t!=null&&typeof t=="object"}var Zo=Zce,Qce=Yo,Jce=Zo,ele="[object Symbol]";function tle(t){return typeof t=="symbol"||Jce(t)&&Qce(t)==ele}var Jd=tle,rle=vi,nle=Jd,ile=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ale=/^\w*$/;function ole(t,e){if(rle(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||nle(t)?!0:ale.test(t)||!ile.test(t)||e!=null&&t in Object(e)}var w_=ole;function sle(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Js=sle;const ef=er(Js);var cle=Yo,lle=Js,ule="[object AsyncFunction]",dle="[object Function]",fle="[object GeneratorFunction]",hle="[object Proxy]";function ple(t){if(!lle(t))return!1;var e=cle(t);return e==dle||e==fle||e==ule||e==hle}var A_=ple;const Ze=er(A_);var mle=go,gle=mle["__core-js_shared__"],vle=gle,N1=vle,iP=function(){var t=/[^.]+$/.exec(N1&&N1.keys&&N1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yle(t){return!!iP&&iP in t}var xle=yle,ble=Function.prototype,wle=ble.toString;function Ale(t){if(t!=null){try{return wle.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var XL=Ale,Sle=A_,_le=xle,Cle=Js,Ele=XL,Nle=/[\\^$.*+?()[\]{}|]/g,jle=/^\[object .+?Constructor\]$/,Tle=Function.prototype,Ple=Object.prototype,Ole=Tle.toString,Ile=Ple.hasOwnProperty,Dle=RegExp("^"+Ole.call(Ile).replace(Nle,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kle(t){if(!Cle(t)||_le(t))return!1;var e=Sle(t)?Dle:jle;return e.test(Ele(t))}var Mle=kle;function Rle(t,e){return t==null?void 0:t[e]}var $le=Rle,Lle=Mle,Fle=$le;function Ble(t,e){var r=Fle(t,e);return Lle(r)?r:void 0}var Nl=Ble,zle=Nl,Vle=zle(Object,"create"),Cy=Vle,aP=Cy;function Ule(){this.__data__=aP?aP(null):{},this.size=0}var Wle=Ule;function Hle(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Gle=Hle,qle=Cy,Kle="__lodash_hash_undefined__",Xle=Object.prototype,Yle=Xle.hasOwnProperty;function Zle(t){var e=this.__data__;if(qle){var r=e[t];return r===Kle?void 0:r}return Yle.call(e,t)?e[t]:void 0}var Qle=Zle,Jle=Cy,eue=Object.prototype,tue=eue.hasOwnProperty;function rue(t){var e=this.__data__;return Jle?e[t]!==void 0:tue.call(e,t)}var nue=rue,iue=Cy,aue="__lodash_hash_undefined__";function oue(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=iue&&e===void 0?aue:e,this}var sue=oue,cue=Wle,lue=Gle,uue=Qle,due=nue,fue=sue;function tf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tf.prototype.clear=cue;tf.prototype.delete=lue;tf.prototype.get=uue;tf.prototype.has=due;tf.prototype.set=fue;var hue=tf;function pue(){this.__data__=[],this.size=0}var mue=pue;function gue(t,e){return t===e||t!==t&&e!==e}var S_=gue,vue=S_;function yue(t,e){for(var r=t.length;r--;)if(vue(t[r][0],e))return r;return-1}var Ey=yue,xue=Ey,bue=Array.prototype,wue=bue.splice;function Aue(t){var e=this.__data__,r=xue(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():wue.call(e,r,1),--this.size,!0}var Sue=Aue,_ue=Ey;function Cue(t){var e=this.__data__,r=_ue(e,t);return r<0?void 0:e[r][1]}var Eue=Cue,Nue=Ey;function jue(t){return Nue(this.__data__,t)>-1}var Tue=jue,Pue=Ey;function Oue(t,e){var r=this.__data__,n=Pue(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Iue=Oue,Due=mue,kue=Sue,Mue=Eue,Rue=Tue,$ue=Iue;function rf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rf.prototype.clear=Due;rf.prototype.delete=kue;rf.prototype.get=Mue;rf.prototype.has=Rue;rf.prototype.set=$ue;var Ny=rf,Lue=Nl,Fue=go,Bue=Lue(Fue,"Map"),__=Bue,oP=hue,zue=Ny,Vue=__;function Uue(){this.size=0,this.__data__={hash:new oP,map:new(Vue||zue),string:new oP}}var Wue=Uue;function Hue(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Gue=Hue,que=Gue;function Kue(t,e){var r=t.__data__;return que(e)?r[typeof e=="string"?"string":"hash"]:r.map}var jy=Kue,Xue=jy;function Yue(t){var e=Xue(this,t).delete(t);return this.size-=e?1:0,e}var Zue=Yue,Que=jy;function Jue(t){return Que(this,t).get(t)}var ede=Jue,tde=jy;function rde(t){return tde(this,t).has(t)}var nde=rde,ide=jy;function ade(t,e){var r=ide(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var ode=ade,sde=Wue,cde=Zue,lde=ede,ude=nde,dde=ode;function nf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nf.prototype.clear=sde;nf.prototype.delete=cde;nf.prototype.get=lde;nf.prototype.has=ude;nf.prototype.set=dde;var C_=nf,YL=C_,fde="Expected a function";function E_(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(fde);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(E_.Cache||YL),r}E_.Cache=YL;var ZL=E_;const hde=er(ZL);var pde=ZL,mde=500;function gde(t){var e=pde(t,function(n){return r.size===mde&&r.clear(),n}),r=e.cache;return e}var vde=gde,yde=vde,xde=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bde=/\\(\\)?/g,wde=yde(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(xde,function(r,n,i,a){e.push(i?a.replace(bde,"$1"):n||r)}),e}),Ade=wde;function Sde(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var N_=Sde,sP=am,_de=N_,Cde=vi,Ede=Jd,cP=sP?sP.prototype:void 0,lP=cP?cP.toString:void 0;function QL(t){if(typeof t=="string")return t;if(Cde(t))return _de(t,QL)+"";if(Ede(t))return lP?lP.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Nde=QL,jde=Nde;function Tde(t){return t==null?"":jde(t)}var JL=Tde,Pde=vi,Ode=w_,Ide=Ade,Dde=JL;function kde(t,e){return Pde(t)?t:Ode(t,e)?[t]:Ide(Dde(t))}var e7=kde,Mde=Jd;function Rde(t){if(typeof t=="string"||Mde(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Ty=Rde,$de=e7,Lde=Ty;function Fde(t,e){e=$de(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Lde(e[r++])];return r&&r==n?t:void 0}var j_=Fde,Bde=j_;function zde(t,e,r){var n=t==null?void 0:Bde(t,e);return n===void 0?r:n}var t7=zde;const Di=er(t7);function Vde(t){return t==null}var Ude=Vde;const dt=er(Ude);var Wde=Yo,Hde=vi,Gde=Zo,qde="[object String]";function Kde(t){return typeof t=="string"||!Hde(t)&&Gde(t)&&Wde(t)==qde}var Xde=Kde;const hl=er(Xde);var r7={exports:{}},tr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_=Symbol.for("react.element"),P_=Symbol.for("react.portal"),Py=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Iy=Symbol.for("react.profiler"),Dy=Symbol.for("react.provider"),ky=Symbol.for("react.context"),Yde=Symbol.for("react.server_context"),My=Symbol.for("react.forward_ref"),Ry=Symbol.for("react.suspense"),$y=Symbol.for("react.suspense_list"),Ly=Symbol.for("react.memo"),Fy=Symbol.for("react.lazy"),Zde=Symbol.for("react.offscreen"),n7;n7=Symbol.for("react.module.reference");function aa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case T_:switch(t=t.type,t){case Py:case Iy:case Oy:case Ry:case $y:return t;default:switch(t=t&&t.$$typeof,t){case Yde:case ky:case My:case Fy:case Ly:case Dy:return t;default:return e}}case P_:return e}}}tr.ContextConsumer=ky;tr.ContextProvider=Dy;tr.Element=T_;tr.ForwardRef=My;tr.Fragment=Py;tr.Lazy=Fy;tr.Memo=Ly;tr.Portal=P_;tr.Profiler=Iy;tr.StrictMode=Oy;tr.Suspense=Ry;tr.SuspenseList=$y;tr.isAsyncMode=function(){return!1};tr.isConcurrentMode=function(){return!1};tr.isContextConsumer=function(t){return aa(t)===ky};tr.isContextProvider=function(t){return aa(t)===Dy};tr.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===T_};tr.isForwardRef=function(t){return aa(t)===My};tr.isFragment=function(t){return aa(t)===Py};tr.isLazy=function(t){return aa(t)===Fy};tr.isMemo=function(t){return aa(t)===Ly};tr.isPortal=function(t){return aa(t)===P_};tr.isProfiler=function(t){return aa(t)===Iy};tr.isStrictMode=function(t){return aa(t)===Oy};tr.isSuspense=function(t){return aa(t)===Ry};tr.isSuspenseList=function(t){return aa(t)===$y};tr.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Py||t===Iy||t===Oy||t===Ry||t===$y||t===Zde||typeof t=="object"&&t!==null&&(t.$$typeof===Fy||t.$$typeof===Ly||t.$$typeof===Dy||t.$$typeof===ky||t.$$typeof===My||t.$$typeof===n7||t.getModuleId!==void 0)};tr.typeOf=aa;r7.exports=tr;var Qde=r7.exports,Jde=Yo,efe=Zo,tfe="[object Number]";function rfe(t){return typeof t=="number"||efe(t)&&Jde(t)==tfe}var i7=rfe;const nfe=er(i7);var ife=i7;function afe(t){return ife(t)&&t!=+t}var ofe=afe;const af=er(ofe);var ei=function(e){return e===0?0:e>0?1:-1},Pc=function(e){return hl(e)&&e.indexOf("%")===e.length-1},we=function(e){return nfe(e)&&!af(e)},sfe=function(e){return dt(e)},ln=function(e){return we(e)||hl(e)},cfe=0,of=function(e){var r=++cfe;return"".concat(e||"").concat(r)},ti=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(e)&&!hl(e))return n;var a;if(Pc(e)){var o=e.indexOf("%");a=r*parseFloat(e.slice(0,o))/100}else a=+e;return af(a)&&(a=n),i&&a>r&&(a=r),a},ms=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},lfe=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},di=function(e,r){return we(e)&&we(r)?function(n){return e+n*(r-e)}:function(){return r}};function Ag(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Di(n,e))===r})}var ufe=function(e,r){return we(e)&&we(r)?e-r:hl(e)&&hl(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Su(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function Sw(t){"@babel/helpers - typeof";return Sw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sw(t)}var dfe=["viewBox","children"],ffe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],uP=["points","pathLength"],j1={svg:dfe,polygon:uP,polyline:uP},O_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Sg=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(x.isValidElement(e)&&(n=e.props),!ef(n))return null;var i={};return Object.keys(n).forEach(function(a){O_.includes(a)&&(i[a]=r||function(o){return n[a](n,o)})}),i},hfe=function(e,r,n){return function(i){return e(r,n,i),null}},pl=function(e,r,n){if(!ef(e)||Sw(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];O_.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=hfe(o,r,n))}),i},pfe=["children"],mfe=["children"];function dP(t,e){if(t==null)return{};var r=gfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _w(t){"@babel/helpers - typeof";return _w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_w(t)}var fP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Mo=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},hP=null,T1=null,I_=function t(e){if(e===hP&&Array.isArray(T1))return T1;var r=[];return x.Children.forEach(e,function(n){dt(n)||(Qde.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),T1=r,hP=e,r};function ea(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return Mo(i)}):n=[Mo(e)],I_(t).forEach(function(i){var a=Di(i,"type.displayName")||Di(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function Ai(t,e){var r=ea(t,e);return r&&r[0]}var pP=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!we(n)||n<=0||!we(i)||i<=0)},vfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],yfe=function(e){return e&&e.type&&hl(e.type)&&vfe.indexOf(e.type)>=0},xfe=function(e){return e&&_w(e)==="object"&&"clipDot"in e},bfe=function(e,r,n,i){var a,o=(a=j1==null?void 0:j1[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Ze(e)&&(i&&o.includes(r)||ffe.includes(r))||n&&O_.includes(r)},qe=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(x.isValidElement(e)&&(i=e.props),!ef(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;bfe((s=i)===null||s===void 0?void 0:s[o],o,r,n)&&(a[o]=i[o])}),a},Cw=function t(e,r){if(e===r)return!0;var n=x.Children.count(e);if(n!==x.Children.count(r))return!1;if(n===0)return!0;if(n===1)return mP(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=e[i],o=r[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!mP(a,o))return!1}return!0},mP=function(e,r){if(dt(e)&&dt(r))return!0;if(!dt(e)&&!dt(r)){var n=e.props||{},i=n.children,a=dP(n,pfe),o=r.props||{},s=o.children,l=dP(o,mfe);return i&&s?Su(a,l)&&Cw(i,s):!i&&!s?Su(a,l):!1}return!1},gP=function(e,r){var n=[],i={};return I_(e).forEach(function(a,o){if(yfe(a))n.push(a);else if(a){var s=Mo(a.type),l=r[s]||{},u=l.handler,d=l.once;if(u&&(!d||!i[s])){var f=u(a,s,o);n.push(f),i[s]=!0}}}),n},wfe=function(e){var r=e&&e.type;return r&&fP[r]?fP[r]:null},Afe=function(e,r){return I_(r).indexOf(e)},Sfe=["children","width","height","viewBox","className","style","title","desc"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ew.apply(this,arguments)}function _fe(t,e){if(t==null)return{};var r=Cfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Cfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Nw(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,a=t.className,o=t.style,s=t.title,l=t.desc,u=_fe(t,Sfe),d=i||{width:r,height:n,x:0,y:0},f=ut("recharts-surface",a);return $.createElement("svg",Ew({},qe(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),$.createElement("title",null,s),$.createElement("desc",null,l),e)}var Efe=["children","className"];function jw(){return jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jw.apply(this,arguments)}function Nfe(t,e){if(t==null)return{};var r=jfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Ct=$.forwardRef(function(t,e){var r=t.children,n=t.className,i=Nfe(t,Efe),a=ut("recharts-layer",n);return $.createElement("g",jw({className:a},qe(i,!0),{ref:e}),r)}),Ea=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function Tfe(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(i);++n<i;)a[n]=t[n+e];return a}var Pfe=Tfe,Ofe=Pfe;function Ife(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:Ofe(t,e,r)}var Dfe=Ife,kfe="\\ud800-\\udfff",Mfe="\\u0300-\\u036f",Rfe="\\ufe20-\\ufe2f",$fe="\\u20d0-\\u20ff",Lfe=Mfe+Rfe+$fe,Ffe="\\ufe0e\\ufe0f",Bfe="\\u200d",zfe=RegExp("["+Bfe+kfe+Lfe+Ffe+"]");function Vfe(t){return zfe.test(t)}var a7=Vfe;function Ufe(t){return t.split("")}var Wfe=Ufe,o7="\\ud800-\\udfff",Hfe="\\u0300-\\u036f",Gfe="\\ufe20-\\ufe2f",qfe="\\u20d0-\\u20ff",Kfe=Hfe+Gfe+qfe,Xfe="\\ufe0e\\ufe0f",Yfe="["+o7+"]",Tw="["+Kfe+"]",Pw="\\ud83c[\\udffb-\\udfff]",Zfe="(?:"+Tw+"|"+Pw+")",s7="[^"+o7+"]",c7="(?:\\ud83c[\\udde6-\\uddff]){2}",l7="[\\ud800-\\udbff][\\udc00-\\udfff]",Qfe="\\u200d",u7=Zfe+"?",d7="["+Xfe+"]?",Jfe="(?:"+Qfe+"(?:"+[s7,c7,l7].join("|")+")"+d7+u7+")*",ehe=d7+u7+Jfe,the="(?:"+[s7+Tw+"?",Tw,c7,l7,Yfe].join("|")+")",rhe=RegExp(Pw+"(?="+Pw+")|"+the+ehe,"g");function nhe(t){return t.match(rhe)||[]}var ihe=nhe,ahe=Wfe,ohe=a7,she=ihe;function che(t){return ohe(t)?she(t):ahe(t)}var lhe=che,uhe=Dfe,dhe=a7,fhe=lhe,hhe=JL;function phe(t){return function(e){e=hhe(e);var r=dhe(e)?fhe(e):void 0,n=r?r[0]:e.charAt(0),i=r?uhe(r,1).join(""):e.slice(1);return n[t]()+i}}var mhe=phe,ghe=mhe,vhe=ghe("toUpperCase"),yhe=vhe;const By=er(yhe);function lr(t){return function(){return t}}const f7=Math.cos,_g=Math.sin,Ia=Math.sqrt,Cg=Math.PI,zy=2*Cg,Ow=Math.PI,Iw=2*Ow,xc=1e-6,xhe=Iw-xc;function h7(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function bhe(t){let e=Math.floor(t);if(!(e>=0))throw new Error("invalid digits: ".concat(t));if(e>15)return h7;const r=Ml(10,e);return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}var E4,N4,j4,T4,P4,O4,I4,D4,k4,M4,R4,$4,L4,F4;class whe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?h7:bhe(e)}moveTo(e,r){this._append(E4||(E4=Gn(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+r)}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append(N4||(N4=Gn(["Z"]))))}lineTo(e,r){this._append(j4||(j4=Gn(["L",",",""])),this._x1=+e,this._y1=+r)}quadraticCurveTo(e,r,n,i){this._append(T4||(T4=Gn(["Q",",",",",",",""])),+e,+r,this._x1=+n,this._y1=+i)}bezierCurveTo(e,r,n,i,a,o){this._append(P4||(P4=Gn(["C",",",",",",",",",",",""])),+e,+r,+n,+i,this._x1=+a,this._y1=+o)}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error("negative radius: ".concat(a));let o=this._x1,s=this._y1,l=n-e,u=i-r,d=o-e,f=s-r,h=d*d+f*f;if(this._x1===null)this._append(O4||(O4=Gn(["M",",",""])),this._x1=e,this._y1=r);else if(h>xc)if(!(Math.abs(f*l-u*d)>xc)||!a)this._append(I4||(I4=Gn(["L",",",""])),this._x1=e,this._y1=r);else{let p=n-o,m=i-s,g=l*l+u*u,v=p*p+m*m,y=Math.sqrt(g),b=Math.sqrt(h),w=a*Math.tan((Ow-Math.acos((g+h-v)/(2*y*b)))/2),S=w/b,A=w/y;Math.abs(S-1)>xc&&this._append(D4||(D4=Gn(["L",",",""])),e+S*d,r+S*f),this._append(k4||(k4=Gn(["A",",",",0,0,",",",",",""])),a,a,+(f*p>d*m),this._x1=e+A*l,this._y1=r+A*u)}}arc(e,r,n,i,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error("negative radius: ".concat(n));let s=n*Math.cos(i),l=n*Math.sin(i),u=e+s,d=r+l,f=1^o,h=o?i-a:a-i;this._x1===null?this._append(M4||(M4=Gn(["M",",",""])),u,d):(Math.abs(this._x1-u)>xc||Math.abs(this._y1-d)>xc)&&this._append(R4||(R4=Gn(["L",",",""])),u,d),n&&(h<0&&(h=h%Iw+Iw),h>xhe?this._append($4||($4=Gn(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,f,e-s,r-l,n,n,f,this._x1=u,this._y1=d):h>xc&&this._append(L4||(L4=Gn(["A",",",",0,",",",",",",",""])),n,n,+(h>=Ow),f,this._x1=e+n*Math.cos(a),this._y1=r+n*Math.sin(a)))}rect(e,r,n,i){this._append(F4||(F4=Gn(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+r,n=+n,+i,-n)}toString(){return this._}}function D_(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError("invalid digits: ".concat(r));e=n}return t},()=>new whe(e)}function k_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function p7(t){this._context=t}p7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Vy(t){return new p7(t)}function m7(t){return t[0]}function g7(t){return t[1]}function v7(t,e){var r=lr(!0),n=null,i=Vy,a=null,o=D_(s);t=typeof t=="function"?t:t===void 0?m7:lr(t),e=typeof e=="function"?e:e===void 0?g7:lr(e);function s(l){var u,d=(l=k_(l)).length,f,h=!1,p;for(n==null&&(a=i(p=o())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,l),+e(f,u,l));if(p)return a=null,p+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:lr(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:lr(+l),s):e},s.defined=function(l){return arguments.length?(r=typeof l=="function"?l:lr(!!l),s):r},s.curve=function(l){return arguments.length?(i=l,n!=null&&(a=i(n)),s):i},s.context=function(l){return arguments.length?(l==null?n=a=null:a=i(n=l),s):n},s}function Fm(t,e,r){var n=null,i=lr(!0),a=null,o=Vy,s=null,l=D_(u);t=typeof t=="function"?t:t===void 0?m7:lr(+t),e=typeof e=="function"?e:lr(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?g7:lr(+r);function u(f){var h,p,m,g=(f=k_(f)).length,v,y=!1,b,w=new Array(g),S=new Array(g);for(a==null&&(s=o(b=l())),h=0;h<=g;++h){if(!(h<g&&i(v=f[h],h,f))===y)if(y=!y)p=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),m=h-1;m>=p;--m)s.point(w[m],S[m]);s.lineEnd(),s.areaEnd()}y&&(w[h]=+t(v,h,f),S[h]=+e(v,h,f),s.point(n?+n(v,h,f):w[h],r?+r(v,h,f):S[h]))}if(b)return s=null,b+""||null}function d(){return v7().defined(i).curve(o).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:lr(+f),n=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:lr(+f),u):t},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:lr(+f),u):n},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:lr(+f),r=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:lr(+f),u):e},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:lr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(r)},u.lineX1=function(){return d().x(n).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:lr(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),u):a},u}class y7{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Ahe(t){return new y7(t,!0)}function She(t){return new y7(t,!1)}const M_={draw(t,e){const r=Ia(e/Cg);t.moveTo(r,0),t.arc(0,0,r,0,zy)}},_he={draw(t,e){const r=Ia(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},x7=Ia(1/3),Che=x7*2,Ehe={draw(t,e){const r=Ia(e/Che),n=r*x7;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Nhe={draw(t,e){const r=Ia(e),n=-r/2;t.rect(n,n,r,r)}},jhe=.8908130915292852,b7=_g(Cg/10)/_g(7*Cg/10),The=_g(zy/10)*b7,Phe=-f7(zy/10)*b7,Ohe={draw(t,e){const r=Ia(e*jhe),n=The*r,i=Phe*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const o=zy*a/5,s=f7(o),l=_g(o);t.lineTo(l*r,-s*r),t.lineTo(s*n-l*i,l*n+s*i)}t.closePath()}},P1=Ia(3),Ihe={draw(t,e){const r=-Ia(e/(P1*3));t.moveTo(0,r*2),t.lineTo(-P1*r,-r),t.lineTo(P1*r,-r),t.closePath()}},Bi=-.5,zi=Ia(3)/2,Dw=1/Ia(12),Dhe=(Dw/2+1)*3,khe={draw(t,e){const r=Ia(e/Dhe),n=r/2,i=r*Dw,a=n,o=r*Dw+r,s=-a,l=o;t.moveTo(n,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Bi*n-zi*i,zi*n+Bi*i),t.lineTo(Bi*a-zi*o,zi*a+Bi*o),t.lineTo(Bi*s-zi*l,zi*s+Bi*l),t.lineTo(Bi*n+zi*i,Bi*i-zi*n),t.lineTo(Bi*a+zi*o,Bi*o-zi*a),t.lineTo(Bi*s+zi*l,Bi*l-zi*s),t.closePath()}};function Mhe(t,e){let r=null,n=D_(i);t=typeof t=="function"?t:lr(t||M_),e=typeof e=="function"?e:lr(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:lr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:lr(+a),i):e},i.context=function(a){return arguments.length?(r=a==null?null:a,i):r},i}function Eg(){}function Ng(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function w7(t){this._context=t}w7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ng(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ng(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rhe(t){return new w7(t)}function A7(t){this._context=t}A7.prototype={areaStart:Eg,areaEnd:Eg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ng(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $he(t){return new A7(t)}function S7(t){this._context=t}S7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ng(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Lhe(t){return new S7(t)}function _7(t){this._context=t}_7.prototype={areaStart:Eg,areaEnd:Eg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Fhe(t){return new _7(t)}function vP(t){return t<0?-1:1}function yP(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),o=(r-t._y1)/(i||n<0&&-0),s=(a*i+o*n)/(n+i);return(vP(a)+vP(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function xP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function O1(t,e,r){var n=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-n)/3;t._context.bezierCurveTo(n+s,i+s*e,a-s,o-s*r,a,o)}function jg(t){this._context=t}jg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:O1(this,this._t0,xP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,O1(this,xP(this,r=yP(this,t,e)),r);break;default:O1(this,this._t0,r=yP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function C7(t){this._context=new E7(t)}(C7.prototype=Object.create(jg.prototype)).point=function(t,e){jg.prototype.point.call(this,e,t)};function E7(t){this._context=t}E7.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function Bhe(t){return new jg(t)}function zhe(t){return new C7(t)}function N7(t){this._context=t}N7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=bP(t),i=bP(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function bP(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Vhe(t){return new N7(t)}function Uy(t,e){this._context=t,this._t=e}Uy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Uhe(t){return new Uy(t,.5)}function Whe(t){return new Uy(t,0)}function Hhe(t){return new Uy(t,1)}function nd(t,e){if((o=t.length)>1)for(var r=1,n,i,a=t[e[0]],o,s=a.length;r<o;++r)for(i=a,a=t[e[r]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function kw(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function Ghe(t,e){return t[e]}function qhe(t){const e=[];return e.key=t,e}function Khe(){var t=lr([]),e=kw,r=nd,n=Ghe;function i(a){var o=Array.from(t.apply(this,arguments),qhe),s,l=o.length,u=-1,d;for(const f of a)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(f,o[s].key,u,a)]).data=f;for(s=0,d=k_(e(o));s<l;++s)o[d[s]].index=s;return r(o,d),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:lr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:lr(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?kw:typeof a=="function"?a:lr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a==null?nd:a,i):r},i}function Xhe(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,o;i<a;++i){for(o=r=0;r<n;++r)o+=t[r][i][1]||0;if(o)for(r=0;r<n;++r)t[r][i][1]/=o}nd(t,e)}}function Yhe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var o=0,s=0;o<i;++o)s+=t[o][r][1]||0;n[r][1]+=n[r][0]=-s/2}nd(t,e)}}function Zhe(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,o;n<a;++n){for(var s=0,l=0,u=0;s<o;++s){for(var d=t[e[s]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,m=0;m<s;++m){var g=t[e[m]],v=g[n][1]||0,y=g[n-1][1]||0;p+=v-y}l+=f,u+=p*f}i[n-1][1]+=i[n-1][0]=r,l&&(r-=u/l)}i[n-1][1]+=i[n-1][0]=r,nd(t,e)}}function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}var Qhe=["type","size","sizeType"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mw.apply(this,arguments)}function wP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wP(Object(r),!0).forEach(function(n){Jhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jhe(t,e,r){return e=epe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function epe(t){var e=tpe(t,"string");return Zh(e)=="symbol"?e:e+""}function tpe(t,e){if(Zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rpe(t,e){if(t==null)return{};var r=npe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function npe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var j7={symbolCircle:M_,symbolCross:_he,symbolDiamond:Ehe,symbolSquare:Nhe,symbolStar:Ohe,symbolTriangle:Ihe,symbolWye:khe},ipe=Math.PI/180,ape=function(e){var r="symbol".concat(By(e));return j7[r]||M_},ope=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*ipe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},spe=function(e,r){j7["symbol".concat(By(e))]=r},R_=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=rpe(e,Qhe),u=AP(AP({},l),{},{type:n,size:a,sizeType:s}),d=function(){var v=ape(n),y=Mhe().type(v).size(ope(a,s,n));return y()},f=u.className,h=u.cx,p=u.cy,m=qe(u,!0);return h===+h&&p===+p&&a===+a?$.createElement("path",Mw({},m,{className:ut("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};R_.registerSymbol=spe;function id(t){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},id(t)}function Rw(){return Rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rw.apply(this,arguments)}function SP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cpe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(r),!0).forEach(function(n){Qh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function upe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P7(n.key),n)}}function dpe(t,e,r){return e&&upe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fpe(t,e,r){return e=Tg(e),hpe(t,T7()?Reflect.construct(e,r||[],Tg(t).constructor):e.apply(t,r))}function hpe(t,e){if(e&&(id(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ppe(t)}function ppe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(T7=function(){return!!t})()}function Tg(t){return Tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tg(t)}function mpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$w(t,e)}function $w(t,e){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$w(t,e)}function Qh(t,e,r){return e=P7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P7(t){var e=gpe(t,"string");return id(e)=="symbol"?e:e+""}function gpe(t,e){if(id(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(id(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vi=32,$_=function(t){function e(){return lpe(this,e),fpe(this,e,arguments)}return mpe(e,t),dpe(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=Vi/2,o=Vi/6,s=Vi/3,l=n.inactive?i:n.color;if(n.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:Vi,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,"\n            A").concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,"\n            H").concat(Vi,"M").concat(2*s,",").concat(a,"\n            A").concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return $.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Vi/8,"h").concat(Vi,"v").concat(Vi*3/4,"h").concat(-Vi,"z"),className:"recharts-legend-icon"});if($.isValidElement(n.legendIcon)){var u=cpe({},n);return delete u.legendIcon,$.cloneElement(n.legendIcon,u)}return $.createElement(R_,{fill:l,cx:a,cy:a,size:Vi,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Vi,height:Vi},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,m){var g=p.formatter||l,v=ut(Qh(Qh({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=Ze(p.value)?null:p.value;Ea(!Ze(p.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var b=p.inactive?u:p.color;return $.createElement("li",Rw({className:v,style:f,key:"legend-item-".concat(m)},pl(n.props,p,m)),$.createElement(Nw,{width:o,height:o,viewBox:d,style:h},n.renderIcon(p)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(y,p,m):y))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,o=n.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(x.PureComponent);Qh($_,"displayName","Legend");Qh($_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var vpe=Ny;function ype(){this.__data__=new vpe,this.size=0}var xpe=ype;function bpe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var wpe=bpe;function Ape(t){return this.__data__.get(t)}var Spe=Ape;function _pe(t){return this.__data__.has(t)}var Cpe=_pe,Epe=Ny,Npe=__,jpe=C_,Tpe=200;function Ppe(t,e){var r=this.__data__;if(r instanceof Epe){var n=r.__data__;if(!Npe||n.length<Tpe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new jpe(n)}return r.set(t,e),this.size=r.size,this}var Ope=Ppe,Ipe=Ny,Dpe=xpe,kpe=wpe,Mpe=Spe,Rpe=Cpe,$pe=Ope;function sf(t){var e=this.__data__=new Ipe(t);this.size=e.size}sf.prototype.clear=Dpe;sf.prototype.delete=kpe;sf.prototype.get=Mpe;sf.prototype.has=Rpe;sf.prototype.set=$pe;var O7=sf,Lpe="__lodash_hash_undefined__";function Fpe(t){return this.__data__.set(t,Lpe),this}var Bpe=Fpe;function zpe(t){return this.__data__.has(t)}var Vpe=zpe,Upe=C_,Wpe=Bpe,Hpe=Vpe;function Pg(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Upe;++e<r;)this.add(t[e])}Pg.prototype.add=Pg.prototype.push=Wpe;Pg.prototype.has=Hpe;var I7=Pg;function Gpe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var D7=Gpe;function qpe(t,e){return t.has(e)}var k7=qpe,Kpe=I7,Xpe=D7,Ype=k7,Zpe=1,Qpe=2;function Jpe(t,e,r,n,i,a){var o=r&Zpe,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,p=r&Qpe?new Kpe:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var m=t[f],g=e[f];if(n)var v=o?n(g,m,f,e,t,a):n(m,g,f,t,e,a);if(v!==void 0){if(v)continue;h=!1;break}if(p){if(!Xpe(e,function(y,b){if(!Ype(p,b)&&(m===y||i(m,y,r,n,a)))return p.push(b)})){h=!1;break}}else if(!(m===g||i(m,g,r,n,a))){h=!1;break}}return a.delete(t),a.delete(e),h}var M7=Jpe,eme=go,tme=eme.Uint8Array,rme=tme;function nme(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var ime=nme;function ame(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var L_=ame,_P=am,CP=rme,ome=S_,sme=M7,cme=ime,lme=L_,ume=1,dme=2,fme="[object Boolean]",hme="[object Date]",pme="[object Error]",mme="[object Map]",gme="[object Number]",vme="[object RegExp]",yme="[object Set]",xme="[object String]",bme="[object Symbol]",wme="[object ArrayBuffer]",Ame="[object DataView]",EP=_P?_P.prototype:void 0,I1=EP?EP.valueOf:void 0;function Sme(t,e,r,n,i,a,o){switch(r){case Ame:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case wme:return!(t.byteLength!=e.byteLength||!a(new CP(t),new CP(e)));case fme:case hme:case gme:return ome(+t,+e);case pme:return t.name==e.name&&t.message==e.message;case vme:case xme:return t==e+"";case mme:var s=cme;case yme:var l=n&ume;if(s||(s=lme),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;n|=dme,o.set(t,e);var d=sme(s(t),s(e),n,i,a,o);return o.delete(t),d;case bme:if(I1)return I1.call(t)==I1.call(e)}return!1}var _me=Sme;function Cme(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var R7=Cme,Eme=R7,Nme=vi;function jme(t,e,r){var n=e(t);return Nme(t)?n:Eme(n,r(t))}var Tme=jme;function Pme(t,e){for(var r=-1,n=t==null?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}var Ome=Pme;function Ime(){return[]}var Dme=Ime,kme=Ome,Mme=Dme,Rme=Object.prototype,$me=Rme.propertyIsEnumerable,NP=Object.getOwnPropertySymbols,Lme=NP?function(t){return t==null?[]:(t=Object(t),kme(NP(t),function(e){return $me.call(t,e)}))}:Mme,Fme=Lme;function Bme(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var zme=Bme,Vme=Yo,Ume=Zo,Wme="[object Arguments]";function Hme(t){return Ume(t)&&Vme(t)==Wme}var Gme=Hme,jP=Gme,qme=Zo,$7=Object.prototype,Kme=$7.hasOwnProperty,Xme=$7.propertyIsEnumerable,Yme=jP(function(){return arguments}())?jP:function(t){return qme(t)&&Kme.call(t,"callee")&&!Xme.call(t,"callee")},F_=Yme,Og={exports:{}};function Zme(){return!1}var Qme=Zme;Og.exports;(function(t,e){var r=go,n=Qme,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?r.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||n;t.exports=u})(Og,Og.exports);var L7=Og.exports,Jme=9007199254740991,e0e=/^(?:0|[1-9]\d*)$/;function t0e(t,e){var r=typeof t;return e=e==null?Jme:e,!!e&&(r=="number"||r!="symbol"&&e0e.test(t))&&t>-1&&t%1==0&&t<e}var B_=t0e,r0e=9007199254740991;function n0e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r0e}var z_=n0e,i0e=Yo,a0e=z_,o0e=Zo,s0e="[object Arguments]",c0e="[object Array]",l0e="[object Boolean]",u0e="[object Date]",d0e="[object Error]",f0e="[object Function]",h0e="[object Map]",p0e="[object Number]",m0e="[object Object]",g0e="[object RegExp]",v0e="[object Set]",y0e="[object String]",x0e="[object WeakMap]",b0e="[object ArrayBuffer]",w0e="[object DataView]",A0e="[object Float32Array]",S0e="[object Float64Array]",_0e="[object Int8Array]",C0e="[object Int16Array]",E0e="[object Int32Array]",N0e="[object Uint8Array]",j0e="[object Uint8ClampedArray]",T0e="[object Uint16Array]",P0e="[object Uint32Array]",vr={};vr[A0e]=vr[S0e]=vr[_0e]=vr[C0e]=vr[E0e]=vr[N0e]=vr[j0e]=vr[T0e]=vr[P0e]=!0;vr[s0e]=vr[c0e]=vr[b0e]=vr[l0e]=vr[w0e]=vr[u0e]=vr[d0e]=vr[f0e]=vr[h0e]=vr[p0e]=vr[m0e]=vr[g0e]=vr[v0e]=vr[y0e]=vr[x0e]=!1;function O0e(t){return o0e(t)&&a0e(t.length)&&!!vr[i0e(t)]}var I0e=O0e;function D0e(t){return function(e){return t(e)}}var F7=D0e,Ig={exports:{}};Ig.exports;(function(t,e){var r=qL,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch(u){}}();t.exports=s})(Ig,Ig.exports);var k0e=Ig.exports,M0e=I0e,R0e=F7,TP=k0e,PP=TP&&TP.isTypedArray,$0e=PP?R0e(PP):M0e,B7=$0e,L0e=zme,F0e=F_,B0e=vi,z0e=L7,V0e=B_,U0e=B7,W0e=Object.prototype,H0e=W0e.hasOwnProperty;function G0e(t,e){var r=B0e(t),n=!r&&F0e(t),i=!r&&!n&&z0e(t),a=!r&&!n&&!i&&U0e(t),o=r||n||i||a,s=o?L0e(t.length,String):[],l=s.length;for(var u in t)(e||H0e.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||V0e(u,l)))&&s.push(u);return s}var q0e=G0e,K0e=Object.prototype;function X0e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||K0e;return t===r}var Y0e=X0e;function Z0e(t,e){return function(r){return t(e(r))}}var z7=Z0e,Q0e=z7,J0e=Q0e(Object.keys,Object),ege=J0e,tge=Y0e,rge=ege,nge=Object.prototype,ige=nge.hasOwnProperty;function age(t){if(!tge(t))return rge(t);var e=[];for(var r in Object(t))ige.call(t,r)&&r!="constructor"&&e.push(r);return e}var oge=age,sge=A_,cge=z_;function lge(t){return t!=null&&cge(t.length)&&!sge(t)}var om=lge,uge=q0e,dge=oge,fge=om;function hge(t){return fge(t)?uge(t):dge(t)}var Wy=hge,pge=Tme,mge=Fme,gge=Wy;function vge(t){return pge(t,gge,mge)}var yge=vge,OP=yge,xge=1,bge=Object.prototype,wge=bge.hasOwnProperty;function Age(t,e,r,n,i,a){var o=r&xge,s=OP(t),l=s.length,u=OP(e),d=u.length;if(l!=d&&!o)return!1;for(var f=l;f--;){var h=s[f];if(!(o?h in e:wge.call(e,h)))return!1}var p=a.get(t),m=a.get(e);if(p&&m)return p==e&&m==t;var g=!0;a.set(t,e),a.set(e,t);for(var v=o;++f<l;){h=s[f];var y=t[h],b=e[h];if(n)var w=o?n(b,y,h,e,t,a):n(y,b,h,t,e,a);if(!(w===void 0?y===b||i(y,b,r,n,a):w)){g=!1;break}v||(v=h=="constructor")}if(g&&!v){var S=t.constructor,A=e.constructor;S!=A&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof A=="function"&&A instanceof A)&&(g=!1)}return a.delete(t),a.delete(e),g}var Sge=Age,_ge=Nl,Cge=go,Ege=_ge(Cge,"DataView"),Nge=Ege,jge=Nl,Tge=go,Pge=jge(Tge,"Promise"),Oge=Pge,Ige=Nl,Dge=go,kge=Ige(Dge,"Set"),V7=kge,Mge=Nl,Rge=go,$ge=Mge(Rge,"WeakMap"),Lge=$ge,Lw=Nge,Fw=__,Bw=Oge,zw=V7,Vw=Lge,U7=Yo,cf=XL,IP="[object Map]",Fge="[object Object]",DP="[object Promise]",kP="[object Set]",MP="[object WeakMap]",RP="[object DataView]",Bge=cf(Lw),zge=cf(Fw),Vge=cf(Bw),Uge=cf(zw),Wge=cf(Vw),bc=U7;(Lw&&bc(new Lw(new ArrayBuffer(1)))!=RP||Fw&&bc(new Fw)!=IP||Bw&&bc(Bw.resolve())!=DP||zw&&bc(new zw)!=kP||Vw&&bc(new Vw)!=MP)&&(bc=function(t){var e=U7(t),r=e==Fge?t.constructor:void 0,n=r?cf(r):"";if(n)switch(n){case Bge:return RP;case zge:return IP;case Vge:return DP;case Uge:return kP;case Wge:return MP}return e});var Hge=bc,D1=O7,Gge=M7,qge=_me,Kge=Sge,$P=Hge,LP=vi,FP=L7,Xge=B7,Yge=1,BP="[object Arguments]",zP="[object Array]",Bm="[object Object]",Zge=Object.prototype,VP=Zge.hasOwnProperty;function Qge(t,e,r,n,i,a){var o=LP(t),s=LP(e),l=o?zP:$P(t),u=s?zP:$P(e);l=l==BP?Bm:l,u=u==BP?Bm:u;var d=l==Bm,f=u==Bm,h=l==u;if(h&&FP(t)){if(!FP(e))return!1;o=!0,d=!1}if(h&&!d)return a||(a=new D1),o||Xge(t)?Gge(t,e,r,n,i,a):qge(t,e,l,r,n,i,a);if(!(r&Yge)){var p=d&&VP.call(t,"__wrapped__"),m=f&&VP.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,v=m?e.value():e;return a||(a=new D1),i(g,v,r,n,a)}}return h?(a||(a=new D1),Kge(t,e,r,n,i,a)):!1}var Jge=Qge,eve=Jge,UP=Zo;function W7(t,e,r,n,i){return t===e?!0:t==null||e==null||!UP(t)&&!UP(e)?t!==t&&e!==e:eve(t,e,r,n,W7,i)}var V_=W7,tve=O7,rve=V_,nve=1,ive=2;function ave(t,e,r,n){var i=r.length,a=i,o=!n;if(t==null)return!a;for(t=Object(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=r[i];var l=s[0],u=t[l],d=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new tve;if(n)var h=n(u,d,l,t,e,f);if(!(h===void 0?rve(d,u,nve|ive,n,f):h))return!1}}return!0}var ove=ave,sve=Js;function cve(t){return t===t&&!sve(t)}var H7=cve,lve=H7,uve=Wy;function dve(t){for(var e=uve(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,lve(i)]}return e}var fve=dve;function hve(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var G7=hve,pve=ove,mve=fve,gve=G7;function vve(t){var e=mve(t);return e.length==1&&e[0][2]?gve(e[0][0],e[0][1]):function(r){return r===t||pve(r,t,e)}}var yve=vve;function xve(t,e){return t!=null&&e in Object(t)}var bve=xve,wve=e7,Ave=F_,Sve=vi,_ve=B_,Cve=z_,Eve=Ty;function Nve(t,e,r){e=wve(e,t);for(var n=-1,i=e.length,a=!1;++n<i;){var o=Eve(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=i?a:(i=t==null?0:t.length,!!i&&Cve(i)&&_ve(o,i)&&(Sve(t)||Ave(t)))}var jve=Nve,Tve=bve,Pve=jve;function Ove(t,e){return t!=null&&Pve(t,e,Tve)}var Ive=Ove,Dve=V_,kve=t7,Mve=Ive,Rve=w_,$ve=H7,Lve=G7,Fve=Ty,Bve=1,zve=2;function Vve(t,e){return Rve(t)&&$ve(e)?Lve(Fve(t),e):function(r){var n=kve(r,t);return n===void 0&&n===e?Mve(r,t):Dve(e,n,Bve|zve)}}var Uve=Vve;function Wve(t){return t}var lf=Wve;function Hve(t){return function(e){return e==null?void 0:e[t]}}var Gve=Hve,qve=j_;function Kve(t){return function(e){return qve(e,t)}}var Xve=Kve,Yve=Gve,Zve=Xve,Qve=w_,Jve=Ty;function eye(t){return Qve(t)?Yve(Jve(t)):Zve(t)}var tye=eye,rye=yve,nye=Uve,iye=lf,aye=vi,oye=tye;function sye(t){return typeof t=="function"?t:t==null?iye:typeof t=="object"?aye(t)?nye(t[0],t[1]):rye(t):oye(t)}var vo=sye;function cye(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var q7=cye;function lye(t){return t!==t}var uye=lye;function dye(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var fye=dye,hye=q7,pye=uye,mye=fye;function gye(t,e,r){return e===e?mye(t,e,r):hye(t,pye,r)}var vye=gye,yye=vye;function xye(t,e){var r=t==null?0:t.length;return!!r&&yye(t,e,0)>-1}var bye=xye;function wye(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Aye=wye;function Sye(){}var _ye=Sye,k1=V7,Cye=_ye,Eye=L_,Nye=1/0,jye=k1&&1/Eye(new k1([,-0]))[1]==Nye?function(t){return new k1(t)}:Cye,Tye=jye,Pye=I7,Oye=bye,Iye=Aye,Dye=k7,kye=Tye,Mye=L_,Rye=200;function $ye(t,e,r){var n=-1,i=Oye,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=Iye;else if(a>=Rye){var u=e?null:kye(t);if(u)return Mye(u);o=!1,i=Dye,l=new Pye}else l=e?[]:s;e:for(;++n<a;){var d=t[n],f=e?e(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(d)}else i(l,f,r)||(l!==s&&l.push(f),s.push(d))}return s}var Lye=$ye,Fye=vo,Bye=Lye;function zye(t,e){return t&&t.length?Bye(t,Fye(e)):[]}var Vye=zye;const WP=er(Vye);function K7(t,e,r){return e===!0?WP(t,r):Ze(e)?WP(t,e):t}function ad(t){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ad(t)}var Uye=["ref"];function HP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(r),!0).forEach(function(n){Hy(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y7(n.key),n)}}function Hye(t,e,r){return e&&GP(t.prototype,e),r&&GP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gye(t,e,r){return e=Dg(e),qye(t,X7()?Reflect.construct(e,r||[],Dg(t).constructor):e.apply(t,r))}function qye(t,e){if(e&&(ad(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kye(t)}function Kye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(X7=function(){return!!t})()}function Dg(t){return Dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dg(t)}function Xye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uw(t,e)}function Uw(t,e){return Uw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Uw(t,e)}function Hy(t,e,r){return e=Y7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y7(t){var e=Yye(t,"string");return ad(e)=="symbol"?e:e+""}function Yye(t,e){if(ad(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Zye(t,e){if(t==null)return{};var r=Qye(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qye(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Jye(t){return t.value}function exe(t,e){if($.isValidElement(t))return $.cloneElement(t,e);if(typeof t=="function")return $.createElement(t,e);e.ref;var r=Zye(e,Uye);return $.createElement($_,r)}var qP=1,Xc=function(t){function e(){var r;Wye(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Gye(this,e,[].concat(i)),Hy(r,"lastBoundingBox",{width:-1,height:-1}),r}return Xye(e,t),Hye(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>qP||Math.abs(i.height-this.lastBoundingBox.height)>qP)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?wo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var m=this.getBBoxSnapshot();h={top:((d||0)-m.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return wo(wo({},f),h)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=wo(wo({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return $.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){n.wrapperNode=p}},exe(a,wo(wo({},this.props),{},{payload:K7(d,u,Jye)})))}}],[{key:"getWithHeight",value:function(n,i){var a=wo(wo({},this.defaultProps),n.props),o=a.layout;return o==="vertical"&&we(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||i}:null}}])}(x.PureComponent);Hy(Xc,"displayName","Legend");Hy(Xc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var KP=am,txe=F_,rxe=vi,XP=KP?KP.isConcatSpreadable:void 0;function nxe(t){return rxe(t)||txe(t)||!!(XP&&t&&t[XP])}var ixe=nxe,axe=R7,oxe=ixe;function Z7(t,e,r,n,i){var a=-1,o=t.length;for(r||(r=oxe),i||(i=[]);++a<o;){var s=t[a];e>0&&r(s)?e>1?Z7(s,e-1,r,n,i):axe(i,s):n||(i[i.length]=s)}return i}var Q7=Z7;function sxe(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),s=o.length;s--;){var l=o[t?s:++i];if(r(a[l],l,a)===!1)break}return e}}var cxe=sxe,lxe=cxe,uxe=lxe(),dxe=uxe,fxe=dxe,hxe=Wy;function pxe(t,e){return t&&fxe(t,e,hxe)}var J7=pxe,mxe=om;function gxe(t,e){return function(r,n){if(r==null)return r;if(!mxe(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}var vxe=gxe,yxe=J7,xxe=vxe,bxe=xxe(yxe),U_=bxe,wxe=U_,Axe=om;function Sxe(t,e){var r=-1,n=Axe(t)?Array(t.length):[];return wxe(t,function(i,a,o){n[++r]=e(i,a,o)}),n}var eF=Sxe;function _xe(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Cxe=_xe,YP=Jd;function Exe(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,a=YP(t),o=e!==void 0,s=e===null,l=e===e,u=YP(e);if(!s&&!u&&!a&&t>e||a&&o&&l&&!s&&!u||n&&o&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&t<e||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!l)return-1}return 0}var Nxe=Exe,jxe=Nxe;function Txe(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;++n<o;){var l=jxe(i[n],a[n]);if(l){if(n>=s)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return t.index-e.index}var Pxe=Txe,M1=N_,Oxe=j_,Ixe=vo,Dxe=eF,kxe=Cxe,Mxe=F7,Rxe=Pxe,$xe=lf,Lxe=vi;function Fxe(t,e,r){e.length?e=M1(e,function(a){return Lxe(a)?function(o){return Oxe(o,a.length===1?a[0]:a)}:a}):e=[$xe];var n=-1;e=M1(e,Mxe(Ixe));var i=Dxe(t,function(a,o,s){var l=M1(e,function(u){return u(a)});return{criteria:l,index:++n,value:a}});return kxe(i,function(a,o){return Rxe(a,o,r)})}var Bxe=Fxe;function zxe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Vxe=zxe,Uxe=Vxe,ZP=Math.max;function Wxe(t,e,r){return e=ZP(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=ZP(n.length-e,0),o=Array(a);++i<a;)o[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(o),Uxe(t,this,s)}}var Hxe=Wxe;function Gxe(t){return function(){return t}}var qxe=Gxe,Kxe=Nl,Xxe=function(){try{var t=Kxe(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),tF=Xxe,Yxe=qxe,QP=tF,Zxe=lf,Qxe=QP?function(t,e){return QP(t,"toString",{configurable:!0,enumerable:!1,value:Yxe(e),writable:!0})}:Zxe,Jxe=Qxe,e1e=800,t1e=16,r1e=Date.now;function n1e(t){var e=0,r=0;return function(){var n=r1e(),i=t1e-(n-r);if(r=n,i>0){if(++e>=e1e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var i1e=n1e,a1e=Jxe,o1e=i1e,s1e=o1e(a1e),c1e=s1e,l1e=lf,u1e=Hxe,d1e=c1e;function f1e(t,e){return d1e(u1e(t,e,l1e),t+"")}var h1e=f1e,p1e=S_,m1e=om,g1e=B_,v1e=Js;function y1e(t,e,r){if(!v1e(r))return!1;var n=typeof e;return(n=="number"?m1e(r)&&g1e(e,r.length):n=="string"&&e in r)?p1e(r[e],t):!1}var Gy=y1e,x1e=Q7,b1e=Bxe,w1e=h1e,JP=Gy,A1e=w1e(function(t,e){if(t==null)return[];var r=e.length;return r>1&&JP(t,e[0],e[1])?e=[]:r>2&&JP(e[0],e[1],e[2])&&(e=[e[0]]),b1e(t,x1e(e,1),[])}),S1e=A1e;const W_=er(S1e);function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function Ww(){return Ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ww.apply(this,arguments)}function _1e(t,e){return j1e(t)||N1e(t,e)||E1e(t,e)||C1e()}function C1e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E1e(t,e){if(t){if(typeof t=="string")return eO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eO(t,e)}}function eO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N1e(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function j1e(t){if(Array.isArray(t))return t}function tO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function R1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tO(Object(r),!0).forEach(function(n){T1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T1e(t,e,r){return e=P1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P1e(t){var e=O1e(t,"string");return Jh(e)=="symbol"?e:e+""}function O1e(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I1e(t){return Array.isArray(t)&&ln(t[0])&&ln(t[1])?t.join(" ~ "):t}var D1e=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,u=l===void 0?{}:l,d=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,g=e.label,v=e.labelFormatter,y=e.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(d&&d.length){var P={padding:0,margin:0},D=(h?W_(d,h):d).map(function(F,I){if(F.type==="none")return null;var k=R1({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},s),R=F.formatter||f||I1e,L=F.value,V=F.name,W=L,q=V;if(R&&W!=null&&q!=null){var H=R(L,V,F,I,d);if(Array.isArray(H)){var J=_1e(H,2);W=J[0],q=J[1]}else W=H}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:k},ln(q)?$.createElement("span",{className:"recharts-tooltip-item-name"},q):null,ln(q)?$.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,$.createElement("span",{className:"recharts-tooltip-item-value"},W),$.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:P},D)}return null},S=R1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),A=R1({margin:0},u),_=!dt(g),E=_?g:"",N=ut("recharts-default-tooltip",p),T=ut("recharts-tooltip-label",m);_&&v&&d!==void 0&&d!==null&&(E=v(g,d));var O=b?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",Ww({className:N,style:S},O),$.createElement("p",{className:T,style:A},$.isValidElement(E)?E:"".concat(E)),w())};function ep(t){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ep(t)}function zm(t,e,r){return e=k1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k1e(t){var e=M1e(t,"string");return ep(e)=="symbol"?e:e+""}function M1e(t,e){if(ep(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pf="recharts-tooltip-wrapper",R1e={visibility:"hidden"};function $1e(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return ut(Pf,zm(zm(zm(zm({},"".concat(Pf,"-right"),we(r)&&e&&we(e.x)&&r>=e.x),"".concat(Pf,"-left"),we(r)&&e&&we(e.x)&&r<e.x),"".concat(Pf,"-bottom"),we(n)&&e&&we(e.y)&&n>=e.y),"".concat(Pf,"-top"),we(n)&&e&&we(e.y)&&n<e.y))}function rO(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&we(a[n]))return a[n];var d=r[n]-s-i,f=r[n]+i;if(e[n])return o[n]?d:f;if(o[n]){var h=d,p=l[n];return h<p?Math.max(f,l[n]):Math.max(d,l[n])}var m=f+s,g=l[n]+u;return m>g?Math.max(d,l[n]):Math.max(f,l[n])}function L1e(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function F1e(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=rO({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=rO({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=L1e({translateX:d,translateY:f,useTranslate3d:s})):u=R1e,{cssProperties:u,cssClasses:$1e({translateX:d,translateY:f,coordinate:r})}}function od(t){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(t)}function nO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nO(Object(r),!0).forEach(function(n){Gw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z1e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nF(n.key),n)}}function V1e(t,e,r){return e&&z1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U1e(t,e,r){return e=kg(e),W1e(t,rF()?Reflect.construct(e,r||[],kg(t).constructor):e.apply(t,r))}function W1e(t,e){if(e&&(od(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H1e(t)}function H1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rF=function(){return!!t})()}function kg(t){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kg(t)}function G1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hw(t,e)}function Hw(t,e){return Hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Hw(t,e)}function Gw(t,e,r){return e=nF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nF(t){var e=q1e(t,"string");return od(e)=="symbol"?e:e+""}function q1e(t,e){if(od(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(od(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var aO=1,K1e=function(t){function e(){var r;B1e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=U1e(this,e,[].concat(i)),Gw(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Gw(r,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=r.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return G1e(e,t),V1e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>aO||Math.abs(n.height-this.state.lastBoundingBox.height)>aO)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,m=i.position,g=i.reverseDirection,v=i.useTranslate3d,y=i.viewBox,b=i.wrapperStyle,w=F1e({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:y}),S=w.cssClasses,A=w.cssProperties,_=iO(iO({transition:h&&a?"transform ".concat(s,"ms ").concat(l):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return $.createElement("div",{tabIndex:-1,className:S,style:_,ref:function(N){n.wrapperNode=N}},u)}}])}(x.PureComponent),X1e=function(){return!(typeof window!="undefined"&&window.document&&window.document.createElement&&window.setTimeout)},jl={isSsr:X1e()};function sd(t){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sd(t)}function oO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oO(Object(r),!0).forEach(function(n){H_(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z1e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aF(n.key),n)}}function Q1e(t,e,r){return e&&Z1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J1e(t,e,r){return e=Mg(e),ebe(t,iF()?Reflect.construct(e,r||[],Mg(t).constructor):e.apply(t,r))}function ebe(t,e){if(e&&(sd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tbe(t)}function tbe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(iF=function(){return!!t})()}function Mg(t){return Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mg(t)}function rbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qw(t,e)}function qw(t,e){return qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qw(t,e)}function H_(t,e,r){return e=aF(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aF(t){var e=nbe(t,"string");return sd(e)=="symbol"?e:e+""}function nbe(t,e){if(sd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ibe(t){return t.dataKey}function abe(t,e){return $.isValidElement(t)?$.cloneElement(t,e):typeof t=="function"?$.createElement(t,e):$.createElement(D1e,e)}var Gi=function(t){function e(){return Y1e(this,e),J1e(this,e,arguments)}return rbe(e,t),Q1e(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,m=i.payload,g=i.payloadUniqBy,v=i.position,y=i.reverseDirection,b=i.useTranslate3d,w=i.viewBox,S=i.wrapperStyle,A=m!=null?m:[];f&&A.length&&(A=K7(m.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),g,ibe));var _=A.length>0;return $.createElement(K1e,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:h,active:a,coordinate:d,hasPayload:_,offset:p,position:v,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:S},abe(u,sO(sO({},this.props),{},{payload:A})))}}])}(x.PureComponent);H_(Gi,"displayName","Tooltip");H_(Gi,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var obe=go,sbe=function(){return obe.Date.now()},cbe=sbe,lbe=/\s/;function ube(t){for(var e=t.length;e--&&lbe.test(t.charAt(e)););return e}var dbe=ube,fbe=dbe,hbe=/^\s+/;function pbe(t){return t&&t.slice(0,fbe(t)+1).replace(hbe,"")}var mbe=pbe,gbe=mbe,cO=Js,vbe=Jd,lO=NaN,ybe=/^[-+]0x[0-9a-f]+$/i,xbe=/^0b[01]+$/i,bbe=/^0o[0-7]+$/i,wbe=parseInt;function Abe(t){if(typeof t=="number")return t;if(vbe(t))return lO;if(cO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=cO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=gbe(t);var r=xbe.test(t);return r||bbe.test(t)?wbe(t.slice(2),r?2:8):ybe.test(t)?lO:+t}var oF=Abe,Sbe=Js,$1=cbe,uO=oF,_be="Expected a function",Cbe=Math.max,Ebe=Math.min;function Nbe(t,e,r){var n,i,a,o,s,l,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(_be);e=uO(e)||0,Sbe(r)&&(d=!!r.leading,f="maxWait"in r,a=f?Cbe(uO(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function p(_){var E=n,N=i;return n=i=void 0,u=_,o=t.apply(N,E),o}function m(_){return u=_,s=setTimeout(y,e),d?p(_):o}function g(_){var E=_-l,N=_-u,T=e-E;return f?Ebe(T,a-N):T}function v(_){var E=_-l,N=_-u;return l===void 0||E>=e||E<0||f&&N>=a}function y(){var _=$1();if(v(_))return b(_);s=setTimeout(y,g(_))}function b(_){return s=void 0,h&&n?p(_):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function S(){return s===void 0?o:b($1())}function A(){var _=$1(),E=v(_);if(n=arguments,i=this,l=_,E){if(s===void 0)return m(l);if(f)return clearTimeout(s),s=setTimeout(y,e),p(l)}return s===void 0&&(s=setTimeout(y,e)),o}return A.cancel=w,A.flush=S,A}var jbe=Nbe,Tbe=jbe,Pbe=Js,Obe="Expected a function";function Ibe(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(Obe);return Pbe(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Tbe(t,e,{leading:n,maxWait:e,trailing:i})}var Dbe=Ibe;const sF=er(Dbe);function tp(t){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tp(t)}function dO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dO(Object(r),!0).forEach(function(n){kbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kbe(t,e,r){return e=Mbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mbe(t){var e=Rbe(t,"string");return tp(e)=="symbol"?e:e+""}function Rbe(t,e){if(tp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $be(t,e){return zbe(t)||Bbe(t,e)||Fbe(t,e)||Lbe()}function Lbe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fbe(t,e){if(t){if(typeof t=="string")return fO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fO(t,e)}}function fO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bbe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function zbe(t){if(Array.isArray(t))return t}var Kw=x.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=t.width,o=a===void 0?"100%":a,s=t.height,l=s===void 0?"100%":s,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,g=m===void 0?0:m,v=t.id,y=t.className,b=t.onResize,w=t.style,S=w===void 0?{}:w,A=x.useRef(null),_=x.useRef();_.current=b,x.useImperativeHandle(e,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var E=x.useState({containerWidth:i.width,containerHeight:i.height}),N=$be(E,2),T=N[0],O=N[1],j=x.useCallback(function(D,F){O(function(I){var k=Math.round(D),R=Math.round(F);return I.containerWidth===k&&I.containerHeight===R?I:{containerWidth:k,containerHeight:R}})},[]);x.useEffect(function(){var D=function(V){var W,q=V[0].contentRect,H=q.width,J=q.height;j(H,J),(W=_.current)===null||W===void 0||W.call(_,H,J)};g>0&&(D=sF(D,g,{trailing:!0,leading:!1}));var F=new ResizeObserver(D),I=A.current.getBoundingClientRect(),k=I.width,R=I.height;return j(k,R),F.observe(A.current),function(){F.disconnect()}},[j,g]);var P=x.useMemo(function(){var D=T.containerWidth,F=T.containerHeight;if(D<0||F<0)return null;Ea(Pc(o)||Pc(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",o,l),Ea(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=Pc(o)?D:o,k=Pc(l)?F:l;r&&r>0&&(I?k=I/r:k&&(I=k*r),h&&k>h&&(k=h)),Ea(I>0||k>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",I,k,o,l,d,f,r);var R=!Array.isArray(p)&&Mo(p.type).endsWith("Chart");return $.Children.map(p,function(L){return $.isValidElement(L)?x.cloneElement(L,Vm({width:I,height:k},R?{style:Vm({height:"100%",width:"100%",maxHeight:k,maxWidth:I},L.props.style)}:{})):L})},[r,p,l,h,f,d,T,o]);return $.createElement("div",{id:v?"".concat(v):void 0,className:ut("recharts-responsive-container",y),style:Vm(Vm({},S),{},{width:o,height:l,minWidth:d,minHeight:f,maxHeight:h}),ref:A},P)}),qy=function(e){return null};qy.displayName="Cell";function rp(t){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rp(t)}function hO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Xw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hO(Object(r),!0).forEach(function(n){Vbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vbe(t,e,r){return e=Ube(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ube(t){var e=Wbe(t,"string");return rp(e)=="symbol"?e:e+""}function Wbe(t,e){if(rp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ul={widthCache:{},cacheCount:0},Hbe=2e3,Gbe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},pO="recharts_measurement_span";function qbe(t){var e=Xw({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var vh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||jl.isSsr)return{width:0,height:0};var n=qbe(r),i=JSON.stringify({text:e,copyStyle:n});if(Ul.widthCache[i])return Ul.widthCache[i];try{var a=document.getElementById(pO);a||(a=document.createElement("span"),a.setAttribute("id",pO),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=Xw(Xw({},Gbe),n);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return Ul.widthCache[i]=l,++Ul.cacheCount>Hbe&&(Ul.cacheCount=0,Ul.widthCache={}),l}catch(u){return{width:0,height:0}}},Kbe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function np(t){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},np(t)}function Rg(t,e){return Qbe(t)||Zbe(t,e)||Ybe(t,e)||Xbe()}function Xbe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ybe(t,e){if(t){if(typeof t=="string")return mO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mO(t,e)}}function mO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zbe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Qbe(t){if(Array.isArray(t))return t}function Jbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,twe(n.key),n)}}function ewe(t,e,r){return e&&gO(t.prototype,e),r&&gO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function twe(t){var e=rwe(t,"string");return np(e)=="symbol"?e:e+""}function rwe(t,e){if(np(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,iwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,cF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},awe=Object.keys(cF),lu="NaN";function owe(t,e){return t*cF[e]}var Um=function(){function t(e,r){Jbe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!nwe.test(r)&&(this.num=NaN,this.unit=""),awe.includes(r)&&(this.num=owe(e,r),this.unit="px")}return ewe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=iwe.exec(r))!==null&&n!==void 0?n:[],a=Rg(i,3),o=a[1],s=a[2];return new t(parseFloat(o),s!=null?s:"")}}])}();function lF(t){if(t.includes(lu))return lu;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=vO.exec(e))!==null&&r!==void 0?r:[],i=Rg(n,4),a=i[1],o=i[2],s=i[3],l=Um.parse(a!=null?a:""),u=Um.parse(s!=null?s:""),d=o==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return lu;e=e.replace(vO,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=yO.exec(e))!==null&&f!==void 0?f:[],p=Rg(h,4),m=p[1],g=p[2],v=p[3],y=Um.parse(m!=null?m:""),b=Um.parse(v!=null?v:""),w=g==="+"?y.add(b):y.subtract(b);if(w.isNaN())return lu;e=e.replace(yO,w.toString())}return e}var xO=/\(([^()]*)\)/;function swe(t){for(var e=t;e.includes("(");){var r=xO.exec(e),n=Rg(r,2),i=n[1];e=e.replace(xO,lF(i))}return e}function cwe(t){var e=t.replace(/\s+/g,"");return e=swe(e),e=lF(e),e}function lwe(t){try{return cwe(t)}catch(e){return lu}}function L1(t){var e=lwe(t.slice(5,-1));return e===lu?"":e}var uwe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],dwe=["dx","dy","angle","className","breakAll"];function Yw(){return Yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yw.apply(this,arguments)}function bO(t,e){if(t==null)return{};var r=fwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wO(t,e){return gwe(t)||mwe(t,e)||pwe(t,e)||hwe()}function hwe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pwe(t,e){if(t){if(typeof t=="string")return AO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AO(t,e)}}function AO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mwe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function gwe(t){if(Array.isArray(t))return t}var uF=/[ \f\n\r\t\v\u2028\u2029]+/,dF=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var a=[];dt(r)||(n?a=r.toString().split(""):a=r.toString().split(uF));var o=a.map(function(l){return{word:l,width:vh(l,i).width}}),s=n?0:vh("",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch(l){return null}},vwe=function(e,r,n,i,a){var o=e.maxLines,s=e.children,l=e.style,u=e.breakAll,d=we(o),f=s,h=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(k,R){var L=R.word,V=R.width,W=k[k.length-1];if(W&&(i==null||a||W.width+V+n<Number(i)))W.words.push(L),W.width+=V+n;else{var q={words:[L],width:V};k.push(q)}return k},[])},p=h(r),m=function(I){return I.reduce(function(k,R){return k.width>R.width?k:R})};if(!d)return p;for(var g="",v=function(I){var k=f.slice(0,I),R=dF({breakAll:u,style:l,children:k+g}).wordsWithComputedWidth,L=h(R),V=L.length>o||m(L).width>Number(i);return[V,L]},y=0,b=f.length-1,w=0,S;y<=b&&w<=f.length-1;){var A=Math.floor((y+b)/2),_=A-1,E=v(_),N=wO(E,2),T=N[0],O=N[1],j=v(A),P=wO(j,1),D=P[0];if(!T&&!D&&(y=A+1),T&&D&&(b=A-1),!T&&D){S=O;break}w++}return S||p},SO=function(e){var r=dt(e)?[]:e.toString().split(uF);return[{words:r}]},ywe=function(e){var r=e.width,n=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((r||n)&&!jl.isSsr){var l,u,d=dF({breakAll:o,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;l=f,u=h}else return SO(i);return vwe({breakAll:o,children:i,maxLines:s,style:a},l,u,r,n)}return SO(i)},_O="#808080",ml=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,u=l===void 0?"0.71em":l,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,g=m===void 0?"end":m,v=e.fill,y=v===void 0?_O:v,b=bO(e,uwe),w=x.useMemo(function(){return ywe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),S=b.dx,A=b.dy,_=b.angle,E=b.className,N=b.breakAll,T=bO(b,dwe);if(!ln(n)||!ln(a))return null;var O=n+(we(S)?S:0),j=a+(we(A)?A:0),P;switch(g){case"start":P=L1("calc(".concat(u,")"));break;case"middle":P=L1("calc(".concat((w.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:P=L1("calc(".concat(w.length-1," * -").concat(s,")"));break}var D=[];if(f){var F=w[0].width,I=b.width;D.push("scale(".concat((we(I)?I/F:1)/F,")"))}return _&&D.push("rotate(".concat(_,", ").concat(O,", ").concat(j,")")),D.length&&(T.transform=D.join(" ")),$.createElement("text",Yw({},qe(T,!0),{x:O,y:j,className:ut("recharts-text",E),textAnchor:p,fill:y.includes("url")?_O:y}),w.map(function(k,R){var L=k.words.join(N?"":" ");return $.createElement("tspan",{x:O,dy:R===0?P:s,key:"".concat(L,"-").concat(R)},L)}))};function Ns(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xwe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function G_(t){let e,r,n;t.length!==2?(e=Ns,r=(s,l)=>Ns(t(s),l),n=(s,l)=>t(s)-l):(e=t===Ns||t===xwe?t:bwe,r=t,n=t);function i(s,l,u=0,d=s.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(s,l,u=0,d=s.length){if(u<d){if(e(l,l)!==0)return d;do{const f=u+d>>>1;r(s[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function o(s,l,u=0,d=s.length){const f=i(s,l,u,d-1);return f>u&&n(s[f-1],l)>-n(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function bwe(){return 0}function fF(t){return t===null?NaN:+t}function*wwe(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Awe=G_(Ns),sm=Awe.right;G_(fF).center;class CO extends Map{constructor(e,r=Cwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(EO(this,e))}has(e){return super.has(EO(this,e))}set(e,r){return super.set(Swe(this,e),r)}delete(e){return super.delete(_we(this,e))}}function EO({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Swe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function _we({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Cwe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Ewe(t=Ns){if(t===Ns)return hF;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function hF(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Nwe=Math.sqrt(50),jwe=Math.sqrt(10),Twe=Math.sqrt(2);function $g(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),o=a>=Nwe?10:a>=jwe?5:a>=Twe?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=r&&r<2?$g(t,e,r*2):[s,l,u]}function Zw(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,o]=n?$g(e,t,r):$g(t,e,r);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(n)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function Qw(t,e,r){return e=+e,t=+t,r=+r,$g(t,e,r)[2]}function Jw(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?Qw(e,t,r):Qw(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function NO(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function jO(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function pF(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?hF:Ewe(i);n>r;){if(n-r>600){const l=n-r+1,u=e-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(r,Math.floor(e-u*f/l+h)),m=Math.min(n,Math.floor(e+(l-u)*f/l+h));pF(t,e,p,m,i)}const a=t[e];let o=r,s=n;for(Of(t,r,e),i(t[n],a)>0&&Of(t,r,n);o<s;){for(Of(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[r],a)===0?Of(t,r,s):(++s,Of(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function Of(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Pwe(t,e,r){if(t=Float64Array.from(wwe(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return jO(t);if(e>=1)return NO(t);var n,i=(n-1)*e,a=Math.floor(i),o=NO(pF(t,a).subarray(0,a+1)),s=jO(t.subarray(a+1));return o+(s-o)*(i-a)}}function Owe(t,e,r=fF){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),o=+r(t[a],a,t),s=+r(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Iwe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function oa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const e2=Symbol("implicit");function q_(){var t=new CO,e=[],r=[],n=e2;function i(a){let o=t.get(a);if(o===void 0){if(n!==e2)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new CO;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return q_(e,r).unknown(n)},oa.apply(i,arguments),i}function ip(){var t=q_().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,o,s=!1,l=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,p=i<n,m=p?i:n,g=p?n:i;a=(g-m)/Math.max(1,h-l+u*2),s&&(a=Math.floor(a)),m+=(g-m-a*(h-l))*d,o=a*(1-l),s&&(m=Math.round(m),o=Math.round(o));var v=Iwe(h).map(function(y){return m+a*y});return r(p?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return ip(e(),[n,i]).round(s).paddingInner(l).paddingOuter(u).align(d)},oa.apply(f(),arguments)}function mF(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return mF(e())},t}function yh(){return mF(ip.apply(null,arguments).paddingInner(1))}function K_(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function gF(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function cm(){}var ap=.7,Lg=1/ap,_u="\\s*([+-]?\\d+)\\s*",op="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ro="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dwe=/^#([0-9a-f]{3,8})$/,kwe=new RegExp("^rgb\\(".concat(_u,",").concat(_u,",").concat(_u,"\\)$")),Mwe=new RegExp("^rgb\\(".concat(ro,",").concat(ro,",").concat(ro,"\\)$")),Rwe=new RegExp("^rgba\\(".concat(_u,",").concat(_u,",").concat(_u,",").concat(op,"\\)$")),$we=new RegExp("^rgba\\(".concat(ro,",").concat(ro,",").concat(ro,",").concat(op,"\\)$")),Lwe=new RegExp("^hsl\\(".concat(op,",").concat(ro,",").concat(ro,"\\)$")),Fwe=new RegExp("^hsla\\(".concat(op,",").concat(ro,",").concat(ro,",").concat(op,"\\)$")),TO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};K_(cm,sp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:PO,formatHex:PO,formatHex8:Bwe,formatHsl:zwe,formatRgb:OO,toString:OO});function PO(){return this.rgb().formatHex()}function Bwe(){return this.rgb().formatHex8()}function zwe(){return vF(this).formatHsl()}function OO(){return this.rgb().formatRgb()}function sp(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Dwe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?IO(e):r===3?new pi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Wm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Wm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kwe.exec(t))?new pi(e[1],e[2],e[3],1):(e=Mwe.exec(t))?new pi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Rwe.exec(t))?Wm(e[1],e[2],e[3],e[4]):(e=$we.exec(t))?Wm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Lwe.exec(t))?MO(e[1],e[2]/100,e[3]/100,1):(e=Fwe.exec(t))?MO(e[1],e[2]/100,e[3]/100,e[4]):TO.hasOwnProperty(t)?IO(TO[t]):t==="transparent"?new pi(NaN,NaN,NaN,0):null}function IO(t){return new pi(t>>16&255,t>>8&255,t&255,1)}function Wm(t,e,r,n){return n<=0&&(t=e=r=NaN),new pi(t,e,r,n)}function Vwe(t){return t instanceof cm||(t=sp(t)),t?(t=t.rgb(),new pi(t.r,t.g,t.b,t.opacity)):new pi}function t2(t,e,r,n){return arguments.length===1?Vwe(t):new pi(t,e,r,n==null?1:n)}function pi(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}K_(pi,t2,gF(cm,{brighter(t){return t=t==null?Lg:Math.pow(Lg,t),new pi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ap:Math.pow(ap,t),new pi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new pi(Yc(this.r),Yc(this.g),Yc(this.b),Fg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DO,formatHex:DO,formatHex8:Uwe,formatRgb:kO,toString:kO}));function DO(){return"#".concat(Oc(this.r)).concat(Oc(this.g)).concat(Oc(this.b))}function Uwe(){return"#".concat(Oc(this.r)).concat(Oc(this.g)).concat(Oc(this.b)).concat(Oc((isNaN(this.opacity)?1:this.opacity)*255))}function kO(){const t=Fg(this.opacity);return"".concat(t===1?"rgb(":"rgba(").concat(Yc(this.r),", ").concat(Yc(this.g),", ").concat(Yc(this.b)).concat(t===1?")":", ".concat(t,")"))}function Fg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Yc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Oc(t){return t=Yc(t),(t<16?"0":"")+t.toString(16)}function MO(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new xa(t,e,r,n)}function vF(t){if(t instanceof xa)return new xa(t.h,t.s,t.l,t.opacity);if(t instanceof cm||(t=sp(t)),!t)return new xa;if(t instanceof xa)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(r-n)/s+(r<n)*6:r===a?o=(n-e)/s+2:o=(e-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new xa(o,s,l,t.opacity)}function Wwe(t,e,r,n){return arguments.length===1?vF(t):new xa(t,e,r,n==null?1:n)}function xa(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}K_(xa,Wwe,gF(cm,{brighter(t){return t=t==null?Lg:Math.pow(Lg,t),new xa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ap:Math.pow(ap,t),new xa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new pi(F1(t>=240?t-240:t+120,i,n),F1(t,i,n),F1(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new xa(RO(this.h),Hm(this.s),Hm(this.l),Fg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fg(this.opacity);return"".concat(t===1?"hsl(":"hsla(").concat(RO(this.h),", ").concat(Hm(this.s)*100,"%, ").concat(Hm(this.l)*100,"%").concat(t===1?")":", ".concat(t,")"))}}));function RO(t){return t=(t||0)%360,t<0?t+360:t}function Hm(t){return Math.max(0,Math.min(1,t||0))}function F1(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const X_=t=>()=>t;function Hwe(t,e){return function(r){return t+r*e}}function Gwe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function qwe(t){return(t=+t)==1?yF:function(e,r){return r-e?Gwe(e,r,t):X_(isNaN(e)?r:e)}}function yF(t,e){var r=e-t;return r?Hwe(t,r):X_(isNaN(t)?e:t)}const $O=function t(e){var r=qwe(e);function n(i,a){var o=r((i=t2(i)).r,(a=t2(a)).r),s=r(i.g,a.g),l=r(i.b,a.b),u=yF(i.opacity,a.opacity);return function(d){return i.r=o(d),i.g=s(d),i.b=l(d),i.opacity=u(d),i+""}}return n.gamma=t,n}(1);function Kwe(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Xwe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ywe(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)i[o]=uf(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(s){for(o=0;o<n;++o)a[o]=i[o](s);return a}}function Zwe(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Bg(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Qwe(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=uf(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var r2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,B1=new RegExp(r2.source,"g");function Jwe(t){return function(){return t}}function e2e(t){return function(e){return t(e)+""}}function t2e(t,e){var r=r2.lastIndex=B1.lastIndex=0,n,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(n=r2.exec(t))&&(i=B1.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Bg(n,i)})),r=B1.lastIndex;return r<e.length&&(a=e.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?e2e(l[0].x):Jwe(e):(e=l.length,function(u){for(var d=0,f;d<e;++d)s[(f=l[d]).i]=f.x(u);return s.join("")})}function uf(t,e){var r=typeof e,n;return e==null||r==="boolean"?X_(e):(r==="number"?Bg:r==="string"?(n=sp(e))?(e=n,$O):t2e:e instanceof sp?$O:e instanceof Date?Zwe:Xwe(e)?Kwe:Array.isArray(e)?Ywe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qwe:Bg)(t,e)}function Y_(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function r2e(t,e){e===void 0&&(e=t,t=uf);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(o){var s=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[s](o-s)}}function n2e(t){return function(){return t}}function zg(t){return+t}var LO=[0,1];function ri(t){return t}function n2(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:n2e(isNaN(e)?NaN:.5)}function i2e(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function a2e(t,e,r){var n=t[0],i=t[1],a=e[0],o=e[1];return i<n?(n=n2(i,n),a=r(o,a)):(n=n2(n,i),a=r(a,o)),function(s){return a(n(s))}}function o2e(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)i[o]=n2(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(s){var l=sm(t,s,1,n)-1;return a[l](i[l](s))}}function lm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ky(){var t=LO,e=LO,r=uf,n,i,a,o=ri,s,l,u;function d(){var h=Math.min(t.length,e.length);return o!==ri&&(o=i2e(t[0],t[h-1])),s=h>2?o2e:a2e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=s(t.map(n),e,r)))(n(o(h)))}return f.invert=function(h){return o(i((u||(u=s(e,t.map(n),Bg)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,zg),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=Y_,d()},f.clamp=function(h){return arguments.length?(o=h?!0:ri,d()):o!==ri},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return n=h,i=p,d()}}function Z_(){return Ky()(ri,ri)}function s2e(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vg(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function cd(t){return t=Vg(Math.abs(t)),t?t[1]:NaN}function c2e(t,e){return function(r,n){for(var i=r.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(r.substring(i-=s,i+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function l2e(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var u2e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cp(t){if(!(e=u2e.exec(t)))throw new Error("invalid format: "+t);var e;return new Q_({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}cp.prototype=Q_.prototype;function Q_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Q_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function d2e(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var xF;function f2e(t,e){var r=Vg(t,e);if(!r)return t+"";var n=r[0],i=r[1],a=i-(xF=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Vg(t,Math.max(0,e+a-1))[0]}function FO(t,e){var r=Vg(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const BO={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:s2e,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>FO(t*100,e),r:FO,s:f2e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function zO(t){return t}var VO=Array.prototype.map,UO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function h2e(t){var e=t.grouping===void 0||t.thousands===void 0?zO:c2e(VO.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?zO:l2e(VO.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=cp(f);var h=f.fill,p=f.align,m=f.sign,g=f.symbol,v=f.zero,y=f.width,b=f.comma,w=f.precision,S=f.trim,A=f.type;A==="n"?(b=!0,A="g"):BO[A]||(w===void 0&&(w=12),S=!0,A="g"),(v||h==="0"&&p==="=")&&(v=!0,h="0",p="=");var _=g==="$"?r:g==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",E=g==="$"?n:/[%p]/.test(A)?o:"",N=BO[A],T=/[defgprs%]/.test(A);w=w===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function O(j){var P=_,D=E,F,I,k;if(A==="c")D=N(j)+D,j="";else{j=+j;var R=j<0||1/j<0;if(j=isNaN(j)?l:N(Math.abs(j),w),S&&(j=d2e(j)),R&&+j==0&&m!=="+"&&(R=!1),P=(R?m==="("?m:s:m==="-"||m==="("?"":m)+P,D=(A==="s"?UO[8+xF/3]:"")+D+(R&&m==="("?")":""),T){for(F=-1,I=j.length;++F<I;)if(k=j.charCodeAt(F),48>k||k>57){D=(k===46?i+j.slice(F+1):j.slice(F))+D,j=j.slice(0,F);break}}}b&&!v&&(j=e(j,1/0));var L=P.length+j.length+D.length,V=L<y?new Array(y-L+1).join(h):"";switch(b&&v&&(j=e(V+j,V.length?y-D.length:1/0),V=""),p){case"<":j=P+j+D+V;break;case"=":j=P+V+j+D;break;case"^":j=V.slice(0,L=V.length>>1)+P+j+D+V.slice(L);break;default:j=V+P+j+D;break}return a(j)}return O.toString=function(){return f+""},O}function d(f,h){var p=u((f=cp(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(cd(h)/3)))*3,g=Math.pow(10,-m),v=UO[8+m/3];return function(y){return p(g*y)+v}}return{format:u,formatPrefix:d}}var Gm,J_,bF;p2e({thousands:",",grouping:[3],currency:["$",""]});function p2e(t){return Gm=h2e(t),J_=Gm.format,bF=Gm.formatPrefix,Gm}function m2e(t){return Math.max(0,-cd(Math.abs(t)))}function g2e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cd(e)/3)))*3-cd(Math.abs(t)))}function v2e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cd(e)-cd(t))+1}function wF(t,e,r,n){var i=Jw(t,e,r),a;switch(n=cp(n==null?",f":n),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=g2e(i,o))&&(n.precision=a),bF(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=v2e(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=m2e(i))&&(n.precision=a-(n.type==="%")*2);break}}return J_(n)}function ec(t){var e=t.domain;return t.ticks=function(r){var n=e();return Zw(n[0],n[n.length-1],r==null?10:r)},t.tickFormat=function(r,n){var i=e();return wF(i[0],i[i.length-1],r==null?10:r,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,o=n[i],s=n[a],l,u,d=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);d-- >0;){if(u=Qw(o,s,r),u===l)return n[i]=o,n[a]=s,e(n);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Ug(){var t=Z_();return t.copy=function(){return lm(t,Ug())},oa.apply(t,arguments),ec(t)}function AF(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,zg),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return AF(t).unknown(e)},t=arguments.length?Array.from(t,zg):[0,1],ec(r)}function SF(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],o;return a<i&&(o=r,r=n,n=o,o=i,i=a,a=o),t[r]=e.floor(i),t[n]=e.ceil(a),t}function WO(t){return Math.log(t)}function HO(t){return Math.exp(t)}function y2e(t){return-Math.log(-t)}function x2e(t){return-Math.exp(-t)}function b2e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function w2e(t){return t===10?b2e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function A2e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function GO(t){return(e,r)=>-t(-e,r)}function eC(t){const e=t(WO,HO),r=e.domain;let n=10,i,a;function o(){return i=A2e(n),a=w2e(n),r()[0]<0?(i=GO(i),a=GO(a),t(y2e,x2e)):t(WO,HO),e}return e.base=function(s){return arguments.length?(n=+s,o()):n},e.domain=function(s){return arguments.length?(r(s),o()):r()},e.ticks=s=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),m,g;const v=s==null?10:+s;let y=[];if(!(n%1)&&p-h<v){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<n;++m)if(g=h<0?m/a(-h):m*a(h),!(g<u)){if(g>d)break;y.push(g)}}else for(;h<=p;++h)for(m=n-1;m>=1;--m)if(g=h>0?m/a(-h):m*a(h),!(g<u)){if(g>d)break;y.push(g)}y.length*2<v&&(y=Zw(u,d,v))}else y=Zw(h,p,Math.min(p-h,v)).map(a);return f?y.reverse():y},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=cp(l)).precision==null&&(l.trim=!0),l=J_(l)),s===1/0)return l;const u=Math.max(1,n*s/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},e.nice=()=>r(SF(r(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function _F(){const t=eC(Ky()).domain([1,10]);return t.copy=()=>lm(t,_F()).base(t.base()),oa.apply(t,arguments),t}function qO(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function KO(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function tC(t){var e=1,r=t(qO(e),KO(e));return r.constant=function(n){return arguments.length?t(qO(e=+n),KO(e)):e},ec(r)}function CF(){var t=tC(Ky());return t.copy=function(){return lm(t,CF()).constant(t.constant())},oa.apply(t,arguments)}function XO(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function S2e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _2e(t){return t<0?-t*t:t*t}function rC(t){var e=t(ri,ri),r=1;function n(){return r===1?t(ri,ri):r===.5?t(S2e,_2e):t(XO(r),XO(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},ec(e)}function nC(){var t=rC(Ky());return t.copy=function(){return lm(t,nC()).exponent(t.exponent())},oa.apply(t,arguments),t}function C2e(){return nC.apply(null,arguments).exponent(.5)}function YO(t){return Math.sign(t)*t*t}function E2e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function EF(){var t=Z_(),e=[0,1],r=!1,n;function i(a){var o=E2e(t(a));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(a){return t.invert(YO(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,zg)).map(YO)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return EF(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},oa.apply(i,arguments),ec(i)}function NF(){var t=[],e=[],r=[],n;function i(){var o=0,s=Math.max(1,e.length);for(r=new Array(s-1);++o<s;)r[o-1]=Owe(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?n:e[sm(r,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?r[s-1]:t[0],s<r.length?r[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ns),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return NF().domain(t).range(e).unknown(n)},oa.apply(a,arguments)}function jF(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[sm(n,l,0,r)]:a}function s(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*e-(l-r)*t)/(r+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(r=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return jF().domain([t,e]).range(i).unknown(a)},oa.apply(ec(o),arguments)}function TF(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[sm(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return TF().domain(t).range(e).unknown(r)},oa.apply(i,arguments)}const z1=new Date,V1=new Date;function dn(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},i.filter=a=>dn(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),r&&(i.count=(a,o)=>(z1.setTime(+a),V1.setTime(+o),t(z1),t(V1),Math.floor(r(z1,V1))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?o=>n(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Wg=dn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Wg.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?dn(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Wg);Wg.range;const jo=1e3,Yi=jo*60,To=Yi*60,Go=To*24,iC=Go*7,ZO=Go*30,U1=Go*365,Ic=dn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*jo)},(t,e)=>(e-t)/jo,t=>t.getUTCSeconds());Ic.range;const aC=dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jo)},(t,e)=>{t.setTime(+t+e*Yi)},(t,e)=>(e-t)/Yi,t=>t.getMinutes());aC.range;const oC=dn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Yi)},(t,e)=>(e-t)/Yi,t=>t.getUTCMinutes());oC.range;const sC=dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*jo-t.getMinutes()*Yi)},(t,e)=>{t.setTime(+t+e*To)},(t,e)=>(e-t)/To,t=>t.getHours());sC.range;const cC=dn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*To)},(t,e)=>(e-t)/To,t=>t.getUTCHours());cC.range;const um=dn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Yi)/Go,t=>t.getDate()-1);um.range;const Xy=dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Go,t=>t.getUTCDate()-1);Xy.range;const PF=dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Go,t=>Math.floor(t/Go));PF.range;function Tl(t){return dn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Yi)/iC)}const Yy=Tl(0),Hg=Tl(1),N2e=Tl(2),j2e=Tl(3),ld=Tl(4),T2e=Tl(5),P2e=Tl(6);Yy.range;Hg.range;N2e.range;j2e.range;ld.range;T2e.range;P2e.range;function Pl(t){return dn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/iC)}const Zy=Pl(0),Gg=Pl(1),O2e=Pl(2),I2e=Pl(3),ud=Pl(4),D2e=Pl(5),k2e=Pl(6);Zy.range;Gg.range;O2e.range;I2e.range;ud.range;D2e.range;k2e.range;const lC=dn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());lC.range;const uC=dn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());uC.range;const qo=dn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());qo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:dn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});qo.range;const Ko=dn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ko.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:dn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Ko.range;function OF(t,e,r,n,i,a){const o=[[Ic,1,jo],[Ic,5,5*jo],[Ic,15,15*jo],[Ic,30,30*jo],[a,1,Yi],[a,5,5*Yi],[a,15,15*Yi],[a,30,30*Yi],[i,1,To],[i,3,3*To],[i,6,6*To],[i,12,12*To],[n,1,Go],[n,2,2*Go],[r,1,iC],[e,1,ZO],[e,3,3*ZO],[t,1,U1]];function s(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:l(u,d,f),m=p?p.range(u,+d+1):[];return h?m.reverse():m}function l(u,d,f){const h=Math.abs(d-u)/f,p=G_(([,,v])=>v).right(o,h);if(p===o.length)return t.every(Jw(u/U1,d/U1,f));if(p===0)return Wg.every(Math.max(Jw(u,d,f),1));const[m,g]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return m.every(g)}return[s,l]}const[M2e,R2e]=OF(Ko,uC,Zy,PF,cC,oC),[$2e,L2e]=OF(qo,lC,Yy,um,sC,aC);function W1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function H1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function If(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function F2e(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Df(i),d=kf(i),f=Df(a),h=kf(a),p=Df(o),m=kf(o),g=Df(s),v=kf(s),y=Df(l),b=kf(l),w={a:R,A:L,b:V,B:W,c:null,d:nI,e:nI,f:cAe,g:yAe,G:bAe,H:aAe,I:oAe,j:sAe,L:IF,m:lAe,M:uAe,p:q,q:H,Q:oI,s:sI,S:dAe,u:fAe,U:hAe,V:pAe,w:mAe,W:gAe,x:null,X:null,y:vAe,Y:xAe,Z:wAe,"%":aI},S={a:J,A:de,b:se,B:Ee,c:null,d:iI,e:iI,f:CAe,g:MAe,G:$Ae,H:AAe,I:SAe,j:_Ae,L:kF,m:EAe,M:NAe,p:Ue,q:ge,Q:oI,s:sI,S:jAe,u:TAe,U:PAe,V:OAe,w:IAe,W:DAe,x:null,X:null,y:kAe,Y:RAe,Z:LAe,"%":aI},A={a:O,A:j,b:P,B:D,c:F,d:tI,e:tI,f:tAe,g:eI,G:JO,H:rI,I:rI,j:Z2e,L:eAe,m:Y2e,M:Q2e,p:T,q:X2e,Q:nAe,s:iAe,S:J2e,u:W2e,U:H2e,V:G2e,w:U2e,W:q2e,x:I,X:k,y:eI,Y:JO,Z:K2e,"%":rAe};w.x=_(r,w),w.X=_(n,w),w.c=_(e,w),S.x=_(r,S),S.X=_(n,S),S.c=_(e,S);function _(Y,te){return function(ae){var X=[],be=-1,ue=0,Pe=Y.length,oe,_e,De;for(ae instanceof Date||(ae=new Date(+ae));++be<Pe;)Y.charCodeAt(be)===37&&(X.push(Y.slice(ue,be)),(_e=QO[oe=Y.charAt(++be)])!=null?oe=Y.charAt(++be):_e=oe==="e"?" ":"0",(De=te[oe])&&(oe=De(ae,_e)),X.push(oe),ue=be+1);return X.push(Y.slice(ue,be)),X.join("")}}function E(Y,te){return function(ae){var X=If(1900,void 0,1),be=N(X,Y,ae+="",0),ue,Pe;if(be!=ae.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(te&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(ue=H1(If(X.y,0,1)),Pe=ue.getUTCDay(),ue=Pe>4||Pe===0?Gg.ceil(ue):Gg(ue),ue=Xy.offset(ue,(X.V-1)*7),X.y=ue.getUTCFullYear(),X.m=ue.getUTCMonth(),X.d=ue.getUTCDate()+(X.w+6)%7):(ue=W1(If(X.y,0,1)),Pe=ue.getDay(),ue=Pe>4||Pe===0?Hg.ceil(ue):Hg(ue),ue=um.offset(ue,(X.V-1)*7),X.y=ue.getFullYear(),X.m=ue.getMonth(),X.d=ue.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),Pe="Z"in X?H1(If(X.y,0,1)).getUTCDay():W1(If(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(Pe+5)%7:X.w+X.U*7-(Pe+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,H1(X)):W1(X)}}function N(Y,te,ae,X){for(var be=0,ue=te.length,Pe=ae.length,oe,_e;be<ue;){if(X>=Pe)return-1;if(oe=te.charCodeAt(be++),oe===37){if(oe=te.charAt(be++),_e=A[oe in QO?te.charAt(be++):oe],!_e||(X=_e(Y,ae,X))<0)return-1}else if(oe!=ae.charCodeAt(X++))return-1}return X}function T(Y,te,ae){var X=u.exec(te.slice(ae));return X?(Y.p=d.get(X[0].toLowerCase()),ae+X[0].length):-1}function O(Y,te,ae){var X=p.exec(te.slice(ae));return X?(Y.w=m.get(X[0].toLowerCase()),ae+X[0].length):-1}function j(Y,te,ae){var X=f.exec(te.slice(ae));return X?(Y.w=h.get(X[0].toLowerCase()),ae+X[0].length):-1}function P(Y,te,ae){var X=y.exec(te.slice(ae));return X?(Y.m=b.get(X[0].toLowerCase()),ae+X[0].length):-1}function D(Y,te,ae){var X=g.exec(te.slice(ae));return X?(Y.m=v.get(X[0].toLowerCase()),ae+X[0].length):-1}function F(Y,te,ae){return N(Y,e,te,ae)}function I(Y,te,ae){return N(Y,r,te,ae)}function k(Y,te,ae){return N(Y,n,te,ae)}function R(Y){return o[Y.getDay()]}function L(Y){return a[Y.getDay()]}function V(Y){return l[Y.getMonth()]}function W(Y){return s[Y.getMonth()]}function q(Y){return i[+(Y.getHours()>=12)]}function H(Y){return 1+~~(Y.getMonth()/3)}function J(Y){return o[Y.getUTCDay()]}function de(Y){return a[Y.getUTCDay()]}function se(Y){return l[Y.getUTCMonth()]}function Ee(Y){return s[Y.getUTCMonth()]}function Ue(Y){return i[+(Y.getUTCHours()>=12)]}function ge(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var te=_(Y+="",w);return te.toString=function(){return Y},te},parse:function(Y){var te=E(Y+="",!1);return te.toString=function(){return Y},te},utcFormat:function(Y){var te=_(Y+="",S);return te.toString=function(){return Y},te},utcParse:function(Y){var te=E(Y+="",!0);return te.toString=function(){return Y},te}}}var QO={"-":"",_:" ",0:"0"},wn=/^\s*\d+/,B2e=/^%/,z2e=/[\\^$*+?|[\]().{}]/g;function Mt(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function V2e(t){return t.replace(z2e,"\\$&")}function Df(t){return new RegExp("^(?:"+t.map(V2e).join("|")+")","i")}function kf(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function U2e(t,e,r){var n=wn.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function W2e(t,e,r){var n=wn.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function H2e(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function G2e(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function q2e(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function JO(t,e,r){var n=wn.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function eI(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function K2e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function X2e(t,e,r){var n=wn.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Y2e(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function tI(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Z2e(t,e,r){var n=wn.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function rI(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Q2e(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function J2e(t,e,r){var n=wn.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function eAe(t,e,r){var n=wn.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function tAe(t,e,r){var n=wn.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function rAe(t,e,r){var n=B2e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function nAe(t,e,r){var n=wn.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function iAe(t,e,r){var n=wn.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function nI(t,e){return Mt(t.getDate(),e,2)}function aAe(t,e){return Mt(t.getHours(),e,2)}function oAe(t,e){return Mt(t.getHours()%12||12,e,2)}function sAe(t,e){return Mt(1+um.count(qo(t),t),e,3)}function IF(t,e){return Mt(t.getMilliseconds(),e,3)}function cAe(t,e){return IF(t,e)+"000"}function lAe(t,e){return Mt(t.getMonth()+1,e,2)}function uAe(t,e){return Mt(t.getMinutes(),e,2)}function dAe(t,e){return Mt(t.getSeconds(),e,2)}function fAe(t){var e=t.getDay();return e===0?7:e}function hAe(t,e){return Mt(Yy.count(qo(t)-1,t),e,2)}function DF(t){var e=t.getDay();return e>=4||e===0?ld(t):ld.ceil(t)}function pAe(t,e){return t=DF(t),Mt(ld.count(qo(t),t)+(qo(t).getDay()===4),e,2)}function mAe(t){return t.getDay()}function gAe(t,e){return Mt(Hg.count(qo(t)-1,t),e,2)}function vAe(t,e){return Mt(t.getFullYear()%100,e,2)}function yAe(t,e){return t=DF(t),Mt(t.getFullYear()%100,e,2)}function xAe(t,e){return Mt(t.getFullYear()%1e4,e,4)}function bAe(t,e){var r=t.getDay();return t=r>=4||r===0?ld(t):ld.ceil(t),Mt(t.getFullYear()%1e4,e,4)}function wAe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Mt(e/60|0,"0",2)+Mt(e%60,"0",2)}function iI(t,e){return Mt(t.getUTCDate(),e,2)}function AAe(t,e){return Mt(t.getUTCHours(),e,2)}function SAe(t,e){return Mt(t.getUTCHours()%12||12,e,2)}function _Ae(t,e){return Mt(1+Xy.count(Ko(t),t),e,3)}function kF(t,e){return Mt(t.getUTCMilliseconds(),e,3)}function CAe(t,e){return kF(t,e)+"000"}function EAe(t,e){return Mt(t.getUTCMonth()+1,e,2)}function NAe(t,e){return Mt(t.getUTCMinutes(),e,2)}function jAe(t,e){return Mt(t.getUTCSeconds(),e,2)}function TAe(t){var e=t.getUTCDay();return e===0?7:e}function PAe(t,e){return Mt(Zy.count(Ko(t)-1,t),e,2)}function MF(t){var e=t.getUTCDay();return e>=4||e===0?ud(t):ud.ceil(t)}function OAe(t,e){return t=MF(t),Mt(ud.count(Ko(t),t)+(Ko(t).getUTCDay()===4),e,2)}function IAe(t){return t.getUTCDay()}function DAe(t,e){return Mt(Gg.count(Ko(t)-1,t),e,2)}function kAe(t,e){return Mt(t.getUTCFullYear()%100,e,2)}function MAe(t,e){return t=MF(t),Mt(t.getUTCFullYear()%100,e,2)}function RAe(t,e){return Mt(t.getUTCFullYear()%1e4,e,4)}function $Ae(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ud(t):ud.ceil(t),Mt(t.getUTCFullYear()%1e4,e,4)}function LAe(){return"+0000"}function aI(){return"%"}function oI(t){return+t}function sI(t){return Math.floor(+t/1e3)}var Wl,RF,$F;FAe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function FAe(t){return Wl=F2e(t),RF=Wl.format,Wl.parse,$F=Wl.utcFormat,Wl.utcParse,Wl}function BAe(t){return new Date(t)}function zAe(t){return t instanceof Date?+t:+new Date(+t)}function dC(t,e,r,n,i,a,o,s,l,u){var d=Z_(),f=d.invert,h=d.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),y=u("%a %d"),b=u("%b %d"),w=u("%B"),S=u("%Y");function A(_){return(l(_)<_?p:s(_)<_?m:o(_)<_?g:a(_)<_?v:n(_)<_?i(_)<_?y:b:r(_)<_?w:S)(_)}return d.invert=function(_){return new Date(f(_))},d.domain=function(_){return arguments.length?h(Array.from(_,zAe)):h().map(BAe)},d.ticks=function(_){var E=h();return t(E[0],E[E.length-1],_==null?10:_)},d.tickFormat=function(_,E){return E==null?A:u(E)},d.nice=function(_){var E=h();return(!_||typeof _.range!="function")&&(_=e(E[0],E[E.length-1],_==null?10:_)),_?h(SF(E,_)):d},d.copy=function(){return lm(d,dC(t,e,r,n,i,a,o,s,l,u))},d}function VAe(){return oa.apply(dC($2e,L2e,qo,lC,Yy,um,sC,aC,Ic,RF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function UAe(){return oa.apply(dC(M2e,R2e,Ko,uC,Zy,Xy,cC,oC,Ic,$F).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qy(){var t=0,e=1,r,n,i,a,o=ri,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(a(f)-r)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var p,m;return arguments.length?([p,m]=h,o=f(p,m),u):[o(0),o(1)]}}return u.range=d(uf),u.rangeRound=d(Y_),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),u}}function tc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function LF(){var t=ec(Qy()(ri));return t.copy=function(){return tc(t,LF())},Qo.apply(t,arguments)}function FF(){var t=eC(Qy()).domain([1,10]);return t.copy=function(){return tc(t,FF()).base(t.base())},Qo.apply(t,arguments)}function BF(){var t=tC(Qy());return t.copy=function(){return tc(t,BF()).constant(t.constant())},Qo.apply(t,arguments)}function fC(){var t=rC(Qy());return t.copy=function(){return tc(t,fC()).exponent(t.exponent())},Qo.apply(t,arguments)}function WAe(){return fC.apply(null,arguments).exponent(.5)}function zF(){var t=[],e=ri;function r(n){if(n!=null&&!isNaN(n=+n))return e((sm(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ns),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Pwe(t,a/n))},r.copy=function(){return zF(e).domain(t)},Qo.apply(r,arguments)}function Jy(){var t=0,e=.5,r=1,n=1,i,a,o,s,l,u=ri,d,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-a)*(n*g<n*a?s:l),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,r]=g,i=d(t=+t),a=d(e=+e),o=d(r=+r),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),n=a<i?-1:1,p):[t,e,r]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function m(g){return function(v){var y,b,w;return arguments.length?([y,b,w]=v,u=r2e(g,[y,b,w]),p):[u(0),u(.5),u(1)]}}return p.range=m(uf),p.rangeRound=m(Y_),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return d=g,i=g(t),a=g(e),o=g(r),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),n=a<i?-1:1,p}}function VF(){var t=ec(Jy()(ri));return t.copy=function(){return tc(t,VF())},Qo.apply(t,arguments)}function UF(){var t=eC(Jy()).domain([.1,1,10]);return t.copy=function(){return tc(t,UF()).base(t.base())},Qo.apply(t,arguments)}function WF(){var t=tC(Jy());return t.copy=function(){return tc(t,WF()).constant(t.constant())},Qo.apply(t,arguments)}function hC(){var t=rC(Jy());return t.copy=function(){return tc(t,hC()).exponent(t.exponent())},Qo.apply(t,arguments)}function HAe(){return hC.apply(null,arguments).exponent(.5)}const cI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ip,scaleDiverging:VF,scaleDivergingLog:UF,scaleDivergingPow:hC,scaleDivergingSqrt:HAe,scaleDivergingSymlog:WF,scaleIdentity:AF,scaleImplicit:e2,scaleLinear:Ug,scaleLog:_F,scaleOrdinal:q_,scalePoint:yh,scalePow:nC,scaleQuantile:NF,scaleQuantize:jF,scaleRadial:EF,scaleSequential:LF,scaleSequentialLog:FF,scaleSequentialPow:fC,scaleSequentialQuantile:zF,scaleSequentialSqrt:WAe,scaleSequentialSymlog:BF,scaleSqrt:C2e,scaleSymlog:CF,scaleThreshold:TF,scaleTime:VAe,scaleUtc:UAe,tickFormat:wF},Symbol.toStringTag,{value:"Module"}));var GAe=Jd;function qAe(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(o!=null&&(s===void 0?o===o&&!GAe(o):r(o,s)))var s=o,l=a}return l}var ex=qAe;function KAe(t,e){return t>e}var HF=KAe,XAe=ex,YAe=HF,ZAe=lf;function QAe(t){return t&&t.length?XAe(t,ZAe,YAe):void 0}var JAe=QAe;const Ss=er(JAe);function eSe(t,e){return t<e}var GF=eSe,tSe=ex,rSe=GF,nSe=lf;function iSe(t){return t&&t.length?tSe(t,nSe,rSe):void 0}var aSe=iSe;const tx=er(aSe);var oSe=N_,sSe=vo,cSe=eF,lSe=vi;function uSe(t,e){var r=lSe(t)?oSe:cSe;return r(t,sSe(e))}var dSe=uSe,fSe=Q7,hSe=dSe;function pSe(t,e){return fSe(hSe(t,e),1)}var mSe=pSe;const gSe=er(mSe);var vSe=V_;function ySe(t,e){return vSe(t,e)}var xSe=ySe;const dd=er(xSe);var df=1e9,bSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},mC,Sr=!0,ra="[DecimalError] ",Zc=ra+"Invalid argument: ",pC=ra+"Exponent out of range: ",ff=Math.floor,wc=Math.pow,wSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ei,gn=1e7,xr=7,qF=9007199254740991,qg=ff(qF/xr),Me={};Me.absoluteValue=Me.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Me.comparedTo=Me.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Me.decimalPlaces=Me.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*xr;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Me.dividedBy=Me.div=function(t){return Ro(this,new this.constructor(t))};Me.dividedToIntegerBy=Me.idiv=function(t){var e=this,r=e.constructor;return or(Ro(e,new r(t),0,1),r.precision)};Me.equals=Me.eq=function(t){return!this.cmp(t)};Me.exponent=function(){return Yr(this)};Me.greaterThan=Me.gt=function(t){return this.cmp(t)>0};Me.greaterThanOrEqualTo=Me.gte=function(t){return this.cmp(t)>=0};Me.isInteger=Me.isint=function(){return this.e>this.d.length-2};Me.isNegative=Me.isneg=function(){return this.s<0};Me.isPositive=Me.ispos=function(){return this.s>0};Me.isZero=function(){return this.s===0};Me.lessThan=Me.lt=function(t){return this.cmp(t)<0};Me.lessThanOrEqualTo=Me.lte=function(t){return this.cmp(t)<1};Me.logarithm=Me.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Ei))throw Error(ra+"NaN");if(r.s<1)throw Error(ra+(r.s?"NaN":"-Infinity"));return r.eq(Ei)?new n(0):(Sr=!1,e=Ro(lp(r,a),lp(t,a),a),Sr=!0,or(e,i))};Me.minus=Me.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?YF(e,t):KF(e,(t.s=-t.s,t))};Me.modulo=Me.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(ra+"NaN");return r.s?(Sr=!1,e=Ro(r,t,0,1).times(t),Sr=!0,r.minus(e)):or(new n(r),i)};Me.naturalExponential=Me.exp=function(){return XF(this)};Me.naturalLogarithm=Me.ln=function(){return lp(this)};Me.negated=Me.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Me.plus=Me.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?KF(e,t):YF(e,(t.s=-t.s,t))};Me.precision=Me.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Zc+t);if(e=Yr(i)+1,n=i.d.length-1,r=n*xr+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Me.squareRoot=Me.sqrt=function(){var t,e,r,n,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(ra+"NaN")}for(t=Yr(s),Sr=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Ga(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ff((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new l(e)):n=new l(i.toString()),r=l.precision,i=o=r+3;;)if(a=n,n=a.plus(Ro(s,a,o+2)).times(.5),Ga(a.d).slice(0,o)===(e=Ga(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(or(a,r+1,0),a.times(a).eq(s)){n=a;break}}else if(e!="9999")break;o+=4}return Sr=!0,or(n,r)};Me.times=Me.mul=function(t){var e,r,n,i,a,o,s,l,u,d=this,f=d.constructor,h=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,l=h.length,u=p.length,l<u&&(a=h,h=p,p=a,o=l,l=u,u=o),a=[],o=l+u,n=o;n--;)a.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+p[n]*h[i-n-1]+e,a[i--]=s%gn|0,e=s/gn|0;a[i]=(a[i]+e)%gn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,Sr?or(t,f.precision):t};Me.toDecimalPlaces=Me.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(lo(t,0,df),e===void 0?e=n.rounding:lo(e,0,8),or(r,t+Yr(r)+1,e))};Me.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=gl(n,!0):(lo(t,0,df),e===void 0?e=i.rounding:lo(e,0,8),n=or(new i(n),t+1,e),r=gl(n,!0,t+1)),r};Me.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?gl(i):(lo(t,0,df),e===void 0?e=a.rounding:lo(e,0,8),n=or(new a(i),t+Yr(i)+1,e),r=gl(n.abs(),!1,t+Yr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Me.toInteger=Me.toint=function(){var t=this,e=t.constructor;return or(new e(t),Yr(t)+1,e.rounding)};Me.toNumber=function(){return+this};Me.toPower=Me.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,u=12,d=+(t=new l(t));if(!t.s)return new l(Ei);if(s=new l(s),!s.s){if(t.s<1)throw Error(ra+"Infinity");return s}if(s.eq(Ei))return s;if(n=l.precision,t.eq(Ei))return or(s,n);if(e=t.e,r=t.d.length-1,o=e>=r,a=s.s,o){if((r=d<0?-d:d)<=qF){for(i=new l(Ei),e=Math.ceil(n/xr+4),Sr=!1;r%2&&(i=i.times(s),uI(i.d,e)),r=ff(r/2),r!==0;)s=s.times(s),uI(s.d,e);return Sr=!0,t.s<0?new l(Ei).div(i):or(i,n)}}else if(a<0)throw Error(ra+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,s.s=1,Sr=!1,i=t.times(lp(s,n+u)),Sr=!0,i=XF(i),i.s=a,i};Me.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Yr(i),n=gl(i,r<=a.toExpNeg||r>=a.toExpPos)):(lo(t,1,df),e===void 0?e=a.rounding:lo(e,0,8),i=or(new a(i),t,e),r=Yr(i),n=gl(i,t<=r||r<=a.toExpNeg,t)),n};Me.toSignificantDigits=Me.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(lo(t,1,df),e===void 0?e=n.rounding:lo(e,0,8)),or(new n(r),t,e)};Me.toString=Me.valueOf=Me.val=Me.toJSON=Me[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Yr(t),r=t.constructor;return gl(t,e<=r.toExpNeg||e>=r.toExpPos)};function KF(t,e){var r,n,i,a,o,s,l,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Sr?or(e,f):e;if(l=t.d,u=e.d,o=t.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(n=l,a=-a,s=u.length):(n=u,i=o,s=l.length),o=Math.ceil(f/xr),s=o>s?o+1:s+1,a>s&&(a=s,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(s=l.length,a=u.length,s-a<0&&(a=s,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/gn|0,l[a]%=gn;for(r&&(l.unshift(r),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,Sr?or(e,f):e}function lo(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Zc+t)}function Ga(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=xr-n.length,r&&(a+=us(r)),a+=n;o=t[e],n=o+"",r=xr-n.length,r&&(a+=us(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Ro=function(){function t(n,i){var a,o=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+o,n[s]=a%gn|0,o=a/gn|0;return o&&n.unshift(o),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*gn+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o){var s,l,u,d,f,h,p,m,g,v,y,b,w,S,A,_,E,N,T=n.constructor,O=n.s==i.s?1:-1,j=n.d,P=i.d;if(!n.s)return new T(n);if(!i.s)throw Error(ra+"Division by zero");for(l=n.e-i.e,E=P.length,A=j.length,p=new T(O),m=p.d=[],u=0;P[u]==(j[u]||0);)++u;if(P[u]>(j[u]||0)&&--l,a==null?b=a=T.precision:o?b=a+(Yr(n)-Yr(i))+1:b=a,b<0)return new T(0);if(b=b/xr+2|0,u=0,E==1)for(d=0,P=P[0],b++;(u<A||d)&&b--;u++)w=d*gn+(j[u]||0),m[u]=w/P|0,d=w%P|0;else{for(d=gn/(P[0]+1)|0,d>1&&(P=t(P,d),j=t(j,d),E=P.length,A=j.length),S=E,g=j.slice(0,E),v=g.length;v<E;)g[v++]=0;N=P.slice(),N.unshift(0),_=P[0],P[1]>=gn/2&&++_;do d=0,s=e(P,g,E,v),s<0?(y=g[0],E!=v&&(y=y*gn+(g[1]||0)),d=y/_|0,d>1?(d>=gn&&(d=gn-1),f=t(P,d),h=f.length,v=g.length,s=e(f,g,h,v),s==1&&(d--,r(f,E<h?N:P,h))):(d==0&&(s=d=1),f=P.slice()),h=f.length,h<v&&f.unshift(0),r(g,f,v),s==-1&&(v=g.length,s=e(P,g,E,v),s<1&&(d++,r(g,E<v?N:P,v))),v=g.length):s===0&&(d++,g=[0]),m[u++]=d,s&&g[0]?g[v++]=j[S]||0:(g=[j[S]],v=1);while((S++<A||g[0]!==void 0)&&b--)}return m[0]||m.shift(),p.e=l,or(p,o?a+Yr(p)+1:a)}}();function XF(t,e){var r,n,i,a,o,s,l=0,u=0,d=t.constructor,f=d.precision;if(Yr(t)>16)throw Error(pC+Yr(t));if(!t.s)return new d(Ei);for(Sr=!1,s=f,o=new d(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(n=Math.log(wc(2,u))/Math.LN10*2+5|0,s+=n,r=i=a=new d(Ei),d.precision=s;;){if(i=or(i.times(t),s),r=r.times(++l),o=a.plus(Ro(i,r,s)),Ga(o.d).slice(0,s)===Ga(a.d).slice(0,s)){for(;u--;)a=or(a.times(a),s);return d.precision=f,e==null?(Sr=!0,or(a,f)):a}a=o}}function Yr(t){for(var e=t.e*xr,r=t.d[0];r>=10;r/=10)e++;return e}function G1(t,e,r){if(e>t.LN10.sd())throw Sr=!0,r&&(t.precision=r),Error(ra+"LN10 precision limit exceeded");return or(new t(t.LN10),e)}function us(t){for(var e="";t--;)e+="0";return e}function lp(t,e){var r,n,i,a,o,s,l,u,d,f=1,h=10,p=t,m=p.d,g=p.constructor,v=g.precision;if(p.s<1)throw Error(ra+(p.s?"NaN":"-Infinity"));if(p.eq(Ei))return new g(0);if(e==null?(Sr=!1,u=v):u=e,p.eq(10))return e==null&&(Sr=!0),G1(g,u);if(u+=h,g.precision=u,r=Ga(m),n=r.charAt(0),a=Yr(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(t),r=Ga(p.d),n=r.charAt(0),f++;a=Yr(p),n>1?(p=new g("0."+r),a++):p=new g(n+"."+r.slice(1))}else return l=G1(g,u+2,v).times(a+""),p=lp(new g(n+"."+r.slice(1)),u-h).plus(l),g.precision=v,e==null?(Sr=!0,or(p,v)):p;for(s=o=p=Ro(p.minus(Ei),p.plus(Ei),u),d=or(p.times(p),u),i=3;;){if(o=or(o.times(d),u),l=s.plus(Ro(o,new g(i),u)),Ga(l.d).slice(0,u)===Ga(s.d).slice(0,u))return s=s.times(2),a!==0&&(s=s.plus(G1(g,u+2,v).times(a+""))),s=Ro(s,new g(f),u),g.precision=v,e==null?(Sr=!0,or(s,v)):s;s=l,i+=2}}function lI(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=ff(r/xr),t.d=[],n=(r+1)%xr,r<0&&(n+=xr),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=xr;n<i;)t.d.push(+e.slice(n,n+=xr));e=e.slice(n),n=xr-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Sr&&(t.e>qg||t.e<-qg))throw Error(pC+r)}else t.s=0,t.e=0,t.d=[0];return t}function or(t,e,r){var n,i,a,o,s,l,u,d,f=t.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(n=e-o,n<0)n+=xr,i=e,u=f[d=0];else{if(d=Math.ceil((n+1)/xr),a=f.length,d>=a)return t;for(u=a=f[d],o=1;a>=10;a/=10)o++;n%=xr,i=n-xr+o}if(r!==void 0&&(a=wc(10,o-i-1),s=u/a%10|0,l=e<0||f[d+1]!==void 0||u%a,l=r<4?(s||l)&&(r==0||r==(t.s<0?3:2)):s>5||s==5&&(r==4||l||r==6&&(n>0?i>0?u/wc(10,o-i):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return l?(a=Yr(t),f.length=1,e=e-a-1,f[0]=wc(10,(xr-e%xr)%xr),t.e=ff(-e/xr)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=wc(10,xr-n),f[d]=i>0?(u/wc(10,o-i)%wc(10,i)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==gn&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=gn)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Sr&&(t.e>qg||t.e<-qg))throw Error(pC+Yr(t));return t}function YF(t,e){var r,n,i,a,o,s,l,u,d,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Sr?or(e,p):e;if(l=t.d,f=e.d,n=e.e,u=t.e,l=l.slice(),o=u-n,o){for(d=o<0,d?(r=l,o=-o,s=f.length):(r=f,n=u,s=l.length),i=Math.max(Math.ceil(p/xr),s)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=l.length,s=f.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){d=l[i]<f[i];break}o=0}for(d&&(r=l,l=f,f=r,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=gn-1;--l[a],l[i]+=gn}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(e.d=l,e.e=n,Sr?or(e,p):e):new h(0)}function gl(t,e,r){var n,i=Yr(t),a=Ga(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+us(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+us(-i-1)+a,r&&(n=r-o)>0&&(a+=us(n))):i>=o?(a+=us(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+us(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=us(n))),t.s<0?"-"+a:a}function uI(t,e){if(t.length>e)return t.length=e,!0}function ZF(t){var e,r,n;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Zc+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return lI(o,a.toString())}else if(typeof a!="string")throw Error(Zc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,wSe.test(a))lI(o,a);else throw Error(Zc+a)}if(i.prototype=Me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=ZF,i.config=i.set=ASe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function ASe(t){if(!t||typeof t!="object")throw Error(ra+"Object expected");var e,r,n,i=["precision",1,df,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(ff(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Zc+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Zc+r+": "+n);return this}var mC=ZF(bSe);Ei=new mC(1);const ir=mC;function SSe(t){return NSe(t)||ESe(t)||CSe(t)||_Se()}function _Se(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function CSe(t,e){if(t){if(typeof t=="string")return i2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i2(t,e)}}function ESe(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function NSe(t){if(Array.isArray(t))return i2(t)}function i2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var jSe=function(e){return e},QF={},JF=function(e){return e===QF},dI=function(e){return function r(){return arguments.length===0||arguments.length===1&&JF(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},TSe=function t(e,r){return e===1?r:dI(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==QF}).length;return o>=e?r.apply(void 0,i):t(e-o,dI(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var d=i.map(function(f){return JF(f)?l.shift():f});return r.apply(void 0,SSe(d).concat(l))}))})},rx=function(e){return TSe(e.length,e)},a2=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},PSe=rx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),OSe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return jSe;var i=r.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},o2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},e9=function(e){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r&&a.every(function(s,l){return s===r[l]})||(r=a,n=e.apply(void 0,a)),n}};function ISe(t){var e;return t===0?e=1:e=Math.floor(new ir(t).abs().log(10).toNumber())+1,e}function DSe(t,e,r){for(var n=new ir(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var kSe=rx(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),MSe=rx(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),RSe=rx(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const nx={rangeStep:DSe,getDigitCount:ISe,interpolateNumber:kSe,uninterpolateNumber:MSe,uninterpolateTruncation:RSe};function s2(t){return FSe(t)||LSe(t)||t9(t)||$Se()}function $Se(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function LSe(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function FSe(t){if(Array.isArray(t))return c2(t)}function up(t,e){return VSe(t)||zSe(t,e)||t9(t,e)||BSe()}function BSe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t9(t,e){if(t){if(typeof t=="string")return c2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c2(t,e)}}function c2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zSe(t,e){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(l){i=!0,a=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw a}}return r}}function VSe(t){if(Array.isArray(t))return t}function r9(t){var e=up(t,2),r=e[0],n=e[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function n9(t,e,r){if(t.lte(0))return new ir(0);var n=nx.getDigitCount(t.toNumber()),i=new ir(10).pow(n),a=t.div(i),o=n!==1?.05:.1,s=new ir(Math.ceil(a.div(o).toNumber())).add(r).mul(o),l=s.mul(i);return e?l:new ir(Math.ceil(l))}function USe(t,e,r){var n=1,i=new ir(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new ir(10).pow(nx.getDigitCount(t)-1),i=new ir(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new ir(Math.floor(t)))}else t===0?i=new ir(Math.floor((e-1)/2)):r||(i=new ir(Math.floor(t)));var o=Math.floor((e-1)/2),s=OSe(PSe(function(l){return i.add(new ir(l-o).mul(n)).toNumber()}),a2);return s(0,e)}function i9(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new ir(0),tickMin:new ir(0),tickMax:new ir(0)};var a=n9(new ir(e).sub(t).div(r-1),n,i),o;t<=0&&e>=0?o=new ir(0):(o=new ir(t).add(e).div(2),o=o.sub(new ir(o).mod(a)));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new ir(e).sub(o).div(a).toNumber()),u=s+l+1;return u>r?i9(t,e,r,n,i+1):(u<r&&(l=e>0?l+(r-u):l,s=e>0?s:s+(r-u)),{step:a,tickMin:o.sub(new ir(s).mul(a)),tickMax:o.add(new ir(l).mul(a))})}function WSe(t){var e=up(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=r9([r,n]),l=up(s,2),u=l[0],d=l[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(s2(a2(0,i-1).map(function(){return 1/0}))):[].concat(s2(a2(0,i-1).map(function(){return-1/0})),[d]);return r>n?o2(f):f}if(u===d)return USe(u,i,a);var h=i9(u,d,o,a),p=h.step,m=h.tickMin,g=h.tickMax,v=nx.rangeStep(m,g.add(new ir(.1).mul(p)),p);return r>n?o2(v):v}function HSe(t,e){var r=up(t,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=r9([n,i]),s=up(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[n,i];if(l===u)return[l];var d=Math.max(e,2),f=n9(new ir(u).sub(l).div(d-1),a,0),h=[].concat(s2(nx.rangeStep(new ir(l),new ir(u).sub(new ir(.99).mul(f)),f)),[u]);return n>i?o2(h):h}var GSe=e9(WSe),qSe=e9(HSe),KSe="Invariant failed";function vl(t,e){throw new Error(KSe)}var XSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fd(t){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fd(t)}function Kg(){return Kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kg.apply(this,arguments)}function YSe(t,e){return e_e(t)||JSe(t,e)||QSe(t,e)||ZSe()}function ZSe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function QSe(t,e){if(t){if(typeof t=="string")return fI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fI(t,e)}}function fI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function JSe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function e_e(t){if(Array.isArray(t))return t}function t_e(t,e){if(t==null)return{};var r=r_e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r_e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function n_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i_e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s9(n.key),n)}}function a_e(t,e,r){return e&&i_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o_e(t,e,r){return e=Xg(e),s_e(t,a9()?Reflect.construct(e,r||[],Xg(t).constructor):e.apply(t,r))}function s_e(t,e){if(e&&(fd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c_e(t)}function c_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a9=function(){return!!t})()}function Xg(t){return Xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xg(t)}function l_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l2(t,e)}function l2(t,e){return l2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},l2(t,e)}function o9(t,e,r){return e=s9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s9(t){var e=u_e(t,"string");return fd(e)=="symbol"?e:e+""}function u_e(t,e){if(fd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ix=function(t){function e(){return n_e(this,e),o_e(this,e,arguments)}return l_e(e,t),a_e(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,o=n.width,s=n.dataKey,l=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=t_e(n,XSe),p=qe(h,!1);this.props.direction==="x"&&d.type!=="number"&&vl();var m=l.map(function(g){var v=u(g,s),y=v.x,b=v.y,w=v.value,S=v.errorVal;if(!S)return null;var A=[],_,E;if(Array.isArray(S)){var N=YSe(S,2);_=N[0],E=N[1]}else _=E=S;if(a==="vertical"){var T=d.scale,O=b+i,j=O+o,P=O-o,D=T(w-_),F=T(w+E);A.push({x1:F,y1:j,x2:F,y2:P}),A.push({x1:D,y1:O,x2:F,y2:O}),A.push({x1:D,y1:j,x2:D,y2:P})}else if(a==="horizontal"){var I=f.scale,k=y+i,R=k-o,L=k+o,V=I(w-_),W=I(w+E);A.push({x1:R,y1:W,x2:L,y2:W}),A.push({x1:k,y1:V,x2:k,y2:W}),A.push({x1:R,y1:V,x2:L,y2:V})}return $.createElement(Ct,Kg({className:"recharts-errorBar",key:"bar-".concat(A.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},p),A.map(function(q){return $.createElement("line",Kg({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return $.createElement(Ct,{className:"recharts-errorBars"},m)}}])}($.Component);o9(ix,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});o9(ix,"displayName","ErrorBar");function dp(t){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(t)}function hI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hI(Object(r),!0).forEach(function(n){d_e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d_e(t,e,r){return e=f_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f_e(t){var e=h_e(t,"string");return dp(e)=="symbol"?e:e+""}function h_e(t,e){if(dp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c9=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=Ai(r,Xc);if(!o)return null;var s=Xc.defaultProps,l=s!==void 0?lc(lc({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,p=f.props,m=p.sectors||p.data||[];return d.concat(m.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?lc(lc({},h),f.props):{},m=p.dataKey,g=p.name,v=p.legendType,y=p.hide;return{inactive:y,dataKey:m,type:l.iconType||v||"square",color:gC(f),value:g||m,payload:p}}),lc(lc(lc({},l),Xc.getWithHeight(o,i)),{},{payload:u,item:o})};function fp(t){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(t)}function pI(t){return v_e(t)||g_e(t)||m_e(t)||p_e()}function p_e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m_e(t,e){if(t){if(typeof t=="string")return u2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u2(t,e)}}function g_e(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v_e(t){if(Array.isArray(t))return u2(t)}function u2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Or(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mI(Object(r),!0).forEach(function(n){Cu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cu(t,e,r){return e=y_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y_e(t){var e=x_e(t,"string");return fp(e)=="symbol"?e:e+""}function x_e(t,e){if(fp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function on(t,e,r){return dt(t)||dt(e)?r:ln(e)?Di(t,e,r):Ze(e)?e(t):r}function xh(t,e,r,n){var i=gSe(t,function(s){return on(s,e)});if(r==="number"){var a=i.filter(function(s){return we(s)||parseFloat(s)});return a.length?[tx(a),Ss(a)]:[1/0,-1/0]}var o=n?i.filter(function(s){return!dt(s)}):i;return o.map(function(s){return ln(s)||s instanceof Date?s:""})}var b_e=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<s;u++){var d=u>0?i[u-1].coordinate:i[s-1].coordinate,f=i[u].coordinate,h=u>=s-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(ei(f-d)!==ei(h-f)){var m=[];if(ei(h-f)===ei(l[1]-l[0])){p=h;var g=f+l[1]-l[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{p=d;var v=h+l[1]-l[0];m[0]=Math.min(f,(v+f)/2),m[1]=Math.max(f,(v+f)/2)}var y=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>y[0]&&e<=y[1]||e>=m[0]&&e<=m[1]){o=i[u].index;break}}else{var b=Math.min(d,h),w=Math.max(d,h);if(e>(b+f)/2&&e<=(w+f)/2){o=i[u].index;break}}}else for(var S=0;S<s;S++)if(S===0&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<s-1&&e>(n[S].coordinate+n[S-1].coordinate)/2&&e<=(n[S].coordinate+n[S+1].coordinate)/2||S===s-1&&e>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},gC=function(e){var r,n=e,i=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Or(Or({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},w_e=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,u=s.length;l<u;l++)for(var d=a[s[l]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var m=d[f[h]],g=m.items,v=m.cateAxisId,y=g.filter(function(E){return Mo(E.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Or(Or({},b),y[0].props):y[0].props,S=w.barSize,A=w[v];o[A]||(o[A]=[]);var _=dt(S)?r:S;o[A].push({item:y[0],stackList:y.slice(1),barSize:dt(_)?void 0:ti(_,n,0)})}}return o},A_e=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var u=ti(r,i,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,p=i/l,m=o.reduce(function(S,A){return S+A.barSize||0},0);m+=(l-1)*u,m>=i&&(m-=(l-1)*u,u=0),m>=i&&p>0&&(h=!0,p*=.9,m=l*p);var g=(i-m)/2>>0,v={offset:g-u,size:0};d=o.reduce(function(S,A){var _={item:A.item,position:{offset:v.offset+v.size+u,size:h?p:A.barSize}},E=[].concat(pI(S),[_]);return v=E[E.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(N){E.push({item:N,position:v})}),E},f)}else{var y=ti(n,i,0,!0);i-2*y-(l-1)*u<=0&&(u=0);var b=(i-2*y-(l-1)*u)/l;b>1&&(b>>=0);var w=s===+s?Math.min(b,s):b;d=o.reduce(function(S,A,_){var E=[].concat(pI(S),[{item:A.item,position:{offset:y+(b+u)*_+(b-w)/2,size:w}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(N){E.push({item:N,position:E[E.length-1].position})}),E},f)}return d},S_e=function(e,r,n,i){var a=n.children,o=n.width,s=n.margin,l=o-(s.left||0)-(s.right||0),u=c9({children:a,legendWidth:l});if(u){var d=i||{},f=d.width,h=d.height,p=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&we(e[p]))return Or(Or({},e),{},Cu({},p,e[p]+(f||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&we(e[m]))return Or(Or({},e),{},Cu({},m,e[m]+(h||0)))}return e},__e=function(e,r,n){return dt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},l9=function(e,r,n,i,a){var o=r.props.children,s=ea(o,ix).filter(function(u){return __e(i,a,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=on(d,n);if(dt(f))return u;var h=Array.isArray(f)?[tx(f),Ss(f)]:[f,f],p=l.reduce(function(m,g){var v=on(d,g,0),y=h[0]-Math.abs(Array.isArray(v)?v[0]:v),b=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(y,m[0]),Math.max(b,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},C_e=function(e,r,n,i,a){var o=r.map(function(s){return l9(e,s,n,a,i)}).filter(function(s){return!dt(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},u9=function(e,r,n,i,a){var o=r.map(function(l){var u=l.props.dataKey;return n==="number"&&u&&l9(e,l,u,i)||xh(e,u,n,a)});if(n==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var d=0,f=u.length;d<f;d++)s[u[d]]||(s[u[d]]=!0,l.push(u[d]));return l},[])},d9=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},f9=function(e,r,n,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===r&&(a=!0),l.coordinate===n&&(o=!0),l.coordinate});return a||s.push(r),o||s.push(n),s},Po=function(e,r,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?ei(s[0]-s[1])*2*u:u,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=a?a.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!af(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:a?a[f]:f,index:h,offset:u}})},q1=new WeakMap,qm=function(e,r){if(typeof r!="function")return e;q1.has(e)||q1.set(e,new WeakMap);var n=q1.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},h9=function(e,r,n){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:ip(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:Ug(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:yh(),realScaleType:"point"}:a==="category"?{scale:ip(),realScaleType:"band"}:{scale:Ug(),realScaleType:"linear"};if(hl(i)){var l="scale".concat(By(i));return{scale:(cI[l]||yh)(),realScaleType:cI[l]?l:"point"}}return Ze(i)?{scale:i}:{scale:yh(),realScaleType:"point"}},gI=1e-4,p9=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),a=Math.min(i[0],i[1])-gI,o=Math.max(i[0],i[1])+gI,s=e(r[0]),l=e(r[n-1]);(s<a||s>o||l<a||l>o)&&e.domain([r[0],r[n-1]])}},E_e=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},N_e=function(e,r){if(!r||r.length!==2||!we(r[0])||!we(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!we(e[0])||e[0]<n)&&(a[0]=n),(!we(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},j_e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,o=0,s=0;s<r;++s){var l=af(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=a,e[s][n][1]=a+l,a=e[s][n][1]):(e[s][n][0]=o,e[s][n][1]=o+l,o=e[s][n][1])}},T_e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,o=0;o<r;++o){var s=af(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},P_e={sign:j_e,expand:Xhe,none:nd,silhouette:Yhe,wiggle:Zhe,positive:T_e},O_e=function(e,r,n){var i=r.map(function(s){return s.props.dataKey}),a=P_e[n],o=Khe().keys(i).value(function(s,l){return+on(s,l,0)}).order(kw).offset(a);return o(e)},I_e=function(e,r,n,i,a,o){if(!e)return null;var s=o?r.reverse():r,l={},u=s.reduce(function(f,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Or(Or({},h.type.defaultProps),h.props):h.props,g=m.stackId,v=m.hide;if(v)return f;var y=m[n],b=f[y]||{hasStack:!1,stackGroups:{}};if(ln(g)){var w=b.stackGroups[g]||{numericAxisId:n,cateAxisId:i,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[g]=w}else b.stackGroups[of("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return Or(Or({},f),{},Cu({},y,b))},l),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,v){var y=p.stackGroups[v];return Or(Or({},g),{},Cu({},v,{numericAxisId:n,cateAxisId:i,items:y.items,stackedData:O_e(e,y.items,a)}))},m)}return Or(Or({},f),{},Cu({},h,p))},d)},m9=function(e,r){var n=r.realScaleType,i=r.type,a=r.tickCount,o=r.originalDomain,s=r.allowDecimals,l=n||r.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=GSe(u,a,s);return e.domain([tx(d),Ss(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),h=qSe(f,a,s);return{niceTicks:h}}return null};function vI(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!dt(i[e.dataKey])){var s=Ag(r,"value",i[e.dataKey]);if(s)return s.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=on(i,dt(o)?e.dataKey:o);return dt(l)?null:e.scale(l)}var yI=function(e){var r=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(r.type==="category")return n[s]?n[s].coordinate+i:null;var l=on(o,r.dataKey,r.domain[s]);return dt(l)?null:r.scale(l)-a/2+i},D_e=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},k_e=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Or(Or({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(ln(a)){var o=r[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},M_e=function(e){return e.reduce(function(r,n){return[tx(n.concat([r[0]]).filter(we)),Ss(n.concat([r[1]]).filter(we))]},[1/0,-1/0])},g9=function(e,r,n){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(u,d){var f=M_e(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},xI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,d2=function(e,r,n){if(Ze(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(we(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(xI.test(e[0])){var a=+xI.exec(e[0])[1];i[0]=r[0]-a}else Ze(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(we(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(bI.test(e[1])){var o=+bI.exec(e[1])[1];i[1]=r[1]+o}else Ze(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},Yg=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var a=W_(r,function(f){return f.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var u=a[s],d=a[s-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},wI=function(e,r,n){return!e||!e.length||dd(e,Di(n,"type.defaultProps.domain"))?r:e},v9=function(e,r){var n=e.type.defaultProps?Or(Or({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,o=n.unit,s=n.formatter,l=n.tooltipType,u=n.chartType,d=n.hide;return Or(Or({},qe(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:gC(e),value:on(r,i),type:l,payload:r,chartType:u,hide:d})};function hp(t){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hp(t)}function AI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Co(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AI(Object(r),!0).forEach(function(n){y9(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y9(t,e,r){return e=R_e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R_e(t){var e=$_e(t,"string");return hp(e)=="symbol"?e:e+""}function $_e(t,e){if(hp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L_e(t,e){return V_e(t)||z_e(t,e)||B_e(t,e)||F_e()}function F_e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B_e(t,e){if(t){if(typeof t=="string")return SI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SI(t,e)}}function SI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z_e(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function V_e(t){if(Array.isArray(t))return t}var Zg=Math.PI/180,U_e=function(e){return e*180/Math.PI},dr=function(e,r,n,i){return{x:e+Math.cos(-Zg*i)*n,y:r+Math.sin(-Zg*i)*n}},x9=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},W_e=function(e,r,n,i,a){var o=e.width,s=e.height,l=e.startAngle,u=e.endAngle,d=ti(e.cx,o,o/2),f=ti(e.cy,s,s/2),h=x9(o,s,n),p=ti(e.innerRadius,h,0),m=ti(e.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(v,y){var b=r[y],w=b.domain,S=b.reversed,A;if(dt(b.range))i==="angleAxis"?A=[l,u]:i==="radiusAxis"&&(A=[p,m]),S&&(A=[A[1],A[0]]);else{A=b.range;var _=A,E=L_e(_,2);l=E[0],u=E[1]}var N=h9(b,a),T=N.realScaleType,O=N.scale;O.domain(w).range(A),p9(O);var j=m9(O,Co(Co({},b),{},{realScaleType:T})),P=Co(Co(Co({},b),j),{},{range:A,radius:m,realScaleType:T,scale:O,cx:d,cy:f,innerRadius:p,outerRadius:m,startAngle:l,endAngle:u});return Co(Co({},v),{},y9({},y,P))},{})},H_e=function(e,r){var n=e.x,i=e.y,a=r.x,o=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-o,2))},G_e=function(e,r){var n=e.x,i=e.y,a=r.cx,o=r.cy,s=H_e({x:n,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(n-a)/s,u=Math.acos(l);return i>o&&(u=2*Math.PI-u),{radius:s,angle:U_e(u),angleInRadian:u}},q_e=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),o=Math.min(i,a);return{startAngle:r-o*360,endAngle:n-o*360}},K_e=function(e,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},_I=function(e,r){var n=e.x,i=e.y,a=G_e({x:n,y:i},r),o=a.radius,s=a.angle,l=r.innerRadius,u=r.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var d=q_e(r),f=d.startAngle,h=d.endAngle,p=s,m;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}return m?Co(Co({},r),{},{radius:o,angle:K_e(p,r)}):null},b9=function(e){return!x.isValidElement(e)&&!Ze(e)&&typeof e!="boolean"?e.className:""};function pp(t){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(t)}var X_e=["offset"];function Y_e(t){return eCe(t)||J_e(t)||Q_e(t)||Z_e()}function Z_e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Q_e(t,e){if(t){if(typeof t=="string")return f2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f2(t,e)}}function J_e(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function eCe(t){if(Array.isArray(t))return f2(t)}function f2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tCe(t,e){if(t==null)return{};var r=rCe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function rCe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function CI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CI(Object(r),!0).forEach(function(n){nCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nCe(t,e,r){return e=iCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iCe(t){var e=aCe(t,"string");return pp(e)=="symbol"?e:e+""}function aCe(t,e){if(pp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mp(){return mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mp.apply(this,arguments)}var oCe=function(e){var r=e.value,n=e.formatter,i=dt(e.children)?r:e.children;return Ze(n)?n(i):i},sCe=function(e,r){var n=ei(r-e),i=Math.min(Math.abs(r-e),360);return n*i},cCe=function(e,r,n){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,u=l.cx,d=l.cy,f=l.innerRadius,h=l.outerRadius,p=l.startAngle,m=l.endAngle,g=l.clockWise,v=(f+h)/2,y=sCe(p,m),b=y>=0?1:-1,w,S;i==="insideStart"?(w=p+b*o,S=g):i==="insideEnd"?(w=m-b*o,S=!g):i==="end"&&(w=m+b*o,S=g),S=y<=0?S:!S;var A=dr(u,d,v,w),_=dr(u,d,v,w+(S?1:-1)*359),E="M".concat(A.x,",").concat(A.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(S?0:1,",\n    ").concat(_.x,",").concat(_.y),N=dt(e.id)?of("recharts-radial-line-"):e.id;return $.createElement("text",mp({},n,{dominantBaseline:"central",className:ut("recharts-radial-bar-label",s)}),$.createElement("defs",null,$.createElement("path",{id:N,d:E})),$.createElement("textPath",{xlinkHref:"#".concat(N)},r))},lCe=function(e){var r=e.viewBox,n=e.offset,i=e.position,a=r,o=a.cx,s=a.cy,l=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,h=(d+f)/2;if(i==="outside"){var p=dr(o,s,u+n,h),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,y=dr(o,s,v,h),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},uCe=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,o=r,s=o.x,l=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*i,p=f>0?"end":"start",m=f>0?"start":"end",g=u>=0?1:-1,v=g*i,y=g>0?"end":"start",b=g>0?"start":"end";if(a==="top"){var w={x:s+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:p};return Qr(Qr({},w),n?{height:Math.max(l-n.y,0),width:u}:{})}if(a==="bottom"){var S={x:s+u/2,y:l+d+h,textAnchor:"middle",verticalAnchor:m};return Qr(Qr({},S),n?{height:Math.max(n.y+n.height-(l+d),0),width:u}:{})}if(a==="left"){var A={x:s-v,y:l+d/2,textAnchor:y,verticalAnchor:"middle"};return Qr(Qr({},A),n?{width:Math.max(A.x-n.x,0),height:d}:{})}if(a==="right"){var _={x:s+u+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"};return Qr(Qr({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:d}:{})}var E=n?{width:u,height:d}:{};return a==="insideLeft"?Qr({x:s+v,y:l+d/2,textAnchor:b,verticalAnchor:"middle"},E):a==="insideRight"?Qr({x:s+u-v,y:l+d/2,textAnchor:y,verticalAnchor:"middle"},E):a==="insideTop"?Qr({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:m},E):a==="insideBottom"?Qr({x:s+u/2,y:l+d-h,textAnchor:"middle",verticalAnchor:p},E):a==="insideTopLeft"?Qr({x:s+v,y:l+h,textAnchor:b,verticalAnchor:m},E):a==="insideTopRight"?Qr({x:s+u-v,y:l+h,textAnchor:y,verticalAnchor:m},E):a==="insideBottomLeft"?Qr({x:s+v,y:l+d-h,textAnchor:b,verticalAnchor:p},E):a==="insideBottomRight"?Qr({x:s+u-v,y:l+d-h,textAnchor:y,verticalAnchor:p},E):ef(a)&&(we(a.x)||Pc(a.x))&&(we(a.y)||Pc(a.y))?Qr({x:s+ti(a.x,u),y:l+ti(a.y,d),textAnchor:"end",verticalAnchor:"end"},E):Qr({x:s+u/2,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},E)},dCe=function(e){return"cx"in e&&we(e.cx)};function vn(t){var e=t.offset,r=e===void 0?5:e,n=tCe(t,X_e),i=Qr({offset:r},n),a=i.viewBox,o=i.position,s=i.value,l=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!a||dt(s)&&dt(l)&&!x.isValidElement(u)&&!Ze(u))return null;if(x.isValidElement(u))return x.cloneElement(u,i);var p;if(Ze(u)){if(p=x.createElement(u,i),x.isValidElement(p))return p}else p=oCe(i);var m=dCe(a),g=qe(i,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return cCe(i,p,g);var v=m?lCe(i):uCe(i);return $.createElement(ml,mp({className:ut("recharts-label",f)},g,v,{breakAll:h}),p)}vn.displayName="Label";var w9=function(e){var r=e.cx,n=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,p=e.top,m=e.left,g=e.width,v=e.height,y=e.clockWise,b=e.labelViewBox;if(b)return b;if(we(g)&&we(v)){if(we(f)&&we(h))return{x:f,y:h,width:g,height:v};if(we(p)&&we(m))return{x:p,y:m,width:g,height:v}}return we(f)&&we(h)?{x:f,y:h,width:0,height:0}:we(r)&&we(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||l||s||0,clockWise:y}:e.viewBox?e.viewBox:{}},fCe=function(e,r){return e?e===!0?$.createElement(vn,{key:"label-implicit",viewBox:r}):ln(e)?$.createElement(vn,{key:"label-implicit",viewBox:r,value:e}):x.isValidElement(e)?e.type===vn?x.cloneElement(e,{key:"label-implicit",viewBox:r}):$.createElement(vn,{key:"label-implicit",content:e,viewBox:r}):Ze(e)?$.createElement(vn,{key:"label-implicit",content:e,viewBox:r}):ef(e)?$.createElement(vn,mp({viewBox:r},e,{key:"label-implicit"})):null:null},hCe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=w9(e),o=ea(i,vn).map(function(l,u){return x.cloneElement(l,{viewBox:r||a,key:"label-".concat(u)})});if(!n)return o;var s=fCe(e.label,r||a);return[s].concat(Y_e(o))};vn.parseViewBox=w9;vn.renderCallByParent=hCe;function pCe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var mCe=pCe;const gCe=er(mCe);function gp(t){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gp(t)}var vCe=["valueAccessor"],yCe=["data","dataKey","clockWise","id","textBreakAll"];function xCe(t){return SCe(t)||ACe(t)||wCe(t)||bCe()}function bCe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wCe(t,e){if(t){if(typeof t=="string")return h2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h2(t,e)}}function ACe(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SCe(t){if(Array.isArray(t))return h2(t)}function h2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qg.apply(this,arguments)}function EI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function NI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EI(Object(r),!0).forEach(function(n){_Ce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _Ce(t,e,r){return e=CCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CCe(t){var e=ECe(t,"string");return gp(e)=="symbol"?e:e+""}function ECe(t,e){if(gp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jI(t,e){if(t==null)return{};var r=NCe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function NCe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var jCe=function(e){return Array.isArray(e.value)?gCe(e.value):e.value};function $o(t){var e=t.valueAccessor,r=e===void 0?jCe:e,n=jI(t,vCe),i=n.data,a=n.dataKey,o=n.clockWise,s=n.id,l=n.textBreakAll,u=jI(n,yCe);return!i||!i.length?null:$.createElement(Ct,{className:"recharts-label-list"},i.map(function(d,f){var h=dt(a)?r(d,f):on(d&&d.payload,a),p=dt(s)?{}:{id:"".concat(s,"-").concat(f)};return $.createElement(vn,Qg({},qe(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:vn.parseViewBox(dt(o)?d:NI(NI({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}$o.displayName="LabelList";function TCe(t,e){return t?t===!0?$.createElement($o,{key:"labelList-implicit",data:e}):$.isValidElement(t)||Ze(t)?$.createElement($o,{key:"labelList-implicit",data:e,content:t}):ef(t)?$.createElement($o,Qg({data:e},t,{key:"labelList-implicit"})):null:null}function PCe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=ea(n,$o).map(function(o,s){return x.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!r)return i;var a=TCe(t.label,e);return[a].concat(xCe(i))}$o.renderCallByParent=PCe;function vp(t){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(t)}function p2(){return p2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p2.apply(this,arguments)}function TI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function PI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TI(Object(r),!0).forEach(function(n){OCe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function OCe(t,e,r){return e=ICe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ICe(t){var e=DCe(t,"string");return vp(e)=="symbol"?e:e+""}function DCe(t,e){if(vp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kCe=function(e,r){var n=ei(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},Km=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,d=l*(s?1:-1)+i,f=Math.asin(l/d)/Zg,h=u?a:a+o*f,p=dr(r,n,d,h),m=dr(r,n,i,h),g=u?a-o*f:a,v=dr(r,n,d*Math.cos(f*Zg),g);return{center:p,circleTangency:m,lineTangency:v,theta:f}},A9=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=kCe(o,s),u=o+l,d=dr(r,n,a,o),f=dr(r,n,a,u),h="M ".concat(d.x,",").concat(d.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(l)>180),",").concat(+(o>u),",\n    ").concat(f.x,",").concat(f.y,"\n  ");if(i>0){var p=dr(r,n,i,o),m=dr(r,n,i,u);h+="L ".concat(m.x,",").concat(m.y,"\n            A ").concat(i,",").concat(i,",0,\n            ").concat(+(Math.abs(l)>180),",").concat(+(o<=u),",\n            ").concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},MCe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=ei(d-u),h=Km({cx:r,cy:n,radius:a,angle:u,sign:f,cornerRadius:o,cornerIsExternal:l}),p=h.circleTangency,m=h.lineTangency,g=h.theta,v=Km({cx:r,cy:n,radius:a,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:l}),y=v.circleTangency,b=v.lineTangency,w=v.theta,S=l?Math.abs(u-d):Math.abs(u-d)-g-w;if(S<0)return s?"M ".concat(m.x,",").concat(m.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(o*2,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(-o*2,",0\n      "):A9({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var A="M ".concat(m.x,",").concat(m.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,"\n  ");if(i>0){var _=Km({cx:r,cy:n,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=_.circleTangency,N=_.lineTangency,T=_.theta,O=Km({cx:r,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),j=O.circleTangency,P=O.lineTangency,D=O.theta,F=l?Math.abs(u-d):Math.abs(u-d)-T-D;if(F<0&&o===0)return"".concat(A,"L").concat(r,",").concat(n,"Z");A+="L".concat(P.x,",").concat(P.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,"\n      A").concat(i,",").concat(i,",0,").concat(+(F>180),",").concat(+(f>0),",").concat(E.x,",").concat(E.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,"Z")}else A+="L".concat(r,",").concat(n,"Z");return A},RCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},S9=function(e){var r=PI(PI({},RCe),e),n=r.cx,i=r.cy,a=r.innerRadius,o=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<a||d===f)return null;var p=ut("recharts-sector",h),m=o-a,g=ti(s,m,0,!0),v;return g>0&&Math.abs(d-f)<360?v=MCe({cx:n,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:f}):v=A9({cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:d,endAngle:f}),$.createElement("path",p2({},qe(r,!0),{className:p,d:v,role:"img"}))};function yp(t){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yp(t)}function m2(){return m2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m2.apply(this,arguments)}function OI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function II(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OI(Object(r),!0).forEach(function(n){$Ce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $Ce(t,e,r){return e=LCe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LCe(t){var e=FCe(t,"string");return yp(e)=="symbol"?e:e+""}function FCe(t,e){if(yp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DI={curveBasisClosed:$he,curveBasisOpen:Lhe,curveBasis:Rhe,curveBumpX:Ahe,curveBumpY:She,curveLinearClosed:Fhe,curveLinear:Vy,curveMonotoneX:Bhe,curveMonotoneY:zhe,curveNatural:Vhe,curveStep:Uhe,curveStepAfter:Hhe,curveStepBefore:Whe},Xm=function(e){return e.x===+e.x&&e.y===+e.y},Mf=function(e){return e.x},Rf=function(e){return e.y},BCe=function(e,r){if(Ze(e))return e;var n="curve".concat(By(e));return(n==="curveMonotone"||n==="curveBump")&&r?DI["".concat(n).concat(r==="vertical"?"Y":"X")]:DI[n]||Vy},zCe=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,u=l===void 0?!1:l,d=BCe(n,s),f=u?a.filter(function(g){return Xm(g)}):a,h;if(Array.isArray(o)){var p=u?o.filter(function(g){return Xm(g)}):o,m=f.map(function(g,v){return II(II({},g),{},{base:p[v]})});return s==="vertical"?h=Fm().y(Rf).x1(Mf).x0(function(g){return g.base.x}):h=Fm().x(Mf).y1(Rf).y0(function(g){return g.base.y}),h.defined(Xm).curve(d),h(m)}return s==="vertical"&&we(o)?h=Fm().y(Rf).x1(Mf).x0(o):we(o)?h=Fm().x(Mf).y1(Rf).y0(o):h=v7().x(Mf).y(Rf),h.defined(Xm).curve(d),h(f)},Eu=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?zCe(e):i;return x.createElement("path",m2({},qe(e,!1),Sg(e),{className:ut("recharts-curve",r),d:o,ref:a}))},_9={exports:{}},VCe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UCe=VCe,WCe=UCe;function C9(){}function E9(){}E9.resetWarningCache=C9;var HCe=function(){function t(n,i,a,o,s,l){if(l!==WCe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:E9,resetWarningCache:C9};return r.PropTypes=r,r};_9.exports=HCe();var GCe=_9.exports;const zt=er(GCe);var qCe=Object.getOwnPropertyNames,KCe=Object.getOwnPropertySymbols,XCe=Object.prototype.hasOwnProperty;function kI(t,e){return function(n,i,a){return t(n,i,a)&&e(n,i,a)}}function Ym(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var a=i.cache,o=a.get(r),s=a.get(n);if(o&&s)return o===n&&s===r;a.set(r,n),a.set(n,r);var l=t(r,n,i);return a.delete(r),a.delete(n),l}}function MI(t){return qCe(t).concat(KCe(t))}var YCe=Object.hasOwn||function(t,e){return XCe.call(t,e)};function Ol(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var ZCe="__v",QCe="__o",JCe="_owner",RI=Object.getOwnPropertyDescriptor,$I=Object.keys;function eEe(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function tEe(t,e){return Ol(t.getTime(),e.getTime())}function rEe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function nEe(t,e){return t===e}function LI(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),a=t.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var u=e.entries(),d=!1,f=0;(s=u.next())&&!s.done;){if(i[f]){f++;continue}var h=o.value,p=s.value;if(r.equals(h[0],p[0],l,f,t,e,r)&&r.equals(h[1],p[1],h[0],p[0],t,e,r)){d=i[f]=!0;break}f++}if(!d)return!1;l++}return!0}var iEe=Ol;function aEe(t,e,r){var n=$I(t),i=n.length;if($I(e).length!==i)return!1;for(;i-- >0;)if(!N9(t,e,r,n[i]))return!1;return!0}function $f(t,e,r){var n=MI(t),i=n.length;if(MI(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=n[i],!N9(t,e,r,a)||(o=RI(t,a),s=RI(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function oEe(t,e){return Ol(t.valueOf(),e.valueOf())}function sEe(t,e){return t.source===e.source&&t.flags===e.flags}function FI(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),a=t.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),u=!1,d=0;(s=l.next())&&!s.done;){if(!i[d]&&r.equals(o.value,s.value,o.value,s.value,t,e,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function cEe(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function lEe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function N9(t,e,r,n){return(n===JCe||n===QCe||n===ZCe)&&(t.$$typeof||e.$$typeof)?!0:YCe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var uEe="[object Arguments]",dEe="[object Boolean]",fEe="[object Date]",hEe="[object Error]",pEe="[object Map]",mEe="[object Number]",gEe="[object Object]",vEe="[object RegExp]",yEe="[object Set]",xEe="[object String]",bEe="[object URL]",wEe=Array.isArray,BI=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,zI=Object.assign,AEe=Object.prototype.toString.call.bind(Object.prototype.toString);function SEe(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,s=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(m,g,v){if(m===g)return!0;if(m==null||g==null)return!1;var y=typeof m;if(y!==typeof g)return!1;if(y!=="object")return y==="number"?o(m,g,v):y==="function"?i(m,g,v):!1;var b=m.constructor;if(b!==g.constructor)return!1;if(b===Object)return s(m,g,v);if(wEe(m))return e(m,g,v);if(BI!=null&&BI(m))return f(m,g,v);if(b===Date)return r(m,g,v);if(b===RegExp)return u(m,g,v);if(b===Map)return a(m,g,v);if(b===Set)return d(m,g,v);var w=AEe(m);return w===fEe?r(m,g,v):w===vEe?u(m,g,v):w===pEe?a(m,g,v):w===yEe?d(m,g,v):w===gEe?typeof m.then!="function"&&typeof g.then!="function"&&s(m,g,v):w===bEe?h(m,g,v):w===hEe?n(m,g,v):w===uEe?s(m,g,v):w===dEe||w===mEe||w===xEe?l(m,g,v):!1}}function _Ee(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?$f:eEe,areDatesEqual:tEe,areErrorsEqual:rEe,areFunctionsEqual:nEe,areMapsEqual:n?kI(LI,$f):LI,areNumbersEqual:iEe,areObjectsEqual:n?$f:aEe,arePrimitiveWrappersEqual:oEe,areRegExpsEqual:sEe,areSetsEqual:n?kI(FI,$f):FI,areTypedArraysEqual:n?$f:cEe,areUrlsEqual:lEe};if(r&&(i=zI({},i,r(i))),e){var a=Ym(i.areArraysEqual),o=Ym(i.areMapsEqual),s=Ym(i.areObjectsEqual),l=Ym(i.areSetsEqual);i=zI({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function CEe(t){return function(e,r,n,i,a,o,s){return t(e,r,s)}}function EEe(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,a=t.strict;if(n)return function(l,u){var d=n(),f=d.cache,h=f===void 0?e?new WeakMap:void 0:f,p=d.meta;return r(l,u,{cache:h,equals:i,meta:p,strict:a})};if(e)return function(l,u){return r(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return r(l,u,o)}}var NEe=rc();rc({strict:!0});rc({circular:!0});rc({circular:!0,strict:!0});rc({createInternalComparator:function(){return Ol}});rc({strict:!0,createInternalComparator:function(){return Ol}});rc({circular:!0,createInternalComparator:function(){return Ol}});rc({circular:!0,createInternalComparator:function(){return Ol},strict:!0});function rc(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,s=_Ee(t),l=SEe(s),u=n?n(l):CEe(l);return EEe({circular:r,comparator:l,createState:i,equals:u,strict:o})}function jEe(t){typeof requestAnimationFrame!="undefined"&&requestAnimationFrame(t)}function VI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):jEe(i)};requestAnimationFrame(n)}function g2(t){"@babel/helpers - typeof";return g2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g2(t)}function TEe(t){return DEe(t)||IEe(t)||OEe(t)||PEe()}function PEe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function OEe(t,e){if(t){if(typeof t=="string")return UI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UI(t,e)}}function UI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function IEe(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DEe(t){if(Array.isArray(t))return t}function kEe(){var t={},e=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,s=TEe(o),l=s[0],u=s.slice(1);if(typeof l=="number"){VI(i.bind(null,u),l);return}i(l),VI(i.bind(null,u));return}g2(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function xp(t){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xp(t)}function WI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WI(Object(r),!0).forEach(function(n){j9(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j9(t,e,r){return e=MEe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MEe(t){var e=REe(t,"string");return xp(e)==="symbol"?e:String(e)}function REe(t,e){if(xp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Ee=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},LEe=function(e){return e},FEe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},bh=function(e,r){return Object.keys(r).reduce(function(n,i){return HI(HI({},n),{},j9({},i,e(i,r[i])))},{})},GI=function(e,r,n){return e.map(function(i){return"".concat(FEe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function BEe(t,e){return UEe(t)||VEe(t,e)||T9(t,e)||zEe()}function zEe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function VEe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function UEe(t){if(Array.isArray(t))return t}function WEe(t){return qEe(t)||GEe(t)||T9(t)||HEe()}function HEe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T9(t,e){if(t){if(typeof t=="string")return v2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v2(t,e)}}function GEe(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qEe(t){if(Array.isArray(t))return v2(t)}function v2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Jg=1e-4,P9=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},O9=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},qI=function(e,r){return function(n){var i=P9(e,r);return O9(i,n)}},KEe=function(e,r){return function(n){var i=P9(e,r),a=[].concat(WEe(i.map(function(o,s){return o*s}).slice(1)),[0]);return O9(a,n)}},KI=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],a=r[1],o=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=r[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=BEe(u,4);i=d[0],a=d[1],o=d[2],s=d[3]}}}var f=qI(i,o),h=qI(a,s),p=KEe(i,o),m=function(y){return y>1?1:y<0?0:y},g=function(y){for(var b=y>1?1:y,w=b,S=0;S<8;++S){var A=f(w)-b,_=p(w);if(Math.abs(A-b)<Jg||_<Jg)return h(w);w=m(w-A/_)}return h(w)};return g.isStepper=!1,g},XEe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(d,f,h){var p=-(d-f)*n,m=h*a,g=h+(p-m)*s/1e3,v=h*s/1e3+d;return Math.abs(v-f)<Jg&&Math.abs(g)<Jg?[f,0]:[v,g]};return l.isStepper=!0,l.dt=s,l},YEe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return KI(i);case"spring":return XEe();default:if(i.split("(")[0]==="cubic-bezier")return KI(i)}return typeof i=="function"?i:null};function bp(t){"@babel/helpers - typeof";return bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bp(t)}function XI(t){return JEe(t)||QEe(t)||I9(t)||ZEe()}function ZEe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function QEe(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JEe(t){if(Array.isArray(t))return x2(t)}function YI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YI(Object(r),!0).forEach(function(n){y2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function y2(t,e,r){return e=eNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eNe(t){var e=tNe(t,"string");return bp(e)==="symbol"?e:String(e)}function tNe(t,e){if(bp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rNe(t,e){return aNe(t)||iNe(t,e)||I9(t,e)||nNe()}function nNe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I9(t,e){if(t){if(typeof t=="string")return x2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x2(t,e)}}function x2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iNe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function aNe(t){if(Array.isArray(t))return t}var ev=function(e,r,n){return e+(r-e)*n},b2=function(e){var r=e.from,n=e.to;return r!==n},oNe=function t(e,r,n){var i=bh(function(a,o){if(b2(o)){var s=e(o.from,o.to,o.velocity),l=rNe(s,2),u=l[0],d=l[1];return En(En({},o),{},{from:u,velocity:d})}return o},r);return n<1?bh(function(a,o){return b2(o)?En(En({},o),{},{velocity:ev(o.velocity,i[a].velocity,n),from:ev(o.from,i[a].from,n)}):o},r):t(e,i,n-1)};const sNe=function(t,e,r,n,i){var a=$Ee(t,e),o=a.reduce(function(v,y){return En(En({},v),{},y2({},y,[t[y],e[y]]))},{}),s=a.reduce(function(v,y){return En(En({},v),{},y2({},y,{from:t[y],velocity:0,to:e[y]}))},{}),l=-1,u,d,f=function(){return null},h=function(){return bh(function(y,b){return b.from},s)},p=function(){return!Object.values(s).filter(b2).length},m=function(y){u||(u=y);var b=y-u,w=b/r.dt;s=oNe(r,s,w),i(En(En(En({},t),e),h())),u=y,p()||(l=requestAnimationFrame(f))},g=function(y){d||(d=y);var b=(y-d)/n,w=bh(function(A,_){return ev.apply(void 0,XI(_).concat([r(b)]))},o);if(i(En(En(En({},t),e),w)),b<1)l=requestAnimationFrame(f);else{var S=bh(function(A,_){return ev.apply(void 0,XI(_).concat([r(1)]))},o);i(En(En(En({},t),e),S))}};return f=r.isStepper?m:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function hd(t){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hd(t)}var cNe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function lNe(t,e){if(t==null)return{};var r=uNe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uNe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function K1(t){return pNe(t)||hNe(t)||fNe(t)||dNe()}function dNe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fNe(t,e){if(t){if(typeof t=="string")return w2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w2(t,e)}}function hNe(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pNe(t){if(Array.isArray(t))return w2(t)}function w2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ZI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ca(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZI(Object(r),!0).forEach(function(n){eh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eh(t,e,r){return e=D9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gNe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D9(n.key),n)}}function vNe(t,e,r){return e&&gNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function D9(t){var e=yNe(t,"string");return hd(e)==="symbol"?e:String(e)}function yNe(t,e){if(hd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A2(t,e)}function A2(t,e){return A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},A2(t,e)}function bNe(t){var e=wNe();return function(){var n=tv(t),i;if(e){var a=tv(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S2(this,i)}}function S2(t,e){if(e&&(hd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _2(t)}function _2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wNe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function tv(t){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tv(t)}var uo=function(t){xNe(r,t);var e=bNe(r);function r(n,i){var a;mNe(this,r),a=e.call(this,n,i);var o=a.props,s=o.isActive,l=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,p=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(_2(a)),a.changeStyle=a.changeStyle.bind(_2(a)),!s||p<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:d}),S2(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof h=="function")return a.state={style:u},S2(a);a.state={style:l?eh({},l,u):u}}else a.state={style:{}};return a}return vNe(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,h=this.state.style;if(s){if(!o){var p={style:l?eh({},l,d):d};this.state&&h&&(l&&h[l]!==d||!l&&h!==d)&&this.setState(p);return}if(!(NEe(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?f:i.to;if(this.state&&h){var v={style:l?eh({},l,g):g};(l&&h[l]!==g||!l&&h!==g)&&this.setState(v)}this.runAnimation(ca(ca({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=sNe(o,s,YEe(u),l,this.changeStyle),m=function(){a.stopJSAnimation=p()};this.manager.start([h,d,m,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(g,v,y){if(y===0)return g;var b=v.duration,w=v.easing,S=w===void 0?"ease":w,A=v.style,_=v.properties,E=v.onAnimationEnd,N=y>0?o[y-1]:v,T=_||Object.keys(A);if(typeof S=="function"||S==="spring")return[].concat(K1(g),[a.runJSAnimation.bind(a,{from:N.style,to:A,duration:b,easing:S}),b]);var O=GI(T,b,S),j=ca(ca(ca({},N.style),A),{},{transition:O});return[].concat(K1(g),[j,b,E]).filter(LEe)};return this.manager.start([l].concat(K1(o.reduce(p,[d,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=kEe());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=s?eh({},s,l):l,v=GI(Object.keys(g),o,u);m.start([d,a,ca(ca({},g),{},{transition:v}),o,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=lNe(i,cNe),u=x.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!s||u===0||o<=0)return a;var f=function(p){var m=p.props,g=m.style,v=g===void 0?{}:g,y=m.className,b=x.cloneElement(p,ca(ca({},l),{},{style:ca(ca({},v),d),className:y}));return b};return u===1?f(x.Children.only(a)):$.createElement("div",null,x.Children.map(a,function(h){return f(h)}))}}]),r}(x.PureComponent);uo.displayName="Animate";uo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};uo.propTypes={from:zt.oneOfType([zt.object,zt.string]),to:zt.oneOfType([zt.object,zt.string]),attributeName:zt.string,duration:zt.number,begin:zt.number,easing:zt.oneOfType([zt.string,zt.func]),steps:zt.arrayOf(zt.shape({duration:zt.number.isRequired,style:zt.object.isRequired,easing:zt.oneOfType([zt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),zt.func]),properties:zt.arrayOf("string"),onAnimationEnd:zt.func})),children:zt.oneOfType([zt.node,zt.func]),isActive:zt.bool,canBegin:zt.bool,onAnimationEnd:zt.func,shouldReAnimate:zt.bool,onAnimationStart:zt.func,onAnimationReStart:zt.func};function wp(t){"@babel/helpers - typeof";return wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wp(t)}function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rv.apply(this,arguments)}function ANe(t,e){return ENe(t)||CNe(t,e)||_Ne(t,e)||SNe()}function SNe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _Ne(t,e){if(t){if(typeof t=="string")return QI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QI(t,e)}}function QI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function CNe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function ENe(t){if(Array.isArray(t))return t}function JI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function e3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JI(Object(r),!0).forEach(function(n){NNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NNe(t,e,r){return e=jNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jNe(t){var e=TNe(t,"string");return wp(e)=="symbol"?e:e+""}function TNe(t,e){if(wp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t3=function(e,r,n,i,a){var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,l=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(o>0&&a instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=a[h]>o?o:a[h];d="M".concat(e,",").concat(r+s*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(r)),d+="L ".concat(e+n-l*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,",\n        ").concat(e+n,",").concat(r+s*f[1])),d+="L ".concat(e+n,",").concat(r+i-s*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,",\n        ").concat(e+n-l*f[2],",").concat(r+i)),d+="L ".concat(e+l*f[3],",").concat(r+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,",\n        ").concat(e,",").concat(r+i-s*f[3])),d+="Z"}else if(o>0&&a===+a&&a>0){var m=Math.min(o,a);d="M ".concat(e,",").concat(r+s*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+l*m,",").concat(r,"\n            L ").concat(e+n-l*m,",").concat(r,"\n            A ").concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n,",").concat(r+s*m,"\n            L ").concat(e+n,",").concat(r+i-s*m,"\n            A ").concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+n-l*m,",").concat(r+i,"\n            L ").concat(e+l*m,",").concat(r+i,"\n            A ").concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(r+i-s*m," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},PNe=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,a=r.x,o=r.y,s=r.width,l=r.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(a,a+s),d=Math.max(a,a+s),f=Math.min(o,o+l),h=Math.max(o,o+l);return n>=u&&n<=d&&i>=f&&i<=h}return!1},ONe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vC=function(e){var r=e3(e3({},ONe),e),n=x.useRef(),i=x.useState(-1),a=ANe(i,2),o=a[0],s=a[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&s(S)}catch(A){}},[]);var l=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,p=r.className,m=r.animationEasing,g=r.animationDuration,v=r.animationBegin,y=r.isAnimationActive,b=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=ut("recharts-rectangle",p);return b?$.createElement(uo,{canBegin:o>0,from:{width:d,height:f,x:l,y:u},to:{width:d,height:f,x:l,y:u},duration:g,animationEasing:m,isActive:b},function(S){var A=S.width,_=S.height,E=S.x,N=S.y;return $.createElement(uo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:y,easing:m},$.createElement("path",rv({},qe(r,!0),{className:w,d:t3(E,N,A,_,h),ref:n})))}):$.createElement("path",rv({},qe(r,!0),{className:w,d:t3(l,u,d,f,h)}))},INe=["points","className","baseLinePoints","connectNulls"];function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uu.apply(this,arguments)}function DNe(t,e){if(t==null)return{};var r=kNe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function r3(t){return LNe(t)||$Ne(t)||RNe(t)||MNe()}function MNe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function RNe(t,e){if(t){if(typeof t=="string")return C2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C2(t,e)}}function $Ne(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LNe(t){if(Array.isArray(t))return C2(t)}function C2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var n3=function(e){return e&&e.x===+e.x&&e.y===+e.y},FNe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){n3(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),n3(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},wh=function(e,r){var n=FNe(e);r&&(n=[n.reduce(function(a,o){return[].concat(r3(a),r3(o))},[])]);var i=n.map(function(a){return a.reduce(function(o,s,l){return"".concat(o).concat(l===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},BNe=function(e,r,n){var i=wh(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(wh(r.reverse(),n).slice(1))},zNe=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,o=DNe(e,INe);if(!r||!r.length)return null;var s=ut("recharts-polygon",n);if(i&&i.length){var l=o.stroke&&o.stroke!=="none",u=BNe(r,i,a);return $.createElement("g",{className:s},$.createElement("path",uu({},qe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),l?$.createElement("path",uu({},qe(o,!0),{fill:"none",d:wh(r,a)})):null,l?$.createElement("path",uu({},qe(o,!0),{fill:"none",d:wh(i,a)})):null)}var d=wh(r,a);return $.createElement("path",uu({},qe(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:s,d}))};function E2(){return E2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},E2.apply(this,arguments)}var ax=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,o=ut("recharts-dot",a);return r===+r&&n===+n&&i===+i?x.createElement("circle",E2({},qe(e,!1),Sg(e),{className:o,cx:r,cy:n,r:i})):null};function Ap(t){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(t)}var VNe=["x","y","top","left","width","height","className"];function N2(){return N2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N2.apply(this,arguments)}function i3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function UNe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i3(Object(r),!0).forEach(function(n){WNe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WNe(t,e,r){return e=HNe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HNe(t){var e=GNe(t,"string");return Ap(e)=="symbol"?e:e+""}function GNe(t,e){if(Ap(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qNe(t,e){if(t==null)return{};var r=KNe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function KNe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var XNe=function(e,r,n,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(n)},YNe=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,u=l===void 0?0:l,d=e.width,f=d===void 0?0:d,h=e.height,p=h===void 0?0:h,m=e.className,g=qNe(e,VNe),v=UNe({x:n,y:a,top:s,left:u,width:f,height:p},g);return!we(n)||!we(a)||!we(f)||!we(p)||!we(s)||!we(u)?null:$.createElement("path",N2({},qe(v,!0),{className:ut("recharts-cross",m),d:XNe(n,a,f,p,s,u)}))},ZNe=ex,QNe=HF,JNe=vo;function eje(t,e){return t&&t.length?ZNe(t,JNe(e),QNe):void 0}var tje=eje;const rje=er(tje);var nje=ex,ije=vo,aje=GF;function oje(t,e){return t&&t.length?nje(t,ije(e),aje):void 0}var sje=oje;const cje=er(sje);var lje=["cx","cy","angle","ticks","axisLine"],uje=["ticks","tick","angle","tickFormatter","stroke"];function pd(t){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pd(t)}function Ah(){return Ah=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ah.apply(this,arguments)}function a3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a3(Object(r),!0).forEach(function(n){ox(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o3(t,e){if(t==null)return{};var r=dje(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dje(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function fje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M9(n.key),n)}}function hje(t,e,r){return e&&s3(t.prototype,e),r&&s3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function pje(t,e,r){return e=nv(e),mje(t,k9()?Reflect.construct(e,r||[],nv(t).constructor):e.apply(t,r))}function mje(t,e){if(e&&(pd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gje(t)}function gje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k9=function(){return!!t})()}function nv(t){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nv(t)}function vje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j2(t,e)}function j2(t,e){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},j2(t,e)}function ox(t,e,r){return e=M9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M9(t){var e=yje(t,"string");return pd(e)=="symbol"?e:e+""}function yje(t,e){if(pd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sx=function(t){function e(){return fje(this,e),pje(this,e,arguments)}return vje(e,t),hje(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,o=a.angle,s=a.cx,l=a.cy;return dr(s,l,i,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,o=n.angle,s=n.ticks,l=rje(s,function(d){return d.coordinate||0}),u=cje(s,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,o=n.angle,s=n.ticks,l=n.axisLine,u=o3(n,lje),d=s.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),f=dr(i,a,d[0],o),h=dr(i,a,d[1],o),p=uc(uc(uc({},qe(u,!1)),{},{fill:"none"},qe(l,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return $.createElement("line",Ah({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,o=i.tick,s=i.angle,l=i.tickFormatter,u=i.stroke,d=o3(i,uje),f=this.getTickTextAnchor(),h=qe(d,!1),p=qe(o,!1),m=a.map(function(g,v){var y=n.getTickValueCoord(g),b=uc(uc(uc(uc({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:v},y),{},{payload:g});return $.createElement(Ct,Ah({className:ut("recharts-polar-radius-axis-tick",b9(o)),key:"tick-".concat(g.coordinate)},pl(n.props,g,v)),e.renderTickItem(o,b,l?l(g.value,v):g.value))});return $.createElement(Ct,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,o=n.tick;return!i||!i.length?null:$.createElement(Ct,{className:ut("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),vn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var o;return $.isValidElement(n)?o=$.cloneElement(n,i):Ze(n)?o=n(i):o=$.createElement(ml,Ah({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(x.PureComponent);ox(sx,"displayName","PolarRadiusAxis");ox(sx,"axisType","radiusAxis");ox(sx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function md(t){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},md(t)}function _c(){return _c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_c.apply(this,arguments)}function c3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function dc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c3(Object(r),!0).forEach(function(n){cx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$9(n.key),n)}}function bje(t,e,r){return e&&l3(t.prototype,e),r&&l3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wje(t,e,r){return e=iv(e),Aje(t,R9()?Reflect.construct(e,r||[],iv(t).constructor):e.apply(t,r))}function Aje(t,e){if(e&&(md(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sje(t)}function Sje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(R9=function(){return!!t})()}function iv(t){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iv(t)}function _je(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T2(t,e)}function T2(t,e){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},T2(t,e)}function cx(t,e,r){return e=$9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $9(t){var e=Cje(t,"string");return md(e)=="symbol"?e:e+""}function Cje(t,e){if(md(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(md(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Eje=Math.PI/180,u3=1e-5,lx=function(t){function e(){return xje(this,e),wje(this,e,arguments)}return _je(e,t),bje(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,o=i.cy,s=i.radius,l=i.orientation,u=i.tickSize,d=u||8,f=dr(a,o,s,n.coordinate),h=dr(a,o,s+(l==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*Eje),o;return a>u3?o=i==="outer"?"start":"end":a<-u3?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,o=n.radius,s=n.axisLine,l=n.axisLineType,u=dc(dc({},qe(this.props,!1)),{},{fill:"none"},qe(s,!1));if(l==="circle")return $.createElement(ax,_c({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:o}));var d=this.props.ticks,f=d.map(function(h){return dr(i,a,o,h.coordinate)});return $.createElement(zNe,_c({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,o=i.tick,s=i.tickLine,l=i.tickFormatter,u=i.stroke,d=qe(this.props,!1),f=qe(o,!1),h=dc(dc({},d),{},{fill:"none"},qe(s,!1)),p=a.map(function(m,g){var v=n.getTickLineCoord(m),y=n.getTickTextAnchor(m),b=dc(dc(dc({textAnchor:y},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:m,x:v.x2,y:v.y2});return $.createElement(Ct,_c({className:ut("recharts-polar-angle-axis-tick",b9(o)),key:"tick-".concat(m.coordinate)},pl(n.props,m,g)),s&&$.createElement("line",_c({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&e.renderTickItem(o,b,l?l(m.value,g):m.value))});return $.createElement(Ct,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,o=n.axisLine;return a<=0||!i||!i.length?null:$.createElement(Ct,{className:ut("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var o;return $.isValidElement(n)?o=$.cloneElement(n,i):Ze(n)?o=n(i):o=$.createElement(ml,_c({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(x.PureComponent);cx(lx,"displayName","PolarAngleAxis");cx(lx,"axisType","angleAxis");cx(lx,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Nje=z7,jje=Nje(Object.getPrototypeOf,Object),Tje=jje,Pje=Yo,Oje=Tje,Ije=Zo,Dje="[object Object]",kje=Function.prototype,Mje=Object.prototype,L9=kje.toString,Rje=Mje.hasOwnProperty,$je=L9.call(Object);function Lje(t){if(!Ije(t)||Pje(t)!=Dje)return!1;var e=Oje(t);if(e===null)return!0;var r=Rje.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&L9.call(r)==$je}var Fje=Lje;const Bje=er(Fje);var zje=Yo,Vje=Zo,Uje="[object Boolean]";function Wje(t){return t===!0||t===!1||Vje(t)&&zje(t)==Uje}var Hje=Wje;const Gje=er(Hje);function Sp(t){"@babel/helpers - typeof";return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},av.apply(this,arguments)}function qje(t,e){return Zje(t)||Yje(t,e)||Xje(t,e)||Kje()}function Kje(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xje(t,e){if(t){if(typeof t=="string")return d3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d3(t,e)}}function d3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yje(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Zje(t){if(Array.isArray(t))return t}function f3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function h3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?f3(Object(r),!0).forEach(function(n){Qje(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qje(t,e,r){return e=Jje(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jje(t){var e=eTe(t,"string");return Sp(e)=="symbol"?e:e+""}function eTe(t,e){if(Sp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p3=function(e,r,n,i,a){var o=n-i,s;return s="M ".concat(e,",").concat(r),s+="L ".concat(e+n,",").concat(r),s+="L ".concat(e+n-o/2,",").concat(r+a),s+="L ".concat(e+n-o/2-i,",").concat(r+a),s+="L ".concat(e,",").concat(r," Z"),s},tTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rTe=function(e){var r=h3(h3({},tTe),e),n=x.useRef(),i=x.useState(-1),a=qje(i,2),o=a[0],s=a[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&s(w)}catch(S){}},[]);var l=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,p=r.className,m=r.animationEasing,g=r.animationDuration,v=r.animationBegin,y=r.isUpdateAnimationActive;if(l!==+l||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=ut("recharts-trapezoid",p);return y?$.createElement(uo,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:l,y:u},duration:g,animationEasing:m,isActive:y},function(w){var S=w.upperWidth,A=w.lowerWidth,_=w.height,E=w.x,N=w.y;return $.createElement(uo,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:m},$.createElement("path",av({},qe(r,!0),{className:b,d:p3(E,N,S,A,_),ref:n})))}):$.createElement("g",null,$.createElement("path",av({},qe(r,!0),{className:b,d:p3(l,u,d,f,h)})))},nTe=["option","shapeType","propTransformer","activeClassName","isActive"];function _p(t){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_p(t)}function iTe(t,e){if(t==null)return{};var r=aTe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function aTe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function m3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ov(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?m3(Object(r),!0).forEach(function(n){oTe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oTe(t,e,r){return e=sTe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sTe(t){var e=cTe(t,"string");return _p(e)=="symbol"?e:e+""}function cTe(t,e){if(_p(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lTe(t,e){return ov(ov({},e),t)}function uTe(t,e){return t==="symbols"}function g3(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return $.createElement(vC,r);case"trapezoid":return $.createElement(rTe,r);case"sector":return $.createElement(S9,r);case"symbols":if(uTe(e))return $.createElement(R_,r);break;default:return null}}function dTe(t){return x.isValidElement(t)?t.props:t}function F9(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?lTe:n,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,s=t.isActive,l=iTe(t,nTe),u;if(x.isValidElement(e))u=x.cloneElement(e,ov(ov({},l),dTe(e)));else if(Ze(e))u=e(l);else if(Bje(e)&&!Gje(e)){var d=i(e,l);u=$.createElement(g3,{shapeType:r,elementProps:d})}else{var f=l;u=$.createElement(g3,{shapeType:r,elementProps:f})}return s?$.createElement(Ct,{className:o},u):u}function ux(t,e){return e!=null&&"trapezoids"in t.props}function dx(t,e){return e!=null&&"sectors"in t.props}function Cp(t,e){return e!=null&&"points"in t.props}function fTe(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&a}function hTe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function pTe(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function mTe(t,e){var r;return ux(t,e)?r=fTe:dx(t,e)?r=hTe:Cp(t,e)&&(r=pTe),r}function gTe(t,e){var r;return ux(t,e)?r="trapezoids":dx(t,e)?r="sectors":Cp(t,e)&&(r="points"),r}function vTe(t,e){if(ux(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(dx(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Cp(t,e)?e.payload:{}}function yTe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=gTe(r,e),a=vTe(r,e),o=n.filter(function(l,u){var d=dd(a,l),f=r.props[i].filter(function(m){var g=mTe(r,e);return g(m,e)}),h=r.props[i].indexOf(f[f.length-1]),p=u===h;return d&&p}),s=n.indexOf(o[o.length-1]);return s}var E0;function gd(t){"@babel/helpers - typeof";return gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gd(t)}function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},du.apply(this,arguments)}function v3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v3(Object(r),!0).forEach(function(n){qi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z9(n.key),n)}}function bTe(t,e,r){return e&&y3(t.prototype,e),r&&y3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wTe(t,e,r){return e=sv(e),ATe(t,B9()?Reflect.construct(e,r||[],sv(t).constructor):e.apply(t,r))}function ATe(t,e){if(e&&(gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return STe(t)}function STe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(B9=function(){return!!t})()}function sv(t){return sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sv(t)}function _Te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P2(t,e)}function P2(t,e){return P2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},P2(t,e)}function qi(t,e,r){return e=z9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z9(t){var e=CTe(t,"string");return gd(e)=="symbol"?e:e+""}function CTe(t,e){if(gd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jo=function(t){function e(r){var n;return xTe(this,e),n=wTe(this,e,[r]),qi(n,"pieRef",null),qi(n,"sectorRefs",[]),qi(n,"id",of("recharts-pie-")),qi(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ze(i)&&i()}),qi(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ze(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return _Te(e,t),bTe(e,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,s=a.labelLine,l=a.dataKey,u=a.valueKey,d=qe(this.props,!1),f=qe(o,!1),h=qe(s,!1),p=o&&o.offsetRadius||20,m=n.map(function(g,v){var y=(g.startAngle+g.endAngle)/2,b=dr(g.cx,g.cy,g.outerRadius+p,y),w=cr(cr(cr(cr({},d),g),{},{stroke:"none"},f),{},{index:v,textAnchor:e.getTextAnchor(b.x,g.cx)},b),S=cr(cr(cr(cr({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:v,points:[dr(g.cx,g.cy,g.outerRadius,y),b]}),A=l;return dt(l)&&dt(u)?A="value":dt(l)&&(A=u),$.createElement(Ct,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},s&&e.renderLabelLineItem(s,S,"line"),e.renderLabelItem(o,w,on(g,A)))});return $.createElement(Ct,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(n){var i=this,a=this.props,o=a.activeShape,s=a.blendStroke,l=a.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=i.isActiveIndex(d),h=l&&i.hasActiveIndex()?l:null,p=f?o:h,m=cr(cr({},u),{},{stroke:s?u.fill:u.stroke,tabIndex:-1});return $.createElement(Ct,du({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},pl(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),$.createElement(F9,du({option:p,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,a=i.sectors,o=i.isAnimationActive,s=i.animationBegin,l=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return $.createElement(uo,{begin:s,duration:l,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,v=[],y=a&&a[0],b=y.startAngle;return a.forEach(function(w,S){var A=h&&h[S],_=S>0?Di(w,"paddingAngle",0):0;if(A){var E=di(A.endAngle-A.startAngle,w.endAngle-w.startAngle),N=cr(cr({},w),{},{startAngle:b+_,endAngle:b+E(g)+_});v.push(N),b=N.endAngle}else{var T=w.endAngle,O=w.startAngle,j=di(0,T-O),P=j(g),D=cr(cr({},w),{},{startAngle:b+_,endAngle:b+P+_});v.push(D),b=D.endAngle}}),$.createElement(Ct,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,a=n.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!dd(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,a=i.hide,o=i.sectors,s=i.className,l=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,m=this.state.isAnimationFinished;if(a||!o||!o.length||!we(u)||!we(d)||!we(f)||!we(h))return null;var g=ut("recharts-pie",s);return $.createElement(Ct,{tabIndex:this.props.rootTabIndex,className:g,ref:function(y){n.pieRef=y}},this.renderSectors(),l&&this.renderLabels(o),vn.renderCallByParent(this.props,null,!1),(!p||m)&&$o.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,a){if($.isValidElement(n))return $.cloneElement(n,i);if(Ze(n))return n(i);var o=ut("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return $.createElement(Eu,du({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,i,a){if($.isValidElement(n))return $.cloneElement(n,i);var o=a;if(Ze(n)&&(o=n(i),$.isValidElement(o)))return o;var s=ut("recharts-pie-label-text",typeof n!="boolean"&&!Ze(n)?n.className:"");return $.createElement(ml,du({},i,{alignmentBaseline:"middle",className:s}),o)}}])}(x.PureComponent);E0=Jo;qi(Jo,"displayName","Pie");qi(Jo,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!jl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});qi(Jo,"parseDeltaAngle",function(t,e){var r=ei(e-t),n=Math.min(Math.abs(e-t),360);return r*n});qi(Jo,"getRealPieData",function(t){var e=t.data,r=t.children,n=qe(t,!1),i=ea(r,qy);return e&&e.length?e.map(function(a,o){return cr(cr(cr({payload:a},n),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return cr(cr({},n),a.props)}):[]});qi(Jo,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,i=e.width,a=e.height,o=x9(i,a),s=n+ti(t.cx,i,i/2),l=r+ti(t.cy,a,a/2),u=ti(t.innerRadius,o,0),d=ti(t.outerRadius,o,o*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:s,cy:l,innerRadius:u,outerRadius:d,maxRadius:f}});qi(Jo,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?cr(cr({},e.type.defaultProps),e.props):e.props,i=E0.getRealPieData(n);if(!i||!i.length)return null;var a=n.cornerRadius,o=n.startAngle,s=n.endAngle,l=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),m=E0.parseCoordinateOfPie(n,r),g=E0.parseDeltaAngle(o,s),v=Math.abs(g),y=u;dt(u)&&dt(f)?(Ea(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y="value"):dt(u)&&(Ea(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),y=f);var b=i.filter(function(N){return on(N,y,0)!==0}).length,w=(v>=360?b:b-1)*l,S=v-b*p-w,A=i.reduce(function(N,T){var O=on(T,y,0);return N+(we(O)?O:0)},0),_;if(A>0){var E;_=i.map(function(N,T){var O=on(N,y,0),j=on(N,d,T),P=(we(O)?O:0)/A,D;T?D=E.endAngle+ei(g)*l*(O!==0?1:0):D=o;var F=D+ei(g)*((O!==0?p:0)+P*S),I=(D+F)/2,k=(m.innerRadius+m.outerRadius)/2,R=[{name:j,value:O,payload:N,dataKey:y,type:h}],L=dr(m.cx,m.cy,k,I);return E=cr(cr(cr({percent:P,cornerRadius:a,name:j,tooltipPayload:R,midAngle:I,middleRadius:k,tooltipPosition:L},N),m),{},{value:on(N,y),startAngle:D,endAngle:F,payload:N,paddingAngle:ei(g)*l}),E})}return cr(cr({},m),{},{sectors:_,data:i})});var ETe=Math.ceil,NTe=Math.max;function jTe(t,e,r,n){for(var i=-1,a=NTe(ETe((e-t)/(r||1)),0),o=Array(a);a--;)o[n?a:++i]=t,t+=r;return o}var TTe=jTe,PTe=oF,x3=1/0,OTe=17976931348623157e292;function ITe(t){if(!t)return t===0?t:0;if(t=PTe(t),t===x3||t===-x3){var e=t<0?-1:1;return e*OTe}return t===t?t:0}var V9=ITe,DTe=TTe,kTe=Gy,X1=V9;function MTe(t){return function(e,r,n){return n&&typeof n!="number"&&kTe(e,r,n)&&(r=n=void 0),e=X1(e),r===void 0?(r=e,e=0):r=X1(r),n=n===void 0?e<r?1:-1:X1(n),DTe(e,r,n,t)}}var RTe=MTe,$Te=RTe,LTe=$Te(),FTe=LTe;const cv=er(FTe);function Ep(t){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ep(t)}function b3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function w3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(r),!0).forEach(function(n){U9(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U9(t,e,r){return e=BTe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BTe(t){var e=zTe(t,"string");return Ep(e)=="symbol"?e:e+""}function zTe(t,e){if(Ep(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VTe=["Webkit","Moz","O","ms"],UTe=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=VTe.reduce(function(a,o){return w3(w3({},a),{},U9({},o+n,r))},{});return i[e]=r,i};function vd(t){"@babel/helpers - typeof";return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vd(t)}function lv(){return lv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lv.apply(this,arguments)}function A3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Y1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(r),!0).forEach(function(n){wi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H9(n.key),n)}}function HTe(t,e,r){return e&&S3(t.prototype,e),r&&S3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function GTe(t,e,r){return e=uv(e),qTe(t,W9()?Reflect.construct(e,r||[],uv(t).constructor):e.apply(t,r))}function qTe(t,e){if(e&&(vd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KTe(t)}function KTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(W9=function(){return!!t})()}function uv(t){return uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uv(t)}function XTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O2(t,e)}function O2(t,e){return O2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},O2(t,e)}function wi(t,e,r){return e=H9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H9(t){var e=YTe(t,"string");return vd(e)=="symbol"?e:e+""}function YTe(t,e){if(vd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZTe=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!r||!r.length)return{};var l=r.length,u=yh().domain(cv(0,l)).range([a,a+o-s]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},_3=function(e){return e.changedTouches&&!!e.changedTouches.length},yd=function(t){function e(r){var n;return WTe(this,e),n=GTe(this,e,[r]),wi(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),wi(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),wi(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),n.detachDragEndListener()}),wi(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),wi(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),wi(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),wi(n,"handleSlideDragStart",function(i){var a=_3(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return XTe(e,t),HTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,d=u.length-1,f=Math.min(i,a),h=Math.max(i,a),p=e.getIndexInRange(o,f),m=e.getIndexInRange(o,h);return{startIndex:p-p%l,endIndex:m===d?d:m-m%l}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=on(a[n],s,n);return Ze(o)?o(l,n):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,u=l.x,d=l.width,f=l.travellerWidth,h=l.startIndex,p=l.endIndex,m=l.onChange,g=n.pageX-a;g>0?g=Math.min(g,u+d-f-s,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-s));var v=this.getIndex({startX:o+g,endX:s+g});(v.startIndex!==h||v.endIndex!==p)&&m&&m(v),this.setState({startX:o+g,endX:s+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=_3(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,m=d.onChange,g=d.gap,v=d.data,y={startX:this.state.startX,endX:this.state.endX},b=n.pageX-a;b>0?b=Math.min(b,f+h-p-u):b<0&&(b=Math.max(b,f-u)),y[o]=u+b;var w=this.getIndex(y),S=w.startIndex,A=w.endIndex,_=function(){var N=v.length-1;return o==="startX"&&(s>l?S%g===0:A%g===0)||s<l&&A===N||o==="endX"&&(s>l?A%g===0:S%g===0)||s>l&&A===N};this.setState(wi(wi({},o,u+b),"brushMoveStartX",n.pageX),function(){m&&_()&&m(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,d=this.state[i],f=s.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=s.length)){var p=s[h];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(wi({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,o=n.width,s=n.height,l=n.fill,u=n.stroke;return $.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,o=n.width,s=n.height,l=n.data,u=n.children,d=n.padding,f=x.Children.only(u);return f?$.cloneElement(f,{x:i,y:a,width:o,height:s,margin:d,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,o,s=this,l=this.props,u=l.y,d=l.travellerWidth,f=l.height,h=l.traveller,p=l.ariaLabel,m=l.data,g=l.startIndex,v=l.endIndex,y=Math.max(n,this.props.x),b=Y1(Y1({},qe(this.props,!1)),{},{x:y,y:u,width:d,height:f}),w=p||"Min value: ".concat((a=m[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=m[v])===null||o===void 0?void 0:o.name);return $.createElement(Ct,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),s.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,u=a.travellerWidth,d=Math.min(n,i)+u,f=Math.max(Math.abs(i-n)-u,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:d,y:o,width:f,height:s})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,o=n.y,s=n.height,l=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,p=5,m={pointerEvents:"none",fill:u};return $.createElement(Ct,{className:"recharts-brush-texts"},$.createElement(ml,lv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:o+s/2},m),this.getTextOfTick(i)),$.createElement(ml,lv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+l+p,y:o+s/2},m),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,o=n.children,s=n.x,l=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,p=h.startX,m=h.endX,g=h.isTextActive,v=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!i||!i.length||!we(s)||!we(l)||!we(u)||!we(d)||u<=0||d<=0)return null;var w=ut("recharts-brush",a),S=$.Children.count(o)===1,A=UTe("userSelect","none");return $.createElement(Ct,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||v||y||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,o=n.width,s=n.height,l=n.stroke,u=Math.floor(a+s/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),$.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return $.isValidElement(n)?a=$.cloneElement(n,i):Ze(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,o=n.width,s=n.x,l=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return Y1({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},a&&a.length?ZTe({data:a,width:o,x:s,travellerWidth:l,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);n[l]>i?s=l:o=l}return i>=n[s]?s:o}}])}(x.PureComponent);wi(yd,"displayName","Brush");wi(yd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var QTe=U_;function JTe(t,e){var r;return QTe(t,function(n,i,a){return r=e(n,i,a),!r}),!!r}var ePe=JTe,tPe=D7,rPe=vo,nPe=ePe,iPe=vi,aPe=Gy;function oPe(t,e,r){var n=iPe(t)?tPe:nPe;return r&&aPe(t,e,r)&&(e=void 0),n(t,rPe(e))}var sPe=oPe;const cPe=er(sPe);var no=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},C3=tF;function lPe(t,e,r){e=="__proto__"&&C3?C3(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var uPe=lPe,dPe=uPe,fPe=J7,hPe=vo;function pPe(t,e){var r={};return e=hPe(e),fPe(t,function(n,i,a){dPe(r,i,e(n,i,a))}),r}var mPe=pPe;const gPe=er(mPe);function vPe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var yPe=vPe,xPe=U_;function bPe(t,e){var r=!0;return xPe(t,function(n,i,a){return r=!!e(n,i,a),r}),r}var wPe=bPe,APe=yPe,SPe=wPe,_Pe=vo,CPe=vi,EPe=Gy;function NPe(t,e,r){var n=CPe(t)?APe:SPe;return r&&EPe(t,e,r)&&(e=void 0),n(t,_Pe(e))}var jPe=NPe;const G9=er(jPe);var TPe=["x","y"];function Np(t){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(t)}function I2(){return I2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},I2.apply(this,arguments)}function E3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Lf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?E3(Object(r),!0).forEach(function(n){PPe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PPe(t,e,r){return e=OPe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OPe(t){var e=IPe(t,"string");return Np(e)=="symbol"?e:e+""}function IPe(t,e){if(Np(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DPe(t,e){if(t==null)return{};var r=kPe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function MPe(t,e){var r=t.x,n=t.y,i=DPe(t,TPe),a="".concat(r),o=parseInt(a,10),s="".concat(n),l=parseInt(s,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Lf(Lf(Lf(Lf(Lf({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function N3(t){return $.createElement(F9,I2({shapeType:"rectangle",propTransformer:MPe,activeClassName:"recharts-active-bar"},t))}var RPe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=we(n)||sfe(n);return a?e(n,i):(a||vl(),r)}},$Pe=["value","background"],q9;function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}function LPe(t,e){if(t==null)return{};var r=FPe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FPe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function dv(){return dv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dv.apply(this,arguments)}function j3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j3(Object(r),!0).forEach(function(n){_s(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X9(n.key),n)}}function zPe(t,e,r){return e&&T3(t.prototype,e),r&&T3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function VPe(t,e,r){return e=fv(e),UPe(t,K9()?Reflect.construct(e,r||[],fv(t).constructor):e.apply(t,r))}function UPe(t,e){if(e&&(xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WPe(t)}function WPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(K9=function(){return!!t})()}function fv(t){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fv(t)}function HPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D2(t,e)}function D2(t,e){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},D2(t,e)}function _s(t,e,r){return e=X9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X9(t){var e=GPe(t,"string");return xd(e)=="symbol"?e:e+""}function GPe(t,e){if(xd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lo=function(t){function e(){var r;BPe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=VPe(this,e,[].concat(i)),_s(r,"state",{isAnimationFinished:!1}),_s(r,"id",of("recharts-bar-")),_s(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),_s(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return HPe(e,t),zPe(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,u=a.activeBar,d=qe(this.props,!1);return n&&n.map(function(f,h){var p=h===l,m=p?u:o,g=Vr(Vr(Vr({},d),f),{},{isActive:p,option:m,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return $.createElement(Ct,dv({className:"recharts-bar-rectangle"},pl(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),$.createElement(N3,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return $.createElement(uo,{begin:l,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=a.map(function(v,y){var b=h&&h[y];if(b){var w=di(b.x,v.x),S=di(b.y,v.y),A=di(b.width,v.width),_=di(b.height,v.height);return Vr(Vr({},v),{},{x:w(m),y:S(m),width:A(m),height:_(m)})}if(o==="horizontal"){var E=di(0,v.height),N=E(m);return Vr(Vr({},v),{},{y:v.y+v.height-N,height:N})}var T=di(0,v.width),O=T(m);return Vr(Vr({},v),{},{width:O})});return $.createElement(Ct,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!dd(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=qe(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,h=LPe(u,$Pe);if(!f)return null;var p=Vr(Vr(Vr(Vr(Vr({},h),{},{fill:"#eee"},f),l),pl(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return $.createElement(N3,dv({key:"background-bar-".concat(d),option:n.props.background,isActive:d===s},p))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,u=a.layout,d=a.children,f=ea(d,ix);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,p=function(v,y){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:on(v,y)}},m={clipPath:n?"url(#clipPath-".concat(i,")"):null};return $.createElement(Ct,m,f.map(function(g){return $.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,o=n.className,s=n.xAxis,l=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,p=n.isAnimationActive,m=n.background,g=n.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,y=ut("recharts-bar",o),b=s&&s.allowDataOverflow,w=l&&l.allowDataOverflow,S=b||w,A=dt(g)?this.id:g;return $.createElement(Ct,{className:y},b||w?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(A)},$.createElement("rect",{x:b?u:u-f/2,y:w?d:d-h/2,width:b?f:f*2,height:w?h:h*2}))):null,$.createElement(Ct,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(A,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,A),(!p||v)&&$o.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(x.PureComponent);q9=Lo;_s(Lo,"displayName","Bar");_s(Lo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_s(Lo,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=E_e(n,r);if(!p)return null;var m=e.layout,g=r.type.defaultProps,v=g!==void 0?Vr(Vr({},g),r.props):r.props,y=v.dataKey,b=v.children,w=v.minPointSize,S=m==="horizontal"?o:a,A=u?S.scale.domain():null,_=D_e({numericAxis:S}),E=ea(b,qy),N=f.map(function(T,O){var j,P,D,F,I,k;u?j=N_e(u[d+O],A):(j=on(T,y),Array.isArray(j)||(j=[_,j]));var R=RPe(w,q9.defaultProps.minPointSize)(j[1],O);if(m==="horizontal"){var L,V=[o.scale(j[0]),o.scale(j[1])],W=V[0],q=V[1];P=yI({axis:a,ticks:s,bandSize:i,offset:p.offset,entry:T,index:O}),D=(L=q!=null?q:W)!==null&&L!==void 0?L:void 0,F=p.size;var H=W-q;if(I=Number.isNaN(H)?0:H,k={x:P,y:o.y,width:F,height:o.height},Math.abs(R)>0&&Math.abs(I)<Math.abs(R)){var J=ei(I||R)*(Math.abs(R)-Math.abs(I));D-=J,I+=J}}else{var de=[a.scale(j[0]),a.scale(j[1])],se=de[0],Ee=de[1];if(P=se,D=yI({axis:o,ticks:l,bandSize:i,offset:p.offset,entry:T,index:O}),F=Ee-se,I=p.size,k={x:a.x,y:D,width:a.width,height:I},Math.abs(R)>0&&Math.abs(F)<Math.abs(R)){var Ue=ei(F||R)*(Math.abs(R)-Math.abs(F));F+=Ue}}return Vr(Vr(Vr({},T),{},{x:P,y:D,width:F,height:I,value:u?j:j[1],payload:T,background:k},E&&E[O]&&E[O].props),{},{tooltipPayload:[v9(r,T)],tooltipPosition:{x:P+F/2,y:D+I/2}})});return Vr({data:N,layout:m},h)});function jp(t){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(t)}function qPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y9(n.key),n)}}function KPe(t,e,r){return e&&P3(t.prototype,e),r&&P3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ga(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?O3(Object(r),!0).forEach(function(n){fx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fx(t,e,r){return e=Y9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Y9(t){var e=XPe(t,"string");return jp(e)=="symbol"?e:e+""}function XPe(t,e){if(jp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z9=function(e,r,n,i,a){var o=e.width,s=e.height,l=e.layout,u=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!Ai(u,Lo);return d.reduce(function(p,m){var g=r[m],v=g.orientation,y=g.domain,b=g.padding,w=b===void 0?{}:b,S=g.mirror,A=g.reversed,_="".concat(v).concat(S?"Mirror":""),E,N,T,O,j;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var P=y[1]-y[0],D=1/0,F=g.categoricalDomain.sort(ufe);if(F.forEach(function(de,se){se>0&&(D=Math.min((de||0)-(F[se-1]||0),D))}),Number.isFinite(D)){var I=D/P,k=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(E=I*k/2),g.padding==="no-gap"){var R=ti(e.barCategoryGap,I*k),L=I*k/2;E=L-R-(L-R)/k*R}}}i==="xAxis"?N=[n.left+(w.left||0)+(E||0),n.left+n.width-(w.right||0)-(E||0)]:i==="yAxis"?N=l==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(E||0),n.top+n.height-(w.bottom||0)-(E||0)]:N=g.range,A&&(N=[N[1],N[0]]);var V=h9(g,a,h),W=V.scale,q=V.realScaleType;W.domain(y).range(N),p9(W);var H=m9(W,ga(ga({},g),{},{realScaleType:q}));i==="xAxis"?(j=v==="top"&&!S||v==="bottom"&&S,T=n.left,O=f[_]-j*g.height):i==="yAxis"&&(j=v==="left"&&!S||v==="right"&&S,T=f[_]-j*g.width,O=n.top);var J=ga(ga(ga({},g),H),{},{realScaleType:q,x:T,y:O,scale:W,width:i==="xAxis"?n.width:g.width,height:i==="yAxis"?n.height:g.height});return J.bandSize=Yg(J,H),!g.hide&&i==="xAxis"?f[_]+=(j?-1:1)*J.height:g.hide||(f[_]+=(j?-1:1)*J.width),ga(ga({},p),{},fx({},m,J))},{})},Q9=function(e,r){var n=e.x,i=e.y,a=r.x,o=r.y;return{x:Math.min(n,a),y:Math.min(i,o),width:Math.abs(a-n),height:Math.abs(o-i)}},YPe=function(e){var r=e.x1,n=e.y1,i=e.x2,a=e.y2;return Q9({x:r,y:n},{x:i,y:a})},J9=function(){function t(e){qPe(this,t),this.scale=e}return KPe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();fx(J9,"EPS",1e-4);var yC=function(e){var r=Object.keys(e).reduce(function(n,i){return ga(ga({},n),{},fx({},i,J9.create(e[i])))},{});return ga(ga({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return gPe(i,function(l,u){return r[u].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return G9(i,function(a,o){return r[o].isInRange(a)})}})};function ZPe(t){return(t%180+180)%180}var QPe=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ZPe(i),o=a*Math.PI/180,s=Math.atan(n/r),l=o>s&&o<Math.PI-s?n/Math.sin(o):r/Math.cos(o);return Math.abs(l)},JPe=vo,eOe=om,tOe=Wy;function rOe(t){return function(e,r,n){var i=Object(e);if(!eOe(e)){var a=JPe(r);e=tOe(e),r=function(s){return a(i[s],s,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}}var nOe=rOe,iOe=V9;function aOe(t){var e=iOe(t),r=e%1;return e===e?r?e-r:e:0}var oOe=aOe,sOe=q7,cOe=vo,lOe=oOe,uOe=Math.max;function dOe(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:lOe(r);return i<0&&(i=uOe(n+i,0)),sOe(t,cOe(e),i)}var fOe=dOe,hOe=nOe,pOe=fOe,mOe=hOe(pOe),gOe=mOe;const vOe=er(gOe);var yOe=hde(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),xC=x.createContext(void 0),bC=x.createContext(void 0),eB=x.createContext(void 0),tB=x.createContext({}),rB=x.createContext(void 0),nB=x.createContext(0),iB=x.createContext(0),I3=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,o=e.clipPathId,s=e.children,l=e.width,u=e.height,d=yOe(a);return $.createElement(xC.Provider,{value:n},$.createElement(bC.Provider,{value:i},$.createElement(tB.Provider,{value:a},$.createElement(eB.Provider,{value:d},$.createElement(rB.Provider,{value:o},$.createElement(nB.Provider,{value:u},$.createElement(iB.Provider,{value:l},s)))))))},xOe=function(){return x.useContext(rB)},aB=function(e){var r=x.useContext(xC);r==null&&vl();var n=r[e];return n==null&&vl(),n},bOe=function(){var e=x.useContext(xC);return ms(e)},wOe=function(){var e=x.useContext(bC),r=vOe(e,function(n){return G9(n.domain,Number.isFinite)});return r||ms(e)},oB=function(e){var r=x.useContext(bC);r==null&&vl();var n=r[e];return n==null&&vl(),n},AOe=function(){var e=x.useContext(eB);return e},SOe=function(){return x.useContext(tB)},wC=function(){return x.useContext(iB)},AC=function(){return x.useContext(nB)};function bd(t){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(t)}function _Oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function COe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cB(n.key),n)}}function EOe(t,e,r){return e&&COe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NOe(t,e,r){return e=hv(e),jOe(t,sB()?Reflect.construct(e,r||[],hv(t).constructor):e.apply(t,r))}function jOe(t,e){if(e&&(bd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TOe(t)}function TOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sB=function(){return!!t})()}function hv(t){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hv(t)}function POe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k2(t,e)}function k2(t,e){return k2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},k2(t,e)}function D3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function k3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D3(Object(r),!0).forEach(function(n){SC(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SC(t,e,r){return e=cB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cB(t){var e=OOe(t,"string");return bd(e)=="symbol"?e:e+""}function OOe(t,e){if(bd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function IOe(t,e){return ROe(t)||MOe(t,e)||kOe(t,e)||DOe()}function DOe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kOe(t,e){if(t){if(typeof t=="string")return M3(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M3(t,e)}}function M3(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function MOe(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function ROe(t){if(Array.isArray(t))return t}function M2(){return M2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},M2.apply(this,arguments)}var $Oe=function(e,r){var n;return $.isValidElement(e)?n=$.cloneElement(e,r):Ze(e)?n=e(r):n=$.createElement("line",M2({},r,{className:"recharts-reference-line-line"})),n},LOe=function(e,r,n,i,a,o,s,l,u){var d=a.x,f=a.y,h=a.width,p=a.height;if(n){var m=u.y,g=e.y.apply(m,{position:o});if(no(u,"discard")&&!e.y.isInRange(g))return null;var v=[{x:d+h,y:g},{x:d,y:g}];return l==="left"?v.reverse():v}if(r){var y=u.x,b=e.x.apply(y,{position:o});if(no(u,"discard")&&!e.x.isInRange(b))return null;var w=[{x:b,y:f+p},{x:b,y:f}];return s==="top"?w.reverse():w}if(i){var S=u.segment,A=S.map(function(_){return e.apply(_,{position:o})});return no(u,"discard")&&cPe(A,function(_){return!e.isInRange(_)})?null:A}return null};function FOe(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,s=t.className,l=t.alwaysShow,u=xOe(),d=aB(i),f=oB(a),h=AOe();if(!u||!h)return null;Ea(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=yC({x:d.scale,y:f.scale}),m=ln(e),g=ln(r),v=n&&n.length===2,y=LOe(p,m,g,v,h,t.position,d.orientation,f.orientation,t);if(!y)return null;var b=IOe(y,2),w=b[0],S=w.x,A=w.y,_=b[1],E=_.x,N=_.y,T=no(t,"hidden")?"url(#".concat(u,")"):void 0,O=k3(k3({clipPath:T},qe(t,!0)),{},{x1:S,y1:A,x2:E,y2:N});return $.createElement(Ct,{className:ut("recharts-reference-line",s)},$Oe(o,O),vn.renderCallByParent(t,YPe({x1:S,y1:A,x2:E,y2:N})))}var _C=function(t){function e(){return _Oe(this,e),NOe(this,e,arguments)}return POe(e,t),EOe(e,[{key:"render",value:function(){return $.createElement(FOe,this.props)}}])}($.Component);SC(_C,"displayName","ReferenceLine");SC(_C,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function R2(){return R2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R2.apply(this,arguments)}function wd(t){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wd(t)}function R3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R3(Object(r),!0).forEach(function(n){hx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zOe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uB(n.key),n)}}function VOe(t,e,r){return e&&zOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UOe(t,e,r){return e=pv(e),WOe(t,lB()?Reflect.construct(e,r||[],pv(t).constructor):e.apply(t,r))}function WOe(t,e){if(e&&(wd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HOe(t)}function HOe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(lB=function(){return!!t})()}function pv(t){return pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pv(t)}function GOe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$2(t,e)}function $2(t,e){return $2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$2(t,e)}function hx(t,e,r){return e=uB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uB(t){var e=qOe(t,"string");return wd(e)=="symbol"?e:e+""}function qOe(t,e){if(wd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KOe=function(e){var r=e.x,n=e.y,i=e.xAxis,a=e.yAxis,o=yC({x:i.scale,y:a.scale}),s=o.apply({x:r,y:n},{bandAware:!0});return no(e,"discard")&&!o.isInRange(s)?null:s},px=function(t){function e(){return BOe(this,e),UOe(this,e,arguments)}return GOe(e,t),VOe(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,o=n.r,s=n.alwaysShow,l=n.clipPathId,u=ln(i),d=ln(a);if(Ea(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=KOe(this.props);if(!f)return null;var h=f.x,p=f.y,m=this.props,g=m.shape,v=m.className,y=no(this.props,"hidden")?"url(#".concat(l,")"):void 0,b=$3($3({clipPath:y},qe(this.props,!0)),{},{cx:h,cy:p});return $.createElement(Ct,{className:ut("recharts-reference-dot",v)},e.renderDot(g,b),vn.renderCallByParent(this.props,{x:h-o,y:p-o,width:2*o,height:2*o}))}}])}($.Component);hx(px,"displayName","ReferenceDot");hx(px,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});hx(px,"renderDot",function(t,e){var r;return $.isValidElement(t)?r=$.cloneElement(t,e):Ze(t)?r=t(e):r=$.createElement(ax,R2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function L2(){return L2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},L2.apply(this,arguments)}function Ad(t){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(t)}function L3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function F3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L3(Object(r),!0).forEach(function(n){mx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function XOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YOe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fB(n.key),n)}}function ZOe(t,e,r){return e&&YOe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QOe(t,e,r){return e=mv(e),JOe(t,dB()?Reflect.construct(e,r||[],mv(t).constructor):e.apply(t,r))}function JOe(t,e){if(e&&(Ad(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eIe(t)}function eIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(dB=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mv(t)}function tIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F2(t,e)}function F2(t,e){return F2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},F2(t,e)}function mx(t,e,r){return e=fB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fB(t){var e=rIe(t,"string");return Ad(e)=="symbol"?e:e+""}function rIe(t,e){if(Ad(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nIe=function(e,r,n,i,a){var o=a.x1,s=a.x2,l=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var h=yC({x:d.scale,y:f.scale}),p={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(l,{position:"start"}):h.y.rangeMin},m={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return no(a,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:Q9(p,m)},gx=function(t){function e(){return XOe(this,e),QOe(this,e,arguments)}return tIe(e,t),ZOe(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,o=n.y1,s=n.y2,l=n.className,u=n.alwaysShow,d=n.clipPathId;Ea(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=ln(i),h=ln(a),p=ln(o),m=ln(s),g=this.props.shape;if(!f&&!h&&!p&&!m&&!g)return null;var v=nIe(f,h,p,m,this.props);if(!v&&!g)return null;var y=no(this.props,"hidden")?"url(#".concat(d,")"):void 0;return $.createElement(Ct,{className:ut("recharts-reference-area",l)},e.renderRect(g,F3(F3({clipPath:y},qe(this.props,!0)),v)),vn.renderCallByParent(this.props,v))}}])}($.Component);mx(gx,"displayName","ReferenceArea");mx(gx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});mx(gx,"renderRect",function(t,e){var r;return $.isValidElement(t)?r=$.cloneElement(t,e):Ze(t)?r=t(e):r=$.createElement(vC,L2({},e,{className:"recharts-reference-area-rect"})),r});function hB(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function iIe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return QPe(n,r)}function aIe(t,e,r){var n=r==="width",i=t.x,a=t.y,o=t.width,s=t.height;return e===1?{start:n?i:a,end:n?i+o:a+s}:{start:n?i+o:a+s,end:n?i:a}}function gv(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function oIe(t,e){return hB(t,e+1)}function sIe(t,e,r,n,i){for(var a=(n||[]).slice(),o=e.start,s=e.end,l=0,u=1,d=o,f=function(){var m=n==null?void 0:n[l];if(m===void 0)return{v:hB(n,u)};var g=l,v,y=function(){return v===void 0&&(v=r(m,g)),v},b=m.coordinate,w=l===0||gv(t,b,y,d,s);w||(l=0,d=o,u+=1),w&&(d=b+t*(y()/2+i),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function Tp(t){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(t)}function B3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?B3(Object(r),!0).forEach(function(n){cIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cIe(t,e,r){return e=lIe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lIe(t){var e=uIe(t,"string");return Tp(e)=="symbol"?e:e+""}function uIe(t,e){if(Tp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dIe(t,e,r,n,i){for(var a=(n||[]).slice(),o=a.length,s=e.start,l=e.end,u=function(h){var p=a[h],m,g=function(){return m===void 0&&(m=r(p,h)),m};if(h===o-1){var v=t*(p.coordinate+t*g()/2-l);a[h]=p=Fn(Fn({},p),{},{tickCoord:v>0?p.coordinate-v*t:p.coordinate})}else a[h]=p=Fn(Fn({},p),{},{tickCoord:p.coordinate});var y=gv(t,p.tickCoord,g,s,l);y&&(l=p.tickCoord-t*(g()/2+i),a[h]=Fn(Fn({},p),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return a}function fIe(t,e,r,n,i,a){var o=(n||[]).slice(),s=o.length,l=e.start,u=e.end;if(a){var d=n[s-1],f=r(d,s-1),h=t*(d.coordinate+t*f/2-u);o[s-1]=d=Fn(Fn({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var p=gv(t,d.tickCoord,function(){return f},l,u);p&&(u=d.tickCoord-t*(f/2+i),o[s-1]=Fn(Fn({},d),{},{isShow:!0}))}for(var m=a?s-1:s,g=function(b){var w=o[b],S,A=function(){return S===void 0&&(S=r(w,b)),S};if(b===0){var _=t*(w.coordinate-t*A()/2-l);o[b]=w=Fn(Fn({},w),{},{tickCoord:_<0?w.coordinate-_*t:w.coordinate})}else o[b]=w=Fn(Fn({},w),{},{tickCoord:w.coordinate});var E=gv(t,w.tickCoord,A,l,u);E&&(l=w.tickCoord+t*(A()/2+i),o[b]=Fn(Fn({},w),{},{isShow:!0}))},v=0;v<m;v++)g(v);return o}function CC(t,e,r){var n=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,s=t.orientation,l=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!n)return[];if(we(l)||jl.isSsr)return oIe(i,typeof l=="number"&&we(l)?l:0);var h=[],p=s==="top"||s==="bottom"?"width":"height",m=d&&p==="width"?vh(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},g=function(w,S){var A=Ze(u)?u(w.value,S):w.value;return p==="width"?iIe(vh(A,{fontSize:e,letterSpacing:r}),m,f):vh(A,{fontSize:e,letterSpacing:r})[p]},v=i.length>=2?ei(i[1].coordinate-i[0].coordinate):1,y=aIe(a,v,p);return l==="equidistantPreserveStart"?sIe(v,y,g,i,o):(l==="preserveStart"||l==="preserveStartEnd"?h=fIe(v,y,g,i,o,l==="preserveStartEnd"):h=dIe(v,y,g,i,o),h.filter(function(b){return b.isShow}))}var hIe=["viewBox"],pIe=["viewBox"],mIe=["ticks"];function Sd(t){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sd(t)}function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fu.apply(this,arguments)}function z3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z3(Object(r),!0).forEach(function(n){EC(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z1(t,e){if(t==null)return{};var r=gIe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gIe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function vIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mB(n.key),n)}}function yIe(t,e,r){return e&&V3(t.prototype,e),r&&V3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function xIe(t,e,r){return e=vv(e),bIe(t,pB()?Reflect.construct(e,r||[],vv(t).constructor):e.apply(t,r))}function bIe(t,e){if(e&&(Sd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wIe(t)}function wIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pB=function(){return!!t})()}function vv(t){return vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vv(t)}function AIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B2(t,e)}function B2(t,e){return B2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},B2(t,e)}function EC(t,e,r){return e=mB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mB(t){var e=SIe(t,"string");return Sd(e)=="symbol"?e:e+""}function SIe(t,e){if(Sd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hf=function(t){function e(r){var n;return vIe(this,e),n=xIe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return AIe(e,t),yIe(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,o=Z1(n,hIe),s=this.props,l=s.viewBox,u=Z1(s,pIe);return!Su(a,l)||!Su(o,u)||!Su(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,p,m,g,v,y,b,w=f?-1:1,S=n.tickSize||d,A=we(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=m=n.coordinate,v=o+ +!f*l,g=v-w*S,b=g-w*h,y=A;break;case"left":g=v=n.coordinate,m=a+ +!f*s,p=m-w*S,y=p-w*h,b=A;break;case"right":g=v=n.coordinate,m=a+ +f*s,p=m+w*S,y=p+w*h,b=A;break;default:p=m=n.coordinate,v=o+ +f*l,g=v+w*S,b=g+w*h,y=A;break}return{line:{x1:p,y1:g,x2:m,y2:v},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,o=n.width,s=n.height,l=n.orientation,u=n.mirror,d=n.axisLine,f=Zr(Zr(Zr({},qe(this.props,!1)),qe(d,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);f=Zr(Zr({},f),{},{x1:i,y1:a+h*s,x2:i+o,y2:a+h*s})}else{var p=+(l==="left"&&!u||l==="right"&&u);f=Zr(Zr({},f),{},{x1:i+p*o,y1:a,x2:i+p*o,y2:a+s})}return $.createElement("line",fu({},f,{className:ut("recharts-cartesian-axis-line",Di(d,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var o=this,s=this.props,l=s.tickLine,u=s.stroke,d=s.tick,f=s.tickFormatter,h=s.unit,p=CC(Zr(Zr({},this.props),{},{ticks:n}),i,a),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=qe(this.props,!1),y=qe(d,!1),b=Zr(Zr({},v),{},{fill:"none"},qe(l,!1)),w=p.map(function(S,A){var _=o.getTickLineCoord(S),E=_.line,N=_.tick,T=Zr(Zr(Zr(Zr({textAnchor:m,verticalAnchor:g},v),{},{stroke:"none",fill:u},y),N),{},{index:A,payload:S,visibleTicksCount:p.length,tickFormatter:f});return $.createElement(Ct,fu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},pl(o.props,S,A)),l&&$.createElement("line",fu({},b,E,{className:ut("recharts-cartesian-axis-tick-line",Di(l,"className"))})),d&&e.renderTickItem(d,T,"".concat(Ze(f)?f(S.value,A):S.value).concat(h||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,p=Z1(f,mIe),m=h;return Ze(l)&&(m=h&&h.length>0?l(this.props):l(p)),o<=0||s<=0||!m||!m.length?null:$.createElement(Ct,{className:ut("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),vn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var o,s=ut(i.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(n)?o=$.cloneElement(n,Zr(Zr({},i),{},{className:s})):Ze(n)?o=n(Zr(Zr({},i),{},{className:s})):o=$.createElement(ml,fu({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(x.Component);EC(hf,"displayName","CartesianAxis");EC(hf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _Ie=["x1","y1","x2","y2","key"],CIe=["offset"];function yl(t){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(t)}function U3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Bn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U3(Object(r),!0).forEach(function(n){EIe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function EIe(t,e,r){return e=NIe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NIe(t){var e=jIe(t,"string");return yl(e)=="symbol"?e:e+""}function jIe(t,e){if(yl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dc(){return Dc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dc.apply(this,arguments)}function W3(t,e){if(t==null)return{};var r=TIe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function TIe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var PIe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return $.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gB(t,e){var r;if($.isValidElement(t))r=$.cloneElement(t,e);else if(Ze(t))r=t(e);else{var n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=W3(e,_Ie),u=qe(l,!1);u.offset;var d=W3(u,CIe);r=$.createElement("line",Dc({},d,{x1:n,y1:i,x2:a,y2:o,fill:"none",key:s}))}return r}function OIe(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var u=Bn(Bn({},t),{},{x1:e,y1:s,x2:e+r,y2:s,key:"line-".concat(l),index:l});return gB(i,u)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function IIe(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var u=Bn(Bn({},t),{},{x1:s,y1:e,x2:s,y2:e+r,key:"line-".concat(l),index:l});return gB(i,u)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function DIe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,a=t.width,o=t.height,s=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var d=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var m=!d[p+1],g=m?i+o-h:d[p+1]-h;if(g<=0)return null;var v=p%e.length;return $.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:g,width:a,stroke:"none",fill:e[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function kIe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,s=t.width,l=t.height,u=t.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var m=!d[p+1],g=m?a+s-h:d[p+1]-h;if(g<=0)return null;var v=p%n.length;return $.createElement("rect",{key:"react-".concat(p),x:h,y:o,width:g,height:l,stroke:"none",fill:n[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var MIe=function(e,r){var n=e.xAxis,i=e.width,a=e.height,o=e.offset;return f9(CC(Bn(Bn(Bn({},hf.defaultProps),n),{},{ticks:Po(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,r)},RIe=function(e,r){var n=e.yAxis,i=e.width,a=e.height,o=e.offset;return f9(CC(Bn(Bn(Bn({},hf.defaultProps),n),{},{ticks:Po(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,r)},Hl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function NC(t){var e,r,n,i,a,o,s=wC(),l=AC(),u=SOe(),d=Bn(Bn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Hl.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Hl.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Hl.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Hl.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Hl.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Hl.verticalFill,x:we(t.x)?t.x:u.left,y:we(t.y)?t.y:u.top,width:we(t.width)?t.width:u.width,height:we(t.height)?t.height:u.height}),f=d.x,h=d.y,p=d.width,m=d.height,g=d.syncWithTicks,v=d.horizontalValues,y=d.verticalValues,b=bOe(),w=wOe();if(!we(p)||p<=0||!we(m)||m<=0||!we(f)||f!==+f||!we(h)||h!==+h)return null;var S=d.verticalCoordinatesGenerator||MIe,A=d.horizontalCoordinatesGenerator||RIe,_=d.horizontalPoints,E=d.verticalPoints;if((!_||!_.length)&&Ze(A)){var N=v&&v.length,T=A({yAxis:w?Bn(Bn({},w),{},{ticks:N?v:w.ticks}):void 0,width:s,height:l,offset:u},N?!0:g);Ea(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(yl(T),"]")),Array.isArray(T)&&(_=T)}if((!E||!E.length)&&Ze(S)){var O=y&&y.length,j=S({xAxis:b?Bn(Bn({},b),{},{ticks:O?y:b.ticks}):void 0,width:s,height:l,offset:u},O?!0:g);Ea(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(yl(j),"]")),Array.isArray(j)&&(E=j)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(PIe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),$.createElement(OIe,Dc({},d,{offset:u,horizontalPoints:_,xAxis:b,yAxis:w})),$.createElement(IIe,Dc({},d,{offset:u,verticalPoints:E,xAxis:b,yAxis:w})),$.createElement(DIe,Dc({},d,{horizontalPoints:_})),$.createElement(kIe,Dc({},d,{verticalPoints:E})))}NC.displayName="CartesianGrid";var $Ie=["layout","type","stroke","connectNulls","isRange","ref"],LIe=["key"],vB;function _d(t){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_d(t)}function yB(t,e){if(t==null)return{};var r=FIe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function FIe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function kc(){return kc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kc.apply(this,arguments)}function H3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H3(Object(r),!0).forEach(function(n){qa(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function BIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bB(n.key),n)}}function zIe(t,e,r){return e&&G3(t.prototype,e),r&&G3(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function VIe(t,e,r){return e=yv(e),UIe(t,xB()?Reflect.construct(e,r||[],yv(t).constructor):e.apply(t,r))}function UIe(t,e){if(e&&(_d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WIe(t)}function WIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(xB=function(){return!!t})()}function yv(t){return yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yv(t)}function HIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z2(t,e)}function z2(t,e){return z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},z2(t,e)}function qa(t,e,r){return e=bB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bB(t){var e=GIe(t,"string");return _d(e)=="symbol"?e:e+""}function GIe(t,e){if(_d(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_d(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nc=function(t){function e(){var r;BIe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=VIe(this,e,[].concat(i)),qa(r,"state",{isAnimationFinished:!0}),qa(r,"id",of("recharts-area-")),qa(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ze(o)&&o()}),qa(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ze(o)&&o()}),r}return HIe(e,t),zIe(e,[{key:"renderDots",value:function(n,i,a){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,d=l.points,f=l.dataKey,h=qe(this.props,!1),p=qe(u,!0),m=d.map(function(v,y){var b=cs(cs(cs({key:"dot-".concat(y),r:3},h),p),{},{index:y,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return e.renderDotItem(u,b)}),g={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return $.createElement(Ct,kc({className:"recharts-area-dots"},g),m)}},{key:"renderHorizontalRect",value:function(n){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].x,u=o[o.length-1].x,d=n*Math.abs(l-u),f=Ss(o.map(function(h){return h.y||0}));return we(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Ss(a.map(function(h){return h.y||0})),f)),we(f)?$.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].y,u=o[o.length-1].y,d=n*Math.abs(l-u),f=Ss(o.map(function(h){return h.x||0}));return we(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Ss(a.map(function(h){return h.x||0})),f)),we(f)?$.createElement("rect",{x:0,y:l<u?l:l-d,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(n){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,i,a,o){var s=this.props,l=s.layout,u=s.type,d=s.stroke,f=s.connectNulls,h=s.isRange;s.ref;var p=yB(s,$Ie);return $.createElement(Ct,{clipPath:a?"url(#clipPath-".concat(o,")"):null},$.createElement(Eu,kc({},qe(p,!0),{points:n,connectNulls:f,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&$.createElement(Eu,kc({},qe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:n})),d!=="none"&&h&&$.createElement(Eu,kc({},qe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(n,i){var a=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,p=o.animationId,m=this.state,g=m.prevPoints,v=m.prevBaseLine;return $.createElement(uo,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t;if(g){var w=g.length/s.length,S=s.map(function(N,T){var O=Math.floor(T*w);if(g[O]){var j=g[O],P=di(j.x,N.x),D=di(j.y,N.y);return cs(cs({},N),{},{x:P(b),y:D(b)})}return N}),A;if(we(l)&&typeof l=="number"){var _=di(v,l);A=_(b)}else if(dt(l)||af(l)){var E=di(v,0);A=E(b)}else A=l.map(function(N,T){var O=Math.floor(T*w);if(v[O]){var j=v[O],P=di(j.x,N.x),D=di(j.y,N.y);return cs(cs({},N),{},{x:P(b),y:D(b)})}return N});return a.renderAreaStatically(S,A,n,i)}return $.createElement(Ct,null,$.createElement("defs",null,$.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(b))),$.createElement(Ct,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(s,l,n,i)))})}},{key:"renderArea",value:function(n,i){var a=this.props,o=a.points,s=a.baseLine,l=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return l&&o&&o.length&&(!d&&h>0||!dd(d,o)||!dd(f,s))?this.renderAreaWithAnimation(n,i):this.renderAreaStatically(o,s,n,i)}},{key:"render",value:function(){var n,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,u=i.top,d=i.left,f=i.xAxis,h=i.yAxis,p=i.width,m=i.height,g=i.isAnimationActive,v=i.id;if(a||!s||!s.length)return null;var y=this.state.isAnimationFinished,b=s.length===1,w=ut("recharts-area",l),S=f&&f.allowDataOverflow,A=h&&h.allowDataOverflow,_=S||A,E=dt(v)?this.id:v,N=(n=qe(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},T=N.r,O=T===void 0?3:T,j=N.strokeWidth,P=j===void 0?2:j,D=xfe(o)?o:{},F=D.clipDot,I=F===void 0?!0:F,k=O*2+P;return $.createElement(Ct,{className:w},S||A?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(E)},$.createElement("rect",{x:S?d:d-p/2,y:A?u:u-m/2,width:S?p:p*2,height:A?m:m*2})),!I&&$.createElement("clipPath",{id:"clipPath-dots-".concat(E)},$.createElement("rect",{x:d-k/2,y:u-k/2,width:p+k,height:m+k}))):null,b?null:this.renderArea(_,E),(o||b)&&this.renderDots(_,I,E),(!g||y)&&$o.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:n.points!==i.curPoints||n.baseLine!==i.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(x.PureComponent);vB=nc;qa(nc,"displayName","Area");qa(nc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});qa(nc,"getBaseValue",function(t,e,r,n){var i=t.layout,a=t.baseValue,o=e.props.baseValue,s=o!=null?o:a;if(we(s)&&typeof s=="number")return s;var l=i==="horizontal"?n:r,u=l.scale.domain();if(l.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return s==="dataMin"?f:s==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});qa(nc,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,s=t.bandSize,l=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=e.layout,m=u&&u.length,g=vB.getBaseValue(e,r,n,i),v=p==="horizontal",y=!1,b=f.map(function(S,A){var _;m?_=u[d+A]:(_=on(S,l),Array.isArray(_)?y=!0:_=[g,_]);var E=_[1]==null||m&&on(S,l)==null;return v?{x:vI({axis:n,ticks:a,bandSize:s,entry:S,index:A}),y:E?null:i.scale(_[1]),value:_,payload:S}:{x:E?null:n.scale(_[1]),y:vI({axis:i,ticks:o,bandSize:s,entry:S,index:A}),value:_,payload:S}}),w;return m||y?w=b.map(function(S){var A=Array.isArray(S.value)?S.value[0]:null;return v?{x:S.x,y:A!=null&&S.y!=null?i.scale(A):null}:{x:A!=null?n.scale(A):null,y:S.y}}):w=v?i.scale(g):n.scale(g),cs({points:b,baseLine:w,layout:p,isRange:y},h)});qa(nc,"renderDotItem",function(t,e){var r;if($.isValidElement(t))r=$.cloneElement(t,e);else if(Ze(t))r=t(e);else{var n=ut("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=yB(e,LIe);r=$.createElement(ax,kc({},a,{key:i,className:n}))}return r});function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(t)}function qIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KIe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SB(n.key),n)}}function XIe(t,e,r){return e&&KIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YIe(t,e,r){return e=xv(e),ZIe(t,wB()?Reflect.construct(e,r||[],xv(t).constructor):e.apply(t,r))}function ZIe(t,e){if(e&&(Cd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QIe(t)}function QIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(wB=function(){return!!t})()}function xv(t){return xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xv(t)}function JIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V2(t,e)}function V2(t,e){return V2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},V2(t,e)}function AB(t,e,r){return e=SB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SB(t){var e=e3e(t,"string");return Cd(e)=="symbol"?e:e+""}function e3e(t,e){if(Cd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function U2(){return U2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},U2.apply(this,arguments)}function t3e(t){var e=t.xAxisId,r=wC(),n=AC(),i=aB(e);return i==null?null:x.createElement(hf,U2({},i,{className:ut("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Po(o,!0)}}))}var pf=function(t){function e(){return qIe(this,e),YIe(this,e,arguments)}return JIe(e,t),XIe(e,[{key:"render",value:function(){return x.createElement(t3e,this.props)}}])}(x.Component);AB(pf,"displayName","XAxis");AB(pf,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}function r3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EB(n.key),n)}}function i3e(t,e,r){return e&&n3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a3e(t,e,r){return e=bv(e),o3e(t,_B()?Reflect.construct(e,r||[],bv(t).constructor):e.apply(t,r))}function o3e(t,e){if(e&&(Ed(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s3e(t)}function s3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(_B=function(){return!!t})()}function bv(t){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bv(t)}function c3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W2(t,e)}function W2(t,e){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},W2(t,e)}function CB(t,e,r){return e=EB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EB(t){var e=l3e(t,"string");return Ed(e)=="symbol"?e:e+""}function l3e(t,e){if(Ed(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ed(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function H2(){return H2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H2.apply(this,arguments)}var u3e=function(e){var r=e.yAxisId,n=wC(),i=AC(),a=oB(r);return a==null?null:x.createElement(hf,H2({},a,{className:ut("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(s){return Po(s,!0)}}))},mf=function(t){function e(){return r3e(this,e),a3e(this,e,arguments)}return c3e(e,t),i3e(e,[{key:"render",value:function(){return x.createElement(u3e,this.props)}}])}(x.Component);CB(mf,"displayName","YAxis");CB(mf,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function q3(t){return p3e(t)||h3e(t)||f3e(t)||d3e()}function d3e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f3e(t,e){if(t){if(typeof t=="string")return G2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G2(t,e)}}function h3e(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function p3e(t){if(Array.isArray(t))return G2(t)}function G2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var q2=function(e,r,n,i,a){var o=ea(e,_C),s=ea(e,px),l=[].concat(q3(o),q3(s)),u=ea(e,gx),d="".concat(i,"Id"),f=i[0],h=r;if(l.length&&(h=l.reduce(function(g,v){if(v.props[d]===n&&no(v.props,"extendDomain")&&we(v.props[f])){var y=v.props[f];return[Math.min(g[0],y),Math.max(g[1],y)]}return g},h)),u.length){var p="".concat(f,"1"),m="".concat(f,"2");h=u.reduce(function(g,v){if(v.props[d]===n&&no(v.props,"extendDomain")&&we(v.props[p])&&we(v.props[m])){var y=v.props[p],b=v.props[m];return[Math.min(g[0],y,b),Math.max(g[1],y,b)]}return g},h)}return a&&a.length&&(h=a.reduce(function(g,v){return we(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},h)),h},NB={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||l,h),m=r?r+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],p]:l._events[m].push(p):(l._events[m]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},s.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,d,f,h,p,m){var g=r?r+u:u;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,b,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,p),!0;case 6:return v.fn.call(v.context,d,f,h,p,m),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];v.fn.apply(v.context,b)}else{var S=v.length,A;for(w=0;w<S;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),y){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,f);break;case 4:v[w].fn.call(v[w].context,d,f,h);break;default:if(!b)for(A=1,b=new Array(y-1);A<y;A++)b[A-1]=arguments[A];v[w].fn.apply(v[w].context,b)}}return!0},s.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},s.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},s.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&o(this,p);else{for(var g=0,v=[],y=m.length;g<y;g++)(m[g].fn!==d||h&&!m[g].once||f&&m[g].context!==f)&&v.push(m[g]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(NB);var m3e=NB.exports;const g3e=er(m3e);var Q1=new g3e,J1="recharts.syncMouseEvents";function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function v3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jB(n.key),n)}}function x3e(t,e,r){return e&&y3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eb(t,e,r){return e=jB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jB(t){var e=b3e(t,"string");return Pp(e)=="symbol"?e:e+""}function b3e(t,e){if(Pp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w3e=function(){function t(){v3e(this,t),eb(this,"activeIndex",0),eb(this,"coordinateList",[]),eb(this,"layout","horizontal")}return x3e(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,o=r.container,s=o===void 0?null:o,l=r.layout,u=l===void 0?null:l,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=a!=null?a:this.coordinateList)!==null&&n!==void 0?n:[],this.container=s!=null?s:this.container,this.layout=u!=null?u:this.layout,this.offset=f!=null?f:this.offset,this.mouseHandlerCallback=p!=null?p:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=a+l+u,h=o+this.offset.top+s/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function A3e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&we(n)&&we(i))return!0}return!1}function S3e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function TB(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,a=t.endAngle,o=dr(e,r,n,i),s=dr(e,r,n,a);return{points:[o,s],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function _3e(t,e,r){var n,i,a,o;if(t==="horizontal")n=e.x,a=n,i=r.top,o=r.top+r.height;else if(t==="vertical")i=e.y,o=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=dr(s,l,u,f),p=dr(s,l,d,f);n=h.x,i=h.y,a=p.x,o=p.y}else return TB(e);return[{x:n,y:i},{x:a,y:o}]}function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function K3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?K3(Object(r),!0).forEach(function(n){C3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C3e(t,e,r){return e=E3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function E3e(t){var e=N3e(t,"string");return Op(e)=="symbol"?e:e+""}function N3e(t,e){if(Op(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j3e(t){var e,r,n=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,s=t.activePayload,l=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!a||!o||h!=="ScatterChart"&&i!=="axis")return null;var m,g=Eu;if(h==="ScatterChart")m=o,g=YNe;else if(h==="BarChart")m=S3e(f,o,l,d),g=vC;else if(f==="radial"){var v=TB(o),y=v.cx,b=v.cy,w=v.radius,S=v.startAngle,A=v.endAngle;m={cx:y,cy:b,startAngle:S,endAngle:A,innerRadius:w,outerRadius:w},g=S9}else m={points:_3e(f,o,l)},g=Eu;var _=Zm(Zm(Zm(Zm({stroke:"#ccc",pointerEvents:"none"},l),m),qe(p,!1)),{},{payload:s,payloadIndex:u,className:ut("recharts-tooltip-cursor",p.className)});return x.isValidElement(p)?x.cloneElement(p,_):x.createElement(g,_)}var T3e=["item"],P3e=["children","className","width","height","style","compact","title","desc"];function Nd(t){"@babel/helpers - typeof";return Nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nd(t)}function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hu.apply(this,arguments)}function X3(t,e){return D3e(t)||I3e(t,e)||OB(t,e)||O3e()}function O3e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I3e(t,e){var r=t==null?null:typeof Symbol!="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(d){u=!0,i=d}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function D3e(t){if(Array.isArray(t))return t}function Y3(t,e){if(t==null)return{};var r=k3e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function k3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function M3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IB(n.key),n)}}function $3e(t,e,r){return e&&R3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function L3e(t,e,r){return e=wv(e),F3e(t,PB()?Reflect.construct(e,r||[],wv(t).constructor):e.apply(t,r))}function F3e(t,e){if(e&&(Nd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B3e(t)}function B3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(PB=function(){return!!t})()}function wv(t){return wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wv(t)}function z3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K2(t,e)}function K2(t,e){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},K2(t,e)}function jd(t){return W3e(t)||U3e(t)||OB(t)||V3e()}function V3e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function OB(t,e){if(t){if(typeof t=="string")return X2(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X2(t,e)}}function U3e(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function W3e(t){if(Array.isArray(t))return X2(t)}function X2(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Z3(Object(r),!0).forEach(function(n){Xe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xe(t,e,r){return e=IB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IB(t){var e=H3e(t,"string");return Nd(e)=="symbol"?e:e+""}function H3e(t,e){if(Nd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G3e={xAxis:["bottom","top"],yAxis:["left","right"]},q3e={width:"100%",height:"100%"},DB={x:0,y:0};function Qm(t){return t}var K3e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},X3e=function(e,r,n,i){var a=r.find(function(d){return d&&d.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return fe(fe(fe({},i),dr(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,u=i.angle;return fe(fe(fe({},i),dr(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return DB},vx=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,o=(n!=null?n:[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(jd(s),jd(u)):s},[]);return o.length>0?o:e&&e.length&&we(i)&&we(a)?e.slice(i,a+1):[]};function kB(t){return t==="number"?[0,"auto"]:void 0}var Y2=function(e,r,n,i){var a=e.graphicalItems,o=e.tooltipAxis,s=vx(r,e);return n<0||!a||!a.length||n>=s.length?null:a.reduce(function(l,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var p=f===void 0?s:f;h=Ag(p,o.dataKey,i)}else h=f&&f[n]||s[n];return h?[].concat(jd(l),[v9(u,h)]):l},[])},Q3=function(e,r,n,i){var a=i||{x:e.chartX,y:e.chartY},o=K3e(a,n),s=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,d=b_e(o,s,u,l);if(d>=0&&u){var f=u[d]&&u[d].value,h=Y2(e,r,d,f),p=X3e(n,s,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},Y3e=function(e,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,p=d9(d,a);return n.reduce(function(m,g){var v,y=g.type.defaultProps!==void 0?fe(fe({},g.type.defaultProps),g.props):g.props,b=y.type,w=y.dataKey,S=y.allowDataOverflow,A=y.allowDuplicatedCategory,_=y.scale,E=y.ticks,N=y.includeHidden,T=y[o];if(m[T])return m;var O=vx(e.data,{graphicalItems:i.filter(function(H){var J,de=o in H.props?H.props[o]:(J=H.type.defaultProps)===null||J===void 0?void 0:J[o];return de===T}),dataStartIndex:l,dataEndIndex:u}),j=O.length,P,D,F;A3e(y.domain,S,b)&&(P=d2(y.domain,null,S),p&&(b==="number"||_!=="auto")&&(F=xh(O,w,"category")));var I=kB(b);if(!P||P.length===0){var k,R=(k=y.domain)!==null&&k!==void 0?k:I;if(w){if(P=xh(O,w,b),b==="category"&&p){var L=lfe(P);A&&L?(D=P,P=cv(0,j)):A||(P=wI(R,P,g).reduce(function(H,J){return H.indexOf(J)>=0?H:[].concat(jd(H),[J])},[]))}else if(b==="category")A?P=P.filter(function(H){return H!==""&&!dt(H)}):P=wI(R,P,g).reduce(function(H,J){return H.indexOf(J)>=0||J===""||dt(J)?H:[].concat(jd(H),[J])},[]);else if(b==="number"){var V=C_e(O,i.filter(function(H){var J,de,se=o in H.props?H.props[o]:(J=H.type.defaultProps)===null||J===void 0?void 0:J[o],Ee="hide"in H.props?H.props.hide:(de=H.type.defaultProps)===null||de===void 0?void 0:de.hide;return se===T&&(N||!Ee)}),w,a,d);V&&(P=V)}p&&(b==="number"||_!=="auto")&&(F=xh(O,w,"category"))}else p?P=cv(0,j):s&&s[T]&&s[T].hasStack&&b==="number"?P=h==="expand"?[0,1]:g9(s[T].stackGroups,l,u):P=u9(O,i.filter(function(H){var J=o in H.props?H.props[o]:H.type.defaultProps[o],de="hide"in H.props?H.props.hide:H.type.defaultProps.hide;return J===T&&(N||!de)}),b,d,!0);if(b==="number")P=q2(f,P,T,a,E),R&&(P=d2(R,P,S));else if(b==="category"&&R){var W=R,q=P.every(function(H){return W.indexOf(H)>=0});q&&(P=W)}}return fe(fe({},m),{},Xe({},T,fe(fe({},y),{},{axisType:a,domain:P,categoricalDomain:F,duplicateDomain:D,originalDomain:(v=y.domain)!==null&&v!==void 0?v:I,isCategorical:p,layout:d})))},{})},Z3e=function(e,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,o=r.axisIdKey,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.layout,f=e.children,h=vx(e.data,{graphicalItems:n,dataStartIndex:l,dataEndIndex:u}),p=h.length,m=d9(d,a),g=-1;return n.reduce(function(v,y){var b=y.type.defaultProps!==void 0?fe(fe({},y.type.defaultProps),y.props):y.props,w=b[o],S=kB("number");if(!v[w]){g++;var A;return m?A=cv(0,p):s&&s[w]&&s[w].hasStack?(A=g9(s[w].stackGroups,l,u),A=q2(f,A,w,a)):(A=d2(S,u9(h,n.filter(function(_){var E,N,T=o in _.props?_.props[o]:(E=_.type.defaultProps)===null||E===void 0?void 0:E[o],O="hide"in _.props?_.props.hide:(N=_.type.defaultProps)===null||N===void 0?void 0:N.hide;return T===w&&!O}),"number",d),i.defaultProps.allowDataOverflow),A=q2(f,A,w,a)),fe(fe({},v),{},Xe({},w,fe(fe({axisType:a},i.defaultProps),{},{hide:!0,orientation:Di(G3e,"".concat(a,".").concat(g%2),null),domain:A,originalDomain:S,isCategorical:m,layout:d})))}return v},{})},Q3e=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,o=r.graphicalItems,s=r.stackGroups,l=r.dataStartIndex,u=r.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=ea(d,a),p={};return h&&h.length?p=Y3e(e,{axes:h,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(p=Z3e(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),p},J3e=function(e){var r=ms(e),n=Po(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:W_(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Yg(r,n)}},J3=function(e){var r=e.children,n=e.defaultShowTooltip,i=Ai(r,yd),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},eDe=function(e){return!e||!e.length?!1:e.some(function(r){var n=Mo(r&&r.type);return n&&n.indexOf("Bar")>=0})},eD=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},tDe=function(e,r){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,u=n.width,d=n.height,f=n.children,h=n.margin||{},p=Ai(f,yd),m=Ai(f,Xc),g=Object.keys(l).reduce(function(A,_){var E=l[_],N=E.orientation;return!E.mirror&&!E.hide?fe(fe({},A),{},Xe({},N,A[N]+E.width)):A},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(A,_){var E=o[_],N=E.orientation;return!E.mirror&&!E.hide?fe(fe({},A),{},Xe({},N,Di(A,"".concat(N))+E.height)):A},{top:h.top||0,bottom:h.bottom||0}),y=fe(fe({},v),g),b=y.bottom;p&&(y.bottom+=p.props.height||yd.defaultProps.height),m&&r&&(y=S_e(y,i,n,r));var w=u-y.left-y.right,S=d-y.top-y.bottom;return fe(fe({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(S,0)})},rDe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},jC=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(y,b){var w=b.graphicalItems,S=b.stackGroups,A=b.offset,_=b.updateId,E=b.dataStartIndex,N=b.dataEndIndex,T=y.barSize,O=y.layout,j=y.barGap,P=y.barCategoryGap,D=y.maxBarSize,F=eD(O),I=F.numericAxisName,k=F.cateAxisName,R=eDe(w),L=[];return w.forEach(function(V,W){var q=vx(y.data,{graphicalItems:[V],dataStartIndex:E,dataEndIndex:N}),H=V.type.defaultProps!==void 0?fe(fe({},V.type.defaultProps),V.props):V.props,J=H.dataKey,de=H.maxBarSize,se=H["".concat(I,"Id")],Ee=H["".concat(k,"Id")],Ue={},ge=l.reduce(function(U,Z){var ce=b["".concat(Z.axisType,"Map")],xe=H["".concat(Z.axisType,"Id")];ce&&ce[xe]||Z.axisType==="zAxis"||vl();var me=ce[xe];return fe(fe({},U),{},Xe(Xe({},Z.axisType,me),"".concat(Z.axisType,"Ticks"),Po(me)))},Ue),Y=ge[k],te=ge["".concat(k,"Ticks")],ae=S&&S[se]&&S[se].hasStack&&k_e(V,S[se].stackGroups),X=Mo(V.type).indexOf("Bar")>=0,be=Yg(Y,te),ue=[],Pe=R&&w_e({barSize:T,stackGroups:S,totalSize:rDe(ge,k)});if(X){var oe,_e,De=dt(de)?D:de,he=(oe=(_e=Yg(Y,te,!0))!==null&&_e!==void 0?_e:De)!==null&&oe!==void 0?oe:0;ue=A_e({barGap:j,barCategoryGap:P,bandSize:he!==be?he:be,sizeList:Pe[Ee],maxBarSize:De}),he!==be&&(ue=ue.map(function(U){return fe(fe({},U),{},{position:fe(fe({},U.position),{},{offset:U.position.offset-he/2})})}))}var z=V&&V.type&&V.type.getComposedData;z&&L.push({props:fe(fe({},z(fe(fe({},ge),{},{displayedData:q,props:y,dataKey:J,item:V,bandSize:be,barPosition:ue,offset:A,stackedData:ae,layout:O,dataStartIndex:E,dataEndIndex:N}))),{},Xe(Xe(Xe({key:V.key||"item-".concat(W)},I,ge[I]),k,ge[k]),"animationId",_)),childIndex:Afe(V,y.children),item:V})}),L},p=function(y,b){var w=y.props,S=y.dataStartIndex,A=y.dataEndIndex,_=y.updateId;if(!pP({props:w}))return null;var E=w.children,N=w.layout,T=w.stackOffset,O=w.data,j=w.reverseStackOrder,P=eD(N),D=P.numericAxisName,F=P.cateAxisName,I=ea(E,n),k=I_e(O,I,"".concat(D,"Id"),"".concat(F,"Id"),T,j),R=l.reduce(function(H,J){var de="".concat(J.axisType,"Map");return fe(fe({},H),{},Xe({},de,Q3e(w,fe(fe({},J),{},{graphicalItems:I,stackGroups:J.axisType===D&&k,dataStartIndex:S,dataEndIndex:A}))))},{}),L=tDe(fe(fe({},R),{},{props:w,graphicalItems:I}),b==null?void 0:b.legendBBox);Object.keys(R).forEach(function(H){R[H]=d(w,R[H],L,H.replace("Map",""),r)});var V=R["".concat(F,"Map")],W=J3e(V),q=h(w,fe(fe({},R),{},{dataStartIndex:S,dataEndIndex:A,updateId:_,graphicalItems:I,stackGroups:k,offset:L}));return fe(fe({formattedGraphicalItems:q,graphicalItems:I,offset:L,stackGroups:k},W),R)},m=function(v){function y(b){var w,S,A;return M3e(this,y),A=L3e(this,y,[b]),Xe(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xe(A,"accessibilityManager",new w3e),Xe(A,"handleLegendBBoxUpdate",function(_){if(_){var E=A.state,N=E.dataStartIndex,T=E.dataEndIndex,O=E.updateId;A.setState(fe({legendBBox:_},p({props:A.props,dataStartIndex:N,dataEndIndex:T,updateId:O},fe(fe({},A.state),{},{legendBBox:_}))))}}),Xe(A,"handleReceiveSyncEvent",function(_,E,N){if(A.props.syncId===_){if(N===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(E)}}),Xe(A,"handleBrushChange",function(_){var E=_.startIndex,N=_.endIndex;if(E!==A.state.dataStartIndex||N!==A.state.dataEndIndex){var T=A.state.updateId;A.setState(function(){return fe({dataStartIndex:E,dataEndIndex:N},p({props:A.props,dataStartIndex:E,dataEndIndex:N,updateId:T},A.state))}),A.triggerSyncEvent({dataStartIndex:E,dataEndIndex:N})}}),Xe(A,"handleMouseEnter",function(_){var E=A.getMouseInfo(_);if(E){var N=fe(fe({},E),{},{isTooltipActive:!0});A.setState(N),A.triggerSyncEvent(N);var T=A.props.onMouseEnter;Ze(T)&&T(N,_)}}),Xe(A,"triggeredAfterMouseMove",function(_){var E=A.getMouseInfo(_),N=E?fe(fe({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(N),A.triggerSyncEvent(N);var T=A.props.onMouseMove;Ze(T)&&T(N,_)}),Xe(A,"handleItemMouseEnter",function(_){A.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),Xe(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Xe(A,"handleMouseMove",function(_){_.persist(),A.throttleTriggeredAfterMouseMove(_)}),Xe(A,"handleMouseLeave",function(_){A.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};A.setState(E),A.triggerSyncEvent(E);var N=A.props.onMouseLeave;Ze(N)&&N(E,_)}),Xe(A,"handleOuterEvent",function(_){var E=wfe(_),N=Di(A.props,"".concat(E));if(E&&Ze(N)){var T,O;/.*touch.*/i.test(E)?O=A.getMouseInfo(_.changedTouches[0]):O=A.getMouseInfo(_),N((T=O)!==null&&T!==void 0?T:{},_)}}),Xe(A,"handleClick",function(_){var E=A.getMouseInfo(_);if(E){var N=fe(fe({},E),{},{isTooltipActive:!0});A.setState(N),A.triggerSyncEvent(N);var T=A.props.onClick;Ze(T)&&T(N,_)}}),Xe(A,"handleMouseDown",function(_){var E=A.props.onMouseDown;if(Ze(E)){var N=A.getMouseInfo(_);E(N,_)}}),Xe(A,"handleMouseUp",function(_){var E=A.props.onMouseUp;if(Ze(E)){var N=A.getMouseInfo(_);E(N,_)}}),Xe(A,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),Xe(A,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&A.handleMouseDown(_.changedTouches[0])}),Xe(A,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&A.handleMouseUp(_.changedTouches[0])}),Xe(A,"handleDoubleClick",function(_){var E=A.props.onDoubleClick;if(Ze(E)){var N=A.getMouseInfo(_);E(N,_)}}),Xe(A,"handleContextMenu",function(_){var E=A.props.onContextMenu;if(Ze(E)){var N=A.getMouseInfo(_);E(N,_)}}),Xe(A,"triggerSyncEvent",function(_){A.props.syncId!==void 0&&Q1.emit(J1,A.props.syncId,_,A.eventEmitterSymbol)}),Xe(A,"applySyncEvent",function(_){var E=A.props,N=E.layout,T=E.syncMethod,O=A.state.updateId,j=_.dataStartIndex,P=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)A.setState(fe({dataStartIndex:j,dataEndIndex:P},p({props:A.props,dataStartIndex:j,dataEndIndex:P,updateId:O},A.state)));else if(_.activeTooltipIndex!==void 0){var D=_.chartX,F=_.chartY,I=_.activeTooltipIndex,k=A.state,R=k.offset,L=k.tooltipTicks;if(!R)return;if(typeof T=="function")I=T(L,_);else if(T==="value"){I=-1;for(var V=0;V<L.length;V++)if(L[V].value===_.activeLabel){I=V;break}}var W=fe(fe({},R),{},{x:R.left,y:R.top}),q=Math.min(D,W.x+W.width),H=Math.min(F,W.y+W.height),J=L[I]&&L[I].value,de=Y2(A.state,A.props.data,I),se=L[I]?{x:N==="horizontal"?L[I].coordinate:q,y:N==="horizontal"?H:L[I].coordinate}:DB;A.setState(fe(fe({},_),{},{activeLabel:J,activeCoordinate:se,activePayload:de,activeTooltipIndex:I}))}else A.setState(_)}),Xe(A,"renderCursor",function(_){var E,N=A.state,T=N.isTooltipActive,O=N.activeCoordinate,j=N.activePayload,P=N.offset,D=N.activeTooltipIndex,F=N.tooltipAxisBandSize,I=A.getTooltipEventType(),k=(E=_.props.active)!==null&&E!==void 0?E:T,R=A.props.layout,L=_.key||"_recharts-cursor";return $.createElement(j3e,{key:L,activeCoordinate:O,activePayload:j,activeTooltipIndex:D,chartName:r,element:_,isActive:k,layout:R,offset:P,tooltipAxisBandSize:F,tooltipEventType:I})}),Xe(A,"renderPolarAxis",function(_,E,N){var T=Di(_,"type.axisType"),O=Di(A.state,"".concat(T,"Map")),j=_.type.defaultProps,P=j!==void 0?fe(fe({},j),_.props):_.props,D=O&&O[P["".concat(T,"Id")]];return x.cloneElement(_,fe(fe({},D),{},{className:ut(T,D.className),key:_.key||"".concat(E,"-").concat(N),ticks:Po(D,!0)}))}),Xe(A,"renderPolarGrid",function(_){var E=_.props,N=E.radialLines,T=E.polarAngles,O=E.polarRadius,j=A.state,P=j.radiusAxisMap,D=j.angleAxisMap,F=ms(P),I=ms(D),k=I.cx,R=I.cy,L=I.innerRadius,V=I.outerRadius;return x.cloneElement(_,{polarAngles:Array.isArray(T)?T:Po(I,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(O)?O:Po(F,!0).map(function(W){return W.coordinate}),cx:k,cy:R,innerRadius:L,outerRadius:V,key:_.key||"polar-grid",radialLines:N})}),Xe(A,"renderLegend",function(){var _=A.state.formattedGraphicalItems,E=A.props,N=E.children,T=E.width,O=E.height,j=A.props.margin||{},P=T-(j.left||0)-(j.right||0),D=c9({children:N,formattedGraphicalItems:_,legendWidth:P,legendContent:u});if(!D)return null;var F=D.item,I=Y3(D,T3e);return x.cloneElement(F,fe(fe({},I),{},{chartWidth:T,chartHeight:O,margin:j,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Xe(A,"renderTooltip",function(){var _,E=A.props,N=E.children,T=E.accessibilityLayer,O=Ai(N,Gi);if(!O)return null;var j=A.state,P=j.isTooltipActive,D=j.activeCoordinate,F=j.activePayload,I=j.activeLabel,k=j.offset,R=(_=O.props.active)!==null&&_!==void 0?_:P;return x.cloneElement(O,{viewBox:fe(fe({},k),{},{x:k.left,y:k.top}),active:R,label:I,payload:R?F:[],coordinate:D,accessibilityLayer:T})}),Xe(A,"renderBrush",function(_){var E=A.props,N=E.margin,T=E.data,O=A.state,j=O.offset,P=O.dataStartIndex,D=O.dataEndIndex,F=O.updateId;return x.cloneElement(_,{key:_.key||"_recharts-brush",onChange:qm(A.handleBrushChange,_.props.onChange),data:T,x:we(_.props.x)?_.props.x:j.left,y:we(_.props.y)?_.props.y:j.top+j.height+j.brushBottom-(N.bottom||0),width:we(_.props.width)?_.props.width:j.width,startIndex:P,endIndex:D,updateId:"brush-".concat(F)})}),Xe(A,"renderReferenceElement",function(_,E,N){if(!_)return null;var T=A,O=T.clipPathId,j=A.state,P=j.xAxisMap,D=j.yAxisMap,F=j.offset,I=_.type.defaultProps||{},k=_.props,R=k.xAxisId,L=R===void 0?I.xAxisId:R,V=k.yAxisId,W=V===void 0?I.yAxisId:V;return x.cloneElement(_,{key:_.key||"".concat(E,"-").concat(N),xAxis:P[L],yAxis:D[W],viewBox:{x:F.left,y:F.top,width:F.width,height:F.height},clipPathId:O})}),Xe(A,"renderActivePoints",function(_){var E=_.item,N=_.activePoint,T=_.basePoint,O=_.childIndex,j=_.isRange,P=[],D=E.props.key,F=E.item.type.defaultProps!==void 0?fe(fe({},E.item.type.defaultProps),E.item.props):E.item.props,I=F.activeDot,k=F.dataKey,R=fe(fe({index:O,dataKey:k,cx:N.x,cy:N.y,r:4,fill:gC(E.item),strokeWidth:2,stroke:"#fff",payload:N.payload,value:N.value},qe(I,!1)),Sg(I));return P.push(y.renderActiveDot(I,R,"".concat(D,"-activePoint-").concat(O))),T?P.push(y.renderActiveDot(I,fe(fe({},R),{},{cx:T.x,cy:T.y}),"".concat(D,"-basePoint-").concat(O))):j&&P.push(null),P}),Xe(A,"renderGraphicChild",function(_,E,N){var T=A.filterFormatItem(_,E,N);if(!T)return null;var O=A.getTooltipEventType(),j=A.state,P=j.isTooltipActive,D=j.tooltipAxis,F=j.activeTooltipIndex,I=j.activeLabel,k=A.props.children,R=Ai(k,Gi),L=T.props,V=L.points,W=L.isRange,q=L.baseLine,H=T.item.type.defaultProps!==void 0?fe(fe({},T.item.type.defaultProps),T.item.props):T.item.props,J=H.activeDot,de=H.hide,se=H.activeBar,Ee=H.activeShape,Ue=!!(!de&&P&&R&&(J||se||Ee)),ge={};O!=="axis"&&R&&R.props.trigger==="click"?ge={onClick:qm(A.handleItemMouseEnter,_.props.onClick)}:O!=="axis"&&(ge={onMouseLeave:qm(A.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:qm(A.handleItemMouseEnter,_.props.onMouseEnter)});var Y=x.cloneElement(_,fe(fe({},T.props),ge));function te(Z){return typeof D.dataKey=="function"?D.dataKey(Z.payload):null}if(Ue)if(F>=0){var ae,X;if(D.dataKey&&!D.allowDuplicatedCategory){var be=typeof D.dataKey=="function"?te:"payload.".concat(D.dataKey.toString());ae=Ag(V,be,I),X=W&&q&&Ag(q,be,I)}else ae=V==null?void 0:V[F],X=W&&q&&q[F];if(Ee||se){var ue=_.props.activeIndex!==void 0?_.props.activeIndex:F;return[x.cloneElement(_,fe(fe(fe({},T.props),ge),{},{activeIndex:ue})),null,null]}if(!dt(ae))return[Y].concat(jd(A.renderActivePoints({item:T,activePoint:ae,basePoint:X,childIndex:F,isRange:W})))}else{var Pe,oe=(Pe=A.getItemByXY(A.state.activeCoordinate))!==null&&Pe!==void 0?Pe:{graphicalItem:Y},_e=oe.graphicalItem,De=_e.item,he=De===void 0?_:De,z=_e.childIndex,U=fe(fe(fe({},T.props),ge),{},{activeIndex:z});return[x.cloneElement(he,U),null,null]}return W?[Y,null,null]:[Y,null]}),Xe(A,"renderCustomized",function(_,E,N){return x.cloneElement(_,fe(fe({key:"recharts-customized-".concat(N)},A.props),A.state))}),Xe(A,"renderMap",{CartesianGrid:{handler:Qm,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:Qm},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:Qm},YAxis:{handler:Qm},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:of("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=sF(A.triggeredAfterMouseMove,(S=b.throttleDelay)!==null&&S!==void 0?S:1e3/60),A.state={},A}return z3e(y,v),$3e(y,[{key:"componentDidMount",value:function(){var w,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,S=w.children,A=w.data,_=w.height,E=w.layout,N=Ai(S,Gi);if(N){var T=N.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,j=Y2(this.state,A,T,O),P=this.state.tooltipTicks[T].coordinate,D=(this.state.offset.top+_)/2,F=E==="horizontal",I=F?{x:P,y:D}:{y:P,x:D},k=this.state.formattedGraphicalItems.find(function(L){var V=L.item;return V.type.name==="Scatter"});k&&(I=fe(fe({},I),k.props.points[T].tooltipPosition),j=k.props.points[T].tooltipPayload);var R={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:O,activePayload:j,activeCoordinate:I};this.setState(R),this.renderCursor(N),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var A,_;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(w){Cw([Ai(w.children,Gi)],[Ai(this.props.children,Gi)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ai(this.props.children,Gi);if(w&&typeof w.props.shared=="boolean"){var S=w.props.shared?"axis":"item";return s.indexOf(S)>=0?S:a}return a}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var S=this.container,A=S.getBoundingClientRect(),_=Kbe(A),E={chartX:Math.round(w.pageX-_.left),chartY:Math.round(w.pageY-_.top)},N=A.width/S.offsetWidth||1,T=this.inRange(E.chartX,E.chartY,N);if(!T)return null;var O=this.state,j=O.xAxisMap,P=O.yAxisMap,D=this.getTooltipEventType(),F=Q3(this.state,this.props.data,this.props.layout,T);if(D!=="axis"&&j&&P){var I=ms(j).scale,k=ms(P).scale,R=I&&I.invert?I.invert(E.chartX):null,L=k&&k.invert?k.invert(E.chartY):null;return fe(fe({},E),{},{xValue:R,yValue:L},F)}return F?fe(fe({},E),F):null}},{key:"inRange",value:function(w,S){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,E=w/A,N=S/A;if(_==="horizontal"||_==="vertical"){var T=this.state.offset,O=E>=T.left&&E<=T.left+T.width&&N>=T.top&&N<=T.top+T.height;return O?{x:E,y:N}:null}var j=this.state,P=j.angleAxisMap,D=j.radiusAxisMap;if(P&&D){var F=ms(P);return _I({x:E,y:N},F)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,S=this.getTooltipEventType(),A=Ai(w,Gi),_={};A&&S==="axis"&&(A.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=Sg(this.props,this.handleOuterEvent);return fe(fe({},E),_)}},{key:"addListener",value:function(){Q1.on(J1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Q1.removeListener(J1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,S,A){for(var _=this.state.formattedGraphicalItems,E=0,N=_.length;E<N;E++){var T=_[E];if(T.item===w||T.props.key===w.key||S===Mo(T.item.type)&&A===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,S=this.state.offset,A=S.left,_=S.top,E=S.height,N=S.width;return $.createElement("defs",null,$.createElement("clipPath",{id:w},$.createElement("rect",{x:A,y:_,height:E,width:N})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(S,A){var _=X3(A,2),E=_[0],N=_[1];return fe(fe({},S),{},Xe({},E,N.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(S,A){var _=X3(A,2),E=_[0],N=_[1];return fe(fe({},S),{},Xe({},E,N.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(w){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(w){var S=this.state,A=S.formattedGraphicalItems,_=S.activeItem;if(A&&A.length)for(var E=0,N=A.length;E<N;E++){var T=A[E],O=T.props,j=T.item,P=j.type.defaultProps!==void 0?fe(fe({},j.type.defaultProps),j.props):j.props,D=Mo(j.type);if(D==="Bar"){var F=(O.data||[]).find(function(L){return PNe(w,L)});if(F)return{graphicalItem:T,payload:F}}else if(D==="RadialBar"){var I=(O.data||[]).find(function(L){return _I(w,L)});if(I)return{graphicalItem:T,payload:I}}else if(ux(T,_)||dx(T,_)||Cp(T,_)){var k=yTe({graphicalItem:T,activeTooltipItem:_,itemData:P.data}),R=P.activeIndex===void 0?k:P.activeIndex;return{graphicalItem:fe(fe({},T),{},{childIndex:R}),payload:Cp(T,_)?P.data[k]:T.props.data[k]}}}return null}},{key:"render",value:function(){var w=this;if(!pP(this))return null;var S=this.props,A=S.children,_=S.className,E=S.width,N=S.height,T=S.style,O=S.compact,j=S.title,P=S.desc,D=Y3(S,P3e),F=qe(D,!1);if(O)return $.createElement(I3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(Nw,hu({},F,{width:E,height:N,title:j,desc:P}),this.renderClipPath(),gP(A,this.renderMap)));if(this.props.accessibilityLayer){var I,k;F.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,F.role=(k=this.props.role)!==null&&k!==void 0?k:"application",F.onKeyDown=function(L){w.accessibilityManager.keyboardEvent(L)},F.onFocus=function(){w.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return $.createElement(I3,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",hu({className:ut("recharts-wrapper",_),style:fe({position:"relative",cursor:"default",width:E,height:N},T)},R,{ref:function(V){w.container=V}}),$.createElement(Nw,hu({},F,{width:E,height:N,title:j,desc:P,style:q3e}),this.renderClipPath(),gP(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);Xe(m,"displayName",r),Xe(m,"defaultProps",fe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Xe(m,"getDerivedStateFromProps",function(v,y){var b=v.dataKey,w=v.data,S=v.children,A=v.width,_=v.height,E=v.layout,N=v.stackOffset,T=v.margin,O=y.dataStartIndex,j=y.dataEndIndex;if(y.updateId===void 0){var P=J3(v);return fe(fe(fe({},P),{},{updateId:0},p(fe(fe({props:v},P),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:w,prevWidth:A,prevHeight:_,prevLayout:E,prevStackOffset:N,prevMargin:T,prevChildren:S})}if(b!==y.prevDataKey||w!==y.prevData||A!==y.prevWidth||_!==y.prevHeight||E!==y.prevLayout||N!==y.prevStackOffset||!Su(T,y.prevMargin)){var D=J3(v),F={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},I=fe(fe({},Q3(y,w,E)),{},{updateId:y.updateId+1}),k=fe(fe(fe({},D),F),I);return fe(fe(fe({},k),p(fe({props:v},k),y)),{},{prevDataKey:b,prevData:w,prevWidth:A,prevHeight:_,prevLayout:E,prevStackOffset:N,prevMargin:T,prevChildren:S})}if(!Cw(S,y.prevChildren)){var R,L,V,W,q=Ai(S,yd),H=q&&(R=(L=q.props)===null||L===void 0?void 0:L.startIndex)!==null&&R!==void 0?R:O,J=q&&(V=(W=q.props)===null||W===void 0?void 0:W.endIndex)!==null&&V!==void 0?V:j,de=H!==O||J!==j,se=!dt(w),Ee=se&&!de?y.updateId:y.updateId+1;return fe(fe({updateId:Ee},p(fe(fe({props:v},y),{},{updateId:Ee,dataStartIndex:H,dataEndIndex:J}),y)),{},{prevChildren:S,dataStartIndex:H,dataEndIndex:J})}return null}),Xe(m,"renderActiveDot",function(v,y,b){var w;return x.isValidElement(v)?w=x.cloneElement(v,y):Ze(v)?w=v(y):w=$.createElement(ax,y),$.createElement(Ct,{className:"recharts-active-dot",key:b},w)});var g=x.forwardRef(function(y,b){return $.createElement(m,hu({},y,{ref:b}))});return g.displayName=m.displayName,g},nDe=jC({chartName:"BarChart",GraphicalChild:Lo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:pf},{axisType:"yAxis",AxisComp:mf}],formatAxisMap:Z9}),iDe=jC({chartName:"PieChart",GraphicalChild:Jo,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:lx},{axisType:"radiusAxis",AxisComp:sx}],formatAxisMap:W_e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),aDe=jC({chartName:"AreaChart",GraphicalChild:nc,axisComponents:[{axisType:"xAxis",AxisComp:pf},{axisType:"yAxis",AxisComp:mf}],formatAxisMap:Z9});function MB({isOpen:t,onClose:e,item:r}){var S;const n=Li(),i=A=>{A.stopPropagation()},a=A=>A.toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2})+" ",o=(A,_)=>(_-A)/A*100,s=r.historicalPriceWithDates||[],l=s.length>0;let u=[];if(l){const A=[...s].sort((E,N)=>new Date(E.date).getTime()-new Date(N.date).getTime()),_=A[0];if(_.oldPrice!==void 0&&_.oldPrice!==null){const E=new Date(_.date);E.setHours(E.getHours()-1),u.push({date:E,price:_.oldPrice,formattedDate:ur(E,"dd MMM",{locale:qr}),fullDate:"Prezzo originario - "+ur(E,"dd MMM yyyy, HH:mm",{locale:qr}),changeType:"original",oldPrice:null,index:0})}if(A.forEach((E,N)=>{u.push({date:E.date,price:E.price,formattedDate:ur(new Date(E.date),"dd MMM",{locale:qr}),fullDate:ur(new Date(E.date),"dd MMM yyyy, HH:mm",{locale:qr}),changeType:E.changeType,oldPrice:E.oldPrice,index:u.length})}),r.estimatedPrice){const E=(S=A[A.length-1])==null?void 0:S.price;E!==r.estimatedPrice&&u.push({date:new Date,price:r.estimatedPrice,formattedDate:"Oggi",fullDate:"Prezzo attuale",changeType:"current",oldPrice:E,index:u.length})}}const d=r.estimatedPrice||0,f=u.map(A=>A.price),h=s.length>0?s.find(A=>A.oldPrice!==void 0&&A.oldPrice!==null):null;h!=null&&h.oldPrice&&f.unshift(h.oldPrice);const p=f.length>0?Math.min(...f):d,m=f.length>0?Math.max(...f):d,g=f.length>0?f.reduce((A,_)=>A+_,0)/f.length:d,v=s.filter(A=>A.changeType==="increase").length,y=s.filter(A=>A.changeType==="decrease").length,b=[...s].sort((A,_)=>new Date(_.date).getTime()-new Date(A.date).getTime()),w=({active:A,payload:_})=>{if(A&&_&&_.length){const E=_[0].payload;return c.jsxs("div",{className:"bg-white p-3 border rounded-lg shadow-lg",children:[c.jsx("p",{className:"font-medium",children:a(E.price)}),c.jsx("p",{className:"text-sm text-gray-600",children:E.fullDate}),E.changeType==="original"&&c.jsx("p",{className:"text-xs text-blue-500",children:"Prezzo originario"}),E.oldPrice&&E.changeType!=="current"&&E.changeType!=="original"&&c.jsxs("p",{className:"text-xs text-gray-500",children:[E.changeType==="increase"?"":E.changeType==="decrease"?"":""," ","da ",a(E.oldPrice)]}),E.changeType==="current"&&c.jsx("p",{className:"text-xs text-green-500",children:"Prezzo attuale"})]})}return null};return c.jsx(Yt,{open:t,onOpenChange:e,children:c.jsxs(Ht,{className:"\n          ".concat(n?"max-w-[95vw] max-h-[95vh] w-[95vw] h-[95vh] p-4":"max-w-4xl max-h-[90vh]"," \n          overflow-hidden\n        "),onClick:i,children:[c.jsx(Zt,{className:n?"pb-2":"",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(Qt,{className:"flex items-center gap-2 ".concat(n?"text-base":""),children:[c.jsx(Gk,{className:"h-5 w-5 text-cambridge-newStyle ".concat(n?"h-4 w-4":"")}),c.jsxs("span",{className:n?"truncate max-w-[200px]":"",children:["Storico Prezzi - ",r.name]})]}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:A=>{A.stopPropagation(),e()},className:"h-8 w-8 p-0 shrink-0"})]})}),l?c.jsx("div",{className:"".concat(n?"h-[calc(95vh-120px)] overflow-y-auto":"max-h-[calc(90vh-120px)] overflow-y-auto"),children:c.jsxs("div",{className:"space-y-".concat(n?"4":"6"," pb-4"),children:[c.jsxs("div",{className:"grid gap-".concat(n?"2":"4"," ").concat(n?"grid-cols-2":"grid-cols-2 md:grid-cols-4"),children:[c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-".concat(n?"3":"4"),children:[c.jsx("div",{className:"text-gray-600 ".concat(n?"text-xs":"text-sm"),children:"Prezzo Attuale"}),c.jsx("div",{className:"font-bold text-green-600 ".concat(n?"text-base":"text-xl"),children:a(d)})]})}),c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-".concat(n?"3":"4"),children:[c.jsx("div",{className:"text-gray-600 ".concat(n?"text-xs":"text-sm"),children:"Prezzo Minimo"}),c.jsx("div",{className:"font-bold text-blue-600 ".concat(n?"text-base":"text-xl"),children:a(p)})]})}),!n&&c.jsxs(c.Fragment,{children:[c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-4",children:[c.jsx("div",{className:"text-sm text-gray-600",children:"Prezzo Massimo"}),c.jsx("div",{className:"text-xl font-bold text-red-600",children:a(m)})]})}),c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-4",children:[c.jsx("div",{className:"text-sm text-gray-600",children:"Prezzo Medio"}),c.jsx("div",{className:"text-xl font-bold text-gray-700",children:a(g)})]})})]})]}),n&&c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-3",children:[c.jsx("div",{className:"text-xs text-gray-600",children:"Prezzo Massimo"}),c.jsx("div",{className:"text-base font-bold text-red-600",children:a(m)})]})}),c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-3",children:[c.jsx("div",{className:"text-xs text-gray-600",children:"Prezzo Medio"}),c.jsx("div",{className:"text-base font-bold text-gray-700",children:a(g)})]})})]}),c.jsxs("div",{className:"flex justify-center items-center gap-6 py-3 bg-gray-50 rounded-lg ".concat(n?"mx-1":""),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Xi,{className:"text-red-500 ".concat(n?"h-4 w-4":"h-5 w-5")}),c.jsx("span",{className:"font-bold text-red-500 ".concat(n?"text-sm":"text-lg"),children:v}),c.jsx("span",{className:"text-gray-600 ".concat(n?"text-xs":"text-sm"),children:"aumenti"})]}),c.jsx("div",{className:"w-px h-6 bg-gray-300"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(F0,{className:"text-green-500 ".concat(n?"h-4 w-4":"h-5 w-5")}),c.jsx("span",{className:"font-bold text-green-500 ".concat(n?"text-sm":"text-lg"),children:y}),c.jsx("span",{className:"text-gray-600 ".concat(n?"text-xs":"text-sm"),children:"riduzioni"})]})]}),c.jsxs(Ie,{children:[c.jsx($r,{className:n?"pb-2":"",children:c.jsx(Qn,{className:n?"text-base":"text-lg",children:"Andamento Prezzi"})}),c.jsxs(Ve,{className:n?"p-2":"",children:[c.jsx("div",{className:"\n                      ".concat(n?"h-[280px]":"h-[400px]"," \n                      w-full \n                      overflow-x-auto overflow-y-hidden\n                      border rounded-lg bg-white\n                      scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-100\n                    "),style:{scrollbarWidth:"thin",scrollbarColor:"#9ca3af #f3f4f6"},children:c.jsx("div",{className:"".concat(n?"w-[700px] h-[280px]":"w-full h-full"," relative"),children:c.jsx(Kw,{width:"100%",height:"100%",children:c.jsxs(aDe,{data:u,margin:n?{top:20,right:20,left:50,bottom:70}:{top:20,right:30,left:20,bottom:20},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"priceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.3}),c.jsx("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:.1})]})}),c.jsx(NC,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),c.jsx(pf,{dataKey:"formattedDate",tick:{fontSize:n?9:12},stroke:"#666",angle:n?-90:0,textAnchor:n?"end":"middle",height:n?70:30,interval:0,dx:n?-3:0}),c.jsx(mf,{domain:["dataMin - 2","dataMax + 2"],tick:{fontSize:n?9:12},stroke:"#666",tickFormatter:A=>"".concat(A.toFixed(0)),width:n?50:60}),c.jsx(Gi,{content:c.jsx(w,{})}),c.jsx(nc,{type:"monotone",dataKey:"price",stroke:"#8884d8",strokeWidth:n?2:3,fill:"url(#priceGradient)",dot:{fill:"#8884d8",strokeWidth:2,r:n?3:4},activeDot:{r:n?4:6,fill:"#8884d8"}})]})})})}),n&&c.jsx("div",{className:"mt-2 text-center",children:c.jsx("p",{className:"text-xs text-gray-500",children:" Scorri orizzontalmente per vedere tutto il grafico "})})]})]}),c.jsxs(Ie,{children:[c.jsx($r,{className:n?"pb-2":"",children:c.jsx(Qn,{className:n?"text-base":"text-lg",children:"Ultimi Cambiamenti"})}),c.jsx(Ve,{className:n?"p-2":"",children:c.jsx("div",{className:"".concat(n?"max-h-[150px]":"max-h-[200px]"," overflow-y-auto space-y-").concat(n?"1":"2"),children:b.slice(0,5).map((A,_)=>{const E=A.changeType==="increase",N=A.changeType==="decrease",T=A.changeType==="initial",O=A.oldPrice&&!T?o(A.oldPrice,A.price):0;return c.jsxs("div",{className:"\n                            flex items-center justify-between \n                            rounded-lg border bg-gray-50\n                            ".concat(n?"p-2":"p-3","\n                          "),children:[c.jsxs("div",{className:"flex items-center gap-".concat(n?"2":"3"),children:[E&&c.jsx(Xi,{className:"text-red-500 ".concat(n?"h-3 w-3":"h-4 w-4")}),N&&c.jsx(F0,{className:"text-green-500 ".concat(n?"h-3 w-3":"h-4 w-4")}),T&&c.jsx(Ca,{className:"text-blue-500 ".concat(n?"h-3 w-3":"h-4 w-4")}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium ".concat(n?"text-xs":"text-sm"),children:a(A.price)}),c.jsx("div",{className:"text-gray-600 ".concat(n?"text-[10px]":"text-xs"),children:ur(new Date(A.date),n?"dd MMM, HH:mm":"dd MMM yyyy, HH:mm",{locale:qr})})]})]}),c.jsxs("div",{className:"text-right shrink-0",children:[!T&&A.oldPrice&&c.jsxs(ne,{variant:"outline",className:"\n                                  ".concat(n?"text-[10px] px-1 py-0":"text-xs","\n                                  ").concat(E?"text-red-600 border-red-300":"text-green-600 border-green-300","\n                                "),children:[E?"+":"",O.toFixed(1),"%"]}),T&&c.jsx(ne,{variant:"outline",className:"\n                                  text-blue-600 border-blue-300\n                                  ".concat(n?"text-[10px] px-1 py-0":"text-xs","\n                                "),children:"Primo prezzo"})]})]},_)})})})]})]})}):c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[c.jsx(ao,{className:"h-12 w-12 mb-4 ".concat(n?"h-8 w-8 mb-2":"")}),c.jsx("h3",{className:"font-medium mb-2 ".concat(n?"text-base":"text-lg"),children:"Nessuno storico disponibile"}),c.jsx("p",{className:"text-center ".concat(n?"text-xs":"text-sm"),children:"Non ci sono ancora dati storici sui prezzi per questo prodotto."})]})]})})}function oDe({item:t,categories:e,onEdit:r,onDelete:n,onComplete:i,_onUpdate:a,onClick:o}){const{user:s}=Bt(),{toast:l}=Nr(),[u,d]=x.useState(!1),[f,h]=x.useState(!1),p=(s==null?void 0:s.username)===t.createdBy||(s==null?void 0:s.role)==="admin"||t.isPublic,g=(()=>{const I=t.historicalPriceWithDates||[];if(I.length===0)return null;const k=I.filter(W=>W.changeType!=="initial").sort((W,q)=>new Date(q.date).getTime()-new Date(W.date).getTime())[0];if(!k)return null;const R=k.changeType==="increase",L=k.changeType==="decrease";if(!R&&!L)return null;let V=null;return k.oldPrice&&(V=(k.price-k.oldPrice)/k.oldPrice*100),{type:k.changeType,isIncrease:R,isDecrease:L,percentage:V,fromPrice:k.oldPrice,toPrice:k.price}})(),v=t.historicalPriceWithDates&&t.historicalPriceWithDates.length>0,b=((I,k=32)=>I.length<=k?{display:I,isTruncated:!1}:{display:I.substring(0,k)+"...",isTruncated:!0})(t.name||"Prodotto senza nome"),w=t.scrapingData&&t.scrapingData.scrapingSuccess!==!0,S=t.scrapingData&&t.scrapingData.scrapingSuccess===!0,A=I=>{if(!I||!gy(I))return"Data non disponibile";try{return Ju(I,{addSuffix:!0,locale:qr})}catch(k){return console.warn("Error formatting date:",k),"Data non valida"}},_=()=>G(this,null,function*(){d(!0);try{yield i(t.id),l({title:"Elemento archiviato",description:"Elemento Shopping segnato come archiviato!"})}catch(I){l({title:"Errore",description:"Impossibile archiviare l'elemento",variant:"destructive"})}finally{d(!1)}}),E=()=>G(this,null,function*(){try{yield n(t.id),l({title:"Elemento eliminato",description:"L'elemento  stato rimosso da Shopping"})}catch(I){l({title:"Errore",description:"Impossibile eliminare l'elemento",variant:"destructive"})}}),N=I=>{I.target.closest("button")||I.target.closest("a")||I.target.closest('[role="button"]')||o&&o(t)},T=I=>{I.stopPropagation(),h(!0)},O=e==null?void 0:e.find(I=>I.name===t.category),j={high:{label:"Alta",icon:kA,color:"text-red-600",className:"border-red-200 bg-red-50"},medium:{label:"Media",icon:kv,color:"text-yellow-600",className:"border-yellow-200 bg-yellow-50"},low:{label:"Bassa",icon:Wk,color:"text-green-600",className:"border-green-200 bg-green-50"}},P=j[t.priority]||j.medium,D=P.icon,F=I=>typeof I=="string"?I:isNaN(I)||I===null||I===void 0?"N/A":I.toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2})+" ";return c.jsx(YA,{children:c.jsxs(Ie,{className:"\n          hover:shadow-md transition-all duration-200 \n          ".concat(t.completed?"opacity-60 bg-gray-50":"bg-white hover:bg-gray-50"," \n          border-l-4 border-l-cambridge-blue\n          cursor-pointer\n        "),onClick:N,children:[c.jsxs(Ve,{className:"p-4 h-full flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.isTruncated?c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx("h3",{className:"font-semibold text-card-foreground text-sm leading-tight ".concat(t.completed?"line-through":""),children:b.display})}),c.jsx(kr,{children:c.jsx("p",{className:"max-w-xs",children:t.name})})]}):c.jsx("h3",{className:"font-semibold text-card-foreground text-sm leading-tight ".concat(t.completed?"line-through":""),children:b.display}),w&&c.jsxs(Ur,{children:[c.jsx(Wr,{children:c.jsx(Ph,{className:"h-3 w-3 text-blue-500 animate-pulse"})}),c.jsx(kr,{children:c.jsx("p",{children:"Analisi AI in corso..."})})]}),S&&c.jsxs(Ur,{children:[c.jsx(Wr,{children:c.jsx($p,{className:"h-3 w-3 text-purple-500"})}),c.jsx(kr,{children:c.jsx("p",{children:"Dati elaborati da AI"})})]}),g&&c.jsxs(Ur,{children:[c.jsx(Wr,{children:c.jsxs(ne,{variant:"outline",className:"text-white text-xs px-1 py-0 h-4 ".concat(g.isIncrease?"bg-red-500 border-red-500":"bg-green-500 border-green-500"),children:[g.isIncrease?c.jsx(Xi,{className:"h-2 w-2 mr-0.5"}):c.jsx(F0,{className:"h-2 w-2 mr-0.5"}),g.percentage&&Math.abs(g.percentage)>0?"".concat(g.percentage>0?"+":"").concat(g.percentage.toFixed(1),"%"):g.isIncrease?"":""]})}),c.jsx(kr,{children:c.jsxs("p",{children:["Prezzo ",g.isIncrease?"aumentato":"diminuito",g.fromPrice&&" da ".concat(F(g.fromPrice))," a ".concat(F(g.toPrice))]})})]})]}),t.brandName&&c.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[c.jsx(Mv,{className:"h-2.5 w-2.5 mr-1 flex-shrink-0"}),c.jsx("span",{className:"font-medium truncate",children:t.brandName})]})]}),c.jsxs("div",{className:"flex items-start space-x-1 ml-2 flex-shrink-0",children:[t.estimatedPrice&&c.jsx("div",{className:"flex items-center text-green-600 dark:text-green-400 font-semibold text-sm",children:F(t.estimatedPrice)}),v&&c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{variant:"ghost",size:"sm",onClick:T,className:"text-gray-400 hover:text-green-600 h-6 w-6 p-0",children:c.jsx(sh,{className:"h-3 w-3"})})}),c.jsx(kr,{children:c.jsx("p",{children:"Storico prezzi"})})]}),p&&c.jsxs("div",{className:"flex space-x-1",children:[c.jsx(Q,{variant:"ghost",size:"sm",onClick:I=>{I.stopPropagation(),r(t)},className:"text-gray-400 hover:text-cambridge-newStyle h-6 w-6 p-0",children:c.jsx(zo,{className:"h-3 w-3"})}),c.jsxs(fl,{children:[c.jsx(im,{asChild:!0,children:c.jsx(Q,{variant:"ghost",size:"sm",onClick:I=>I.stopPropagation(),className:"text-gray-400 hover:text-red-500 h-6 w-6 p-0",children:c.jsx(Mr,{className:"h-3 w-3"})})}),c.jsxs(Bs,{children:[c.jsxs(zs,{children:[c.jsx(Us,{children:"Conferma eliminazione"}),c.jsxs(Ws,{children:['Sei sicuro di voler eliminare "',t.name||"questo elemento",'"? Questa azione non pu essere annullata.']})]}),c.jsxs(Vs,{children:[c.jsx(Gs,{children:"Annulla"}),c.jsx(Hs,{onClick:E,className:"bg-red-500 hover:bg-red-600",children:"Elimina"})]})]})]})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsxs(ne,{variant:O!=null&&O.color?void 0:"outline",className:"text-xs px-2 py-0 h-5 cursor-help",style:O!=null&&O.color?{backgroundColor:"".concat(O.color,"20"),color:O.color,borderColor:O.color}:void 0,children:[(O==null?void 0:O.icon)&&c.jsx("span",{className:"mr-1 text-xs",children:O.icon}),t.category]})}),c.jsx(kr,{children:c.jsxs("p",{children:["Categoria: ",t.category]})})]}),c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsxs(ne,{variant:"outline",className:"".concat(P.color," border-current ").concat(P.className," text-xs px-2 py-0 h-5 cursor-help"),children:[c.jsx(D,{className:"h-2.5 w-2.5 mr-1"}),P.label]})}),c.jsx(kr,{children:c.jsxs("p",{children:["Priorit: ",P.label]})})]}),c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsxs(ne,{variant:"outline",className:"text-xs px-2 py-0 h-5 cursor-help ".concat(t.isPublic?"text-green-600 border-green-300 bg-green-50":"text-orange-600 border-orange-300 bg-orange-50"),children:[t.isPublic?c.jsx(Br,{className:"h-2.5 w-2.5 mr-1"}):c.jsx(Ir,{className:"h-2.5 w-2.5 mr-1"}),t.isPublic?"Pubblico":"Privato"]})}),c.jsx(kr,{children:c.jsxs("p",{children:["Visibilit: ",t.isPublic?"Pubblico":"Privato"]})})]})]}),t.notes&&c.jsx("div",{className:"mb-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-md flex-grow",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx(LA,{className:"h-3 w-3 mr-1.5 text-gray-500 mt-0.5 flex-shrink-0"}),c.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 line-clamp-2 leading-relaxed",children:t.notes})]})}),t.link&&c.jsx("div",{className:"mb-3",children:c.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",onClick:I=>I.stopPropagation(),className:"inline-flex items-center text-xs text-cambridge-newStyle hover:text-cambridge-newStyle/80 hover:underline",children:[c.jsx(rl,{className:"h-3 w-3 mr-1"}),"Vedi prodotto"]})}),c.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[c.jsx(ji,{className:"h-2.5 w-2.5 mr-1 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:t.createdBy})]}),c.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[c.jsx(Xr,{className:"h-2.5 w-2.5 mr-1"}),c.jsx("span",{className:"truncate",children:A(t.createdAt)})]})]}),!t.completed&&c.jsx("div",{className:"flex justify-center mt-3",children:c.jsx(Q,{onClick:I=>{I.stopPropagation(),_()},disabled:u,variant:"outline",size:"sm",className:"w-full h-8 bg-green-50 hover:bg-green-100 text-green-700 border-green-300 dark:bg-green-950/20 dark:text-green-400 dark:border-green-800 text-xs",children:u?"Segnando...":c.jsxs(c.Fragment,{children:[c.jsx(Er,{className:"mr-1 h-3 w-3"}),"Archivia"]})})})]}),c.jsx(MB,{isOpen:f,onClose:()=>h(!1),item:t})]})})}class sDe{constructor(){Rt(this,"apiKey");Rt(this,"searchEngineId");Rt(this,"baseUrl","https://www.googleapis.com/customsearch/v1");if(this.apiKey="AIzaSyDPrsjzwVQQv-XdsBMRtthrnmq_20eOpKM",this.searchEngineId="45bf48bbd17764d52",!this.apiKey||!this.searchEngineId)throw new Error("Google Search API Key o Search Engine ID mancanti. Assicurati di aver configurato VITE_GOOGLE_SEARCH_API_KEY e VITE_GOOGLE_SEARCH_ENGINE_ID nelle variabili d'ambiente.")}searchProductImages(e,r,n,i=10){return G(this,null,function*(){try{var a='"'.concat(r,'"');if(n&&(a+=' "'.concat(n,'"')),a===null)throw"searchQuery null";const o=new URLSearchParams({key:this.apiKey,cx:this.searchEngineId,q:a,searchType:"image",num:Math.min(i,20).toString(),fileType:"jpg,png,webp",imgColorType:"color",safe:"off",siteSearch:"-pinterest.com -flickr.com -tumblr.com",siteSearchFilter:"e"}),s=yield fetch("".concat(this.baseUrl,"?").concat(o.toString()));if(!s.ok){const f=yield s.text();throw console.error(" Errore API Google Search:",s.status,f),new Error("Errore API Google Search: ".concat(s.status," - ").concat(s.statusText))}const l=yield s.text();let u;try{u=JSON.parse(l)}catch(f){throw console.error(" JSON parsing failed:",f),new Error("Impossibile parsare la risposta JSON:")}if(u.error)throw console.error(" Google API Error:",u.error),new Error("Google API Error: ".concat(u.error.message," (").concat(u.error.code,")"));return!u.items||u.items.length===0?(console.warn(" Nessuna immagine trovata per"),[]):u.items.map((f,h)=>{try{return!f.link||!f.image?(console.warn(" Item ".concat(h," manca campi obbligatori:"),f),null):{id:"img_".concat(h,"_").concat(Date.now()),url:f.link,thumbnailUrl:f.image.thumbnailLink||f.link,title:f.title||"Immagine senza titolo",width:f.image.width||0,height:f.image.height||0,contextLink:f.image.contextLink||""}}catch(p){return console.error(" Errore processando item ".concat(h,":"),p,f),null}}).filter(f=>f!==null)}catch(o){throw console.error(" Errore durante la ricerca immagini:",o),o instanceof Error&&console.error("Error details:",{name:o.name,message:o.message,stack:o.stack}),new Error(o instanceof Error?"Errore ricerca immagini: ".concat(o.message):"Errore sconosciuto durante la ricerca immagini")}})}}const cDe=new sDe;function N0(r){var n=r,{className:t}=n,e=K(n,["className"]);return c.jsx("div",C({className:ie("animate-pulse rounded-md bg-muted",t)},e))}const lDe=({image:t,isSelected:e,onSelect:r})=>{const[n,i]=x.useState(!1),[a,o]=x.useState(!0);x.useEffect(()=>{i(!1),o(!0)},[t.url]);const s=x.useCallback(()=>{o(!1)},[]),l=x.useCallback(()=>{i(!0),o(!1)},[]),u=x.useCallback(d=>{d.preventDefault(),d.stopPropagation(),r()},[r]);return c.jsxs(Ie,{className:"\n        relative overflow-hidden cursor-pointer transition-all duration-300 group\n        hover:shadow-lg hover:scale-[1.02]\n        ".concat(e?"ring-2 ring-blue-500 shadow-xl":"hover:shadow-md","\n      "),onClick:u,children:[c.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[a&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(N0,{className:"w-full h-full"})}),n?c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 text-gray-500",children:[c.jsx(ao,{className:"h-8 w-8 mb-2"}),c.jsx("span",{className:"text-xs text-center px-2",children:"Errore caricamento"})]}):c.jsx("img",{src:t.url,alt:t.title,className:"\n              w-full h-full object-cover transition-all duration-300\n              ".concat(a?"opacity-0":"opacity-100","\n              ").concat(e?"brightness-110":"group-hover:brightness-105","\n            "),onLoad:s,onError:l,loading:"lazy"}),c.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300",children:[e&&c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx("div",{className:"bg-blue-500 text-white rounded-full p-1.5 shadow-lg",children:c.jsx(Er,{className:"h-4 w-4"})})}),c.jsx("div",{className:"absolute bottom-2 left-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:c.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded px-2 py-1 text-xs truncate",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(rl,{className:"h-3 w-3 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:new URL(t.contextLink).hostname})]})})})]})]}),c.jsxs("div",{className:"p-3",children:[c.jsx("p",{className:"text-xs text-gray-600 truncate",title:t.title,children:t.title}),c.jsx("div",{className:"flex items-center justify-between mt-1",children:c.jsxs(ne,{variant:"outline",className:"text-xs",children:[t.width,"  ",t.height]})})]})]})},uDe=({isOpen:t,onClose:e,onSelectImage:r,productName:n,brandName:i,images:a,isLoading:o,error:s})=>{const[l,u]=x.useState("");x.useEffect(()=>{t&&u("")},[t]),x.useEffect(()=>()=>{u("")},[]);const d=x.useCallback(()=>{l&&(r(l),e())},[l,r,e]),f=x.useCallback(()=>{u(""),e()},[e]),h=x.useCallback(m=>{u(m)},[]),p=x.useCallback(m=>{m||f()},[f]);return t?c.jsx(Yt,{open:t,onOpenChange:p,children:c.jsxs(Ht,{className:"max-w-4xl max-h-[90vh] p-0",onInteractOutside:m=>{m.preventDefault(),f()},onClick:m=>{m.stopPropagation(),m.preventDefault()},onPointerDown:m=>{m.stopPropagation()},children:[c.jsx(Zt,{className:"p-6 pb-4 border-b",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx(Qt,{className:"text-xl font-semibold",children:"Seleziona un'immagine"}),c.jsxs(Oi,{className:"mt-1",children:["Scegli l'immagine per ",c.jsx("span",{className:"font-medium",children:n}),i&&c.jsxs("span",{className:"text-gray-500",children:[" di ",i]})]})]})})}),c.jsxs("div",{className:"flex-1 overflow-hidden",children:[o&&c.jsxs("div",{className:"p-6",children:[c.jsx("div",{className:"flex items-center justify-center mb-4",children:c.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[c.jsx($u,{className:"h-5 w-5 animate-spin"}),c.jsx("span",{children:"Ricerca immagini in corso..."})]})}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:8}).map((m,g)=>c.jsxs(Ie,{className:"overflow-hidden",children:[c.jsx(N0,{className:"aspect-square w-full"}),c.jsxs("div",{className:"p-3",children:[c.jsx(N0,{className:"h-3 w-3/4 mb-2"}),c.jsx(N0,{className:"h-4 w-16"})]})]},g))})]}),s&&!o&&c.jsx("div",{className:"p-6",children:c.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-8",children:[c.jsx(ao,{className:"h-12 w-12 text-red-500 mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Errore durante la ricerca"}),c.jsx("p",{className:"text-gray-600 mb-4 max-w-md",children:s}),c.jsx(Q,{onClick:f,variant:"outline",children:"Chiudi"})]})}),!o&&!s&&c.jsx(DS,{className:"h-[60vh]",children:c.jsx("div",{className:"p-6",children:a.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-8",children:[c.jsx(ZW,{className:"h-12 w-12 text-gray-400 mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nessuna immagine trovata"}),c.jsx("p",{className:"text-gray-600 mb-4 max-w-md",children:"Non siamo riusciti a trovare immagini per questo prodotto. Prova a modificare il nome del prodotto o riprova pi tardi."}),c.jsx(Q,{onClick:f,variant:"outline",children:"Chiudi"})]}):c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(m=>c.jsx(lDe,{image:m,isSelected:l===m.url,onSelect:()=>h(m.url)},m.id))})})})]}),!o&&!s&&a.length>0&&c.jsx("div",{className:"border-t p-6",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"text-sm text-gray-500",children:l?c.jsx("span",{className:"text-green-600 font-medium",children:" Immagine selezionata"}):"Seleziona un'immagine per continuare"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(Q,{variant:"outline",onClick:f,children:"Annulla"}),c.jsx(Q,{onClick:d,disabled:!l,className:"bg-blue-600 hover:bg-blue-700",children:"Conferma selezione"})]})]})})]})}):null},dDe=({isOpen:t,onClose:e,onSelectImage:r,productName:n,brandName:i})=>{const[a,o]=x.useState(""),[s,l]=x.useState(!1),[u,d]=x.useState(""),[f,h]=x.useState(""),[p,m]=x.useState(!1);x.useEffect(()=>{t&&(o(""),d(""),h(""),m(!1),l(!1))},[t]);const g=w=>G(Gt,null,function*(){if(!w.trim()){h(""),d(""),m(!1);return}try{new URL(w)}catch(_){h("URL non valido"),d(""),m(!1);return}if(!(_=>{const E=/\.(jpg|jpeg|png|gif|webp|bmp)(\?.*)?$/i.test(_),N=/(?:cdn|images?|media|static|assets)[^/]*.*\/.*(?:image|photo|picture|gallery)/i.test(_),T=/\/(?:image|img|photo|picture|gallery|media|upload)[s]?[\/\w-]/i.test(_),O=/(?:cloudinary|imgix|amazonaws|cloudfront|akamai|fastly|thron|shopify|wix|squarespace)\.com/i.test(_),j=/[?&](?:format|f)=(?:auto|jpg|jpeg|png|webp|gif)/i.test(_);return E||N||T||O||j})(w)){h("L'URL deve puntare a un'immagine. Supportati: file con estensione immagine, CDN di immagini, o path che indicano immagini."),d(""),m(!1);return}l(!0),h("");const A=new Image;A.onload=()=>{d(w),m(!0),l(!1),h("")},A.onerror=()=>{h("Impossibile caricare l'immagine da questo URL"),d(""),m(!1),l(!1)},A.src=w});x.useEffect(()=>{const w=setTimeout(()=>{a.trim()&&g(a)},500);return()=>clearTimeout(w)},[a]);const v=w=>{o(w),w.trim()||(h(""),d(""),m(!1),l(!1))},y=()=>{p&&u&&(r(u),e())},b=()=>{o(""),d(""),h(""),m(!1),l(!1),e()};return c.jsx(Yt,{open:t,onOpenChange:b,children:c.jsxs(Ht,{className:"max-w-2xl",onClick:w=>w.stopPropagation(),onPointerDown:w=>w.stopPropagation(),onPointerUp:w=>w.stopPropagation(),children:[c.jsxs(Zt,{onClick:w=>w.stopPropagation(),children:[c.jsxs(Qt,{className:"flex items-center gap-2",children:[c.jsx(RA,{className:"h-5 w-5 text-blue-600"}),"Carica immagine da URL"]}),c.jsxs(Oi,{children:["Inserisci l'URL di un'immagine per ",c.jsx("span",{className:"font-medium",children:n}),i&&c.jsxs("span",{className:"text-gray-500",children:[" di ",i]})]})]}),c.jsxs("div",{className:"space-y-6",onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"space-y-2",onClick:w=>w.stopPropagation(),children:[c.jsx(Wt,{htmlFor:"image-url",children:"URL Immagine"}),c.jsxs("div",{className:"relative",children:[c.jsx(At,{id:"image-url",type:"url",placeholder:"https://esempio.com/immagine.jpg",value:a,onChange:w=>v(w.target.value),onClick:w=>w.stopPropagation(),onFocus:w=>w.stopPropagation(),className:"pr-10 ".concat(f?"border-red-500 focus:border-red-500":p?"border-green-500 focus:border-green-500":"")}),c.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:s?c.jsx(Pn,{className:"h-4 w-4 animate-spin text-blue-500"}):f?c.jsx(ao,{className:"h-4 w-4 text-red-500"}):p?c.jsx(Er,{className:"h-4 w-4 text-green-500"}):null})]}),f&&c.jsxs(Wc,{variant:"destructive",onClick:w=>w.stopPropagation(),children:[c.jsx(ao,{className:"h-4 w-4"}),c.jsx(Hc,{children:f})]}),!a.trim()&&c.jsxs("div",{className:"text-sm text-gray-500",onClick:w=>w.stopPropagation(),children:[c.jsx("p",{className:"mb-1",children:" Suggerimenti:"}),c.jsxs("ul",{className:"space-y-1 ml-4",children:[c.jsx("li",{children:" URL con estensione: .jpg, .png, .gif, .webp"}),c.jsx("li",{children:" CDN di immagini: cloudinary, imgix, thron, etc."}),c.jsx("li",{children:" Path immagini: /image/, /photo/, /gallery/"}),c.jsx("li",{children:" Parametri formato: ?format=auto, ?f=jpg"}),c.jsx("li",{children:" Verifica che l'immagine sia pubblicamente accessibile"})]})]})]}),s&&c.jsx("div",{className:"flex items-center justify-center p-8 bg-gray-50 rounded-lg",onClick:w=>w.stopPropagation(),children:c.jsxs("div",{className:"flex items-center gap-3 text-blue-600",children:[c.jsx(Pn,{className:"h-5 w-5 animate-spin"}),c.jsx("span",{children:"Verifica immagine in corso..."})]})}),u&&!s&&c.jsxs("div",{className:"space-y-3",onClick:w=>w.stopPropagation(),children:[c.jsx(Wt,{children:"Anteprima"}),c.jsxs("div",{className:"relative bg-gray-50 rounded-lg p-4",children:[c.jsx("div",{className:"flex items-center justify-center",children:c.jsx("img",{src:u,alt:"Anteprima immagine",className:"max-w-full max-h-48 object-contain rounded shadow-sm",onClick:w=>w.stopPropagation(),onError:()=>{h("Errore nel caricamento dell'anteprima"),d(""),m(!1)}})}),c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx("div",{className:"bg-green-500 text-white rounded-full p-1.5 shadow-lg",children:c.jsx(Er,{className:"h-3 w-3"})})})]})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",onClick:w=>w.stopPropagation(),children:[c.jsx("div",{className:"text-sm text-gray-500",children:p?c.jsxs("span",{className:"text-green-600 font-medium flex items-center gap-1",children:[c.jsx(Er,{className:"h-4 w-4"}),"Immagine valida"]}):a.trim()?c.jsx("span",{className:"text-gray-500",children:"Inserisci un URL valido"}):c.jsx("span",{className:"text-gray-500",children:"Inserisci l'URL di un'immagine"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(Q,{variant:"outline",onClick:w=>{w.stopPropagation(),b()},children:"Annulla"}),c.jsx(Q,{onClick:w=>{w.stopPropagation(),y()},disabled:!p||s,className:"bg-blue-600 hover:bg-blue-700",children:"Conferma URL"})]})]})]})]})})};function fDe({item:t,categories:e,onEdit:r,onDelete:n,onComplete:i,onUpdate:a,onClick:o,viewMode:s="images"}){var De;const{user:l}=Bt(),{toast:u}=Nr(),d=Li(),[f,h]=x.useState(!1),[p,m]=x.useState(!1),[g,v]=x.useState(!1),[y,b]=x.useState(!1),[w,S]=x.useState([]),[A,_]=x.useState(""),[E,N]=x.useState(!1),[T,O]=x.useState(!1),[j,P]=x.useState(!1),[D,F]=x.useState(!1),I=(l==null?void 0:l.username)===t.createdBy||(l==null?void 0:l.role)==="admin"||t.isPublic,k=I&&t.canUpdateImage(),R=!d&&s==="images",V=(()=>{const he=t.historicalPriceWithDates||[];if(he.length===0)return null;const z=he.filter(xe=>xe.changeType!=="initial").sort((xe,me)=>new Date(me.date).getTime()-new Date(xe.date).getTime())[0];if(!z)return null;const U=z.changeType==="increase",Z=z.changeType==="decrease";if(!U&&!Z)return null;let ce=null;return z.oldPrice&&(ce=(z.price-z.oldPrice)/z.oldPrice*100),{type:z.changeType,isIncrease:U,isDecrease:Z,percentage:ce,fromPrice:z.oldPrice,toPrice:z.price}})(),W=t.historicalPriceWithDates&&t.historicalPriceWithDates.length>0,H=((he,z=35)=>he.length<=z?{display:he,isTruncated:!1}:{display:he.substring(0,z)+"...",isTruncated:!0})(t.name||"Prodotto senza nome"),J=t.scrapingData&&t.scrapingData.scrapingSuccess!==!0,de=t.scrapingData&&t.scrapingData.scrapingSuccess===!0,se=he=>{if(!he||!gy(he))return"Data non disponibile";try{return Ju(he,{addSuffix:!0,locale:qr})}catch(z){return"Data non valida"}},Ee=()=>G(this,null,function*(){h(!0);try{yield i(t.id),u({title:"Elemento Archiviato",description:"Elemento Shopping segnato come Archiviato!"})}catch(he){u({title:"Errore",description:"Impossibile segnare l'elemento come Archiviato",variant:"destructive"})}finally{h(!1)}}),Ue=()=>G(this,null,function*(){try{yield n(t.id),u({title:"Elemento eliminato",description:"Elemento della Shopping eliminato con successo!"})}catch(he){u({title:"Errore",description:"Impossibile eliminare l'elemento",variant:"destructive"})}}),ge=he=>{if(!(he.target.closest("button")||he.target.closest("a")||he.target.closest('[role="button"]'))&&R){if(t.completed){N(!0);return}o&&o(t)}},Y=he=>{he.stopPropagation(),o&&o(t)},te=()=>G(this,null,function*(){O(!0);try{yield i(t.id),u({title:"Elemento ripristinato",description:"Elemento rimesso nella lista shopping!"}),N(!1)}catch(he){u({title:"Errore",description:"Impossibile ripristinare l'elemento",variant:"destructive"})}finally{O(!1)}}),ae=he=>G(this,null,function*(){var z;if(he.stopPropagation(),!k){u({title:"Operazione non consentita",description:"L'immagine di questo prodotto  stata bloccata e non pu essere modificata.",variant:"destructive"});return}if(!((z=t.name)!=null&&z.trim())){u({title:"Nome prodotto richiesto",description:" necessario specificare un nome per il prodotto per cercare le immagini.",variant:"destructive"});return}v(!0),_(""),S([]);try{const U=yield cDe.searchProductImages(t.link,t.name,t.brandName,10);if(U.length===0){u({title:"Nessuna immagine trovata",description:"Non sono state trovate immagini per questo prodotto. Prova a modificare il nome.",variant:"destructive"});return}S(U),b(!0),u({title:"Ricerca completata",description:"Trovate ".concat(U.length," immagini. Seleziona quella che preferisci.")})}catch(U){console.error(" Errore ricerca immagini:",U);const Z=U instanceof Error?U.message:"Errore sconosciuto";_(Z),u({title:"Errore ricerca immagini",description:Z,variant:"destructive"})}finally{v(!1)}}),X=he=>{if(he.stopPropagation(),!k){u({title:"Operazione non consentita",description:"L'immagine di questo prodotto  stata bloccata e non pu essere modificata.",variant:"destructive"});return}P(!0)},be=he=>{he.stopPropagation(),F(!0)},ue=he=>G(this,null,function*(){try{const z=Sa(wt,"shopping_items",t.id);if(yield Mu(z,{imageUrl:he,imageUpdated:!0,updatedAt:new Date}),a){const U=Object.assign(Object.create(Object.getPrototypeOf(t)),t,{imageUrl:he,imageUpdated:!0,updatedAt:new Date});a(U)}b(!1),P(!1),S([]),_(""),u({title:"Immagine aggiornata",description:"L'immagine del prodotto  stata aggiornata con successo!"})}catch(z){console.error(" Errore aggiornamento immagine:",z),u({title:"Errore aggiornamento",description:"Impossibile aggiornare l'immagine del prodotto.",variant:"destructive"})}}),Pe=he=>typeof he=="string"?he:he.toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2})+" ",oe=e==null?void 0:e.find(he=>he.name===t.category),_e=t.imageUrl&&!p;return c.jsx(YA,{children:c.jsxs(Ie,{className:"\n          transition-all duration-300 hover:shadow-xl border group relative overflow-hidden\n          ".concat(t.completed?"opacity-60":""," \n          ").concat(t.priority==="high"?"ring-2 ring-red-400 dark:ring-red-500":"","\n          ").concat(J?"ring-2 ring-blue-400":"","\n          ").concat(R?"cursor-pointer":"cursor-default","\n        "),onClick:ge,children:[c.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden bg-gray-100",children:[_e?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:t.imageUrl,alt:t.name||"Prodotto",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:()=>m(!0),loading:"lazy"}),t.estimatedPrice&&c.jsx("div",{className:"absolute bottom-2 right-2 bg-white/95 backdrop-blur-sm rounded-md px-2 py-1 shadow-md",children:c.jsx("span",{className:"font-bold text-green-600 text-sm",children:Pe(t.estimatedPrice)})})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Mv,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),c.jsx("p",{className:"text-sm",children:"Nessuna immagine"})]})}),t.estimatedPrice&&c.jsx("div",{className:"absolute bottom-2 right-2 bg-white/95 backdrop-blur-sm rounded-md px-2 py-1 shadow-md",children:c.jsx("span",{className:"font-bold text-green-600 text-sm",children:Pe(t.estimatedPrice)})})]}),c.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300",children:[c.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[t.link&&c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{variant:"secondary",size:"sm",className:"h-8 w-8 p-0 bg-white/90 hover:bg-white shadow-md z-20",onClick:he=>he.stopPropagation(),asChild:!0,children:c.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:c.jsx(jh,{className:"h-4 w-4 text-gray-500 dark:text-black-300"})})})}),c.jsx(kr,{children:c.jsx("p",{children:"Vedi prodotto"})})]}),I&&c.jsxs(c.Fragment,{children:[c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{variant:"secondary",size:"sm",onClick:he=>{he.stopPropagation(),r(t)},className:"h-8 w-8 p-0 bg-white/90 hover:bg-white shadow-md z-20",children:c.jsx(zo,{className:"h-4 w-4 text-gray-500 dark:text-black-300"})})}),c.jsx(kr,{children:c.jsx("p",{children:"Modifica"})})]}),((De=t.priceSelection)==null?void 0:De.selectedCssSelector)=="[data-json-price]"?"ciaooo":"",c.jsxs(fl,{children:[c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(im,{asChild:!0,children:c.jsx(Q,{variant:"secondary",size:"sm",onClick:he=>he.stopPropagation(),className:"h-8 w-8 p-0 bg-white/90 hover:bg-red-100 shadow-md text-red-600",children:c.jsx(Mr,{className:"h-4 w-4 text-gray-500 dark:text-black-300"})})})}),c.jsx(kr,{children:c.jsx("p",{children:"Elimina"})})]}),c.jsxs(Bs,{children:[c.jsxs(zs,{children:[c.jsx(Us,{children:"Conferma eliminazione"}),c.jsxs(Ws,{children:['Sei sicuro di voler eliminare "',t.name||"questo elemento",'"? Questa azione non pu essere annullata.']})]}),c.jsxs(Vs,{children:[c.jsx(Gs,{children:"Annulla"}),c.jsx(Hs,{onClick:Ue,className:"bg-red-500 hover:bg-red-600",children:"Elimina"})]})]})]})]})]}),I&&c.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{variant:"secondary",size:"sm",onClick:ae,disabled:g||!k,className:"\n                        h-8 w-8 p-0 bg-white/90 shadow-md transition-colors\n                        ".concat(k?"hover:bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-400 cursor-not-allowed","\n                      "),children:g?c.jsx(Pn,{className:"h-4 w-4 animate-spin"}):c.jsx(M0,{className:"h-4 w-4"})})}),c.jsx(kr,{children:c.jsx("p",{children:k?g?"Ricerca in corso...":"Rigenera immagine":"Immagine bloccata"})})]}),c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{variant:"secondary",size:"sm",onClick:X,disabled:!k,className:"\n                        h-8 w-8 p-0 bg-white/90 shadow-md transition-colors\n                        ".concat(k?"hover:bg-purple-100 text-purple-600":"hover:bg-gray-100 text-gray-400 cursor-not-allowed","\n                      "),children:c.jsx(RA,{className:"h-4 w-4"})})}),c.jsx(kr,{children:c.jsx("p",{children:k?"Carica da URL":"Immagine bloccata"})})]}),W&&c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{variant:"secondary",size:"sm",onClick:be,className:"h-8 w-8 p-0 bg-white/90 shadow-md transition-colors hover:bg-green-100 text-green-600",children:c.jsx(sh,{className:"h-4 w-4"})})}),c.jsx(kr,{children:c.jsx("p",{children:"Storico prezzi"})})]})]})]}),c.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[t.priority==="high"&&c.jsxs(ne,{variant:"outline",className:"bg-red-500 text-white border-red-500 text-xs",children:[c.jsx(kA,{className:"h-2 w-2 mr-1"}),"Urgente"]}),J&&c.jsxs(ne,{variant:"outline",className:"bg-blue-500 text-white border-blue-500 text-xs animate-pulse",children:[c.jsx($p,{className:"h-2 w-2 mr-1"}),"AI"]}),de&&c.jsxs(ne,{variant:"outline",className:"bg-purple-500 text-white border-purple-500 text-xs",children:[c.jsx(Ph,{className:"h-2 w-2 mr-1"}),"AI"]}),t.imageUpdated&&c.jsxs(ne,{variant:"outline",className:"bg-orange-500 text-white border-orange-500 text-xs",children:[c.jsx(Ir,{className:"h-2 w-2 mr-1"}),"IMG"]}),V&&c.jsxs(Ur,{children:[c.jsx(Wr,{children:c.jsxs(ne,{variant:"outline",className:"text-white text-xs ".concat(V.isIncrease?"bg-red-500 border-red-500":"bg-green-500 border-green-500"),children:[V.isIncrease?c.jsx(Xi,{className:"h-2 w-2 mr-1"}):c.jsx(F0,{className:"h-2 w-2 mr-1"}),V.percentage&&Math.abs(V.percentage)>0?"".concat(V.percentage>0?"+":"").concat(V.percentage.toFixed(1),"%"):V.isIncrease?"":""]})}),c.jsx(kr,{children:c.jsxs("p",{children:["Prezzo ",V.isIncrease?"aumentato":"diminuito",V.fromPrice&&" da ".concat(Pe(V.fromPrice))," a ".concat(Pe(V.toPrice))]})})]})]}),g&&c.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center gap-3 shadow-lg",children:[c.jsx(Pn,{className:"h-5 w-5 animate-spin text-blue-600"}),c.jsx("span",{className:"text-sm font-medium",children:"Ricerca immagini..."})]})})]}),c.jsxs(Ve,{className:"p-4",children:[c.jsxs("div",{className:"mb-2",children:[t.brandName&&c.jsx("p",{className:"text-xs text-gray-500 mb-1 truncate",children:t.brandName}),H.isTruncated?c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx("h3",{className:"font-medium text-sm leading-tight cursor-help ".concat(t.completed?"line-through":""),children:H.display})}),c.jsx(kr,{children:c.jsx("p",{className:"max-w-xs",children:t.name})})]}):c.jsx("h3",{className:"font-medium text-sm leading-tight ".concat(t.completed?"line-through":""),children:H.display})]}),c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs(ne,{variant:"outline",className:"text-xs px-2 py-0.5",style:oe?{backgroundColor:"".concat(oe.color,"20"),color:oe.color,borderColor:oe.color}:void 0,children:[(oe==null?void 0:oe.icon)&&c.jsx("span",{className:"mr-1 text-xs",children:oe.icon}),t.category]}),c.jsx("div",{className:"flex items-center gap-1",children:t.isPublic?c.jsx(Br,{className:"w-3 h-3 text-green-600"}):c.jsx(Ir,{className:"w-3 h-3 text-orange-600"})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center",children:c.jsx(ji,{className:"h-3 w-3 text-blue-600"})}),c.jsx("span",{className:"text-xs text-gray-600 truncate max-w-[60px]",children:t.createdBy})]})}),c.jsx(kr,{children:c.jsxs("p",{children:["Creato da: ",t.createdBy]})})]}),c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-100 flex items-center justify-center",children:c.jsx(Xr,{className:"h-3 w-3 text-gray-600"})})}),c.jsx(kr,{children:c.jsx("p",{children:se(t.createdAt)})})]})]}),!t.completed&&c.jsxs("div",{className:"flex gap-2 ".concat(R?"":"w-full"),children:[!R&&o&&c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{onClick:Y,variant:"outline",size:"sm",className:"flex-1 h-8 bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-300",children:d?c.jsx(Ob,{className:"h-4 w-4"}):c.jsxs(c.Fragment,{children:[c.jsx(Ob,{className:"mr-1 h-3 w-3"}),"Dettaglio"]})})}),d&&c.jsx(kr,{children:c.jsx("p",{children:"Dettaglio"})})]}),c.jsxs(Ur,{children:[c.jsx(Wr,{asChild:!0,children:c.jsx(Q,{onClick:he=>{he.stopPropagation(),Ee()},disabled:f,variant:"outline",size:"sm",className:"".concat(R?"w-full":"flex-1"," h-8 bg-green-50 hover:bg-green-100 text-green-700 border-green-300"),children:f?c.jsx(Pn,{className:"h-4 w-4 animate-spin"}):d?c.jsx(Er,{className:"h-4 w-4"}):c.jsxs(c.Fragment,{children:[c.jsx(Er,{className:"mr-1 h-3 w-3"}),"Archivia"]})})}),d&&c.jsx(kr,{children:c.jsx("p",{children:f?"Archiviando...":"Archivia"})})]})]})]})]}),c.jsx(uDe,{isOpen:y,onClose:()=>b(!1),onSelectImage:ue,productName:t.name||"Prodotto",brandName:t.brandName,images:w,isLoading:g,error:A}),c.jsx(dDe,{isOpen:j,onClose:()=>P(!1),onSelectImage:ue,productName:t.name||"Prodotto",brandName:t.brandName}),c.jsx(fl,{open:E,onOpenChange:N,children:c.jsxs(Bs,{children:[c.jsxs(zs,{children:[c.jsx(Us,{children:"Ripristina elemento"}),c.jsxs(Ws,{children:['Vuoi rimettere "',t.name||"questo elemento","\" nella lista shopping attiva? L'elemento torner visibile nella lista principale."]})]}),c.jsxs(Vs,{children:[c.jsx(Gs,{disabled:T,children:"Annulla"}),c.jsx(Hs,{onClick:te,disabled:T,className:"bg-blue-600 hover:bg-blue-700",children:T?c.jsxs(c.Fragment,{children:[c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Ripristinando..."]}):"Ripristina"})]})]})}),c.jsx(MB,{isOpen:D,onClose:()=>F(!1),item:t})]})})}var hDe="Separator",tD="horizontal",pDe=["horizontal","vertical"],RB=x.forwardRef((t,e)=>{const l=t,{decorative:r,orientation:n=tD}=l,i=K(l,["decorative","orientation"]),a=mDe(n)?n:tD,s=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return c.jsx(Ge.div,M(C(C({"data-orientation":a},s),i),{ref:e}))});RB.displayName=hDe;function mDe(t){return pDe.includes(t)}var $B=RB;const Ip=x.forwardRef((a,i)=>{var o=a,{className:t,orientation:e="horizontal",decorative:r=!0}=o,n=K(o,["className","orientation","decorative"]);return c.jsx($B,C({ref:i,decorative:r,orientation:e,className:ie("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t)},n))});Ip.displayName=$B.displayName;function gDe({item:t,categories:e,isOpen:r,onClose:n,onEdit:i,onComplete:a}){const{user:o}=Bt(),{toast:s}=Nr(),[l,u]=x.useState(!1);if(!t)return null;const d=(o==null?void 0:o.username)===t.createdBy||(o==null?void 0:o.role)==="admin"||t.isPublic,f=e==null?void 0:e.find(_=>_.name===t.category),h={high:{label:"Alta",icon:kA,color:"text-red-600",className:"border-red-200 bg-red-50"},medium:{label:"Media",icon:kv,color:"text-yellow-600",className:"border-yellow-200 bg-yellow-50"},low:{label:"Bassa",icon:Wk,color:"text-green-600",className:"border-green-200 bg-green-50"}},p=h[t.priority]||h.medium,m=p.icon,g=_=>typeof _=="string"?_:isNaN(_)||_===null||_===void 0?"Prezzo non disponibile":_.toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2})+" ",v=(_,E)=>{if(!_||!gy(_))return"Data non disponibile";try{return E?ur(_,E,{locale:qr}):Ju(_,{addSuffix:!0,locale:qr})}catch(N){return console.warn("Error formatting date:",N),"Data non valida"}},y=t.scrapingData&&t.scrapingData.scrapingSuccess!==!0,b=t.scrapingData&&t.scrapingData.scrapingSuccess===!0,w=()=>G(this,null,function*(){if(a){u(!0);try{yield a(t.id),s({title:"Elemento archiviato",description:"Elemento Shopping segnato come archiviato!"})}catch(_){s({title:"Errore",description:"Impossibile archiviare l'elemento",variant:"destructive"})}finally{u(!1)}}}),S=()=>{t.link&&(navigator.clipboard.writeText(t.link),s({title:"Link copiato",description:"Il link del prodotto  stato copiato negli appunti"}))},A=()=>{navigator.share&&t.link?navigator.share({title:t.name||"Prodotto",url:t.link}):S()};return c.jsx(Yt,{open:r,onOpenChange:n,children:c.jsxs(Ht,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsx(Zt,{className:"pb-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx(Qt,{className:"text-xl font-semibold ".concat(t.completed?"line-through text-gray-500":""),children:t.name||"Prodotto senza nome"}),t.brandName&&c.jsxs("div",{className:"flex items-center mt-2 text-gray-600",children:[c.jsx(Mv,{className:"h-4 w-4 mr-1"}),c.jsx("span",{className:"font-medium",children:t.brandName})]})]}),d&&i&&c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>i(t),className:"ml-4",children:[c.jsx(zo,{className:"h-4 w-4 mr-1"}),"Modifica"]})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(ne,{variant:"outline",className:"text-sm",children:[(f==null?void 0:f.icon)&&c.jsx("span",{className:"mr-1",children:f.icon}),t.category]}),c.jsxs(ne,{variant:"outline",className:"".concat(p.color," ").concat(p.className," text-sm"),children:[c.jsx(m,{className:"h-3 w-3 mr-1"}),p.label]}),c.jsx(ne,{variant:t.isPublic?"default":"secondary",className:"text-sm",children:t.isPublic?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"h-3 w-3 mr-1"}),"Pubblico"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ir,{className:"h-3 w-3 mr-1"}),"Privato"]})}),t.completed&&c.jsxs(ne,{className:"bg-green-100 text-green-700 border-green-200 text-sm",children:[c.jsx(Er,{className:"h-3 w-3 mr-1"}),"Archiviato"]}),y&&c.jsxs(ne,{className:"bg-blue-100 text-blue-700 border-blue-200 text-sm",children:[c.jsx(Ph,{className:"h-3 w-3 mr-1"}),"Analisi AI in corso..."]}),b&&c.jsxs(ne,{className:"bg-purple-100 text-purple-700 border-purple-200 text-sm",children:[c.jsx($p,{className:"h-3 w-3 mr-1"}),"Analizzato da AI"]})]}),t.estimatedPrice&&c.jsx(Ie,{children:c.jsx(Ve,{className:"pt-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-5 h-5 mr-2 flex items-center justify-center",children:c.jsx("span",{className:"text-green-600 font-bold text-lg",children:""})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Prezzo stimato"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:g(t.estimatedPrice)})]})]})})}),t.notes&&c.jsxs(Ie,{children:[c.jsx($r,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(LA,{className:"h-4 w-4 mr-2 text-gray-600"}),c.jsx("h3",{className:"font-medium text-gray-900",children:"Note"})]})}),c.jsx(Ve,{className:"pt-0",children:c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:t.notes})})]}),t.link&&c.jsxs(Ie,{children:[c.jsx($r,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(rl,{className:"h-4 w-4 mr-2 text-gray-600"}),c.jsx("h3",{className:"font-medium text-gray-900",children:"Link Prodotto"})]})}),c.jsx(Ve,{className:"pt-0",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>window.open(t.link,"_blank"),className:"flex-1",children:[c.jsx(rl,{className:"h-4 w-4 mr-2"}),"Apri prodotto"]}),c.jsx(Q,{variant:"outline",size:"sm",onClick:S,children:c.jsx(ch,{className:"h-4 w-4"})}),c.jsx(Q,{variant:"outline",size:"sm",onClick:A,children:c.jsx(Zk,{className:"h-4 w-4"})})]})})]}),c.jsxs(Ie,{children:[c.jsx($r,{className:"pb-3",children:c.jsx("h3",{className:"font-medium",children:"Informazioni"})}),c.jsxs(Ve,{className:"pt-0 space-y-3",children:[c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx(ji,{className:"h-4 w-4 mr-2"}),c.jsxs("span",{children:["Creato da ",c.jsx("strong",{children:t.createdBy})]})]}),c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx(Ca,{className:"h-4 w-4 mr-2"}),c.jsxs("span",{children:["Creato ",v(t.createdAt),t.createdAt&&c.jsxs("span",{className:"ml-2 text-gray-400",children:["(",v(t.createdAt,"dd/MM/yyyy HH:mm"),")"]})]})]}),t.updatedAt&&t.updatedAt!==t.createdAt&&c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx(Xr,{className:"h-4 w-4 mr-2"}),c.jsxs("span",{children:["Aggiornato ",v(t.updatedAt),t.updatedAt&&c.jsxs("span",{className:"ml-2 text-gray-400",children:["(",v(t.updatedAt,"dd/MM/yyyy HH:mm"),")"]})]})]}),t.completedAt&&c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx(Er,{className:"h-4 w-4 mr-2"}),c.jsxs("span",{children:["Archiviato ",v(t.completedAt),t.completedAt&&c.jsxs("span",{className:"ml-2 text-gray-400",children:["(",v(t.completedAt,"dd/MM/yyyy HH:mm"),")"]})]})]})]})]}),!t.completed&&a&&c.jsxs(c.Fragment,{children:[c.jsx(Ip,{}),c.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[c.jsx(Q,{variant:"secondary",onClick:()=>n(),children:"Annulla"}),c.jsx(Q,{onClick:w,disabled:l,className:" bg-green-600 hover:bg-green-700",children:l?c.jsxs(c.Fragment,{children:[c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Segnando come archiviato..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Er,{className:"mr-2 h-4 w-4"}),"Segna come archiviato"]})})]})]})]})]})})}const qs=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx("textarea",C({className:ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r},e))});qs.displayName="Textarea";const vDe=["","","","","","","","","","","","","","","",""];function yDe({isOpen:t,onClose:e,onAdd:r,editItem:n}){const{user:i}=Bt(),{toast:a}=Nr(),[o,s]=x.useState(!1),[l,u]=x.useState(!1),[d,f]=x.useState(!1),[h,p]=x.useState(!1),{data:m,add:g}=Jt("categories"),{data:v}=Jt("shopping_items"),y="https://europe-west1-familytasktracker-c2dfe.cloudfunctions.net/onShoppingItemCreated",b=wl({defaultValues:{name:"",link:"",category:"",brandName:"",createdBy:(i==null?void 0:i.username)||"",completed:!1,priority:"medium",estimatedPrice:void 0,notes:"",isPublic:!0,useAI:!0}}),[w,S]=x.useState({name:"",icon:"",description:"",color:"#6B7280"}),A=!n&&b.watch("useAI"),_=x.useMemo(()=>{const P=b.watch("link");return!P||!P.startsWith("http")?!1:((v==null?void 0:v.filter(F=>n?F.id!==n.id:!0))||[]).some(F=>F.link===P)},[b.watch("link"),v,n]),E=x.useMemo(()=>{if(!_)return null;const P=v==null?void 0:v.find(D=>D.link===b.watch("link")&&(n?D.id!==n.id:!0));return P?'Questo URL  gi stato aggiunto per "'.concat(P.name||"un altro prodotto",'"'):"Questo URL  gi stato aggiunto"},[_,v,b.watch("link"),n]);x.useEffect(()=>{n?b.reset({name:n.name,link:n.link||"",category:n.category,brandName:n.brandName||"",createdBy:n.createdBy,completed:n.completed,priority:n.priority,estimatedPrice:n.estimatedPrice,notes:n.notes||"",isPublic:n.isPublic!==void 0?n.isPublic:!0,useAI:!1}):b.reset({name:"",link:"",category:"",brandName:"",createdBy:(i==null?void 0:i.username)||"",completed:!1,priority:"medium",estimatedPrice:void 0,notes:"",isPublic:!0,useAI:!0})},[n,b,i]);const N=P=>G(this,null,function*(){try{const D=yield fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:P,updateFirestore:!0,collectionName:"shopping_items"})});if(!D.ok)throw new Error("Errore HTTP: ".concat(D.status));const F=yield D.json();if(F.success&&F.data){const I=F.data.nameProduct||F.data.name||"il prodotto";a({title:"Prodotto aggiornato!",description:'Informazioni estratte automaticamente per "'.concat(I,'"')})}else console.warn("Scraping parzialmente riuscito:",F),a({title:"Scraping completato",description:"Alcuni dati potrebbero non essere stati estratti completamente"})}catch(D){console.error("Errore durante lo scraping asincrono:",D),a({title:"Scraping fallito",description:"Non  stato possibile estrarre automaticamente i dati del prodotto",variant:"destructive"})}}),T=P=>{P==="add_new"?f(!0):b.setValue("category",P)},O=()=>G(this,null,function*(){if(!w.name.trim()){a({title:"Errore",description:"Il nome della categoria  obbligatorio",variant:"destructive"});return}if(m!=null&&m.find(P=>P.name.toLowerCase()===w.name.toLowerCase())){a({title:"Errore",description:"Una categoria con questo nome esiste gi",variant:"destructive"});return}u(!0);try{const P=kh.createCategory({id:"category_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:w.name.trim(),createdBy:(i==null?void 0:i.username)||"",createdAt:new Date,description:w.description||void 0,color:w.color,icon:w.icon,isDefault:!1,itemCount:0});yield g(P),b.setValue("category",w.name),S({name:"",icon:"",description:"",color:"#6B7280"}),f(!1),a({title:"Categoria aggiunta",description:'La categoria "'.concat(w.name,'"  stata aggiunta con successo')})}catch(P){P instanceof xt?a({title:"Errore di validazione categoria",description:P.errors.join(", "),variant:"destructive"}):a({title:"Errore",description:"Impossibile aggiungere la categoria",variant:"destructive"})}finally{u(!1)}}),j=P=>G(this,null,function*(){if(!P.link||!P.link.startsWith("http")){P.link&&P.link.trim().length>0&&a({title:"URL richiesto",description:"L'URL del prodotto  obbligatorio e deve iniziare con http:// o https://",variant:"destructive"});return}if(_){a({title:"URL duplicato",description:E||"Questo URL  gi stato aggiunto",variant:"destructive"});return}s(!0);try{let D;if(n){D=n;try{D.name=P.name||n.name,D.link=P.link,D.category=P.category||n.category,D.brandName=P.brandName||n.brandName,D.priority=P.priority,D.estimatedPrice=P.estimatedPrice,D.notes=P.notes,D.isPublic=P.isPublic,D.updatedAt=new Date,yield r(D),a({title:"Elemento aggiornato",description:"Le modifiche sono state salvate con successo!"})}catch(F){if(F instanceof xt){a({title:"Errore di validazione",description:F.errors.join(", "),variant:"destructive"});return}throw F}}else try{const F=P.useAI?{lastScraped:new Date,scrapingMode:"pending",scrapingSuccess:!1,scrapingText:void 0,errors:void 0}:void 0;D=kh.createShoppingItem({id:"item_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),category:P.category||"Articoli",createdBy:P.createdBy,link:P.link,name:P.name,brandName:P.brandName,completed:P.completed,priority:P.priority,estimatedPrice:P.estimatedPrice,notes:P.notes,isPublic:P.isPublic,createdAt:new Date,updatedAt:new Date,scrapingData:F}),yield r(D),P.useAI?(N(P.link),a({title:"Elemento aggiunto!",description:"Analisi AI in corso..."})):a({title:"Elemento aggiunto!",description:"Elemento salvato senza analisi AI."})}catch(F){if(F instanceof xt){a({title:"Errore di validazione",description:F.errors.join(", "),variant:"destructive"});return}throw F}b.reset(),S({name:"",icon:"",description:"",color:"#6B7280"}),f(!1),e()}catch(D){console.error("Errore nel salvataggio:",D),a({title:"Errore",description:"Impossibile salvare l'elemento",variant:"destructive"})}finally{s(!1)}});return c.jsx(Yt,{open:t,onOpenChange:e,children:c.jsxs(Ht,{className:"max-h-[90vh] overflow-y-auto ".concat(A?"sm:max-w-md":"sm:max-w-2xl"),children:[c.jsx(Zt,{children:c.jsxs(Qt,{className:"flex items-center text-xl text-delft-blue",children:[c.jsx(hs,{className:"mr-3 h-6 w-6"}),n?"Modifica Articolo":A?"Aggiungi con AI":"Aggiungi Articolo"]})}),c.jsx(Al,M(C({},b),{children:c.jsxs("form",{onSubmit:b.handleSubmit(j),className:"space-y-6",children:[c.jsx(ot,{control:b.control,name:"link",render:({field:P})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(RA,{className:"mr-2 h-4 w-4"}),"URL Prodotto *"]}),c.jsx(gt,{children:c.jsx(At,M(C({},P),{type:"url",placeholder:"https://esempio.com/prodotto",className:"text-base"}))}),P.value&&c.jsx("p",{className:"text-xs text-blue-600",children:c.jsx("a",{href:P.value,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:" Apri link"})}),c.jsx(Ft,{})]})}),!n&&c.jsx(ot,{control:b.control,name:"useAI",render:({field:P})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30 dark:border-gray-700",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(it,{className:"text-base flex items-center text-gray-900 dark:text-gray-100",children:P.value?c.jsxs(c.Fragment,{children:[c.jsx(Ph,{className:"mr-2 h-4 w-4 text-blue-600 dark:text-blue-400"}),"Analisi AI Attiva"]}):c.jsxs(c.Fragment,{children:[c.jsx($0,{className:"mr-2 h-4 w-4 text-gray-600 dark:text-gray-400"}),"Inserimento Manuale"]})}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:P.value?"I dati del prodotto verranno estratti automaticamente":"Inserimento rapido senza analisi automatica"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:P.value,onCheckedChange:P.onChange})})]})}),c.jsx(ot,{control:b.control,name:"isPublic",render:({field:P})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(it,{className:"text-base flex items-center",children:P.value?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"mr-2 h-4 w-4 text-green-600"}),"Articolo Pubblico"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ir,{className:"mr-2 h-4 w-4 text-orange-600"}),"Articolo Privato"]})}),c.jsx("p",{className:"text-xs text-gray-600",children:P.value?"Questo articolo sar visibile a tutti i membri della famiglia":"Questo articolo sar visibile solo a te"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:P.value,onCheckedChange:P.onChange})})]})}),!A&&c.jsxs(c.Fragment,{children:[c.jsx(ot,{control:b.control,name:"name",render:({field:P})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Nome Prodotto"}),c.jsx(gt,{children:c.jsx(At,M(C({},P),{placeholder:"Inserisci nome prodotto",maxLength:100,className:"text-base"}))}),c.jsxs("p",{className:"text-xs text-gray-500",children:[(P.value||"").length,"/100 caratteri"]}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:b.control,name:"brandName",render:({field:P})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(Mv,{className:"mr-2 h-4 w-4"}),"Brand"]}),c.jsx(gt,{children:c.jsx(At,M(C({},P),{placeholder:"Inserisci il brand del prodotto",maxLength:50,className:"text-base"}))}),c.jsxs("p",{className:"text-xs text-gray-500",children:[(P.value||"").length,"/50 caratteri"]}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:b.control,name:"category",render:({field:P})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(Va,{className:"mr-2 h-4 w-4"}),"Categoria"]}),c.jsxs(Nt,{onValueChange:T,value:P.value,children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona categoria"})})}),c.jsxs(_t,{children:[m==null?void 0:m.map(D=>c.jsx(ye,{value:D.name,children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"mr-2",children:D.icon||""}),c.jsx("span",{children:D.name}),c.jsx(ne,{variant:"outline",className:"ml-2 text-xs",children:D.itemCount})]})},D.id)),c.jsx(ye,{value:"add_new",children:c.jsxs("div",{className:"flex items-center text-cambridge-newStyle",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),c.jsx("span",{children:"Aggiungi nuova categoria"})]})})]})]}),c.jsx(Ft,{})]})}),d&&c.jsxs("div",{className:"p-4 border border-cambridge-newStyle/20 rounded-lg bg-cambridge-newStyle/5",children:[c.jsxs("h4",{className:"font-medium text-delft-blue mb-3 flex items-center",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Nuova Categoria"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nome *"}),c.jsx(At,{value:w.name,onChange:P=>S(D=>M(C({},D),{name:P.target.value})),placeholder:"Nome categoria",maxLength:50})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Icona"}),c.jsxs(Yp,{open:h,onOpenChange:p,children:[c.jsx(Zp,{asChild:!0,children:c.jsxs(Q,{variant:"outline",className:"w-full justify-start",children:[c.jsx("span",{className:"mr-2",children:w.icon}),"Seleziona icona"]})}),c.jsx(Hd,{className:"w-64",children:c.jsx("div",{className:"grid grid-cols-8 gap-2",children:vDe.map(P=>c.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>{S(D=>M(C({},D),{icon:P})),p(!1)},className:"h-8 w-8 p-0",children:P},P))})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Descrizione"}),c.jsx(At,{value:w.description,onChange:P=>S(D=>M(C({},D),{description:P.target.value})),placeholder:"Descrizione opzionale",maxLength:100})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Colore"}),c.jsx(At,{type:"color",value:w.color,onChange:P=>S(D=>M(C({},D),{color:P.target.value})),className:"h-10"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[c.jsx(Q,{variant:"outline",size:"sm",onClick:()=>f(!1),disabled:l,children:"Annulla"}),c.jsxs(Q,{size:"sm",onClick:O,disabled:l||!w.name.trim(),children:[l?c.jsx(Pn,{className:"animate-spin h-4 w-4 mr-2"}):c.jsx(Er,{className:"h-4 w-4 mr-2"}),l?"Aggiungendo...":"Aggiungi"]})]})]}),c.jsx(ot,{control:b.control,name:"priority",render:({field:P})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Priorit"}),c.jsxs(Nt,{onValueChange:P.onChange,value:P.value,children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona priorit"})})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"low",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),"Bassa"]})}),c.jsx(ye,{value:"medium",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),"Media"]})}),c.jsx(ye,{value:"high",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),"Alta"]})})]})]}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:b.control,name:"estimatedPrice",render:({field:P})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(Nh,{className:"mr-2 h-4 w-4"}),"Prezzo Stimato ()"]}),c.jsx(gt,{children:c.jsx(At,M(C({},P),{type:"number",step:"0.01",min:"0",placeholder:"0.00",value:P.value||"",onChange:D=>P.onChange(D.target.value?parseFloat(D.target.value):void 0)}))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:b.control,name:"notes",render:({field:P})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(LA,{className:"mr-2 h-4 w-4"}),"Note (Opzionale)"]}),c.jsx(gt,{children:c.jsx(qs,M(C({},P),{placeholder:"Aggiungi note o dettagli aggiuntivi...",rows:3,maxLength:500}))}),c.jsxs("p",{className:"text-xs text-gray-500",children:[(P.value||"").length,"/500 caratteri"]}),c.jsx(Ft,{})]})})]}),_&&c.jsxs(Wc,{className:"border-red-200 bg-red-50",children:[c.jsx(ao,{className:"h-4 w-4 text-red-600"}),c.jsxs(Hc,{className:"text-red-800",children:[c.jsx("strong",{children:"URL duplicato!"})," ",E]})]}),!b.watch("link")&&c.jsxs(Wc,{className:"border-orange-200 bg-orange-50",children:[c.jsx(ao,{className:"h-4 w-4 text-orange-600"}),c.jsxs(Hc,{className:"text-orange-800",children:["L'URL del prodotto  ",c.jsx("strong",{children:"obbligatorio"}),". Inserisci un link valido per procedere."]})]}),A&&c.jsxs(Wc,{className:"border-blue-200 bg-blue-50",children:[c.jsx($p,{className:"h-4 w-4 text-blue-600"}),c.jsxs(Hc,{className:"text-blue-800",children:[c.jsx("strong",{children:"Modalit AI attiva:"})," Nome, categoria, brand e prezzo verranno estratti automaticamente dall'URL.",b.watch("link")&&" Puoi modificare questi dettagli dopo l'inserimento."]})]}),c.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[c.jsx(Q,{variant:"secondary",onClick:()=>{e(),b.reset(),S({name:"",icon:"",description:"",color:"#6B7280"}),f(!1)},disabled:o,children:"Annulla"}),c.jsxs(Q,{type:"submit",disabled:o||!b.watch("link")||!b.watch("link").startsWith("http")||_,className:"min-w-[140px] ".concat(A?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700":""),children:[o?c.jsx(Pn,{className:"animate-spin h-5 w-5 mr-2"}):A?c.jsx(Ph,{className:"h-5 w-5 mr-2"}):c.jsx($0,{className:"h-5 w-5 mr-2"}),o?n?"Aggiornando...":"Salvando...":n?"Aggiorna":A?"Salva con AI":"Salva"]})]})]})}))]})})}const Gl={viewMode:"images",showImages:!0,compactMode:!1,defaultCategory:"all",defaultPriority:"all",showCompleted:!1,theme:"light",language:"it",itemsPerPage:20,enableNotifications:!0,emailNotifications:!1},LB=x.createContext(void 0);function xDe({children:t}){const{user:e}=Bt(),[r,n]=x.useState(Gl),[i,a]=x.useState(!0),o=()=>e!=null&&e.username?"familyTaskTracker_preferences_".concat(e.username):"familyTaskTracker_preferences_guest",s=()=>{try{const p=o(),m=sessionStorage.getItem(p);if(m){const g=JSON.parse(m),v=C(C({},Gl),g);n(v)}else n(Gl)}catch(p){console.error(" Errore nel caricamento delle preferenze:",p),n(Gl)}finally{a(!1)}},l=p=>{try{const m=o();sessionStorage.setItem(m,JSON.stringify(p))}catch(m){console.error(" Errore nel salvataggio delle preferenze:",m)}},u=(p,m)=>{const g=M(C({},r),{[p]:m});n(g),l(g)},d=p=>{const m=C(C({},r),p);n(m),l(m)},f=()=>{n(Gl),l(Gl)};x.useEffect(()=>{e&&(a(!0),s())},[e==null?void 0:e.username]),x.useEffect(()=>{const p=sessionStorage.getItem("theme");p&&p!==r.theme&&u("theme",p)},[]);const h={preferences:r,updatePreference:u,updatePreferences:d,resetPreferences:f,isLoading:i};return c.jsx(LB.Provider,{value:h,children:t})}function FB(){const t=x.useContext(LB);if(t===void 0)throw new Error("useUserPreferences must be used within a UserPreferencesProvider");return t}const rD=["#E07A5F","#3D5A80","#98C1D9","#EE9B00","#BB3E03","#005577","#0A9396","#94D2BD","#F9C74F","#F8961E","#F3722C","#277DA1"],nD={alimentari:"",cibo:"",bevande:"",frutta:"",verdura:"",carne:"",pesce:"",dolci:"",snack:"",casa:"",cucina:"",bagno:"",pulizia:"",arredamento:"",giardino:"","fai da te":"",elettronica:"",computer:"",telefoni:"",audio:"",gaming:"",tv:"",abbigliamento:"",scarpe:"",accessori:"",gioielli:"",salute:"",bellezza:"",cosmetici:"",farmacia:"",auto:"",moto:"",bici:"",trasporti:"",sport:"",libri:"",musica:"",film:"",hobby:"",viaggi:"",ufficio:"",scuola:"",cartoleria:"",animali:"",pet:"",altro:"",varie:"",generale:""};function bDe(){const{data:t,loading:e}=Jt("shopping_items"),{data:r,loading:n}=Jt("categories"),i=x.useMemo(()=>{const f=(r||[]).sort((y,b)=>y.name.localeCompare(b.name));if(!t||t.length===0)return f.map(y=>new Oo(y.id,y.name,y.createdBy,y.createdAt,y.description,y.color,y.icon,y.isDefault,0,y.updatedAt));const h=t.reduce((y,b)=>{var S;const w=((S=b.category)==null?void 0:S.trim())||"Altro";return y[w.toLowerCase()]=(y[w.toLowerCase()]||0)+1,y},{}),p=f.map(y=>new Oo(y.id,y.name,y.createdBy,y.createdAt,y.description,y.color,y.icon,y.isDefault,h[y.name.toLowerCase()]||0,y.updatedAt)),m=new Set((r||[]).map(y=>y.name.toLowerCase())),v=Object.entries(h).filter(([y])=>!m.has(y)).map(([y,b],w)=>{var N,T;const S=y.toLowerCase(),A=nD[S]||((N=Object.entries(nD).find(([O])=>S.includes(O)))==null?void 0:N[1])||"",_=rD[w%rD.length],E=((T=t.find(O=>{var j;return((j=O.category)==null?void 0:j.toLowerCase())===y}))==null?void 0:T.category)||y;return new Oo("dynamic_".concat(y.replace(/\s+/g,"_")),E,"system",new Date,"".concat(b," ").concat(b===1?"articolo":"articoli"," (categoria dinamica)"),_,A,!1,b,new Date)});return v.sort((y,b)=>y.itemCount!==b.itemCount?b.itemCount-y.itemCount:y.name.localeCompare(b.name)),[...p,...v]},[t,r]);return{data:i,loading:e||n,getCategoryByName:f=>i.find(h=>h.name.toLowerCase()===f.toLowerCase()),getStaticCategories:()=>r||[],getDynamicCategories:()=>i.filter(f=>f.id.startsWith("dynamic_")),getPopularCategories:(f=5)=>i.slice(0,f),getCategoryNames:()=>i.map(f=>f.name),isDynamicCategory:f=>f.startsWith("dynamic_"),totalCategories:i.length,staticCount:(r==null?void 0:r.length)||0,dynamicCount:i.length-((r==null?void 0:r.length)||0),totalItems:(t==null?void 0:t.length)||0}}function wDe({value:t,onValueChange:e,categories:r,placeholder:n="Seleziona categoria",className:i,disabled:a}){const{user:o}=Bt(),{toast:s}=Nr(),{add:l,remove:u,loading:d}=Jt("categories"),[f,h]=x.useState(!1),[p,m]=x.useState(null),[g,v]=x.useState(null),[y,b]=x.useState(!1),w=wl({defaultValues:{name:"",icon:"",description:"",color:"#6B7280"}}),S=["#E07A5F","#3D5A80","#98C1D9","#EE9B00","#BB3E03","#005577","#0A9396","#94D2BD","#F9C74F","#F8961E","#F3722C","#277DA1"],A=()=>G(this,null,function*(){if(g){b(!0);try{yield u(g.id),t===g.name&&e(""),s({title:"Categoria eliminata",description:'La categoria "'.concat(g.name,'"  stata eliminata con successo.')})}catch(j){console.error("Errore nell'eliminazione della categoria:",j),s({title:"Errore",description:"Impossibile eliminare la categoria",variant:"destructive"})}finally{b(!1),v(null)}}}),_=j=>{w.reset({name:j.name,icon:j.icon||"",description:"Categoria ".concat(j.name),color:j.color}),m(j),h(!0)},E=j=>G(this,null,function*(){try{const P=new Oo("cat_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),j.name.trim(),(o==null?void 0:o.username)||"system",new Date,j.description.trim()||"Categoria ".concat(j.name),j.color,j.icon.trim()||void 0,!1,0,new Date);yield l(P),e(j.name),w.reset(),m(null),h(!1);const D=p?"promossa":"creata";s({title:"Categoria ".concat(D),description:'La categoria "'.concat(j.name,'"  stata ').concat(D," con successo!")})}catch(P){console.error("Errore nell'aggiunta della categoria:",P),s({title:"Errore",description:"Impossibile aggiungere la categoria",variant:"destructive"})}}),N=j=>{j==="__add_new__"?h(!0):e(j)},T=r.filter(j=>!j.id.startsWith("dynamic_")),O=r.filter(j=>j.id.startsWith("dynamic_"));return c.jsxs(c.Fragment,{children:[c.jsxs(Nt,{value:t,onValueChange:N,disabled:a,children:[c.jsx(St,{className:ie("w-full",i),children:c.jsx(jt,{placeholder:n})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"__add_new__",className:"text-cambridge-newStyle font-medium",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(ar,{className:"h-4 w-4 mr-2"}),"Aggiungi nuova categoria"]})}),c.jsx("div",{className:"px-2 py-1",children:c.jsx("div",{className:"h-px bg-gray-200"})}),T.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Categorie Principali"}),T.map(j=>c.jsxs("div",{className:"relative",children:[c.jsx(ye,{value:j.name,children:c.jsx("div",{className:"flex items-center justify-between w-full pr-8",children:c.jsxs("div",{className:"flex items-center flex-1",children:[j.icon&&c.jsx("span",{className:"mr-2",children:j.icon}),c.jsx("span",{children:j.name}),c.jsx(ne,{variant:"outline",className:"ml-2 text-xs",children:j.itemCount})]})})}),c.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-5 w-5 p-0 z-10 opacity-100 hover:bg-red-100",onClick:P=>{P.preventDefault(),P.stopPropagation(),v(j)},title:"Elimina categoria",children:c.jsx(Mr,{className:"h-3 w-3 text-red-500"})})]},j.id))]}),O.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"px-2 py-1",children:c.jsx("div",{className:"h-px bg-gray-200"})}),c.jsx("div",{className:"px-2 py-1 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Categorie Automatiche"}),O.map(j=>c.jsxs("div",{className:"relative",children:[c.jsx(ye,{value:j.name,children:c.jsx("div",{className:"flex items-center justify-between w-full pr-8",children:c.jsxs("div",{className:"flex items-center flex-1",children:[j.icon&&c.jsx("span",{className:"mr-2",children:j.icon}),c.jsx("span",{children:j.name}),c.jsx(ne,{variant:"secondary",className:"ml-2 text-xs bg-gray-100",children:j.itemCount})]})})}),c.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 h-5 w-5 p-0 z-10 opacity-100",onClick:P=>{P.preventDefault(),P.stopPropagation(),_(j)},title:"Promuovi a categoria principale",children:c.jsx(ar,{className:"h-3 w-3 text-cambridge-newStyle"})})]},j.id))]})]})]}),c.jsx(Yt,{open:f,onOpenChange:h,children:c.jsxs(Ht,{className:"sm:max-w-md",children:[c.jsx(Zt,{children:c.jsxs(Qt,{className:"flex items-center text-lg text-cambridge-newStyle",children:[c.jsx(ar,{className:"mr-2 h-5 w-5"}),p?'Promuovi "'.concat(p.name,'"'):"Aggiungi Nuova Categoria"]})}),c.jsx(Al,M(C({},w),{children:c.jsxs("form",{onSubmit:w.handleSubmit(E),className:"space-y-4",children:[c.jsx(ot,{control:w.control,name:"name",rules:{required:"Il nome  obbligatorio",minLength:{value:2,message:"Minimo 2 caratteri"},maxLength:{value:30,message:"Massimo 30 caratteri"}},render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium",children:"Nome Categoria *"}),c.jsx(gt,{children:c.jsx(At,M(C({},j),{placeholder:"es. Elettronica, Casa, Sport...",maxLength:30,disabled:!!p}))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:w.control,name:"icon",render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium",children:"Emoji (opzionale)"}),c.jsx(gt,{children:c.jsx(At,M(C({},j),{placeholder:"",maxLength:4,className:"text-lg"}))}),c.jsx("div",{className:"text-xs text-gray-500",children:"Inserisci un'emoji per rappresentare la categoria"})]})}),c.jsx(ot,{control:w.control,name:"description",render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium",children:"Descrizione (opzionale)"}),c.jsx(gt,{children:c.jsx(qs,M(C({},j),{placeholder:"Breve descrizione della categoria...",rows:2,maxLength:100}))})]})}),c.jsx(ot,{control:w.control,name:"color",render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium",children:"Colore"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(P=>c.jsx(Q,{type:"button",variant:"outline",className:"w-8 h-8 p-0 border-2 ".concat(j.value===P?"border-gray-800":"border-gray-300"),style:{backgroundColor:P},onClick:()=>j.onChange(P),children:j.value===P&&c.jsx(Er,{className:"h-4 w-4 text-white"})},P))})]})}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx(Q,{type:"button",variant:"outline",onClick:()=>{h(!1),m(null),w.reset()},disabled:d,children:"Annulla"}),c.jsx(Q,{type:"submit",disabled:d,className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90",children:d?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),p?"Promozione...":"Creazione..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Er,{className:"mr-2 h-4 w-4"}),p?"Promuovi Categoria":"Crea Categoria"]})})]})]})}))]})}),c.jsx(fl,{open:!!g,onOpenChange:()=>v(null),children:c.jsxs(Bs,{children:[c.jsxs(zs,{children:[c.jsx(Us,{children:"Conferma eliminazione categoria"}),c.jsxs(Ws,{children:['Sei sicuro di voler eliminare la categoria "',g==null?void 0:g.name,'"?',c.jsx("br",{}),c.jsx("br",{}),c.jsx("strong",{children:"Attenzione:"})," Questa azione non pu essere annullata. Gli articoli che usano questa categoria manterranno il nome della categoria, ma essa non sar pi disponibile nella lista delle categorie principali."]})]}),c.jsxs(Vs,{children:[c.jsx(Gs,{disabled:y,children:"Annulla"}),c.jsx(Hs,{onClick:A,disabled:y,className:"bg-red-500 hover:bg-red-600",children:y?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Eliminazione..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Elimina Categoria"]})})]})]})})]})}const gf=({isVisible:t,title:e,subtitle:r,children:n,isLoading:i=!1})=>{const[a,o]=x.useState(!1),[s,l]=x.useState(!1);x.useEffect(()=>{t?(l(!0),requestAnimationFrame(()=>{o(!0)})):(o(!1),setTimeout(()=>{l(!1)},1500))},[t]);const u=()=>a?.95:0,d=()=>a?8:0;return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"relative transition-opacity duration-300 ".concat(i?"opacity-0":"opacity-100"),children:n}),s&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center transition-all duration-800 ease-out pointer-events-none",style:{backgroundColor:"hsl(var(--background) / ".concat(u(),")"),backdropFilter:"blur(".concat(d(),"px)"),WebkitBackdropFilter:"blur(".concat(d(),"px)"),opacity:a?1:0},children:c.jsx("div",{className:"\n              bg-white dark:bg-gray-800 rounded-xl shadow-xl border p-8 max-w-sm mx-4\n              transition-all duration-600 ease-out pointer-events-auto\n              ".concat(a?"scale-100 opacity-100 translate-y-0":"scale-90 opacity-0 translate-y-8","\n            "),children:c.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"\n                    animate-spin rounded-full h-12 w-12 border-4 border-cambridge-newStyle/20\n                    transition-opacity duration-300\n                    ".concat(a?"opacity-100":"opacity-0","\n                  ")}),c.jsx("div",{className:"\n                    animate-spin rounded-full h-12 w-12 border-4 border-cambridge-newStyle \n                    border-t-transparent absolute top-0\n                    transition-opacity duration-300 delay-100\n                    ".concat(a?"opacity-100":"opacity-0","\n                  ")})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"\n                    font-semibold text-delft-blue mb-1\n                    transition-all duration-400 delay-200\n                    ".concat(a?"opacity-100 translate-y-0":"opacity-0 translate-y-2","\n                  "),children:e}),c.jsx("p",{className:"\n                    text-sm text-gray-600 dark:text-gray-400\n                    transition-all duration-400 delay-300\n                    ".concat(a?"opacity-100 translate-y-0":"opacity-0 translate-y-2","\n                  "),children:r})]}),c.jsxs("div",{className:"\n                  flex space-x-1\n                  transition-all duration-400 delay-400\n                  ".concat(a?"opacity-100 translate-y-0":"opacity-0 translate-y-2","\n                "),children:[c.jsx("div",{className:"w-2 h-2 bg-cambridge-newStyle rounded-full animate-bounce",style:{animationDelay:"0s"}}),c.jsx("div",{className:"w-2 h-2 bg-cambridge-newStyle rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-cambridge-newStyle rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]})},dm=(t,e)=>{const[r,n]=x.useState(!0),[i,a]=x.useState(!0);return x.useEffect(()=>{if(!t&&e!==void 0){const o=setTimeout(()=>{n(!1),a(!1)},300);return()=>clearTimeout(o)}},[e,t]),{showLoading:r,isInitialLoading:i}};function Cs(t){return Cl({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3v16a2 2 0 0 0 2 2h16"},child:[]},{tag:"rect",attr:{x:"15",y:"5",width:"4",height:"12",rx:"1"},child:[]},{tag:"rect",attr:{x:"7",y:"8",width:"4",height:"9",rx:"1"},child:[]}]})(t)}function ADe(){const{user:t}=Bt(),{toast:e}=Nr(),r=Li(),[n,i]=x.useState(!r),[a,o]=x.useState(!1),{preferences:s,updatePreference:l}=FB(),u=s.viewMode,d=U=>{l("viewMode",U)},[f,h]=x.useState(!1),[p,m]=x.useState(null),[g,v]=x.useState(null),[y,b]=x.useState(!1),[w,S]=x.useState(""),[A,_]=x.useState(s.defaultCategory),[E,N]=x.useState(s.defaultPriority),[T,O]=x.useState("all"),[j,P]=x.useState(s.showCompleted),[D,F]=x.useState([]);x.useEffect(()=>{i(!r)},[r]),x.useEffect(()=>{_(s.defaultCategory),N(s.defaultPriority),P(s.showCompleted)},[s.defaultCategory,s.defaultPriority,s.showCompleted]);const{data:I,loading:k,add:R,update:L,remove:V}=Jt("shopping_items"),{data:W}=bDe(),q=$.useCallback(U=>{F(Z=>Z.map(ce=>ce.id===U.id?U:ce))},[]);x.useEffect(()=>{F(I||[])},[I,k]);const{showLoading:H}=dm(k,I),{filteredItems:J,visibleItems:de}=x.useMemo(()=>{if(!D)return{filteredItems:[],visibleItems:[]};const U=D.filter(ce=>ce.isPublic||ce.createdBy===(t==null?void 0:t.username)||(t==null?void 0:t.role)==="admin");return{filteredItems:U.filter(ce=>{var sr,Wn,fn;const xe=!w||((sr=ce.name)==null?void 0:sr.toLowerCase().includes(w.toLowerCase()))||((Wn=ce.brandName)==null?void 0:Wn.toLowerCase().includes(w.toLowerCase()))||((fn=ce.notes)==null?void 0:fn.toLowerCase().includes(w.toLowerCase())),me=A==="all"||ce.category===A,Te=E==="all"||ce.priority===E,tt=T==="all"||T==="public"&&ce.isPublic||T==="private"&&!ce.isPublic,rt=j?ce.completed:!ce.completed;return xe&&me&&Te&&tt&&rt}),visibleItems:U}},[D,w,A,E,T,j,t]),se=x.useMemo(()=>{if(!de||!J)return{totalPending:0,totalCompleted:0,totalVisible:0,publicItems:0,privateItems:0,myItems:0,highPriority:0,totalCost:0,pending:0,completed:0,pendingItems:[],completedItems:[]};const U=de.filter(me=>!me.completed),Z=de.filter(me=>me.completed),ce=J.filter(me=>!me.completed),xe=J.filter(me=>me.completed);return{totalPending:U.length,totalCompleted:Z.length,totalVisible:de.length,publicItems:de.filter(me=>me.isPublic).length,privateItems:de.filter(me=>!me.isPublic).length,myItems:de.filter(me=>me.createdBy===(t==null?void 0:t.username)).length,highPriority:U.filter(me=>me.priority==="high").length,totalCost:U.reduce((me,Te)=>me+(Te.estimatedPrice||0),0),pending:ce.length,completed:xe.length,pendingItems:ce,completedItems:xe}},[de,J,t]),Ee=()=>{S(""),_("all"),N("all"),O("all"),P(!1),l("defaultCategory","all"),l("defaultPriority","all"),l("showCompleted",!1)},Ue=[w.length>0,A!=="all",E!=="all",T!=="all",j].filter(Boolean).length,ge=U=>{v(U),b(!0)},Y=()=>{b(!1),v(null)},te=U=>{m(U||null),h(!0)},ae=()=>{h(!1),m(null)},X=U=>G(this,null,function*(){try{p?(yield L(p.id,U),e({title:"Elemento aggiornato",description:"Elemento aggiornato con successo!"})):(yield R(U),e({title:"Elemento aggiunto",description:"Nuovo elemento aggiunto alla lista!"})),ae()}catch(Z){console.error("Errore nel salvataggio:",Z),e({title:"Errore",description:p?"Impossibile aggiornare l'elemento":"Impossibile aggiungere l'elemento",variant:"destructive"})}}),be=U=>G(this,null,function*(){try{yield V(U),e({title:"Elemento eliminato",description:"Elemento eliminato con successo!"})}catch(Z){console.error("Errore nell'eliminazione:",Z),e({title:"Errore",description:"Impossibile eliminare l'elemento",variant:"destructive"})}}),ue=U=>G(this,null,function*(){const Z=D==null?void 0:D.find(ce=>ce.id===U);if(Z)try{const ce=Object.assign(Object.create(Object.getPrototypeOf(Z)),Z,{completed:!Z.completed,completedBy:Z.completed||t==null?void 0:t.username,completedAt:Z.completed?void 0:new Date,updatedAt:new Date});yield L(U,ce),q(ce),e({title:ce.completed?"Elemento completato":"Elemento ripristinato",description:ce.completed?"Elemento segnato come completato!":"Elemento ripristinato nella lista!"})}catch(ce){console.error("Errore nel toggle complete:",ce),e({title:"Errore",description:"Impossibile aggiornare l'elemento",variant:"destructive"})}}),Pe=()=>u==="images"?"grid gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5":"grid gap-4 md:grid-cols-2 lg:grid-cols-3",oe=U=>{const Z={item:U,categories:W||[],onEdit:()=>te(U),onDelete:be,onComplete:ue,onUpdate:q,onClick:ge};return u==="images"?c.jsx(fDe,M(C({},Z),{viewMode:u}),U.id):c.jsx(oDe,C({},Z),U.id)},_e=U=>{const Z=U||"all";_(Z),l("defaultCategory",Z)},De=U=>{N(U),l("defaultPriority",U)},he=U=>{P(U),l("showCompleted",U)},z=()=>i(!n);return c.jsx(gf,{isVisible:H,title:"Caricamento Shopping",subtitle:"Preparazione della lista...",children:c.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[c.jsxs("div",{className:ie("flex justify-between items-start gap-6 mb-8",r?"flex-col":"lg:flex-row lg:items-center"),children:[c.jsxs("div",{className:"flex-1 flex items-center gap-3 mb-3 w-full",children:[" ",c.jsx(cne,{className:"h-8 w-8 text-cambridge-newStyle"}),c.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"Shopping"}),r&&c.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[" ",c.jsx(Q,{onClick:()=>o(!0),size:"sm",variant:"outline",className:"border-cambridge-newStyle",children:c.jsx(Cs,{className:"h-4 w-4 text-cambridge-newStyle"})}),c.jsx(Q,{onClick:()=>te(),size:"sm",className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white p-2",children:c.jsx(ar,{className:"h-4 w-4"})})]})]}),!r&&c.jsxs("div",{className:"flex flex-wrap gap-4",children:[c.jsxs(ne,{variant:"outline",className:"text-cambridge-newStyle border-cambridge-newStyle",children:[se.totalVisible," ",se.totalVisible===1?"articolo":"articoli"]}),c.jsxs(ne,{variant:"outline",className:"text-cambridge-newStyle border-cambridge-newStyle",children:[se.totalPending," da comprare"]}),c.jsxs(ne,{variant:"outline",className:"text-green-600 border-green-300",children:[se.totalCompleted," archiviati"]}),c.jsxs(ne,{variant:"outline",className:"text-blue-600 border-blue-300",children:[c.jsx(Br,{className:"w-3 h-3 mr-1"}),se.publicItems," pubblici"]}),c.jsxs(ne,{variant:"outline",className:"text-orange-600 border-orange-300",children:[c.jsx(Ir,{className:"w-3 h-3 mr-1"}),se.privateItems," privati"]}),c.jsxs(ne,{variant:"outline",className:"text-purple-600 border-purple-300",children:[se.myItems," miei"]}),se.highPriority>0&&c.jsxs(ne,{variant:"destructive",className:"bg-red-100 text-red-700",children:[c.jsx(Xi,{className:"w-3 h-3 mr-1"}),se.highPriority," urgenti"]}),se.totalCost>0&&c.jsxs(ne,{variant:"outline",className:"text-green-600 border-green-300",children:[c.jsx(Nh,{className:"w-3 h-3 mr-1"}),"",se.totalCost.toFixed(2)," stimati"]}),c.jsxs(ne,{variant:"outline",className:"text-indigo-600 border-indigo-300 bg-indigo-50",children:[" ",u==="images"?"Immagini":"Compatta"," (salvata)"]})]})]}),!r&&c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[c.jsx(g0,{className:"h-4 w-4 ".concat(u==="compact"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx(Kr,{id:"view-mode",checked:u==="images",onCheckedChange:U=>d(U?"images":"compact"),className:"data-[state=checked]:bg-cambridge-newStyle"}),c.jsx(D0,{className:"h-4 w-4 ".concat(u==="images"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx(Wt,{htmlFor:"view-mode",className:"text-sm font-medium cursor-pointer",children:u==="images"?"Vista Immagini":"Vista Compatta"})]}),c.jsxs(Q,{onClick:()=>te(),className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Aggiungi Articolo"]})]}),c.jsx(Ie,{className:ie("mb-8",r&&"mb-6"),children:c.jsxs(Ve,{className:ie("p-6",r&&"p-4"),children:[r&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:"font-medium text-sm",children:"Filtri di ricerca"}),Ue>0&&c.jsx(ne,{variant:"secondary",className:"bg-cambridge-newStyle/10 text-cambridge-newStyle text-xs",children:Ue})]}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:z,className:"p-1",children:n?c.jsx(Bo,{className:"h-4 w-4"}):c.jsx(Na,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:ie(r&&!n?"hidden":"block"),children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ricerca"}),c.jsxs("div",{className:"relative",children:[c.jsx($u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),c.jsx(At,{placeholder:"Cerca articoli, brand, note...",value:w,onChange:U=>S(U.target.value),className:"pl-10"})]})]}),c.jsxs("div",{className:"flex gap-2 flex-wrap",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Categoria"}),c.jsx(wDe,{value:A,onValueChange:_e,categories:W||[],placeholder:"Tutte le categorie",className:ie("w-[140px]",r&&"w-full")})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Priorit"}),c.jsxs(Nt,{value:E,onValueChange:De,children:[c.jsx(St,{className:ie("w-[120px]",r&&"w-full"),children:c.jsx(jt,{placeholder:"Tutte"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutte"}),c.jsx(ye,{value:"high",children:"Alta"}),c.jsx(ye,{value:"medium",children:"Media"}),c.jsx(ye,{value:"low",children:"Bassa"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Visibilit"}),c.jsxs(Nt,{value:T,onValueChange:O,children:[c.jsx(St,{className:ie("w-[120px]",r&&"w-full"),children:c.jsx(jt,{placeholder:"Tutte"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutte"}),c.jsx(ye,{value:"public",children:"Pubbliche"}),c.jsx(ye,{value:"private",children:"Private"})]})]})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mt-4",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Kr,{id:"show-completed",checked:j,onCheckedChange:he,className:"data-[state=checked]:bg-cambridge-newStyle"}),c.jsx(Wt,{htmlFor:"show-completed",className:"text-sm font-medium cursor-pointer",children:"Mostra archiviati"})]}),c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 dark:bg-gray-800 rounded-lg border",children:[c.jsx(g0,{className:"h-4 w-4 ".concat(u==="compact"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx(Kr,{checked:u==="images",onCheckedChange:U=>d(U?"images":"compact"),className:"data-[state=checked]:bg-cambridge-newStyle"}),c.jsx(D0,{className:"h-4 w-4 ".concat(u==="images"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:u==="images"?"Immagini":"Compatta"})]})]}),Ue>0&&c.jsxs(Q,{variant:"ghost",onClick:Ee,size:"sm",className:ie("text-gray-500",r&&"w-full"),children:["Pulisci (",Ue,")"]})]})]})]})}),!k&&c.jsxs("div",{className:ie("space-y-8",r&&"px-1"),children:[se.pendingItems.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-delft-blue",children:"Da Comprare"}),c.jsx(ne,{variant:"secondary",children:se.pending})]}),c.jsx("div",{className:Pe(),children:se.pendingItems.sort((U,Z)=>{const ce=new Date(U.createdAt).getTime(),me=new Date(Z.createdAt).getTime()-ce;if(me===0){const Te={high:3,medium:2,low:1};return Te[Z.priority]-Te[U.priority]}return me}).map(oe)})]}),j&&se.completedItems.length>0&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Completati"}),c.jsx(ne,{variant:"outline",className:"text-green-600",children:se.completed})]}),c.jsx("div",{className:"".concat(Pe()," opacity-75"),children:se.completedItems.sort((U,Z)=>{const ce=U.completedAt?new Date(U.completedAt).getTime():0;return(Z.completedAt?new Date(Z.completedAt).getTime():0)-ce}).map(oe)})]}),se.pendingItems.length===0&&se.completedItems.length===0&&!H&&c.jsx(Ie,{className:"text-center py-16",children:c.jsxs(Ve,{children:[c.jsx(hs,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Nessun elemento trovato"}),c.jsx("p",{className:"text-gray-500 mb-4",children:Ue>0?"Prova a modificare i filtri di ricerca.":"Inizia aggiungendo il tuo primo articolo shopping."}),Ue>0?c.jsx(Q,{onClick:Ee,variant:"outline",children:"Pulisci Filtri"}):c.jsxs(Q,{onClick:()=>te(),children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Aggiungi Primo Articolo"]})]})})]}),c.jsx(gDe,{item:g,categories:W||[],isOpen:y,onClose:Y,onEdit:U=>{Y(),te(U)},onComplete:ue}),c.jsx(Yt,{open:a,onOpenChange:o,children:c.jsxs(Ht,{className:"sm:max-w-md p-6",children:[c.jsxs(Zt,{className:"mb-4",children:[c.jsx(Qt,{className:"text-xl font-semibold text-delft-blue",children:"Statistiche Lista Shopping"}),c.jsx(Oi,{className:"text-gray-600",children:"Riepilogo rapido e completo degli articoli nella tua lista."})]}),c.jsxs("div",{className:"flex flex-wrap gap-3 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:[c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-cambridge-newStyle border-cambridge-newStyle bg-cambridge-newStyle/5",children:[c.jsx(hs,{className:"w-4 h-4 mr-2"})," ",se.totalVisible," ",se.totalVisible===1?"articolo":"articoli"]}),c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-cambridge-newStyle border-cambridge-newStyle bg-cambridge-newStyle/5",children:[c.jsx(g0,{className:"w-4 h-4 mr-2"})," ",se.totalPending," da comprare"]}),c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-green-600 border-green-300 bg-green-50",children:[c.jsx(Er,{className:"w-4 h-4 mr-2"})," ",se.totalCompleted," archiviati"]}),c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-blue-600 border-blue-300 bg-blue-50",children:[c.jsx(Br,{className:"w-4 h-4 mr-2"})," ",se.publicItems," pubblici"]}),c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-orange-600 border-orange-300 bg-orange-50",children:[c.jsx(Ir,{className:"w-4 h-4 mr-2"})," ",se.privateItems," privati"]}),c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-purple-600 border-purple-300 bg-purple-50",children:[c.jsx(ji,{className:"w-4 h-4 mr-2"})," ",se.myItems," miei"]}),se.highPriority>0&&c.jsxs(ne,{variant:"destructive",className:"flex items-center justify-center p-2 text-sm font-medium bg-red-100 text-red-700",children:[c.jsx(Xi,{className:"w-4 h-4 mr-2"})," ",se.highPriority," urgenti"]}),se.totalCost>0&&c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-green-600 border-green-300 bg-green-50",children:[c.jsx(Nh,{className:"w-4 h-4 mr-2"})," ",se.totalCost.toFixed(2)," stimati"]}),c.jsxs(ne,{variant:"outline",className:"flex items-center justify-center p-2 text-sm font-medium text-indigo-600 border-indigo-300 bg-indigo-50",children:[c.jsx($0,{className:"w-4 h-4 mr-2"})," ",u==="images"?"Vista Immagini":"Vista Compatta"," (salvata)"]})]}),c.jsx("div",{className:"pt-4 flex justify-end",children:c.jsx(Q,{onClick:()=>o(!1),variant:"secondary",children:"Chiudi"})})]})}),c.jsx(yDe,{isOpen:f,onClose:ae,onAdd:X,editItem:p})]})})}const SDe=({text:t})=>{const[,e]=x.useState({}),r=a=>{e(o=>M(C({},o),{[a]:!o[a]}))},n=a=>{if(!a)return null;const o=[];let s=0;const l=/\*\*([^*]+)\*\*/g;let u;for(;(u=l.exec(a))!==null;)u.index>s&&o.push(a.substring(s,u.index)),o.push(c.jsx("strong",{className:"font-bold text-blue-900",children:u[1]},"bold-".concat(u.index))),s=u.index+u[0].length;return s<a.length&&o.push(a.substring(s)),o.length>0?o:a},i=a=>a?a.split("\n").map((s,l)=>{const u=s.match(/^- (.+)$/);if(u){const f=u[1],h=f.endsWith(""),p=h?f.slice(0,-1):f;return c.jsxs("div",{className:"flex items-center gap-2 my-1",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:()=>r(l),className:"h-3 w-3 text-blue-600 rounded border-gray-300 focus:ring-blue-500 flex-shrink-0 cursor-pointer",disabled:!0}),c.jsxs("span",{className:"".concat(h?"line-through text-gray-500":""," text-sm leading-relaxed"),children:[n(p)," "]})]},l)}const d=s.match(/^\. (.+)$/);if(d){const f=d[1];return c.jsxs("div",{className:"flex items-start gap-2 my-1",children:[c.jsx("span",{className:"text-blue-600 font-bold mt-0.5 select-none flex-shrink-0 text-sm",children:""}),c.jsxs("span",{className:"text-sm leading-relaxed",children:[n(f)," "]})]},l)}return c.jsx("div",{className:"my-1 text-sm leading-relaxed",children:n(s)||""},l)}):[];return c.jsx("div",{className:"text-sm leading-relaxed",children:i(t)})};function _De({note:t,onEdit:e,onDelete:r,onClick:n}){const{user:i}=Bt(),{toast:a}=Nr(),[,o]=x.useState(!1),s=(i==null?void 0:i.username)===t.createdBy||(i==null?void 0:i.role)==="admin"||t.isPublic,l=p=>{const m=new Date,g=new Date(p);if(isNaN(g.getTime()))return"Data non valida";const v=m.getTime()-g.getTime(),y=Math.floor(v/(1e3*60)),b=Math.floor(v/(1e3*60*60)),w=Math.floor(v/(1e3*60*60*24));return y<1?"appena ora":y<60?"".concat(y," minuti fa"):b<24?"".concat(b," ore fa"):w<7?"".concat(w," giorni fa"):w<30?"".concat(Math.floor(w/7)," settimane fa"):w<365?"".concat(Math.floor(w/30)," mesi fa"):"".concat(Math.floor(w/365)," anni fa")},u=()=>G(this,null,function*(){o(!0);try{yield r(t.id),a({title:"Nota eliminata",description:"La nota  stata eliminata con successo!"})}catch(p){a({title:"Errore",description:"Impossibile eliminare la nota",variant:"destructive"})}finally{o(!1)}}),d=p=>{p.target.closest("button")||p.target.closest("a")||p.target.closest('[role="button"]')||n&&n(t)},f=(p,m=120)=>p.length<=m?p:p.substring(0,m)+"...",h=()=>t.isPublic?c.jsxs(ne,{className:"bg-green-100 text-green-700 border-green-200",children:[c.jsx(Br,{className:"mr-1 h-3 w-3"}),"Pubblica"]}):c.jsxs(ne,{className:"bg-orange-100 text-orange-700 border-orange-200",children:[c.jsx(Ir,{className:"mr-1 h-3 w-3"}),"Privata"]});return c.jsx(Ie,{className:"hover:shadow-md transition-all duration-200 border-l-4 cursor-pointer",style:{borderLeftColor:t.color||"#F3F4F6"},onClick:d,children:c.jsxs(Ve,{className:"p-4",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("div",{className:"flex-1 min-w-0",children:c.jsxs("div",{className:"flex items-start gap-2",children:[t.isPinned&&c.jsx(Th,{className:"h-4 w-4 text-orange-500 mt-0.5 flex-shrink-0"}),c.jsx("h3",{className:"font-semibold text-lg leading-tight break-words",children:t.title})]})}),s&&c.jsxs("div",{className:"flex space-x-1 ml-2 flex-shrink-0",children:[c.jsx(Q,{variant:"ghost",size:"sm",onClick:p=>{p.stopPropagation(),e(t)},className:"text-gray-400 hover:text-cambridge-newStyle h-8 w-8 p-0",children:c.jsx(zo,{className:"h-4 w-4"})}),c.jsxs(fl,{children:[c.jsx(im,{asChild:!0,children:c.jsx(Q,{variant:"ghost",size:"sm",onClick:p=>p.stopPropagation(),className:"text-gray-400 hover:text-red-500 h-8 w-8 p-0",children:c.jsx(Mr,{className:"h-4 w-4"})})}),c.jsxs(Bs,{children:[c.jsxs(zs,{children:[c.jsx(Us,{children:"Conferma eliminazione"}),c.jsxs(Ws,{children:['Sei sicuro di voler eliminare la nota "',t.title,'"? Questa azione non pu essere annullata.']})]}),c.jsxs(Vs,{children:[c.jsx(Gs,{children:"Annulla"}),c.jsx(Hs,{onClick:u,className:"bg-red-500 hover:bg-red-600",children:"Elimina"})]})]})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[h(),t.isPinned&&c.jsxs(ne,{className:"bg-orange-100 text-orange-700 border-orange-200",children:[c.jsx(Th,{className:"mr-1 h-3 w-3"}),"Fissata"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"text-sm leading-relaxed",children:c.jsx(SDe,{text:f(t.content)})}),t.tags&&t.tags.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map((p,m)=>c.jsxs(ne,{variant:"outline",className:"text-xs px-2 py-0.5 bg-gray-50",children:["#",p]},m)),t.tags.length>3&&c.jsxs(ne,{variant:"outline",className:"text-xs px-2 py-0.5 bg-gray-50",children:["+",t.tags.length-3]})]}),c.jsxs("div",{className:"space-y-2 text-xs text-gray-500",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(ji,{className:"mr-2 h-3 w-3"}),"Creata da ",t.createdBy]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx(Xr,{className:"mr-2 h-3 w-3"}),l(t.updatedAt)]})]})]})]})})}const CDe=({onInsertPattern:t})=>c.jsxs("div",{className:"flex gap-2 p-3 bg-gray-50 rounded-lg border border-gray-200 mb-3 justify-center",children:[c.jsxs(Q,{type:"button",variant:"outline",className:"flex items-center gap-1 text-xs px-3 py-1.5 h-auto",onClick:()=>t("bold"),children:[c.jsx(zW,{className:"h-3 w-3"}),"Grassetto"]}),c.jsxs(Q,{type:"button",variant:"outline",className:"flex items-center gap-1 text-xs px-3 py-1.5 h-auto",onClick:()=>t("checkbox"),children:[c.jsx(lH,{className:"h-3 w-3"}),"Checkbox"]}),c.jsxs(Q,{type:"button",variant:"outline",className:"flex items-center gap-1 text-xs px-3 py-1.5 h-auto",onClick:()=>t("bullet"),children:[c.jsx(g0,{className:"h-3 w-3"}),"Elenco"]})]}),EDe=({text:t})=>{const[e,r]=x.useState({}),n=o=>{r(s=>M(C({},s),{[o]:!s[o]}))},i=o=>{if(!o)return null;const s=[];let l=0;const u=/\*\*([^*]+)\*\*/g;let d;for(;(d=u.exec(o))!==null;)d.index>l&&s.push(o.substring(l,d.index)),s.push(c.jsx("strong",{className:"font-bold",children:d[1]},"bold-".concat(d.index))),l=d.index+d[0].length;return l<o.length&&s.push(o.substring(l)),s.length>0?s:o},a=o=>o?o.split("\n").map((l,u)=>{const d=l.match(/^- (.+)$/);if(d){const h=e[u],p=d[1];return c.jsxs("div",{className:"flex items-center gap-2 my-1",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:()=>n(u),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 focus:ring-2"}),c.jsx("span",{className:h?"line-through text-gray-500":"",children:i(p)})]},u)}const f=l.match(/^\. (.+)$/);return f?c.jsxs("div",{className:"flex items-start gap-2 my-1",children:[c.jsx("span",{className:"text-blue-600 font-bold mt-0.5 select-none",children:""}),c.jsx("span",{children:i(f[1])})]},u):c.jsx("div",{className:"my-1",children:i(l)||""},u)}):[];return c.jsx("div",{className:"text-sm leading-relaxed",children:a(t)})},NDe=({field:t,placeholder:e,rows:r=6})=>{const n=x.useRef(null),i=a=>{const o=n.current;if(!o)return;const s=o.selectionStart,l=o.selectionEnd,u=t.value.substring(s,l);let d="",f=s;switch(a){case"bold":d=t.value.substring(0,s)+"**".concat(u||"","**")+t.value.substring(l),f=s+2;break;case"checkbox":const h=t.value.lastIndexOf("\n",s-1)+1;d=t.value.substring(0,h)+"- "+t.value.substring(h),f=s+2;break;case"bullet":const p=t.value.lastIndexOf("\n",s-1)+1;d=t.value.substring(0,p)+". "+t.value.substring(p),f=s+2;break;default:return}t.onChange(d),setTimeout(()=>{o.focus(),o.setSelectionRange(f,f)},0)};return c.jsxs("div",{className:"space-y-3",children:[c.jsx(CDe,{onInsertPattern:i}),c.jsx(qs,{ref:n,value:t.value,onChange:a=>t.onChange(a.target.value),onBlur:t.onBlur,name:t.name,placeholder:e,rows:r,className:"resize-y min-h-[120px] font-mono text-sm"}),c.jsxs("div",{className:"mt-3",children:[c.jsxs("div",{className:"text-xs font-medium text-gray-600 mb-2 flex items-center",children:[c.jsx(dH,{className:"h-3 w-3 mr-1"}),"Anteprima formattata:"]}),c.jsx("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 min-h-[80px] max-h-48 overflow-y-auto",children:c.jsx(EDe,{text:t.value||""})})]})]})},jDe=({isOpen:t,onClose:e,onSave:r,editNote:n})=>{const{user:i}=Bt(),{toast:a}=Nr(),[o,s]=x.useState(!1),[l,u]=x.useState(""),[d,f]=x.useState([]),h=[{name:"Predefinito",value:"#F3F4F6",textColor:"#111827"},{name:"Giallo",value:"#FEF3C7",textColor:"#92400E"},{name:"Verde",value:"#D1FAE5",textColor:"#065F46"},{name:"Azzurro",value:"#DBEAFE",textColor:"#1E40AF"},{name:"Viola",value:"#E9D5FF",textColor:"#7C2D12"},{name:"Rosa",value:"#FCE7F3",textColor:"#BE185D"},{name:"Arancione",value:"#FED7AA",textColor:"#C2410C"},{name:"Rosso",value:"#FECACA",textColor:"#DC2626"}],p=wl({defaultValues:{title:"",content:"",isPublic:!1,createdBy:(i==null?void 0:i.username)||"",tags:[],isPinned:!1,color:"#F3F4F6"}});x.useEffect(()=>{t&&(n?(p.reset({title:n.title,content:n.content,isPublic:n.isPublic,createdBy:n.createdBy,tags:n.tags,isPinned:n.isPinned,color:n.color}),f(n.tags)):(p.reset({title:"",content:"",isPublic:!1,createdBy:(i==null?void 0:i.username)||"",tags:[],isPinned:!1,color:"#F3F4F6"}),f([])),u(""))},[n,p,i,t]);const m=()=>{e(),setTimeout(()=>{p.reset(),f([]),u("")},150)},g=S=>G(Gt,null,function*(){if(!S.title.trim()){a({title:"Errore",description:"Il titolo  obbligatorio",variant:"destructive"});return}if(!S.content.trim()){a({title:"Errore",description:"Il contenuto  obbligatorio",variant:"destructive"});return}s(!0);try{const A=M(C({},S),{title:S.title.trim(),content:S.content.trim()});try{A.tags=d==null?void 0:d.filter(E=>E.trim()!=="")}catch(E){}let _;if(n){_=n;try{_.update(A.title,A.content),_.isPublic=A.isPublic,_.color=A.color,_.isPinned=A.isPinned,_.tags=[],A.tags.forEach(E=>_.addTag(E.trim()))}catch(E){if(E instanceof xt){a({title:"Errore di Validazione",description:E.errors.join(", "),variant:"destructive"});return}throw E}}else try{_=kh.createNote({id:"note_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),title:A.title,content:A.content,isPublic:A.isPublic,createdBy:A.createdBy,tags:A.tags,isPinned:A.isPinned,color:A.color})}catch(E){if(E instanceof xt){a({title:"Errore di Validazione",description:E.errors.join(", "),variant:"destructive"});return}throw E}yield r(_),a({title:n?"Nota aggiornata":"Nota creata",description:n?"La nota  stata aggiornata con successo!":"La nota  stata creata con successo!"}),m()}catch(A){console.error("Errore nel salvare la nota:",A),a({title:"Errore",description:n?"Impossibile aggiornare la nota":"Impossibile creare la nota",variant:"destructive"})}finally{s(!1)}}),v=()=>{const S=l.trim();S&&!d.includes(S)&&d.length<10&&(f([...d,S]),u(""))},y=S=>{f(d==null?void 0:d.filter(A=>A!==S))},b=S=>{S.key==="Enter"?(S.preventDefault(),v()):S.key==="Backspace"&&l===""&&d.length>0&&y(d[d.length-1])},w=()=>{const S=h.find(A=>A.value===p.watch("color"));return(S==null?void 0:S.name)||"Predefinito"};return c.jsx(Yt,{open:t,onOpenChange:m,children:c.jsxs(Ht,{className:"sm:max-w-4xl max-h-[95vh] overflow-y-auto",children:[c.jsx(Zt,{children:c.jsx(Qt,{className:"text-2xl font-bold text-delft-blue flex items-center",children:n?c.jsxs(c.Fragment,{children:[c.jsx(Th,{className:"mr-3 h-6 w-6 text-burnt-newStyle"}),"Modifica Nota"]}):c.jsxs(c.Fragment,{children:[c.jsx(ar,{className:"mr-3 h-6 w-6 text-burnt-newStyle"}),"Crea Nuova Nota"]})})}),c.jsx(Al,M(C({},p),{children:c.jsxs("div",{className:"space-y-6",children:[c.jsx(ot,{control:p.control,name:"title",render:({field:S})=>{var A;return c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Titolo della Nota *"}),c.jsx(gt,{children:c.jsx(At,M(C({},S),{placeholder:"Inserisci un titolo significativo...",maxLength:100,className:"text-lg"}))}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((A=S.value)==null?void 0:A.length)||0,"/100 caratteri"]}),c.jsx(Ft,{})]})}}),c.jsx(ot,{control:p.control,name:"content",render:({field:S})=>{var A;return c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue",children:["Contenuto *",c.jsx("span",{className:"ml-2 text-xs font-normal text-gray-500",children:"(Supporta formattazione: **grassetto**, - checkbox, . elenco)"})]}),c.jsx(gt,{children:c.jsx(NDe,{field:S,placeholder:"Scrivi qui il contenuto della tua nota...\r\n\r\nEsempi di formattazione:\r\n- Elemento checkbox (spunta per completare)\r\n. Elemento elenco puntato\r\n**Testo in grassetto**\r\n\r\nUsa la toolbar sopra per inserire automaticamente i pattern!",rows:6})}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((A=S.value)==null?void 0:A.length)||0," caratteri"]}),c.jsx(Ft,{})]})}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(Va,{className:"mr-2 h-4 w-4"}),"Tag ",d.length>0&&c.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",d.length,"/10)"]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(At,{placeholder:"Aggiungi un tag e premi Invio...",value:l,onChange:S=>u(S.target.value),onKeyDown:b,className:"flex-1",maxLength:20,disabled:d.length>=10}),c.jsx(Q,{type:"button",variant:"outline",onClick:v,disabled:!l.trim()||d.length>=10,children:c.jsx(ar,{className:"h-4 w-4"})})]}),d.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((S,A)=>c.jsxs(ne,{variant:"secondary",className:"cursor-pointer hover:bg-red-50 transition-colors",children:["#",S,c.jsx("button",{type:"button",onClick:()=>y(S),className:"ml-2 text-gray-500 hover:text-red-500 transition-colors",children:c.jsx(oo,{className:"h-3 w-3"})})]},A))})]}),c.jsx(ot,{control:p.control,name:"color",render:({field:S})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(Yk,{className:"mr-2 h-4 w-4"}),"Colore Bordo Nota: ",c.jsx("span",{className:"ml-2 font-normal text-gray-600",children:w()})]}),c.jsx("div",{className:"grid grid-cols-4 gap-3",children:h.map(A=>c.jsx("button",{type:"button",onClick:()=>S.onChange(A.value),className:"p-4 rounded-xl border-4 text-sm font-medium transition-all hover:scale-105 bg-white ".concat(S.value===A.value?"ring-2 ring-burnt-newStyle shadow-md":"hover:shadow-sm"),style:{borderColor:A.value,color:A.textColor},children:A.name},A.value))})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(ot,{control:p.control,name:"isPinned",render:({field:S})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:[c.jsx(Th,{className:"mr-2 h-4 w-4"}),"Fissa in Alto"]}),c.jsx("p",{className:"text-xs text-gray-600",children:"Appare sempre in cima"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:S.value,onCheckedChange:S.onChange})})]})}),c.jsx(ot,{control:p.control,name:"isPublic",render:({field:S})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:S.value?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"mr-2 h-4 w-4 text-green-600"}),"Pubblica"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ir,{className:"mr-2 h-4 w-4 text-orange-600"}),"Privata"]})}),c.jsx("p",{className:"text-xs text-gray-600",children:S.value?"Visibile a tutti":"Solo per te"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:S.value,onCheckedChange:S.onChange})})]})})]}),c.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[c.jsx(Q,{type:"button",variant:"outline",className:"flex-1",onClick:m,disabled:o,children:"Annulla"}),c.jsxs(Q,{onClick:p.handleSubmit(g),disabled:o,className:"flex-1 bg-burnt-newStyle hover:bg-burnt-newStyle/90 text-white font-semibold",children:[o&&c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Aggiorna Nota":"Crea Nota"]})]})]})}))]})})},TDe=({text:t,onContentUpdate:e})=>{const r=a=>{if(!e)return;const o=t.split("\n"),l=o[a].match(/^- (.+)$/);if(!l)return;const u=l[1];let d="";u.endsWith("")?d="- ".concat(u.slice(0,-1)):d="- ".concat(u,"");const f=[...o];f[a]=d;const h=f.join("\n");e(h)},n=a=>{if(!a)return null;const o=[];let s=0;const l=/\*\*([^*]+)\*\*/g;let u;for(;(u=l.exec(a))!==null;)u.index>s&&o.push(a.substring(s,u.index)),o.push(c.jsx("strong",{className:"font-bold",children:u[1]},"bold-".concat(u.index))),s=u.index+u[0].length;return s<a.length&&o.push(a.substring(s)),o.length>0?o:a},i=a=>a?a.split("\n").map((s,l)=>{const u=s.match(/^- (.+)$/);if(u){const f=u[1],h=f.endsWith(""),p=h?f.slice(0,-1):f;return c.jsxs("div",{className:"flex items-center gap-3 my-2",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:()=>r(l),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 focus:ring-2 flex-shrink-0",disabled:!e}),c.jsx("span",{className:"".concat(h?"line-through text-gray-500":""," leading-relaxed"),children:n(p)})]},l)}const d=s.match(/^\. (.+)$/);return d?c.jsxs("div",{className:"flex items-start gap-3 my-2",children:[c.jsx("span",{className:"text-blue-600 font-bold mt-0.5 select-none flex-shrink-0",children:""}),c.jsx("span",{className:"leading-relaxed",children:n(d[1])})]},l):c.jsx("div",{className:"my-2 leading-relaxed",children:n(s)||""},l)}):[];return c.jsx("div",{className:"text-base leading-relaxed",children:i(t)})};function PDe({note:t,isOpen:e,onClose:r,onEdit:n,onUpdateContent:i}){const{user:a}=Bt(),{toast:o}=Nr();if(!t)return null;const s=(a==null?void 0:a.username)===t.createdBy||(a==null?void 0:a.role)==="admin"||t.isPublic,l=p=>G(this,null,function*(){if(!i){o({title:"Impossibile aggiornare",description:"Funzionalit di aggiornamento non disponibile",variant:"destructive"});return}try{yield i(t,p)}catch(m){console.error("Errore nell'aggiornamento del contenuto:",m),o({title:"Errore",description:"Impossibile salvare le modifiche",variant:"destructive"})}}),u=(p,m)=>{if(!p||!(p instanceof Date)||isNaN(p.getTime()))return"Data non disponibile";try{if(m==="dd/MM/yyyy HH:mm"){const S=p.getDate().toString().padStart(2,"0"),A=(p.getMonth()+1).toString().padStart(2,"0"),_=p.getFullYear(),E=p.getHours().toString().padStart(2,"0"),N=p.getMinutes().toString().padStart(2,"0");return"".concat(S,"/").concat(A,"/").concat(_," ").concat(E,":").concat(N)}const v=new Date().getTime()-p.getTime(),y=Math.floor(v/(1e3*60*60*24)),b=Math.floor(v/(1e3*60*60)),w=Math.floor(v/(1e3*60));return w<1?"appena ora":w<60?"".concat(w," minuti fa"):b<24?"".concat(b," ore fa"):y<7?"".concat(y," giorni fa"):y<30?"".concat(Math.floor(y/7)," settimane fa"):y<365?"".concat(Math.floor(y/30)," mesi fa"):"".concat(Math.floor(y/365)," anni fa")}catch(g){return console.warn("Error formatting date:",g),"Data non valida"}},d=()=>{r()},f=()=>{navigator.clipboard.writeText(t.content),o({title:"Contenuto copiato",description:"Il contenuto della nota  stato copiato negli appunti"})},h=()=>{navigator.share?navigator.share({title:t.title,text:t.content}):f()};return c.jsx(Yt,{open:e,onOpenChange:r,children:c.jsxs(Ht,{className:"max-w-3xl max-h-[95vh] overflow-y-auto",children:[c.jsx(Zt,{className:"pb-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Qt,{className:"text-2xl font-semibold text-delft-blue pr-4",children:t.title})}),s&&n&&c.jsxs(Q,{variant:"outline",onClick:()=>n(t),className:"ml-4 flex-shrink-0",children:[c.jsx(zo,{className:"h-4 w-4 mr-1"}),"Modifica"]})]})}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(ne,{variant:t.isPublic?"default":"secondary",className:"text-sm",children:t.isPublic?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"h-3 w-3 mr-1"}),"Pubblica"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ir,{className:"h-3 w-3 mr-1"}),"Privata"]})}),t.isPinned&&c.jsxs(ne,{className:"bg-orange-100 text-orange-700 border-orange-200 text-sm",children:[c.jsx(Th,{className:"h-3 w-3 mr-1"}),"Fissata"]})]}),c.jsx(Ie,{className:"border-4 min-h-[200px] bg-white",style:{borderColor:t.color||"#F3F4F6"},children:c.jsx(Ve,{className:"pt-6",children:c.jsx("div",{className:"prose prose-lg max-w-none",children:c.jsx(TDe,{text:t.content,onContentUpdate:s?l:void 0})})})}),t.tags&&t.tags.length>0&&c.jsxs(Ie,{children:[c.jsx($r,{className:"pb-3",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Va,{className:"h-4 w-4 mr-2 text-gray-600"}),c.jsx("h3",{className:"font-medium text-gray-900",children:"Tags"})]})}),c.jsx(Ve,{className:"pt-0",children:c.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((p,m)=>c.jsxs(ne,{variant:"outline",className:"text-sm px-3 py-1 bg-gray-50 hover:bg-gray-100 transition-colors",children:["#",p]},m))})})]}),c.jsxs(Ie,{children:[c.jsx($r,{className:"pb-3",children:c.jsx("h3",{className:"font-medium text-gray-900",children:"Azioni"})}),c.jsx(Ve,{className:"pt-0",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Q,{variant:"outline",onClick:f,className:"flex-1",children:[c.jsx(ch,{className:"h-4 w-4 mr-2"}),"Copia contenuto"]}),c.jsx(Q,{variant:"outline",onClick:h,children:c.jsx(Zk,{className:"h-4 w-4"})})]})})]}),c.jsxs(Ie,{children:[c.jsx($r,{className:"pb-3",children:c.jsx("h3",{className:"font-medium text-gray-900",children:"Informazioni"})}),c.jsxs(Ve,{className:"pt-0 space-y-3",children:[c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx(ji,{className:"h-4 w-4 mr-2"}),c.jsxs("span",{children:["Creata da ",c.jsx("strong",{children:t.createdBy})]})]}),c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx(Ca,{className:"h-4 w-4 mr-2"}),c.jsxs("span",{children:["Creata ",u(t.createdAt),t.createdAt&&c.jsxs("span",{className:"ml-2 text-gray-400",children:["(",u(t.createdAt,"dd/MM/yyyy HH:mm"),")"]})]})]}),t.updatedAt&&t.updatedAt!==t.createdAt&&c.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[c.jsx(Xr,{className:"h-4 w-4 mr-2"}),c.jsxs("span",{children:["Aggiornata ",u(t.updatedAt),t.updatedAt&&c.jsxs("span",{className:"ml-2 text-gray-400",children:["(",u(t.updatedAt,"dd/MM/yyyy HH:mm"),")"]})]})]}),c.jsx(Ip,{className:"my-2"}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[c.jsxs("span",{children:["Caratteri: ",t.content.length]}),c.jsxs("span",{children:["Parole: ",t.content.trim()?t.content.trim().split(/\s+/).length:0]}),c.jsxs("span",{children:["Righe: ",t.content.split("\n").length]})]}),c.jsx("div",{className:"flex gap-3 pt-4 border-t",children:c.jsx(Q,{variant:"secondary",className:"flex-1",onClick:d,children:"Chiudi"})})]})]})]})]})})}function iD(t){return Cl({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"},child:[]}]})(t)}function aD(t){return Cl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l224 0 0-112c0-26.5 21.5-48 48-48l112 0 0-224c0-35.3-28.7-64-64-64L64 32zM448 352l-45.3 0L336 352c-8.8 0-16 7.2-16 16l0 66.7 0 45.3 32-32 64-64 32-32z"},child:[]}]})(t)}function ODe(){const{user:t}=Bt(),e=Li(),[r,n]=x.useState(!e),[i,a]=x.useState(!1),[o,s]=x.useState(!1),[l,u]=x.useState(null),[d,f]=x.useState(""),[h,p]=x.useState("all"),[m,g]=x.useState("newest"),[v,y]=x.useState(null),[b,w]=x.useState(!1);$.useEffect(()=>{n(!e)},[e]);const{data:S,loading:A,add:_,update:E,remove:N}=Jt("notes"),{showLoading:T}=dm(A,S),{filteredNotes:O,stats:j}=x.useMemo(()=>{const V=S.filter(H=>H.isPublic||H.createdBy===(t==null?void 0:t.username)||(t==null?void 0:t.role)==="admin"),W={total:V.length,publicNotes:V.filter(H=>H.isPublic).length,privateNotes:V.filter(H=>!H.isPublic).length,myNotes:V.filter(H=>H.createdBy===(t==null?void 0:t.username)).length};let q=V.filter(H=>{var se,Ee,Ue;const J=!d||((se=H.title)==null?void 0:se.toLowerCase().includes(d.toLowerCase()))||((Ee=H.content)==null?void 0:Ee.toLowerCase().includes(d.toLowerCase()))||((Ue=H.tags)==null?void 0:Ue.some(ge=>ge.toLowerCase().includes(d.toLowerCase()))),de=h==="all"||h==="public"&&H.isPublic||h==="private"&&!H.isPublic||h==="mine"&&H.createdBy===(t==null?void 0:t.username);return J&&de});return q.sort((H,J)=>m==="newest"?new Date(J.createdAt).getTime()-new Date(H.createdAt).getTime():m==="oldest"?new Date(H.createdAt).getTime()-new Date(J.createdAt).getTime():m==="title"?H.title.localeCompare(J.title):m==="updated"?new Date(J.updatedAt||J.createdAt).getTime()-new Date(H.updatedAt||H.createdAt).getTime():0),{filteredNotes:q,stats:W}},[S,t,d,h,m]),P=V=>G(this,null,function*(){l?(yield E(l.id,V),u(null)):yield _(V),s(!1)}),D=V=>{u(V),s(!0)},F=V=>{y(V),w(!0)},I=()=>{w(!1),y(null)},k=V=>G(this,null,function*(){yield N(V)}),R=()=>{s(!1),u(null)},L=()=>n(!r);return c.jsx(gf,{isVisible:T,title:"Caricamento Note",subtitle:"Recupero delle note...",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:[c.jsx("div",{className:ie("mb-6",e?"space-y-4":"mb-8"),children:c.jsxs("div",{className:ie("flex items-start justify-between",e?"flex-col space-y-3":"flex-row items-center"),children:[c.jsxs("div",{className:ie("flex items-center gap-3",e?"w-full":""),children:[" ",c.jsx(aD,{className:"h-8 w-8 text-cambridge-newStyle"}),c.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"Note"}),e&&c.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[" ",c.jsx(Q,{onClick:()=>a(!0),size:"sm",variant:"outline",className:"border-cambridge-newStyle",children:c.jsx(Cs,{className:"h-4 w-4 text-cambridge-newStyle"})}),c.jsx(Q,{onClick:()=>s(!0),size:"sm",className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white p-2",children:c.jsx(ar,{className:"h-4 w-4"})})]})]}),!e&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(ne,{variant:"secondary",className:"bg-cambridge-newStyle/10 text-cambridge-newStyle border-cambridge-newStyle/20",children:[j.total," ",j.total===1?"nota":"note"]}),c.jsxs(ne,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[j.publicNotes," ",j.publicNotes===1?"pubblica":"pubbliche"]}),c.jsxs(ne,{variant:"secondary",className:"bg-orange-100 text-orange-700 border-orange-200",children:[j.privateNotes," ",j.privateNotes===1?"privata":"private"]}),j.myNotes>0&&c.jsxs(ne,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[j.myNotes," ",j.myNotes===1?"mia":"mie"]})]}),!e&&c.jsxs(Q,{onClick:()=>s(!0),className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white dark:text-black shadow-lg",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Nuova Nota"]})]})}),c.jsx(Ie,{className:ie("mb-6",e?"mb-4":""),children:c.jsxs(Ve,{className:ie("p-4",e?"p-3":""),children:[e&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:"font-medium text-sm",children:"Filtri di ricerca"})]}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:L,className:"p-1",children:r?c.jsx(Bo,{className:"h-4 w-4"}):c.jsx(Na,{className:"h-4 w-4"})})]}),c.jsx("div",{className:ie(e&&!r?"hidden":"block","space-y-4"),children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-center",children:[c.jsxs("div",{className:"w-full md:flex-1 max-w-2xl space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ricerca"}),c.jsxs("div",{className:"relative",children:[c.jsx($u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),c.jsx(At,{placeholder:"Cerca titoli, contenuto o tag...",value:d,onChange:V=>f(V.target.value),className:"pl-10"})]})]}),c.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filtro"}),c.jsxs(Nt,{value:h,onValueChange:p,children:[c.jsx(St,{className:"w-full md:w-40",children:c.jsx(jt,{placeholder:"Tutte"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutte le Note"}),c.jsx(ye,{value:"public",children:"Pubbliche"}),c.jsx(ye,{value:"private",children:"Private"}),c.jsx(ye,{value:"mine",children:"Le Mie"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ordinamento"}),c.jsxs(Nt,{value:m,onValueChange:g,children:[c.jsx(St,{className:"w-full md:w-40",children:c.jsx(jt,{placeholder:"Ordina per"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"newest",children:"Pi Recenti"}),c.jsx(ye,{value:"oldest",children:"Pi Vecchie"}),c.jsx(ye,{value:"title",children:"Titolo A-Z"}),c.jsx(ye,{value:"updated",children:"Aggiornate"})]})]})]})]})]})})]})}),c.jsx("div",{className:ie(e?"px-1":""),children:O.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.sort((V,W)=>Number(W.isPinned)-Number(V.isPinned)).map(V=>c.jsx(_De,{note:V,onEdit:D,onDelete:k,onClick:F},V.id))}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(ar,{className:"h-12 w-12 text-gray-400"})}),c.jsx("h3",{className:"text-xl font-semibold text-delft-blue mb-2",children:"Nessuna nota trovata"}),c.jsx("p",{className:"text-gray-600 mb-6",children:d||h!=="all"?"Prova ad aggiustare i filtri di ricerca.":"Crea la tua prima nota per condividere pensieri e informazioni importanti."}),c.jsxs(Q,{onClick:()=>s(!0),className:"bg-burnt-newStyle hover:bg-burnt-newStyle/90 text-white font-semibold",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Crea Prima Nota"]})]})}),c.jsx(jDe,{isOpen:o,onClose:R,onSave:P,editNote:l}),c.jsx(PDe,{note:v,isOpen:b,onUpdateContent:(V,W)=>G(this,null,function*(){V.content=W,yield E(V.id,V)}),onClose:I,onEdit:V=>{I(),D(V)}}),c.jsx(Yt,{open:i,onOpenChange:a,children:c.jsxs(Ht,{className:"sm:max-w-md p-6",children:[" ",c.jsxs(Zt,{className:"mb-4",children:[c.jsx(Qt,{className:"text-xl font-semibold text-delft-blue",children:"Statistiche Note"}),c.jsx(Oi,{className:"text-gray-600",children:"Riepilogo rapido e completo delle note."})]}),c.jsxs("div",{className:"flex flex-wrap gap-3 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:[" ",c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-cambridge-newStyle/10 text-cambridge-newStyle border-cambridge-newStyle/20",children:[c.jsx(aD,{className:"w-4 h-4 mr-2"})," ",j.total," ",j.total===1?"nota":"note"," totali"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-green-100 text-green-700 border-green-200",children:[c.jsx(Br,{className:"w-4 h-4 mr-2"})," ",j.publicNotes," ",j.publicNotes===1?"pubblica":"pubbliche"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-orange-100 text-orange-700 border-orange-200",children:[c.jsx(Ir,{className:"w-4 h-4 mr-2"})," ",j.privateNotes," ",j.privateNotes===1?"privata":"private"]}),j.myNotes>0&&c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-purple-100 text-purple-700 border-purple-200",children:[c.jsx(ji,{className:"w-4 h-4 mr-2"})," ",j.myNotes," ",j.myNotes===1?"mia":"mie"]})]}),c.jsx("div",{className:"pt-4 flex justify-end",children:c.jsx(Q,{onClick:()=>a(!1),variant:"secondary",children:"Chiudi"})})]})})]})})}var yx="Tabs",[IDe,KBe]=ai(yx,[ay]),BB=ay(),[DDe,TC]=IDe(yx),zB=x.forwardRef((t,e)=>{const p=t,{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:s,activationMode:l="automatic"}=p,u=K(p,["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"]),d=Up(s),[f,h]=io({prop:n,onChange:i,defaultProp:a!=null?a:"",caller:yx});return c.jsx(DDe,{scope:r,baseId:Qi(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:l,children:c.jsx(Ge.div,M(C({dir:d,"data-orientation":o},u),{ref:e}))})});zB.displayName=yx;var VB="TabsList",UB=x.forwardRef((t,e)=>{const s=t,{__scopeTabs:r,loop:n=!0}=s,i=K(s,["__scopeTabs","loop"]),a=TC(VB,r),o=BB(r);return c.jsx(R8,M(C({asChild:!0},o),{orientation:a.orientation,dir:a.dir,loop:n,children:c.jsx(Ge.div,M(C({role:"tablist","aria-orientation":a.orientation},i),{ref:e}))}))});UB.displayName=VB;var WB="TabsTrigger",HB=x.forwardRef((t,e)=>{const f=t,{__scopeTabs:r,value:n,disabled:i=!1}=f,a=K(f,["__scopeTabs","value","disabled"]),o=TC(WB,r),s=BB(r),l=KB(o.baseId,n),u=XB(o.baseId,n),d=n===o.value;return c.jsx($8,M(C({asChild:!0},s),{focusable:!i,active:d,children:c.jsx(Ge.button,M(C({type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},a),{ref:e,onMouseDown:Ae(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:Ae(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:Ae(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!i&&h&&o.onValueChange(n)})}))}))});HB.displayName=WB;var GB="TabsContent",qB=x.forwardRef((t,e)=>{const h=t,{__scopeTabs:r,value:n,forceMount:i,children:a}=h,o=K(h,["__scopeTabs","value","forceMount","children"]),s=TC(GB,r),l=KB(s.baseId,n),u=XB(s.baseId,n),d=n===s.value,f=x.useRef(d);return x.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),c.jsx(Dn,{present:i||d,children:({present:p})=>c.jsx(Ge.div,M(C({"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0},o),{ref:e,style:M(C({},t.style),{animationDuration:f.current?"0s":void 0}),children:p&&a}))})});qB.displayName=GB;function KB(t,e){return"".concat(t,"-trigger-").concat(e)}function XB(t,e){return"".concat(t,"-content-").concat(e)}var kDe=zB,YB=UB,ZB=HB,QB=qB;const Z2=kDe,PC=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(YB,C({ref:r,className:ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},e))});PC.displayName=YB.displayName;const Av=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(ZB,C({ref:r,className:ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},e))});Av.displayName=ZB.displayName;const Mc=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(QB,C({ref:r,className:ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},e))});Mc.displayName=QB.displayName;var Je=function(){return Je=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Je.apply(this,arguments)};function MDe(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function JB(t,e,r){for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}function fm(t){return t.mode==="multiple"}function hm(t){return t.mode==="range"}function xx(t){return t.mode==="single"}var RDe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function $De(t,e){return ur(t,"LLLL y",e)}function LDe(t,e){return ur(t,"d",e)}function FDe(t,e){return ur(t,"LLLL",e)}function BDe(t){return"".concat(t)}function zDe(t,e){return ur(t,"cccccc",e)}function VDe(t,e){return ur(t,"yyyy",e)}var UDe=Object.freeze({__proto__:null,formatCaption:$De,formatDay:LDe,formatMonthCaption:FDe,formatWeekNumber:BDe,formatWeekdayName:zDe,formatYearCaption:VDe}),WDe=function(t,e,r){return ur(t,"do MMMM (EEEE)",r)},HDe=function(){return"Month: "},GDe=function(){return"Go to next month"},qDe=function(){return"Go to previous month"},KDe=function(t,e){return ur(t,"cccc",e)},XDe=function(t){return"Week n. ".concat(t)},YDe=function(){return"Year: "},ZDe=Object.freeze({__proto__:null,labelDay:WDe,labelMonthDropdown:HDe,labelNext:GDe,labelPrevious:qDe,labelWeekNumber:XDe,labelWeekday:KDe,labelYearDropdown:YDe});function QDe(){var t="buttons",e=RDe,r=$S,n={},i={},a=1,o={},s=new Date;return{captionLayout:t,classNames:e,formatters:UDe,labels:ZDe,locale:r,modifiersClassNames:n,modifiers:i,numberOfMonths:a,styles:o,today:s,mode:"default"}}function JDe(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,i=t.toMonth,a=t.fromDate,o=t.toDate;return n?a=ni(n):e&&(a=new Date(e,0,1)),i?o=Jp(i):r&&(o=new Date(r,11,31)),{fromDate:a?Yu(a):void 0,toDate:o?Yu(o):void 0}}var ez=x.createContext(void 0);function e4e(t){var e,r=t.initialProps,n=QDe(),i=JDe(r),a=i.fromDate,o=i.toDate,s=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;s!=="buttons"&&(!a||!o)&&(s="buttons");var l;(xx(r)||fm(r)||hm(r))&&(l=r.onSelect);var u=Je(Je(Je({},n),r),{captionLayout:s,classNames:Je(Je({},n.classNames),r.classNames),components:Je({},r.components),formatters:Je(Je({},n.formatters),r.formatters),fromDate:a,labels:Je(Je({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Je(Je({},n.modifiers),r.modifiers),modifiersClassNames:Je(Je({},n.modifiersClassNames),r.modifiersClassNames),onSelect:l,styles:Je(Je({},n.styles),r.styles),toDate:o});return c.jsx(ez.Provider,{value:u,children:t.children})}function pr(){var t=x.useContext(ez);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function tz(t){var e=pr(),r=e.locale,n=e.classNames,i=e.styles,a=e.formatters.formatCaption;return c.jsx("div",{className:n.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:r})})}function t4e(t){return c.jsx("svg",Je({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:c.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function rz(t){var e,r,n=t.onChange,i=t.value,a=t.children,o=t.caption,s=t.className,l=t.style,u=pr(),d=(r=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:t4e;return c.jsxs("div",{className:s,style:l,children:[c.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),c.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:n,children:a}),c.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,c.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function r4e(t){var e,r=pr(),n=r.fromDate,i=r.toDate,a=r.styles,o=r.locale,s=r.formatters.formatMonthCaption,l=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return c.jsx(c.Fragment,{});if(!i)return c.jsx(c.Fragment,{});var f=[];if(vre(n,i))for(var h=ni(n),p=n.getMonth();p<=i.getMonth();p++)f.push(d1(h,p));else for(var h=ni(new Date),p=0;p<=11;p++)f.push(d1(h,p));var m=function(v){var y=Number(v.target.value),b=d1(ni(t.displayMonth),y);t.onChange(b)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:rz;return c.jsx(g,{name:"months","aria-label":d(),className:l.dropdown_month,style:a.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:s(t.displayMonth,{locale:o}),children:f.map(function(v){return c.jsx("option",{value:v.getMonth(),children:s(v,{locale:o})},v.getMonth())})})}function n4e(t){var e,r=t.displayMonth,n=pr(),i=n.fromDate,a=n.toDate,o=n.locale,s=n.styles,l=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!i)return c.jsx(c.Fragment,{});if(!a)return c.jsx(c.Fragment,{});for(var p=i.getFullYear(),m=a.getFullYear(),g=p;g<=m;g++)h.push(Dj(P5(new Date),g));var v=function(b){var w=Dj(ni(r),Number(b.target.value));t.onChange(w)},y=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:rz;return c.jsx(y,{name:"years","aria-label":f(),className:l.dropdown_year,style:s.dropdown_year,onChange:v,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(b){return c.jsx("option",{value:b.getFullYear(),children:d(b,{locale:o})},b.getFullYear())})})}function i4e(t,e){var r=x.useState(t),n=r[0],i=r[1],a=e===void 0?n:e;return[a,i]}function a4e(t){var e=t.month,r=t.defaultMonth,n=t.today,i=e||r||n||new Date,a=t.toDate,o=t.fromDate,s=t.numberOfMonths,l=s===void 0?1:s;if(a&&Qu(a,i)<0){var u=-1*(l-1);i=Mi(a,u)}return o&&Qu(i,o)<0&&(i=o),ni(i)}function o4e(){var t=pr(),e=a4e(t),r=i4e(e,t.month),n=r[0],i=r[1],a=function(o){var s;if(!t.disableNavigation){var l=ni(o);i(l),(s=t.onMonthChange)===null||s===void 0||s.call(t,l)}};return[n,a]}function s4e(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,i=ni(t),a=ni(Mi(i,n)),o=Qu(a,i),s=[],l=0;l<o;l++){var u=Mi(i,l);s.push(u)}return r&&(s=s.reverse()),s}function c4e(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=n?a:1,s=ni(t);if(!r)return Mi(s,o);var l=Qu(r,t);if(!(l<a))return Mi(s,o)}}function l4e(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,o=n?a:1,s=ni(t);if(!r)return Mi(s,-o);var l=Qu(s,r);if(!(l<=0))return Mi(s,-o)}}var nz=x.createContext(void 0);function u4e(t){var e=pr(),r=o4e(),n=r[0],i=r[1],a=s4e(n,e),o=c4e(n,e),s=l4e(n,e),l=function(f){return a.some(function(h){return yy(f,h)})},u=function(f,h){l(f)||(h&&LS(f,h)?i(Mi(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:n,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:s,nextMonth:o,isDateDisplayed:l};return c.jsx(nz.Provider,{value:d,children:t.children})}function pm(){var t=x.useContext(nz);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function oD(t){var e,r=pr(),n=r.classNames,i=r.styles,a=r.components,o=pm().goToMonth,s=function(d){o(Mi(d,t.displayIndex?-t.displayIndex:0))},l=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:tz,u=c.jsx(l,{id:t.id,displayMonth:t.displayMonth});return c.jsxs("div",{className:n.caption_dropdowns,style:i.caption_dropdowns,children:[c.jsx("div",{className:n.vhidden,children:u}),c.jsx(r4e,{onChange:s,displayMonth:t.displayMonth}),c.jsx(n4e,{onChange:s,displayMonth:t.displayMonth})]})}function d4e(t){return c.jsx("svg",Je({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:c.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function f4e(t){return c.jsx("svg",Je({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:c.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Sv=x.forwardRef(function(t,e){var r=pr(),n=r.classNames,i=r.styles,a=[n.button_reset,n.button];t.className&&a.push(t.className);var o=a.join(" "),s=Je(Je({},i.button_reset),i.button);return t.style&&Object.assign(s,t.style),c.jsx("button",Je({},t,{ref:e,type:"button",className:o,style:s}))});function h4e(t){var e,r,n=pr(),i=n.dir,a=n.locale,o=n.classNames,s=n.styles,l=n.labels,u=l.labelPrevious,d=l.labelNext,f=n.components;if(!t.nextMonth&&!t.previousMonth)return c.jsx(c.Fragment,{});var h=u(t.previousMonth,{locale:a}),p=[o.nav_button,o.nav_button_previous].join(" "),m=d(t.nextMonth,{locale:a}),g=[o.nav_button,o.nav_button_next].join(" "),v=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:f4e,y=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:d4e;return c.jsxs("div",{className:o.nav,style:s.nav,children:[!t.hidePrevious&&c.jsx(Sv,{name:"previous-month","aria-label":h,className:p,style:s.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?c.jsx(v,{className:o.nav_icon,style:s.nav_icon}):c.jsx(y,{className:o.nav_icon,style:s.nav_icon})}),!t.hideNext&&c.jsx(Sv,{name:"next-month","aria-label":m,className:g,style:s.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?c.jsx(y,{className:o.nav_icon,style:s.nav_icon}):c.jsx(v,{className:o.nav_icon,style:s.nav_icon})})]})}function sD(t){var e=pr().numberOfMonths,r=pm(),n=r.previousMonth,i=r.nextMonth,a=r.goToMonth,o=r.displayMonths,s=o.findIndex(function(m){return yy(t.displayMonth,m)}),l=s===0,u=s===o.length-1,d=e>1&&(l||!u),f=e>1&&(u||!l),h=function(){n&&a(n)},p=function(){i&&a(i)};return c.jsx(h4e,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:n,onPreviousClick:h,onNextClick:p})}function p4e(t){var e,r=pr(),n=r.classNames,i=r.disableNavigation,a=r.styles,o=r.captionLayout,s=r.components,l=(e=s==null?void 0:s.CaptionLabel)!==null&&e!==void 0?e:tz,u;return i?u=c.jsx(l,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=c.jsx(oD,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=c.jsxs(c.Fragment,{children:[c.jsx(oD,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),c.jsx(sD,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=c.jsxs(c.Fragment,{children:[c.jsx(l,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),c.jsx(sD,{displayMonth:t.displayMonth,id:t.id})]}),c.jsx("div",{className:n.caption,style:a.caption,children:u})}function m4e(t){var e=pr(),r=e.footer,n=e.styles,i=e.classNames.tfoot;return r?c.jsx("tfoot",{className:i,style:n.tfoot,children:c.jsx("tr",{children:c.jsx("td",{colSpan:8,children:r})})}):c.jsx(c.Fragment,{})}function g4e(t,e,r){for(var n=r?dl(new Date):Ri(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var o=jn(n,a);i.push(o)}return i}function v4e(){var t=pr(),e=t.classNames,r=t.styles,n=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,o=t.ISOWeek,s=t.formatters.formatWeekdayName,l=t.labels.labelWeekday,u=g4e(i,a,o);return c.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&c.jsx("td",{style:r.head_cell,className:e.head_cell}),u.map(function(d,f){return c.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":l(d,{locale:i}),children:s(d,{locale:i})},f)})]})}function y4e(){var t,e=pr(),r=e.classNames,n=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:v4e;return c.jsx("thead",{style:n.head,className:r.head,children:c.jsx(a,{})})}function x4e(t){var e=pr(),r=e.locale,n=e.formatters.formatDay;return c.jsx(c.Fragment,{children:n(t.date,{locale:r})})}var OC=x.createContext(void 0);function b4e(t){if(!fm(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return c.jsx(OC.Provider,{value:e,children:t.children})}return c.jsx(w4e,{initialProps:t.initialProps,children:t.children})}function w4e(t){var e=t.initialProps,r=t.children,n=e.selected,i=e.min,a=e.max,o=function(u,d,f){var h,p;(h=e.onDayClick)===null||h===void 0||h.call(e,u,d,f);var m=!!(d.selected&&i&&(n==null?void 0:n.length)===i);if(!m){var g=!!(!d.selected&&a&&(n==null?void 0:n.length)===a);if(!g){var v=n?JB([],n):[];if(d.selected){var y=v.findIndex(function(b){return cn(u,b)});v.splice(y,1)}else v.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,v,u,d,f)}}},s={disabled:[]};n&&s.disabled.push(function(u){var d=a&&n.length>a-1,f=n.some(function(h){return cn(h,u)});return!!(d&&!f)});var l={selected:n,onDayClick:o,modifiers:s};return c.jsx(OC.Provider,{value:l,children:r})}function IC(){var t=x.useContext(OC);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function A4e(t,e){var r=e||{},n=r.from,i=r.to;return n&&i?cn(i,t)&&cn(n,t)?void 0:cn(i,t)?{from:i,to:void 0}:cn(n,t)?void 0:ug(n,t)?{from:t,to:i}:{from:n,to:t}:i?ug(t,i)?{from:i,to:t}:{from:t,to:i}:n?LS(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var DC=x.createContext(void 0);function S4e(t){if(!hm(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return c.jsx(DC.Provider,{value:e,children:t.children})}return c.jsx(_4e,{initialProps:t.initialProps,children:t.children})}function _4e(t){var e=t.initialProps,r=t.children,n=e.selected,i=n||{},a=i.from,o=i.to,s=e.min,l=e.max,u=function(p,m,g){var v,y;(v=e.onDayClick)===null||v===void 0||v.call(e,p,m,g);var b=A4e(p,n);(y=e.onSelect)===null||y===void 0||y.call(e,b,p,m,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],o?(d.range_end=[o],cn(a,o)||(d.range_middle=[{after:a,before:o}])):d.range_end=[a]):o&&(d.range_start=[o],d.range_end=[o]),s&&(a&&!o&&d.disabled.push({after:u1(a,s-1),before:jn(a,s-1)}),a&&o&&d.disabled.push({after:a,before:jn(a,s-1)}),!a&&o&&d.disabled.push({after:u1(o,s-1),before:jn(o,s-1)})),l){if(a&&!o&&(d.disabled.push({before:jn(a,-l+1)}),d.disabled.push({after:jn(a,l-1)})),a&&o){var f=Ha(o,a)+1,h=l-f;d.disabled.push({before:u1(a,h)}),d.disabled.push({after:jn(o,h)})}!a&&o&&(d.disabled.push({before:jn(o,-l+1)}),d.disabled.push({after:jn(o,l-1)}))}return c.jsx(DC.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function kC(){var t=x.useContext(DC);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function j0(t){return Array.isArray(t)?JB([],t):t!==void 0?[t]:[]}function C4e(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],i=r[1];e[n]=j0(i)}),e}var Pa;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Pa||(Pa={}));var E4e=Pa.Selected,Ao=Pa.Disabled,N4e=Pa.Hidden,j4e=Pa.Today,tb=Pa.RangeEnd,rb=Pa.RangeMiddle,nb=Pa.RangeStart,T4e=Pa.Outside;function P4e(t,e,r){var n,i=(n={},n[E4e]=j0(t.selected),n[Ao]=j0(t.disabled),n[N4e]=j0(t.hidden),n[j4e]=[t.today],n[tb]=[],n[rb]=[],n[nb]=[],n[T4e]=[],n);return t.fromDate&&i[Ao].push({before:t.fromDate}),t.toDate&&i[Ao].push({after:t.toDate}),fm(t)?i[Ao]=i[Ao].concat(e.modifiers[Ao]):hm(t)&&(i[Ao]=i[Ao].concat(r.modifiers[Ao]),i[nb]=r.modifiers[nb],i[rb]=r.modifiers[rb],i[tb]=r.modifiers[tb]),i}var iz=x.createContext(void 0);function O4e(t){var e=pr(),r=IC(),n=kC(),i=P4e(e,r,n),a=C4e(e.modifiers),o=Je(Je({},i),a);return c.jsx(iz.Provider,{value:o,children:t.children})}function az(){var t=x.useContext(iz);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function I4e(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function D4e(t){return!!(t&&typeof t=="object"&&"from"in t)}function k4e(t){return!!(t&&typeof t=="object"&&"after"in t)}function M4e(t){return!!(t&&typeof t=="object"&&"before"in t)}function R4e(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function $4e(t,e){var r,n=e.from,i=e.to;if(n&&i){var a=Ha(i,n)<0;a&&(r=[i,n],n=r[0],i=r[1]);var o=Ha(t,n)>=0&&Ha(i,t)>=0;return o}return i?cn(i,t):n?cn(n,t):!1}function L4e(t){return RS(t)}function F4e(t){return Array.isArray(t)&&t.every(RS)}function B4e(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(L4e(r))return cn(t,r);if(F4e(r))return r.includes(t);if(D4e(r))return $4e(t,r);if(R4e(r))return r.dayOfWeek.includes(t.getDay());if(I4e(r)){var n=Ha(r.before,t),i=Ha(r.after,t),a=n>0,o=i<0,s=ug(r.before,r.after);return s?o&&a:a||o}return k4e(r)?Ha(t,r.after)>0:M4e(r)?Ha(r.before,t)>0:typeof r=="function"?r(t):!1})}function MC(t,e,r){var n=Object.keys(e).reduce(function(a,o){var s=e[o];return B4e(t,s)&&a.push(o),a},[]),i={};return n.forEach(function(a){return i[a]=!0}),r&&!yy(t,r)&&(i.outside=!0),i}function z4e(t,e){for(var r=ni(t[0]),n=Jp(t[t.length-1]),i,a,o=r;o<=n;){var s=MC(o,e),l=!s.disabled&&!s.hidden;if(!l){o=jn(o,1);continue}if(s.selected)return o;s.today&&!a&&(a=o),i||(i=o),o=jn(o,1)}return a||i}var V4e=365;function oz(t,e){var r=e.moveBy,n=e.direction,i=e.context,a=e.modifiers,o=e.retry,s=o===void 0?{count:0,lastFocused:t}:o,l=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,h={day:jn,week:aw,month:Mi,year:ute,startOfWeek:function(v){return i.ISOWeek?dl(v):Ri(v,{locale:f,weekStartsOn:l})},endOfWeek:function(v){return i.ISOWeek?O5(v):vy(v,{locale:f,weekStartsOn:l})}},p=h[r](t,n==="after"?1:-1);n==="before"&&u?p=j5([u,p]):n==="after"&&d&&(p=T5([d,p]));var m=!0;if(a){var g=MC(p,a);m=!g.disabled&&!g.hidden}return m?p:s.count>V4e?s.lastFocused:oz(p,{moveBy:r,direction:n,context:i,modifiers:a,retry:Je(Je({},s),{count:s.count+1})})}var sz=x.createContext(void 0);function U4e(t){var e=pm(),r=az(),n=x.useState(),i=n[0],a=n[1],o=x.useState(),s=o[0],l=o[1],u=z4e(e.displayMonths,r),d=(i!=null?i:s&&e.isDateDisplayed(s))?s:u,f=function(){l(i),a(void 0)},h=function(v){a(v)},p=pr(),m=function(v,y){if(i){var b=oz(i,{moveBy:v,direction:y,context:p,modifiers:r});cn(i,b)||(e.goToDate(b,i),h(b))}},g={focusedDay:i,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return c.jsx(sz.Provider,{value:g,children:t.children})}function RC(){var t=x.useContext(sz);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function W4e(t,e){var r=az(),n=MC(t,r,e);return n}var $C=x.createContext(void 0);function H4e(t){if(!xx(t.initialProps)){var e={selected:void 0};return c.jsx($C.Provider,{value:e,children:t.children})}return c.jsx(G4e,{initialProps:t.initialProps,children:t.children})}function G4e(t){var e=t.initialProps,r=t.children,n=function(a,o,s){var l,u,d;if((l=e.onDayClick)===null||l===void 0||l.call(e,a,o,s),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,o,s);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,o,s)},i={selected:e.selected,onDayClick:n};return c.jsx($C.Provider,{value:i,children:r})}function cz(){var t=x.useContext($C);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function q4e(t,e){var r=pr(),n=cz(),i=IC(),a=kC(),o=RC(),s=o.focusDayAfter,l=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,p=o.focusMonthBefore,m=o.focusMonthAfter,g=o.focusYearBefore,v=o.focusYearAfter,y=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(R){var L,V,W,q;xx(r)?(L=n.onDayClick)===null||L===void 0||L.call(n,t,e,R):fm(r)?(V=i.onDayClick)===null||V===void 0||V.call(i,t,e,R):hm(r)?(W=a.onDayClick)===null||W===void 0||W.call(a,t,e,R):(q=r.onDayClick)===null||q===void 0||q.call(r,t,e,R)},S=function(R){var L;h(t),(L=r.onDayFocus)===null||L===void 0||L.call(r,t,e,R)},A=function(R){var L;f(),(L=r.onDayBlur)===null||L===void 0||L.call(r,t,e,R)},_=function(R){var L;(L=r.onDayMouseEnter)===null||L===void 0||L.call(r,t,e,R)},E=function(R){var L;(L=r.onDayMouseLeave)===null||L===void 0||L.call(r,t,e,R)},N=function(R){var L;(L=r.onDayPointerEnter)===null||L===void 0||L.call(r,t,e,R)},T=function(R){var L;(L=r.onDayPointerLeave)===null||L===void 0||L.call(r,t,e,R)},O=function(R){var L;(L=r.onDayTouchCancel)===null||L===void 0||L.call(r,t,e,R)},j=function(R){var L;(L=r.onDayTouchEnd)===null||L===void 0||L.call(r,t,e,R)},P=function(R){var L;(L=r.onDayTouchMove)===null||L===void 0||L.call(r,t,e,R)},D=function(R){var L;(L=r.onDayTouchStart)===null||L===void 0||L.call(r,t,e,R)},F=function(R){var L;(L=r.onDayKeyUp)===null||L===void 0||L.call(r,t,e,R)},I=function(R){var L;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?s():l();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),r.dir==="rtl"?l():s();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),u();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),d();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?g():p();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?v():m();break;case"Home":R.preventDefault(),R.stopPropagation(),y();break;case"End":R.preventDefault(),R.stopPropagation(),b();break}(L=r.onDayKeyDown)===null||L===void 0||L.call(r,t,e,R)},k={onClick:w,onFocus:S,onBlur:A,onKeyDown:I,onKeyUp:F,onMouseEnter:_,onMouseLeave:E,onPointerEnter:N,onPointerLeave:T,onTouchCancel:O,onTouchEnd:j,onTouchMove:P,onTouchStart:D};return k}function K4e(){var t=pr(),e=cz(),r=IC(),n=kC(),i=xx(t)?e.selected:fm(t)?r.selected:hm(t)?n.selected:void 0;return i}function X4e(t){return Object.values(Pa).includes(t)}function Y4e(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var i=t.modifiersClassNames[n];if(i)r.push(i);else if(X4e(n)){var a=t.classNames["day_".concat(n)];a&&r.push(a)}}),r}function Z4e(t,e){var r=Je({},t.styles.day);return Object.keys(e).forEach(function(n){var i;r=Je(Je({},r),(i=t.modifiersStyles)===null||i===void 0?void 0:i[n])}),r}function Q4e(t,e,r){var n,i,a,o=pr(),s=RC(),l=W4e(t,e),u=q4e(t,l),d=K4e(),f=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var _;l.outside||s.focusedDay&&f&&cn(s.focusedDay,t)&&((_=r.current)===null||_===void 0||_.focus())},[s.focusedDay,t,r,f,l.outside]);var h=Y4e(o,l).join(" "),p=Z4e(o,l),m=!!(l.outside&&!o.showOutsideDays||l.hidden),g=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:x4e,v=c.jsx(g,{date:t,displayMonth:e,activeModifiers:l}),y={style:p,className:h,children:v,role:"gridcell"},b=s.focusTarget&&cn(s.focusTarget,t)&&!l.outside,w=s.focusedDay&&cn(s.focusedDay,t),S=Je(Je(Je({},y),(n={disabled:l.disabled,role:"gridcell"},n["aria-selected"]=l.selected,n.tabIndex=w||b?0:-1,n)),u),A={isButton:f,isHidden:m,activeModifiers:l,selectedDays:d,buttonProps:S,divProps:y};return A}function J4e(t){var e=x.useRef(null),r=Q4e(t.date,t.displayMonth,e);return r.isHidden?c.jsx("div",{role:"gridcell"}):r.isButton?c.jsx(Sv,Je({name:"day",ref:e},r.buttonProps)):c.jsx("div",Je({},r.divProps))}function eke(t){var e=t.number,r=t.dates,n=pr(),i=n.onWeekNumberClick,a=n.styles,o=n.classNames,s=n.locale,l=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(e),{locale:s});if(!i)return c.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:d});var f=l(Number(e),{locale:s}),h=function(p){i(e,r,p)};return c.jsx(Sv,{name:"week-number","aria-label":f,className:o.weeknumber,style:a.weeknumber,onClick:h,children:d})}function tke(t){var e,r,n=pr(),i=n.styles,a=n.classNames,o=n.showWeekNumber,s=n.components,l=(e=s==null?void 0:s.Day)!==null&&e!==void 0?e:J4e,u=(r=s==null?void 0:s.WeekNumber)!==null&&r!==void 0?r:eke,d;return o&&(d=c.jsx("td",{className:a.cell,style:i.cell,children:c.jsx(u,{number:t.weekNumber,dates:t.dates})})),c.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(f){return c.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:c.jsx(l,{displayMonth:t.displayMonth,date:f})},pre(f))})]})}function cD(t,e,r){for(var n=r!=null&&r.ISOWeek?O5(e):vy(e,r),i=r!=null&&r.ISOWeek?dl(t):Ri(t,r),a=Ha(n,i),o=[],s=0;s<=a;s++)o.push(jn(i,s));var l=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?D5(d):M5(d,r),h=u.find(function(p){return p.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return l}function rke(t,e){var r=cD(ni(t),Jp(t),e);if(e!=null&&e.useFixedWeeks){var n=gre(t,e);if(n<6){var i=r[r.length-1],a=i.dates[i.dates.length-1],o=aw(a,6-n),s=cD(aw(a,1),o,e);r.push.apply(r,s)}}return r}function nke(t){var e,r,n,i=pr(),a=i.locale,o=i.classNames,s=i.styles,l=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,h=i.firstWeekContainsDate,p=i.ISOWeek,m=rke(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:a,weekStartsOn:f,firstWeekContainsDate:h}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:y4e,v=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:tke,y=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:m4e;return c.jsxs("table",{id:t.id,className:o.table,style:s.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!l&&c.jsx(g,{}),c.jsx("tbody",{className:o.tbody,style:s.tbody,children:m.map(function(b){return c.jsx(v,{displayMonth:t.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),c.jsx(y,{displayMonth:t.displayMonth})]})}function ike(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var ake=ike()?x.useLayoutEffect:x.useEffect,ib=!1,oke=0;function lD(){return"react-day-picker-".concat(++oke)}function ske(t){var e,r=t!=null?t:ib?lD():null,n=x.useState(r),i=n[0],a=n[1];return ake(function(){i===null&&a(lD())},[]),x.useEffect(function(){ib===!1&&(ib=!0)},[]),(e=t!=null?t:i)!==null&&e!==void 0?e:void 0}function cke(t){var e,r,n=pr(),i=n.dir,a=n.classNames,o=n.styles,s=n.components,l=pm().displayMonths,u=ske(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],h=o.month,p=t.displayIndex===0,m=t.displayIndex===l.length-1,g=!p&&!m;i==="rtl"&&(e=[p,m],m=e[0],p=e[1]),p&&(f.push(a.caption_start),h=Je(Je({},h),o.caption_start)),m&&(f.push(a.caption_end),h=Je(Je({},h),o.caption_end)),g&&(f.push(a.caption_between),h=Je(Je({},h),o.caption_between));var v=(r=s==null?void 0:s.Caption)!==null&&r!==void 0?r:p4e;return c.jsxs("div",{className:f.join(" "),style:h,children:[c.jsx(v,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),c.jsx(nke,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function lke(t){var e=pr(),r=e.classNames,n=e.styles;return c.jsx("div",{className:r.months,style:n.months,children:t.children})}function uke(t){var e,r,n=t.initialProps,i=pr(),a=RC(),o=pm(),s=x.useState(!1),l=s[0],u=s[1];x.useEffect(function(){i.initialFocus&&a.focusTarget&&(l||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,l,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=Je(Je({},i.styles.root),i.style),h=Object.keys(n).filter(function(m){return m.startsWith("data-")}).reduce(function(m,g){var v;return Je(Je({},m),(v={},v[g]=n[g],v))},{}),p=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:lke;return c.jsx("div",Je({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:c.jsx(p,{children:o.displayMonths.map(function(m,g){return c.jsx(cke,{displayIndex:g,displayMonth:m},g)})})}))}function dke(t){var e=t.children,r=MDe(t,["children"]);return c.jsx(e4e,{initialProps:r,children:c.jsx(u4e,{children:c.jsx(H4e,{initialProps:r,children:c.jsx(b4e,{initialProps:r,children:c.jsx(S4e,{initialProps:r,children:c.jsx(O4e,{children:c.jsx(U4e,{children:e})})})})})})})}function fke(t){return c.jsx(dke,Je({},t,{children:c.jsx(uke,{initialProps:t})}))}function hke(t){if(typeof document=="undefined")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const lz=$.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),mm=()=>{const t=$.useContext(lz);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};hke("[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(\n[data-state=closed]\n){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}");function pke(){const t=navigator.userAgent;return typeof window!="undefined"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function mke(){return LC(/^Mac/)}function gke(){return LC(/^iPhone/)}function uD(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function vke(){return LC(/^iPad/)||mke()&&navigator.maxTouchPoints>1}function uz(){return gke()||vke()}function LC(t){return typeof window!="undefined"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const yke=24,xke=typeof window!="undefined"?x.useLayoutEffect:x.useEffect;function dD(...t){return(...e)=>{for(let r of t)typeof r=="function"&&r(...e)}}const ab=typeof document!="undefined"&&window.visualViewport;function fD(t){let e=window.getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowX+e.overflowY)}function dz(t){for(fD(t)&&(t=t.parentElement);t&&!fD(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const bke=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Jm=0,ob;function wke(t={}){let{isDisabled:e}=t;xke(()=>{if(!e)return Jm++,Jm===1&&uz()&&(ob=Ake()),()=>{Jm--,Jm===0&&(ob==null||ob())}},[e])}function Ake(){let t,e=0,r=f=>{t=dz(f.target),!(t===document.documentElement&&t===document.body)&&(e=f.changedTouches[0].pageY)},n=f=>{if(!t||t===document.documentElement||t===document.body){f.preventDefault();return}let h=f.changedTouches[0].pageY,p=t.scrollTop,m=t.scrollHeight-t.clientHeight;m!==0&&((p<=0&&h>e||p>=m&&h<e)&&f.preventDefault(),e=h)},i=f=>{let h=f.target;Q2(h)&&h!==document.activeElement&&(f.preventDefault(),h.style.transform="translateY(-2000px)",h.focus(),requestAnimationFrame(()=>{h.style.transform=""}))},a=f=>{let h=f.target;Q2(h)&&(h.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{h.style.transform="",ab&&(ab.height<window.innerHeight?requestAnimationFrame(()=>{hD(h)}):ab.addEventListener("resize",()=>hD(h),{once:!0}))}))},o=()=>{window.scrollTo(0,0)},s=window.pageXOffset,l=window.pageYOffset,u=dD(Ske(document.documentElement,"paddingRight","".concat(window.innerWidth-document.documentElement.clientWidth,"px")));window.scrollTo(0,0);let d=dD(Ff(document,"touchstart",r,{passive:!1,capture:!0}),Ff(document,"touchmove",n,{passive:!1,capture:!0}),Ff(document,"touchend",i,{passive:!1,capture:!0}),Ff(document,"focus",a,!0),Ff(window,"scroll",o));return()=>{u(),d(),window.scrollTo(s,l)}}function Ske(t,e,r){let n=t.style[e];return t.style[e]=r,()=>{t.style[e]=n}}function Ff(t,e,r,n){return t.addEventListener(e,r,n),()=>{t.removeEventListener(e,r,n)}}function hD(t){let e=document.scrollingElement||document.documentElement;for(;t&&t!==e;){let r=dz(t);if(r!==document.documentElement&&r!==document.body&&r!==t){let n=r.getBoundingClientRect().top,i=t.getBoundingClientRect().top,a=t.getBoundingClientRect().bottom;const o=r.getBoundingClientRect().bottom+yke;a>o&&(r.scrollTop+=i-n)}t=r.parentElement}}function Q2(t){return t instanceof HTMLInputElement&&!bke.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function _ke(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Cke(...t){return e=>t.forEach(r=>_ke(r,e))}function fz(...t){return x.useCallback(Cke(...t),t)}const hz=new WeakMap;function rn(t,e,r=!1){if(!t||!(t instanceof HTMLElement))return;let n={};Object.entries(e).forEach(([i,a])=>{if(i.startsWith("--")){t.style.setProperty(i,a);return}n[i]=t.style[i],t.style[i]=a}),!r&&hz.set(t,n)}function Eke(t,e){if(!t||!(t instanceof HTMLElement))return;let r=hz.get(t);r&&(t.style[e]=r[e])}const Hr=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function e0(t,e){if(!t)return null;const r=window.getComputedStyle(t),n=r.transform||r.webkitTransform||r.mozTransform;let i=n.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Hr(e)?13:12]):(i=n.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Hr(e)?5:4]):null)}function Nke(t){return 8*(Math.log(t+1)-2)}function sb(t,e){if(!t)return()=>{};const r=t.style.cssText;return Object.assign(t.style,e),()=>{t.style.cssText=r}}function jke(...t){return(...e)=>{for(const r of t)typeof r=="function"&&r(...e)}}const _r={DURATION:.5,EASE:[.32,.72,0,1]},pz=.4,Tke=.25,Pke=100,mz=8,fc=16,J2=26,cb="vaul-dragging";function gz(t){const e=$.useRef(t);return $.useEffect(()=>{e.current=t}),$.useMemo(()=>(...r)=>e.current==null?void 0:e.current.call(e,...r),[])}function Oke({defaultProp:t,onChange:e}){const r=$.useState(t),[n]=r,i=$.useRef(n),a=gz(e);return $.useEffect(()=>{i.current!==n&&(a(n),i.current=n)},[n,i,a]),r}function vz({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,i]=Oke({defaultProp:e,onChange:r}),a=t!==void 0,o=a?t:n,s=gz(r),l=$.useCallback(u=>{if(a){const f=typeof u=="function"?u(t):u;f!==t&&s(f)}else i(u)},[a,t,i,s]);return[o,l]}function Ike({activeSnapPointProp:t,setActiveSnapPointProp:e,snapPoints:r,drawerRef:n,overlayRef:i,fadeFromIndex:a,onSnapPointChange:o,direction:s="bottom",container:l,snapToSequentialPoint:u}){const[d,f]=vz({prop:t,defaultProp:r==null?void 0:r[0],onChange:e}),[h,p]=$.useState(typeof window!="undefined"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);$.useEffect(()=>{function E(){p({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const m=$.useMemo(()=>d===(r==null?void 0:r[r.length-1])||null,[r,d]),g=$.useMemo(()=>{var E;return(E=r==null?void 0:r.findIndex(N=>N===d))!=null?E:null},[r,d]),v=r&&r.length>0&&(a||a===0)&&!Number.isNaN(a)&&r[a]===d||!r,y=$.useMemo(()=>{const E=l?{width:l.getBoundingClientRect().width,height:l.getBoundingClientRect().height}:typeof window!="undefined"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var N;return(N=r==null?void 0:r.map(T=>{const O=typeof T=="string";let j=0;if(O&&(j=parseInt(T,10)),Hr(s)){const D=O?j:h?T*E.height:0;return h?s==="bottom"?E.height-D:-E.height+D:D}const P=O?j:h?T*E.width:0;return h?s==="right"?E.width-P:-E.width+P:P}))!=null?N:[]},[r,h,l]),b=$.useMemo(()=>g!==null?y==null?void 0:y[g]:null,[y,g]),w=$.useCallback(E=>{var N;const T=(N=y==null?void 0:y.findIndex(O=>O===E))!=null?N:null;o(T),rn(n.current,{transition:"transform ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")"),transform:Hr(s)?"translate3d(0, ".concat(E,"px, 0)"):"translate3d(".concat(E,"px, 0, 0)")}),y&&T!==y.length-1&&a!==void 0&&T!==a&&T<a?rn(i.current,{transition:"opacity ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")"),opacity:"0"}):rn(i.current,{transition:"opacity ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")"),opacity:"1"}),f(r==null?void 0:r[Math.max(T,0)])},[n.current,r,y,a,i,f]);$.useEffect(()=>{if(d||t){var E;const N=(E=r==null?void 0:r.findIndex(T=>T===t||T===d))!=null?E:-1;y&&N!==-1&&typeof y[N]=="number"&&w(y[N])}},[d,t,r,y,w]);function S({draggedDistance:E,closeDrawer:N,velocity:T,dismissible:O}){if(a===void 0)return;const j=s==="bottom"||s==="right"?(b!=null?b:0)-E:(b!=null?b:0)+E,P=g===a-1,D=g===0,F=E>0;if(P&&rn(i.current,{transition:"opacity ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")")}),!u&&T>2&&!F){O?N():w(y[0]);return}if(!u&&T>2&&F&&y&&r){w(y[r.length-1]);return}const I=y==null?void 0:y.reduce((R,L)=>typeof R!="number"||typeof L!="number"?R:Math.abs(L-j)<Math.abs(R-j)?L:R),k=Hr(s)?window.innerHeight:window.innerWidth;if(T>pz&&Math.abs(E)<k*.4){const R=F?1:-1;if(R>0&&m&&r){w(y[r.length-1]);return}if(D&&R<0&&O&&N(),g===null)return;w(y[g+R]);return}w(I)}function A({draggedDistance:E}){if(b===null)return;const N=s==="bottom"||s==="right"?b-E:b+E;(s==="bottom"||s==="right")&&N<y[y.length-1]||(s==="top"||s==="left")&&N>y[y.length-1]||rn(n.current,{transform:Hr(s)?"translate3d(0, ".concat(N,"px, 0)"):"translate3d(".concat(N,"px, 0, 0)")})}function _(E,N){if(!r||typeof g!="number"||!y||a===void 0)return null;const T=g===a-1;if(g>=a&&N)return 0;if(T&&!N)return 1;if(!v&&!T)return null;const j=T?g+1:g-1,P=T?y[j]-y[j-1]:y[j+1]-y[j],D=E/Math.abs(P);return T?1-D:D}return{isLastSnapPoint:m,activeSnapPoint:d,shouldFade:v,getPercentageDragged:_,setActiveSnapPoint:f,activeSnapPointIndex:g,onRelease:S,onDrag:A,snapPointsOffset:y}}const Dke=()=>()=>{};function kke(){const{direction:t,isOpen:e,shouldScaleBackground:r,setBackgroundColorOnScale:n,noBodyStyles:i}=mm(),a=$.useRef(null),o=x.useMemo(()=>document.body.style.backgroundColor,[]);function s(){return(window.innerWidth-J2)/window.innerWidth}$.useEffect(()=>{if(e&&r){a.current&&clearTimeout(a.current);const l=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!l)return;jke(n&&!i?sb(document.body,{background:"black"}):Dke,sb(l,{transformOrigin:Hr(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:"".concat(_r.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(_r.EASE.join(","),")")}));const u=sb(l,C({borderRadius:"".concat(mz,"px"),overflow:"hidden"},Hr(t)?{transform:"scale(".concat(s(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)")}:{transform:"scale(".concat(s(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)")}));return()=>{u(),a.current=window.setTimeout(()=>{o?document.body.style.background=o:document.body.style.removeProperty("background")},_r.DURATION*1e3)}}},[e,r,o])}let Bf=null;function Mke({isOpen:t,modal:e,nested:r,hasBeenOpened:n,preventScrollRestoration:i,noBodyStyles:a}){const[o,s]=$.useState(()=>typeof window!="undefined"?window.location.href:""),l=$.useRef(0),u=$.useCallback(()=>{if(uD()&&Bf===null&&t&&!a){Bf={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:h}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:"".concat(-l.current,"px"),left:"".concat(-f,"px"),right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const p=h-window.innerHeight;p&&l.current>=h&&(document.body.style.top="".concat(-(l.current+p),"px"))}),300)}},[t]),d=$.useCallback(()=>{if(uD()&&Bf!==null&&!a){const f=-parseInt(document.body.style.top,10),h=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Bf),window.requestAnimationFrame(()=>{if(i&&o!==window.location.href){s(window.location.href);return}window.scrollTo(h,f)}),Bf=null}},[o]);return $.useEffect(()=>{function f(){l.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),$.useEffect(()=>{if(e)return()=>{typeof document=="undefined"||document.querySelector("[data-vaul-drawer]")||d()}},[e,d]),$.useEffect(()=>{r||!n||(t?(!window.matchMedia("(display-mode: standalone)").matches&&u(),e||window.setTimeout(()=>{d()},500)):d())},[t,n,o,e,r,u,d]),{restorePositionSetting:d}}function Rke({open:t,onOpenChange:e,children:r,onDrag:n,onRelease:i,snapPoints:a,shouldScaleBackground:o=!1,setBackgroundColorOnScale:s=!0,closeThreshold:l=Tke,scrollLockTimeout:u=Pke,dismissible:d=!0,handleOnly:f=!1,fadeFromIndex:h=a&&a.length-1,activeSnapPoint:p,setActiveSnapPoint:m,fixed:g,modal:v=!0,onClose:y,nested:b,noBodyStyles:w=!1,direction:S="bottom",defaultOpen:A=!1,disablePreventScroll:_=!0,snapToSequentialPoint:E=!1,preventScrollRestoration:N=!1,repositionInputs:T=!0,onAnimationEnd:O,container:j,autoFocus:P=!1}){var D,F;const[I=!1,k]=vz({defaultProp:A,prop:t,onChange:ze=>{e==null||e(ze),!ze&&!b&&tt(),setTimeout(()=>{O==null||O(ze)},_r.DURATION*1e3),ze&&!v&&typeof window!="undefined"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),ze||(document.body.style.pointerEvents="auto")}}),[R,L]=$.useState(!1),[V,W]=$.useState(!1),[q,H]=$.useState(!1),J=$.useRef(null),de=$.useRef(null),se=$.useRef(null),Ee=$.useRef(null),Ue=$.useRef(null),ge=$.useRef(!1),Y=$.useRef(null),te=$.useRef(0),ae=$.useRef(!1),X=$.useRef(!A),be=$.useRef(0),ue=$.useRef(null),Pe=$.useRef(((D=ue.current)==null?void 0:D.getBoundingClientRect().height)||0),oe=$.useRef(((F=ue.current)==null?void 0:F.getBoundingClientRect().width)||0),_e=$.useRef(0),De=$.useCallback(ze=>{a&&ze===ce.length-1&&(de.current=new Date)},[]),{activeSnapPoint:he,activeSnapPointIndex:z,setActiveSnapPoint:U,onRelease:Z,snapPointsOffset:ce,onDrag:xe,shouldFade:me,getPercentageDragged:Te}=Ike({snapPoints:a,activeSnapPointProp:p,setActiveSnapPointProp:m,drawerRef:ue,fadeFromIndex:h,overlayRef:J,onSnapPointChange:De,direction:S,container:j,snapToSequentialPoint:E});wke({isDisabled:!I||V||!v||q||!R||!T||!_});const{restorePositionSetting:tt}=Mke({isOpen:I,modal:v,nested:b!=null?b:!1,hasBeenOpened:R,preventScrollRestoration:N,noBodyStyles:w});function rt(){return(window.innerWidth-J2)/window.innerWidth}function sr(ze){var Qe,He;!d&&!a||ue.current&&!ue.current.contains(ze.target)||(Pe.current=((Qe=ue.current)==null?void 0:Qe.getBoundingClientRect().height)||0,oe.current=((He=ue.current)==null?void 0:He.getBoundingClientRect().width)||0,W(!0),se.current=new Date,uz()&&window.addEventListener("touchend",()=>ge.current=!1,{once:!0}),ze.target.setPointerCapture(ze.pointerId),te.current=Hr(S)?ze.pageY:ze.pageX)}function Wn(ze,Qe){var He;let ke=ze;const yt=(He=window.getSelection())==null?void 0:He.toString(),Ar=ue.current?e0(ue.current,S):null,rr=new Date;if(ke.tagName==="SELECT"||ke.hasAttribute("data-vaul-no-drag")||ke.closest("[data-vaul-no-drag]"))return!1;if(S==="right"||S==="left")return!0;if(de.current&&rr.getTime()-de.current.getTime()<500)return!1;if(Ar!==null&&(S==="bottom"?Ar>0:Ar<0))return!0;if(yt&&yt.length>0)return!1;if(Ue.current&&rr.getTime()-Ue.current.getTime()<u&&Ar===0||Qe)return Ue.current=rr,!1;for(;ke;){if(ke.scrollHeight>ke.clientHeight){if(ke.scrollTop!==0)return Ue.current=new Date,!1;if(ke.getAttribute("role")==="dialog")return!0}ke=ke.parentNode}return!0}function fn(ze){if(ue.current&&V){const Qe=S==="bottom"||S==="right"?1:-1,He=(te.current-(Hr(S)?ze.pageY:ze.pageX))*Qe,ke=He>0,yt=a&&!d&&!ke;if(yt&&z===0)return;const Ar=Math.abs(He),rr=document.querySelector("[data-vaul-drawer-wrapper]"),xi=S==="bottom"||S==="top"?Pe.current:oe.current;let kn=Ar/xi;const ka=Te(Ar,ke);if(ka!==null&&(kn=ka),yt&&kn>=1||!ge.current&&!Wn(ze.target,ke))return;if(ue.current.classList.add(cb),ge.current=!0,rn(ue.current,{transition:"none"}),rn(J.current,{transition:"none"}),a&&xe({draggedDistance:He}),ke&&!a){const hn=Nke(He),Hn=Math.min(hn*-1,0)*Qe;rn(ue.current,{transform:Hr(S)?"translate3d(0, ".concat(Hn,"px, 0)"):"translate3d(".concat(Hn,"px, 0, 0)")});return}const Ot=1-kn;if((me||h&&z===h-1)&&(n==null||n(ze,kn),rn(J.current,{opacity:"".concat(Ot),transition:"none"},!0)),rr&&J.current&&o){const hn=Math.min(rt()+kn*(1-rt()),1),Hn=8-kn*8,Af=Math.max(0,14-kn*14);rn(rr,{borderRadius:"".concat(Hn,"px"),transform:Hr(S)?"scale(".concat(hn,") translate3d(0, ").concat(Af,"px, 0)"):"scale(".concat(hn,") translate3d(").concat(Af,"px, 0, 0)"),transition:"none"},!0)}if(!a){const hn=Ar*Qe;rn(ue.current,{transform:Hr(S)?"translate3d(0, ".concat(hn,"px, 0)"):"translate3d(".concat(hn,"px, 0, 0)")})}}}$.useEffect(()=>{window.requestAnimationFrame(()=>{X.current=!0})},[]),$.useEffect(()=>{var ze;function Qe(){if(!ue.current||!T)return;const He=document.activeElement;if(Q2(He)||ae.current){var ke;const yt=((ke=window.visualViewport)==null?void 0:ke.height)||0,Ar=window.innerHeight;let rr=Ar-yt;const xi=ue.current.getBoundingClientRect().height||0,kn=xi>Ar*.8;_e.current||(_e.current=xi);const ka=ue.current.getBoundingClientRect().top;if(Math.abs(be.current-rr)>60&&(ae.current=!ae.current),a&&a.length>0&&ce&&z){const Ot=ce[z]||0;rr+=Ot}if(be.current=rr,xi>yt||ae.current){const Ot=ue.current.getBoundingClientRect().height;let hn=Ot;Ot>yt&&(hn=yt-(kn?ka:J2)),g?ue.current.style.height="".concat(Ot-Math.max(rr,0),"px"):ue.current.style.height="".concat(Math.max(hn,yt-ka),"px")}else pke()||(ue.current.style.height="".concat(_e.current,"px"));a&&a.length>0&&!ae.current?ue.current.style.bottom="0px":ue.current.style.bottom="".concat(Math.max(rr,0),"px")}}return(ze=window.visualViewport)==null||ze.addEventListener("resize",Qe),()=>{var He;return(He=window.visualViewport)==null?void 0:He.removeEventListener("resize",Qe)}},[z,a,ce]);function An(ze){je(),y==null||y(),ze||k(!1),setTimeout(()=>{a&&U(a[0])},_r.DURATION*1e3)}function re(){if(!ue.current)return;const ze=document.querySelector("[data-vaul-drawer-wrapper]"),Qe=e0(ue.current,S);rn(ue.current,{transform:"translate3d(0, 0, 0)",transition:"transform ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")")}),rn(J.current,{transition:"opacity ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")"),opacity:"1"}),o&&Qe&&Qe>0&&I&&rn(ze,M(C({borderRadius:"".concat(mz,"px"),overflow:"hidden"},Hr(S)?{transform:"scale(".concat(rt(),") translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)"),transformOrigin:"top"}:{transform:"scale(".concat(rt(),") translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)"),transformOrigin:"left"}),{transitionProperty:"transform, border-radius",transitionDuration:"".concat(_r.DURATION,"s"),transitionTimingFunction:"cubic-bezier(".concat(_r.EASE.join(","),")")}),!0)}function je(){!V||!ue.current||(ue.current.classList.remove(cb),ge.current=!1,W(!1),Ee.current=new Date)}function $e(ze){if(!V||!ue.current)return;ue.current.classList.remove(cb),ge.current=!1,W(!1),Ee.current=new Date;const Qe=e0(ue.current,S);if(!ze||!Wn(ze.target,!1)||!Qe||Number.isNaN(Qe)||se.current===null)return;const He=Ee.current.getTime()-se.current.getTime(),ke=te.current-(Hr(S)?ze.pageY:ze.pageX),yt=Math.abs(ke)/He;if(yt>.05&&(H(!0),setTimeout(()=>{H(!1)},200)),a){Z({draggedDistance:ke*(S==="bottom"||S==="right"?1:-1),closeDrawer:An,velocity:yt,dismissible:d}),i==null||i(ze,!0);return}if(S==="bottom"||S==="right"?ke>0:ke<0){re(),i==null||i(ze,!0);return}if(yt>pz){An(),i==null||i(ze,!1);return}var Ar;const rr=Math.min((Ar=ue.current.getBoundingClientRect().height)!=null?Ar:0,window.innerHeight);var xi;const kn=Math.min((xi=ue.current.getBoundingClientRect().width)!=null?xi:0,window.innerWidth),ka=S==="left"||S==="right";if(Math.abs(Qe)>=(ka?kn:rr)*l){An(),i==null||i(ze,!1);return}i==null||i(ze,!0),re()}$.useEffect(()=>(I&&(rn(document.documentElement,{scrollBehavior:"auto"}),de.current=new Date),()=>{Eke(document.documentElement,"scrollBehavior")}),[I]);function Re(ze){const Qe=ze?(window.innerWidth-fc)/window.innerWidth:1,He=ze?-fc:0;Y.current&&window.clearTimeout(Y.current),rn(ue.current,{transition:"transform ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")"),transform:Hr(S)?"scale(".concat(Qe,") translate3d(0, ").concat(He,"px, 0)"):"scale(".concat(Qe,") translate3d(").concat(He,"px, 0, 0)")}),!ze&&ue.current&&(Y.current=setTimeout(()=>{const ke=e0(ue.current,S);rn(ue.current,{transition:"none",transform:Hr(S)?"translate3d(0, ".concat(ke,"px, 0)"):"translate3d(".concat(ke,"px, 0, 0)")})},500))}function Pt(ze,Qe){if(Qe<0)return;const He=(window.innerWidth-fc)/window.innerWidth,ke=He+Qe*(1-He),yt=-fc+Qe*fc;rn(ue.current,{transform:Hr(S)?"scale(".concat(ke,") translate3d(0, ").concat(yt,"px, 0)"):"scale(".concat(ke,") translate3d(").concat(yt,"px, 0, 0)"),transition:"none"})}function at(ze,Qe){const He=Hr(S)?window.innerHeight:window.innerWidth,ke=Qe?(He-fc)/He:1,yt=Qe?-fc:0;Qe&&rn(ue.current,{transition:"transform ".concat(_r.DURATION,"s cubic-bezier(").concat(_r.EASE.join(","),")"),transform:Hr(S)?"scale(".concat(ke,") translate3d(0, ").concat(yt,"px, 0)"):"scale(".concat(ke,") translate3d(").concat(yt,"px, 0, 0)")})}return $.useEffect(()=>{v||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[v]),$.createElement(dy,{defaultOpen:A,onOpenChange:ze=>{!d&&!ze||(ze?L(!0):An(!0),k(ze))},open:I},$.createElement(lz.Provider,{value:{activeSnapPoint:he,snapPoints:a,setActiveSnapPoint:U,drawerRef:ue,overlayRef:J,onOpenChange:e,onPress:sr,onRelease:$e,onDrag:fn,dismissible:d,shouldAnimate:X,handleOnly:f,isOpen:I,isDragging:V,shouldFade:me,closeDrawer:An,onNestedDrag:Pt,onNestedOpenChange:Re,onNestedRelease:at,keyboardIsOpen:ae,modal:v,snapPointsOffset:ce,activeSnapPointIndex:z,direction:S,shouldScaleBackground:o,setBackgroundColorOnScale:s,noBodyStyles:w,container:j,autoFocus:P}},r))}const yz=$.forwardRef(function(r,e){var t=K(r,[]);const{overlayRef:n,snapPoints:i,onRelease:a,shouldFade:o,isOpen:s,modal:l,shouldAnimate:u}=mm(),d=fz(e,n),f=i&&i.length>0;if(!l)return null;const h=$.useCallback(p=>a(p),[a]);return $.createElement(Gd,C({onMouseUp:h,ref:d,"data-vaul-overlay":"","data-vaul-snap-points":s&&f?"true":"false","data-vaul-snap-points-overlay":s&&o?"true":"false","data-vaul-animate":u!=null&&u.current?"true":"false"},t))});yz.displayName="Drawer.Overlay";const xz=$.forwardRef(function(a,i){var o=a,{onPointerDownOutside:t,style:e,onOpenAutoFocus:r}=o,n=K(o,["onPointerDownOutside","style","onOpenAutoFocus"]);const{drawerRef:s,onPress:l,onRelease:u,onDrag:d,keyboardIsOpen:f,snapPointsOffset:h,activeSnapPointIndex:p,modal:m,isOpen:g,direction:v,snapPoints:y,container:b,handleOnly:w,shouldAnimate:S,autoFocus:A}=mm(),[_,E]=$.useState(!1),N=fz(i,s),T=$.useRef(null),O=$.useRef(null),j=$.useRef(!1),P=y&&y.length>0;kke();const D=(I,k,R=0)=>{if(j.current)return!0;const L=Math.abs(I.y),V=Math.abs(I.x),W=V>L,q=["bottom","right"].includes(k)?1:-1;if(k==="left"||k==="right"){if(!(I.x*q<0)&&V>=0&&V<=R)return W}else if(!(I.y*q<0)&&L>=0&&L<=R)return!W;return j.current=!0,!0};$.useEffect(()=>{P&&window.requestAnimationFrame(()=>{E(!0)})},[]);function F(I){T.current=null,j.current=!1,u(I)}return $.createElement(qd,M(C({"data-vaul-drawer-direction":v,"data-vaul-drawer":"","data-vaul-delayed-snap-points":_?"true":"false","data-vaul-snap-points":g&&P?"true":"false","data-vaul-custom-container":b?"true":"false","data-vaul-animate":S!=null&&S.current?"true":"false"},n),{ref:N,style:h&&h.length>0?C({"--snap-point-height":"".concat(h[p!=null?p:0],"px")},e):e,onPointerDown:I=>{w||(n.onPointerDown==null||n.onPointerDown.call(n,I),T.current={x:I.pageX,y:I.pageY},l(I))},onOpenAutoFocus:I=>{r==null||r(I),A||I.preventDefault()},onPointerDownOutside:I=>{if(t==null||t(I),!m||I.defaultPrevented){I.preventDefault();return}f.current&&(f.current=!1)},onFocusOutside:I=>{if(!m){I.preventDefault();return}},onPointerMove:I=>{if(O.current=I,w||(n.onPointerMove==null||n.onPointerMove.call(n,I),!T.current))return;const k=I.pageY-T.current.y,R=I.pageX-T.current.x,L=I.pointerType==="touch"?10:2;D({x:R,y:k},v,L)?d(I):(Math.abs(R)>L||Math.abs(k)>L)&&(T.current=null)},onPointerUp:I=>{n.onPointerUp==null||n.onPointerUp.call(n,I),T.current=null,j.current=!1,u(I)},onPointerOut:I=>{n.onPointerOut==null||n.onPointerOut.call(n,I),F(O.current)},onContextMenu:I=>{n.onContextMenu==null||n.onContextMenu.call(n,I),O.current&&F(O.current)}}))});xz.displayName="Drawer.Content";const $ke=250,Lke=120,Fke=$.forwardRef(function(i,n){var a=i,{preventCycle:t=!1,children:e}=a,r=K(a,["preventCycle","children"]);const{closeDrawer:o,isDragging:s,snapPoints:l,activeSnapPoint:u,setActiveSnapPoint:d,dismissible:f,handleOnly:h,isOpen:p,onPress:m,onDrag:g}=mm(),v=$.useRef(null),y=$.useRef(!1);function b(){if(y.current){A();return}window.setTimeout(()=>{w()},Lke)}function w(){if(s||t||y.current){A();return}if(A(),!l||l.length===0){f||o();return}if(u===l[l.length-1]&&f){o();return}const E=l.findIndex(T=>T===u);if(E===-1)return;const N=l[E+1];d(N)}function S(){v.current=window.setTimeout(()=>{y.current=!0},$ke)}function A(){v.current&&window.clearTimeout(v.current),y.current=!1}return $.createElement("div",C({onClick:b,onPointerCancel:A,onPointerDown:_=>{h&&m(_),S()},onPointerMove:_=>{h&&g(_)},ref:n,"data-vaul-drawer-visible":p?"true":"false","data-vaul-handle":"","aria-hidden":"true"},r),$.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},e))});Fke.displayName="Drawer.Handle";function Bke(t){const e=mm(),i=t,{container:r=e.container}=i,n=K(i,["container"]);return $.createElement(hy,C({container:r},n))}const Da={Root:Rke,Content:xz,Overlay:yz,Trigger:fy,Portal:Bke,Close:Qp,Title:Kd,Description:Xd},bz=r=>{var n=r,{shouldScaleBackground:t=!0}=n,e=K(n,["shouldScaleBackground"]);return c.jsx(Da.Root,C({shouldScaleBackground:t},e))};bz.displayName="Drawer";const zke=Da.Trigger,Vke=Da.Portal,Uke=Da.Close,wz=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Da.Overlay,C({ref:r,className:ie("fixed inset-0 z-50 bg-black/80",t)},e))});wz.displayName=Da.Overlay.displayName;const Az=x.forwardRef((i,n)=>{var a=i,{className:t,children:e}=a,r=K(a,["className","children"]);return c.jsxs(Vke,{children:[c.jsx(wz,{}),c.jsxs(Da.Content,M(C({ref:n,className:ie("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t)},r),{children:[c.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),e]}))]})});Az.displayName="DrawerContent";const Sz=r=>{var n=r,{className:t}=n,e=K(n,["className"]);return c.jsx("div",C({className:ie("mt-auto flex flex-col gap-2 p-4",t)},e))};Sz.displayName="DrawerFooter";const Wke=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Da.Title,C({ref:r,className:ie("text-lg font-semibold leading-none tracking-tight",t)},e))});Wke.displayName=Da.Title.displayName;const Hke=x.forwardRef((n,r)=>{var i=n,{className:t}=i,e=K(i,["className"]);return c.jsx(Da.Description,C({ref:r,className:ie("text-sm text-muted-foreground",t)},e))});Hke.displayName=Da.Description.displayName;function Gke({date:t,onHourSelect:e,onMinuteSelect:r,minTime:n}){const i=x.useRef(null),a=x.useRef(null),o=t?t.getHours():0,s=t?t.getMinutes():0,u=(p=>{if(!p)return!0;const m=new Date,g=new Date(p);return m.setHours(0,0,0,0),g.setHours(0,0,0,0),g.getTime()<=m.getTime()})(t);x.useEffect(()=>{const p=setTimeout(()=>{if(i.current){const m=i.current.querySelector('[data-hour="'.concat(o,'"]'));m==null||m.scrollIntoView({block:"center"})}if(a.current){const m=a.current.querySelector('[data-minute="'.concat(s,'"]'));m==null||m.scrollIntoView({block:"center"})}},50);return()=>clearTimeout(p)},[]);const d=Array.from({length:24},(p,m)=>m),f=Array.from({length:60},(p,m)=>m),h=p=>p.stopPropagation();return c.jsxs("div",{className:"flex items-center justify-center gap-2 p-3",children:[c.jsx("div",{ref:i,className:"h-48 w-20 overflow-y-auto scroll-snap-y-mandatory",onWheel:h,onTouchMove:h,children:d.map(p=>{const m=p===o,g=u&&n?p<n.getHours():!1;return c.jsx("button",{onClick:()=>e(p),"data-hour":p,disabled:g,className:ie("flex items-center justify-center w-full h-12 text-lg rounded-lg scroll-snap-align-center",m?"bg-primary text-primary-foreground font-bold":"hover:bg-accent",g&&"text-muted-foreground opacity-50 cursor-not-allowed"),children:String(p).padStart(2,"0")},p)})}),c.jsx("div",{className:"text-2xl font-bold text-muted-foreground pb-1",children:":"}),c.jsx("div",{ref:a,className:"h-48 w-20 overflow-y-auto scroll-snap-y-mandatory",onWheel:h,onTouchMove:h,children:f.map(p=>{const m=p===s,g=u&&n?o<n.getHours()||o===n.getHours()&&p<n.getMinutes():!1;return c.jsx("button",{onClick:()=>r(p),"data-minute":p,disabled:g,className:ie("flex items-center justify-center w-full h-12 text-lg rounded-lg scroll-snap-align-center",m?"bg-primary text-primary-foreground font-bold":"hover:bg-accent",g&&"text-muted-foreground opacity-50 cursor-not-allowed"),children:String(p).padStart(2,"0")},p)})})]})}const eA=({isDesktop:t,selected:e,onSelect:r,className:n,classNames:i,showOutsideDays:a=!0,dayPickerProps:o,isAllDay:s=!1,minTime:l})=>{const u=p=>{if(!p||!r)return;const m=e?new Date(e):new Date;m.setFullYear(p.getFullYear(),p.getMonth(),p.getDate()),r(m)},d=p=>{if(r===void 0)return;const m=e?new Date(e):new Date;m.setHours(p),r(m)},f=p=>{if(r===void 0)return;const m=e?new Date(e):new Date;m.setMinutes(p),r(m)},h=p=>{const m=p.target.value;if(!e||!m||!r)return;const[g,v]=m.split(":").map(Number),y=new Date(e);y.setHours(g,v),r(y)};return c.jsxs(c.Fragment,{children:[c.jsx(fke,M(C({showOutsideDays:a,className:ie("p-3",n),classNames:C({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ie(Lh({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ie(Lh({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50"},i),components:{IconLeft:()=>c.jsx(qk,{className:"h-4 w-4"}),IconRight:()=>c.jsx(Rv,{className:"h-4 w-4"})}},o),{mode:"single",selected:e,onSelect:u,locale:qr,weekStartsOn:1})),c.jsx("div",{className:"border-t border-border",children:t?c.jsx("div",{className:"p-3",children:c.jsx(At,{type:"time",value:e?ur(e,"HH:mm"):"",onChange:h})}):s?c.jsx("span",{}):c.jsx(Gke,{date:e,onHourSelect:d,onMinuteSelect:f,minTime:l})})]})};eA.displayName="PickerContent";function Td(l){var u=l,{className:t,classNames:e,showOutsideDays:r=!0,selected:n,onSelect:i,isAllDay:a=!1,minTime:o}=u,s=K(u,["className","classNames","showOutsideDays","selected","onSelect","isAllDay","minTime"]);const d=!Li(),[f,h]=x.useState(!1),p=s,m=c.jsxs(Q,{variant:"outline",className:ie("w-[280px] justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[c.jsx(Ca,{className:"mr-2 h-4 w-4"}),n?ur(n,"PPP p",{locale:qr}):c.jsx("span",{children:"Scegli una data e ora"})]});return d?c.jsxs(Yp,{open:f,onOpenChange:h,children:[c.jsx(Zp,{asChild:!0,children:m}),c.jsx(Hd,{className:"w-auto p-0",onOpenAutoFocus:g=>g.preventDefault(),children:c.jsx(eA,{isDesktop:d,selected:n,onSelect:i,className:t,classNames:e,showOutsideDays:r,dayPickerProps:p,isAllDay:a})})]}):c.jsxs(bz,{open:f,onOpenChange:h,children:[c.jsx(zke,{asChild:!0,children:m}),c.jsxs(Az,{children:[c.jsx("div",{className:"max-h-[85vh] overflow-y-auto p-4 flex flex-col items-center",children:c.jsx(eA,{isDesktop:d,selected:n,onSelect:i,className:t,classNames:e,showOutsideDays:r,dayPickerProps:p,isAllDay:a,minTime:o})}),c.jsx(Sz,{className:"pt-2",children:c.jsx(Uke,{asChild:!0,children:c.jsx(Q,{variant:"outline",children:"Conferma"})})})]})]})}Td.displayName="Calendar";function qke({isOpen:t,onClose:e,onSave:r,onDelete:n,editEvent:i,selectedDate:a}){const{user:o}=Bt(),{toast:s}=Nr(),[l,u]=x.useState(!1),[d,f]=x.useState(!1),[h,p]=x.useState(""),m=[{value:"personal",label:"Personale",color:"#81B29A",icon:""},{value:"family",label:"Famiglia",color:"#E07A5F",icon:""},{value:"work",label:"Lavoro",color:"#3D405B",icon:""},{value:"appointment",label:"Appuntamento",color:"#F4A261",icon:""}],g=wl({defaultValues:{title:"",description:"",startDate:a||new Date,endDate:a||new Date,isAllDay:!1,isPublic:!1,createdBy:(o==null?void 0:o.username)||"",eventType:"personal",color:"#E07A5F",location:"",attendees:[],reminderMinutes:void 0}}),v=g.watch("startDate"),y=g.watch("isAllDay"),b=i&&((o==null?void 0:o.username)===i.createdBy||(o==null?void 0:o.role)==="admin");x.useEffect(()=>{if(t){if(i)g.reset({title:i.title,description:i.description||"",startDate:i.startDate,endDate:i.endDate,isAllDay:i.isAllDay,isPublic:i.isPublic,createdBy:i.createdBy,eventType:i.eventType,color:i.color,location:i.location||"",attendees:i.attendees||[],reminderMinutes:i.reminderMinutes||void 0});else{const N=a||new Date,T=new Date(N);T.setHours(N.getHours()+1),g.reset({title:"",description:"",startDate:N,endDate:T,isAllDay:!1,isPublic:!1,createdBy:(o==null?void 0:o.username)||"",eventType:"personal",color:"#E07A5F",location:"",attendees:[],reminderMinutes:void 0})}p("")}},[i,a,g,o,t]),x.useEffect(()=>{const N=g.getValues("endDate");if(v&&N<=v){const T=new Date(v);T.setHours(v.getHours()+1),g.setValue("endDate",T)}},[v,g]),x.useEffect(()=>{if(y){const N=new Date(g.getValues("startDate")),T=new Date(g.getValues("endDate"));N.setHours(0,0,0,0),T.setHours(23,59,59,999),g.setValue("startDate",N),g.setValue("endDate",T)}},[y,g]);const w=()=>{e(),setTimeout(()=>{g.reset(),p("")},150)},S=()=>G(this,null,function*(){if(!(!i||!n)){f(!0);try{yield n(i.id),s({title:"Evento eliminato",description:"L'evento  stato eliminato con successo!"}),w()}catch(N){console.error("Errore nell'eliminare l'evento:",N),s({title:"Errore",description:"Impossibile eliminare l'evento",variant:"destructive"})}finally{f(!1)}}}),A=N=>G(this,null,function*(){var T,O;if(!N.title.trim()){s({title:"Errore",description:"Il titolo dell'evento  obbligatorio",variant:"destructive"});return}u(!0);try{const j=M(C({},N),{title:N.title.trim(),description:(T=N.description)==null?void 0:T.trim(),location:(O=N.location)==null?void 0:O.trim(),attendees:N.attendees.filter(D=>D.trim()!=="")});let P;if(i){P=i;try{P.title=j.title,P.description=j.description,P.updateDates(j.startDate,j.endDate),P.isAllDay=j.isAllDay,P.isPublic=j.isPublic,P.eventType=j.eventType,P.color=j.color,P.location=j.location,P.attendees=j.attendees,P.updatedAt=new Date,P.reminderMinutes=j.reminderMinutes,P.validate()}catch(D){if(D instanceof xt){s({title:"Errore di Validazione",description:D.errors.join(", "),variant:"destructive"});return}throw D}}else try{P=kh.createCalendarEvent({id:"event_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),title:j.title,description:j.description,startDate:j.startDate,endDate:j.endDate,isAllDay:j.isAllDay,isPublic:j.isPublic,createdBy:j.createdBy,eventType:j.eventType,color:j.color,location:j.location,attendees:j.attendees,reminderMinutes:j.reminderMinutes})}catch(D){if(D instanceof xt){s({title:"Errore di Validazione",description:D.errors.join(", "),variant:"destructive"});return}throw D}yield r(P),s({title:i?"Evento aggiornato":"Evento creato",description:i?"L'evento  stato aggiornato con successo!":"L'evento  stato creato con successo!"}),w()}catch(j){console.error("Errore nel salvare l'evento:",j),s({title:"Errore",description:i?"Impossibile aggiornare l'evento":"Impossibile creare l'evento",variant:"destructive"})}finally{u(!1)}}),_=N=>{const T=m.find(O=>O.value===N);T&&(g.setValue("eventType",N),g.setValue("color",T.color))},E=N=>{const T=N==="none"?void 0:parseInt(N);if(T){g.setValue("reminderMinutes",T);var O=g.getValues("startDate"),j=new Date;if(j.setMinutes(new Date().getMinutes()+T),O<=j){var P=new Date(j);P.setMinutes(P.getMinutes()+T),g.setValue("startDate",P),s({title:"Ora inizio cambiata",description:"Ho spostato di "+T+" minuti l'ora inizio per adattare il promemoria."})}}};return c.jsx(Yt,{open:t,onOpenChange:w,children:c.jsxs(Ht,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[c.jsx(Zt,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Qt,{className:"text-2xl font-bold text-delft-blue flex items-center",children:i?c.jsxs(c.Fragment,{children:[c.jsx(Ca,{className:"mr-3 h-6 w-6 text-burnt-newStyle"}),"Modifica Evento"]}):c.jsxs(c.Fragment,{children:[c.jsx(ar,{className:"mr-3 h-6 w-6 text-burnt-newStyle"}),"Crea Nuovo Evento"]})}),i&&b&&n&&c.jsxs(fl,{children:[c.jsx(im,{asChild:!0,children:c.jsx(Q,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 transition-colors",disabled:l||d,children:c.jsx(Mr,{className:"h-5 w-5"})})}),c.jsxs(Bs,{children:[c.jsxs(zs,{children:[c.jsx(Us,{children:"Conferma Eliminazione"}),c.jsxs(Ws,{children:["Sei sicuro di voler eliminare l'evento \"",i.title,'"? Questa azione non pu essere annullata.']})]}),c.jsxs(Vs,{children:[c.jsx(Gs,{disabled:d,children:"Annulla"}),c.jsx(Hs,{onClick:S,disabled:d,className:"bg-red-500 hover:bg-red-600 text-white",children:d?c.jsxs(c.Fragment,{children:[c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminando..."]}):"Elimina"})]})]})]})]})}),c.jsx(Al,M(C({},g),{children:c.jsxs("form",{onSubmit:g.handleSubmit(A),className:"space-y-6",children:[c.jsx(ot,{control:g.control,name:"title",render:({field:N})=>{var T;return c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Titolo Evento *"}),c.jsx(gt,{children:c.jsx(At,M(C({},N),{placeholder:"Inserisci il titolo dell'evento...",maxLength:100,className:"text-lg"}))}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((T=N.value)==null?void 0:T.length)||0,"/100 caratteri"]}),c.jsx(Ft,{})]})}}),c.jsx(ot,{control:g.control,name:"description",render:({field:N})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Descrizione"}),c.jsx(gt,{children:c.jsx(qs,M(C({},N),{placeholder:"Descrizione dell'evento (opzionale)...",rows:4,className:"resize-y"}))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:g.control,name:"isAllDay",render:({field:N})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:[c.jsx(Xr,{className:"mr-2 h-4 w-4"}),"Evento Giornata Intera"]}),c.jsx("p",{className:"text-xs text-gray-600",children:"L'evento dura tutto il giorno"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:N.value,onCheckedChange:N.onChange})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(ot,{control:g.control,name:"startDate",render:({field:N})=>c.jsxs(nt,{className:"flex flex-col",children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Data e Ora Inizio"}),c.jsx(Td,{mode:"single",selected:N.value,isAllDay:y,minTime:new Date,onSelect:T=>{if(T){if(y)N.onChange(T);else{const O=new Date(T);N.onChange(O)}console.log(N)}},disabled:T=>T<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:g.control,name:"endDate",render:({field:N})=>c.jsxs(nt,{className:"flex flex-col",children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Data e Ora Fine"}),c.jsx(Td,{mode:"single",selected:N.value,isAllDay:y,minTime:new Date,onSelect:T=>{if(T)if(y)N.onChange(T);else{const O=new Date(T);N.onChange(O)}},disabled:T=>{const O=g.getValues("startDate");return T<O},initialFocus:!0}),c.jsx(Ft,{})]})})]}),c.jsx(ot,{control:g.control,name:"eventType",render:({field:N})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Tipo di Evento"}),c.jsxs(Nt,{onValueChange:_,defaultValue:N.value,children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona il tipo di evento"})})}),c.jsx(_t,{children:m.map(T=>c.jsx(ye,{value:T.value,children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-lg",children:T.icon}),c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:T.color}}),c.jsx("span",{className:"font-medium",children:T.label})]})},T.value))})]}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:g.control,name:"reminderMinutes",render:({field:N})=>{var T;return c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(In,{className:"mr-2 h-4 w-4"}),"Notifica Prima dell'Evento"]}),c.jsxs(Nt,{onValueChange:E,value:((T=N.value)==null?void 0:T.toString())||"none",children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona quando ricevere la notifica"})})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"none",children:"Nessuna notifica"}),c.jsx(ye,{value:"5",children:"5 minuti prima"}),c.jsx(ye,{value:"15",children:"15 minuti prima"}),c.jsx(ye,{value:"30",children:"30 minuti prima"}),c.jsx(ye,{value:"60",children:"1 ora prima"}),c.jsx(ye,{value:"120",children:"2 ore prima"}),c.jsx(ye,{value:"1440",children:"1 giorno prima"}),c.jsx(ye,{value:"10080",children:"1 settimana prima"})]})]}),c.jsx(Ft,{})]})}}),c.jsx(ot,{control:g.control,name:"location",render:({field:N})=>c.jsxs(nt,{children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center",children:[c.jsx(Db,{className:"mr-2 h-4 w-4"}),"Luogo (Opzionale)"]}),c.jsx(gt,{children:c.jsx(At,M(C({},N),{placeholder:"Inserisci il luogo dell'evento..."}))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:g.control,name:"isPublic",render:({field:N})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:N.value?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"mr-2 h-4 w-4 text-green-600"}),"Evento Pubblico"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ir,{className:"mr-2 h-4 w-4 text-orange-600"}),"Evento Privato"]})}),c.jsx("p",{className:"text-xs text-gray-600",children:N.value?"Questo evento sar visibile a tutti i membri della famiglia":"Questo evento sar visibile solo a te"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:N.value,onCheckedChange:N.onChange})})]})}),c.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[c.jsx(Q,{type:"button",variant:"outline",className:"flex-1",onClick:w,disabled:l||d,children:"Annulla"}),c.jsxs(Q,{type:"submit",disabled:l||d,className:"flex-1 bg-burnt-newStyle hover:bg-burnt-newStyle/90 text-white font-semibold",children:[l&&c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Aggiorna Evento":"Crea Evento"]})]})]})}))]})})}function Kke({isOpen:t,onClose:e,onSave:r,onDelete:n,editReminder:i}){const{user:a}=Bt(),{toast:o}=Nr(),[s,l]=x.useState(!1),[u,d]=x.useState(!1),[f,h]=x.useState(""),p=[{value:"personal",label:"Personale",color:"#81B29A",icon:""},{value:"family",label:"Famiglia",color:"#E07A5F",icon:""},{value:"work",label:"Lavoro",color:"#3D405B",icon:""},{value:"health",label:"Salute",color:"#F4A261",icon:""},{value:"shopping",label:"Shopping",color:"#2A9D8F",icon:""},{value:"event",label:"Evento",color:"#E76F51",icon:""},{value:"other",label:"Altro",color:"#6C757D",icon:""}],m=[{value:"daily",label:"Giornaliera"},{value:"weekly",label:"Settimanale"},{value:"monthly",label:"Mensile"},{value:"yearly",label:"Annuale"},{value:"custom",label:"Personalizzata"}],g=[{label:"Tra 15 minuti",minutes:15},{label:"Tra 30 minuti",minutes:30},{label:"Tra 1 ora",minutes:60},{label:"Tra 2 ore",minutes:120},{label:"Domani mattina",hours:24,setTime:"09:00"},{label:"Domani sera",hours:24,setTime:"20:00"}],v=wl({defaultValues:{title:"",message:"",scheduledTime:km(new Date,1),createdBy:(a==null?void 0:a.username)||"",isActive:!0,isPublic:!1,isRecurring:!1,reminderType:"personal",priority:"medium",tags:[],notes:""}}),y=v.watch("isRecurring"),b=v.watch("recurrencePattern.type"),w=i&&((a==null?void 0:a.username)===i.createdBy||(a==null?void 0:a.role)==="admin");x.useEffect(()=>{if(t){if(i)v.reset({title:i.title,message:i.message,scheduledTime:i.scheduledTime,createdBy:i.createdBy,isActive:i.isActive,isPublic:i.isPublic,isRecurring:i.isRecurring,reminderType:i.reminderType,priority:i.priority,tags:i.tags||[],notes:i.notes||"",recurrencePattern:i.recurrencePattern});else{const j=km(new Date,1);v.reset({title:"",message:"",scheduledTime:j,createdBy:(a==null?void 0:a.username)||"",isActive:!0,isPublic:!1,isRecurring:!1,reminderType:"personal",priority:"medium",tags:[],notes:""})}h("")}},[i,v,a,t]);const S=()=>{e(),setTimeout(()=>{v.reset(),h("")},150)},A=()=>G(this,null,function*(){if(!(!i||!n)){d(!0);try{yield n(i.id),o({title:"Promemoria eliminato",description:"Il promemoria  stato eliminato con successo!"}),S()}catch(j){console.error("Errore nell'eliminare il promemoria:",j),o({title:"Errore",description:"Impossibile eliminare il promemoria",variant:"destructive"})}finally{d(!1)}}}),_=j=>G(this,null,function*(){if(!j.title.trim()){o({title:"Errore",description:"Il titolo del promemoria  obbligatorio",variant:"destructive"});return}if(j.message.trim()||(j.message="Non specificato"),j.scheduledTime<=new Date){o({title:"Errore",description:"L'orario del promemoria deve essere nel futuro",variant:"destructive"});return}l(!0);try{var P=j.scheduledTime;P.setSeconds(0);const D={title:j.title.trim(),message:j.message.trim(),scheduledTime:P,createdBy:j.createdBy,isActive:j.isActive,isPublic:j.isPublic,isRecurring:j.isRecurring,reminderType:j.reminderType,priority:j.priority,tags:j.tags.filter(F=>F.trim()!=="")};j.notes&&j.notes.trim()&&(D.notes=j.notes.trim()),j.recurrencePattern&&j.isRecurring&&(D.recurrencePattern=j.recurrencePattern),yield r(D),S()}catch(D){console.error("Errore nel salvare il promemoria:",D),o({title:"Errore",description:i?"Impossibile aggiornare il promemoria":"Impossibile creare il promemoria",variant:"destructive"})}finally{l(!1)}}),E=j=>{const P=new Date;let D;if(j.setTime){D=km(P,j.hours||0);const[F,I]=j.setTime.split(":");D.setHours(parseInt(F),parseInt(I),0,0)}else j.hours?D=km(P,j.hours):D=lte(P,j.minutes||0);v.setValue("scheduledTime",D)},N=()=>{const j=f.trim();if(j){const P=v.getValues("tags");!P.includes(j)&&P.length<10&&(v.setValue("tags",[...P,j]),h(""))}},T=j=>{const P=v.getValues("tags");v.setValue("tags",P.filter(D=>D!==j))},O=j=>{if(j.key==="Enter")j.preventDefault(),N();else if(j.key==="Backspace"&&f===""&&v.getValues("tags").length>0){const P=v.getValues("tags");T(P[P.length-1])}};return c.jsx(Yt,{open:t,onOpenChange:S,children:c.jsxs(Ht,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsx(Zt,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Qt,{className:"text-2xl font-bold text-delft-blue flex items-center",children:i?c.jsxs(c.Fragment,{children:[c.jsx(In,{className:"mr-3 h-6 w-6 text-burnt-newStyle"}),"Modifica Promemoria"]}):c.jsxs(c.Fragment,{children:[c.jsx(ar,{className:"mr-3 h-6 w-6 text-burnt-newStyle"}),"Crea Nuovo Promemoria"]})}),i&&w&&n&&c.jsxs(fl,{children:[c.jsx(im,{asChild:!0,children:c.jsx(Q,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 transition-colors",disabled:s||u,children:c.jsx(Mr,{className:"h-5 w-5"})})}),c.jsxs(Bs,{children:[c.jsxs(zs,{children:[c.jsx(Us,{children:"Conferma Eliminazione"}),c.jsxs(Ws,{children:['Sei sicuro di voler eliminare il promemoria "',i.title,'"? Questa azione non pu essere annullata.']})]}),c.jsxs(Vs,{children:[c.jsx(Gs,{disabled:u,children:"Annulla"}),c.jsx(Hs,{onClick:A,disabled:u,className:"bg-red-500 hover:bg-red-600 text-white",children:u?c.jsxs(c.Fragment,{children:[c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminando..."]}):"Elimina"})]})]})]})]})}),c.jsx(Al,M(C({},v),{children:c.jsxs("form",{onSubmit:v.handleSubmit(_),className:"space-y-6",children:[c.jsx(ot,{control:v.control,name:"title",render:({field:j})=>{var P;return c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Titolo Promemoria *"}),c.jsx(gt,{children:c.jsx(At,M(C({},j),{placeholder:"Es. Prendere le medicine, Chiamare il medico...",maxLength:100,className:"text-lg"}))}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((P=j.value)==null?void 0:P.length)||0,"/100 caratteri"]}),c.jsx(Ft,{})]})}}),c.jsx(ot,{control:v.control,name:"message",render:({field:j})=>{var P;return c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Messaggio *"}),c.jsx(gt,{children:c.jsx(qs,M(C({},j),{placeholder:"Descrivi cosa devi ricordare...",rows:3,maxLength:500,className:"resize-y"}))}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((P=j.value)==null?void 0:P.length)||0,"/500 caratteri"]}),c.jsx(Ft,{})]})}}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("label",{className:"text-sm font-medium text-delft-blue",children:"Scorciatoie Tempo"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((j,P)=>c.jsx(Q,{type:"button",variant:"outline",size:"sm",onClick:()=>E(j),className:"text-xs",children:j.label},P))})]}),c.jsx(ot,{control:v.control,name:"scheduledTime",render:({field:j})=>c.jsxs(nt,{className:"flex flex-col",children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Data e Ora Promemoria *"}),c.jsx(Td,{locale:qr,mode:"single",weekStartsOn:1,selected:j.value,minTime:new Date,onSelect:P=>{if(P){const D=new Date(P);D.setHours(P.getHours()),D.setMinutes(P.getMinutes()),j.onChange(D)}},disabled:P=>P<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0}),c.jsx(Ft,{})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(ot,{control:v.control,name:"reminderType",render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Tipo di Promemoria"}),c.jsxs(Nt,{onValueChange:j.onChange,defaultValue:j.value,children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona il tipo"})})}),c.jsx(_t,{children:p.map(P=>c.jsx(ye,{value:P.value,children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-lg",children:P.icon}),c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:P.color}}),c.jsx("span",{className:"font-medium",children:P.label})]})},P.value))})]}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:v.control,name:"priority",render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Priorit"}),c.jsxs(Nt,{onValueChange:j.onChange,defaultValue:j.value,children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona priorit"})})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"low",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),c.jsx("span",{children:"Bassa"})]})}),c.jsx(ye,{value:"medium",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),c.jsx("span",{children:"Media"})]})}),c.jsx(ye,{value:"high",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),c.jsx("span",{children:"Alta"})]})})]})]}),c.jsx(Ft,{})]})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"text-sm font-medium text-delft-blue",children:["Tag ",v.watch("tags").length>0&&c.jsxs("span",{className:"text-xs text-gray-500",children:["(",v.watch("tags").length,"/10)"]})]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(At,{placeholder:"Aggiungi tag per organizzare...",value:f,onChange:j=>h(j.target.value),onKeyDown:O,className:"flex-1",disabled:v.watch("tags").length>=10}),c.jsx(Q,{type:"button",variant:"outline",onClick:N,disabled:!f.trim()||v.watch("tags").length>=10,children:c.jsx(ar,{className:"h-4 w-4"})})]}),v.watch("tags").length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:v.watch("tags").map((j,P)=>c.jsxs(ne,{variant:"secondary",className:"bg-cambridge-newStyle/10 text-cambridge-newStyle px-3 py-1 border border-cambridge-newStyle/20",children:[j,c.jsx("button",{type:"button",onClick:()=>T(j),className:"ml-2 text-cambridge-newStyle hover:text-red-500 transition-colors",children:c.jsx(oo,{className:"h-3 w-3"})})]},P))})]}),c.jsx(ot,{control:v.control,name:"notes",render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue",children:"Note Aggiuntive"}),c.jsx(gt,{children:c.jsx(qs,M(C({},j),{placeholder:"Note o dettagli aggiuntivi (opzionale)...",rows:2,className:"resize-y"}))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:v.control,name:"isRecurring",render:({field:j})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs(it,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:[c.jsx(kb,{className:"mr-2 h-4 w-4"}),"Promemoria Ricorrente"]}),c.jsx("p",{className:"text-xs text-gray-600",children:"Il promemoria si ripeter automaticamente"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:j.value,onCheckedChange:j.onChange})})]})}),y&&c.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-blue-800",children:[c.jsx(kb,{className:"h-4 w-4"}),"Configurazione Ricorrenza"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx(ot,{control:v.control,name:"recurrencePattern.type",render:({field:j})=>c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm",children:"Frequenza"}),c.jsxs(Nt,{onValueChange:j.onChange,defaultValue:j.value||"daily",children:[c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona frequenza"})}),c.jsx(_t,{children:m.map(P=>c.jsx(ye,{value:P.value,children:P.label},P.value))})]})]})}),c.jsx(ot,{control:v.control,name:"recurrencePattern.interval",render:({field:j})=>{var P;return c.jsxs(nt,{children:[c.jsx(it,{className:"text-sm",children:"Ogni"}),c.jsxs(Nt,{onValueChange:D=>j.onChange(parseInt(D)),defaultValue:((P=j.value)==null?void 0:P.toString())||"1",children:[c.jsx(St,{children:c.jsx(jt,{placeholder:"Intervallo"})}),c.jsx(_t,{children:Array.from({length:10},(D,F)=>F+1).map(D=>c.jsxs(ye,{value:D.toString(),children:[D," ",b==="daily"?D===1?"giorno":"giorni":b==="weekly"?D===1?"settimana":"settimane":b==="monthly"?D===1?"mese":"mesi":b==="yearly"?D===1?"anno":"anni":"unit"]},D))})]})]})}})]}),c.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[c.jsx(Lp,{className:"h-4 w-4 text-yellow-600"}),c.jsx("p",{className:"text-xs text-yellow-800",children:"I promemoria ricorrenti creeranno automaticamente nuove istanze secondo la frequenza impostata."})]})]}),c.jsx(ot,{control:v.control,name:"isPublic",render:({field:j})=>c.jsxs(nt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(it,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:j.value?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"mr-2 h-4 w-4 text-green-600"}),"Promemoria Pubblico"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ir,{className:"mr-2 h-4 w-4 text-orange-600"}),"Promemoria Privato"]})}),c.jsx("p",{className:"text-xs text-gray-600",children:j.value?"Questo promemoria sar visibile a tutti i membri della famiglia":"Questo promemoria sar visibile solo a te"})]}),c.jsx(gt,{children:c.jsx(Kr,{checked:j.value,onCheckedChange:j.onChange})})]})}),c.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[c.jsx(Q,{type:"button",variant:"outline",className:"flex-1",onClick:S,disabled:s||u,children:"Annulla"}),c.jsxs(Q,{type:"submit",disabled:s||u,className:"flex-1 bg-burnt-newStyle hover:bg-burnt-newStyle/90 text-white font-semibold",children:[s&&c.jsx(Pn,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Aggiorna Promemoria":"Crea Promemoria"]})]})]})}))]})})}const Xke=$.forwardRef((t,e)=>{const{user:r}=Bt(),{toast:n}=Nr(),i=Li(),[a,o]=x.useState(!i),[s,l]=x.useState(!1),[u,d]=x.useState(null),[f,h]=x.useState("all"),[p,m]=x.useState("all"),[g,v]=x.useState("all"),[y,b]=x.useState("all"),{data:w,loading:S,add:A,update:_,remove:E}=Jt("reminders");$.useEffect(()=>{o(!i)},[i]);const N=x.useMemo(()=>w.filter(H=>H.isPublic||H.createdBy===(r==null?void 0:r.username)||(r==null?void 0:r.role)==="admin").filter(H=>{const J=f==="all"||f==="active"&&H.isActive&&!H.completedAt||f==="completed"&&H.completedAt,de=p==="all"||H.reminderType===p,se=g==="all"||H.priority===g,Ee=y==="all"||y==="public"&&H.isPublic||y==="private"&&!H.isPublic;return J&&de&&se&&Ee}),[w,r,f,p,g,y]),T=x.useMemo(()=>{const q=N.length,H=N.filter(Ee=>Ee.isActive&&!Ee.completedAt).length,J=N.filter(Ee=>Ee.completedAt).length,de=N.filter(Ee=>Ee.isActive&&!Ee.completedAt&&Ee.scheduledTime<new Date).length,se=N.filter(Ee=>Ee.isActive&&!Ee.completedAt&&Ee.scheduledTime>new Date).length;return{total:q,active:H,completed:J,overdue:de,upcoming:se}},[N]),O=x.useMemo(()=>{const q=new Date,H={overdue:[],today:[],tomorrow:[],upcoming:[],completed:[]};return N.forEach(J=>{J.completedAt?H.completed.push(J):J.isActive&&(LS(J.scheduledTime,q)?H.overdue.push(J):ow(J.scheduledTime)?H.today.push(J):Ij(J.scheduledTime)?H.tomorrow.push(J):H.upcoming.push(J))}),Object.keys(H).forEach(J=>{H[J].sort((de,se)=>de.scheduledTime.getTime()-se.scheduledTime.getTime())}),H},[N]),j=q=>G(Gt,null,function*(){try{u?(yield _(u.id,q),n({title:"Promemoria aggiornato",description:"Il promemoria  stato aggiornato con successo!"})):(yield A(q),n({title:"Promemoria creato",description:"Il promemoria  stato creato con successo!"})),l(!1),d(null)}catch(H){console.error("Errore nel salvare il promemoria:",H),n({title:"Errore",description:"Impossibile salvare il promemoria",variant:"destructive"})}}),P=q=>G(Gt,null,function*(){try{yield E(q),n({title:"Promemoria eliminato",description:"Il promemoria  stato eliminato con successo!"})}catch(H){console.error("Errore nell'eliminare il promemoria:",H),n({title:"Errore",description:"Impossibile eliminare il promemoria",variant:"destructive"})}}),D=q=>G(Gt,null,function*(){try{yield _(q.id,M(C({},q),{completedAt:new Date,isActive:!1,updatedAt:new Date})),n({title:"Promemoria completato",description:"Il promemoria  stato segnato come completato!"})}catch(H){console.error("Errore nel completare il promemoria:",H),n({title:"Errore",description:"Impossibile completare il promemoria",variant:"destructive"})}}),F=q=>{d(q),l(!0)},I=()=>{l(!1),d(null)},k=()=>{o(!a)},R=q=>{const H={personal:{label:"Personale",icon:"",color:"#81B29A"},family:{label:"Famiglia",icon:"",color:"#E07A5F"},work:{label:"Lavoro",icon:"",color:"#3D405B"},health:{label:"Salute",icon:"",color:"#F4A261"},shopping:{label:"Shopping",icon:"",color:"#2A9D8F"},event:{label:"Evento",icon:"",color:"#E76F51"},other:{label:"Altro",icon:"",color:"#6C757D"}};return H[q]||H.other},L=q=>ow(q)?"".concat(ur(q,"HH:mm")):Ij(q)?"Dom. ".concat(ur(q,"HH:mm")):ur(q,"d/M HH:mm",{locale:qr}),V=()=>l(!0);x.useImperativeHandle(e,()=>({openModal:V}));const W=q=>{const H=R(q.reminderType),J=q.isActive&&!q.completedAt&&q.scheduledTime<new Date,de=q.snoozeUntil&&q.snoozeUntil>new Date,se=q.createdBy===(r==null?void 0:r.username)||(r==null?void 0:r.role)==="admin";return c.jsxs("div",{className:ie("group flex items-center gap-3 p-3 rounded-lg border transition-all duration-200 hover:shadow-sm",J&&"border-red-200 bg-red-50/30",de&&"border-blue-200 bg-blue-50/30",q.completedAt&&"border-green-200 bg-green-50/30 opacity-60"),children:[c.jsxs("div",{className:"flex flex-col items-center gap-1 flex-shrink-0",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:H.color}}),c.jsx("div",{className:ie("w-2 h-2 rounded-full",q.priority==="high"?"bg-red-500":q.priority==="medium"?"bg-yellow-500":"bg-green-500")})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:ie("font-medium text-sm text-delft-blue truncate",q.completedAt&&"line-through text-gray-500"),children:q.title}),c.jsxs("div",{className:"flex items-center gap-1",children:[q.isRecurring&&c.jsx(kb,{className:"h-3 w-3 text-blue-500"}),!q.isPublic&&c.jsx(Ir,{className:"h-3 w-3 text-orange-500"})]})]}),q.message&&c.jsx("p",{className:ie("text-xs text-gray-600 mb-1 truncate",q.completedAt&&"line-through"),children:q.message})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs flex-shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[c.jsx(Xr,{className:"h-3 w-3"}),L(q.scheduledTime)]}),J&&c.jsx(ne,{variant:"destructive",className:"text-xs px-1 py-0",children:"Ritardo"}),de&&c.jsx(ne,{variant:"secondary",className:"text-xs px-1 py-0 bg-blue-100 text-blue-700",children:"Posticipato"}),de&&c.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[c.jsx(Xr,{className:"h-3 w-3"}),L(q.snoozeUntil)]}),q.completedAt&&c.jsx(ne,{variant:"secondary",className:"text-xs px-1 py-0 bg-green-100 text-green-700",children:""})]}),se&&c.jsxs(Uh,{children:[c.jsx(Wh,{asChild:!0,children:c.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(qW,{className:"h-4 w-4"})})}),c.jsxs(Hu,{align:"end",children:[!q.completedAt&&q.isActive&&c.jsx(c.Fragment,{children:c.jsxs(Tr,{onClick:()=>D(q),children:[c.jsx(No,{className:"h-4 w-4 mr-2 text-green-600"}),"Completa"]})}),c.jsxs(Tr,{onClick:()=>F(q),children:[c.jsx(iH,{className:"h-4 w-4 mr-2 text-blue-600"}),"Modifica"]}),c.jsxs(Tr,{onClick:()=>P(q.id),className:"text-red-600",children:[c.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Elimina"]})]})]})]},q.id)};return S?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-burnt-newStyle"}),c.jsx("span",{className:"ml-3 text-delft-blue text-sm",children:"Caricamento promemoria..."})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(ne,{variant:"secondary",className:"text-xs bg-cambridge-newStyle/10 text-cambridge-newStyle",children:[T.total," totali"]}),T.active>0&&c.jsxs(ne,{variant:"secondary",className:"text-xs bg-green-100 text-green-700",children:[T.active," attivi"]}),T.overdue>0&&c.jsxs(ne,{variant:"destructive",className:"text-xs",children:[T.overdue," in ritardo"]}),T.upcoming>0&&c.jsxs(ne,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700",children:[T.upcoming," prossimi"]})]}),c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:"font-medium text-sm",children:"Filtri di ricerca"})]}),i&&c.jsx(Q,{variant:"ghost",size:"sm",onClick:k,children:a?c.jsx(Bo,{className:"h-4 w-4"}):c.jsx(Na,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:ie("grid grid-cols-2 md:grid-cols-4 gap-2",i&&!a&&"hidden"),children:[c.jsxs(Nt,{value:f,onValueChange:h,children:[c.jsx(St,{className:"h-8 text-xs",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutti"}),c.jsx(ye,{value:"active",children:"Attivi"}),c.jsx(ye,{value:"completed",children:"Completati"})]})]}),c.jsxs(Nt,{value:p,onValueChange:m,children:[c.jsx(St,{className:"h-8 text-xs",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutti i Tipi"}),c.jsx(ye,{value:"personal",children:"Personale"}),c.jsx(ye,{value:"family",children:"Famiglia"}),c.jsx(ye,{value:"work",children:"Lavoro"}),c.jsx(ye,{value:"health",children:"Salute"}),c.jsx(ye,{value:"shopping",children:"Shopping"}),c.jsx(ye,{value:"event",children:"Evento"}),c.jsx(ye,{value:"other",children:"Altro"})]})]}),c.jsxs(Nt,{value:g,onValueChange:v,children:[c.jsx(St,{className:"h-8 text-xs",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutte"}),c.jsx(ye,{value:"high",children:"Alta"}),c.jsx(ye,{value:"medium",children:"Media"}),c.jsx(ye,{value:"low",children:"Bassa"})]})]}),c.jsxs(Nt,{value:y,onValueChange:b,children:[c.jsx(St,{className:"h-8 text-xs",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutti"}),c.jsx(ye,{value:"public",children:"Pubblici"}),c.jsx(ye,{value:"private",children:"Privati"})]})]})]})]})}),c.jsxs("div",{className:"space-y-4",children:[O.overdue.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-red-600 mb-2 flex items-center",children:[c.jsx(ao,{className:"mr-1 h-4 w-4"}),"In Ritardo (",O.overdue.length,")"]}),c.jsx("div",{className:"space-y-2",children:O.overdue.map(W)})]}),O.today.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-delft-blue mb-2 flex items-center",children:[c.jsx(Xr,{className:"mr-1 h-4 w-4"}),"Oggi (",O.today.length,")"]}),c.jsx("div",{className:"space-y-2",children:O.today.map(W)})]}),O.tomorrow.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-delft-blue mb-2 flex items-center",children:[c.jsx(Ca,{className:"mr-1 h-4 w-4"}),"Domani (",O.tomorrow.length,")"]}),c.jsx("div",{className:"space-y-2",children:O.tomorrow.map(W)})]}),O.upcoming.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-delft-blue mb-2 flex items-center",children:[c.jsx(In,{className:"mr-1 h-4 w-4"}),"Prossimi (",O.upcoming.length,")"]}),c.jsx("div",{className:"space-y-2",children:O.upcoming.map(W)})]}),f==="all"&&O.completed.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-sm font-semibold text-green-600 mb-2 flex items-center",children:[c.jsx(No,{className:"mr-1 h-4 w-4"}),"Completati (",O.completed.length,")"]}),c.jsxs("div",{className:"space-y-2",children:[O.completed.slice(0,3).map(W),O.completed.length>3&&c.jsxs("p",{className:"text-xs text-gray-500 text-center py-2",children:["... e altri ",O.completed.length-3," completati"]})]})]}),T.total===0&&c.jsxs("div",{className:"text-center py-8",children:[c.jsx(In,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Nessun promemoria"}),c.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Crea il tuo primo promemoria per iniziare!"}),c.jsxs(Q,{onClick:()=>l(!0),size:"sm",className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Crea Promemoria"]})]})]}),c.jsx(Kke,{isOpen:s,onClose:I,onSave:j,onDelete:P,editReminder:u})]})});function Yke(){const{user:t}=Bt(),e=Li(),[r,n]=x.useState("calendar"),[i,a]=x.useState(!e),[o,s]=x.useState(!1),[l,u]=x.useState(new Date),[d,f]=x.useState(!1),[h,p]=x.useState(null),[m,g]=x.useState(),[v,y]=x.useState(!1),[b,w]=x.useState([]),[S,A]=x.useState("all"),[_,E]=x.useState("all"),N=x.useRef(null);$.useEffect(()=>{a(!e)},[e]);const{data:T,loading:O,add:j,update:P,remove:D}=Jt("calendar_events"),{showLoading:F}=dm(O,T),I=x.useMemo(()=>T.filter(_e=>_e.isPublic||_e.createdBy===(t==null?void 0:t.username)||(t==null?void 0:t.role)==="admin").filter(_e=>{const De=S==="all"||_e.eventType===S,he=_==="all"||_==="public"&&_e.isPublic||_==="private"&&!_e.isPublic;return De&&he}),[T,t,S,_]),k=x.useMemo(()=>{const oe=I.length,_e=I.filter(z=>z.isPublic).length,De=I.filter(z=>!z.isPublic).length,he=I.filter(z=>z.createdBy===(t==null?void 0:t.username)).length;return{total:oe,publicEvents:_e,privateEvents:De,myEvents:he}},[I,t]),R=x.useMemo(()=>{const oe=new Date;return I.filter(_e=>(_e.startDate instanceof Date?_e.startDate:new Date(_e.startDate))>=oe||_e.endDate&&(_e.endDate instanceof Date?_e.endDate:new Date(_e.endDate))>=oe).sort((_e,De)=>{const he=_e.startDate instanceof Date?_e.startDate:new Date(_e.startDate),z=De.startDate instanceof Date?De.startDate:new Date(De.startDate);return he.getTime()-z.getTime()})},[I]),L=ni(l),V=Jp(L),W=Ri(L,{weekStartsOn:1}),q=vy(V,{weekStartsOn:1}),H="d",J=[];let de=[],se=W;const Ee=[{name:"Lun",isWeekend:!1},{name:"Mar",isWeekend:!1},{name:"Mer",isWeekend:!1},{name:"Gio",isWeekend:!1},{name:"Ven",isWeekend:!1},{name:"Sab",isWeekend:!0},{name:"Dom",isWeekend:!0}];for(;se<=q;){for(let oe=0;oe<7;oe++){const _e=se,De=I.filter(z=>cn(z.startDate,_e)||z.startDate<=_e&&z.endDate>=_e),he=Pj(_e)===0||Pj(_e)===6;de.push(c.jsxs("div",{className:"p-2 text-center text-sm cursor-pointer transition-all duration-200 relative h-16 border border-gray-200 dark:border-gray-600 flex flex-col justify-between ".concat(yy(se,L)?ow(se)?"bg-burnt-newStyle text-white font-bold shadow-md dark:bg-burnt-newStyle dark:text-white":he?"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/30":"text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800 hover:bg-cambridge-newStyle/10 dark:hover:bg-cambridge-newStyle/20":"text-gray-300 dark:text-gray-600 bg-gray-50 dark:bg-gray-800/50"),onClick:()=>{De.length>0?(w(De),g(_e),y(!0)):(g(_e),f(!0))},children:[c.jsx("div",{className:"font-semibold text-xs",children:ur(se,H)}),De.length>0&&c.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[De.slice(0,e?1:2).map(z=>c.jsx("div",{className:"w-1.5 h-1.5 rounded-full shadow-sm",style:{backgroundColor:z.color},title:z.title},z.id)),De.length>(e?1:2)&&c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-500 dark:bg-gray-400"})]})]},se.toString())),se=jn(se,1)}J.push(c.jsx("div",{className:"grid grid-cols-7 flex-1",children:de},se.toString())),de=[]}const Ue=oe=>G(this,null,function*(){h?(yield P(h.id,oe),p(null)):yield j(oe),f(!1),g(void 0)}),ge=oe=>G(this,null,function*(){try{yield D(oe),f(!1),p(null),g(void 0)}catch(_e){throw console.error("Errore nell'eliminare l'evento:",_e),_e}}),Y=oe=>{p(oe),f(!0),y(!1)},te=()=>{f(!1),p(null),g(void 0)},ae=()=>{y(!1),w([]),g(void 0)},X=()=>{u(Mi(l,1))},be=()=>{u(yre(l))},ue=()=>{a(!i)},Pe=oe=>({personal:{label:"Personale",icon:""},family:{label:"Famiglia",icon:""},work:{label:"Lavoro",icon:""},appointment:{label:"Appuntamento",icon:""},reminder:{label:"Promemoria",icon:""}})[oe]||{label:oe,icon:""};return c.jsx(gf,{isVisible:F,title:"Caricamento Calendario",subtitle:"Sincronizzazione eventi...",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:[c.jsxs("div",{className:ie("mb-8",e&&"mb-6"),children:[c.jsxs("div",{className:ie("flex sm:items-center sm:justify-between",e?"flex-col space-y-3":"flex-row"),children:[c.jsxs("div",{className:ie("flex items-center gap-3",e?"w-full":""),children:[c.jsx(sne,{className:"h-8 w-8 text-cambridge-newStyle"}),c.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:r==="calendar"?"Eventi":"Promemoria"}),e&&c.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[" ",c.jsxs(Q,{onClick:()=>s(!0),size:"sm",variant:"outline",className:"border-cambridge-newStyle",children:[c.jsx(Cs,{className:"h-4 w-4 text-cambridge-newStyle"})," "]}),c.jsx(Q,{onClick:()=>{var oe;return r==="calendar"?f(!0):(oe=N.current)==null?void 0:oe.openModal()},size:"sm",className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white p-2",children:c.jsx(ar,{className:"h-4 w-4"})})]})]}),c.jsx(Z2,{value:r,onValueChange:n,className:"w-full mb-4",children:c.jsxs(PC,{className:"grid w-full grid-cols-2 lg:w-auto",children:[c.jsxs(Av,{value:"calendar",className:"flex items-center gap-2",children:[c.jsx(Ca,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:ie(e&&"text-sm"),children:"Eventi"})]}),c.jsxs(Av,{value:"reminders",className:"flex items-center gap-2",children:[c.jsx(In,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:ie(e&&"text-sm"),children:"Promemoria"})]})]})}),r==="calendar"&&!e&&c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(ne,{variant:"secondary",className:"bg-cambridge-newStyle/10 text-cambridge-newStyle border-cambridge-newStyle/20",children:[k.total," ",k.total===1?"evento":"eventi"]}),c.jsxs(ne,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[k.publicEvents," ",k.publicEvents===1?"pubblico":"pubblici"]}),c.jsxs(ne,{variant:"secondary",className:"bg-orange-100 text-orange-700 border-orange-200",children:[k.privateEvents," ",k.privateEvents===1?"privato":"privati"]}),k.myEvents>0&&c.jsxs(ne,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[k.myEvents," ",k.myEvents===1?"mio":"miei"]})]})]}),!e&&c.jsxs(Q,{onClick:()=>{var oe;return r==="calendar"?f(!0):(oe=N.current)==null?void 0:oe.openModal()},className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white dark:text-black shadow-lg",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),r==="calendar"?"Nuovo Evento":"Nuovo Promemoria"]})]}),c.jsxs(Z2,{value:r,onValueChange:n,children:[c.jsxs(Mc,{value:"calendar",className:"space-y-6",children:[c.jsx(Ie,{className:ie("mb-6",e&&"mb-4"),children:c.jsxs(Ve,{className:ie("p-6",e&&"p-4"),children:[e&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:"font-medium text-sm",children:"Filtri di ricerca"})]}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:ue,children:i?c.jsx(Bo,{className:"h-4 w-4"}):c.jsx(Na,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:ie("flex gap-4",e&&!i&&"hidden"),children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tipo Evento"}),c.jsxs(Nt,{value:S,onValueChange:A,children:[c.jsx(St,{className:"w-full sm:w-48",children:c.jsx(jt,{placeholder:"Seleziona tipo"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutti i Tipi"}),c.jsx(ye,{value:"personal",children:"Personale"}),c.jsx(ye,{value:"family",children:"Famiglia"}),c.jsx(ye,{value:"work",children:"Lavoro"}),c.jsx(ye,{value:"appointment",children:"Appuntamento"}),c.jsx(ye,{value:"reminder",children:"Promemoria"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Visibilit"}),c.jsxs(Nt,{value:_,onValueChange:E,children:[c.jsx(St,{className:"w-full sm:w-40",children:c.jsx(jt,{placeholder:"Seleziona visibilit"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutti"}),c.jsx(ye,{value:"public",children:"Pubblici"}),c.jsx(ye,{value:"private",children:"Privati"})]})]})]})]})]})}),c.jsx(Ie,{className:"mb-6",children:c.jsxs(Ve,{className:ie("p-6",e&&"p-4"),children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-delft-blue",children:ur(l,"MMMM yyyy",{locale:qr})}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(Q,{variant:"outline",size:"sm",onClick:be,className:"p-2",children:c.jsx(qk,{className:"h-4 w-4"})}),c.jsx(Q,{variant:"outline",size:"sm",onClick:X,className:"p-2",children:c.jsx(Rv,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:ie("flex flex-col",e?"h-90":"h-98"),children:[c.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:Ee.map(oe=>c.jsx("div",{className:"p-3 text-center text-sm font-semibold ".concat(oe.isWeekend?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"),children:oe.name},oe.name))}),c.jsx("div",{className:"flex-1 overflow-hidden",children:J})]})]})}),c.jsx(Ie,{children:c.jsxs(Ve,{className:ie("p-6",e&&"p-4"),children:[c.jsxs("h3",{className:"text-lg font-semibold text-delft-blue mb-4 flex items-center",children:[c.jsx(Xr,{className:"mr-2 h-5 w-5"}),"Prossimi Eventi",R.length>0&&c.jsx(ne,{variant:"secondary",className:"ml-2 bg-cambridge-newStyle/10 text-cambridge-newStyle",children:R.length})]}),R.length>0?c.jsx("div",{className:ie("space-y-3",e?"max-h-48 overflow-y-auto":"md:overflow-y-auto md:scrollbar-thin md:scrollbar-thumb-burnt-sienna md:scrollbar-track-gray-100",!e&&"max-h-[165px]"),children:R.map(oe=>{const _e=Pe(oe.eventType);return c.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200 border border-gray-100",style:{backgroundColor:"".concat(oe.color,"08")},onClick:()=>Y(oe),children:[c.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0 shadow-sm",style:{backgroundColor:oe.color}}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h4",{className:"font-semibold text-delft-blue truncate",children:oe.title}),c.jsx("span",{className:"text-lg",children:_e.icon})]}),c.jsxs("div",{className:ie("flex items-center gap-4 text-sm text-gray-600",e&&"flex-col items-start gap-1"),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Xr,{className:"mr-1 h-3 w-3"}),ur(oe.startDate,"d MMM yyyy",{locale:qr}),oe.isAllDay?"":" ".concat(ur(oe.startDate,"HH:mm")),!cn(oe.startDate,oe.endDate)&&c.jsxs("span",{children:[" - ",ur(oe.endDate,"d MMM yyyy",{locale:qr})]})]}),oe.location&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(Db,{className:"mr-1 h-3 w-3"}),c.jsx("span",{className:"truncate max-w-32",children:oe.location})]}),oe.attendees&&oe.attendees.length>0&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(Lr,{className:"mr-1 h-3 w-3"}),c.jsx("span",{children:oe.attendees.length})]})]})]}),c.jsx(ne,{variant:"outline",className:"capitalize text-xs border-2",style:{borderColor:oe.color,color:oe.color},children:_e.label})]},oe.id)})}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Xr,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600",children:"Nessun evento in arrivo"}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aggiungi un evento per iniziare"})]})]})})]}),c.jsx(Mc,{value:"reminders",className:"space-y-6",children:c.jsx(Xke,{ref:N})})]}),c.jsx(Yt,{open:v,onOpenChange:ae,children:c.jsxs(Ht,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[c.jsxs(Zt,{children:[c.jsxs(Qt,{className:"text-xl font-bold text-delft-blue",children:["Eventi del ",m&&ur(m,"d MMMM yyyy",{locale:qr})]}),c.jsx(Oi,{className:"text-gray-600",children:"Dettagli degli eventi per il giorno selezionato."})]}),c.jsx("div",{className:"space-y-4 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:b.length>0?b.map(oe=>{const _e=Pe(oe.eventType);return c.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 hover:shadow-md transition-all cursor-pointer",style:{backgroundColor:"".concat(oe.color,"08")},onClick:()=>Y(oe),children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:oe.color}}),c.jsx("h4",{className:"font-semibold text-delft-blue",children:oe.title}),c.jsx("span",{className:"text-lg",children:_e.icon})]}),c.jsx(ne,{variant:"outline",style:{borderColor:oe.color,color:oe.color},children:_e.label})]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(Xr,{className:"mr-2 h-3 w-3"}),oe.isAllDay?"Tutto il giorno":"".concat(ur(oe.startDate,"HH:mm")," - ").concat(ur(oe.endDate,"HH:mm"))]}),oe.location&&c.jsxs("div",{className:"flex items-center",children:[c.jsx(Db,{className:"mr-2 h-3 w-3"}),oe.location]}),oe.description&&c.jsx("p",{className:"mt-2 text-gray-700",children:oe.description})]})]},oe.id)}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Ca,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),c.jsx("p",{className:"text-gray-600",children:"Nessun evento per questo giorno."})]})}),c.jsx("div",{className:"pt-4 flex justify-end",children:c.jsx(Q,{onClick:ae,variant:"secondary",children:"Chiudi"})})]})}),c.jsx(Yt,{open:o,onOpenChange:s,children:c.jsxs(Ht,{className:"sm:max-w-md p-6",children:[c.jsxs(Zt,{className:"mb-4",children:[c.jsx(Qt,{className:"text-xl font-semibold text-delft-blue",children:"Statistiche Eventi"}),c.jsx(Oi,{className:"text-gray-600",children:"Riepilogo rapido e completo degli eventi nel tuo calendario."})]}),c.jsxs("div",{className:"flex flex-wrap gap-3 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:[c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-cambridge-newStyle/10 text-cambridge-newStyle border-cambridge-newStyle/20",children:[c.jsx(Ca,{className:"w-4 h-4 mr-2"})," ",k.total," ",k.total===1?"evento":"eventi"," totali"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-green-100 text-green-700 border-green-200",children:[c.jsx(Br,{className:"w-4 h-4 mr-2"})," ",k.publicEvents," ",k.publicEvents===1?"pubblico":"pubblici"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-orange-100 text-orange-700 border-orange-200",children:[c.jsx(Ir,{className:"w-4 h-4 mr-2"})," ",k.privateEvents," ",k.privateEvents===1?"privato":"privati"]}),k.myEvents>0&&c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-purple-100 text-purple-700 border-purple-200",children:[c.jsx(ji,{className:"w-4 h-4 mr-2"})," ",k.myEvents," ",k.myEvents===1?"mio":"miei"]})]}),c.jsx("div",{className:"pt-4 flex justify-end",children:c.jsx(Q,{onClick:()=>s(!1),variant:"secondary",children:"Chiudi"})})]})}),c.jsx(qke,{isOpen:d,onClose:te,onSave:Ue,onDelete:ge,editEvent:h,selectedDate:m})]})})}const Zke=NR({username:nu().min(3,"Username deve essere almeno 3 caratteri").max(20,"Username troppo lungo").regex(/^[a-zA-Z0-9_-]+$/,"Username pu contenere solo lettere, numeri, _ e -"),email:nu().email("Email non valida").max(100,"Email troppo lunga"),displayName:nu().min(2,"Nome display troppo corto").max(50,"Nome display troppo lungo"),password:nu().min(6,"Password deve essere almeno 6 caratteri").max(50,"Password troppo lunga"),role:xY(["admin","user"],{required_error:"Seleziona un ruolo"})});function _z(){const{user:t}=Bt(),{data:e,loading:r,error:n,add:i}=Jt("users"),{toast:a}=Nr(),[o,s]=x.useState(!1),[l,u]=x.useState(!1),[d,f]=x.useState(null),[h,p]=x.useState(null),[m,g]=x.useState(!1),v=wl({resolver:SR(Zke),defaultValues:{username:"",email:"",displayName:"",password:"",role:"user"}});if((t==null?void 0:t.role)!=="admin")return c.jsx("div",{className:"p-6",children:c.jsx(Ie,{children:c.jsx(Ve,{className:"pt-6",children:c.jsxs("div",{className:"text-center text-gray-500",children:[c.jsx(Ec,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),c.jsx("p",{children:"Accesso riservato agli amministratori"})]})})})});const y=_=>G(this,null,function*(){u(!0);try{if(e.find(j=>j.username===_.username))throw new Error("Username gi esistente");const{encrypted:N,iv:T}=yield rS.encryptPassword(_.password),O=new zp("",_.username,_.role,_.email,_.displayName,void 0,new Date,void 0,new Date,!0,N,T);yield i(O),f({username:_.username,password:_.password,email:_.email,displayName:_.displayName,role:_.role}),v.reset(),a({title:"Utente creato con successo!",description:"L'utente ".concat(_.username,"  stato creato.")})}catch(E){console.error("Errore nella creazione utente:",E),a({title:"Errore nella creazione",description:E instanceof Error?E.message:"Errore sconosciuto",variant:"destructive"})}finally{u(!1)}}),b=(_,E)=>G(this,null,function*(){try{yield navigator.clipboard.writeText(_),p(E),setTimeout(()=>p(null),2e3)}catch(N){console.error("Errore nella copia:",N)}}),w=_=>_?new Intl.DateTimeFormat("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(_):"Mai",S=_=>_==="admin"?"destructive":"secondary",A=_=>_==="admin"?c.jsx(Ec,{className:"h-3 w-3"}):c.jsx(Lr,{className:"h-3 w-3"});return r?c.jsx("div",{className:"p-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-burnt-newStyle mx-auto"}),c.jsx("p",{className:"mt-3 text-gray-600",children:"Caricamento utenti..."})]})})}):n?c.jsx("div",{className:"p-6",children:c.jsx(Ie,{children:c.jsx(Ve,{className:"pt-6",children:c.jsx("div",{className:"text-center text-red-600",children:c.jsxs("p",{children:["Errore nel caricamento: ",n]})})})})}):c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-delft-blue flex items-center",children:[c.jsx(Lr,{className:"h-8 w-8 mr-3 text-cambridge-newStyle"}),"Gestione Utenti"]}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Amministra gli utenti del sistema"})]}),c.jsxs(Yt,{open:o,onOpenChange:s,children:[c.jsx(BS,{asChild:!0,children:c.jsxs(Q,{className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90",children:[c.jsx(ar,{className:"h-4 w-4 mr-2"}),"Crea Nuovo Utente"]})}),c.jsxs(Ht,{className:"sm:max-w-[500px]",children:[c.jsx(Zt,{children:c.jsx(Qt,{children:"Crea Nuovo Utente"})}),d?c.jsxs("div",{className:"space-y-4",children:[c.jsxs(Wc,{children:[c.jsx(QW,{className:"h-4 w-4"}),c.jsxs(Hc,{children:[c.jsx("strong",{children:"Utente creato con successo!"}),c.jsx("br",{}),"Ecco le credenziali dell'utente:"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Username"}),c.jsx("p",{className:"font-mono",children:d.username})]}),c.jsx(Q,{variant:"outline",size:"sm",onClick:()=>b(d.username,"username"),children:h==="username"?c.jsx(Er,{className:"h-3 w-3"}):c.jsx(ch,{className:"h-3 w-3"})})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Password"}),c.jsx("p",{className:"font-mono text-blue-600 font-semibold",children:d.password})]}),c.jsx(Q,{variant:"outline",size:"sm",onClick:()=>b(d.password,"password"),children:h==="password"?c.jsx(Er,{className:"h-3 w-3"}):c.jsx(ch,{className:"h-3 w-3"})})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),c.jsx("p",{className:"font-mono",children:d.email})]}),c.jsx(Q,{variant:"outline",size:"sm",onClick:()=>b(d.email,"email"),children:h==="email"?c.jsx(Er,{className:"h-3 w-3"}):c.jsx(ch,{className:"h-3 w-3"})})]})]}),c.jsxs("div",{className:"flex space-x-2 pt-4",children:[c.jsx(Q,{onClick:()=>{f(null),s(!1)},className:"flex-1",children:"Chiudi"}),c.jsx(Q,{variant:"outline",onClick:()=>f(null),className:"flex-1",children:"Crea Altro Utente"})]})]}):c.jsx(Al,M(C({},v),{children:c.jsxs("form",{onSubmit:v.handleSubmit(y),className:"space-y-4",children:[c.jsx(ot,{control:v.control,name:"username",render:({field:_})=>c.jsxs(nt,{children:[c.jsx(it,{children:"Username"}),c.jsx(gt,{children:c.jsx(At,C({placeholder:"es. marco.rossi"},_))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:v.control,name:"email",render:({field:_})=>c.jsxs(nt,{children:[c.jsx(it,{children:"Email"}),c.jsx(gt,{children:c.jsx(At,C({type:"email",placeholder:"marco.rossi@family.com"},_))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:v.control,name:"displayName",render:({field:_})=>c.jsxs(nt,{children:[c.jsx(it,{children:"Nome Completo"}),c.jsx(gt,{children:c.jsx(At,C({placeholder:"Marco Rossi"},_))}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:v.control,name:"password",render:({field:_})=>c.jsxs(nt,{children:[c.jsx(it,{children:"Password"}),c.jsx(gt,{children:c.jsxs("div",{className:"relative",children:[c.jsx(At,C({type:m?"text":"password",placeholder:"Inserisci una password sicura"},_)),c.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!m),children:m?c.jsx(KW,{className:"h-4 w-4"}):c.jsx(jh,{className:"h-4 w-4"})})]})}),c.jsx(Ft,{})]})}),c.jsx(ot,{control:v.control,name:"role",render:({field:_})=>c.jsxs(nt,{children:[c.jsx(it,{children:"Ruolo"}),c.jsxs(Nt,{onValueChange:_.onChange,defaultValue:_.value,children:[c.jsx(gt,{children:c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona un ruolo"})})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"user",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Lr,{className:"h-3 w-3 mr-2"}),"Utente Standard"]})}),c.jsx(ye,{value:"admin",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(Ec,{className:"h-3 w-3 mr-2"}),"Amministratore"]})})]})]}),c.jsx(Ft,{})]})}),c.jsxs("div",{className:"flex space-x-2 pt-4",children:[c.jsx(Q,{type:"button",variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Annulla"}),c.jsx(Q,{type:"submit",disabled:l,className:"flex-1 bg-cambridge-newStyle hover:bg-cambridge-newStyle/90",children:l?"Creazione...":"Crea Utente"})]})]})}))]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(Ie,{children:c.jsx(Ve,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Lr,{className:"h-5 w-5 text-cambridge-newStyle"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold",children:e.length}),c.jsx("p",{className:"text-sm text-gray-600",children:"Utenti Totali"})]})]})})}),c.jsx(Ie,{children:c.jsx(Ve,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ec,{className:"h-5 w-5 text-yellow-600"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold",children:e.filter(_=>_.role==="admin").length}),c.jsx("p",{className:"text-sm text-gray-600",children:"Amministratori"})]})]})})}),c.jsx(Ie,{children:c.jsx(Ve,{className:"pt-6",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Ca,{className:"h-5 w-5 text-green-600"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold",children:e.filter(_=>_.lastLoginAt).length}),c.jsx("p",{className:"text-sm text-gray-600",children:"Utenti Attivi"})]})]})})})]}),c.jsxs(Ie,{className:"overflow-hidden",children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center",children:[c.jsx(Lr,{className:"h-5 w-5 mr-2"}),"Lista Utenti (",e.length,")"]})}),c.jsx(Ve,{children:e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Lr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun utente trovato"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Inizia creando il primo utente del sistema."})]}):c.jsx("div",{className:"space-y-4",children:e.map(_=>c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 border rounded-lg hover:bg-gray-50 gap-3 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[c.jsx("div",{className:"w-10 h-10 bg-cambridge-newStyle/10 rounded-full flex items-center justify-center flex-shrink-0",children:A(_.role)}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[c.jsx("h3",{className:"font-medium truncate",children:_.displayName||_.username}),c.jsx(ne,{variant:S(_.role),className:"flex-shrink-0",children:_.role})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 text-sm text-gray-600 space-y-1 sm:space-y-0",children:[c.jsxs("span",{className:"flex items-center min-w-0",children:[c.jsx(mc,{className:"h-3 w-3 mr-1 flex-shrink-0"}),c.jsx("span",{className:"truncate",children:_.email})]}),c.jsxs("span",{className:"flex-shrink-0",children:["@",_.username]})]}),c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Ultimo accesso: ",w(_.lastLoginAt)]})]})]}),c.jsxs("div",{className:"flex items-center justify-end space-x-2 flex-shrink-0",children:[c.jsxs(Q,{variant:"outline",size:"sm",className:"text-xs px-2 py-1 h-8",children:[c.jsx(zo,{className:"h-3 w-3 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Modifica"})]}),_.username!==t.username&&c.jsxs(Q,{variant:"outline",size:"sm",className:"text-red-600 border-red-200 hover:bg-red-50 text-xs px-2 py-1 h-8",children:[c.jsx(Mr,{className:"h-3 w-3 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Elimina"})]})]})]},_.id))})})]})]})}function Qke(t){var e,r,n,i,a,o;return{id:t.id,jobId:t.jobId||null,jobType:t.jobType||null,startTime:((r=(e=t.startTime)==null?void 0:e.toDate)==null?void 0:r.call(e))||null,endTime:((i=(n=t.endTime)==null?void 0:n.toDate)==null?void 0:i.call(n))||null,duration:t.duration||null,durationFormatted:t.durationFormatted||null,success:t.success||null,stats:t.stats||null,email:t.email||null,changes:t.changes||null,errors:t.errors||null,environment:t.environment||null,version:t.version||null,createdAt:((o=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:o.call(a))||null,date:t.date||null,hour:t.hour||null,dayOfWeek:t.dayOfWeek||null,month:t.month||null,year:t.year||null,hasErrors:t.hasErrors||null,hasChanges:t.hasChanges||null,emailSent:t.emailSent||null,performance:t.performance||null}}function pD(){const[t,e]=x.useState([]),[r,n]=x.useState(!0),[i,a]=x.useState(null),[o,s]=x.useState({dateFrom:"",dateTo:"",environment:"",status:"",emailStatus:""}),[l,u]=x.useState(!1),[d,f]=x.useState(null),[h,p]=x.useState(null),[m,g]=x.useState(1),[v]=x.useState(10),[y,b]=x.useState(!0);x.useEffect(()=>{w()},[]);const w=()=>G(this,null,function*(){if(!wt){a("Firebase non configurato"),n(!1);return}try{n(!0);const I=Is(wt,"price_monitoring_reports");let k=Aa(I,gu("createdAt","desc"),RV(100));o.environment&&(k=Aa(k,Tn("environment","==",o.environment))),o.status==="success"?k=Aa(k,Tn("success","==",!0)):o.status==="error"&&(k=Aa(k,Tn("hasErrors","==",!0)));const L=(yield Uc(k)).docs.map(V=>{const W=C({id:V.id},V.data());return Qke(W)});e(L),a(null)}catch(I){console.error("Errore nel caricamento reports:",I),a("Errore nel caricamento dei dati")}finally{n(!1)}}),S=()=>G(this,null,function*(){u(!0),yield w(),setTimeout(()=>u(!1),1e3)}),A=x.useMemo(()=>{if(!t.length)return null;const I=t.length,k=t.filter(de=>de.success===!0).length,R=t.filter(de=>de.hasErrors===!0).length,L=t.filter(de=>de.hasChanges===!0).length,V=t.filter(de=>de.emailSent===!0).length,W=t.reduce((de,se)=>{var Ee;return de+(((Ee=se.stats)==null?void 0:Ee.processedItems)||0)},0),q=t.reduce((de,se)=>{var Ee;return de+(((Ee=se.stats)==null?void 0:Ee.priceChangedItems)||0)},0),H=t.reduce((de,se)=>{var Ee;return de+(((Ee=se.stats)==null?void 0:Ee.deepseekCallsCount)||0)},0),J=t.reduce((de,se)=>de+(se.duration||0),0)/t.length/6e4;return{totalReports:I,successfulReports:k,reportsWithErrors:R,reportsWithChanges:L,emailsSent:V,totalItems:W,totalChanges:q,totalDeepseekCalls:H,avgProcessingTime:J,successRate:I>0?k/I*100:0,emailDeliveryRate:I>0?V/I*100:0}},[t]),_=x.useMemo(()=>{if(!t.length)return{performanceData:[],errorData:[],systemMetricsData:[]};const I=t.reduce((W,q)=>{var J,de,se,Ee;const H=q.date||"Unknown";return W[H]||(W[H]={reports:[],errors:0,changes:0,emails:0,deepseekCalls:0,databaseWrites:0,processedItems:0}),W[H].reports.push(q),q.hasErrors&&W[H].errors++,q.hasChanges&&(W[H].changes+=((J=q.stats)==null?void 0:J.priceChangedItems)||0),q.emailSent&&W[H].emails++,W[H].deepseekCalls+=((de=q.stats)==null?void 0:de.deepseekCallsCount)||0,W[H].databaseWrites+=((se=q.stats)==null?void 0:se.databaseWritesCount)||0,W[H].processedItems+=((Ee=q.stats)==null?void 0:Ee.processedItems)||0,W},{}),k=Object.entries(I).sort(([W],[q])=>W.localeCompare(q)).slice(-7).map(([W,q])=>({date:W.split("-").slice(1).join("/"),deepseekCalls:q.deepseekCalls,databaseWrites:q.databaseWrites,processedItems:q.processedItems})),R=t.reduce((W,q)=>(q.errors&&q.errors.length>0&&q.errors.forEach(H=>{const J=H.type||"Unknown";W[J]=(W[J]||0)+1}),W),{}),L=Object.entries(R).map(([W,q])=>({name:W,value:q}));return{performanceData:k,errorData:L,systemMetricsData:k}},[t]),E=x.useMemo(()=>{const I=(m-1)*v,k=I+v;return t.slice(I,k)},[t,m,v]),N=Math.ceil(t.length/v),T=()=>{const I=[["Job ID","Timestamp","Durata","Items Totali","Items Processati","Cambiamenti","Status","Email Sent","Ambiente"].join(","),...t.map(V=>{var W,q,H,J;return[V.jobId||"",((W=V.startTime)==null?void 0:W.toISOString())||"",V.durationFormatted||"",((q=V.stats)==null?void 0:q.totalItems)||0,((H=V.stats)==null?void 0:H.processedItems)||0,((J=V.stats)==null?void 0:J.priceChangedItems)||0,V.success?"Successo":"Errore",V.emailSent?"S":"No",V.environment||""].join(",")})].join("\n"),k=new Blob([I],{type:"text/csv"}),R=window.URL.createObjectURL(k),L=document.createElement("a");L.href=R,L.download="price_monitoring_reports_".concat(new Date().toISOString().split("T")[0],".csv"),L.click(),window.URL.revokeObjectURL(R)},O=({status:I,hasErrors:k})=>I===!1||k===!0?c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",children:[c.jsx(p0,{className:"w-3 h-3"}),"Errore"]}):I===!0?c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:[c.jsx(No,{className:"w-3 h-3"}),"Successo"]}):c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400",children:[c.jsx(Xr,{className:"w-3 h-3"}),"In corso"]}),j=({sent:I,error:k})=>I===!0?c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:[c.jsx(mc,{className:"w-3 h-3"}),"Inviata"]}):k?c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",children:[c.jsx(p0,{className:"w-3 h-3"}),"Fallita"]}):c.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400",children:[c.jsx(Xr,{className:"w-3 h-3"}),"Pending"]}),P=({job:I,onClose:k})=>{var R,L,V,W,q,H,J,de,se,Ee,Ue;return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-card rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsx("div",{className:"p-6 border-b",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h2",{className:"text-xl font-semibold",children:["Dettagli Job: ",I.jobId]}),c.jsx("button",{onClick:k,className:"p-2 hover:bg-muted rounded-lg",children:c.jsx(oo,{className:"w-5 h-5"})})]})}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx(sh,{className:"w-5 h-5"}),"Informazioni Generali"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Job ID:"}),c.jsx("span",{className:"font-mono text-sm",children:I.jobId})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Tipo:"}),c.jsx("span",{children:I.jobType})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Inizio:"}),c.jsx("span",{children:(R=I.startTime)==null?void 0:R.toLocaleString("it-IT")})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Fine:"}),c.jsx("span",{children:(L=I.endTime)==null?void 0:L.toLocaleString("it-IT")})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Durata:"}),c.jsx("span",{children:I.durationFormatted})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Ambiente:"}),c.jsx("span",{children:I.environment})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Versione:"}),c.jsx("span",{children:I.version})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx(nH,{className:"w-5 h-5"}),"Statistiche Elaborazione"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Items Totali:"}),c.jsx("span",{className:"font-semibold",children:((V=I.stats)==null?void 0:V.totalItems)||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Items Processati:"}),c.jsx("span",{className:"font-semibold",children:((W=I.stats)==null?void 0:W.processedItems)||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Items Completati:"}),c.jsx("span",{className:"font-semibold",children:((q=I.stats)==null?void 0:q.completedItems)||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Items Invariati:"}),c.jsx("span",{className:"font-semibold",children:((H=I.stats)==null?void 0:H.unchangedItems)||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Cambi Prezzo:"}),c.jsx("span",{className:"font-semibold text-orange-600",children:((J=I.stats)==null?void 0:J.priceChangedItems)||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Deepseek Calls:"}),c.jsx("span",{className:"font-semibold text-purple-600",children:((de=I.stats)==null?void 0:de.deepseekCallsCount)||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"DB Writes:"}),c.jsx("span",{className:"font-semibold",children:((se=I.stats)==null?void 0:se.databaseWritesCount)||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Errori:"}),c.jsx("span",{className:"font-semibold text-red-600",children:((Ee=I.stats)==null?void 0:Ee.errorsCount)||0})]})]})]})]}),I.email&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx(mc,{className:"w-5 h-5"}),"Dettagli Email"]}),c.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 space-y-3",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Status:"}),c.jsx(j,{sent:I.email.sent,error:I.email.error})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Destinatari:"}),c.jsx("span",{children:I.email.recipientCount||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Message ID:"}),c.jsx("span",{className:"font-mono text-xs",children:I.email.messageId||"N/A"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-muted-foreground",children:"Cambiamenti Notificati:"}),c.jsx("span",{children:((Ue=I.email.changesNotified)==null?void 0:Ue.total)||0})]}),I.email.error&&c.jsxs("div",{className:"mt-2",children:[c.jsx("span",{className:"text-muted-foreground",children:"Errore:"}),c.jsx("p",{className:"text-red-600 text-sm mt-1",children:I.email.error})]})]})]}),I.changes&&I.changes.items&&I.changes.items.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx(Xi,{className:"w-5 h-5"}),"Items Modificati (",I.changes.count,")"]}),c.jsx("div",{className:"max-h-60 overflow-y-auto",children:c.jsx("div",{className:"space-y-2",children:I.changes.items.map((ge,Y)=>c.jsxs("div",{className:"bg-muted/30 rounded-lg p-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"font-medium",children:ge.itemName||"Item ".concat(Y+1)}),ge.priceChanged&&c.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Prezzo Cambiato"})]}),c.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsxs("div",{children:["ID: ",ge.itemId]}),c.jsxs("div",{children:["Categoria: ",ge.category]}),ge.oldPrice&&ge.newPrice&&c.jsxs("div",{children:["Prezzo: ",ge.oldPrice,"  ",ge.newPrice]}),c.jsxs("div",{children:["Timestamp: ",new Date(ge.timestamp).toLocaleString("it-IT")]})]})]},Y))})})]}),I.errors&&I.errors.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2 text-red-600",children:[c.jsx(Lp,{className:"w-5 h-5"}),"Errori (",I.errors.length,")"]}),c.jsx("div",{className:"space-y-2",children:I.errors.map((ge,Y)=>c.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("span",{className:"font-medium text-red-800 dark:text-red-300",children:ge.type||"Errore Generico"}),c.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:new Date(ge.timestamp).toLocaleString("it-IT")})]}),c.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:ge.message}),ge.itemId&&c.jsxs("p",{className:"text-xs text-red-600 dark:text-red-500 mt-1",children:["Item: ",ge.itemName||ge.itemId]})]},Y))})]})]})]})})},D=({job:I,onClose:k})=>{var R;return c.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:c.jsxs("div",{className:"bg-card rounded-lg max-w-md w-full",children:[c.jsx("div",{className:"p-6 border-b",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx(Lr,{className:"w-5 h-5"}),"Destinatari Email"]}),c.jsx("button",{onClick:k,className:"p-2 hover:bg-muted rounded-lg",children:c.jsx(oo,{className:"w-5 h-5"})})]})}),c.jsx("div",{className:"p-6",children:(R=I.email)!=null&&R.recipients&&I.email.recipients.length>0?c.jsx("div",{className:"space-y-3",children:I.email.recipients.map((L,V)=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg",children:[c.jsx(mc,{className:"w-4 h-4 text-blue-600"}),c.jsx("span",{className:"text-sm",children:L})]},V))}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx(mc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),c.jsx("p",{className:"text-muted-foreground",children:"Nessun destinatario configurato"})]})})]})})},F=({icon:I,title:k,description:R})=>c.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[c.jsx(I,{className:"w-12 h-12 text-muted-foreground mb-4"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:k}),c.jsx("p",{className:"text-sm text-muted-foreground",children:R})]});return r?c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:c.jsxs("div",{className:"text-center space-y-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),c.jsx("p",{className:"text-muted-foreground",children:"Caricamento dashboard..."})]})}):i?c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:c.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[c.jsx(p0,{className:"w-16 h-16 text-destructive mx-auto"}),c.jsx("h2",{className:"text-2xl font-semibold",children:"Errore di caricamento"}),c.jsx("p",{className:"text-muted-foreground",children:i}),c.jsx("button",{onClick:w,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"Riprova"})]})}):c.jsxs("div",{className:"bg-background",children:[c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"bg-card border rounded-lg sticky top-0 z-30",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer border-b",onClick:()=>b(!y),children:[c.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx(bl,{className:"w-5 h-5"}),"Filtri e Controlli"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:I=>{I.stopPropagation(),s({dateFrom:"",dateTo:"",environment:"",status:"",emailStatus:""})},className:"text-sm text-muted-foreground hover:text-foreground transition-colors px-2 py-1 rounded",children:"Reset Filtri"}),c.jsxs("button",{onClick:I=>{I.stopPropagation(),S()},disabled:l,className:"flex items-center gap-2 px-3 py-1 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50",children:[c.jsx(M0,{className:"w-4 h-4 ".concat(l?"animate-spin":"")}),c.jsx("span",{className:"text-sm",children:"Aggiorna"})]}),c.jsx("div",{className:"ml-2 p-1",children:y?c.jsx(Bo,{className:"w-5 h-5 text-muted-foreground"}):c.jsx(Na,{className:"w-5 h-5 text-muted-foreground"})})]})]}),y&&c.jsx("div",{className:"p-6 pt-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Data Inizio"}),c.jsx("input",{type:"date",value:o.dateFrom,onChange:I=>s(k=>M(C({},k),{dateFrom:I.target.value})),className:"w-full px-3 py-2 border rounded-md bg-background text-foreground"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Data Fine"}),c.jsx("input",{type:"date",value:o.dateTo,onChange:I=>s(k=>M(C({},k),{dateTo:I.target.value})),className:"w-full px-3 py-2 border rounded-md bg-background text-foreground"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Ambiente"}),c.jsxs("select",{value:o.environment,onChange:I=>s(k=>M(C({},k),{environment:I.target.value})),className:"w-full px-3 py-2 border rounded-md bg-background text-foreground",children:[c.jsx("option",{value:"",children:"Tutti"}),c.jsx("option",{value:"production",children:"Production"}),c.jsx("option",{value:"staging",children:"Staging"}),c.jsx("option",{value:"development",children:"Development"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Stato"}),c.jsxs("select",{value:o.status,onChange:I=>s(k=>M(C({},k),{status:I.target.value})),className:"w-full px-3 py-2 border rounded-md bg-background text-foreground",children:[c.jsx("option",{value:"",children:"Tutti"}),c.jsx("option",{value:"success",children:"Solo Successi"}),c.jsx("option",{value:"error",children:"Solo Errori"}),c.jsx("option",{value:"changes",children:"Con Cambiamenti"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Email"}),c.jsxs("select",{value:o.emailStatus,onChange:I=>s(k=>M(C({},k),{emailStatus:I.target.value})),className:"w-full px-3 py-2 border rounded-md bg-background text-foreground",children:[c.jsx("option",{value:"",children:"Tutte"}),c.jsx("option",{value:"sent",children:"Inviate"}),c.jsx("option",{value:"failed",children:"Fallite"}),c.jsx("option",{value:"pending",children:"In Attesa"})]})]})]})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[c.jsxs("div",{className:"bg-card border rounded-lg p-6 hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:c.jsx(sh,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),c.jsx("div",{className:"space-y-1",children:A?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-2xl font-bold",children:A.totalReports.toLocaleString()}),c.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Report Totali"}),c.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"+12.5% dal mese scorso"})]}):c.jsx(F,{icon:sh,title:"Nessun Report",description:"Non ci sono report disponibili"})})]}),c.jsxs("div",{className:"bg-card border rounded-lg p-6 hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:c.jsx(No,{className:"w-5 h-5 text-green-600 dark:text-green-400"})})}),c.jsx("div",{className:"space-y-1",children:A?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"text-2xl font-bold",children:[A.successRate.toFixed(1),"%"]}),c.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Tasso Successo"}),c.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"+2.1% dalla scorsa settimana"})]}):c.jsx(F,{icon:No,title:"Nessun Dato",description:"Statistiche non disponibili"})})]}),c.jsxs("div",{className:"bg-card border rounded-lg p-6 hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("div",{className:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center",children:c.jsx(Xi,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"})})}),c.jsx("div",{className:"space-y-1",children:A?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-2xl font-bold",children:A.totalChanges.toLocaleString()}),c.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Cambi Prezzo"}),c.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"+18.3% dalla scorsa settimana"})]}):c.jsx(F,{icon:Xi,title:"Nessun Cambio",description:"Nessun cambio prezzo rilevato"})})]}),c.jsxs("div",{className:"bg-card border rounded-lg p-6 hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:c.jsx(mc,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})}),c.jsx("div",{className:"space-y-1",children:A?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"text-2xl font-bold",children:[A.emailDeliveryRate.toFixed(1),"%"]}),c.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Email Inviate"}),c.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[A.emailsSent,"/",A.totalReports," consegnate"]})]}):c.jsx(F,{icon:mc,title:"Nessuna Email",description:"Nessuna email inviata"})})]}),c.jsxs("div",{className:"bg-card border rounded-lg p-6 hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center",children:c.jsx(Xr,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})}),c.jsx("div",{className:"space-y-1",children:A?c.jsxs(c.Fragment,{children:[c.jsxs("p",{className:"text-2xl font-bold",children:[A.avgProcessingTime.toFixed(1),"m"]}),c.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Tempo Medio"}),c.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"-3.2% dalla scorsa settimana"})]}):c.jsx(F,{icon:Xr,title:"Nessun Dato",description:"Tempo di elaborazione N/A"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Metriche Sistema"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Database writes, Deepseek calls e items processati"})]}),c.jsx("div",{className:"h-80",children:_.performanceData.length>0?c.jsx(Kw,{width:"100%",height:"100%",children:c.jsxs(nDe,{data:_.performanceData,children:[c.jsx(NC,{strokeDasharray:"3 3",className:"opacity-30"}),c.jsx(pf,{dataKey:"date",className:"text-xs",tick:{fill:"hsl(var(--foreground))"}}),c.jsx(mf,{className:"text-xs",tick:{fill:"hsl(var(--foreground))"}}),c.jsx(Gi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px",color:"hsl(var(--foreground))"}}),c.jsx(Xc,{}),c.jsx(Lo,{dataKey:"deepseekCalls",fill:"#000000",name:"Deepseek Calls",radius:[2,2,0,0]}),c.jsx(Lo,{dataKey:"databaseWrites",fill:"#f97316",name:"Database Writes",radius:[2,2,0,0]}),c.jsx(Lo,{dataKey:"processedItems",fill:"#eab308",name:"Items Processati",radius:[2,2,0,0]})]})}):c.jsx(F,{icon:tu,title:"Nessun Dato Sistema",description:"Non ci sono dati sufficienti per mostrare le metriche sistema"})})]}),c.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-1",children:"Distribuzione Errori"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Tipologie di errori riscontrati"})]}),c.jsx("div",{className:"h-80",children:_.errorData.length>0?c.jsx(Kw,{width:"100%",height:"100%",children:c.jsxs(iDe,{children:[c.jsx(Jo,{data:_.errorData,cx:"50%",cy:"50%",outerRadius:80,fill:"hsl(var(--primary))",dataKey:"value",label:({name:I,percent:k})=>"".concat(I," ").concat((k*100).toFixed(0),"%"),children:_.errorData.map((I,k)=>c.jsx(qy,{fill:["#ef4444","#f59e0b","#8b5cf6","#06b6d4","#6b7280"][k%5]},"cell-".concat(k)))}),c.jsx(Gi,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}})]})}):c.jsx(F,{icon:No,title:"Nessun Errore",description:"Non ci sono errori da mostrare - ottimo lavoro!"})})]})]}),c.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Report Recenti"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-3 py-1 text-sm border rounded-md hover:bg-muted transition-colors",children:[c.jsx(GW,{className:"w-4 h-4"}),"Export CSV"]}),c.jsxs("button",{onClick:()=>g(1),className:"flex items-center gap-2 px-3 py-1 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[c.jsx(jh,{className:"w-4 h-4"}),"Visualizza Tutti"]})]})]})}),t.length>0?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{className:"bg-muted/50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Job ID"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Timestamp"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Durata"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Processati"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Cambiamenti"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Ambiente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Azioni"})]})}),c.jsx("tbody",{className:"divide-y divide-border",children:E.map(I=>{var k,R,L,V,W,q,H,J,de,se;return c.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("span",{className:"font-mono text-sm text-primary",children:[((k=I.jobId)==null?void 0:k.substring(0,12))||"N/A","..."]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:I.startTime?new Intl.DateTimeFormat("it-IT",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}).format(I.startTime):"N/A"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:I.durationFormatted||"N/A"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{children:[((R=I.stats)==null?void 0:R.processedItems)||0," / ",((L=I.stats)==null?void 0:L.totalItems)||0]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["DS: ",((V=I.stats)==null?void 0:V.deepseekCallsCount)||0," | DB: ",((W=I.stats)==null?void 0:W.databaseWritesCount)||0]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:c.jsx("div",{className:"space-y-1",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-medium",children:((q=I.stats)==null?void 0:q.priceChangedItems)||0}),(((H=I.stats)==null?void 0:H.priceChangedItems)||0)>0&&c.jsx(Xi,{className:"w-4 h-4 text-orange-500"})]})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(O,{status:I.success,hasErrors:I.hasErrors})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx(j,{sent:((J=I.email)==null?void 0:J.sent)||!1,error:(de=I.email)==null?void 0:de.error}),((se=I.email)==null?void 0:se.recipients)&&I.email.recipients.length>0&&c.jsxs("button",{onClick:()=>p(I),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline cursor-pointer",children:[I.email.recipients.length," destinatari"]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-foreground",children:c.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-muted text-muted-foreground",children:I.environment||"N/A"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("button",{onClick:()=>f(I),className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Dettagli"})})]},I.id)})})]})}),c.jsx("div",{className:"px-6 py-4 border-t bg-muted/20",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",(m-1)*v+1,"-",Math.min(m*v,t.length)," di ",t.length," report"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>g(I=>Math.max(1,I-1)),disabled:m===1,className:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted transition-colors",children:" Precedente"}),Array.from({length:Math.min(5,N)},(I,k)=>{const R=k+1,L=R===m;return c.jsx("button",{onClick:()=>g(R),className:"px-3 py-1 text-sm rounded-md transition-colors ".concat(L?"bg-primary text-primary-foreground":"border hover:bg-muted"),children:R},R)}),c.jsx("button",{onClick:()=>g(I=>Math.min(N,I+1)),disabled:m===N,className:"px-3 py-1 text-sm border rounded-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-muted transition-colors",children:"Successivo "})]})]})})]}):c.jsx("div",{className:"p-12",children:c.jsx(F,{icon:tu,title:"Nessun Report Disponibile",description:"Non ci sono report da visualizzare. I report appariranno qui non appena saranno disponibili."})})]})]}),d&&c.jsx(P,{job:d,onClose:()=>f(null)}),h&&c.jsx(D,{job:h,onClose:()=>p(null)})]})}function Jke(){const[t,e]=x.useState([]),[r,n]=x.useState([]),[i,a]=x.useState(null),[o,s]=x.useState(!0),[l,u]=x.useState(!1),[d,f]=x.useState({title:"Test Notifica Famiglia",body:"Questa  una notifica di test inviata dall'amministratore"}),[h,p]=x.useState([]),{data:m}=Jt("users"),{toast:g}=Nr(),v=()=>G(this,null,function*(){if(wt)try{s(!0);const E=Is(wt,"fcm-tokens"),T=(yield Uc(E)).docs.map(O=>Fa.fromFirestore(C({id:O.id},O.data())));e(T),y(T)}catch(E){g({title:"Errore caricamento",description:"Impossibile caricare i token FCM",variant:"destructive"})}finally{s(!1)}}),y=E=>{const N=E.reduce((j,P)=>(j[P.username]||(j[P.username]=[]),j[P.username].push(P),j),{}),T=Object.entries(N).map(([j,P])=>{const D=m.find(R=>R.username===j),F=P.filter(R=>R.isValid()).length,I=P.filter(R=>!R.isValid()).length,k=P.reduce((R,L)=>!R||L.lastUsedAt>R?L.lastUsedAt:R,void 0);return{username:j,displayName:(D==null?void 0:D.displayName)||j,tokens:P,activeTokens:F,expiredTokens:I,lastActivity:k}}),O={totalUsers:m.length,usersWithNotifications:T.length,totalTokens:E.length,activeTokens:E.filter(j=>j.isValid()).length,expiredTokens:E.filter(j=>!j.isValid()).length,deviceTypes:{mobile:E.filter(j=>j.deviceType==="mobile").length,desktop:E.filter(j=>j.deviceType==="desktop").length,tablet:E.filter(j=>j.deviceType==="tablet").length,unknown:E.filter(j=>j.deviceType==="unknown").length}};n(T),a(O)},b=()=>G(this,null,function*(){if(wt)try{u(!0);let E=0;for(const N of t)N.isValid()||(yield vu(Sa(wt,"fcm-tokens",N.id)),E++);g({title:"Pulizia completata",description:"".concat(E," token scaduti rimossi")}),yield v()}catch(E){g({title:"Errore pulizia",description:"Impossibile rimuovere i token scaduti",variant:"destructive"})}finally{u(!1)}}),w=E=>G(this,null,function*(){if(wt)try{yield Mu(Sa(wt,"fcm-tokens",E),{isActive:!1,updatedAt:new Date}),g({title:"Token disabilitato",description:"Il token  stato disattivato con successo"}),yield v()}catch(N){g({title:"Errore disabilitazione",description:"Impossibile disabilitare il token",variant:"destructive"})}}),S=()=>G(this,null,function*(){g({title:"Notifica inviata!",description:"Test inviato a ".concat(h.length>0?h.length+" utenti":"tutti gli utenti")}),p([])});x.useEffect(()=>{v()},[m]);const A=E=>{switch(E){case"mobile":return tN;case"desktop":return Kk;case"tablet":return uH;default:return rN}},_=E=>new Intl.DateTimeFormat("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(E);return o?c.jsx("div",{className:"p-6 space-y-6",children:c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx(M0,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}):c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[c.jsx(In,{className:"h-6 w-6"}),"Dashboard Notifiche FCM"]}),c.jsx("p",{className:"text-muted-foreground",children:"Gestione centralizzata delle notifiche push della famiglia"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Q,{onClick:v,variant:"outline",disabled:l,className:"flex items-center gap-2",children:[c.jsx(M0,{className:"h-4 w-4 ".concat(l?"animate-spin":"")}),"Aggiorna"]}),c.jsxs(Q,{onClick:b,variant:"outline",disabled:l,className:"flex items-center gap-2",children:[c.jsx(Mr,{className:"h-4 w-4"}),"Pulisci Scaduti"]})]})]}),i&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[c.jsx(Ie,{children:c.jsxs(Ve,{className:"pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold",children:i.usersWithNotifications}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Utenti con Notifiche"})]}),c.jsx(Lr,{className:"h-8 w-8 text-blue-500"})]}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-xs text-muted-foreground",children:["su ",i.totalUsers," utenti totali"]})})]})}),c.jsx(Ie,{children:c.jsxs(Ve,{className:"pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold",children:i.activeTokens}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Token Attivi"})]}),c.jsx(No,{className:"h-8 w-8 text-green-500"})]}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.expiredTokens," scaduti"]})})]})}),c.jsx(Ie,{children:c.jsxs(Ve,{className:"pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold",children:i.deviceTypes.mobile}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Dispositivi Mobile"})]}),c.jsx(tN,{className:"h-8 w-8 text-purple-500"})]}),c.jsx("div",{className:"mt-2",children:c.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.deviceTypes.desktop," desktop"]})})]})}),c.jsx(Ie,{children:c.jsxs(Ve,{className:"pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold",children:i.totalTokens}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Token Totali"})]}),c.jsx(In,{className:"h-8 w-8 text-orange-500"})]}),c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsxs(ne,{variant:"secondary",className:"text-xs",children:[i.deviceTypes.tablet," tablet"]}),c.jsxs(ne,{variant:"secondary",className:"text-xs",children:[i.deviceTypes.unknown," altri"]})]})})]})})]}),c.jsxs(Ie,{children:[c.jsxs($r,{className:"flex flex-row items-center justify-between",children:[c.jsxs(Qn,{className:"flex items-center gap-2",children:[c.jsx(Lr,{className:"h-5 w-5"}),"Token FCM per Utente"]}),c.jsxs(Yt,{children:[c.jsx(BS,{asChild:!0,children:c.jsxs(Q,{className:"flex items-center gap-2",children:[c.jsx(Mb,{className:"h-4 w-4"}),"Test Notifica"]})}),c.jsxs(Ht,{children:[c.jsx(Zt,{children:c.jsx(Qt,{children:"Invia Notifica di Test"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Titolo"}),c.jsx(At,{value:d.title,onChange:E=>f(N=>M(C({},N),{title:E.target.value}))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Messaggio"}),c.jsx(qs,{value:d.body,onChange:E=>f(N=>M(C({},N),{body:E.target.value}))})]}),c.jsx("div",{className:"flex gap-2",children:c.jsxs(Q,{onClick:S,className:"flex-1",children:[c.jsx(Mb,{className:"h-4 w-4 mr-2"}),"Invia a Tutti"]})})]})]})]})]}),c.jsx(Ve,{children:r.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Eh,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nessun Token FCM"}),c.jsx("p",{className:"text-muted-foreground",children:"Nessun utente ha ancora abilitato le notifiche push."})]}):c.jsx("div",{className:"space-y-4",children:r.map(E=>c.jsxs("div",{className:"border rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(Lr,{className:"h-5 w-5 text-primary"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium",children:E.displayName}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",E.username]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(ne,{variant:E.activeTokens>0?"default":"secondary",children:[E.activeTokens," attivi"]}),E.expiredTokens>0&&c.jsxs(ne,{variant:"destructive",children:[E.expiredTokens," scaduti"]})]})]}),c.jsx("div",{className:"grid gap-2",children:E.tokens.map(N=>{const T=A(N.deviceType);return c.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-md",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(T,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium capitalize",children:[N.deviceType," Device"]}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ultimo utilizzo: ",_(N.lastUsedAt)]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ne,{variant:N.isValid()?"default":"destructive",children:N.isValid()?c.jsxs(c.Fragment,{children:[c.jsx(rN,{className:"h-3 w-3 mr-1"})," Attivo"]}):c.jsxs(c.Fragment,{children:[c.jsx(pH,{className:"h-3 w-3 mr-1"})," Inattivo"]})}),N.isActive&&c.jsx(Q,{size:"sm",variant:"outline",onClick:()=>w(N.id),className:"h-7 px-2",children:c.jsx(Mr,{className:"h-3 w-3"})})]})]},N.id)})}),E.lastActivity&&c.jsxs("div",{className:"mt-2 text-xs text-muted-foreground flex items-center gap-1",children:[c.jsx(Xr,{className:"h-3 w-3"}),"Ultima attivit: ",_(E.lastActivity)]})]},E.username))})})]})]})}const eMe=()=>c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Lu,{className:"w-5 h-5"}),"Impostazioni Sistema"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium",children:"Configurazione Monitoraggio"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[c.jsx("span",{className:"text-sm",children:"Frequenza check prezzi"}),c.jsx("span",{className:"text-sm font-medium",children:"Ogni 8 ore"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[c.jsx("span",{className:"text-sm",children:"Timeout richieste"}),c.jsx("span",{className:"text-sm font-medium",children:"30 secondi"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[c.jsx("span",{className:"text-sm",children:"Retry tentativi"}),c.jsx("span",{className:"text-sm font-medium",children:"3 volte"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium",children:"Notifiche Email"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[c.jsx("span",{className:"text-sm",children:"Abilitate"}),c.jsx("span",{className:"text-sm font-medium",children:"S"})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[c.jsx("span",{className:"text-sm",children:"Destinatario admin"}),c.jsx("span",{className:"text-sm font-medium",children:"admin@famiglia.it"})]})]})]})]})]}),c.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Statistiche Sistema"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center p-4 border rounded-md",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"156"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Prodotti monitorati"})]}),c.jsxs("div",{className:"text-center p-4 border rounded-md",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:"23"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Sconti trovati"})]}),c.jsxs("div",{className:"text-center p-4 border rounded-md",children:[c.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"847"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Risparmio totale"})]}),c.jsxs("div",{className:"text-center p-4 border rounded-md",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"12h"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Ultimo check"})]})]})]})]}),tMe=()=>c.jsx("div",{className:"p-6 space-y-6",children:c.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Xi,{className:"w-5 h-5"}),"Analytics Avanzate"]}),c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium mb-4",children:"Performance Sistema"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"CPU utilizzata"}),c.jsx("span",{className:"font-medium",children:"45%"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Memoria utilizzata"}),c.jsx("span",{className:"font-medium",children:"2.3 GB"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Backup ultimo"}),c.jsx("span",{className:"font-medium",children:"2h fa"})]})]})]})}),c.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-yellow-900 dark:text-yellow-300 mb-2",children:"Raccomandazioni"}),c.jsxs("ul",{className:"text-sm text-yellow-800 dark:text-yellow-400 space-y-1",children:[c.jsx("li",{children:" Considera l'ottimizzazione delle query per migliorare i tempi di risposta"}),c.jsx("li",{children:" Implementa caching per ridurre il carico su Firestore"}),c.jsx("li",{children:" Monitora l'utilizzo delle API calls per evitare sovraccarichi"})]})]})]})});function rMe(){const{user:t}=Bt(),[e,r]=x.useState("dashboard");if(!t||t.role!=="admin")return c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:c.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[c.jsx(Ec,{className:"w-16 h-16 text-destructive mx-auto"}),c.jsx("h2",{className:"text-2xl font-semibold",children:"Accesso Negato"}),c.jsx("p",{className:"text-muted-foreground",children:"Non hai i privilegi necessari per accedere al pannello amministratore."})]})});const n=[{id:"dashboard",label:"Dashboard",icon:Gk,description:"Monitoraggio prezzi e performance sistema",component:pD},{id:"users",label:"Gestione Utenti",icon:Lr,description:"Amministrazione utenti e permessi",component:_z},{id:"notifications",label:"Notifiche FCM",icon:In,description:"Gestione notifiche push e token FCM",component:Jke},{id:"system",label:"Impostazioni",icon:Lu,description:"Configurazione sistema e parametri",component:eMe},{id:"analytics",label:"Analytics",icon:Xi,description:"Statistiche avanzate e performance",component:tMe}],i=n.find(o=>o.id===e),a=(i==null?void 0:i.component)||pD;return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx("header",{className:"bg-card border-b sticky top-0 z-40",children:c.jsx("div",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-3",children:[c.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:c.jsx(Ec,{className:"w-5 h-5 text-primary-foreground"})}),"Pannello Amministratore"]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:(i==null?void 0:i.description)||"Controllo e gestione del sistema"})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-md bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),c.jsxs("span",{className:"text-xs font-medium",children:["Admin: ",t.displayName||t.username]})]})})]})})}),c.jsx("nav",{className:"bg-card border-b relative z-35",children:c.jsx("div",{className:"px-6",children:c.jsx("div",{className:"flex space-x-8 overflow-x-auto",children:n.map(o=>{const s=o.icon,l=e===o.id;return c.jsxs("button",{onClick:()=>r(o.id),className:"\n                    flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap\n                    transition-colors duration-200\n                    ".concat(l?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-border","\n                  "),children:[c.jsx(s,{className:"w-4 h-4"}),o.label]},o.id)})})})}),c.jsx("main",{className:"relative z-10",children:c.jsx(a,{})})]})}var FC="Progress",BC=100,[nMe,XBe]=ai(FC),[iMe,aMe]=nMe(FC),Cz=x.forwardRef((t,e)=>{const d=t,{__scopeProgress:r,value:n=null,max:i,getValueLabel:a=oMe}=d,o=K(d,["__scopeProgress","value","max","getValueLabel"]);(i||i===0)&&!mD(i)&&console.error(sMe("".concat(i),"Progress"));const s=mD(i)?i:BC;n!==null&&!gD(n,s)&&console.error(cMe("".concat(n),"Progress"));const l=gD(n,s)?n:null,u=_v(l)?a(l,s):void 0;return c.jsx(iMe,{scope:r,value:l,max:s,children:c.jsx(Ge.div,M(C({"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":_v(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":jz(l,s),"data-value":l!=null?l:void 0,"data-max":s},o),{ref:e}))})});Cz.displayName=FC;var Ez="ProgressIndicator",Nz=x.forwardRef((t,e)=>{var o;const a=t,{__scopeProgress:r}=a,n=K(a,["__scopeProgress"]),i=aMe(Ez,r);return c.jsx(Ge.div,M(C({"data-state":jz(i.value,i.max),"data-value":(o=i.value)!=null?o:void 0,"data-max":i.max},n),{ref:e}))});Nz.displayName=Ez;function oMe(t,e){return"".concat(Math.round(t/e*100),"%")}function jz(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function _v(t){return typeof t=="number"}function mD(t){return _v(t)&&!isNaN(t)&&t>0}function gD(t,e){return _v(t)&&!isNaN(t)&&t<=e&&t>=0}function sMe(t,e){return"Invalid prop `max` of value `".concat(t,"` supplied to `").concat(e,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(BC,"`.")}function cMe(t,e){return"Invalid prop `value` of value `".concat(t,"` supplied to `").concat(e,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(BC," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")}var Tz=Cz,lMe=Nz;const tA=x.forwardRef((i,n)=>{var a=i,{className:t,value:e}=a,r=K(a,["className","value"]);return c.jsx(Tz,M(C({ref:n,className:ie("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t)},r),{children:c.jsx(lMe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(e||0),"%)")}})}))});tA.displayName=Tz.displayName;function uMe({className:t}){const{user:e}=Bt(),{toast:r}=Nr(),n=Li(),{data:i,loading:a,add:o,update:s,remove:l}=Jt("shopping_food"),{data:u,add:d}=Jt("food_categories"),{data:f,add:h}=Jt("supermarkets"),{data:p}=Jt("shopping_food",{includeDeleted:!0}),{data:m}=Jt("shopping_food",{onlyDeleted:!0}),{showLoading:g}=dm(a,i),[v,y]=x.useState(null),[b,w]=x.useState(""),[S,A]=x.useState(!1),[_,E]=x.useState(!1),[N,T]=x.useState(!1),[O,j]=x.useState(new Set),[P,D]=x.useState(!1),[F,I]=x.useState(""),[k,R]=x.useState("all"),[L,V]=x.useState("all"),[W,q]=x.useState(!n),[H,J]=x.useState(!1),[de,se]=x.useState(!1),[Ee,Ue]=x.useState(!1),[ge,Y]=x.useState(!1),[te,ae]=x.useState(!1),[X,be]=x.useState({title:"",supermarketId:"none",isPublic:!1}),[ue,Pe]=x.useState({name:"",description:"",color:"#81B29A",icon:""}),[oe,_e]=x.useState({name:"",address:"",color:"#E07A5F"}),De=(i==null?void 0:i.filter(re=>{if(!re)return!1;const je=re.title.toLowerCase().includes(F.toLowerCase())||(re.items||[]).some(Pt=>Pt.text.toLowerCase().includes(F.toLowerCase())),$e=k==="all"||(re.items||[]).some(Pt=>Pt.category===k),Re=L==="all"||re.supermarketId===L;return je&&$e&&Re}))||[],he=x.useMemo(()=>{const re=i.length,je=i.filter(Ot=>Ot.areAllItemsCompleted()).length,$e=i.filter(Ot=>Ot.isPublic).length,Re=i.filter(Ot=>!Ot.isPublic).length,Pt=i.filter(Ot=>Ot.createdBy===(e==null?void 0:e.username)).length;let at=0,ze=0,Qe=0,He=0;i.forEach(Ot=>{var hn;at+=((hn=Ot.items)==null?void 0:hn.length)||0,ze+=(Ot.items||[]).filter(Hn=>Hn.completed).length,Qe+=(Ot.items||[]).filter(Hn=>!Hn.category||Hn.category==="Altro"||Hn.category.trim()==="").length,He+=(Ot.items||[]).filter(Hn=>Hn.assignedAutomatically).length});const ke=new Set,yt=new Set;let Ar=null,rr=null,xi=null,kn=null,ka=0;return i.length>0&&(i.forEach(Ot=>{var Hn,Af;(Ot.items||[]).forEach(kx=>{kx.category&&kx.category!=="Altro"&&ke.add(kx.category)}),Ot.supermarketId&&yt.add(Ot.supermarketId);const hn=Ot.createdAt instanceof Date?Ot.createdAt:new Date(Ot.createdAt);(!Ar||hn>Ar)&&(Ar=hn),(!rr||hn<rr)&&(rr=hn),(!xi||(((Hn=Ot.items)==null?void 0:Hn.length)||0)>(((Af=xi.items)==null?void 0:Af.length)||0))&&(xi=Ot),(!kn||Ot.title.length>kn.title.length)&&(kn=Ot)}),ka=at/re),{totalLists:re,completedLists:je,publicLists:$e,privateLists:Re,myLists:Pt,trashedLists:(m==null?void 0:m.length)||0,totalItems:at,totalItemsCompleted:ze,totalItemsUncategorized:Qe,totalItemsCategorizedAI:He,uniqueCategories:ke.size,uniqueSupermarkets:yt.size,newestListDate:Ar,oldestListDate:rr,mostItemsList:xi,longestTitleList:kn,averageItemsPerList:parseFloat(ka.toFixed(1))}},[i,m,e]),z=(re,je)=>G(this,null,function*(){if(v)try{v.updateItemCategory(re,je),yield s(v.id,v),r({title:"Categoria aggiornata",description:"Categoria modificata con successo"})}catch($e){console.error("Errore cambio categoria:",$e),r({title:"Errore",description:"Impossibile aggiornare la categoria",variant:"destructive"})}}),U=re=>G(this,null,function*(){if(!(re.key!=="Enter"||!b.trim()||!v))try{v.addItem(b.trim()),yield s(v.id,v),w(""),r({title:"Prodotto aggiunto",description:'"'.concat(b.trim(),'" aggiunto alla lista')})}catch(je){console.error("Errore aggiunta item:",je),r({title:"Errore",description:"Impossibile aggiungere il prodotto",variant:"destructive"})}}),Z=re=>G(this,null,function*(){if(!(!v||!e))try{v.toggleItemCompleted(re,e.username),yield s(v.id,v)}catch(je){console.error("Errore toggle item:",je),r({title:"Errore",description:"Impossibile aggiornare l'elemento",variant:"destructive"})}}),ce=re=>G(this,null,function*(){if(v)try{v.removeItem(re),yield s(v.id,v)}catch(je){console.error("Errore rimozione item:",je),r({title:"Errore",description:"Impossibile rimuovere l'elemento",variant:"destructive"})}}),xe=re=>G(this,null,function*(){if(!e||!u||u.length===0)return;const je=re.items.filter($e=>!$e.category||$e.category==="Altro"||$e.category.trim()==="");if(je.length===0){r({title:"Categorizzazione",description:"Tutti i prodotti hanno gi una categoria"});return}T(!0);try{let $e=0;const Re=[];if(p&&p.length>0?je.forEach(ke=>{let yt=!1;p.forEach(Ar=>{yt||Ar.items.forEach(rr=>{yt||rr.text.toLowerCase().trim()===ke.text.toLowerCase().trim()&&rr.category&&rr.category!=="Altro"&&rr.category.trim()!==""&&(ke.category=rr.category,ke.assignedAutomatically=!0,yt=!0,$e++)})}),yt||Re.push(ke)}):Re.push(...je),$e>0&&(re.updatedAt=new Date,yield s(re.id,re),r({title:" ".concat($e," prodotti categorizzati"),description:"Categorie trovate da prodotti esistenti"})),Re.length===0)return;const Pt=Re.map(ke=>({text:ke.text,category:ke.category})),at=u.map(ke=>({name:ke.name,description:ke.description||""})),ze=yield fh.categorizeProducts(Pt,at);let Qe=0;ze.forEach(ke=>{const yt=Re.find(Ar=>Ar.text.toLowerCase().trim()===ke.productText.toLowerCase().trim());yt?u.find(rr=>rr.name===ke.suggestedCategory)?(yt.category=ke.suggestedCategory,yt.assignedAutomatically=!0,Qe++):(console.warn(' Categoria "'.concat(ke.suggestedCategory,'" non trovata per "').concat(ke.productText,'"')),yt.category="Altro",yt.assignedAutomatically=!0):console.warn(' Prodotto "'.concat(ke.productText,'" non trovato nella lista rimanente'))}),Qe>0&&(re.updatedAt=new Date,yield s(re.id,re));const He=$e+Qe;He>0?r({title:" Categorizzazione Completata",description:"".concat(He," prodotti categorizzati (").concat($e," da database, ").concat(Qe," da AI)")}):r({title:"Categorizzazione",description:"Nessun prodotto necessitava di categorizzazione"})}catch($e){console.error(" Errore durante categorizzazione:",$e);let Re="Errore durante la categorizzazione automatica";$e instanceof Error?$e.name==="DeepSeekCategorizationError"?Re=$e.message:$e.message.includes("network")||$e.message.includes("fetch")?Re="Errore di connessione. Verifica la tua connessione internet":$e.message.includes("API key")?Re="Configurazione AI non valida":$e.message.includes("rate limit")&&(Re="Troppe richieste. Riprova tra qualche minuto"):typeof $e=="string"&&(Re=$e),r({title:"Errore Categorizzazione",description:Re,variant:"destructive"})}finally{T(!1)}}),me=()=>G(this,null,function*(){if(e){E(!0);try{const re=X.title.trim()||"Spesa del ".concat(new Date().toLocaleDateString("it-IT")),je=new ul("shopping_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),re,[],e.username,new Date,X.supermarketId==="none"?void 0:X.supermarketId,X.isPublic,!1,void 0,void 0,void 0,void 0,[],new Date,!1),$e=yield o(je),Re=()=>i==null?void 0:i.find(Qe=>Qe.id===$e);let Pt=0;const at=10,ze=()=>G(this,null,function*(){const Qe=Re();Qe?(y(Qe),A(!0),E(!1)):Pt<at?(Pt++,setTimeout(ze,100)):(je.id=$e,y(je),A(!0),n&&Y(!0),E(!1))});ze(),J(!1),be({title:"",supermarketId:"none",isPublic:!1}),r({title:"Lista creata",description:'"'.concat(re,'" creata con successo')})}catch(re){E(!1),r({title:"Errore",description:"Impossibile creare la lista",variant:"destructive"})}}}),Te=()=>G(this,null,function*(){S&&v&&v.items.filter(je=>!je.category||je.category==="Altro"||je.category.trim()==="").length>0&&u&&u.length>0&&(yield xe(v)),A(!S)}),tt=re=>G(this,null,function*(){const je=m==null?void 0:m.find($e=>$e.id===re);if(je)try{je.isDeleted=!1,je.updatedAt=new Date,yield s(re,je),r({title:"Lista ripristinata",description:'"'.concat(je.title,'" ripristinata dal cestino')})}catch($e){r({title:"Errore",description:"Impossibile ripristinare la lista",variant:"destructive"})}}),rt=re=>G(this,null,function*(){const je=m==null?void 0:m.find($e=>$e.id===re);if(!(!je||!window.confirm('Eliminare definitivamente "'.concat(je.title,'"? Questa azione non pu essere annullata.'))))try{yield l(re),r({title:"Lista eliminata definitivamente",description:'"'.concat(je.title,'" eliminata per sempre')})}catch($e){r({title:"Errore",description:"Impossibile eliminare la lista definitivamente",variant:"destructive"})}}),sr=re=>G(this,null,function*(){const je=i==null?void 0:i.find($e=>$e.id===re);if(!(!je||!window.confirm('Eliminare "'.concat(je.title,'"?'))))try{je.isDeleted=!0,je.updatedAt=new Date,yield s(re,je),(v==null?void 0:v.id)===re&&(y(null),A(!1),w(""),Y(!1)),r({title:"Lista eliminata",description:'"'.concat(je.title,'" spostata nel cestino')})}catch($e){r({title:"Errore",description:"Impossibile eliminare la lista",variant:"destructive"})}}),Wn=()=>G(this,null,function*(){if(!(!e||!ue.name.trim()))try{const re=new Ku("cat_".concat(ue.name.toLowerCase().replace(/\s+/g,"_"),"_").concat(Date.now()),ue.name.trim(),e.username,new Date,ue.description.trim()||void 0,ue.color,ue.icon,((u==null?void 0:u.length)||0)+1,new Date);yield d(re),Pe({name:"",description:"",color:"#81B29A",icon:""}),se(!1),r({title:"Categoria creata",description:'"'.concat(ue.name,'" creata con successo')})}catch(re){r({title:"Errore",description:"Impossibile creare la categoria",variant:"destructive"})}}),fn=()=>G(this,null,function*(){if(!(!e||!oe.name.trim()))try{const re=new Xu("market_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),oe.name.trim(),e.username,new Date,oe.address.trim()||void 0,void 0,void 0,void 0,void 0,oe.color,!0,new Date);yield h(re),_e({name:"",address:"",color:"#E07A5F"}),Ue(!1),r({title:"Supermercato creato",description:'"'.concat(oe.name,'" creato con successo')})}catch(re){r({title:"Errore",description:"Impossibile creare il supermercato",variant:"destructive"})}}),An=()=>v?v.getCompletionStats():{completed:0,total:0,percentage:0};return c.jsx(gf,{isVisible:g,title:"Caricamento Lista della spesa",subtitle:"Recupero degli articoli...",children:c.jsxs("div",{className:ie("container mx-auto p-6 max-w-7xl",t),children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[" ",c.jsx(iD,{className:"h-8 w-8 text-cambridge-newStyle"}),c.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"Spesa"}),n&&c.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[" ",c.jsx(Q,{onClick:()=>D(!0),size:"sm",variant:"outline",className:"border-cambridge-newStyle",children:c.jsx(Cs,{className:"h-4 w-4 text-cambridge-newStyle"})}),c.jsxs(Uh,{children:[c.jsx(Wh,{asChild:!0,children:c.jsx(Q,{variant:"outline",children:c.jsx(eN,{className:"h-4 w-4"})})}),c.jsxs(Hu,{align:"end",children:[c.jsxs(Tr,{onClick:()=>se(!0),children:[c.jsx(Va,{className:"h-4 w-4 mr-2"}),"Gestisci Categorie"]}),c.jsxs(Tr,{onClick:()=>Ue(!0),children:[c.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Gestisci Supermercati"]}),c.jsxs(Tr,{onClick:()=>ae(!0),children:[c.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Cestino (",(m==null?void 0:m.length)||0,")"]}),c.jsxs(Tr,{onClick:()=>D(!0),children:[c.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Statistiche Dettagliate"]})]})]}),c.jsx(Q,{onClick:()=>J(!0),size:"sm",className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white p-2",children:c.jsx(ar,{className:"h-4 w-4"})})]})]}),!n&&c.jsxs("div",{className:"flex flex-wrap gap-4",children:[c.jsxs(ne,{variant:"outline",className:"text-cambridge-newStyle border-cambridge-newStyle",children:[he.totalLists," ",he.totalLists===1?"lista":"liste"]}),he.completedLists>0&&c.jsxs(ne,{variant:"outline",className:"text-green-600 border-green-200",children:[he.completedLists," completate"]}),he.publicLists>0&&c.jsxs(ne,{variant:"outline",className:"text-blue-600 border-blue-300",children:[c.jsx(Br,{className:"w-3 h-3 mr-1"}),he.publicLists," pubbliche"]}),he.privateLists>0&&c.jsxs(ne,{variant:"outline",className:"text-orange-600 border-orange-300",children:[c.jsx(Ir,{className:"w-3 h-3 mr-1"}),he.privateLists," private"]}),he.myLists>0&&c.jsxs(ne,{variant:"outline",className:"text-purple-600 border-purple-300",children:[c.jsx(Lr,{className:"w-3 h-3 mr-1"}),he.myLists," mie"]}),he.totalItems>0&&c.jsxs(ne,{variant:"outline",className:"text-gray-600 border-gray-300",children:[c.jsx(hs,{className:"w-3 h-3 mr-1"}),he.totalItems," prodotti"]}),he.uniqueCategories>0&&c.jsxs(ne,{variant:"outline",className:"text-cyan-600 border-cyan-300",children:[c.jsx(Va,{className:"w-3 h-3 mr-1"}),he.uniqueCategories," categorie"]}),he.uniqueSupermarkets>0&&c.jsxs(ne,{variant:"outline",className:"text-yellow-600 border-yellow-300",children:[c.jsx(Rl,{className:"w-3 h-3 mr-1"}),he.uniqueSupermarkets," supermercati"]}),he.trashedLists>0&&c.jsxs(ne,{variant:"outline",className:"text-red-600 border-red-300",children:[c.jsx(Mr,{className:"w-3 h-3 mr-1"}),he.trashedLists," cestino"]})]}),!n&&c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Q,{onClick:()=>J(!0),className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white",children:[c.jsx(ar,{className:"h-4 w-4 mr-2"}),"Nuova Lista"]}),c.jsxs(Uh,{children:[c.jsx(Wh,{asChild:!0,children:c.jsx(Q,{variant:"outline",children:c.jsx(eN,{className:"h-4 w-4"})})}),c.jsxs(Hu,{align:"end",children:[c.jsxs(Tr,{onClick:()=>se(!0),children:[c.jsx(Va,{className:"h-4 w-4 mr-2"}),"Gestisci Categorie"]}),c.jsxs(Tr,{onClick:()=>Ue(!0),children:[c.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Gestisci Supermercati"]}),c.jsxs(Tr,{onClick:()=>ae(!0),children:[c.jsx(Mr,{className:"h-4 w-4 mr-2"}),"Cestino (",(m==null?void 0:m.length)||0,")"]}),c.jsxs(Tr,{onClick:()=>D(!0),children:[c.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Statistiche Dettagliate"]})]})]})]})]}),c.jsx(Ie,{className:"mb-6",children:c.jsxs(Ve,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:"font-medium text-delft-blue",children:"Filtri di ricerca"})]}),c.jsx(Q,{variant:"ghost",onClick:()=>q(!W),size:"sm",children:W?c.jsx(Bo,{className:"h-4 w-4"}):c.jsx(Na,{className:"h-4 w-4"})})]}),!W&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx($u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(At,{placeholder:"Cerca nelle liste...",value:F,onChange:re=>I(re.target.value),className:"pl-10"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs(Nt,{value:k,onValueChange:R,children:[c.jsxs(St,{children:[c.jsx(Va,{className:"h-4 w-4 mr-2"}),c.jsx(jt,{placeholder:"Categoria"})]}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutte le categorie"}),u==null?void 0:u.map(re=>c.jsx(ye,{value:re.name,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:re.icon}),re.name]})},re.id))]})]}),c.jsxs(Nt,{value:L,onValueChange:V,children:[c.jsxs(St,{children:[c.jsx(Rl,{className:"h-4 w-4 mr-2"}),c.jsx(jt,{placeholder:"Supermercato"})]}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutti i supermercati"}),f==null?void 0:f.map(re=>c.jsx(ye,{value:re.id,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:re.color}}),re.name]})},re.id))]})]})]})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h2",{className:"text-xl font-semibold text-delft-blue",children:["Le tue liste (",De.length,")"]}),De.length===0?c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-8 text-center",children:[c.jsx(hs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Nessuna lista della spesa trovata"})]})}):c.jsx("div",{className:"space-y-3",children:De.map(re=>{const je=f==null?void 0:f.find(Re=>Re.id===re.supermarketId),$e=re.getCompletionStats();return c.jsx(Ie,{className:ie("cursor-pointer transition-all hover:shadow-md",(v==null?void 0:v.id)===re.id?"ring-2 ring-burnt-sienna border-burnt-newStyle":""),onClick:()=>{y(re),A(!1),w(""),n&&Y(!0)},children:c.jsxs(Ve,{className:"p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsx("h3",{className:"font-medium text-delft-blue truncate flex-1",children:re.title}),c.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[re.isPublic?c.jsx(Br,{className:"h-3 w-3 text-muted-foreground"}):c.jsx(Ir,{className:"h-3 w-3 text-muted-foreground"}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:Re=>{Re.stopPropagation(),sr(re.id)},className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:c.jsx(Mr,{className:"h-3 w-3"})})]})]}),je&&c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Rl,{className:"h-3 w-3 text-muted-foreground"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:je.name})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"text-muted-foreground",children:[$e.completed,"/",$e.total," completati"]}),c.jsx("span",{className:"text-xs text-muted-foreground",children:Ju(re.createdAt,{addSuffix:!0,locale:qr})})]})]})},re.id)})})]}),!n&&c.jsx("div",{className:"lg:col-span-2",children:v?c.jsxs(Ie,{children:[c.jsx($r,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Qn,{className:"text-xl text-delft-blue",children:v.title}),c.jsxs(Q,{variant:S?"default":"outline",size:"sm",onClick:Te,className:S?"bg-burnt-newStyle hover:bg-burnt-newStyle/90":"",children:[S?c.jsx(Er,{className:"h-4 w-4"}):c.jsx(zo,{className:"h-4 w-4"}),S?"Salva":"Modifica"]})]})}),c.jsxs(Ve,{className:"space-y-6",children:[S&&c.jsxs("div",{children:[c.jsx(Wt,{htmlFor:"new-item",children:"Aggiungi prodotto (premi Enter)"}),c.jsx(At,{id:"new-item",placeholder:"Scrivi qui un prodotto...",value:b,onChange:re=>w(re.target.value),onKeyDown:U})]}),v.items.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(hs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:S?"Inizia a scrivere i prodotti!":"Questa lista  vuota."})]}):S?c.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:v.sortItemsByDate().map(re=>c.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-white",children:[c.jsx(Sc,{className:"h-5 w-5 text-gray-300"}),c.jsx("span",{className:"flex-1",children:re.text}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>ce(re.id),className:"text-red-500 hover:text-red-700",children:c.jsx(Mr,{className:"h-4 w-4"})})]},re.id))}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"font-medium",children:"Progresso spesa"}),c.jsxs("span",{className:"text-muted-foreground",children:[An().completed,"/",An().total]})]}),c.jsx(tA,{value:An().percentage,className:"h-3"})]}),c.jsx("div",{className:"space-y-6 max-h-96 overflow-y-auto",children:(()=>{const re=(u||[]).sort((Re,Pt)=>Re.order-Pt.order),je=v.getItemsByCategory(),$e=[];re.forEach(Re=>{je.has(Re.name)&&$e.push([Re.name,je.get(Re.name)])});for(const[Re,Pt]of je.entries())re.find(at=>at.name===Re)||$e.push([Re,Pt]),Re==="Altro"&&!$e.some(at=>at[0]==="Altro")&&$e.push([Re,Pt]);return $e.map(([Re,Pt],at)=>{var ze,Qe;return c.jsxs("div",{children:[c.jsxs("div",{className:"text-base font-semibold text-delft-blue mb-2 flex items-center gap-2",children:[(ze=u==null?void 0:u.find(He=>He.name===Re))!=null&&ze.icon?c.jsx("span",{children:(Qe=u.find(He=>He.name===Re))==null?void 0:Qe.icon}):c.jsx("span",{children:""}),Re,c.jsx(ne,{variant:"secondary",className:"ml-auto text-xs py-0 px-1",children:Pt.length})]}),at>0&&c.jsx("hr",{className:"border-gray-200 my-4"})," ",c.jsx("div",{className:"space-y-2",children:Pt.map(He=>c.jsxs("div",{className:ie("flex items-center gap-3 p-3 rounded-lg border transition-colors",He.completed?"bg-green-50 border-green-200 text-green-700":"bg-white hover:bg-gray-50"),children:[c.jsx("button",{onClick:()=>Z(He.id),className:"flex-shrink-0",children:He.completed?c.jsx(eu,{className:"h-5 w-5 text-green-600"}):c.jsx(Sc,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})}),c.jsx("span",{className:ie("flex-1",He.completed&&"line-through"),children:He.text}),c.jsxs(Nt,{value:He.category||"Altro",onValueChange:ke=>z(He.id,ke),children:[c.jsx(St,{className:"w-32 h-8 text-xs",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[u==null?void 0:u.map(ke=>c.jsx(ye,{value:ke.name,children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs",children:ke.icon}),c.jsx("span",{className:"text-xs",children:ke.name})]})},ke.id)),c.jsx(ye,{value:"Altro",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs",children:""}),c.jsx("span",{className:"text-xs",children:"Altro"})]})})]})]})]},He.id))})]},Re)})})()})]})]})]}):c.jsx(Ie,{children:c.jsxs(Ve,{className:"p-12 text-center",children:[c.jsx(hs,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-delft-blue mb-2",children:"Seleziona una lista della spesa"}),c.jsx("p",{className:"text-muted-foreground",children:"Scegli una lista dalla colonna di sinistra per visualizzarla e modificarla"})]})})})]}),n&&c.jsx(Yt,{open:ge,onOpenChange:Y,children:c.jsxs(Ht,{className:"sm:max-w-full h-[90vh] p-0 flex flex-col",hideCloseButton:!0,children:[c.jsx(Zt,{className:"p-4 border-b",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(Qt,{children:v==null?void 0:v.title}),c.jsx(Q,{variant:S?"default":"outline",size:"sm",onClick:Te,children:S?c.jsx(Er,{className:"h-4 w-4"}):c.jsx(zo,{className:"h-4 w-4"})})]})}),v&&c.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[S&&c.jsx("div",{className:"p-4 border-b bg-gray-50",children:c.jsx(At,{placeholder:"Aggiungi prodotto (Enter)",value:b,onChange:re=>w(re.target.value),onKeyDown:U})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:v.items.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(hs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground text-sm",children:S?"Inizia a scrivere!":"Lista vuota"})]}):S?c.jsx("div",{className:"space-y-2",children:v.sortItemsByDate().map(re=>c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border",children:[c.jsx(Sc,{className:"h-4 w-4 text-gray-300"}),c.jsx("span",{className:"flex-1 text-sm",children:re.text}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>ce(re.id),className:"p-1 h-6 w-6 text-red-500",children:c.jsx(Mr,{className:"h-3 w-3"})})]},re.id))}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[c.jsx("span",{className:"font-medium",children:"Progresso"}),c.jsxs("span",{className:"text-muted-foreground",children:[An().completed,"/",An().total]})]}),c.jsx(tA,{value:An().percentage,className:"h-2"})]}),(()=>{const re=(u||[]).sort((Re,Pt)=>Re.order-Pt.order),je=v.getItemsByCategory(),$e=[];re.forEach(Re=>{je.has(Re.name)&&$e.push([Re.name,je.get(Re.name)])});for(const[Re,Pt]of je.entries())re.find(at=>at.name===Re)||$e.push([Re,Pt]),Re==="Altro"&&!$e.some(at=>at[0]==="Altro")&&$e.push([Re,Pt]);return $e.map(([Re,Pt],at)=>{var ze,Qe;return c.jsxs("div",{children:[c.jsxs("div",{className:"text-base font-semibold text-delft-blue mb-2 flex items-center gap-2",children:[(ze=u==null?void 0:u.find(He=>He.name===Re))!=null&&ze.icon?c.jsx("span",{children:(Qe=u.find(He=>He.name===Re))==null?void 0:Qe.icon}):c.jsx("span",{children:""}),Re,c.jsx(ne,{variant:"secondary",className:"ml-auto text-xs py-0 px-1",children:Pt.length})]}),at>0&&c.jsx("hr",{className:"border-gray-200 my-3"})," ",c.jsx("div",{className:"space-y-2",children:Pt.map(He=>c.jsxs("div",{className:ie("flex flex-col gap-2 p-3 rounded-lg border text-sm mb-2",He.completed?"bg-green-50 border-green-200 text-green-700":"bg-white"),children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>Z(He.id),className:"flex-shrink-0",children:He.completed?c.jsx(eu,{className:"h-4 w-4 text-green-600"}):c.jsx(Sc,{className:"h-4 w-4 text-gray-400"})}),c.jsx("span",{className:ie("flex-1",He.completed&&"line-through"),children:He.text})]}),c.jsxs(Nt,{value:He.category||"Altro",onValueChange:ke=>z(He.id,ke),children:[c.jsx(St,{className:"w-full h-8 text-xs",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[u==null?void 0:u.map(ke=>c.jsx(ye,{value:ke.name,children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs",children:ke.icon}),c.jsx("span",{className:"text-xs",children:ke.name})]})},ke.id)),c.jsx(ye,{value:"Altro",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs",children:""}),c.jsx("span",{className:"text-xs",children:"Altro"})]})})]})]})]},He.id))})]},Re)})})()]})}),c.jsx("div",{className:"p-4 border-t",children:c.jsx(Q,{variant:"secondary",onClick:()=>Y(!1),className:"w-full",children:"Chiudi"})})]})]})}),c.jsx(Yt,{open:H,onOpenChange:J,children:c.jsxs(Ht,{className:"sm:max-w-md",children:[c.jsxs(Zt,{children:[c.jsx(Qt,{children:"Crea Nuova Lista"}),c.jsx(Oi,{children:"Crea una nuova lista della spesa personalizzata."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Wt,{children:"Titolo (opzionale)"}),c.jsx(At,{placeholder:"Spesa del ".concat(new Date().toLocaleDateString("it-IT")),value:X.title,onChange:re=>be(je=>M(C({},je),{title:re.target.value}))})]}),c.jsxs("div",{children:[c.jsx(Wt,{children:"Supermercato (opzionale)"}),c.jsxs(Nt,{value:X.supermarketId,onValueChange:re=>be(je=>M(C({},je),{supermarketId:re})),children:[c.jsx(St,{children:c.jsx(jt,{placeholder:"Seleziona supermercato"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"none",children:"Nessun supermercato"}),f==null?void 0:f.map(re=>c.jsx(ye,{value:re.id,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:re.color}}),re.name]})},re.id))]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Kr,{checked:X.isPublic,onCheckedChange:re=>be(je=>M(C({},je),{isPublic:re}))}),c.jsxs(Wt,{className:"flex items-center gap-2",children:[X.isPublic?c.jsx(Br,{className:"h-4 w-4"}):c.jsx(Ir,{className:"h-4 w-4"}),X.isPublic?"Lista pubblica":"Lista privata"]})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(Q,{onClick:me,className:"flex-1 bg-burnt-newStyle hover:bg-burnt-newStyle/90",children:"Crea Lista"}),c.jsx(Q,{variant:"outline",onClick:()=>J(!1),className:"flex-1",children:"Annulla"})]})]})]})}),c.jsx(Yt,{open:de,onOpenChange:se,children:c.jsxs(Ht,{className:"sm:max-w-md",children:[c.jsx(Zt,{children:c.jsx(Qt,{children:"Crea Nuova Categoria"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Wt,{children:"Nome categoria *"}),c.jsx(At,{placeholder:"Nome categoria",value:ue.name,onChange:re=>Pe(je=>M(C({},je),{name:re.target.value}))})]}),c.jsxs("div",{children:[c.jsx(Wt,{children:"Icona"}),c.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:["","","","","",""].map(re=>c.jsx("button",{className:ie("p-2 border rounded-md hover:bg-gray-50",ue.icon===re?"border-burnt-newStyle bg-burnt-newStyle/10":""),onClick:()=>Pe(je=>M(C({},je),{icon:re})),children:re},re))})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(Q,{onClick:Wn,disabled:!ue.name.trim(),className:"flex-1 bg-burnt-newStyle hover:bg-burnt-newStyle/90",children:"Crea Categoria"}),c.jsx(Q,{variant:"outline",onClick:()=>se(!1),className:"flex-1",children:"Annulla"})]})]})]})}),c.jsx(Yt,{open:Ee,onOpenChange:Ue,children:c.jsxs(Ht,{className:"sm:max-w-md",children:[c.jsx(Zt,{children:c.jsx(Qt,{children:"Crea Nuovo Supermercato"})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Wt,{children:"Nome supermercato *"}),c.jsx(At,{placeholder:"Nome supermercato",value:oe.name,onChange:re=>_e(je=>M(C({},je),{name:re.target.value}))})]}),c.jsxs("div",{children:[c.jsx(Wt,{children:"Indirizzo"}),c.jsx(At,{placeholder:"Indirizzo (opzionale)",value:oe.address,onChange:re=>_e(je=>M(C({},je),{address:re.target.value}))})]}),c.jsxs("div",{className:"flex gap-2 pt-4",children:[c.jsx(Q,{onClick:fn,disabled:!oe.name.trim(),className:"flex-1 bg-burnt-newStyle hover:bg-burnt-newStyle/90",children:"Crea Supermercato"}),c.jsx(Q,{variant:"outline",onClick:()=>Ue(!1),className:"flex-1",children:"Annulla"})]})]})]})}),c.jsx(Yt,{open:_,onOpenChange:()=>{},children:c.jsxs(Ht,{className:"sm:max-w-md",onPointerDownOutside:re=>re.preventDefault(),onEscapeKeyDown:re=>re.preventDefault(),children:[c.jsx(Zt,{children:c.jsx(Qt,{className:"text-center",children:"Creazione Lista in Corso"})}),c.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cambridge-newStyle mb-4"}),c.jsx("p",{className:"text-muted-foreground text-center",children:"Sto sincronizzando la nuova lista..."}),c.jsx("p",{className:"text-sm text-muted-foreground text-center mt-2",children:"Questo richieder solo qualche secondo"})]})]})}),c.jsx(Yt,{open:N,onOpenChange:()=>{},children:c.jsxs(Ht,{children:[c.jsx(Zt,{children:c.jsx(Qt,{children:" Categorizzazione AI in Corso"})}),c.jsxs("div",{className:"flex flex-col items-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),c.jsx("p",{children:"DeepSeek sta analizzando i prodotti..."})]})]})}),c.jsx(Yt,{open:te,onOpenChange:ae,children:c.jsxs(Ht,{className:"sm:max-w-2xl w-[95vw] h-[85vh] flex flex-col p-0",children:[c.jsxs(Zt,{className:"p-4 border-b bg-white",children:[c.jsxs(Qt,{className:"flex items-center gap-2",children:[c.jsx(Mr,{className:"h-5 w-5 text-red-500"}),"Cestino (",(m==null?void 0:m.length)||0," liste)"]}),c.jsx(Oi,{className:"text-sm",children:"Le liste eliminate possono essere ripristinate o eliminate definitivamente."})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:!m||m.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx(Mr,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-delft-blue mb-2",children:"Cestino vuoto"}),c.jsx("p",{className:"text-muted-foreground text-sm",children:"Non ci sono liste eliminate"})]}):m.map(re=>{const je=f==null?void 0:f.find(at=>at.id===re.supermarketId),$e=re.getCompletionStats(),Re=O.has(re.id),Pt=()=>{const at=new Set(O);Re?at.delete(re.id):at.add(re.id),j(at)};return c.jsx(Ie,{className:"border-red-200",children:c.jsxs(Ve,{className:"p-3",children:[c.jsx("div",{className:"flex items-start justify-between mb-2",children:c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h3",{className:"font-medium text-delft-blue text-sm truncate",children:re.title}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>Pt(),className:"h-6 w-6 p-0 flex-shrink-0",children:Re?c.jsx(Bo,{className:"h-3 w-3"}):c.jsx(Na,{className:"h-3 w-3"})})]}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[c.jsxs("span",{children:[$e.total," prodotti"]}),je&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Rl,{className:"h-2 w-2"}),je.name]}),c.jsx("span",{children:Ju(re.updatedAt||re.createdAt,{addSuffix:!0,locale:qr})})]})]})}),!Re&&re.items.length>0&&c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex flex-wrap gap-1 mb-1",children:[re.items.slice(0,4).map(at=>c.jsxs(ne,{variant:"secondary",className:ie("text-xs py-0 px-1",at.completed?"bg-green-100 text-green-700":""),children:[at.completed&&c.jsx(Er,{className:"h-2 w-2 mr-1"}),at.text]},at.id)),re.items.length>4&&c.jsxs(ne,{variant:"outline",className:"text-xs py-0 px-1",children:["+",re.items.length-4]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:[$e.completed,"/",$e.total," completati (",$e.percentage,"%)"]})]}),Re&&re.items.length>0&&c.jsxs("div",{className:"mb-3 border-t pt-2",children:[c.jsxs("div",{className:"text-xs font-medium text-delft-blue mb-2",children:["Tutti i prodotti (",re.items.length,"):"]}),c.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-32 overflow-y-auto",children:re.items.map(at=>c.jsxs("div",{className:ie("flex items-center gap-2 p-1 rounded text-xs",at.completed?"bg-green-50 text-green-700":"bg-gray-50"),children:[at.completed?c.jsx(eu,{className:"h-3 w-3 text-green-600 flex-shrink-0"}):c.jsx(Sc,{className:"h-3 w-3 text-gray-400 flex-shrink-0"}),c.jsx("span",{className:ie("flex-1 truncate",at.completed&&"line-through"),children:at.text}),at.category&&at.category!=="Altro"&&c.jsx(ne,{variant:"outline",className:"text-xs py-0 px-1",children:at.category})]},at.id))})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>tt(re.id),className:"flex-1 text-green-600 hover:text-green-700 hover:bg-green-50 text-xs",children:[c.jsx(Er,{className:"h-3 w-3 mr-1"}),"Ripristina"]}),c.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>rt(re.id),className:"flex-1 text-red-600 hover:text-red-700 hover:bg-red-50 text-xs",children:[c.jsx(oo,{className:"h-3 w-3 mr-1"}),"Elimina"]})]})]})},re.id)})}),c.jsx("div",{className:"border-t p-4 bg-white",children:c.jsx(Q,{variant:"secondary",onClick:()=>ae(!1),className:"w-full",children:"Chiudi"})})]})}),c.jsx(Yt,{open:P,onOpenChange:D,children:c.jsxs(Ht,{className:"sm:max-w-md p-6",children:[c.jsxs(Zt,{className:"mb-4",children:[c.jsx(Qt,{className:"text-xl font-semibold text-delft-blue",children:"Statistiche Dettagliate Spesa"}),c.jsx(Oi,{className:"text-gray-600",children:"Riepilogo approfondito delle tue liste della spesa."})]}),c.jsxs("div",{className:"flex flex-wrap gap-3 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:[c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-cambridge-newStyle/10 text-cambridge-newStyle border-cambridge-newStyle/20",children:[c.jsx(iD,{className:"w-4 h-4 mr-2"})," ",he.totalLists," ",he.totalLists===1?"lista":"liste"," totali"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-green-100 text-green-700 border-green-200",children:[c.jsx(eu,{className:"w-4 h-4 mr-2"})," ",he.completedLists," ",he.completedLists===1?"lista":"liste"," completate"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-blue-100 text-blue-700 border-blue-200",children:[c.jsx(Br,{className:"w-4 h-4 mr-2"})," ",he.publicLists," ",he.publicLists===1?"lista":"liste"," pubbliche"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-orange-100 text-orange-700 border-orange-200",children:[c.jsx(Ir,{className:"w-4 h-4 mr-2"})," ",he.privateLists," ",he.privateLists===1?"lista":"liste"," private"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-purple-100 text-purple-700 border-purple-200",children:[c.jsx(Lr,{className:"w-4 h-4 mr-2"})," ",he.myLists," ",he.myLists===1?"lista":"liste"," create da te"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-red-100 text-red-700 border-red-200",children:[c.jsx(Mr,{className:"w-4 h-4 mr-2"})," ",he.trashedLists," ",he.trashedLists===1?"lista":"liste"," nel cestino"]}),he.totalItemsCategorizedAI>0&&c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-indigo-100 text-indigo-700 border-indigo-200",children:[c.jsx(Cs,{className:"w-4 h-4 mr-2"})," ",he.totalItemsCategorizedAI," prodotti categorizzati AI"]})]}),c.jsx("div",{className:"pt-4 flex justify-end",children:c.jsx(Q,{onClick:()=>D(!1),variant:"secondary",children:"Chiudi"})})]})})]})})}function dMe(){const[t,e]=x.useState(!1),[r,n]=x.useState("disconnected"),[i,a]=x.useState(!1),{toast:o}=Nr(),{user:s}=Bt(),{permission:l,token:u,requestPermission:d,testNotification:f,isSupported:h,debug:p}=vS(),m=S=>G(this,null,function*(){if(!(!S||!s))try{const A={token:S,userInfo:{username:s.username,role:s.role},registeredAt:new Date().toISOString(),lastSeen:new Date().toISOString()},_=JSON.parse(localStorage.getItem("fcm_bridge_tokens")||"[]"),E=_.findIndex(N=>N.token===S);return E>=0?_[E]=A:_.push(A),localStorage.setItem("fcm_bridge_tokens",JSON.stringify(_)),sessionStorage.setItem("fcm_latest_token",JSON.stringify(A)),n("connected"),!0}catch(A){return console.error(" Errore registrazione bridge:",A),n("disconnected"),!1}}),g=()=>G(this,null,function*(){try{if(n("connecting"),l!=="granted")yield d();else try{yield p.setupFCM()}catch(E){throw console.error(" Errore durante setupFCM:",E),new Error("Setup FCM fallito:")}yield new Promise(E=>setTimeout(E,500));let S=u;if(S||(S="token-exists-in-global"),!S)throw new Error("Impossibile ottenere token FCM dopo setupFCM");if(yield m(u||"global-token-placeholder"))e(!0),o({title:" Sistema Automatico Attivato!",description:"FCM bridge configurato. Le notifiche saranno gestite automaticamente."});else throw new Error("Registrazione bridge fallita")}catch(S){console.error(" Errore attivazione auto FCM:",S),n("disconnected"),o({title:" Errore Attivazione",description:S instanceof Error?S.message:"Errore sconosciuto",variant:"destructive"})}}),v=()=>G(this,null,function*(){if(!u||!t){o({title:" Sistema non attivo",description:"Attiva prima il sistema automatico",variant:"destructive"});return}try{yield m(u),yield f();const S={action:"request_automated_test",token:u,user:s==null?void 0:s.username,timestamp:Date.now()};sessionStorage.setItem("fcm_test_request",JSON.stringify(S)),o({title:" Test Automatico Avviato",description:"Il sistema di notifiche automatico ricever la richiesta di test."})}catch(S){console.error(" Errore test automatico:",S),o({title:" Errore Test",description:"Impossibile eseguire test automatico",variant:"destructive"})}}),y=()=>G(this,null,function*(){try{const S=yield p.runDiagnostics();a(!0),o({title:S.success?" Diagnostica Completata":" Problemi Rilevati",description:S.message,variant:S.success?"default":"destructive"})}catch(S){console.error(" Errore diagnostica:",S)}}),b=()=>{const S=JSON.parse(localStorage.getItem("fcm_bridge_tokens")||"[]");o({title:" Statistiche Bridge",description:"Token registrati: ".concat(S.length,". Controlla console per dettagli.")}),console.group(" FCM Bridge Stats"),console.groupEnd()},w=()=>{localStorage.removeItem("fcm_bridge_tokens"),sessionStorage.removeItem("fcm_latest_token"),sessionStorage.removeItem("fcm_test_request"),e(!1),n("disconnected"),o({title:" Bridge Pulito",description:"Tutti i token sono stati rimossi dal bridge"})};return x.useEffect(()=>{u&&s&&t&&m(u)},[u,s,t]),c.jsxs(Ie,{className:"w-full max-w-2xl mx-auto",children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2",children:[" Sistema FCM Automatico",c.jsx(ne,{variant:r==="connected"?"default":"secondary",children:r==="connected"?"Connesso":r==="connecting"?"Connessione...":"Disconnesso"})]})}),c.jsxs(Ve,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Supporto:"})," ",h?"":""]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Permesso:"})," ",l]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Token:"})," ",u?" Presente":" Assente"]}),c.jsxs("div",{children:[c.jsx("strong",{children:"Sistema:"})," ",t?" Attivo":" Inattivo"]})]}),u&&c.jsx("div",{className:"p-3 bg-gray-100 rounded-md",children:c.jsxs("p",{className:"text-xs font-mono break-all",children:[c.jsx("strong",{children:"Token FCM:"}),c.jsx("br",{}),u.substring(0,50),"..."]})}),c.jsxs("div",{className:"space-y-2",children:[t?c.jsxs(c.Fragment,{children:[c.jsx(Q,{onClick:v,className:"w-full",children:" Test Automatico"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[c.jsx(Q,{onClick:b,variant:"outline",size:"sm",children:" Stats"}),c.jsx(Q,{onClick:y,variant:"outline",size:"sm",children:" Debug"}),c.jsx(Q,{onClick:w,variant:"destructive",size:"sm",children:" Reset"})]})]}):c.jsx(Q,{onClick:g,className:"w-full",disabled:!h||r==="connecting",children:" Attiva Sistema Automatico"}),c.jsxs("div",{className:"border-t pt-4",children:[c.jsx("h4",{className:"font-semibold mb-2",children:" Controlli Debug:"}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsx(Q,{onClick:y,variant:"outline",size:"sm",children:" Diagnostica"}),c.jsx(Q,{onClick:w,variant:"destructive",size:"sm",children:" Reset Totale"})]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 border-t pt-4",children:[c.jsx("h4",{className:"font-semibold mb-2",children:" Come usare:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[c.jsx("li",{children:'Clicca " Diagnostica" per verificare la configurazione'}),c.jsx("li",{children:'Clicca "Attiva Sistema Automatico"'}),c.jsxs("li",{children:["Apri terminale: ",c.jsx("code",{children:"npm run fcm:bridge:start"})]}),c.jsx("li",{children:"Il sistema invier notifiche automaticamente"})]}),i&&c.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:c.jsxs("p",{className:"text-xs",children:[c.jsx("strong",{children:"Debug attivato:"})," Controlla la console per informazioni dettagliate. Le funzioni debug sono disponibili come ",c.jsx("code",{children:"useNotifications().debug"})]})})]})]})]})}const zC={conad:{name:"CONAD",type:"FEDELT",logo:"/cardlogo/conad.png",color:"#FFFFFF"},pewex:{name:"PEWEX",type:"FEDELT",logo:"/cardlogo/pewex.png",color:"#2563EB"},tigre:{name:"TIGRE",type:"FEDELT",logo:"/cardlogo/tigre.png",color:"#79b61d"},maurys:{name:"MAURYS",type:"FEDELT",logo:"/cardlogo/maurys.png",color:"#f5ed66"},doc:{name:"DOC",type:"FEDELT",logo:"/cardlogo/doc.png",color:"#FFFFFF"},feltrinelli:{name:"FELTRINELLI",type:"FEDELT",logo:"/cardlogo/feltrinelli.png",color:"#FFFFFF"},naturasi:{name:"NATURA SI",type:"FEDELT",logo:"/cardlogo/naturasi.png",color:"#5b7711"},mondadori:{name:"MONDADORI",type:"FEDELT",logo:"/cardlogo/mondadori.png",color:"#FFFFFF"},rinascente:{name:"RINASCENTE",type:"FEDELT",logo:"/cardlogo/rinascente.png",color:"#131313"},coin:{name:"COIN",type:"FEDELT",logo:"/cardlogo/coin.png",color:"#FFFFFF"},calvinklein:{name:"CALVIN KLEIN",type:"FEDELT",logo:"/cardlogo/calvinklein.png",color:"#FFFFFF"},diesel:{name:"DIESEL",type:"FEDELT",logo:"/cardlogo/diesel.png",color:"#FFFFFF"},altro:{name:"ALTRO",type:"FEDELT",logo:"",color:"green"}},fMe=["#DC2626","#EA580C","#D97706","#EAB308","#16A34A","#059669","#0891B2","#2563EB","#4F46E5","#7C3AED","#9333EA","#C2410C","#DB2777","#E11D48"];function hMe(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function pMe(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var mMe=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gMe=function(t){mMe(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),hMe(a,i.prototype),pMe(a),a}return e}(Error),vMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yi=function(t){vMe(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(gMe),yMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ua=function(t){yMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(yi),xMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ke=function(t){xMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(yi),bMe=function(){function t(e){if(this.binarizer=e,e===null)throw new Ke("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var a=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(e){return""}},t}(),wMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yn=function(t){wMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(yi),AMe=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),fr=function(){function t(){}return t.arraycopy=function(e,r,n,i,a){for(;a--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),SMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VC=function(t){SMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(yi),_Me=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vD=function(t){_Me(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(VC),CMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sn=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new Ke("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new vD(r);if(n>e)throw new vD(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var a=CMe(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=31*i+s}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,a=new Int32Array(i);return fr.arraycopy(e,r,a,0,i),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var o=a+i>>1,s=n(r,e[o]);if(s>0)i=o+1;else if(s<0)a=o-1;else return o}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),mt=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),xn=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);fr.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=n[i]}var s=i*32+mt.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var o=n.length;a===0;){if(++i===o)return r;a=~n[i]}var s=i*32+mt.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Ke;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),a=this.bits,o=n;o<=i;o++){var s=o>n?0:e&31,l=o<i?31:r&31,u=(2<<l)-(1<<s);a[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Ke;if(r===e)return!0;r--;for(var i=Math.floor(e/32),a=Math.floor(r/32),o=this.bits,s=i;s<=a;s++){var l=s>i?0:e&31,u=s<a?31:r&31,d=(2<<u)-(1<<l)&4294967295;if((o[s]&d)!==(n?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Ke("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Ke("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var a=0;a<i;a++){for(var o=0,s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;r[n+a]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,a=0;a<n;a++){var o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-a]=o}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,a=1;a<n;a++){var u=e[a];l|=u<<32-s,e[a-1]=l,l=u>>>s}e[n-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&sn.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+sn.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),rA;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(rA||(rA={}));const hr=rA;var EMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ce=function(t){EMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(yi),NMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(qt||(qt={}));var an=function(){function t(e,r,n){for(var i,a,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,u=0,d=l.length;u!==d;u++){var f=l[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=NMe(o),p=h.next();!p.done;p=h.next()){var m=p.value;t.NAME_TO_ECI.set(m,this)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Ce("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new Ce("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new Ce("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(qt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(qt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(qt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(qt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(qt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(qt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(qt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(qt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(qt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(qt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(qt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(qt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(qt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(qt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(qt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(qt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(qt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(qt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(qt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(qt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(qt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(qt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(qt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(qt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(qt.Big5,28,"Big5"),t.GB18030=new t(qt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(qt.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),jMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T0=function(t){jMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(yi),ta=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder=="undefined"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder=="undefined"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window!="undefined"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof an?e:an.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",a=0,o=e.length;a<o;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(an.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new T0("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(an.UTF8)||e.equals(an.ISO8859_1)||e.equals(an.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},t}(),bt=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return ta.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(hr.CHARACTER_SET)!==void 0)return r.get(hr.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,o=!0,s=0,l=0,u=0,d=0,f=0,h=0,p=0,m=0,g=0,v=0,y=0,b=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,w=0;w<n&&(i||a||o);w++){var S=e[w]&255;o&&(s>0?S&128?s--:o=!1:S&128&&(S&64?(s++,S&32?(s++,S&16?(s++,S&8?o=!1:d++):u++):l++):o=!1)),i&&(S>127&&S<160?i=!1:S>159&&(S<192||S===215||S===247)&&y++),a&&(f>0?S<64||S===127||S>252?a=!1:f--:S===128||S===160||S>239?a=!1:S>160&&S<224?(h++,m=0,p++,p>g&&(g=p)):S>127?(f++,p=0,m++,m>v&&(v=m)):(p=0,m=0))}return o&&s>0&&(o=!1),a&&f>0&&(a=!1),o&&(b||l+u+d>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||g>=3||v>=3)?t.SHIFT_JIS:i&&a?g===2&&h===2||y*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function a(s,l,u,d,f,h){if(s==="%%")return"%";if(r[++i]!==void 0){s=d?parseInt(d.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,m;switch(h){case"s":m=r[i];break;case"c":m=r[i][0];break;case"f":m=parseFloat(r[i]).toFixed(s);break;case"p":m=parseFloat(r[i]).toPrecision(s);break;case"e":m=parseFloat(r[i]).toExponential(s);break;case"x":m=parseInt(r[i]).toString(p||16);break;case"d":m=parseFloat(parseInt(r[i],p||10).toPrecision(s)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(p);for(var g=parseInt(u),v=u&&u[0]+""=="0"?"0":" ";m.length<g;)m=l!==void 0?m+v:v+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,a)},t.getBytes=function(e,r){return ta.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=an.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=an.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=an.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),pt=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=bt.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),fo=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new Ke("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),a=0;a<r;a++)for(var o=e[a],s=0;s<n;s++)o[s]&&i.set(s,a);return i},t.parseFromString=function(e,r,n){if(e===null)throw new Ke("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,o=0,s=-1,l=0,u=0;u<e.length;)if(e.charAt(u)==="\n"||e.charAt(u)==="\r"){if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Ke("row lengths do not match");o=a,l++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,i[a]=!0,a++;else if(e.substring(u,u+n.length)===n)u+=n.length,i[a]=!1,a++;else throw new Ke("illegal character encountered: "+e.substring(u));if(a>o){if(s===-1)s=a-o;else if(a-o!==s)throw new Ke("row lengths do not match");l++}for(var d=new t(s,l),f=0;f<a;f++)i[f]&&d.set(Math.floor(f%s),Math.floor(f/s));return d},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ke("input matrix dimensions do not match");for(var r=new xn(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,o=this.height;a<o;a++)for(var s=a*n,l=e.getRow(a,r).getBitArray(),u=0;u<n;u++)i[s+u]^=l[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new Ke("Left and top must be nonnegative");if(i<1||n<1)throw new Ke("Height and width must be at least 1");var a=e+n,o=r+i;if(o>this.height||a>this.width)throw new Ke("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=r;u<o;u++)for(var d=u*s,f=e;f<a;f++)l[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new xn(this.width):r.clear();for(var n=this.rowSize,i=this.bits,a=e*n,o=0;o<n;o++)r.setBulk(o*32,i[a+o]);return r},t.prototype.setRow=function(e,r){fr.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new xn(e),i=new xn(e),a=0,o=Math.floor((r+1)/2);a<o;a++)n=this.getRow(a,n),i=this.getRow(r-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,a=e,o=r,s=-1,l=-1,u=0;u<r;u++)for(var d=0;d<n;d++){var f=i[u*n+d];if(f!==0){if(u<o&&(o=u),u>l&&(l=u),d*32<a){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<a&&(a=d*32+h)}if(d*32+31>s){for(var h=31;!(f>>>h);)h--;d*32+h>s&&(s=d*32+h)}}}return s<a||l<o?null:Int32Array.from([a,o,s-a+1,l-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,a=n%e*32,o=r[n],s=0;!(o<<31-s&4294967295);)s++;return a+=s,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,o=r[n],s=31;!(o>>>s);)s--;return a+=s,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&sn.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+sn.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n="\n"),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new pt,a=0,o=this.height;a<o;a++){for(var s=0,l=this.width;s<l;s++)i.append(this.get(s,a)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),TMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),le=function(t){TMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(yi),PMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OMe=function(t){PMe(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new xn(a):n.clear(),this.initArrays(a);for(var o=i.getRow(r,this.luminances),s=this.buckets,l=0;l<a;l++)s[(o[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(s);if(a<3)for(var l=0;l<a;l++)(o[l]&255)<u&&n.set(l);else for(var d=o[0]&255,f=o[1]&255,l=1;l<a-1;l++){var h=o[l+1]&255;(f*4-d-h)/2<u&&n.set(l),d=f,f=h}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),a=new fo(n,i);this.initArrays(n);for(var o=this.buckets,s=1;s<5;s++)for(var l=Math.floor(i*s/5),u=r.getRow(l,this.luminances),d=Math.floor(n*4/5),f=Math.floor(n/5);f<d;f++){var h=u[f]&255;o[h>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),m=r.getMatrix(),s=0;s<i;s++)for(var g=s*n,f=0;f<n;f++){var h=m[g+f]&255;h<p&&a.set(f,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,a=0,o=0,s=0;s<n;s++)r[s]>o&&(a=s,o=r[s]),r[s]>i&&(i=r[s]);for(var l=0,u=0,s=0;s<n;s++){var d=s-a,f=r[s]*d*d;f>u&&(l=s,u=f)}if(a>l){var h=a;a=l,l=h}if(l-a<=n/16)throw new le;for(var p=l-1,m=-1,s=l-1;s>a;s--){var g=s-a,f=g*g*(l-s)*(i-r[s]);f>m&&(p=s,m=f)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(AMe),IMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DMe=function(t){IMe(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&o++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(a,o,s,n,i),u=new fo(n,i);e.calculateThresholdForBlock(a,o,s,n,i,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,a,o,s,l){for(var u=o-e.BLOCK_SIZE,d=a-e.BLOCK_SIZE,f=0;f<i;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var p=e.cap(f,2,i-3),m=0;m<n;m++){var g=m<<e.BLOCK_SIZE_POWER;g>d&&(g=d);for(var v=e.cap(m,2,n-3),y=0,b=-2;b<=2;b++){var w=s[p+b];y+=w[v-2]+w[v-1]+w[v]+w[v+1]+w[v+2]}var S=y/25;e.thresholdBlock(r,g,h,S,a,l)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,a,o,s){for(var l=0,u=i*o+n;l<e.BLOCK_SIZE;l++,u+=o)for(var d=0;d<e.BLOCK_SIZE;d++)(r[u+d]&255)<=a&&s.set(n+d,i+l)},e.calculateBlackPoints=function(r,n,i,a,o){for(var s=o-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,u=new Array(i),d=0;d<i;d++){u[d]=new Int32Array(n);var f=d<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var h=0;h<n;h++){var p=h<<e.BLOCK_SIZE_POWER;p>l&&(p=l);for(var m=0,g=255,v=0,y=0,b=f*a+p;y<e.BLOCK_SIZE;y++,b+=a){for(var w=0;w<e.BLOCK_SIZE;w++){var S=r[b+w]&255;m+=S,S<g&&(g=S),S>v&&(v=S)}if(v-g>e.MIN_DYNAMIC_RANGE)for(y++,b+=a;y<e.BLOCK_SIZE;y++,b+=a)for(var w=0;w<e.BLOCK_SIZE;w++)m+=r[b+w]&255}var A=m>>e.BLOCK_SIZE_POWER*2;if(v-g<=e.MIN_DYNAMIC_RANGE&&(A=g/2,d>0&&h>0)){var _=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;g<_&&(A=_)}u[d][h]=A}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(OMe),bx=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new T0("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new T0("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new T0("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new pt,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var o=i[a]&255,s=void 0;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",r.append(s)}r.append("\n")}return r.toString()},t}(),kMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UC=function(t){kMe(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),a=this.getWidth(),o=0;o<a;o++)i[o]=255-(i[o]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(r[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,a){return new e(this.delegate.crop(r,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(bx),MMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RMe=function(t){MMe(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,a){a===void 0&&(a=!1);var o=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,l=0,u=r.length;s<u;s+=4,l++){var d=void 0,f=r[s+3];if(f===0)d=255;else{var h=r[s],p=r[s+1],m=r[s+2];d=306*h+601*p+117*m+512>>10}o[l]=d}else for(var s=0,l=0,g=r.length;s<g;s+=4,l++){var d=void 0,f=r[s+3];if(f===0)d=255;else{var h=r[s],p=r[s+1],m=r[s+2];d=306*h+601*p+117*m+512>>10}o[l]=255-d}return o},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Ke("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*o+Math.abs(Math.sin(a))*s),u=Math.ceil(Math.abs(Math.sin(a))*o+Math.abs(Math.cos(a))*s);return n.width=l,n.height=u,i.translate(l/2,u/2),i.rotate(a),i.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new UC(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(bx),$Me=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),qn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(d){try{u(n.next(d))}catch(f){o(f)}}function l(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(s,l)}u((n=n.apply(t,e||[])).next())})},Kn=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},LMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vf=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator!="undefined"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return qn(this,void 0,void 0,function(){var e,r,n,i,a,o,s,l,u,d,f,h;return Kn(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=LMe(e),i=n.next();!i.done;i=n.next())a=i.value,o=a.kind==="video"?"videoinput":a.kind,o==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device "+(r.length+1),u=a.groupId,d={deviceId:s,label:l,kind:o,groupId:u},r.push(d))}catch(m){f={error:m}}finally{try{i&&!i.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return qn(this,void 0,void 0,function(){var e;return Kn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new $Me(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return qn(this,void 0,void 0,function(){var r;return Kn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return qn(this,void 0,void 0,function(){return Kn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return qn(this,void 0,void 0,function(){var n,i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return qn(this,void 0,void 0,function(){var n;return Kn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return qn(this,void 0,void 0,function(){var n,i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return qn(this,void 0,void 0,function(){return Kn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return qn(this,void 0,void 0,function(){var i,a;return Kn(this,function(o){switch(o.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return qn(this,void 0,void 0,function(){var i;return Kn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return qn(this,void 0,void 0,function(){var i;return Kn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return qn(this,void 0,void 0,function(){var n;return Kn(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return qn(this,void 0,void 0,function(){return Kn(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new ua("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new ua("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new ua("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new ua("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new ua("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new ua("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new ua("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new ua("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new ua("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new ua("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return qn(this,void 0,void 0,function(){return Kn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return qn(this,void 0,void 0,function(){return Kn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e=="undefined"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document!="undefined"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(o,s){if(i._stopAsyncDecode){s(new le("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);o(l)}catch(h){var u=r&&h instanceof le,d=h instanceof yn||h instanceof Ce,f=d&&n;if(u||f)return setTimeout(a,i._timeBetweenDecodingAttempts,o,s);s(h)}};return new Promise(function(o,s){return a(o,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){r(null,l);var o=l instanceof yn||l instanceof Ce,s=l instanceof le;(o||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new RMe(n,r),a=new DMe(i);return new bMe(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch(i){n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document=="undefined")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e!="undefined"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener!="undefined"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener!="undefined"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener!="undefined"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch(n){e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(r){e.src=""}this.videoElement.removeAttribute("src")},t}(),Un=function(){function t(e,r,n,i,a,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=fr.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=fr.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);fr.arraycopy(r,0,n,0,r.length),fr.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),nA;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nA||(nA={}));const Fe=nA;var iA;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(iA||(iA={}));const On=iA;var wx=function(){function t(e,r,n,i,a,o){a===void 0&&(a=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),th=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Ke;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),js=function(){function t(e,r){if(r.length===0)throw new Ke;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),fr.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,a=r.length;i!==a;i++){var o=r[i];n=th.addOrSubtract(n,o)}return n}n=r[0];for(var s=r.length,l=this.field,i=1;i<s;i++)n=th.addOrSubtract(l.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ke("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;fr.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=th.addOrSubtract(r[s-o],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ke("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=this.field,l=0;l<n;l++)for(var u=r[l],d=0;d<a;d++)o[l+d]=th.addOrSubtract(o[l+d],s.multiply(u,i[d]));return new t(s,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),a=this.coefficients,o=0;o<r;o++)i[o]=n.multiply(a[o],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Ke;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),o=this.field,s=0;s<i;s++)a[s]=o.multiply(n[s],r);return new t(o,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ke("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ke("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,a=e.getCoefficient(e.getDegree()),o=r.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),l=r.multiply(i.getCoefficient(i.getDegree()),o),u=e.multiplyByMonomial(s,l),d=r.buildMonomial(s,l);n=n.addOrSubtract(d),i=i.addOrSubtract(u)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),FMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pz=function(t){FMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(yi),BMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hi=function(t){BMe(e,t);function e(r,n,i){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=i;for(var o=new Int32Array(n),s=1,l=0;l<n;l++)o[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=o;for(var u=new Int32Array(n),l=0;l<n-1;l++)u[o[l]]=l;return a.logTable=u,a.zero=new js(a,Int32Array.from([0])),a.one=new js(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Ke;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new js(this,i)},e.prototype.inverse=function(r){if(r===0)throw new Pz;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+mt.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(th),zMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t0=function(t){zMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(yi),VMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gm=function(t){VMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(yi),Ax=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new js(n,e),a=new Int32Array(r),o=!0,s=0;s<r;s++){var l=i.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=l,l!==0&&(o=!1)}if(!o)for(var u=new js(n,a),d=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),f=d[0],h=d[1],p=this.findErrorLocations(f),m=this.findErrorMagnitudes(h,p),s=0;s<p.length;s++){var g=e.length-1-n.log(p[s]);if(g<0)throw new t0("Bad error location");e[g]=hi.addOrSubtract(e[g],m[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=this.field,o=e,s=r,l=a.getZero(),u=a.getOne();s.getDegree()>=(n/2|0);){var d=o,f=l;if(o=s,l=u,o.isZero())throw new t0("r_{i-1} was zero");s=d;for(var h=a.getZero(),p=o.getCoefficient(o.getDegree()),m=a.inverse(p);s.getDegree()>=o.getDegree()&&!s.isZero();){var g=s.getDegree()-o.getDegree(),v=a.multiply(s.getCoefficient(s.getDegree()),m);h=h.addOrSubtract(a.buildMonomial(g,v)),s=s.addOrSubtract(o.multiplyByMonomial(g,v))}if(u=h.multiply(l).addOrSubtract(f),s.getDegree()>=o.getDegree())throw new gm("Division algorithm failed to reduce polynomial?")}var y=u.getCoefficient(0);if(y===0)throw new t0("sigmaTilde(0) was zero");var b=a.inverse(y),w=u.multiplyScalar(b),S=s.multiplyScalar(b);return[w,S]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,a=this.field,o=1;o<a.getSize()&&i<r;o++)e.evaluateAt(o)===0&&(n[i]=a.inverse(o),i++);if(i!==r)throw new t0("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),a=this.field,o=0;o<n;o++){for(var s=a.inverse(r[o]),l=1,u=0;u<n;u++)if(o!==u){var d=a.multiply(r[u],s),f=d&1?d&-2:d|1;l=a.multiply(l,f)}i[o]=a.multiply(e.evaluateAt(s),a.inverse(l)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],s))}return i},t}(),_n;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(_n||(_n={}));var yD=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),a=t.convertBoolArrayToByteArray(i),o=t.getEncodedData(i),s=new wx(a,o,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=_n.UPPER,i=_n.UPPER,a="",o=0;o<r;)if(i===_n.BINARY){if(r-o<5)break;var s=t.readCode(e,o,5);if(o+=5,s===0){if(r-o<11)break;s=t.readCode(e,o,11)+31,o+=11}for(var l=0;l<s;l++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);a+=bt.castAsNonUtf8Char(u),o+=8}i=n}else{var d=i===_n.DIGIT?4:5;if(r-o<d)break;var u=t.readCode(e,o,d);o+=d;var f=t.getCharacter(i,u);f.startsWith("CTRL_")?(n=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=i)):(a+=f,i=n)}return a},t.getTable=function(e){switch(e){case"L":return _n.LOWER;case"P":return _n.PUNCT;case"M":return _n.MIXED;case"D":return _n.DIGIT;case"B":return _n.BINARY;case"U":default:return _n.UPPER}},t.getCharacter=function(e,r){switch(e){case _n.UPPER:return t.UPPER_TABLE[r];case _n.LOWER:return t.LOWER_TABLE[r];case _n.MIXED:return t.MIXED_TABLE[r];case _n.PUNCT:return t.PUNCT_TABLE[r];case _n.DIGIT:return t.DIGIT_TABLE[r];default:throw new gm("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=hi.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=hi.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=hi.AZTEC_DATA_10):(n=12,r=hi.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new Ce;for(var o=e.length%n,s=new Int32Array(a),l=0;l<a;l++,o+=n)s[l]=t.readCode(e,o,n);try{var u=new Ax(r);u.decode(s,a-i)}catch(v){throw new Ce(v)}for(var d=(1<<n)-1,f=0,l=0;l<i;l++){var h=s[l];if(h===0||h===d)throw new Ce;(h===1||h===d-1)&&f++}for(var p=new Array(i*n-f),m=0,l=0;l<i;l++){var h=s[l];if(h===1||h===d-1)p.fill(h>1,m,m+n-1),m+=n-1;else for(var g=n-1;g>=0;--g)p[m++]=(h&1<<g)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var l=i+1+2*mt.truncDivision(mt.truncDivision(i,2)-1,15),u=i/2,d=mt.truncDivision(l,2),s=0;s<u;s++){var f=s+mt.truncDivision(s,15);a[u-s-1]=d-f-1,a[u+s]=d+f+1}for(var s=0,h=0;s<n;s++){for(var p=(n-s)*4+(r?9:12),m=s*2,g=i-1-m,v=0;v<p;v++)for(var y=v*2,b=0;b<2;b++)o[h+y+b]=e.get(a[m+b],a[m+v]),o[h+2*p+y+b]=e.get(a[m+v],a[g-b]),o[h+4*p+y+b]=e.get(a[g-b],a[g-v]),o[h+6*p+y+b]=e.get(a[g-v],a[m+b]);h+=p*8}return o},t.readCode=function(e,r,n){for(var i=0,a=r;a<r+n;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	","\n","\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Dt=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var a=e-n,o=r-i;return Math.sqrt(a*a+o*o)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var a=e[n];r+=a}return r},t}(),aA=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Be=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*aA.floatToIntBits(this.x)+aA.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,o,s;if(n>=r&&n>=i?(o=e[0],a=e[1],s=e[2]):i>=n&&i>=r?(o=e[1],a=e[0],s=e[2]):(o=e[2],a=e[0],s=e[1]),this.crossProductZ(a,o,s)<0){var l=a;a=s,s=l}e[0]=a,e[1]=o,e[2]=s},t.distance=function(e,r){return Dt.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,a=r.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},t}(),WC=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),UMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WMe=function(t){UMe(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=o,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(WC),oA=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new le}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,a=!1,o=!0,s=!1,l=!1,u=!1,d=!1,f=!1,h=this.width,p=this.height;o;){o=!1;for(var m=!0;(m||!l)&&r<h;)m=this.containsBlackPoint(n,i,r,!1),m?(r++,o=!0,l=!0):l||r++;if(r>=h){a=!0;break}for(var g=!0;(g||!u)&&i<p;)g=this.containsBlackPoint(e,r,i,!0),g?(i++,o=!0,u=!0):u||i++;if(i>=p){a=!0;break}for(var v=!0;(v||!d)&&e>=0;)v=this.containsBlackPoint(n,i,e,!1),v?(e--,o=!0,d=!0):d||e--;if(e<0){a=!0;break}for(var y=!0;(y||!f)&&n>=0;)y=this.containsBlackPoint(e,r,n,!0),y?(n--,o=!0,f=!0):f||n--;if(n<0){a=!0;break}o&&(s=!0)}if(!a&&s){for(var b=r-e,w=null,S=1;w===null&&S<b;S++)w=this.getBlackPointOnSegment(e,i-S,e+S,i);if(w==null)throw new le;for(var A=null,S=1;A===null&&S<b;S++)A=this.getBlackPointOnSegment(e,n+S,e+S,n);if(A==null)throw new le;for(var _=null,S=1;_===null&&S<b;S++)_=this.getBlackPointOnSegment(r,n+S,r-S,n);if(_==null)throw new le;for(var E=null,S=1;E===null&&S<b;S++)E=this.getBlackPointOnSegment(r,i-S,r-S,i);if(E==null)throw new le;return this.centerEdges(E,w,_,A)}else throw new le},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var a=Dt.round(Dt.distance(e,r,n,i)),o=(n-e)/a,s=(i-r)/a,l=this.image,u=0;u<a;u++){var d=Dt.round(e+u*o),f=Dt.round(r+u*s);if(l.get(d,f))return new Be(d,f)}return null},t.prototype.centerEdges=function(e,r,n,i){var a=e.getX(),o=e.getY(),s=r.getX(),l=r.getY(),u=n.getX(),d=n.getY(),f=i.getX(),h=i.getY(),p=t.CORR;return a<this.width/2?[new Be(f-p,h+p),new Be(s+p,l+p),new Be(u-p,d-p),new Be(a+p,o-p)]:[new Be(f+p,h+p),new Be(s+p,l-p),new Be(u-p,d+p),new Be(a-p,o-p)]},t.prototype.containsBlackPoint=function(e,r,n,i){var a=this.image;if(i){for(var o=e;o<=r;o++)if(a.get(o,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),xD=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),a=!0,o=0;o<r.length&&a;o+=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>i)throw new le;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),l===-1?(r[o+1]=0,a=!0):l===i&&(r[o+1]=i-1,a=!0)}a=!0;for(var o=r.length-2;o>=0&&a;o-=2){var s=Math.floor(r[o]),l=Math.floor(r[o+1]);if(s<-1||s>n||l<-1||l>i)throw new le;a=!1,s===-1?(r[o]=0,a=!0):s===n&&(r[o]=n-1,a=!0),l===-1?(r[o+1]=0,a=!0):l===i&&(r[o+1]=i-1,a=!0)}},t}(),Oz=function(){function t(e,r,n,i,a,o,s,l,u){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=a,this.a32=o,this.a13=s,this.a23=l,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,i,a,o,s,l,u,d,f,h,p,m,g,v){var y=t.quadrilateralToSquare(e,r,n,i,a,o,s,l),b=t.squareToQuadrilateral(u,d,f,h,p,m,g,v);return b.times(y)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,l=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<r;h+=2){var p=e[h],m=e[h+1],g=a*p+l*m+f;e[h]=(n*p+o*m+u)/g,e[h+1]=(i*p+s*m+d)/g}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,a=this.a13,o=this.a21,s=this.a22,l=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,p=0;p<h;p++){var m=e[p],g=r[p],v=a*m+l*g+f;e[p]=(n*m+o*g+u)/v,r[p]=(i*m+s*g+d)/v}},t.squareToQuadrilateral=function(e,r,n,i,a,o,s,l){var u=e-n+a-s,d=r-i+o-l;if(u===0&&d===0)return new t(n-e,a-n,e,i-r,o-i,r,0,0,1);var f=n-a,h=s-a,p=i-o,m=l-o,g=f*m-h*p,v=(u*m-h*d)/g,y=(f*d-u*p)/g;return new t(n-e+v*n,s-e+y*s,e,i-r+v*i,l-r+y*l,r,v,y,1)},t.quadrilateralToSquare=function(e,r,n,i,a,o,s,l){return t.squareToQuadrilateral(e,r,n,i,a,o,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),HMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GMe=function(t){HMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,a,o,s,l,u,d,f,h,p,m,g,v,y,b,w,S){var A=Oz.quadrilateralToQuadrilateral(a,o,s,l,u,d,f,h,p,m,g,v,y,b,w,S);return this.sampleGridWithTransform(r,n,i,A)},e.prototype.sampleGridWithTransform=function(r,n,i,a){if(n<=0||i<=0)throw new le;for(var o=new fo(n,i),s=new Float32Array(2*n),l=0;l<i;l++){for(var u=s.length,d=l+.5,f=0;f<u;f+=2)s[f]=f/2+.5,s[f+1]=d;a.transformPoints(s),xD.checkAndNudgePoints(r,s);try{for(var f=0;f<u;f+=2)r.get(Math.floor(s[f]),Math.floor(s[f+1]))&&o.set(f/2,l)}catch(h){throw new le}}return o},e}(xD),HC=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new GMe,t}(),ci=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Be(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),qMe=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new WMe(a,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new le;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,a=0;a<4;a++){var o=n[(this.shift+a)%4];this.compact?(i<<=7,i+=o>>1&127):(i<<=10,i+=(o>>2&992)+(o>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,o,s){var l=(a>>r-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(mt.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new le},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var a=n-i,o=new Int32Array(n),s=n-1;s>=0;--s)o[s]=e&15,e>>=4;try{var l=new Ax(hi.AZTEC_PARAM);l.decode(o,a)}catch(d){throw new le}for(var u=0,s=0;s<i;s++)u=(u<<4)+o[s];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,o,1,-1),l=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(i,o,-1,1),d=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,u,d))break}r=s,n=l,i=u,a=d,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new le;this.compact=this.nbCenterLayers===5;var h=new Be(r.getX()+.5,r.getY()-.5),p=new Be(n.getX()+.5,n.getY()+.5),m=new Be(i.getX()-.5,i.getY()+.5),g=new Be(a.getX()-.5,a.getY()-.5);return this.expandSquare([h,p,m,g],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var a=new oA(this.image).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch(d){var o=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new ci(o+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new ci(o+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ci(o-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ci(o-7,s-7),!1,-1,-1).toResultPoint()}var l=Dt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),u=Dt.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var a=new oA(this.image,15,l,u).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch(d){e=this.getFirstDifferent(new ci(l+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new ci(l+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new ci(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new ci(l-7,u-7),!1,-1,-1).toResultPoint()}return l=Dt.round((e.getX()+i.getX()+r.getX()+n.getX())/4),u=Dt.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new ci(l,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,a){var o=HC.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,l,l,u,l,u,u,l,u,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,a=this.distanceResultPoint(e,r),o=a/n,s=e.getX(),l=e.getY(),u=o*(r.getX()-e.getX())/a,d=o*(r.getY()-e.getY())/a,f=0;f<n;f++)this.image.get(Dt.round(s+f*u),Dt.round(l+f*d))&&(i|=1<<n-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var a=3;e=new ci(e.getX()-a,e.getY()+a),r=new ci(r.getX()-a,r.getY()-a),n=new ci(n.getX()+a,n.getY()-a),i=new ci(i.getX()+a,i.getY()+a);var o=this.getColor(i,e);if(o===0)return!1;var s=this.getColor(e,r);return s!==o||(s=this.getColor(r,n),s!==o)?!1:(s=this.getColor(n,i),s===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,o=0,s=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(n),f=0;f<d;f++)s+=i,l+=a,this.image.get(Dt.round(s),Dt.round(l))!==u&&o++;var h=o/n;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var a=e.getX()+n,o=e.getY()+i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n,o+=i;for(a-=n,o-=i;this.isValid(a,o)&&this.image.get(a,o)===r;)a+=n;for(a-=n;this.isValid(a,o)&&this.image.get(a,o)===r;)o+=i;return o-=i,new ci(a,o)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new Be(s+i*a,l+i*o),d=new Be(s-i*a,l-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new Be(s+i*a,l+i*o),h=new Be(s-i*a,l-i*o),p=[u,f,d,h];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Dt.round(e.getX()),n=Dt.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Dt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Dt.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(mt.truncDivision(this.nbLayers-4,8)+1)+15},t}(),sA=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new qMe(e.getBlackMatrix()),a=null,o=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new yD().decode(s)}catch(f){n=f}if(o==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),o=new yD().decode(s)}catch(f){throw n!=null?n:f}var l=new Un(o.getText(),o.getRawBytes(),o.getNumBits(),a,Fe.AZTEC,fr.currentTimeMillis()),u=o.getByteSegments();u!=null&&l.putMetadata(On.BYTE_SEGMENTS,u);var d=o.getECLevel();return d!=null&&l.putMetadata(On.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(hr.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,a,o){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),KMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){KMe(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new sA,r)||this}return e})(vf);var un=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch(f){var n=r&&r.get(hr.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,r),o=a.getResultMetadata(),s=270;o!==null&&o.get(On.ORIENTATION)===!0&&(s=s+o.get(On.ORIENTATION)%360),a.putMetadata(On.ORIENTATION,s);var l=a.getResultPoints();if(l!==null)for(var u=i.getHeight(),d=0;d<l.length;d++)l[d]=new Be(u-l[d].getY()-1,l[d].getX());return a}else throw new le}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),a=new xn(n),o=r&&r.get(hr.TRY_HARDER)===!0,s=Math.max(1,i>>(o?8:5)),l;o?l=i:l=15;for(var u=Math.trunc(i/2),d=0;d<l;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,p=u+s*(h?f:-f);if(p<0||p>=i)break;try{a=e.getBlackRow(p,a)}catch(b){continue}for(var m=function(b){if(b===1&&(a.reverse(),r&&r.get(hr.NEED_RESULT_POINT_CALLBACK)===!0)){var w=new Map;r.forEach(function(_,E){return w.set(E,_)}),w.delete(hr.NEED_RESULT_POINT_CALLBACK),r=w}try{var S=g.decodeRow(p,a,r);if(b===1){S.putMetadata(On.ORIENTATION,180);var A=S.getResultPoints();A!==null&&(A[0]=new Be(n-A[0].getX()-1,A[0].getY()),A[1]=new Be(n-A[1].getX()-1,A[1].getY()))}return{value:S}}catch(_){}},g=this,v=0;v<2;v++){var y=m(v);if(typeof y=="object")return y.value}}throw new le},t.recordPattern=function(e,r,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var o=e.getSize();if(r>=o)throw new le;for(var s=!e.get(r),l=0,u=r;u<o;){if(e.get(u)!==s)n[l]++;else{if(++l===i)break;n[l]=1,s=!s}u++}if(!(l===i||l===i-1&&u===o))throw new le},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,a=e.get(r);r>0&&i>=0;)e.get(--r)!==a&&(i--,a=!a);if(i>=0)throw new le;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return Number.POSITIVE_INFINITY;var l=a/o;n*=l;for(var u=0,d=0;d<i;d++){var f=e[d],h=r[d]*l,p=f>h?f-h:h-f;if(p>n)return Number.POSITIVE_INFINITY;u+=p}return u/a},t}(),XMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bD=function(t){XMe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),a=0,o=Int32Array.from([0,0,0,0,0,0]),s=i,l=!1,u=6,d=i;d<n;d++)if(r.get(d)!==l)o[a]++;else{if(a===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var m=un.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);m<f&&(f=m,h=p)}if(h>=0&&r.isRange(Math.max(0,s-(d-s)/2),s,!1))return Int32Array.from([s,d,h]);s+=o[0]+o[1],o=o.slice(2,o.length),o[a-1]=0,o[a]=0,a--}else a++;o[a]=1,l=!l}throw new le},e.decodeCode=function(r,n,i){un.recordPattern(r,i,n);for(var a=e.MAX_AVG_VARIANCE,o=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],u=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);u<a&&(a=u,o=s)}if(o>=0)return o;throw new le},e.prototype.decodeRow=function(r,n,i){var a=i&&i.get(hr.ASSUME_GS1)===!0,o=e.findStartPattern(n),s=o[2],l=0,u=new Uint8Array(20);u[l++]=s;var d;switch(s){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new Ce}for(var f=!1,h=!1,p="",m=o[0],g=o[1],v=Int32Array.from([0,0,0,0,0,0]),y=0,b=0,w=s,S=0,A=!0,_=!1,E=!1;!f;){var N=h;switch(h=!1,y=b,b=e.decodeCode(n,v,g),u[l++]=b,b!==e.CODE_STOP&&(A=!0),b!==e.CODE_STOP&&(S++,w+=S*b),m=g,g+=v.reduce(function(R,L){return R+L},0),b){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Ce}switch(d){case e.CODE_CODE_A:if(b<64)E===_?p+=String.fromCharCode(32+b):p+=String.fromCharCode(32+b+128),E=!1;else if(b<96)E===_?p+=String.fromCharCode(b-64):p+=String.fromCharCode(b+64),E=!1;else switch(b!==e.CODE_STOP&&(A=!1),b){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!_&&E?(_=!0,E=!1):_&&E?(_=!1,E=!1):E=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(b<96)E===_?p+=String.fromCharCode(32+b):p+=String.fromCharCode(32+b+128),E=!1;else switch(b!==e.CODE_STOP&&(A=!1),b){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!_&&E?(_=!0,E=!1):_&&E?(_=!1,E=!1):E=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(b<100)b<10&&(p+="0"),p+=b;else switch(b!==e.CODE_STOP&&(A=!1),b){case e.CODE_FNC_1:a&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}N&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var T=g-m;if(g=n.getNextUnset(g),!n.isRange(g,Math.min(n.getSize(),g+(g-m)/2),!1))throw new le;if(w-=S*y,w%103!==y)throw new yn;var O=p.length;if(O===0)throw new le;O>0&&A&&(d===e.CODE_CODE_C?p=p.substring(0,O-2):p=p.substring(0,O-1));for(var j=(o[1]+o[0])/2,P=m+T/2,D=u.length,F=new Uint8Array(D),I=0;I<D;I++)F[I]=u[I];var k=[new Be(j,r),new Be(P,r)];return new Un(p,F,0,k,Fe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(un),YMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wD=function(t){YMe(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(n,u),f=n.getNextSet(d[1]),h=n.getSize(),p,m;do{e.recordPattern(n,f,u);var g=e.toNarrowWidePattern(u);if(g<0)throw new le;p=e.patternToChar(g),this.decodeRowResult+=p,m=f;try{for(var v=(a=void 0,lb(u)),y=v.next();!y.done;y=v.next()){var b=y.value;f+=b}}catch(D){a={error:D}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}f=n.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var S=lb(u),A=S.next();!A.done;A=S.next()){var b=A.value;w+=b}}catch(D){s={error:D}}finally{try{A&&!A.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}var _=f-m-w;if(f!==h&&_*2<w)throw new le;if(this.usingCheckDigit){for(var E=this.decodeRowResult.length-1,N=0,T=0;T<E;T++)N+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(T));if(this.decodeRowResult.charAt(E)!==e.ALPHABET_STRING.charAt(N%43))throw new yn;this.decodeRowResult=this.decodeRowResult.substring(0,E)}if(this.decodeRowResult.length===0)throw new le;var O;this.extendedMode?O=e.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;var j=(d[1]+d[0])/2,P=m+w/2;return new Un(O,null,0,[new Be(j,r),new Be(P,r)],Fe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),a=r.getNextSet(0),o=0,s=a,l=!1,u=n.length,d=a;d<i;d++)if(r.get(d)!==l)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((d-s)/2)),s,!1))return[s,d];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,l=!l}throw new le},e.toNarrowWidePattern=function(r){var n,i,a=r.length,o=0,s;do{var l=2147483647;try{for(var u=(n=void 0,lb(r)),d=u.next();!d.done;d=u.next()){var f=d.value;f<l&&f>o&&(l=f)}}catch(g){n={error:g}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}o=l,s=0;for(var h=0,p=0,m=0;m<a;m++){var f=r[m];f>o&&(p|=1<<a-1-m,s++,h+=f)}if(s===3){for(var m=0;m<a&&s>0;m++){var f=r[m];if(f>o&&(s--,f*2>=h))return-1}return p}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new le},e.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o==="+"||o==="$"||o==="%"||o==="/"){var s=r.charAt(a+1),l="\0";switch(o){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Ce;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Ce;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new Ce;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Ce;break}i+=l,a++}else i+=o}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(un),ZMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ub=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AD=function(t){ZMe(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.findAsteriskPattern(n),d=n.getNextSet(u[1]),f=n.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var p,m;do{e.recordPattern(n,d,h);var g=this.toPattern(h);if(g<0)throw new le;p=this.patternToChar(g),this.decodeRowResult+=p,m=d;try{for(var v=(a=void 0,ub(h)),y=v.next();!y.done;y=v.next()){var b=y.value;d+=b}}catch(T){a={error:T}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(a)throw a.error}}d=n.getNextSet(d)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var w=0;try{for(var S=ub(h),A=S.next();!A.done;A=S.next()){var b=A.value;w+=b}}catch(T){s={error:T}}finally{try{A&&!A.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}if(d===f||!n.get(d))throw new le;if(this.decodeRowResult.length<2)throw new le;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var _=this.decodeExtended(this.decodeRowResult),E=(u[1]+u[0])/2,N=m+w/2;return new Un(_,null,0,[new Be(E,r),new Be(N,r)],Fe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,o=i,s=!1,l=a.length,u=0,d=i;d<n;d++)if(r.get(d)!==s)a[u]++;else{if(u===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([o,d]);o+=a[0]+a[1],a.copyWithin(0,2,2+u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,s=!s}throw new le},e.prototype.toPattern=function(r){var n,i,a=0;try{for(var o=ub(r),s=o.next();!s.done;s=o.next()){var l=s.value;a+=l}}catch(m){n={error:m}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}for(var u=0,d=r.length,f=0;f<d;f++){var h=Math.round(r[f]*9/a);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var p=0;p<h;p++)u=u<<1|1}return u},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new le},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var o=r.charAt(a);if(o>="a"&&o<="d"){if(a>=n-1)throw new Ce;var s=r.charAt(a+1),l="\0";switch(o){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Ce;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Ce;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="";else throw new Ce;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Ce;break}i+=l,a++}else i+=o}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var a=1,o=0,s=n-1;s>=0;s--)o+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>i&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[o%47])throw new yn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(un),QMe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JMe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SD=function(t){QMe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var a,o,s=this.decodeStart(n),l=this.decodeEnd(n),u=new pt;e.decodeMiddle(n,s[1],l[0],u);var d=u.toString(),f=null;i!=null&&(f=i.get(hr.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,p=!1,m=0;try{for(var g=JMe(f),v=g.next();!v.done;v=g.next()){var y=v.value;if(h===y){p=!0;break}y>m&&(m=y)}}catch(S){a={error:S}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}if(!p&&h>m&&(p=!0),!p)throw new Ce;var b=[new Be(s[1],r),new Be(l[0],r)],w=new Un(d,null,0,b,Fe.ITF,new Date().getTime());return w},e.decodeMiddle=function(r,n,i,a){var o=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(o.fill(0),s.fill(0),l.fill(0);n<i;){un.recordPattern(r,n,o);for(var u=0;u<5;u++){var d=2*u;s[u]=o[d],l[u]=o[d+1]}var f=e.decodeDigit(s);a.append(f.toString()),f=this.decodeDigit(l),a.append(f.toString()),o.forEach(function(h){n+=h})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!r.get(a);a--)i--;if(i!==0)throw new le},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new le;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof le&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var a=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-a,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var a=i.length,o=new Int32Array(a),s=r.getSize(),l=!1,u=0,d=n;o.fill(0);for(var f=n;f<s;f++)if(r.get(f)!==l)o[u]++;else{if(u===a-1){if(un.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=o[0]+o[1],fr.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,l=!l}throw new le},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,o=0;o<a;o++){var s=e.PATTERNS[o],l=un.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=o):l===n&&(i=-1)}if(i>=0)return i%10;throw new le},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(un),eRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pd=function(t){eRe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,a=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,o);var s=i[0];a=i[1];var l=s-(a-s);l>=0&&(n=r.isRange(l,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new Ce;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new Ce;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,a){return this.findGuardPattern(r,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,i,a,o){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var l=0,u=n,d=a.length,f=i,h=n;h<s;h++)if(r.get(h)!==f)o[l]++;else{if(l===d-1){if(un.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=o[0]+o[1];for(var p=o.slice(2,o.length),m=0;m<l-1;m++)o[m]=p[m];o[l-1]=0,o[l]=0,l--}else l++;o[l]=1,f=!f}throw new le},e.decodeDigit=function(r,n,i,a){this.recordPattern(r,i,n);for(var o=this.MAX_AVG_VARIANCE,s=-1,l=a.length,u=0;u<l;u++){var d=a[u],f=un.patternMatchVariance(n,d,e.MAX_INDIVIDUAL_VARIANCE);f<o&&(o=f,s=u)}if(s>=0)return s;throw new le},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(un),tRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rRe=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),l=[new Be((n[0]+n[1])/2,e),new Be(a,e)],u=new Un(o,null,0,l,Fe.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],u=0,d=0;d<5&&l<s;d++){var f=Pd.decodeDigit(e,o,l,Pd.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,tRe(o)),p=h.next();!p.done;p=h.next()){var m=p.value;l+=m}}catch(v){i={error:v}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<4-d),d!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new le;var g=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==g)throw new le;return l},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new le},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[On.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,o=a<10?"0"+a:a.toString();return r+i+"."+o},t}(),nRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iRe=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),o=i.toString(),s=t.parseExtensionString(o),l=[new Be((n[0]+n[1])/2,e),new Be(a,e)],u=new Un(o,null,0,l,Fe.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,r,n){var i,a,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var s=e.getSize(),l=r[1],u=0,d=0;d<2&&l<s;d++){var f=Pd.decodeDigit(e,o,l,Pd.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,nRe(o)),p=h.next();!p.done;p=h.next()){var m=p.value;l+=m}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<1-d),d!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new le;if(parseInt(n.toString())%4!==u)throw new le;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[On.ISSUE_NUMBER,parseInt(e)]])},t}(),aRe=function(){function t(){}return t.decodeRow=function(e,r,n){var i=Pd.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new rRe;return a.decodeRow(e,r,i)}catch(s){var o=new iRe;return o.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),oRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nn=function(t){oRe(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),o=0;o<i.length;o++)a[o]=i[i.length-o-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,i){var a=e.findStartGuardPattern(n),o=i==null?null:i.get(hr.NEED_RESULT_POINT_CALLBACK);if(o!=null){var s=new Be((a[0]+a[1])/2,r);o.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),u=l.rowOffset,d=l.resultString;if(o!=null){var f=new Be(u,r);o.foundPossibleResultPoint(f)}var h=e.decodeEnd(n,u);if(o!=null){var p=new Be((h[0]+h[1])/2,r);o.foundPossibleResultPoint(p)}var m=h[1],g=m+(m-h[0]);if(g>=n.getSize()||!n.isRange(m,g,!1))throw new le;var v=d.toString();if(v.length<8)throw new Ce;if(!e.checkChecksum(v))throw new yn;var y=(a[1]+a[0])/2,b=(h[1]+h[0])/2,w=this.getBarcodeFormat(),S=[new Be(y,r),new Be(b,r)],A=new Un(v,null,0,S,w,new Date().getTime()),_=0;try{var E=aRe.decodeRow(r,n,h[1]);A.putMetadata(On.UPC_EAN_EXTENSION,E.getText()),A.putAllMetadata(E.getResultMetadata()),A.addResultPoints(E.getResultPoints()),_=E.getText().length}catch(j){}var N=i==null?null:i.get(hr.ALLOWED_EAN_EXTENSIONS);if(N!=null){var T=!1;for(var O in N)if(_.toString()===O){T=!0;break}if(!T)throw new le}return w===Fe.EAN_13||Fe.UPC_A,A},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new Ce;i+=o}i*=3;for(var a=n-2;a>=0;a-=2){var o=r.charAt(a).charCodeAt(0)-48;if(o<0||o>9)throw new Ce;i+=o}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Pd),sRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_D=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cA=function(t){sRe(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0,p=0;p<6&&f<d;p++){var m=nn.decodeDigit(r,u,f,nn.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var g=(a=void 0,_D(u)),v=g.next();!v.done;v=g.next()){var y=v.value;f+=y}}catch(A){a={error:A}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}m>=10&&(h|=1<<5-p)}i=e.determineFirstDigit(i,h);var b=nn.findGuardPattern(r,f,!0,nn.MIDDLE_PATTERN,new Int32Array(nn.MIDDLE_PATTERN.length).fill(0));f=b[1];for(var p=0;p<6&&f<d;p++){var m=nn.decodeDigit(r,u,f,nn.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var w=(s=void 0,_D(u)),S=w.next();!S.done;S=w.next()){var y=S.value;f+=y}}catch(E){s={error:E}}finally{try{S&&!S.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Fe.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new le},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(nn),cRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ED=function(t){cRe(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=r.getSize(),f=n[1],h=0;h<4&&f<d;h++){var p=nn.decodeDigit(r,u,f,nn.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var m=(a=void 0,CD(u)),g=m.next();!g.done;g=m.next()){var v=g.value;f+=v}}catch(S){a={error:S}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}}var y=nn.findGuardPattern(r,f,!0,nn.MIDDLE_PATTERN,new Int32Array(nn.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<4&&f<d;h++){var p=nn.decodeDigit(r,u,f,nn.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var b=(s=void 0,CD(u)),w=b.next();!w.done;w=b.next()){var v=w.value;f+=v}}catch(_){s={error:_}}finally{try{w&&!w.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return Fe.EAN_8},e}(nn),lRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ND=function(t){lRe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new cA,r}return e.prototype.getBarcodeFormat=function(){return Fe.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new Un(n.substring(1),null,null,r.getResultPoints(),Fe.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new le},e.prototype.reset=function(){this.ean13Reader.reset()},e}(nn),uRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jD=function(t){uRe(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var a,o,s=this.decodeMiddleCounters.map(function(v){return v});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),u=n[1],d=0,f=0;f<6&&u<l;f++){var h=e.decodeDigit(r,s,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var p=(a=void 0,dRe(s)),m=p.next();!m.done;m=p.next()){var g=m.value;u+=g}}catch(v){a={error:v}}finally{try{m&&!m.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new pt(i),d),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return nn.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){r.insert(0,"0"+i),r.append("0"+a);return}throw le.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Fe.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),i=new pt;i.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(nn),fRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},db=function(t){fRe(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(hr.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(Fe.EAN_13)>-1&&a.push(new cA),i.indexOf(Fe.UPC_A)>-1&&a.push(new ND),i.indexOf(Fe.EAN_8)>-1&&a.push(new ED),i.indexOf(Fe.UPC_E)>-1&&a.push(new jD)),a.length===0&&(a.push(new cA),a.push(new ND),a.push(new ED),a.push(new jD)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,i){var a,o;try{for(var s=TD(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var d=u.decodeRow(r,n,i),f=d.getBarcodeFormat()===Fe.EAN_13&&d.getText().charAt(0)==="0",h=i==null?null:i.get(hr.POSSIBLE_FORMATS),p=h==null||h.includes(Fe.UPC_A);if(f&&p){var m=d.getRawBytes(),g=new Un(d.getText().substring(1),m,m?m.length:null,d.getResultPoints(),Fe.UPC_A);return g.putAllMetadata(d.getResultMetadata()),g}return d}catch(v){}}}catch(v){a={error:v}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}throw new le},e.prototype.reset=function(){var r,n;try{for(var i=TD(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;o.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(un),hRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pRe=function(t){hRe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var a=this.getValidRowData(n);if(!a)throw new le;var o=this.codaBarDecodeRow(a.row);if(!o)throw new le;return new Un(o,null,0,[new Be(a.left,r),new Be(a.right,r)],Fe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var o=[],s=n[0],l=1,u=1;u<n.length;u++)n[u]===s?l++:(s=n[u],o.push(l),l=1);return o.push(l),o.length<23&&(o.length+1)%8!==0?null:{row:o,left:i,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(l,u){return(l+u)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),o=a.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[o]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[o])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(un),mRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ac=function(t){mRe(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(un.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new le},e.count=function(r){return Dt.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]>a&&(a=n[o],i=o);r[i]++},e.decrement=function(r,n){for(var i=0,a=n[0],o=1;o<r.length;o++)n[o]<a&&(a=n[o],i=o);r[i]--},e.isFinderPattern=function(r){var n,i,a=r[0]+r[1],o=a+r[2]+r[3],s=a/o;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=gRe(r),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<l&&(l=h)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(un),Cv=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Iz=function(){function t(e,r,n,i,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Be(n,a)),this.resultPoints.push(new Be(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),vRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pu=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,a,o=0;try{for(var s=vRe(e),l=s.next();!l.done;l=s.next()){var u=l.value;o+=u}}catch(b){i={error:b}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var d=0,f=0,h=e.length,p=0;p<h-1;p++){var m=void 0;for(m=1,f|=1<<p;m<e[p];m++,f&=~(1<<p)){var g=t.combins(o-m-1,h-p-2);if(n&&f===0&&o-m-(h-p-1)>=h-p-1&&(g-=t.combins(o-m-(h-p),h-p-2)),h-p-1>1){for(var v=0,y=o-m-(h-p-2);y>r;y--)v+=t.combins(o-m-y-1,h-p-3);g-=v*(h-1-p)}else o-m>r&&g--;d+=g}o-=m}return d},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var a=1,o=1,s=e;s>n;s--)a*=s,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a},t}(),yRe=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new xn(n),a=0,o=e[0],s=o.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&i.set(a),a++;for(var l=1;l<e.length;++l){for(var u=e[l],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&i.set(a),a++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&i.set(a),a++}return i},t}(),hc=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),GC=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),xRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),la=function(t){xRe(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(GC),bRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pc=function(t){bRe(e,t);function e(r,n,i){var a=t.call(this,r)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(GC),wRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ql=function(t){wRe(e,t);function e(r,n,i){var a=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new Ce;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(GC),r0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ARe=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,a,o,s,l,u;if(!e)return null;if(e.length<2)throw new le;var d=e.substring(0,2);try{for(var f=r0(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var p=h.value;if(p[0]===d)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch(_){r={error:_}}finally{try{h&&!h.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new le;var m=e.substring(0,3);try{for(var g=r0(t.THREE_DIGIT_DATA_LENGTH),v=g.next();!v.done;v=g.next()){var p=v.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch(_){i={error:_}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}try{for(var y=r0(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),b=y.next();!b.done;b=y.next()){var p=b.value;if(p[0]===m)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(_){o={error:_}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(e.length<4)throw new le;var w=e.substring(0,4);try{for(var S=r0(t.FOUR_DIGIT_DATA_LENGTH),A=S.next();!A.done;A=S.next()){var p=A.value;if(p[0]===w)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch(_){l={error:_}}finally{try{A&&!A.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}throw new le},t.processFixedAI=function(e,r,n){if(n.length<e)throw new le;var i=n.substring(0,e);if(n.length<e+r)throw new le;var a=n.substring(e,e+r),o=n.substring(e+r),s="("+i+")"+a,l=t.parseFieldsInGeneralPurpose(o);return l==null?s:s+l},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var o=n.substring(e,a),s=n.substring(a),l="("+i+")"+o,u=t.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),P0=function(){function t(e){this.buffer=new pt,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var a=this.decodeGeneralPurposeField(n,i),o=ARe.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new ql(this.information.getSize(),ql.FNC1,ql.FNC1):new ql(this.information.getSize(),r-1,ql.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new ql(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,a=0;a<n;++a)e.get(r+a)&&(i|=1<<n-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new pc(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new pc(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new pc(this.current.getPosition(),this.buffer.toString()):r=new pc(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new hc(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new pc(this.current.getPosition(),this.buffer.toString());return new hc(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new hc(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new pc(this.current.getPosition(),this.buffer.toString());return new hc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new hc(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new pc(this.current.getPosition(),this.buffer.toString());return new hc(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new hc(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new la(e+5,la.FNC1);if(r>=5&&r<15)return new la(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new la(e+7,""+(n+1));if(n>=90&&n<116)return new la(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new Ce}return new la(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new la(e+5,la.FNC1);if(r>=5&&r<15)return new la(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new la(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new gm("Decoding invalid alphanumeric value: "+n)}return new la(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Dz=function(){function t(e){this.information=e,this.generalDecoder=new P0(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),SRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ba=function(t){SRe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var a=0;a<4;++a){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,a=0;a<13;a++){var o=r.charAt(a+n).charCodeAt(0)-48;i+=a&1?o:3*o}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(Dz),_Re=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CRe=function(t){_Re(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new pt;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(ba),ERe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NRe=function(t){ERe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new pt;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Dz),jRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O0=function(t){jRe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,a);for(var o=this.checkWeight(a),s=1e5,l=0;l<5;++l)o/s===0&&r.append("0"),s/=10;r.append(o)},e}(ba),TRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kz=function(t){TRe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+O0.GTIN_SIZE+e.WEIGHT_SIZE)throw new le;var r=new pt;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+O0.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(O0),PRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ORe=function(t){PRe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(kz),IRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DRe=function(t){IRe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(kz),kRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MRe=function(t){kRe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ba.GTIN_SIZE)throw new le;var r=new pt;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ba.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ba.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(ba),RRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Re=function(t){RRe(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+ba.GTIN_SIZE)throw new le;var r=new pt;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ba.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+ba.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+ba.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(ba),LRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ns=function(t){LRe(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new le;var r=new pt;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=i%32;i/=32;var o=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),o/10===0&&r.append("0"),r.append(o),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(O0);function FRe(t){try{if(t.get(1))return new CRe(t);if(!t.get(2))return new NRe(t);var e=P0.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new ORe(t);case 5:return new DRe(t)}var r=P0.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new MRe(t);case 13:return new $Re(t)}var n=P0.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new ns(t,"310","11");case 57:return new ns(t,"320","11");case 58:return new ns(t,"310","13");case 59:return new ns(t,"320","13");case 60:return new ns(t,"310","15");case 61:return new ns(t,"320","15");case 62:return new ns(t,"310","17");case 63:return new ns(t,"320","17")}}catch(i){throw console.log(i),new gm("unknown decoder: "+t)}}var PD=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),BRe=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,a){r.forEach(function(o){i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),zRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),is=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VRe=function(t){zRe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch(a){}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof le){if(!this.pairs.length)throw new le;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new le},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,a,o=n;o<this.rows.length;o++){var s=this.rows[o];this.pairs.length=0;try{for(var l=(i=void 0,is(r)),u=l.next();!u.done;u=l.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){i={error:h}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(s);try{return this.checkRows(f,o+1)}catch(h){console.log(h)}}}throw new le},e.isValidSequence=function(r){var n,i;try{for(var a=is(e.FINDER_PATTERN_SEQUENCES),o=a.next();!o.done;o=a.next()){var s=o.value;if(!(r.length>s.length)){for(var l=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!==s[u]){l=!1;break}if(l)return!0}}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,a=!1,o=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){o=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}o||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new BRe(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,a,o,s,l,u;try{for(var d=is(n),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==r.length){var p=!0;try{for(var m=(o=void 0,is(h.getPairs())),g=m.next();!g.done;g=m.next()){var v=g.value,y=!1;try{for(var b=(l=void 0,is(r)),w=b.next();!w.done;w=b.next()){var S=w.value;if(PD.equals(v,S)){y=!0;break}}}catch(A){l={error:A}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}y||(p=!1)}}catch(A){o={error:A}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}}}catch(A){i={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,a,o,s,l,u;try{for(var d=is(n),f=d.next();!f.done;f=d.next()){var h=f.value,p=!0;try{for(var m=(o=void 0,is(r)),g=m.next();!g.done;g=m.next()){var v=g.value,y=!1;try{for(var b=(l=void 0,is(h.getPairs())),w=b.next();!w.done;w=b.next()){var S=w.value;if(v.equals(S)){y=!0;break}}}catch(A){l={error:A}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(l)throw l.error}}if(!y){p=!1;break}}}catch(A){o={error:A}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}if(p)return!0}}catch(A){i={error:A}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=yRe.buildBitArray(r),i=FRe(n),a=i.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[o[0],o[1],s[0],s[1]];return new Un(a,null,null,l,Fe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),o=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);a+=l.getLeftChar().getChecksumPortion(),o++;var u=l.getRightChar();u!=null&&(a+=u.getChecksumPortion(),o++)}a%=211;var d=211*(o-4)+a;return d===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var o,s=!0,l=-1;do this.findNextPair(r,n,l),o=this.parseFoundFinderPattern(r,i,a),o===null?l=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(r,o,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new le;var d;try{d=this.decodeDataCharacter(r,o,a,!1)}catch(f){d=null,console.log(f)}return new PD(u,d,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var o=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;s<o&&(d=!r.get(s),!!d);)s++;for(var f=0,h=s,p=s;p<o;p++)if(r.get(p)!==d)a[f]++;else{if(f===3){if(u&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=h,this.startEnd[1]=p;return}u&&e.reverseCounters(a),h+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,f--}else f++;a[f]=1,d=!d}throw new le},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var a=r[i];r[i]=r[n-i-1],r[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,i){var a,o,s;if(i){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,a=this.startEnd[0]-l,o=l,s=this.startEnd[1]}else o=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var u=this.getDecodeFinderCounters();fr.arraycopy(u,0,u,1,u.length-1),u[0]=a;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch(f){return null}return new Iz(d,[o,s],o,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,a){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var l=0,u=o.length-1;l<u;l++,u--){var d=o[l];o[l]=o[u],o[u]=d}}var f=17,h=Dt.sum(new Int32Array(o))/f,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(h-p)/p>.3)throw new le;for(var m=this.getOddCounts(),g=this.getEvenCounts(),v=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var b=1*o[l]/h,w=b+.5;if(w<1){if(b<.3)throw new le;w=1}else if(w>8){if(b>8.7)throw new le;w=8}var S=l/2;l&1?(g[S]=w,y[S]=b-w):(m[S]=w,v[S]=b-w)}this.adjustOddEvenCounts(f);for(var A=4*n.getValue()+(i?0:2)+(a?0:1)-1,_=0,E=0,l=m.length-1;l>=0;l--){if(e.isNotA1left(n,i,a)){var N=e.WEIGHTS[A][2*l];E+=m[l]*N}_+=m[l]}for(var T=0,l=g.length-1;l>=0;l--)if(e.isNotA1left(n,i,a)){var N=e.WEIGHTS[A][2*l+1];T+=g[l]*N}var O=E+T;if(_&1||_>13||_<4)throw new le;var j=(13-_)/2,P=e.SYMBOL_WIDEST[j],D=9-P,F=pu.getRSSvalue(m,P,!0),I=pu.getRSSvalue(g,D,!1),k=e.EVEN_TOTAL_SUBSET[j],R=e.GSUM[j],L=F*k+I+R;return new Cv(L,O)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=Dt.sum(new Int32Array(this.getOddCounts())),i=Dt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1;n>13?o=!0:n<4&&(a=!0);var s=!1,l=!1;i>13?l=!0:i<4&&(s=!0);var u=n+i-r,d=(n&1)===1,f=(i&1)===0;if(u===1)if(d){if(f)throw new le;o=!0}else{if(!f)throw new le;l=!0}else if(u===-1)if(d){if(f)throw new le;a=!0}else{if(!f)throw new le;s=!0}else if(u===0){if(d){if(!f)throw new le;n<i?(a=!0,l=!0):(o=!0,s=!0)}else if(f)throw new le}else throw new le;if(a){if(o)throw new le;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new le;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Ac),URe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WRe=function(t){URe(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Cv),HRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OD=function(t){HRe(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var a,o,s,l,u=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var d=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,d),n.reverse();try{for(var f=fb(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var p=h.value;if(p.getCount()>1)try{for(var m=(s=void 0,fb(this.possibleRightPairs)),g=m.next();!g.done;g=m.next()){var v=g.value;if(v.getCount()>1&&e.checkChecksum(p,v))return e.constructResult(p,v)}}catch(y){s={error:y}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}}}catch(y){a={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(a)throw a.error}}throw new le},e.addOrTally=function(r,n){var i,a;if(n!=null){var o=!1;try{for(var s=fb(r),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),a=new String(i).toString(),o=new pt,s=13-a.length;s>0;s--)o.append("0");o.append(a);for(var l=0,s=0;s<13;s++){var u=o.charAt(s).charCodeAt(0)-48;l+=s&1?u:3*u}l=10-l%10,l===10&&(l=0),o.append(l.toString());var d=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new Un(o.toString(),null,0,[d[0],d[1],f[0],f[1]],Fe.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(r,n,i,a){try{var o=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,o),l=a==null?null:a.get(hr.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),l.foundPossibleResultPoint(new Be(u,i))}var d=this.decodeDataCharacter(r,s,!0),f=this.decodeDataCharacter(r,s,!1);return new WRe(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch(h){return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var a=this.getDataCharacterCounters(),o=0;o<a.length;o++)a[o]=0;if(i)un.recordPatternInReverse(r,n.getStartEnd()[0],a);else{un.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,l=a.length-1;s<l;s++,l--){var u=a[s];a[s]=a[l],a[l]=u}}for(var d=i?16:15,f=Dt.sum(new Int32Array(a))/d,h=this.getOddCounts(),p=this.getEvenCounts(),m=this.getOddRoundingErrors(),g=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var v=a[s]/f,y=Math.floor(v+.5);y<1?y=1:y>8&&(y=8);var b=Math.floor(s/2);s&1?(p[b]=y,g[b]=v-y):(h[b]=y,m[b]=v-y)}this.adjustOddEvenCounts(i,d);for(var w=0,S=0,s=h.length-1;s>=0;s--)S*=9,S+=h[s],w+=h[s];for(var A=0,_=0,s=p.length-1;s>=0;s--)A*=9,A+=p[s],_+=p[s];var E=S+3*A;if(i){if(w&1||w>12||w<4)throw new le;var N=(12-w)/2,T=e.OUTSIDE_ODD_WIDEST[N],O=9-T,j=pu.getRSSvalue(h,T,!1),P=pu.getRSSvalue(p,O,!0),D=e.OUTSIDE_EVEN_TOTAL_SUBSET[N],F=e.OUTSIDE_GSUM[N];return new Cv(j*D+P+F,E)}else{if(_&1||_>10||_<4)throw new le;var N=(10-_)/2,T=e.INSIDE_ODD_WIDEST[N],O=9-T,j=pu.getRSSvalue(h,T,!0),P=pu.getRSSvalue(p,O,!1),I=e.INSIDE_ODD_TOTAL_SUBSET[N],F=e.INSIDE_GSUM[N];return new Cv(P*I+j+F,E)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=r.getSize(),o=!1,s=0;s<a&&(o=!r.get(s),n!==o);)s++;for(var l=0,u=s,d=s;d<a;d++)if(r.get(d)!==o)i[l]++;else{if(l===3){if(Ac.isFinderPattern(i))return[u,d];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,o=!o}throw new le},e.prototype.parseFoundFinderPattern=function(r,n,i,a){for(var o=r.get(a[0]),s=a[0]-1;s>=0&&o!==r.get(s);)s--;s++;var l=a[0]-s,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);fr.arraycopy(u,0,d,1,u.length-1),d[0]=l;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=s,p=a[1];return i&&(h=r.getSize()-1-h,p=r.getSize()-1-p),new Iz(f,[s,a[1]],h,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=Dt.sum(new Int32Array(this.getOddCounts())),a=Dt.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1,l=!1,u=!1;r?(i>12?s=!0:i<4&&(o=!0),a>12?u=!0:a<4&&(l=!0)):(i>11?s=!0:i<5&&(o=!0),a>10?u=!0:a<4&&(l=!0));var d=i+a-n,f=(i&1)===(r?1:0),h=(a&1)===1;if(d===1)if(f){if(h)throw new le;s=!0}else{if(!h)throw new le;u=!0}else if(d===-1)if(f){if(h)throw new le;o=!0}else{if(!h)throw new le;l=!0}else if(d===0){if(f){if(!h)throw new le;i<a?(o=!0,u=!0):(s=!0,l=!0)}else if(h)throw new le}else throw new le;if(o){if(s)throw new le;Ac.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Ac.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new le;Ac.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Ac.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Ac),GRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rh=function(t){GRe(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(hr.POSSIBLE_FORMATS):null,a=r&&r.get(hr.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,o=r&&r.get(hr.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(Fe.EAN_13)||i.includes(Fe.UPC_A)||i.includes(Fe.EAN_8)||i.includes(Fe.UPC_E))&&n.readers.push(new db(r)),i.includes(Fe.CODE_39)&&n.readers.push(new wD(a,o)),i.includes(Fe.CODE_93)&&n.readers.push(new AD),i.includes(Fe.CODE_128)&&n.readers.push(new bD),i.includes(Fe.ITF)&&n.readers.push(new SD),i.includes(Fe.CODABAR)&&n.readers.push(new pRe),i.includes(Fe.RSS_14)&&n.readers.push(new OD),i.includes(Fe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new VRe))),n.readers.length===0&&(n.readers.push(new db(r)),n.readers.push(new wD),n.readers.push(new AD),n.readers.push(new db(r)),n.readers.push(new bD),n.readers.push(new SD),n.readers.push(new OD)),n}return e.prototype.decodeRow=function(r,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,i)}catch(o){}throw new le},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(un),qRe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){qRe(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new rh(n),r,n)||this}return e})(vf);var ID=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vt=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),$t=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),KRe=function(){function t(e,r,n,i,a,o){var s,l;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;var u=0,d=o.getECCodewords(),f=o.getECBlocks();try{for(var h=ID(f),p=h.next();!p.done;p=h.next()){var m=p.value;u+=m.getCount()*(m.getDataCodewords()+d)}}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new Ce;try{for(var a=ID(t.VERSIONS),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new Ce},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Vt(5,new $t(1,3))),new t(2,12,12,10,10,new Vt(7,new $t(1,5))),new t(3,14,14,12,12,new Vt(10,new $t(1,8))),new t(4,16,16,14,14,new Vt(12,new $t(1,12))),new t(5,18,18,16,16,new Vt(14,new $t(1,18))),new t(6,20,20,18,18,new Vt(18,new $t(1,22))),new t(7,22,22,20,20,new Vt(20,new $t(1,30))),new t(8,24,24,22,22,new Vt(24,new $t(1,36))),new t(9,26,26,24,24,new Vt(28,new $t(1,44))),new t(10,32,32,14,14,new Vt(36,new $t(1,62))),new t(11,36,36,16,16,new Vt(42,new $t(1,86))),new t(12,40,40,18,18,new Vt(48,new $t(1,114))),new t(13,44,44,20,20,new Vt(56,new $t(1,144))),new t(14,48,48,22,22,new Vt(68,new $t(1,174))),new t(15,52,52,24,24,new Vt(42,new $t(2,102))),new t(16,64,64,14,14,new Vt(56,new $t(2,140))),new t(17,72,72,16,16,new Vt(36,new $t(4,92))),new t(18,80,80,18,18,new Vt(48,new $t(4,114))),new t(19,88,88,20,20,new Vt(56,new $t(4,144))),new t(20,96,96,22,22,new Vt(68,new $t(4,174))),new t(21,104,104,24,24,new Vt(56,new $t(6,136))),new t(22,120,120,18,18,new Vt(68,new $t(6,175))),new t(23,132,132,20,20,new Vt(62,new $t(8,163))),new t(24,144,144,22,22,new Vt(62,new $t(8,156),new $t(2,155))),new t(25,8,18,6,16,new Vt(7,new $t(1,5))),new t(26,8,32,6,14,new Vt(11,new $t(1,10))),new t(27,12,26,10,24,new Vt(14,new $t(1,16))),new t(28,12,36,10,16,new Vt(18,new $t(1,22))),new t(29,16,36,14,16,new Vt(24,new $t(1,32))),new t(30,16,48,14,22,new Vt(28,new $t(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),XRe=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new Ce;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new fo(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return KRe.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,d=!1;do if(n===a&&i===0&&!s)e[r++]=this.readCorner1(a,o)&255,n-=2,i+=2,s=!0;else if(n===a-2&&i===0&&o&3&&!l)e[r++]=this.readCorner2(a,o)&255,n-=2,i+=2,l=!0;else if(n===a+4&&i===2&&!(o&7)&&!u)e[r++]=this.readCorner3(a,o)&255,n-=2,i+=2,u=!0;else if(n===a-2&&i===0&&(o&7)===4&&!d)e[r++]=this.readCorner4(a,o)&255,n-=2,i+=2,d=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n-=2,i+=2;while(n>=0&&i<o);n+=1,i+=3;do n>=0&&i<o&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,o)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<o);if(r!==this.version.getTotalCodewords())throw new Ce;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var a=0;return this.readModule(e-2,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r,n,i)&&(a|=1),a<<=1,this.readModule(e,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e,r,n,i)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Ke("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=r/i|0,s=n/a|0,l=o*i,u=s*a,d=new fo(u,l),f=0;f<o;++f)for(var h=f*i,p=0;p<s;++p)for(var m=p*a,g=0;g<i;++g)for(var v=f*(i+2)+1+g,y=h+g,b=0;b<a;++b){var w=p*(a+2)+1+b;if(e.get(w,v)){var S=m+b;d.set(S,y)}}return d},t}(),DD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YRe=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,a,o,s=r.getECBlocks(),l=0,u=s.getECBlocks();try{for(var d=DD(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()}}catch(F){n={error:F}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var p=new Array(l),m=0;try{for(var g=DD(u),v=g.next();!v.done;v=g.next())for(var h=v.value,y=0;y<h.getCount();y++){var b=h.getDataCodewords(),w=s.getECCodewords()+b;p[m++]=new t(b,new Uint8Array(w))}}catch(F){a={error:F}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}for(var S=p[0].codewords.length,A=S-s.getECCodewords(),_=A-1,E=0,y=0;y<_;y++)for(var N=0;N<m;N++)p[N].codewords[y]=e[E++];for(var T=r.getVersionNumber()===24,O=T?8:m,N=0;N<O;N++)p[N].codewords[A-1]=e[E++];for(var j=p[0].codewords.length,y=A;y<j;y++)for(var N=0;N<m;N++){var P=T?(N+8)%m:N,D=T&&P>7?y-1:y;p[P].codewords[D]=e[E++]}if(E!==e.length)throw new Ke;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Mz=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ke(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var o=8-n,s=e<o?e:o,l=o-s,u=255>>8-s<<l;r=(a[i]&u)>>l,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|a[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;r=r<<e|(a[i]&u)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),en;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(en||(en={}));var ZRe=function(){function t(){}return t.decode=function(e){var r=new Mz(e),n=new pt,i=new pt,a=new Array,o=en.ASCII_ENCODE;do if(o===en.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,i);else{switch(o){case en.C40_ENCODE:this.decodeC40Segment(r,n);break;case en.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case en.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case en.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case en.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new Ce}o=en.ASCII_ENCODE}while(o!==en.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new wx(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new Ce;if(a<=128)return i&&(a+=128),r.append(String.fromCharCode(a-1)),en.ASCII_ENCODE;if(a===129)return en.PAD_ENCODE;if(a<=229){var o=a-130;o<10&&r.append("0"),r.append(""+o)}else switch(a){case 230:return en.C40_ENCODE;case 231:return en.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return en.ANSIX12_ENCODE;case 239:return en.TEXT_ENCODE;case 240:return en.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new Ce;break}}while(e.available()>0);return en.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Ce;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new Ce}a=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),a=0;break;default:throw new Ce}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new Ce;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new Ce}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),a=0}else throw new Ce;break;default:throw new Ce}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var o=n[a];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new Ce;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new Ce;for(var s=new Uint8Array(o),l=0;l<o;l++){if(e.available()<8)throw new Ce;s[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(ta.decode(s,bt.ISO88591))}catch(u){throw new gm("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),QRe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JRe=function(){function t(){this.rsDecoder=new Ax(hi.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new XRe(e),a=i.getVersion(),o=i.readCodewords(),s=YRe.getDataBlocks(o,a),l=0;try{for(var u=QRe(s),d=u.next();!d.done;d=u.next()){var f=d.value;l+=f.getNumDataCodewords()}}catch(w){r={error:w}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var h=new Uint8Array(l),p=s.length,m=0;m<p;m++){var g=s[m],v=g.getCodewords(),y=g.getNumDataCodewords();this.correctErrors(v,y);for(var b=0;b<y;b++)h[b*p+m]=v[b]}return ZRe.decode(h)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch(a){throw new yn}for(var i=0;i<r;i++)e[i]=n[i]},t}(),e8e=function(){function t(e){this.image=e,this.rectangleDetector=new oA(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new le;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],a=r[2],o=r[3],s=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(a,o)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=t.sampleGrid(this.image,n,i,a,o,s,l);return new WC(u,[n,i,a,o])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new Be(e.getX()+i,e.getY()+a)},t.moveAway=function(e,r,n){var i=e.getX(),a=e.getY();return i<r?i-=1:i+=1,a<n?a-=1:a+=1,new Be(i,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],a=e[2],o=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,a),u=this.transitionsBetween(a,r),d=o,f=[a,r,n,i];return d>s&&(d=s,f[0]=r,f[1]=n,f[2]=i,f[3]=a),d>l&&(d=l,f[0]=n,f[1]=i,f[2]=a,f[3]=r),d>u&&(f[0]=i,f[1]=a,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=t.shiftPoint(n,i,(o+1)*4),l=t.shiftPoint(i,n,(o+1)*4),u=this.transitionsBetween(s,r),d=this.transitionsBetween(l,a);return u<d?(e[0]=r,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),l=t.shiftPoint(r,n,(s+1)*4),u=t.shiftPoint(i,n,(o+1)*4);o=this.transitionsBetween(l,a),s=this.transitionsBetween(u,a);var d=new Be(a.getX()+(i.getX()-n.getX())/(o+1),a.getY()+(i.getY()-n.getY())/(o+1)),f=new Be(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(l,d)+this.transitionsBetween(u,d),p=this.transitionsBetween(l,f)+this.transitionsBetween(u,f);return h>p?d:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],o=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(i,a)+1,l=t.shiftPoint(r,n,s*4),u=t.shiftPoint(i,n,o*4);o=this.transitionsBetween(l,a)+1,s=this.transitionsBetween(u,a)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);var d=(r.getX()+n.getX()+i.getX()+a.getX())/4,f=(r.getY()+n.getY()+i.getY()+a.getY())/4;r=t.moveAway(r,d,f),n=t.moveAway(n,d,f),i=t.moveAway(i,d,f),a=t.moveAway(a,d,f);var h,p;return l=t.shiftPoint(r,n,s*4),l=t.shiftPoint(l,a,o*4),h=t.shiftPoint(n,r,s*4),h=t.shiftPoint(h,i,o*4),u=t.shiftPoint(i,a,s*4),u=t.shiftPoint(u,n,o*4),p=t.shiftPoint(a,i,s*4),p=t.shiftPoint(p,r,o*4),[l,h,u,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,a,o,s){var l=HC.getInstance();return l.sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(r.getX()),o=Math.trunc(r.getY()),s=Math.abs(o-i)>Math.abs(a-n);if(s){var l=n;n=i,i=l,l=a,a=o,o=l}for(var u=Math.abs(a-n),d=Math.abs(o-i),f=-u/2,h=i<o?1:-1,p=n<a?1:-1,m=0,g=this.image.get(s?i:n,s?n:i),v=n,y=i;v!==a;v+=p){var b=this.image.get(s?y:v,s?v:y);if(b!==g&&(m++,g=b),f+=d,f>0){if(y===o)break;y+=h,f-=u}}return m},t}(),lA=function(){function t(){this.decoder=new JRe}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(hr.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=t.NO_POINTS}else{var o=new e8e(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),i=o.getPoints()}var s=n.getRawBytes(),l=new Un(n.getText(),s,8*s.length,i,Fe.DATA_MATRIX,fr.currentTimeMillis()),u=n.getByteSegments();u!=null&&l.putMetadata(On.BYTE_SEGMENTS,u);var d=n.getECLevel();return d!=null&&l.putMetadata(On.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new le;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],l=n[0],u=(l-s+1)/i,d=(o-a+1)/i;if(u<=0||d<=0)throw new le;var f=i/2;a+=f,s+=f;for(var h=new fo(u,d),p=0;p<d;p++)for(var m=a+p*i,g=0;g<u;g++)e.get(s+g*i,m)&&h.set(g,p);return h},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],a=e[1];i<n&&r.get(i,a);)i++;if(i===n)throw new le;var o=i-e[0];if(o===0)throw new le;return o},t.NO_POINTS=[],t}(),t8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){t8e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new lA,r)||this}return e})(vf);var mu;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(mu||(mu={}));var r8e=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new ua(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Ke;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(mu.L,"L",1),t.M=new t(mu.M,"M",0),t.Q=new t(mu.Q,"Q",3),t.H=new t(mu.H,"H",2),t}(),n8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rz=function(){function t(e){this.errorCorrectionLevel=r8e.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return mt.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,a=Number.MAX_SAFE_INTEGER,o=0;try{for(var s=n8e(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,d=u[0];if(d===e||d===r)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<a&&(o=u[1],a=f),e!==r&&(f=t.numBitsDiffering(r,d),f<a&&(o=u[1],a=f))}}catch(h){n={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),i8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ee=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var a=i8e(i),o=a.next();!o.done;o=a.next()){var s=o.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),B=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),a8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qc=function(){function t(e,r){for(var n,i,a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,l=a[0].getECCodewordsPerBlock(),u=a[0].getECBlocks();try{for(var d=a8e(u),f=d.next();!f.done;f=d.next()){var h=f.value;s+=h.getCount()*(h.getDataCodewords()+l)}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Ce;try{return this.getVersionForNumber((e-17)/4)}catch(r){throw new Ce}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Ke;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var o=Rz.numBitsDiffering(e,a);o<r&&(n=i+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new fo(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,o=0;o<n;o++)i===0&&(o===0||o===n-1)||i===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new ee(7,new B(1,19)),new ee(10,new B(1,16)),new ee(13,new B(1,13)),new ee(17,new B(1,9))),new t(2,Int32Array.from([6,18]),new ee(10,new B(1,34)),new ee(16,new B(1,28)),new ee(22,new B(1,22)),new ee(28,new B(1,16))),new t(3,Int32Array.from([6,22]),new ee(15,new B(1,55)),new ee(26,new B(1,44)),new ee(18,new B(2,17)),new ee(22,new B(2,13))),new t(4,Int32Array.from([6,26]),new ee(20,new B(1,80)),new ee(18,new B(2,32)),new ee(26,new B(2,24)),new ee(16,new B(4,9))),new t(5,Int32Array.from([6,30]),new ee(26,new B(1,108)),new ee(24,new B(2,43)),new ee(18,new B(2,15),new B(2,16)),new ee(22,new B(2,11),new B(2,12))),new t(6,Int32Array.from([6,34]),new ee(18,new B(2,68)),new ee(16,new B(4,27)),new ee(24,new B(4,19)),new ee(28,new B(4,15))),new t(7,Int32Array.from([6,22,38]),new ee(20,new B(2,78)),new ee(18,new B(4,31)),new ee(18,new B(2,14),new B(4,15)),new ee(26,new B(4,13),new B(1,14))),new t(8,Int32Array.from([6,24,42]),new ee(24,new B(2,97)),new ee(22,new B(2,38),new B(2,39)),new ee(22,new B(4,18),new B(2,19)),new ee(26,new B(4,14),new B(2,15))),new t(9,Int32Array.from([6,26,46]),new ee(30,new B(2,116)),new ee(22,new B(3,36),new B(2,37)),new ee(20,new B(4,16),new B(4,17)),new ee(24,new B(4,12),new B(4,13))),new t(10,Int32Array.from([6,28,50]),new ee(18,new B(2,68),new B(2,69)),new ee(26,new B(4,43),new B(1,44)),new ee(24,new B(6,19),new B(2,20)),new ee(28,new B(6,15),new B(2,16))),new t(11,Int32Array.from([6,30,54]),new ee(20,new B(4,81)),new ee(30,new B(1,50),new B(4,51)),new ee(28,new B(4,22),new B(4,23)),new ee(24,new B(3,12),new B(8,13))),new t(12,Int32Array.from([6,32,58]),new ee(24,new B(2,92),new B(2,93)),new ee(22,new B(6,36),new B(2,37)),new ee(26,new B(4,20),new B(6,21)),new ee(28,new B(7,14),new B(4,15))),new t(13,Int32Array.from([6,34,62]),new ee(26,new B(4,107)),new ee(22,new B(8,37),new B(1,38)),new ee(24,new B(8,20),new B(4,21)),new ee(22,new B(12,11),new B(4,12))),new t(14,Int32Array.from([6,26,46,66]),new ee(30,new B(3,115),new B(1,116)),new ee(24,new B(4,40),new B(5,41)),new ee(20,new B(11,16),new B(5,17)),new ee(24,new B(11,12),new B(5,13))),new t(15,Int32Array.from([6,26,48,70]),new ee(22,new B(5,87),new B(1,88)),new ee(24,new B(5,41),new B(5,42)),new ee(30,new B(5,24),new B(7,25)),new ee(24,new B(11,12),new B(7,13))),new t(16,Int32Array.from([6,26,50,74]),new ee(24,new B(5,98),new B(1,99)),new ee(28,new B(7,45),new B(3,46)),new ee(24,new B(15,19),new B(2,20)),new ee(30,new B(3,15),new B(13,16))),new t(17,Int32Array.from([6,30,54,78]),new ee(28,new B(1,107),new B(5,108)),new ee(28,new B(10,46),new B(1,47)),new ee(28,new B(1,22),new B(15,23)),new ee(28,new B(2,14),new B(17,15))),new t(18,Int32Array.from([6,30,56,82]),new ee(30,new B(5,120),new B(1,121)),new ee(26,new B(9,43),new B(4,44)),new ee(28,new B(17,22),new B(1,23)),new ee(28,new B(2,14),new B(19,15))),new t(19,Int32Array.from([6,30,58,86]),new ee(28,new B(3,113),new B(4,114)),new ee(26,new B(3,44),new B(11,45)),new ee(26,new B(17,21),new B(4,22)),new ee(26,new B(9,13),new B(16,14))),new t(20,Int32Array.from([6,34,62,90]),new ee(28,new B(3,107),new B(5,108)),new ee(26,new B(3,41),new B(13,42)),new ee(30,new B(15,24),new B(5,25)),new ee(28,new B(15,15),new B(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new ee(28,new B(4,116),new B(4,117)),new ee(26,new B(17,42)),new ee(28,new B(17,22),new B(6,23)),new ee(30,new B(19,16),new B(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new ee(28,new B(2,111),new B(7,112)),new ee(28,new B(17,46)),new ee(30,new B(7,24),new B(16,25)),new ee(24,new B(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new ee(30,new B(4,121),new B(5,122)),new ee(28,new B(4,47),new B(14,48)),new ee(30,new B(11,24),new B(14,25)),new ee(30,new B(16,15),new B(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new ee(30,new B(6,117),new B(4,118)),new ee(28,new B(6,45),new B(14,46)),new ee(30,new B(11,24),new B(16,25)),new ee(30,new B(30,16),new B(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new ee(26,new B(8,106),new B(4,107)),new ee(28,new B(8,47),new B(13,48)),new ee(30,new B(7,24),new B(22,25)),new ee(30,new B(22,15),new B(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new ee(28,new B(10,114),new B(2,115)),new ee(28,new B(19,46),new B(4,47)),new ee(28,new B(28,22),new B(6,23)),new ee(30,new B(33,16),new B(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new ee(30,new B(8,122),new B(4,123)),new ee(28,new B(22,45),new B(3,46)),new ee(30,new B(8,23),new B(26,24)),new ee(30,new B(12,15),new B(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new ee(30,new B(3,117),new B(10,118)),new ee(28,new B(3,45),new B(23,46)),new ee(30,new B(4,24),new B(31,25)),new ee(30,new B(11,15),new B(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new ee(30,new B(7,116),new B(7,117)),new ee(28,new B(21,45),new B(7,46)),new ee(30,new B(1,23),new B(37,24)),new ee(30,new B(19,15),new B(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new ee(30,new B(5,115),new B(10,116)),new ee(28,new B(19,47),new B(10,48)),new ee(30,new B(15,24),new B(25,25)),new ee(30,new B(23,15),new B(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new ee(30,new B(13,115),new B(3,116)),new ee(28,new B(2,46),new B(29,47)),new ee(30,new B(42,24),new B(1,25)),new ee(30,new B(23,15),new B(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new ee(30,new B(17,115)),new ee(28,new B(10,46),new B(23,47)),new ee(30,new B(10,24),new B(35,25)),new ee(30,new B(19,15),new B(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new ee(30,new B(17,115),new B(1,116)),new ee(28,new B(14,46),new B(21,47)),new ee(30,new B(29,24),new B(19,25)),new ee(30,new B(11,15),new B(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new ee(30,new B(13,115),new B(6,116)),new ee(28,new B(14,46),new B(23,47)),new ee(30,new B(44,24),new B(7,25)),new ee(30,new B(59,16),new B(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new ee(30,new B(12,121),new B(7,122)),new ee(28,new B(12,47),new B(26,48)),new ee(30,new B(39,24),new B(14,25)),new ee(30,new B(22,15),new B(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new ee(30,new B(6,121),new B(14,122)),new ee(28,new B(6,47),new B(34,48)),new ee(30,new B(46,24),new B(10,25)),new ee(30,new B(2,15),new B(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new ee(30,new B(17,122),new B(4,123)),new ee(28,new B(29,46),new B(14,47)),new ee(30,new B(49,24),new B(10,25)),new ee(30,new B(24,15),new B(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new ee(30,new B(4,122),new B(18,123)),new ee(28,new B(13,46),new B(32,47)),new ee(30,new B(48,24),new B(14,25)),new ee(30,new B(42,15),new B(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new ee(30,new B(20,117),new B(4,118)),new ee(28,new B(40,47),new B(7,48)),new ee(30,new B(43,24),new B(22,25)),new ee(30,new B(10,15),new B(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new ee(30,new B(19,118),new B(6,119)),new ee(28,new B(18,47),new B(31,48)),new ee(30,new B(34,24),new B(34,25)),new ee(30,new B(20,15),new B(61,16)))],t}(),pn;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(pn||(pn={}));var kD=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[pn.DATA_MASK_000,new t(pn.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[pn.DATA_MASK_001,new t(pn.DATA_MASK_001,function(e,r){return(e&1)===0})],[pn.DATA_MASK_010,new t(pn.DATA_MASK_010,function(e,r){return r%3===0})],[pn.DATA_MASK_011,new t(pn.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[pn.DATA_MASK_100,new t(pn.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[pn.DATA_MASK_101,new t(pn.DATA_MASK_101,function(e,r){return e*r%6===0})],[pn.DATA_MASK_110,new t(pn.DATA_MASK_110,function(e,r){return e*r%6<3})],[pn.DATA_MASK_111,new t(pn.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),o8e=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new Ce;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,o=i-7,n=i-1;n>=o;n--)a=this.copyBit(8,n,a);for(var r=i-8;r<i;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=Rz.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Ce},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Qc.getVersionForNumber(r);for(var n=0,i=e-11,a=5;a>=0;a--)for(var o=e-9;o>=i;o--)n=this.copyBit(o,a,n);var s=Qc.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var o=5;o>=0;o--)for(var a=e-9;a>=i;a--)n=this.copyBit(o,a,n);if(s=Qc.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new Ce},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=kD.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=r.buildFunctionPattern(),o=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,u=0,d=0,f=i-1;f>0;f-=2){f===6&&f--;for(var h=0;h<i;h++)for(var p=o?i-1-h:h,m=0;m<2;m++)a.get(f-m,p)||(d++,u<<=1,this.bitMatrix.get(f-m,p)&&(u|=1),d===8&&(s[l++]=u,d=0,u=0));o=!o}if(l!==r.getTotalCodewords())throw new Ce;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=kD.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,a=e.getHeight();i<a;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),MD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s8e=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,a,o,s;if(e.length!==r.getTotalCodewords())throw new Ke;var l=r.getECBlocksForLevel(n),u=0,d=l.getECBlocks();try{for(var f=MD(d),h=f.next();!h.done;h=f.next()){var p=h.value;u+=p.getCount()}}catch(D){i={error:D}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var m=new Array(u),g=0;try{for(var v=MD(d),y=v.next();!y.done;y=v.next())for(var p=y.value,b=0;b<p.getCount();b++){var w=p.getDataCodewords(),S=l.getECCodewordsPerBlock()+w;m[g++]=new t(w,new Uint8Array(S))}}catch(D){o={error:D}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}for(var A=m[0].codewords.length,_=m.length-1;_>=0;){var E=m[_].codewords.length;if(E===A)break;_--}_++;for(var N=A-l.getECCodewordsPerBlock(),T=0,b=0;b<N;b++)for(var O=0;O<g;O++)m[O].codewords[b]=e[T++];for(var O=_;O<g;O++)m[O].codewords[N]=e[T++];for(var j=m[0].codewords.length,b=N;b<j;b++)for(var O=0;O<g;O++){var P=O<_?b:b+1;m[O].codewords[P]=e[T++]}return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Wi;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Wi||(Wi={}));var yr=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Ke;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Wi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Wi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Wi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Wi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Wi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Wi.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Wi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Wi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Wi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Wi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),c8e=function(){function t(){}return t.decode=function(e,r,n,i){var a=new Mz(e),o=new pt,s=new Array,l=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(a.available()<4)h=yr.TERMINATOR;else{var p=a.readBits(4);h=yr.forBits(p)}switch(h){case yr.TERMINATOR:break;case yr.FNC1_FIRST_POSITION:case yr.FNC1_SECOND_POSITION:f=!0;break;case yr.STRUCTURED_APPEND:if(a.available()<16)throw new Ce;l=a.readBits(8),u=a.readBits(8);break;case yr.ECI:var m=t.parseECIValue(a);if(d=an.getCharacterSetECIByValue(m),d===null)throw new Ce;break;case yr.HANZI:var g=a.readBits(4),v=a.readBits(h.getCharacterCountBits(r));g===t.GB2312_SUBSET&&t.decodeHanziSegment(a,o,v);break;default:var y=a.readBits(h.getCharacterCountBits(r));switch(h){case yr.NUMERIC:t.decodeNumericSegment(a,o,y);break;case yr.ALPHANUMERIC:t.decodeAlphanumericSegment(a,o,y,f);break;case yr.BYTE:t.decodeByteSegment(a,o,y,d,s,i);break;case yr.KANJI:t.decodeKanjiSegment(a,o,y);break;default:throw new Ce}break}}while(h!==yr.TERMINATOR)}catch(b){throw new Ce}return new wx(e,o.toString(),s.length===0?null:s,n===null?null:n.toString(),l,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new Ce;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/96<<8&4294967295|o%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,n--}try{r.append(ta.decode(i,bt.GB2312))}catch(l){throw new Ce(l)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new Ce;for(var i=new Uint8Array(2*n),a=0;n>0;){var o=e.readBits(13),s=o/192<<8&4294967295|o%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,n--}try{r.append(ta.decode(i,bt.SHIFT_JIS))}catch(l){throw new Ce(l)}},t.decodeByteSegment=function(e,r,n,i,a,o){if(8*n>e.available())throw new Ce;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var u;i===null?u=bt.guessEncoding(s,o):u=i.getName();try{r.append(ta.decode(s,u))}catch(d){throw new Ce(d)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Ce;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var a=r.length();n>1;){if(e.available()<11)throw new Ce;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Ce;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new Ce;var i=e.readBits(10);if(i>=1e3)throw new Ce;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new Ce;var a=e.readBits(7);if(a>=100)throw new Ce;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new Ce;var o=e.readBits(4);if(o>=10)throw new Ce;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new Ce},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),$z=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),RD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l8e=function(){function t(){this.rsDecoder=new Ax(hi.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(fo.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new o8e(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){i=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new $z(!0)),a}catch(o){throw i!==null?i:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,a,o,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=s8e.getDataBlocks(u,s,l),f=0;try{for(var h=RD(d),p=h.next();!p.done;p=h.next()){var m=p.value;f+=m.getNumDataCodewords()}}catch(_){n={error:_}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}var g=new Uint8Array(f),v=0;try{for(var y=RD(d),b=y.next();!b.done;b=y.next()){var m=b.value,w=m.getCodewords(),S=m.getNumDataCodewords();this.correctErrors(w,S);for(var A=0;A<S;A++)g[v++]=w[A]}}catch(_){a={error:_}}finally{try{b&&!b.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}return c8e.decode(g,s,l,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch(a){throw new yn}for(var i=0;i<r;i++)e[i]=n[i]},t}(),u8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d8e=function(t){u8e(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=(this.getX()+n)/2,o=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,o,s)},e}(Be),f8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h8e=function(){function t(e,r,n,i,a,o,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,a=this.startY+r/2,o=new Int32Array(3),s=this.image,l=0;l<r;l++){var u=a+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var d=e;d<i&&!s.get(d,u);)d++;for(var f=0;d<i;){if(s.get(d,u))if(f===1)o[1]++;else if(f===2){if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,u,d);if(h!==null)return h}o[0]=o[2],o[1]=1,o[2]=0,f=1}else o[++f]++;else f===1&&f++,o[f]++;d++}if(this.foundPatternCross(o)){var h=this.handlePossibleCenter(o,u,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new le},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var a=this.image,o=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===o||s[1]>n)return NaN;for(;l<o&&!a.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,a,o=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,s,2*e[1],o);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=f8e(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,l,s))return h.combineEstimate(l,s,u)}}catch(m){i={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}var p=new d8e(s,l,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t}(),p8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m8e=function(t){p8e(e,t);function e(r,n,i,a){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=i,o.count=a,a===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=this.count+1,o=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,l=(this.count*this.estimatedModuleSize+i)/a;return new e(o,s,l,a)},e}(Be),g8e=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),zf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v8e=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(hr.TRY_HARDER)!==void 0,n=e!=null&&e.get(hr.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),d=s-1;d<a&&!l;d+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<o;h++)if(i.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,d,h,n);if(p===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var m=this.findRowSkip();m>u[2]&&(d+=m-u[2]-s,h=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,d,o,n);p===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var g=this.selectBestPatterns();return Be.orderBestPatterns(g),new g8e(g)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var a=r/7,o=a/2;return Math.abs(a-e[0])<o&&Math.abs(a-e[1])<o&&Math.abs(3*a-e[2])<3*o&&Math.abs(a-e[3])<o&&Math.abs(a-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var a=this.getCrossCheckStateCount(),o=0,s=this.image;e>=o&&r>=o&&s.get(r-o,e-o);)a[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!s.get(r-o,e-o)&&a[1]<=n;)a[1]++,o++;if(e<o||r<o||a[1]>n)return!1;for(;e>=o&&r>=o&&s.get(r-o,e-o)&&a[0]<=n;)a[0]++,o++;if(a[0]>n)return!1;var l=s.getHeight(),u=s.getWidth();for(o=1;e+o<l&&r+o<u&&s.get(r+o,e+o);)a[2]++,o++;if(e+o>=l||r+o>=u)return!1;for(;e+o<l&&r+o<u&&!s.get(r+o,e+o)&&a[3]<n;)a[3]++,o++;if(e+o>=l||r+o>=u||a[3]>=n)return!1;for(;e+o<l&&r+o<u&&s.get(r+o,e+o)&&a[4]<n;)a[4]++,o++;if(a[4]>=n)return!1;var d=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(d-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var a=this.image,o=a.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(r,l);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!a.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&a.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var a=this.image,o=a.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<o&&a.get(l,r);)s[2]++,l++;if(l===o)return NaN;for(;l<o&&!a.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===o||s[3]>=n)return NaN;for(;l<o&&a.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(o),e[2],a);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],a)))){for(var l=a/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var p=d[f];if(p.aboutEquals(l,s,o)){d[f]=p.combineEstimate(s,o,l),u=!0;break}}if(!u){var m=new m8e(o,s,l);d.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=zf(this.possibleCenters),o=a.next();!o.done;o=a.next()){var s=o.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,a=0,o=0,s=this.possibleCenters.length;try{for(var l=zf(this.possibleCenters),u=l.next();!u.done;u=l.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(a++,o+=d.getEstimatedModuleSize())}}catch(g){e={error:g}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var f=o/s,h=0;try{for(var p=zf(this.possibleCenters),m=p.next();!m.done;m=p.next()){var d=m.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(g){n={error:g}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return h<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,i,a=this.possibleCenters.length;if(a<3)throw new le;var o=this.possibleCenters,s;if(a>3){var l=0,u=0;try{for(var d=zf(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,p=h.getEstimatedModuleSize();l+=p,u+=p*p}}catch(A){e={error:A}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}s=l/a;var m=Math.sqrt(u/a-s*s);o.sort(function(A,_){var E=Math.abs(_.getEstimatedModuleSize()-s),N=Math.abs(A.getEstimatedModuleSize()-s);return E<N?-1:E>N?1:0});for(var g=Math.max(.2*s,m),v=0;v<o.length&&o.length>3;v++){var y=o[v];Math.abs(y.getEstimatedModuleSize()-s)>g&&(o.splice(v,1),v--)}}if(o.length>3){var l=0;try{for(var b=zf(o),w=b.next();!w.done;w=b.next()){var S=w.value;l+=S.getEstimatedModuleSize()}}catch(_){n={error:_}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}s=l/o.length,o.sort(function(_,E){if(E.getCount()===_.getCount()){var N=Math.abs(E.getEstimatedModuleSize()-s),T=Math.abs(_.getEstimatedModuleSize()-s);return N<T?1:N>T?-1:0}else return E.getCount()-_.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),y8e=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(hr.NEED_RESULT_POINT_CALLBACK);var r=new v8e(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(r,n,i);if(a<1)throw new le("No pattern found in proccess finder.");var o=t.computeDimension(r,n,i,a),s=Qc.getProvisionalVersionForDimension(o),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var d=n.getX()-r.getX()+i.getX(),f=n.getY()-r.getY()+i.getY(),h=1-3/l,p=Math.floor(r.getX()+h*(d-r.getX())),m=Math.floor(r.getY()+h*(f-r.getY())),g=4;g<=16;g<<=1)try{u=this.findAlignmentInRegion(a,p,m,g);break}catch(w){if(!(w instanceof le))throw w}var v=t.createTransform(r,n,i,u,o),y=t.sampleGrid(this.image,v,o),b;return u===null?b=[i,r,n]:b=[i,r,n,u],new WC(y,b)},t.createTransform=function(e,r,n,i,a){var o=a-3.5,s,l,u,d;return i!==null?(s=i.getX(),l=i.getY(),u=o-3,d=u):(s=r.getX()-e.getX()+n.getX(),l=r.getY()-e.getY()+n.getY(),u=o,d=o),Oz.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,d,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=HC.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var a=Dt.round(Be.distance(e,r)/i),o=Dt.round(Be.distance(e,n)/i),s=Math.floor((a+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new le("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,i),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(r-(i-r)*o);return o=1,l<0?(o=r/(r-l),l=0):l>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,l),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var a=Math.abs(i-r)>Math.abs(n-e);if(a){var o=e;e=r,r=o,o=n,n=i,i=o}for(var s=Math.abs(n-e),l=Math.abs(i-r),u=-s/2,d=e<n?1:-1,f=r<i?1:-1,h=0,p=n+d,m=e,g=r;m!==p;m+=d){var v=a?g:m,y=a?m:g;if(h===1===this.image.get(v,y)){if(h===2)return Dt.distance(m,g,e,r);h++}if(u+=l,u>0){if(g===i)break;g+=f,u-=s}}return h===2?Dt.distance(n+d,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var a=Math.floor(i*e),o=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-o<e*3)throw new le("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),u=Math.min(this.image.getHeight()-1,n+a);if(u-l<e*3)throw new le("Alignment bottom exceeds estimated module size.");var d=new h8e(this.image,o,l,s-o,u-l,e,this.resultPointCallback);return d.find()},t}(),uA=function(){function t(){this.decoder=new l8e}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(hr.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),i=t.NO_POINTS}else{var o=new y8e(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),i=o.getPoints()}n.getOther()instanceof $z&&n.getOther().applyMirroredCorrection(i);var s=new Un(n.getText(),n.getRawBytes(),void 0,i,Fe.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(On.BYTE_SEGMENTS,l);var u=n.getECLevel();return u!==null&&s.putMetadata(On.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(s.putMetadata(On.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(On.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new le;var i=this.moduleSize(r,e),a=r[1],o=n[1],s=r[0],l=n[0];if(s>=l||a>=o)throw new le;if(o-a!==l-s&&(l=s+(o-a),l>=e.getWidth()))throw new le;var u=Math.round((l-s+1)/i),d=Math.round((o-a+1)/i);if(u<=0||d<=0)throw new le;if(d!==u)throw new le;var f=Math.floor(i/2);a+=f,s+=f;var h=s+Math.floor((u-1)*i)-l;if(h>0){if(h>f)throw new le;s-=h}var p=a+Math.floor((d-1)*i)-o;if(p>0){if(p>f)throw new le;a-=p}for(var m=new fo(u,d),g=0;g<d;g++)for(var v=a+Math.floor(g*i),y=0;y<u;y++)e.get(s+Math.floor(y*i),v)&&m.set(y,g);return m},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),a=e[0],o=e[1],s=!0,l=0;a<i&&o<n;){if(s!==r.get(a,o)){if(++l===5)break;s=!s}a++,o++}if(a===i||o===n)throw new le;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),x8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Et=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Dt.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var o=x8e(e),s=o.next();!s.done;s=o.next()){var l=s.value;i[a++]=l}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=sn.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),b8e=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),w8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A8e=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),a=t.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(n,i)),new b8e(i,a)},t.detect=function(e,r){for(var n,i,a=new Array,o=0,s=0,l=!1;o<r.getHeight();){var u=t.findVertices(r,o,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var d=(n=void 0,w8e(a)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())))}}catch(p){n={error:p}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(l=!0,a.push(u),!e)break;u[2]!=null?(s=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return a},t.findVertices=function(e,r,n){var i=e.getHeight(),a=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,i,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,a,o){for(var s=new Array(4),l=!1,u=new Int32Array(o.length);i<r;i+=t.ROW_STEP){var d=t.findGuardPattern(e,a,i,n,!1,o,u);if(d!=null){for(;i>0;){var f=t.findGuardPattern(e,a,--i,n,!1,o,u);if(f!=null)d=f;else{i++;break}}s[0]=new Be(d[0],i),s[1]=new Be(d[1],i),l=!0;break}}var h=i+1;if(l){for(var p=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);h<r;h++){var d=t.findGuardPattern(e,f[0],h,n,!1,o,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}h-=p+1,s[2]=new Be(f[0],h),s[3]=new Be(f[1],h)}return h-i<t.BARCODE_MIN_HEIGHT&&sn.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,a,o,s){sn.fillWithin(s,0,s.length,0);for(var l=r,u=0;e.get(l,n)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var d=l,f=0,h=o.length,p=a;d<i;d++){var m=e.get(d,n);if(m!==p)s[f]++;else{if(f===h-1){if(t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=s[0]+s[1],fr.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,p=!p}}return f===h-1&&t.patternMatchVariance(s,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,o=0,s=0;s<i;s++)a+=e[s],o+=r[s];if(a<o)return 1/0;var l=a/o;n*=l;for(var u=0,d=0;d<i;d++){var f=e[d],h=r[d]*l,p=f>h?f-h:h-f;if(p>n)return 1/0;u+=p}return u/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),S8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rc=function(){function t(e,r){if(r.length===0)throw new Ke;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),fr.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=S8e(this.coefficients),o=a.next();!o.done;o=a.next()){var s=o.value;i=this.field.add(i,s)}}catch(f){r={error:f}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)l=this.field.add(this.field.multiply(e,l),this.coefficients[d]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ke("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),o=n.length-r.length;fr.arraycopy(n,0,a,0,o);for(var s=o;s<n.length;s++)a[s]=this.field.add(r[s-o],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ke("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ke("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,o=new Int32Array(n+a-1),s=0;s<n;s++)for(var l=r[s],u=0;u<a;u++)o[s+u]=this.field.add(o[s+u],this.field.multiply(l,i[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Ke;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new pt,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),_8e=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Ke;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Pz;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),C8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E8e=function(t){C8e(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var a=1,o=0;o<r;o++)i.expTable[o]=a,a=a*n%r;for(var o=0;o<r-1;o++)i.logTable[i.expTable[o]]=o;return i.zero=new Rc(i,new Int32Array([0])),i.one=new Rc(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Ke;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Rc(this,i)},e.PDF417_GF=new e(Et.NUMBER_OF_CODEWORDS,3),e}(_8e),N8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j8e=function(){function t(){this.field=E8e.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,a,o=new Rc(this.field,e),s=new Int32Array(r),l=!1,u=r;u>0;u--){var d=o.evaluateAt(this.field.exp(u));s[r-u]=d,d!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var h=N8e(n),p=h.next();!p.done;p=h.next()){var m=p.value,g=this.field.exp(e.length-1-m),v=new Rc(this.field,new Int32Array([this.field.subtract(0,g),1]));f=f.multiply(v)}}catch(N){i={error:N}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}for(var y=new Rc(this.field,s),b=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),y,r),w=b[0],S=b[1],A=this.findErrorLocations(w),_=this.findErrorMagnitudes(S,w,A),u=0;u<A.length;u++){var E=e.length-1-this.field.log(A[u]);if(E<0)throw yn.getChecksumInstance();e[E]=this.field.subtract(e[E],_[u])}return A.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=e,o=r,s=this.field.getZero(),l=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=a,d=s;if(a=o,s=l,a.isZero())throw yn.getChecksumInstance();o=u;for(var f=this.field.getZero(),h=a.getCoefficient(a.getDegree()),p=this.field.inverse(h);o.getDegree()>=a.getDegree()&&!o.isZero();){var m=o.getDegree()-a.getDegree(),g=this.field.multiply(o.getCoefficient(o.getDegree()),p);f=f.add(this.field.buildMonomial(m,g)),o=o.subtract(a.multiplyByMonomial(m,g))}l=f.multiply(s).subtract(d).negative()}var v=l.getCoefficient(0);if(v===0)throw yn.getChecksumInstance();var y=this.field.inverse(v),b=l.multiply(y),w=o.multiply(y);return[b,w]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,a=1;a<this.field.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==r)throw yn.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),a=new Int32Array(i),o=1;o<=i;o++)a[i-o]=this.field.multiply(o,r.getCoefficient(o));for(var s=new Rc(this.field,a),l=n.length,u=new Int32Array(l),o=0;o<l;o++){var d=this.field.inverse(n[o]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(s.evaluateAt(d));u[o]=this.field.multiply(f,h)}return u},t}(),dA=function(){function t(e,r,n,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,a)}return t.prototype.constructor_1=function(e,r,n,i,a){var o=r==null||n==null,s=i==null||a==null;if(o&&s)throw new le;o?(r=new Be(0,i.getY()),n=new Be(0,a.getY())):s&&(i=new Be(e.getWidth()-1,r.getY()),a=new Be(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,a=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var d=new Be(l.getX(),u);n?i=d:o=d}if(r>0){var f=n?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+r);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var p=new Be(f.getX(),h);n?a=p:s=p}return new t(this.image,i,a,o,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),T8e=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),qC=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(o,s,l,u,d,f){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,p;switch(f){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(o);break;case"p":p=parseFloat(r[n]).toPrecision(o);break;case"e":p=parseFloat(r[n]).toExponential(o);break;case"x":p=parseInt(r[n]).toString(h||16);break;case"d":p=parseFloat(parseInt(r[n],h||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(l),g=l&&l[0]+""=="0"?"0":" ";p.length<m;)p=s!==void 0?p+g:g+p;return p}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),P8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lz=function(){function t(e){this.boundingBox=new dA(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new qC,i=0;try{for(var a=P8e(this.codewords),o=a.next();!o.done;o=a.next()){var s=o.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),O8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},I8e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},nh=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,a=function(f,h){var p={getKey:function(){return f},getValue:function(){return h}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var o=O8e(this.values.entries()),s=o.next();!s.done;s=o.next()){var l=I8e(s.value,2),u=l[0],d=l[1];a(u,d)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return Et.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),D8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$D=function(t){D8e(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=hb(this.getCodewords()),a=i.next();!a.done;a=i.next()){var o=a.value;o!=null&&o.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,d=1,f=0,h=s;h<l;h++)if(n[h]!=null){var p=n[h],m=p.getRowNumber()-u;if(m===0)f++;else if(m===1)d=Math.max(d,f),f=1,u=p.getRowNumber();else if(m<0||p.getRowNumber()>=r.getRowCount()||m>h)n[h]=null;else{var g=void 0;d>2?g=(d-2)*m:g=m;for(var v=g>=h,y=1;y<=g&&!v;y++)v=n[h-y]!=null;v?n[h]=null:(u=p.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var o=hb(this.getCodewords()),s=o.next();!s.done;s=o.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=a.length)continue;a[u]++}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),u=-1,d=o;d<s;d++)if(l[d]!=null){var f=l[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=r.getRowCount()?l[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),a=new nh,o=new nh,s=new nh,l=new nh;try{for(var u=hb(i),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,p=f.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(h*3+1);break;case 1:l.setValue(h/3),s.setValue(h%3);break;case 2:a.setValue(h+1);break}}}}catch(g){r={error:g}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(a.getValue().length===0||o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||o.getValue()[0]+s.getValue()[0]<Et.MIN_ROWS_IN_BARCODE||o.getValue()[0]+s.getValue()[0]>Et.MAX_ROWS_IN_BARCODE)return null;var m=new T8e(a.getValue()[0],o.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,m),m},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(r[i]!=null){var o=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:o+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+t.prototype.toString.call(this)},e}(Lz),k8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M8e=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Et.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){var s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var o=n[r],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=s[r],u[3]=l[r],r>0&&(u[0]=n[r-1],u[4]=s[r-1],u[5]=l[r-1]),r>1&&(u[8]=n[r-2],u[10]=s[r-2],u[11]=l[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=s[r+1],u[7]=l[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=s[r+2],u[13]=l[r+2]);try{for(var d=k8e(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(o,h))return}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new qC,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t}(),R8e=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),$8e=function(){function t(){}return t.initialize=function(){for(var e=0;e<Et.SYMBOL_TABLE.length;e++)for(var r=Et.SYMBOL_TABLE[e],n=r&1,i=0;i<Et.BARS_IN_MODULE;i++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Et.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Et.BARS_IN_MODULE-i-1]=Math.fround(a/Et.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Dt.sum(e),n=new Int32Array(Et.BARS_IN_MODULE),i=0,a=0,o=0;o<Et.MODULES_IN_CODEWORD;o++){var s=r/(2*Et.MODULES_IN_CODEWORD)+o*r/Et.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Et.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Dt.sum(e),n=new Array(Et.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var a=aA.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,u=t.RATIOS_TABLE[s],d=0;d<Et.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-n[d]);if(l+=Math.fround(f*f),l>=a)break}l<a&&(a=l,o=Et.SYMBOL_TABLE[s])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Et.SYMBOL_TABLE.length).map(function(e){return new Array(Et.BARS_IN_MODULE)}),t}(),L8e=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),LD=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),F8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B8e=function(t){F8e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(yi),z8e=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new B8e;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new VC;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),V8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U8e=function(t){V8e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(yi),W8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H8e=function(t){W8e(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Ke("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new U8e;i=mt.MAX_VALUE}this.buf=sn.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new VC;this.ensureCapacity(this.count+i),fr.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return sn.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(z8e),nr;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(nr||(nr={}));function Fz(){if(typeof window!="undefined")return window.BigInt||null;if(typeof globalThis!="undefined")return globalThis.BigInt||null;if(typeof self!="undefined")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var n0;function ds(t){if(typeof n0=="undefined"&&(n0=Fz()),n0===null)throw new Error("BigInt is not supported!");return n0(t)}function G8e(){var t=[];t[0]=ds(1);var e=ds(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var q8e=function(){function t(){}return t.decode=function(e,r){var n=new pt(""),i=an.ISO8859_1;n.enableDecoding(i);for(var a=1,o=e[a++],s=new L8e;a<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(o,e,i,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:an.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Ce;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)o=e[a++];else throw Ce.getFormatInstance()}if(n.length()===0)throw Ce.getFormatInstance();var l=new wx(null,n.toString(),null,r);return l.setOther(s),l},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Ce.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)i[a]=e[r];n.setSegmentIndex(mt.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new pt;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new pt;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new pt;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new pt;r=t.textCompaction(e,r+1,d),n.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new pt;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(mt.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new pt;r=t.numericCompaction(e,r+1,h),n.setTimestamp(LD.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new pt;r=t.numericCompaction(e,r+1,p),n.setChecksum(mt.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var m=new pt;r=t.numericCompaction(e,r+1,m),n.setFileSize(LD.parseLong(m.toString()));break;default:throw Ce.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Ce.getFormatInstance()}if(s!==-1){var g=r-s;n.isLastSegment()&&g--,n.setOptionalData(sn.copyOfRange(e,s,s+g))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),o=0,s=!1;r<e[0]&&!s;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[o]=l/30,i[o+1]=l%30,o+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],a[o]=l,o++;break}}return t.decodeTextCompaction(i,a,o,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var a=nr.ALPHA,o=nr.ALPHA,s=0;s<n;){var l=e[s],u="";switch(a){case nr.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:a=nr.LOWER;break;case t.ML:a=nr.MIXED;break;case t.PS:o=a,a=nr.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=nr.ALPHA;break}break;case nr.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:o=a,a=nr.ALPHA_SHIFT;break;case t.ML:a=nr.MIXED;break;case t.PS:o=a,a=nr.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=nr.ALPHA;break}break;case nr.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:a=nr.PUNCT;break;case 26:u=" ";break;case t.LL:a=nr.LOWER;break;case t.AL:a=nr.ALPHA;break;case t.PS:o=a,a=nr.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=nr.ALPHA;break}break;case nr.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=nr.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=nr.ALPHA;break}break;case nr.ALPHA_SHIFT:if(a=o,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=nr.ALPHA;break}break;case nr.PUNCT_SHIFT:if(a=o,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=nr.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=nr.ALPHA;break}break}u!==""&&i.append(u),s++}},t.byteCompaction=function(e,r,n,i,a){var o=new H8e,s=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=r[i++];i<r[0]&&!u;)switch(d[s++]=f,l=900*l+f,f=r[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(ds(l)>>ds(8*(5-h))));l=0,s=0}break}i===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[s++]=f);for(var p=0;p<s;p++)o.write(d[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!u;){var m=r[i++];if(m<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+m;else switch(m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(s%5===0&&s>0){for(var h=0;h<6;++h)o.write(Number(ds(l)>>ds(8*(5-h))));l=0,s=0}}break}return a.append(ta.decode(o.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,a=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)o[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(t.decodeBase900toBase10(o,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=ds(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*ds(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new Ce;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=Fz()?G8e():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Vf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K8e=function(){function t(){}return t.decode=function(e,r,n,i,a,o,s){for(var l=new dA(e,r,n,i,a),u=null,d=null,f,h=!0;;h=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,l,r,!0,o,s)),i!=null&&(d=t.getRowIndicatorColumn(e,l,i,!1,o,s)),f=t.merge(u,d),f==null)throw le.getNotFoundInstance();var p=f.getBoundingBox();if(h&&p!=null&&(p.getMinY()<l.getMinY()||p.getMaxY()>l.getMaxY()))l=p;else break}f.setBoundingBox(l);var m=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(m,d);for(var g=u!=null,v=1;v<=m;v++){var y=g?v:m-v;if(f.getDetectionResultColumn(y)===void 0){var b=void 0;y===0||y===m?b=new $D(l,y===0):b=new Lz(l),f.setDetectionResultColumn(y,b);for(var w=-1,S=w,A=l.getMinY();A<=l.getMaxY();A++){if(w=t.getStartColumn(f,y,A,g),w<0||w>l.getMaxX()){if(S===-1)continue;w=S}var _=t.detectCodeword(e,l.getMinX(),l.getMaxX(),g,w,A,o,s);_!=null&&(b.setCodeword(A,_),S=w,o=Math.min(o,_.getWidth()),s=Math.max(s,_.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=dA.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new M8e(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),o=0;try{for(var s=Vf(i),l=s.next();!l.done;l=s.next()){var u=l.value;if(o+=a-u,u>0)break}}catch(p){r={error:p}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var d=e.getCodewords(),f=0;o>0&&d[f]==null;f++)o--;for(var h=0,f=i.length-1;f>=0&&(h+=a-i[f],!(i[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(o,h,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var a=Vf(e),o=a.next();!o.done;o=a.next()){var s=o.value;i=Math.max(i,s)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,a,o){for(var s=new $D(r,i),l=0;l<2;l++)for(var u=l===0?1:-1,d=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),i,d,f,a,o);h!=null&&(s.setCodeword(f,h),i?d=h.getStartX():d=h.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Et.MAX_CODEWORDS_IN_BARCODE)throw le.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=r[s][l+1].getValue(),d=s*e.getBarcodeColumnCount()+l;u.length===0?n.push(d):u.length===1?i[d]=u[0]:(o.push(d),a.push(u))}for(var f=new Array(a.length),h=0;h<f.length;h++)f[h]=a[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Et.toIntArray(n),Et.toIntArray(o),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,a){for(var o=new Int32Array(i.length),s=100;s-- >0;){for(var l=0;l<o.length;l++)r[i[l]]=a[l][o[l]];try{return t.decodeCodewords(r,e,n)}catch(d){var u=d instanceof yn;if(!u)throw d}if(o.length===0)throw yn.getChecksumInstance();for(var l=0;l<o.length;l++)if(o[l]<a[l].length-1){o[l]++;break}else if(o[l]=0,l===o.length-1)throw yn.getChecksumInstance()}throw yn.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,a,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<o.length;s++)for(var l=0;l<o[s].length;l++)o[s][l]=new nh;var u=0;try{for(var d=Vf(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var p=(i=void 0,Vf(h.getCodewords())),m=p.next();!m.done;m=p.next()){var g=m.value;if(g!=null){var v=g.getRowNumber();if(v>=0){if(v>=o.length)continue;o[v][u].setValue(g.getValue())}}}}catch(y){i={error:y}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u++}}catch(y){r={error:y}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var a,o,s=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var d=(a=void 0,Vf(e.getDetectionResultColumn(r).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(i?h.getEndX():h.getStartX())+s*u*(h.getEndX()-h.getStartX())}}catch(p){a={error:p}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,a,o,s,l){a=t.adjustCodewordStartColumn(e,r,n,i,a,o);var u=t.getModuleBitCount(e,r,n,i,a,o);if(u==null)return null;var d,f=Dt.sum(u);if(i)d=a+f;else{for(var h=0;h<u.length/2;h++){var p=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=p}d=a,a=d-f}if(!t.checkCodewordSkew(f,s,l))return null;var m=$8e.getDecodedValue(u),g=Et.getCodeword(m);return g===-1?null:new R8e(a,d,t.getCodewordBucketNumber(m),g)},t.getModuleBitCount=function(e,r,n,i,a,o){for(var s=a,l=new Int32Array(8),u=0,d=i?1:-1,f=i;(i?s<n:s>=r)&&u<l.length;)e.get(s,o)===f?(l[u]++,s+=d):(u++,f=!f);return u===l.length||s===(i?n:r)&&u===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,a,o){for(var s=a,l=i?-1:1,u=0;u<2;u++){for(;(i?s>=r:s<n)&&i===e.get(s,o);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=l}l=-l,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw Ce.getFormatInstance();var i=1<<r+1,a=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var o=q8e.decode(e,""+r);return o.setErrorsCorrected(a),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw yn.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw Ce.getFormatInstance();var n=e[0];if(n>e.length)throw Ce.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Ce.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new qC,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new j8e,t}(),X8e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fA=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw le.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof Ce||n instanceof yn?le.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,a,o=new Array,s=A8e.detectMultiple(e,r,n);try{for(var l=X8e(s.getPoints()),u=l.next();!u.done;u=l.next()){var d=u.value,f=K8e.decode(s.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new Un(f.getText(),f.getRawBytes(),void 0,d,Fe.PDF_417);h.putMetadata(On.ERROR_CORRECTION_LEVEL,f.getECLevel());var p=f.getOther();p!=null&&h.putMetadata(On.PDF417_EXTRA_METADATA,p),o.push(h)}}catch(m){i={error:m}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return o.map(function(m){return m})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?mt.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Et.MODULES_IN_CODEWORD/Et.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Et.MODULES_IN_CODEWORD/Et.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Et.MODULES_IN_CODEWORD/Et.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Et.MODULES_IN_CODEWORD/Et.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),Y8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FD=function(t){Y8e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(yi),BD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z8e=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(hr.TRY_HARDER)!==void 0,n=e==null?null:e.get(hr.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(o){return o===Fe.UPC_A||o===Fe.UPC_E||o===Fe.EAN_13||o===Fe.EAN_8||o===Fe.CODABAR||o===Fe.CODE_39||o===Fe.CODE_93||o===Fe.CODE_128||o===Fe.ITF||o===Fe.RSS_14||o===Fe.RSS_EXPANDED});a&&!r&&i.push(new rh(e)),n.includes(Fe.QR_CODE)&&i.push(new uA),n.includes(Fe.DATA_MATRIX)&&i.push(new lA),n.includes(Fe.AZTEC)&&i.push(new sA),n.includes(Fe.PDF_417)&&i.push(new fA),a&&r&&i.push(new rh(e))}i.length===0&&(r||i.push(new rh(e)),i.push(new uA),i.push(new lA),i.push(new sA),i.push(new fA),r&&i.push(new rh(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=BD(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new FD("No readers where selected, nothing can be read.");try{for(var i=BD(this.readers),a=i.next();!a.done;a=i.next()){var o=a.value;try{return o.decode(e,this.hints)}catch(s){if(s instanceof FD)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new le("No MultiFormat Readers were able to detect the code.")},t}(),Q8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bz=function(t){Q8e(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,a=new Z8e;return a.setHints(r),i=t.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(vf),J8e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){J8e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new fA,r)||this}return e})(vf);var e6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){e6e(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new uA,r)||this}return e})(vf);var hA;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(hA||(hA={}));const i0=hA;var zz=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new js(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,a=r.length;a<=e;a++){var o=n.multiply(new js(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Ke("No error correction bytes");var n=e.length-r;if(n<=0)throw new Ke("No data bytes provided");var i=this.buildGenerator(r),a=new Int32Array(n);fr.arraycopy(e,0,a,0,n);var o=new js(this.field,a);o=o.multiplyByMonomial(r,1);for(var s=o.divide(i)[1],l=s.getCoefficients(),u=r-l.length,d=0;d<u;d++)e[n+d]=0;fr.arraycopy(l,0,e,n+u,l.length)},t}(),ih=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a-1;o++)for(var s=n[o],l=0;l<i-1;l++){var u=s[l];u===s[l+1]&&u===n[o+1][l]&&u===n[o+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=0;s<i;s++){var l=n[o];s+6<i&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&r++,o+6<a&&n[o][s]===1&&n[o+1][s]===0&&n[o+2][s]===1&&n[o+3][s]===1&&n[o+4][s]===1&&n[o+5][s]===0&&n[o+6][s]===1&&(t.isWhiteVertical(n,s,o-4,o)||t.isWhiteVertical(n,s,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),o=0;o<a;o++)for(var s=n[o],l=0;l<i;l++)s[l]===1&&r++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(r*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,r,n){var i,a;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,i=(a&1)+a%3;break;case 6:a=n*r,i=(a&1)+a%3&1;break;case 7:a=n*r,i=a%3+(n+r&1)&1;break;default:throw new Ke("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),o=e.getArray(),s=0;s<i;s++){for(var l=0,u=-1,d=0;d<a;d++){var f=r?o[s][d]:o[d][s];f===u?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,u=f)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),t6e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r6e=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=t6e(this.bytes),a=i.next();!a.done;a=i.next()){var o=a.value;sn.fill(o,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],o=r.bytes[n],s=0,l=this.width;s<l;++s)if(a[s]!==o[s])return!1;return!0},t.prototype.toString=function(){for(var e=new pt,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append("\n")}return e.toString()},t}(),pA=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new pt;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),n6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gr=function(t){n6e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(yi),zD=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,i,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new xn;t.makeTypeInfoBits(e,r,i);for(var a=0,o=i.getSize();a<o;++a){var s=i.get(i.getSize()-1-a),l=t.TYPE_INFO_COORDINATES[a],u=l[0],d=l[1];if(n.setBoolean(u,d,s),a<8){var f=n.getWidth()-a-1,h=8;n.setBoolean(f,h,s)}else{var f=8,h=n.getHeight()-7+(a-8);n.setBoolean(f,h,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new xn;t.makeVersionInfoBits(e,n);for(var i=6*3-1,a=0;a<6;++a)for(var o=0;o<3;++o){var s=n.get(i);i--,r.setBoolean(a,r.getHeight()-11+o,s),r.setBoolean(r.getHeight()-11+o,a,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,a=-1,o=n.getWidth()-1,s=n.getHeight()-1;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var u=o-l;if(t.isEmpty(n.get(u,s))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,r!==255&&ih.getDataMaskBit(r,u,s)&&(d=!d),n.setBoolean(u,s,d)}}s+=a}a=-a,s+=a,o-=2}if(i!==e.getSize())throw new gr("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-mt.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Ke("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!pA.isValidMaskPattern(r))throw new gr("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(a,10);var o=new xn;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new gr("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new gr("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new gr;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new gr;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new gr;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],o=0;o<5;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],o=0;o<7;++o)n.setNumber(e+o,r+i,a[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,o=i.length;a!==o;a++){var s=i[a];if(s>=0)for(var l=0;l!==o;l++){var u=i[l];u>=0&&t.isEmpty(r.get(u,s))&&t.embedPositionAdjustmentPattern(u-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),i6e=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),VD=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return ih.applyMaskPenaltyRule1(e)+ih.applyMaskPenaltyRule2(e)+ih.applyMaskPenaltyRule3(e)+ih.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(i0.CHARACTER_SET)!==void 0;a&&(i=n.get(i0.CHARACTER_SET).toString());var o=this.chooseMode(e,i),s=new xn;if(o===yr.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=an.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(o,s);var u=new xn;this.appendBytes(e,o,u,i);var d;if(n!==null&&n.get(i0.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(i0.QR_VERSION).toString(),10);d=Qc.getVersionForNumber(f);var h=this.calculateBitsNeeded(o,s,u,d);if(!this.willFit(h,d,r))throw new gr("Data too big for requested version")}else d=this.recommendVersion(r,o,s,u);var p=new xn;p.appendBitArray(s);var m=o===yr.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,d,o,p),p.appendBitArray(u);var g=d.getECBlocksForLevel(r),v=d.getTotalCodewords()-g.getTotalECCodewords();this.terminateBits(v,p);var y=this.interleaveWithECBytes(p,d.getTotalCodewords(),v,g.getNumBlocks()),b=new pA;b.setECLevel(r),b.setMode(o),b.setVersion(d);var w=d.getDimensionForVersion(),S=new r6e(w,w),A=this.chooseMaskPattern(y,r,d,S);return b.setMaskPattern(A),zD.buildMatrix(y,r,d,A,S),b.setMatrix(S),b},t.recommendVersion=function(e,r,n,i){var a=this.calculateBitsNeeded(r,n,i,Qc.getVersionForNumber(1)),o=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,i,o);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),an.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return yr.KANJI;for(var n=!1,i=!1,a=0,o=e.length;a<o;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return yr.BYTE}return i?yr.ALPHANUMERIC:n?yr.NUMERIC:yr.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=ta.encode(e,an.SJIS)}catch(o){return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=r[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var a=Number.MAX_SAFE_INTEGER,o=-1,s=0;s<pA.NUM_MASK_PATTERNS;s++){zD.buildMatrix(e,r,n,s,i);var l=this.calculateMaskPenalty(i);l<a&&(a=l,o=s)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=Qc.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new gr("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),o=a.getTotalECCodewords(),s=i-o,l=(e+7)/8;return s>=l},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new gr("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var i=a;i<8;i++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),i=0;i<o;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new gr("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,a,o){if(i>=n)throw new gr("Block ID too large");var s=e%n,l=n-s,u=Math.floor(e/n),d=u+1,f=Math.floor(r/n),h=f+1,p=u-f,m=d-h;if(p!==m)throw new gr("EC bytes mismatch");if(n!==l+s)throw new gr("RS blocks mismatch");if(e!==(f+p)*l+(h+m)*s)throw new gr("Total bytes mismatch");i<l?(a[0]=f,o[0]=p):(a[0]=h,o[0]=m)},t.interleaveWithECBytes=function(e,r,n,i){var a,o,s,l;if(e.getSizeInBytes()!==n)throw new gr("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,p=0;p<i;++p){var m=new Int32Array(1),g=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,p,m,g);var v=m[0],y=new Uint8Array(v);e.toBytes(8*u,y,0,v);var b=t.generateECBytes(y,g[0]);h.push(new i6e(y,b)),d=Math.max(d,v),f=Math.max(f,b.length),u+=m[0]}if(n!==u)throw new gr("Data bytes does not match offset");for(var w=new xn,p=0;p<d;++p)try{for(var S=(a=void 0,VD(h)),A=S.next();!A.done;A=S.next()){var _=A.value,y=_.getDataBytes();p<y.length&&w.appendBits(y[p],8)}}catch(O){a={error:O}}finally{try{A&&!A.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}for(var p=0;p<f;++p)try{for(var E=(s=void 0,VD(h)),N=E.next();!N.done;N=E.next()){var _=N.value,b=_.getErrorCorrectionBytes();p<b.length&&w.appendBits(b[p],8)}}catch(O){s={error:O}}finally{try{N&&!N.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}if(r!==w.getSizeInBytes())throw new gr("Interleaving error: "+r+" and "+w.getSizeInBytes()+" differ.");return w},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),a=0;a<n;a++)i[a]=e[a]&255;new zz(hi.QR_CODE_FIELD_256).encode(i,r);for(var o=new Uint8Array(r),a=0;a<r;a++)o[a]=i[n+a];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new gr(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,r,n,i){switch(r){case yr.NUMERIC:t.appendNumericBytes(e,n);break;case yr.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case yr.BYTE:t.append8BitBytes(e,n,i);break;case yr.KANJI:t.appendKanjiBytes(e,n);break;default:throw new gr("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getDigit(e.charAt(i));if(i+2<n){var o=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(a*100+o*10+s,10),i+=3}else if(i+1<n){var o=t.getDigit(e.charAt(i+1));r.appendBits(a*10+o,7),i+=2}else r.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new gr;if(i+1<n){var o=t.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new gr;r.appendBits(a*45+o,11),i+=2}else r.appendBits(a,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=ta.encode(e,n)}catch(l){throw new gr(l)}for(var a=0,o=i.length;a!==o;a++){var s=i[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=ta.encode(e,an.SJIS)}catch(f){throw new gr(f)}for(var i=n.length,a=0;a<i;a+=2){var o=n[a]&255,s=n[a+1]&255,l=o<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new gr("Invalid byte sequence");var d=(u>>8)*192+(u&255);r.appendBits(d,13)}},t.appendECI=function(e,r){r.appendBits(yr.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=an.UTF8.getName(),t})();var a6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){a6e(e,t);function e(r,n,i,a,o,s,l,u){var d=t.call(this,s,l)||this;if(d.yuvData=r,d.dataWidth=n,d.dataHeight=i,d.left=a,d.top=o,a+s>n||o+l>i)throw new Ke("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(s,l),d}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Ke("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return fr.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return fr.arraycopy(this.yuvData,o,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;fr.arraycopy(this.yuvData,o,a,l,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),a=this.yuvData,o=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,u=0;u<r;u++){var d=a[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|d*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,a=0,o=this.top*this.dataWidth+this.left;a<n;a++,o+=this.dataWidth)for(var s=o+r/2,l=o,u=o+r-1;l<s;l++,u--){var d=i[l];i[l]=i[u],i[u]=d}},e.prototype.invert=function(){return new UC(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(bx);var o6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){o6e(e,t);function e(r,n,i,a,o,s,l){var u=t.call(this,n,i)||this;if(u.dataWidth=a,u.dataHeight=o,u.left=s,u.top=l,r.BYTES_PER_ELEMENT===4){for(var d=n*i,f=new Uint8ClampedArray(d),h=0;h<d;h++){var p=r[h],m=p>>16&255,g=p>>7&510,v=p&255;f[h]=(m+g+v)/4&255}u.luminances=f}else u.luminances=r;if(a===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=i),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+i>u.dataHeight)throw new Ke("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Ke("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return fr.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,a=new Uint8ClampedArray(i),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return fr.arraycopy(this.luminances,o,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;fr.arraycopy(this.luminances,o,a,l,r),o+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new UC(this)},e})(bx);var s6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c6e=function(t){s6e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(an),l6e=function(){function t(){}return t.ISO_8859_1=an.ISO8859_1,t}(),mA,u6e=301,d6e=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=u6e);return{LOG:t,ALOG:e}};mA=d6e([],[]),mA.LOG;mA.ALOG;var UD;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(UD||(UD={}));var WD=129,Vz=230,f6e=231,h6e=235,p6e=236,m6e=237,g6e=238,v6e=239,y6e=240,pb=254,x6e=254,HD="[)>05",GD="[)>06",qD="",Kt=0,Cn=1,Xn=2,tn=3,mn=4,Rn=5,b6e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Kt},t.prototype.encode=function(e){var r=wa.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=wa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Rn:e.writeCodeword(f6e),e.signalEncoderChange(Rn);return;case Cn:e.writeCodeword(Vz),e.signalEncoderChange(Cn);return;case tn:e.writeCodeword(g6e),e.signalEncoderChange(tn);break;case Xn:e.writeCodeword(v6e),e.signalEncoderChange(Xn);break;case mn:e.writeCodeword(y6e),e.signalEncoderChange(mn);break;default:throw new Error("Illegal mode: "+i)}else wa.isExtendedASCII(n)?(e.writeCodeword(h6e),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(wa.isDigit(e)&&wa.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),w6e=function(){function t(){}return t.prototype.getEncodingMode=function(){return Rn},t.prototype.encode=function(e){var r=new pt;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=wa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Kt);break}}var a=r.length()-1,o=1,s=e.getCodewordCount()+a+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(a<=249)r.setCharAt(0,bt.getCharAt(a));else if(a<=1555)r.setCharAt(0,bt.getCharAt(Math.floor(a/250)+249)),r.insert(1,bt.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var u=0,n=r.length();u<n;u++)e.writeCodeword(this.randomize255State(r.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t}(),KC=function(){function t(){}return t.prototype.getEncodingMode=function(){return Cn},t.prototype.encodeMaximal=function(e){for(var r=new pt,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var o=e.getCurrentChar();e.pos++,n=this.encodeChar(o,r),r.length()%3===0&&(i=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,d=Math.floor(r.length()%3);(d===2&&u!==2||d===1&&(n>3||u!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(Vz),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new pt;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,o=e.getCodewordCount()+a;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(!e.hasMoreCharacters()){var l=new pt;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,l,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,l,i);break}var u=r.length();if(u%3===0){var d=wa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(Kt);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var a=r.length(),o=r.toString().substring(0,a-i);r.setLengthToZero(),r.append(o),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var o=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(pb)}else if(o===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(pb),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(o>0||e.hasMoreCharacters())&&e.writeCodeword(pb)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Kt)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,a=new pt;return a.append(n),a.append(i),a.toString()},t}(),A6e=function(){function t(){}return t.prototype.getEncodingMode=function(){return mn},t.prototype.encode=function(e){for(var r=new pt;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var o=wa.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Kt);break}}}r.append(bt.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var o=n-1,s=this.encodeToCodewords(r.toString()),l=!e.hasMoreCharacters(),u=l&&o<=2;if(o<=2){e.updateSymbolInfo(e.getCodewordCount()+o);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}u?(e.resetSymbolInfo(),e.pos-=o):e.writeCodewords(s)}finally{e.signalEncoderChange(Kt)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(bt.getCharAt(e-64)):wa.illegalCharacter(bt.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,o=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(a<<6)+o,l=s>>16&255,u=s>>8&255,d=s&255,f=new pt;return f.append(l),r>=2&&f.append(u),r>=3&&f.append(d),f.toString()},t}(),S6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_6e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(){function t(e,r,n,i,a,o,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=o,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,r,n,i,a){var o,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var l=_6e(E6e),u=l.next();!u.done;u=l.next()){var d=u.value;if(!(r===1&&d.rectangular)&&!(r===2&&!d.rectangular)&&!(n!=null&&(d.getSymbolWidth()<n.getWidth()||d.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){o={error:f}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),C6e=function(t){S6e(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(Lt),E6e=[new Lt(!1,3,5,8,8,1),new Lt(!1,5,7,10,10,1),new Lt(!0,5,7,16,6,1),new Lt(!1,8,10,12,12,1),new Lt(!0,10,11,14,6,2),new Lt(!1,12,12,14,14,1),new Lt(!0,16,14,24,10,1),new Lt(!1,18,14,16,16,1),new Lt(!1,22,18,18,18,1),new Lt(!0,22,18,16,10,2),new Lt(!1,30,20,20,20,1),new Lt(!0,32,24,16,14,2),new Lt(!1,36,24,22,22,1),new Lt(!1,44,28,24,24,1),new Lt(!0,49,28,22,14,2),new Lt(!1,62,36,14,14,4),new Lt(!1,86,42,16,16,4),new Lt(!1,114,48,18,18,4),new Lt(!1,144,56,20,20,4),new Lt(!1,174,68,22,22,4),new Lt(!1,204,84,24,24,4,102,42),new Lt(!1,280,112,14,14,16,140,56),new Lt(!1,368,144,16,16,16,92,36),new Lt(!1,456,192,18,18,16,114,48),new Lt(!1,576,224,20,20,16,144,56),new Lt(!1,696,272,22,22,16,174,68),new Lt(!1,816,336,24,24,16,136,56),new Lt(!1,1050,408,18,18,36,175,68),new Lt(!1,1304,496,20,20,36,163,62),new C6e],N6e=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new pt,i=0,a=r.length;i<a;i++){var o=String.fromCharCode(r[i]&255);if(o==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(o)}this.msg=n.toString(),this.shape=0,this.codewords=new pt,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Lt.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),j6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T6e=function(t){j6e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return tn},e.prototype.encode=function(r){for(var n=new pt;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var o=wa.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){r.signalEncoderChange(Kt);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):wa.illegalCharacter(bt.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(x6e),r.getNewEncoding()<0&&r.signalEncoderChange(Kt)},e}(KC),P6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O6e=function(t){P6e(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Xn},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e}(KC),wa=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=WD+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var o=new KC,s=[new b6e,o,new O6e,new T6e,new A6e,new w6e],l=new N6e(e);l.setSymbolShape(r),l.setSizeConstraints(n,i),e.startsWith(HD)&&e.endsWith(qD)?(l.writeCodeword(p6e),l.setSkipAtEnd(2),l.pos+=HD.length):e.startsWith(GD)&&e.endsWith(qD)&&(l.writeCodeword(m6e),l.setSkipAtEnd(2),l.pos+=GD.length);var u=Kt;for(a&&(o.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();d<f&&u!==Kt&&u!==Rn&&u!==mn&&l.writeCodeword("");var h=l.getCodewords();for(h.length()<f&&h.append(WD);h.length()<f;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===tn&&i===tn){for(var a=Math.min(r+3,e.length),o=r;o<a;o++)if(!this.isNativeX12(e.charCodeAt(o)))return Kt}else if(n===mn&&i===mn){for(var a=Math.min(r+4,e.length),o=r;o<a;o++)if(!this.isNativeEDIFACT(e.charCodeAt(o)))return Kt}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===Kt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,o=new Uint8Array(6),s=[];;){if(r+a===e.length){sn.fill(o,0),sn.fill(s,0);var l=this.findMinimums(i,s,mt.MAX_VALUE,o),u=this.getMinimumCount(o);if(s[Kt]===l)return Kt;if(u===1){if(o[Rn]>0)return Rn;if(o[mn]>0)return mn;if(o[Xn]>0)return Xn;if(o[tn]>0)return tn}return Cn}var d=e.charCodeAt(r+a);if(a++,this.isDigit(d)?i[Kt]+=.5:this.isExtendedASCII(d)?(i[Kt]=Math.ceil(i[Kt]),i[Kt]+=2):(i[Kt]=Math.ceil(i[Kt]),i[Kt]++),this.isNativeC40(d)?i[Cn]+=2/3:this.isExtendedASCII(d)?i[Cn]+=8/3:i[Cn]+=4/3,this.isNativeText(d)?i[Xn]+=2/3:this.isExtendedASCII(d)?i[Xn]+=8/3:i[Xn]+=4/3,this.isNativeX12(d)?i[tn]+=2/3:this.isExtendedASCII(d)?i[tn]+=13/3:i[tn]+=10/3,this.isNativeEDIFACT(d)?i[mn]+=3/4:this.isExtendedASCII(d)?i[mn]+=17/4:i[mn]+=13/4,this.isSpecialB256(d)?i[Rn]+=4:i[Rn]++,a>=4){if(sn.fill(o,0),sn.fill(s,0),this.findMinimums(i,s,mt.MAX_VALUE,o),s[Kt]<this.min(s[Rn],s[Cn],s[Xn],s[tn],s[mn]))return Kt;if(s[Rn]<s[Kt]||s[Rn]+1<this.min(s[Cn],s[Xn],s[tn],s[mn]))return Rn;if(s[mn]+1<this.min(s[Rn],s[Cn],s[Xn],s[tn],s[Kt]))return mn;if(s[Xn]+1<this.min(s[Rn],s[Cn],s[mn],s[tn],s[Kt]))return Xn;if(s[tn]+1<this.min(s[Rn],s[Cn],s[mn],s[Xn],s[Kt]))return tn;if(s[Cn]+1<this.min(s[Kt],s[Rn],s[mn],s[Xn])){if(s[Cn]<s[tn])return Cn;if(s[Cn]===s[tn]){for(var f=r+a+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return tn;if(!this.isNativeX12(h))break;f++}return Cn}}}}},t.min=function(e,r,n,i,a){var o=Math.min(e,Math.min(r,Math.min(n,i)));return a===void 0?o:Math.min(o,a)},t.findMinimums=function(e,r,n,i){for(var a=0;a<6;a++){var o=r[a]=Math.ceil(e[a]);n>o&&(n=o,sn.fill(i,0)),n===o&&(i[a]=i[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=mt.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),mb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KD=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return ta.encode(e,this.charset)!=null}catch(r){return!1}},t}(),I6e=function(){function t(e,r,n){var i,a,o,s,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(T){return new KD(c6e.forName(T))}),this.encoders=[];var d=[];d.push(new KD(l6e.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),h=0;h<e.length;h++){var p=!1;try{for(var m=(i=void 0,mb(d)),g=m.next();!g.done;g=m.next()){var v=g.value,y=e.charAt(h),b=y.charCodeAt(0);if(b===n||v.canEncode(y)){p=!0;break}}}catch(T){i={error:T}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(!p)try{for(var w=(o=void 0,mb(this.ENCODERS)),S=w.next();!S.done;S=w.next()){var v=S.value;if(v.canEncode(e.charAt(h))){d.push(v),p=!0;break}}}catch(T){o={error:T}}finally{try{S&&!S.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}p||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var A=0;try{for(var _=mb(d),E=_.next();!E.done;E=_.next()){var v=E.value;this.encoders[A++]=v}}catch(T){l={error:T}}finally{try{E&&!E.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}}var N=-1;if(r!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&r.name===this.encoders[h].name){N=h;break}}this.priorityEncoderIndex=N}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return ta.encode(bt.getCharAt(e),this.encoders[r].name)},t}(),D6e=3,k6e=function(){function t(e,r,n){this.fnc1=n;var i=new I6e(e,r,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var o=e.charAt(a).charCodeAt(0);this.bytes[a]=o===n?1e3:o}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new pt,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,a,o){var s=e.charAt(i).charCodeAt(0),l=0,u=r.length();r.getPriorityEncoderIndex()>=0&&(s===o||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),u=l+1);for(var d=l;d<u;d++)(s===o||r.canEncode(s,d))&&this.addEdge(n,i+1,new XD(s,r,d,a,o))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,a=new XD[i+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var o=1;o<=i;o++){for(var s=0;s<r.length();s++)a[o][s]!=null&&o<i&&this.addEdges(e,r,a,o,a[o][s],n);for(var s=0;s<r.length();s++)a[o-1][s]=null}for(var l=-1,u=mt.MAX_VALUE,s=0;s<r.length();s++)if(a[i][s]!=null){var d=a[i][s];d.cachedTotalSize<u&&(u=d.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=a[i][l];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var p=r.encode(h.c,h.encoderIndex),o=p.length-1;o>=0;o--)f.unshift(p[o]&255);var m=h.previous===null?0:h.previous.encoderIndex;m!==h.encoderIndex&&f.unshift(256+r.getECIValue(h.encoderIndex)),h=h.previous}for(var g=[],o=0;o<g.length;o++)g[o]=f[o];return g},t}(),XD=function(){function t(e,r,n,i,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var o=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(o+=D6e),i!=null&&(o+=i.cachedTotalSize),this.cachedTotalSize=o}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),M6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YD;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(YD||(YD={}));(function(t){M6e(e,t);function e(r,n,i,a,o){var s=t.call(this,r,n,i)||this;return s.shape=a,s.macroId=o,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(k6e);var R6e=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),ZD=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),$6e=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),L6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XC=function(t){L6e(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+mt.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}($6e),F6e=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B6e=function(t){F6e(e,t);function e(r,n,i){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(XC);function z6e(t,e,r){return new B6e(t,e,r)}function Uf(t,e,r){return new XC(t,e,r)}var V6e=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ts=0,Ev=1,Zi=2,Uz=3,Ka=4,U6e=new XC(null,0,0),gb=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],W6e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function H6e(t){var e,r;try{for(var n=W6e(t),i=n.next();!i.done;i=n.next()){var a=i.value;sn.fill(a,-1)}}catch(o){e={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[Ts][Ka]=0,t[Ev][Ka]=0,t[Ev][Ts]=28,t[Uz][Ka]=0,t[Zi][Ka]=0,t[Zi][Ts]=15,t}var Wz=H6e(sn.createInt32Array(6,6)),G6e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q6e=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=gb[this.mode][e];i=Uf(i,a&65535,a>>16),n+=a>>16}var o=e===Zi?4:5;return i=Uf(i,r,o),new t(i,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===Zi?4:5;return n=Uf(n,Wz[this.mode][e],i),n=Uf(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===Ka||this.mode===Zi){var a=gb[n][Ts];r=Uf(r,a&65535,a>>16),i+=a>>16,n=Ts}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+o);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=z6e(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(gb[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var o=new xn;try{for(var s=G6e(i),l=s.next();!l.done;l=s.next()){var u=l.value;u.appendTo(o,e)}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return bt.format("%s bits=%d bytes=%d",V6e[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(U6e,Ts,0,0),t}();function K6e(t){var e=bt.getCharCode(" "),r=bt.getCharCode("."),n=bt.getCharCode(",");t[Ts][e]=1;for(var i=bt.getCharCode("Z"),a=bt.getCharCode("A"),o=a;o<=i;o++)t[Ts][o]=o-a+2;t[Ev][e]=1;for(var s=bt.getCharCode("z"),l=bt.getCharCode("a"),o=l;o<=s;o++)t[Ev][o]=o-l+2;t[Zi][e]=1;for(var u=bt.getCharCode("9"),d=bt.getCharCode("0"),o=d;o<=u;o++)t[Zi][o]=o-d+2;t[Zi][n]=12,t[Zi][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	","\n","\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[Uz][bt.getCharCode(f[h])]=h;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<p.length;h++)bt.getCharCode(p[h])>0&&(t[Ka][bt.getCharCode(p[h])]=h);return t}var vb=K6e(sn.createInt32Array(5,256)),a0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X6e=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=bt.getCharCode(" "),r=bt.getCharCode("\n"),n=ZD.singletonList(q6e.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,o=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case bt.getCharCode("\r"):a=o===r?2:0;break;case bt.getCharCode("."):a=o===e?3:0;break;case bt.getCharCode(","):a=o===e?4:0;break;case bt.getCharCode(":"):a=o===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var s=ZD.min(n,function(l,u){return l.getBitCount()-u.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,a=[];try{for(var o=a0(e),s=o.next();!s.done;s=o.next()){var l=s.value;this.updateStateForChar(l,r,a)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,a=vb[e.getMode()][i]>0,o=null,s=0;s<=Ka;s++){var l=vb[s][i];if(l>0){if(o==null&&(o=e.endBinaryShift(r)),!a||s===e.getMode()||s===Zi){var u=o.latchAndAppend(s,l);n.push(u)}if(!a&&Wz[e.getMode()][s]>=0){var d=o.shiftAndAppend(s,l);n.push(d)}}}if(e.getBinaryShiftByteCount()>0||vb[e.getMode()][i]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var i,a,o=[];try{for(var s=a0(e),l=s.next();!l.done;l=s.next()){var u=l.value;this.updateStateForPair(u,r,n,o)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,i){var a=e.endBinaryShift(r);if(i.push(a.latchAndAppend(Ka,n)),e.getMode()!==Ka&&i.push(a.shiftAndAppend(Ka,n)),n===3||n===4){var o=a.latchAndAppend(Zi,16-n).latchAndAppend(Zi,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,a,o=[];try{for(var s=a0(e),l=s.next();!l.done;l=s.next()){var u=l.value,d=!0,f=function(v){if(v.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(v)&&(o=o.filter(function(y){return y!==v}))};try{for(var h=(i=void 0,a0(o)),p=h.next();!p.done;p=h.next()){var m=p.value,g=f(m);if(g==="break")break}}catch(v){i={error:v}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}d&&o.push(u)}}catch(v){r={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t}(),Y6e=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new X6e(e).encode(),a=mt.truncDivision(i.getSize()*r,100)+11,o=i.getSize()+a,s,l,u,d,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Ke(bt.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(l,s),d=t.WORD_SIZE[l];var h=u-u%d;if(f=t.stuffBits(i,d),f.getSize()+a>h)throw new Ke("Data to large for user specified layer");if(s&&f.getSize()>d*64)throw new Ke("Data to large for user specified layer")}else{d=0,f=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new Ke("Data too large for an Aztec code");if(s=p<=3,l=s?p+1:p,u=t.totalBitsInLayer(l,s),!(o>u)){(f==null||d!==t.WORD_SIZE[l])&&(d=t.WORD_SIZE[l],f=t.stuffBits(i,d));var h=u-u%d;if(!(s&&f.getSize()>d*64)&&f.getSize()+a<=h)break}}}var m=t.generateCheckWords(f,u,d),g=f.getSize()/d,v=t.generateModeMessage(s,l,g),y=(s?11:14)+l*4,b=new Int32Array(y),w;if(s){w=y;for(var p=0;p<b.length;p++)b[p]=p}else{w=y+1+2*mt.truncDivision(mt.truncDivision(y,2)-1,15);for(var S=mt.truncDivision(y,2),A=mt.truncDivision(w,2),p=0;p<S;p++){var _=p+mt.truncDivision(p,15);b[S-p-1]=A-_-1,b[S+p]=A+_+1}}for(var E=new fo(w),p=0,N=0;p<l;p++){for(var T=(l-p)*4+(s?9:12),O=0;O<T;O++)for(var j=O*2,P=0;P<2;P++)m.get(N+j+P)&&E.set(b[p*2+P],b[p*2+O]),m.get(N+T*2+j+P)&&E.set(b[p*2+O],b[y-1-p*2-P]),m.get(N+T*4+j+P)&&E.set(b[y-1-p*2-P],b[y-1-p*2-O]),m.get(N+T*6+j+P)&&E.set(b[y-1-p*2-O],b[p*2+P]);N+=T*8}if(t.drawModeMessage(E,s,w,v),s)t.drawBullsEye(E,mt.truncDivision(w,2),5);else{t.drawBullsEye(E,mt.truncDivision(w,2),7);for(var p=0,O=0;p<mt.truncDivision(y,2)-1;p+=15,O+=16)for(var P=mt.truncDivision(w,2)&1;P<w;P+=2)E.set(mt.truncDivision(w,2)-O,P),E.set(mt.truncDivision(w,2)+O,P),E.set(P,mt.truncDivision(w,2)-O),E.set(P,mt.truncDivision(w,2)+O)}var D=new R6e;return D.setCompact(s),D.setSize(w),D.setLayers(l),D.setCodeWords(g),D.setMatrix(E),D},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var a=r-i;a<=r+i;a++)e.set(a,r-i),e.set(a,r+i),e.set(r-i,a),e.set(r+i,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new xn;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var a=mt.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var s=a-3+o;i.get(o)&&e.set(s,a-5),i.get(o+7)&&e.set(a+5,s),i.get(20-o)&&e.set(s,a+5),i.get(27-o)&&e.set(a-5,s)}else for(var o=0;o<10;o++){var s=a-5+o+mt.truncDivision(o,5);i.get(o)&&e.set(s,a-7),i.get(o+10)&&e.set(a+7,s),i.get(29-o)&&e.set(s,a+7),i.get(39-o)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var i,a,o=e.getSize()/n,s=new zz(t.getGF(n)),l=mt.truncDivision(r,n),u=t.bitsToWords(e,n,l);s.encode(u,l-o);var d=r%n,f=new xn;f.appendBits(0,d);try{for(var h=Y6e(Array.from(u)),p=h.next();!p.done;p=h.next()){var m=p.value;f.appendBits(m,n)}}catch(g){i={error:g}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),a,o;for(a=0,o=e.getSize()/r;a<o;a++){for(var s=0,l=0;l<r;l++)s|=e.get(a*r+l)?1<<r-l-1:0;i[a]=s}return i},t.getGF=function(e){switch(e){case 4:return hi.AZTEC_PARAM;case 6:return hi.AZTEC_DATA_6;case 8:return hi.AZTEC_DATA_8;case 10:return hi.AZTEC_DATA_10;case 12:return hi.AZTEC_DATA_12;default:throw new Ke("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new xn,i=e.getSize(),a=(1<<r)-2,o=0;o<i;o+=r){for(var s=0,l=0;l<r;l++)(o+l>=i||e.get(o+l))&&(s|=1<<r-1-l);(s&a)===a?(n.appendBits(s&a,r),o--):s&a?n.appendBits(s,r):(n.appendBits(s|1,r),o--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var YC={},Sx={},si={};Object.defineProperty(si,"__esModule",{value:!0});function Z6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Q6e=function t(e,r){Z6e(this,t),this.data=e,this.text=r.text||e,this.options=r};si.default=Q6e;Object.defineProperty(Sx,"__esModule",{value:!0});Sx.CODE39=void 0;var J6e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),e5e=si,t5e=r5e(e5e);function r5e(t){return t&&t.__esModule?t:{default:t}}function n5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i5e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o5e=function(t){a5e(e,t);function e(r,n){return n5e(this,e),r=r.toUpperCase(),n.mod43&&(r+=l5e(u5e(r))),i5e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return J6e(e,[{key:"encode",value:function(){for(var n=yb("*"),i=0;i<this.data.length;i++)n+=yb(this.data[i])+"0";return n+=yb("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(t5e.default),Hz=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],s5e=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function yb(t){return c5e(Gz(t))}function c5e(t){return s5e[t].toString(2)}function l5e(t){return Hz[t]}function Gz(t){return Hz.indexOf(t)}function u5e(t){for(var e=0,r=0;r<t.length;r++)e+=Gz(t[r]);return e=e%43,e}Sx.CODE39=o5e;var Xa={},ZC={},yf={},wr={};Object.defineProperty(wr,"__esModule",{value:!0});var Wf;function xb(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var qz=wr.SET_A=0,Kz=wr.SET_B=1,Xz=wr.SET_C=2;wr.SHIFT=98;var d5e=wr.START_A=103,f5e=wr.START_B=104,h5e=wr.START_C=105;wr.MODULO=103;wr.STOP=106;wr.FNC1=207;wr.SET_BY_CODE=(Wf={},xb(Wf,d5e,qz),xb(Wf,f5e,Kz),xb(Wf,h5e,Xz),Wf);wr.SWAP={101:qz,100:Kz,99:Xz};wr.A_START_CHAR="";wr.B_START_CHAR="";wr.C_START_CHAR="";wr.A_CHARS="[\0-_-]";wr.B_CHARS="[ --]";wr.C_CHARS="(*[0-9]{2}*)";wr.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(yf,"__esModule",{value:!0});var p5e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),m5e=si,g5e=v5e(m5e),bi=wr;function v5e(t){return t&&t.__esModule?t:{default:t}}function y5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x5e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function b5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var w5e=function(t){b5e(e,t);function e(r,n){y5e(this,e);var i=x5e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.substring(1),n));return i.bytes=r.split("").map(function(a){return a.charCodeAt(0)}),i}return p5e(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,i=n.shift()-105,a=bi.SET_BY_CODE[i];if(a===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(bi.FNC1);var o=e.next(n,1,a);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+o.result+e.getBar((o.checksum+i)%bi.MODULO)+e.getBar(bi.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return bi.BARS[n]?bi.BARS[n].toString():""}},{key:"correctIndex",value:function(n,i){if(i===bi.SET_A){var a=n.shift();return a<32?a+64:a-32}else return i===bi.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,i,a){if(!n.length)return{result:"",checksum:0};var o=void 0,s=void 0;if(n[0]>=200){s=n.shift()-105;var l=bi.SWAP[s];l!==void 0?o=e.next(n,i+1,l):((a===bi.SET_A||a===bi.SET_B)&&s===bi.SHIFT&&(n[0]=a===bi.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),o=e.next(n,i+1,a))}else s=e.correctIndex(n,a),o=e.next(n,i+1,a);var u=e.getBar(s),d=s*i;return{result:u+o.result,checksum:d+o.checksum}}}]),e}(g5e.default);yf.default=w5e;var QC={};Object.defineProperty(QC,"__esModule",{value:!0});var Ps=wr,Yz=function(e){return e.match(new RegExp("^"+Ps.A_CHARS+"*"))[0].length},Zz=function(e){return e.match(new RegExp("^"+Ps.B_CHARS+"*"))[0].length},Qz=function(e){return e.match(new RegExp("^"+Ps.C_CHARS+"*"))[0]};function JC(t,e){var r=e?Ps.A_CHARS:Ps.B_CHARS,n=t.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+""+Jz(t.substring(n[1].length));var i=t.match(new RegExp("^"+r+"+"))[0];return i.length===t.length?t:i+String.fromCharCode(e?205:206)+JC(t.substring(i.length),!e)}function Jz(t){var e=Qz(t),r=e.length;if(r===t.length)return t;t=t.substring(r);var n=Yz(t)>=Zz(t);return e+String.fromCharCode(n?206:205)+JC(t,n)}QC.default=function(t){var e=void 0,r=Qz(t).length;if(r>=2)e=Ps.C_START_CHAR+Jz(t);else{var n=Yz(t)>Zz(t);e=(n?Ps.A_START_CHAR:Ps.B_START_CHAR)+JC(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(i,a){return""+a})};Object.defineProperty(ZC,"__esModule",{value:!0});var A5e=yf,S5e=eV(A5e),_5e=QC,C5e=eV(_5e);function eV(t){return t&&t.__esModule?t:{default:t}}function E5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bb(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function N5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var j5e=function(t){N5e(e,t);function e(r,n){if(E5e(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(r))var i=bb(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,C5e.default)(r),n));else var i=bb(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return bb(i)}return e}(S5e.default);ZC.default=j5e;var eE={};Object.defineProperty(eE,"__esModule",{value:!0});var T5e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),P5e=yf,O5e=I5e(P5e),QD=wr;function I5e(t){return t&&t.__esModule?t:{default:t}}function D5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k5e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function M5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var R5e=function(t){M5e(e,t);function e(r,n){return D5e(this,e),k5e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,QD.A_START_CHAR+r,n))}return T5e(e,[{key:"valid",value:function(){return new RegExp("^"+QD.A_CHARS+"+$").test(this.data)}}]),e}(O5e.default);eE.default=R5e;var tE={};Object.defineProperty(tE,"__esModule",{value:!0});var $5e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),L5e=yf,F5e=B5e(L5e),JD=wr;function B5e(t){return t&&t.__esModule?t:{default:t}}function z5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V5e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function U5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var W5e=function(t){U5e(e,t);function e(r,n){return z5e(this,e),V5e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,JD.B_START_CHAR+r,n))}return $5e(e,[{key:"valid",value:function(){return new RegExp("^"+JD.B_CHARS+"+$").test(this.data)}}]),e}(F5e.default);tE.default=W5e;var rE={};Object.defineProperty(rE,"__esModule",{value:!0});var H5e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),G5e=yf,q5e=K5e(G5e),e4=wr;function K5e(t){return t&&t.__esModule?t:{default:t}}function X5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Z5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Q5e=function(t){Z5e(e,t);function e(r,n){return X5e(this,e),Y5e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,e4.C_START_CHAR+r,n))}return H5e(e,[{key:"valid",value:function(){return new RegExp("^"+e4.C_CHARS+"+$").test(this.data)}}]),e}(q5e.default);rE.default=Q5e;Object.defineProperty(Xa,"__esModule",{value:!0});Xa.CODE128C=Xa.CODE128B=Xa.CODE128A=Xa.CODE128=void 0;var J5e=ZC,e$e=_x(J5e),t$e=eE,r$e=_x(t$e),n$e=tE,i$e=_x(n$e),a$e=rE,o$e=_x(a$e);function _x(t){return t&&t.__esModule?t:{default:t}}Xa.CODE128=e$e.default;Xa.CODE128A=r$e.default;Xa.CODE128B=i$e.default;Xa.CODE128C=o$e.default;var fi={},nE={},sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.SIDE_BIN="101";sa.MIDDLE_BIN="01010";sa.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};sa.EAN2_STRUCTURE=["LL","LG","GL","GG"];sa.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];sa.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Cx={},Il={};Object.defineProperty(Il,"__esModule",{value:!0});var s$e=sa,c$e=function(e,r,n){var i=e.split("").map(function(o,s){return s$e.BINARIES[r[s]]}).map(function(o,s){return o?o[e[s]]:""});if(n){var a=e.length-1;i=i.map(function(o,s){return s<a?o+n:o})}return i.join("")};Il.default=c$e;Object.defineProperty(Cx,"__esModule",{value:!0});var l$e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Kl=sa,u$e=Il,t4=tV(u$e),d$e=si,f$e=tV(d$e);function tV(t){return t&&t.__esModule?t:{default:t}}function h$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p$e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function m$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g$e=function(t){m$e(e,t);function e(r,n){h$e(this,e);var i=p$e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return i.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return l$e(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,i){return this.text.substr(n,i)}},{key:"leftEncode",value:function(n,i){return(0,t4.default)(n,i)}},{key:"rightText",value:function(n,i){return this.text.substr(n,i)}},{key:"rightEncode",value:function(n,i){return(0,t4.default)(n,i)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},i={height:this.guardHeight};return[{data:Kl.SIDE_BIN,options:i},{data:this.leftEncode(),text:this.leftText(),options:n},{data:Kl.MIDDLE_BIN,options:i},{data:this.rightEncode(),text:this.rightText(),options:n},{data:Kl.SIDE_BIN,options:i}]}},{key:"encodeFlat",value:function(){var n=[Kl.SIDE_BIN,this.leftEncode(),Kl.MIDDLE_BIN,this.rightEncode(),Kl.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),e}(f$e.default);Cx.default=g$e;Object.defineProperty(nE,"__esModule",{value:!0});var v$e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Hf=function t(e,r,n){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,r,n)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(n)}},y$e=sa,x$e=Cx,b$e=w$e(x$e);function w$e(t){return t&&t.__esModule?t:{default:t}}function A$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S$e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var r4=function(e){var r=e.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,i,a){return a%2?n+i*3:n+i},0);return(10-r%10)%10},C$e=function(t){_$e(e,t);function e(r,n){A$e(this,e),r.search(/^[0-9]{12}$/)!==-1&&(r+=r4(r));var i=S$e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return i.lastChar=n.lastChar,i}return v$e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===r4(this.data)}},{key:"leftText",value:function(){return Hf(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),i=y$e.EAN13_STRUCTURE[this.data[0]];return Hf(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,i)}},{key:"rightText",value:function(){return Hf(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return Hf(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=Hf(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),e}(b$e.default);nE.default=C$e;var iE={};Object.defineProperty(iE,"__esModule",{value:!0});var E$e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o0=function t(e,r,n){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,r);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,r,n)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(n)}},N$e=Cx,j$e=T$e(N$e);function T$e(t){return t&&t.__esModule?t:{default:t}}function P$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O$e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function I$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var n4=function(e){var r=e.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,i,a){return a%2?n+i:n+i*3},0);return(10-r%10)%10},D$e=function(t){I$e(e,t);function e(r,n){return P$e(this,e),r.search(/^[0-9]{7}$/)!==-1&&(r+=n4(r)),O$e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return E$e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===n4(this.data)}},{key:"leftText",value:function(){return o0(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return o0(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return o0(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return o0(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),e}(j$e.default);iE.default=D$e;var aE={};Object.defineProperty(aE,"__esModule",{value:!0});var k$e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),M$e=sa,R$e=Il,$$e=rV(R$e),L$e=si,F$e=rV(L$e);function rV(t){return t&&t.__esModule?t:{default:t}}function B$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z$e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function V$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var U$e=function(e){var r=e.split("").map(function(n){return+n}).reduce(function(n,i,a){return a%2?n+i*9:n+i*3},0);return r%10},W$e=function(t){V$e(e,t);function e(r,n){return B$e(this,e),z$e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return k$e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=M$e.EAN5_STRUCTURE[U$e(this.data)];return{data:"1011"+(0,$$e.default)(this.data,n,"01"),text:this.text}}}]),e}(F$e.default);aE.default=W$e;var oE={};Object.defineProperty(oE,"__esModule",{value:!0});var H$e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),G$e=sa,q$e=Il,K$e=nV(q$e),X$e=si,Y$e=nV(X$e);function nV(t){return t&&t.__esModule?t:{default:t}}function Z$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q$e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function J$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var eLe=function(t){J$e(e,t);function e(r,n){return Z$e(this,e),Q$e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return H$e(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=G$e.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,K$e.default)(this.data,n,"01"),text:this.text}}}]),e}(Y$e.default);oE.default=eLe;var vm={};Object.defineProperty(vm,"__esModule",{value:!0});var tLe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();vm.checksum=gA;var rLe=Il,Xl=iV(rLe),nLe=si,iLe=iV(nLe);function iV(t){return t&&t.__esModule?t:{default:t}}function aLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oLe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var cLe=function(t){sLe(e,t);function e(r,n){aLe(this,e),r.search(/^[0-9]{11}$/)!==-1&&(r+=gA(r));var i=oLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return i.displayValue=n.displayValue,n.fontSize>n.width*10?i.fontSize=n.width*10:i.fontSize=n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return tLe(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==gA(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,Xl.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,Xl.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,Xl.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,Xl.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,Xl.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,Xl.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),e}(iLe.default);function gA(t){var e=0,r;for(r=1;r<11;r+=2)e+=parseInt(t[r]);for(r=0;r<11;r+=2)e+=parseInt(t[r])*3;return(10-e%10)%10}vm.default=cLe;var sE={};Object.defineProperty(sE,"__esModule",{value:!0});var lLe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),uLe=Il,dLe=aV(uLe),fLe=si,hLe=aV(fLe),pLe=vm;function aV(t){return t&&t.__esModule?t:{default:t}}function mLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wb(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vLe=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],yLe=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],xLe=function(t){gLe(e,t);function e(r,n){mLe(this,e);var i=wb(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));if(i.isValid=!1,r.search(/^[0-9]{6}$/)!==-1)i.middleDigits=r,i.upcA=i4(r,"0"),i.text=n.text||""+i.upcA[0]+r+i.upcA[i.upcA.length-1],i.isValid=!0;else if(r.search(/^[01][0-9]{7}$/)!==-1)if(i.middleDigits=r.substring(1,r.length-1),i.upcA=i4(i.middleDigits,r[0]),i.upcA[i.upcA.length-1]===r[r.length-1])i.isValid=!0;else return wb(i);else return wb(i);return i.displayValue=n.displayValue,n.fontSize>n.width*10?i.fontSize=n.width*10:i.fontSize=n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return lLe(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],i=this.upcA[this.upcA.length-1],a=yLe[parseInt(i)][parseInt(n)];return(0,dLe.default)(this.middleDigits,a)}}]),e}(hLe.default);function i4(t,e){for(var r=parseInt(t[t.length-1]),n=vLe[r],i="",a=0,o=0;o<n.length;o++){var s=n[o];s==="X"?i+=t[a++]:i+=s}return i=""+e+i,""+i+(0,pLe.checksum)(i)}sE.default=xLe;Object.defineProperty(fi,"__esModule",{value:!0});fi.UPCE=fi.UPC=fi.EAN2=fi.EAN5=fi.EAN8=fi.EAN13=void 0;var bLe=nE,wLe=xf(bLe),ALe=iE,SLe=xf(ALe),_Le=aE,CLe=xf(_Le),ELe=oE,NLe=xf(ELe),jLe=vm,TLe=xf(jLe),PLe=sE,OLe=xf(PLe);function xf(t){return t&&t.__esModule?t:{default:t}}fi.EAN13=wLe.default;fi.EAN8=SLe.default;fi.EAN5=CLe.default;fi.EAN2=NLe.default;fi.UPC=TLe.default;fi.UPCE=OLe.default;var Od={},Ex={},ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.START_BIN="1010";ym.END_BIN="11101";ym.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(Ex,"__esModule",{value:!0});var ILe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s0=ym,DLe=si,kLe=MLe(DLe);function MLe(t){return t&&t.__esModule?t:{default:t}}function RLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Le(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function LLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var FLe=function(t){LLe(e,t);function e(){return RLe(this,e),$Le(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ILe(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,i=this.data.match(/.{2}/g).map(function(a){return n.encodePair(a)}).join("");return{data:s0.START_BIN+i+s0.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var i=s0.BINARIES[n[1]];return s0.BINARIES[n[0]].split("").map(function(a,o){return(a==="1"?"111":"1")+(i[o]==="1"?"000":"0")}).join("")}}]),e}(kLe.default);Ex.default=FLe;var cE={};Object.defineProperty(cE,"__esModule",{value:!0});var BLe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),zLe=Ex,VLe=ULe(zLe);function ULe(t){return t&&t.__esModule?t:{default:t}}function WLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HLe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function GLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a4=function(e){var r=e.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,i,a){return n+i*(3-a%2*2)},0);return Math.ceil(r/10)*10-r},qLe=function(t){GLe(e,t);function e(r,n){return WLe(this,e),r.search(/^[0-9]{13}$/)!==-1&&(r+=a4(r)),HLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return BLe(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===a4(this.data)}}]),e}(VLe.default);cE.default=qLe;Object.defineProperty(Od,"__esModule",{value:!0});Od.ITF14=Od.ITF=void 0;var KLe=Ex,XLe=oV(KLe),YLe=cE,ZLe=oV(YLe);function oV(t){return t&&t.__esModule?t:{default:t}}Od.ITF=XLe.default;Od.ITF14=ZLe.default;var Ki={},Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});var QLe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),JLe=si,e7e=t7e(JLe);function t7e(t){return t&&t.__esModule?t:{default:t}}function r7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n7e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function i7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a7e=function(t){i7e(e,t);function e(r,n){return r7e(this,e),n7e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return QLe(e,[{key:"encode",value:function(){for(var n="110",i=0;i<this.data.length;i++){var a=parseInt(this.data[i]),o=a.toString(2);o=o7e(o,4-o.length);for(var s=0;s<o.length;s++)n+=o[s]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(e7e.default);function o7e(t,e){for(var r=0;r<e;r++)t="0"+t;return t}Dl.default=a7e;var lE={},kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.mod10=s7e;kl.mod11=c7e;function s7e(t){for(var e=0,r=0;r<t.length;r++){var n=parseInt(t[r]);(r+t.length)%2===0?e+=n:e+=n*2%10+Math.floor(n*2/10)}return(10-e%10)%10}function c7e(t){for(var e=0,r=[2,3,4,5,6,7],n=0;n<t.length;n++){var i=parseInt(t[t.length-1-n]);e+=r[n%r.length]*i}return(11-e%11)%11}Object.defineProperty(lE,"__esModule",{value:!0});var l7e=Dl,u7e=f7e(l7e),d7e=kl;function f7e(t){return t&&t.__esModule?t:{default:t}}function h7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p7e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function m7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var g7e=function(t){m7e(e,t);function e(r,n){return h7e(this,e),p7e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,d7e.mod10)(r),n))}return e}(u7e.default);lE.default=g7e;var uE={};Object.defineProperty(uE,"__esModule",{value:!0});var v7e=Dl,y7e=b7e(v7e),x7e=kl;function b7e(t){return t&&t.__esModule?t:{default:t}}function w7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A7e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function S7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _7e=function(t){S7e(e,t);function e(r,n){return w7e(this,e),A7e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r+(0,x7e.mod11)(r),n))}return e}(y7e.default);uE.default=_7e;var dE={};Object.defineProperty(dE,"__esModule",{value:!0});var C7e=Dl,E7e=N7e(C7e),o4=kl;function N7e(t){return t&&t.__esModule?t:{default:t}}function j7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T7e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function P7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var O7e=function(t){P7e(e,t);function e(r,n){return j7e(this,e),r+=(0,o4.mod10)(r),r+=(0,o4.mod10)(r),T7e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(E7e.default);dE.default=O7e;var fE={};Object.defineProperty(fE,"__esModule",{value:!0});var I7e=Dl,D7e=k7e(I7e),s4=kl;function k7e(t){return t&&t.__esModule?t:{default:t}}function M7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R7e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $7e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var L7e=function(t){$7e(e,t);function e(r,n){return M7e(this,e),r+=(0,s4.mod11)(r),r+=(0,s4.mod10)(r),R7e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return e}(D7e.default);fE.default=L7e;Object.defineProperty(Ki,"__esModule",{value:!0});Ki.MSI1110=Ki.MSI1010=Ki.MSI11=Ki.MSI10=Ki.MSI=void 0;var F7e=Dl,B7e=xm(F7e),z7e=lE,V7e=xm(z7e),U7e=uE,W7e=xm(U7e),H7e=dE,G7e=xm(H7e),q7e=fE,K7e=xm(q7e);function xm(t){return t&&t.__esModule?t:{default:t}}Ki.MSI=B7e.default;Ki.MSI10=V7e.default;Ki.MSI11=W7e.default;Ki.MSI1010=G7e.default;Ki.MSI1110=K7e.default;var Nx={};Object.defineProperty(Nx,"__esModule",{value:!0});Nx.pharmacode=void 0;var X7e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Y7e=si,Z7e=Q7e(Y7e);function Q7e(t){return t&&t.__esModule?t:{default:t}}function J7e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eFe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function tFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var rFe=function(t){tFe(e,t);function e(r,n){J7e(this,e);var i=eFe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n));return i.number=parseInt(r,10),i}return X7e(e,[{key:"encode",value:function(){for(var n=this.number,i="";!isNaN(n)&&n!=0;)n%2===0?(i="11100"+i,n=(n-2)/2):(i="100"+i,n=(n-1)/2);return i=i.slice(0,-2),{data:i,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(Z7e.default);Nx.pharmacode=rFe;var jx={};Object.defineProperty(jx,"__esModule",{value:!0});jx.codabar=void 0;var nFe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),iFe=si,aFe=oFe(iFe);function oFe(t){return t&&t.__esModule?t:{default:t}}function sFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cFe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function lFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uFe=function(t){lFe(e,t);function e(r,n){sFe(this,e),r.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(r="A"+r+"A");var i=cFe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r.toUpperCase(),n));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return nFe(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],i=this.getEncodings(),a=0;a<this.data.length;a++)n.push(i[this.data.charAt(a)]),a!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(aFe.default);jx.codabar=uFe;var Id={},Tx={},bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""];bm.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"];bm.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]};Object.defineProperty(Tx,"__esModule",{value:!0});var dFe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c0=bm,fFe=si,hFe=pFe(fFe);function pFe(t){return t&&t.__esModule?t:{default:t}}function mFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gFe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function vFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var yFe=function(t){vFe(e,t);function e(r,n){return mFe(this,e),gFe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return dFe(e,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.data.split("").flatMap(function(s){return c0.MULTI_SYMBOLS[s]||s}),i=n.map(function(s){return e.getEncoding(s)}).join(""),a=e.checksum(n,20),o=e.checksum(n.concat(a),15);return{text:this.text,data:e.getEncoding("")+i+e.getEncoding(a)+e.getEncoding(o)+e.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(n){return c0.BINARIES[e.symbolValue(n)]}},{key:"getSymbol",value:function(n){return c0.SYMBOLS[n]}},{key:"symbolValue",value:function(n){return c0.SYMBOLS.indexOf(n)}},{key:"checksum",value:function(n,i){var a=n.slice().reverse().reduce(function(o,s,l){var u=l%i+1;return o+e.symbolValue(s)*u},0);return e.getSymbol(a%47)}}]),e}(hFe.default);Tx.default=yFe;var hE={};Object.defineProperty(hE,"__esModule",{value:!0});var xFe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),bFe=Tx,wFe=AFe(bFe);function AFe(t){return t&&t.__esModule?t:{default:t}}function SFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Fe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function CFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var EFe=function(t){CFe(e,t);function e(r,n){return SFe(this,e),_Fe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return xFe(e,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),e}(wFe.default);hE.default=EFe;Object.defineProperty(Id,"__esModule",{value:!0});Id.CODE93FullASCII=Id.CODE93=void 0;var NFe=Tx,jFe=sV(NFe),TFe=hE,PFe=sV(TFe);function sV(t){return t&&t.__esModule?t:{default:t}}Id.CODE93=jFe.default;Id.CODE93FullASCII=PFe.default;var Px={};Object.defineProperty(Px,"__esModule",{value:!0});Px.GenericBarcode=void 0;var OFe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),IFe=si,DFe=kFe(IFe);function kFe(t){return t&&t.__esModule?t:{default:t}}function MFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RFe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function $Fe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var LFe=function(t){$Fe(e,t);function e(r,n){return MFe(this,e),RFe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,n))}return OFe(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(DFe.default);Px.GenericBarcode=LFe;Object.defineProperty(YC,"__esModule",{value:!0});var FFe=Sx,l0=Xa,Yl=fi,c4=Od,Gf=Ki,BFe=Nx,zFe=jx,l4=Id,VFe=Px;YC.default={CODE39:FFe.CODE39,CODE128:l0.CODE128,CODE128A:l0.CODE128A,CODE128B:l0.CODE128B,CODE128C:l0.CODE128C,EAN13:Yl.EAN13,EAN8:Yl.EAN8,EAN5:Yl.EAN5,EAN2:Yl.EAN2,UPC:Yl.UPC,UPCE:Yl.UPCE,ITF14:c4.ITF14,ITF:c4.ITF,MSI:Gf.MSI,MSI10:Gf.MSI10,MSI11:Gf.MSI11,MSI1010:Gf.MSI1010,MSI1110:Gf.MSI1110,pharmacode:BFe.pharmacode,codabar:zFe.codabar,CODE93:l4.CODE93,CODE93FullASCII:l4.CODE93FullASCII,GenericBarcode:VFe.GenericBarcode};var bf={};Object.defineProperty(bf,"__esModule",{value:!0});var UFe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};bf.default=function(t,e){return UFe({},t,e)};var pE={};Object.defineProperty(pE,"__esModule",{value:!0});pE.default=WFe;function WFe(t){var e=[];function r(n){if(Array.isArray(n))for(var i=0;i<n.length;i++)r(n[i]);else n.text=n.text||"",n.data=n.data||"",e.push(n)}return r(t),e}var mE={};Object.defineProperty(mE,"__esModule",{value:!0});mE.default=HFe;function HFe(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var gE={},vE={},Ox={};Object.defineProperty(Ox,"__esModule",{value:!0});Ox.default=GFe;function GFe(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in e)e.hasOwnProperty(r)&&(r=e[r],typeof t[r]=="string"&&(t[r]=parseInt(t[r],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var Ix={};Object.defineProperty(Ix,"__esModule",{value:!0});var qFe={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Ix.default=qFe;Object.defineProperty(vE,"__esModule",{value:!0});var KFe=Ox,XFe=cV(KFe),YFe=Ix,u4=cV(YFe);function cV(t){return t&&t.__esModule?t:{default:t}}function ZFe(t){var e={};for(var r in u4.default)u4.default.hasOwnProperty(r)&&(t.hasAttribute("jsbarcode-"+r.toLowerCase())&&(e[r]=t.getAttribute("jsbarcode-"+r.toLowerCase())),t.hasAttribute("data-"+r.toLowerCase())&&(e[r]=t.getAttribute("data-"+r.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,XFe.default)(e),e}vE.default=ZFe;var yE={},xE={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.getTotalWidthOfEncodings=Ni.calculateEncodingAttributes=Ni.getBarcodePadding=Ni.getEncodingHeight=Ni.getMaximumHeightOfEncodings=void 0;var QFe=bf,JFe=e9e(QFe);function e9e(t){return t&&t.__esModule?t:{default:t}}function lV(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function uV(t,e,r){if(r.displayValue&&e<t){if(r.textAlign=="center")return Math.floor((t-e)/2);if(r.textAlign=="left")return 0;if(r.textAlign=="right")return Math.floor(t-e)}return 0}function t9e(t,e,r){for(var n=0;n<t.length;n++){var i=t[n],a=(0,JFe.default)(e,i.options),o;a.displayValue?o=i9e(i.text,a,r):o=0;var s=i.data.length*a.width;i.width=Math.ceil(Math.max(o,s)),i.height=lV(i,a),i.barcodePadding=uV(o,s,a)}}function r9e(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].width;return e}function n9e(t){for(var e=0,r=0;r<t.length;r++)t[r].height>e&&(e=t[r].height);return e}function i9e(t,e,r){var n;if(r)n=r;else if(typeof document!="undefined")n=document.createElement("canvas").getContext("2d");else return 0;n.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var i=n.measureText(t);if(!i)return 0;var a=i.width;return a}Ni.getMaximumHeightOfEncodings=n9e;Ni.getEncodingHeight=lV;Ni.getBarcodePadding=uV;Ni.calculateEncodingAttributes=t9e;Ni.getTotalWidthOfEncodings=r9e;Object.defineProperty(xE,"__esModule",{value:!0});var a9e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o9e=bf,s9e=c9e(o9e),Ab=Ni;function c9e(t){return t&&t.__esModule?t:{default:t}}function l9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u9e=function(){function t(e,r,n){l9e(this,t),this.canvas=e,this.encodings=r,this.options=n}return a9e(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var r=0;r<this.encodings.length;r++){var n=(0,s9e.default)(this.options,this.encodings[r].options);this.drawCanvasBarcode(n,this.encodings[r]),this.drawCanvasText(n,this.encodings[r]),this.moveCanvasDrawing(this.encodings[r])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var r=this.canvas.getContext("2d");r.save(),(0,Ab.calculateEncodingAttributes)(this.encodings,this.options,r);var n=(0,Ab.getTotalWidthOfEncodings)(this.encodings),i=(0,Ab.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,r.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(r.fillStyle=this.options.background,r.fillRect(0,0,this.canvas.width,this.canvas.height)),r.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(r,n){var i=this.canvas.getContext("2d"),a=n.data,o;r.textPosition=="top"?o=r.marginTop+r.fontSize+r.textMargin:o=r.marginTop,i.fillStyle=r.lineColor;for(var s=0;s<a.length;s++){var l=s*r.width+n.barcodePadding;a[s]==="1"?i.fillRect(l,o,r.width,r.height):a[s]&&i.fillRect(l,o,r.width,r.height*a[s])}}},{key:"drawCanvasText",value:function(r,n){var i=this.canvas.getContext("2d"),a=r.fontOptions+" "+r.fontSize+"px "+r.font;if(r.displayValue){var o,s;r.textPosition=="top"?s=r.marginTop+r.fontSize-r.textMargin:s=r.height+r.textMargin+r.marginTop+r.fontSize,i.font=a,r.textAlign=="left"||n.barcodePadding>0?(o=0,i.textAlign="left"):r.textAlign=="right"?(o=n.width-1,i.textAlign="right"):(o=n.width/2,i.textAlign="center"),i.fillText(n.text,o,s)}}},{key:"moveCanvasDrawing",value:function(r){var n=this.canvas.getContext("2d");n.translate(r.width,0)}},{key:"restoreCanvas",value:function(){var r=this.canvas.getContext("2d");r.restore()}}]),t}();xE.default=u9e;var bE={};Object.defineProperty(bE,"__esModule",{value:!0});var d9e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f9e=bf,h9e=p9e(f9e),Sb=Ni;function p9e(t){return t&&t.__esModule?t:{default:t}}function m9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u0="http://www.w3.org/2000/svg",g9e=function(){function t(e,r,n){m9e(this,t),this.svg=e,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return d9e(t,[{key:"render",value:function(){var r=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var i=this.encodings[n],a=(0,h9e.default)(this.options,i.options),o=this.createGroup(r,a.marginTop,this.svg);this.setGroupOptions(o,a),this.drawSvgBarcode(o,a,i),this.drawSVGText(o,a,i),r+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,Sb.calculateEncodingAttributes)(this.encodings,this.options);var r=(0,Sb.getTotalWidthOfEncodings)(this.encodings),n=(0,Sb.getMaximumHeightOfEncodings)(this.encodings),i=r+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,n),this.options.background&&this.drawRect(0,0,i,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(r,n,i){var a=i.data,o;n.textPosition=="top"?o=n.fontSize+n.textMargin:o=0;for(var s=0,l=0,u=0;u<a.length;u++)l=u*n.width+i.barcodePadding,a[u]==="1"?s++:s>0&&(this.drawRect(l-n.width*s,o,n.width*s,n.height,r),s=0);s>0&&this.drawRect(l-n.width*(s-1),o,n.width*s,n.height,r)}},{key:"drawSVGText",value:function(r,n,i){var a=this.document.createElementNS(u0,"text");if(n.displayValue){var o,s;a.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?s=n.fontSize-n.textMargin:s=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||i.barcodePadding>0?(o=0,a.setAttribute("text-anchor","start")):n.textAlign=="right"?(o=i.width-1,a.setAttribute("text-anchor","end")):(o=i.width/2,a.setAttribute("text-anchor","middle")),a.setAttribute("x",o),a.setAttribute("y",s),a.appendChild(this.document.createTextNode(i.text)),r.appendChild(a)}}},{key:"setSvgAttributes",value:function(r,n){var i=this.svg;i.setAttribute("width",r+"px"),i.setAttribute("height",n+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+r+" "+n),i.setAttribute("xmlns",u0),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(r,n,i){var a=this.document.createElementNS(u0,"g");return a.setAttribute("transform","translate("+r+", "+n+")"),i.appendChild(a),a}},{key:"setGroupOptions",value:function(r,n){r.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(r,n,i,a,o){var s=this.document.createElementNS(u0,"rect");return s.setAttribute("x",r),s.setAttribute("y",n),s.setAttribute("width",i),s.setAttribute("height",a),o.appendChild(s),s}}]),t}();bE.default=g9e;var wE={};Object.defineProperty(wE,"__esModule",{value:!0});var v9e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function y9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var x9e=function(){function t(e,r,n){y9e(this,t),this.object=e,this.encodings=r,this.options=n}return v9e(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();wE.default=x9e;Object.defineProperty(yE,"__esModule",{value:!0});var b9e=xE,w9e=AE(b9e),A9e=bE,S9e=AE(A9e),_9e=wE,C9e=AE(_9e);function AE(t){return t&&t.__esModule?t:{default:t}}yE.default={CanvasRenderer:w9e.default,SVGRenderer:S9e.default,ObjectRenderer:C9e.default};var wf={};Object.defineProperty(wf,"__esModule",{value:!0});function SE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _E(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function CE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var E9e=function(t){CE(e,t);function e(r,n){SE(this,e);var i=_E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.name="InvalidInputException",i.symbology=r,i.input=n,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return e}(Error),N9e=function(t){CE(e,t);function e(){SE(this,e);var r=_E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return e}(Error),j9e=function(t){CE(e,t);function e(){SE(this,e);var r=_E(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return e}(Error);wf.InvalidInputException=E9e;wf.InvalidElementException=N9e;wf.NoElementException=j9e;Object.defineProperty(gE,"__esModule",{value:!0});var T9e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P9e=vE,vA=dV(P9e),O9e=yE,ah=dV(O9e),I9e=wf;function dV(t){return t&&t.__esModule?t:{default:t}}function EE(t){if(typeof t=="string")return D9e(t);if(Array.isArray(t)){for(var e=[],r=0;r<t.length;r++)e.push(EE(t[r]));return e}else{if(typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLImageElement)return k9e(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement!="undefined"&&t instanceof SVGElement)return{element:t,options:(0,vA.default)(t),renderer:ah.default.SVGRenderer};if(typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,vA.default)(t),renderer:ah.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:ah.default.CanvasRenderer};if(t&&(typeof t=="undefined"?"undefined":T9e(t))==="object"&&!t.nodeName)return{element:t,renderer:ah.default.ObjectRenderer};throw new I9e.InvalidElementException}}function D9e(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var r=[],n=0;n<e.length;n++)r.push(EE(e[n]));return r}}function k9e(t){var e=document.createElement("canvas");return{element:e,options:(0,vA.default)(t),renderer:ah.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}gE.default=EE;var NE={};Object.defineProperty(NE,"__esModule",{value:!0});var M9e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function R9e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var $9e=function(){function t(e){R9e(this,t),this.api=e}return M9e(t,[{key:"handleCatch",value:function(r){if(r.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw r.message;else throw r;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(r){try{var n=r.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(i){return this.handleCatch(i),this.api}}}]),t}();NE.default=$9e;var L9e=YC,Jc=ic(L9e),F9e=bf,wm=ic(F9e),B9e=pE,fV=ic(B9e),z9e=mE,d4=ic(z9e),V9e=gE,U9e=ic(V9e),W9e=Ox,H9e=ic(W9e),G9e=NE,q9e=ic(G9e),hV=wf,K9e=Ix,pV=ic(K9e);function ic(t){return t&&t.__esModule?t:{default:t}}var Fo=function(){},Dx=function(e,r,n){var i=new Fo;if(typeof e=="undefined")throw Error("No element to render on was provided.");return i._renderProperties=(0,U9e.default)(e),i._encodings=[],i._options=pV.default,i._errorHandler=new q9e.default(i),typeof r!="undefined"&&(n=n||{},n.format||(n.format=gV()),i.options(n)[n.format](r,n).render()),i};Dx.getModule=function(t){return Jc.default[t]};for(var f4 in Jc.default)Jc.default.hasOwnProperty(f4)&&X9e(Jc.default,f4);function X9e(t,e){Fo.prototype[e]=Fo.prototype[e.toUpperCase()]=Fo.prototype[e.toLowerCase()]=function(r,n){var i=this;return i._errorHandler.wrapBarcodeCall(function(){n.text=typeof n.text=="undefined"?void 0:""+n.text;var a=(0,wm.default)(i._options,n);a=(0,H9e.default)(a);var o=t[e],s=mV(r,o,a);return i._encodings.push(s),i})}}function mV(t,e,r){t=""+t;var n=new e(t,r);if(!n.valid())throw new hV.InvalidInputException(n.constructor.name,t);var i=n.encode();i=(0,fV.default)(i);for(var a=0;a<i.length;a++)i[a].options=(0,wm.default)(r,i[a].options);return i}function gV(){return Jc.default.CODE128?"CODE128":Object.keys(Jc.default)[0]}Fo.prototype.options=function(t){return this._options=(0,wm.default)(this._options,t),this};Fo.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this};Fo.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var r=(0,wm.default)(this._options,t.options);r.format=="auto"&&(r.format=gV()),this._errorHandler.wrapBarcodeCall(function(){var n=r.value,i=Jc.default[r.format.toUpperCase()],a=mV(n,i,r);yA(t,a,r)})}}};Fo.prototype.render=function(){if(!this._renderProperties)throw new hV.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)yA(this._renderProperties[t],this._encodings,this._options);else yA(this._renderProperties,this._encodings,this._options);return this};Fo.prototype._defaults=pV.default;function yA(t,e,r){e=(0,fV.default)(e);for(var n=0;n<e.length;n++)e[n].options=(0,wm.default)(r,e[n].options),(0,d4.default)(e[n].options);(0,d4.default)(r);var i=t.renderer,a=new i(t.element,e,r);a.render(),t.afterRender&&t.afterRender()}typeof window!="undefined"&&(window.JsBarcode=Dx);typeof jQuery!="undefined"&&(jQuery.fn.JsBarcode=function(t,e){var r=[];return jQuery(this).each(function(){r.push(this)}),Dx(r,t,e)});var Y9e=Dx;const Z9e=er(Y9e),Q9e=()=>{const[t,e]=x.useState(()=>{const r=window.innerWidth<=768||/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape";return{isMobile:r,orientation:n}});return x.useEffect(()=>{const r=()=>{const i=window.innerWidth<=768||/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),a=window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape";e({isMobile:i,orientation:a})},n=window.matchMedia("(orientation: portrait)");return n.addEventListener("change",r),window.addEventListener("resize",r),()=>{n.removeEventListener("change",r),window.removeEventListener("resize",r)}},[]),t},h4=(t,e="CODE128")=>{try{const r=document.createElement("canvas");return Z9e(r,t,{format:e,width:4,height:200,displayValue:!0,fontSize:28,textAlign:"center",textPosition:"bottom",background:"#ffffff",lineColor:"#000000",margin:20}),r.toDataURL()}catch(r){return console.error("Errore nella generazione barcode:",r),""}},J9e=({stats:t,isMobile:e})=>c.jsxs("div",{className:ie("flex flex-wrap gap-4",e&&"mb-4"),children:[c.jsxs(ne,{variant:"outline",children:[t.totalCards," carte"]}),c.jsxs(ne,{variant:"outline",children:[c.jsx(Br,{className:"w-3 h-3 mr-1"}),t.publicCards," pubbliche"]}),c.jsxs(ne,{variant:"outline",children:[c.jsx(Ir,{className:"w-3 h-3 mr-1"}),t.privateCards," private"]})]}),eBe=({searchTerm:t,setSearchTerm:e,brandFilter:r,setBrandFilter:n,sortBy:i,setSortBy:a,showNewCards:o,setShowNewCards:s,isFiltersExpanded:l,toggleFilters:u,activeFiltersCount:d,handleClearFilters:f,isMobile:h,brands:p})=>c.jsx(Ie,{className:"mb-4",children:c.jsxs(Ve,{className:"p-4",children:[h&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bl,{className:"h-4 w-4 text-cambridge-newStyle"}),c.jsx("span",{className:"font-medium text-delft-blue",children:"Filtri di ricerca"})]}),c.jsx(Q,{variant:"ghost",size:"sm",onClick:u,children:l?c.jsx(Bo,{}):c.jsx(Na,{})})]}),c.jsxs("div",{className:ie(h&&!l?"hidden":"block"),children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(At,{placeholder:"Cerca...",value:t,onChange:m=>e(m.target.value)}),c.jsxs(Nt,{value:r,onValueChange:n,children:[c.jsx(St,{children:c.jsx(jt,{placeholder:"Brand"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutti i brand"}),p.map(m=>c.jsx(ye,{value:m,children:m},m))]})]}),c.jsxs(Nt,{value:i,onValueChange:a,children:[c.jsx(St,{children:c.jsx(jt,{placeholder:"Ordina per"})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"priority",children:"Priorit"}),c.jsx(ye,{value:"name",children:"Nome"})]})]})]}),c.jsxs("div",{className:"flex justify-between items-center mt-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Kr,{id:"new-cards",checked:o,onCheckedChange:s}),c.jsx(Wt,{htmlFor:"new-cards",children:"Includi nuove"})]}),d>0&&c.jsx(Q,{variant:"ghost",onClick:f,children:"Pulisci"})]})]})]})}),tBe=({card:t,onCardClick:e})=>c.jsxs(Ie,{className:"relative overflow-hidden cursor-pointer group",style:{backgroundColor:t.color||"#6B7280",aspectRatio:"3/2"},onClick:()=>e(t),children:[c.jsx(Ve,{className:"p-4 h-full flex justify-center items-center",children:c.jsx("img",{src:$v(t.logo),alt:"Logo",className:"max-h-16 w-auto"})}),t.tag&&c.jsxs(ne,{className:"absolute bottom-2 left-2",children:[c.jsx(Va,{className:"w-3 h-3 mr-1"}),t.tag]})]}),rBe=({selectedCard:t,isDetailModalOpen:e,showCardBack:r,handleCloseDetail:n,toggleCardView:i,handleDeleteCard:a})=>{const{isMobile:o,orientation:s}=Q9e();return!t||!e?null:o&&s==="landscape"?c.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-white animate-in fade-in-0",children:[c.jsx("div",{className:"h-4 w-full flex-shrink-0",style:{backgroundColor:t.color||"#6B7280"}}),c.jsx("div",{className:"flex-grow flex items-center justify-center p-4 relative",children:c.jsx("img",{src:h4(t.barcode||"123456789"),alt:"Barcode per ".concat(t.brand),className:"max-w-full max-h-full object-contain",style:{imageRendering:"pixelated"}})}),c.jsx("p",{className:"absolute bottom-5 left-1/2 -translate-x-1/2 text-xs text-gray-400 animate-pulse",children:"Ruota il dispositivo per tornare alla visualizzazione normale"})]}):c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/20 backdrop-blur-sm",children:[c.jsx("div",{className:"absolute inset-0",onClick:n}),c.jsx("div",{className:"relative",style:{perspective:"1200px",width:"85vw",maxWidth:"400px"},children:c.jsxs("div",{className:"cursor-pointer transition-transform duration-700 w-full",style:{transformStyle:"preserve-3d",transform:r?"rotateY(180deg)":"rotateY(0deg)",aspectRatio:"1.58"},onClick:i,children:[c.jsxs("div",{className:"absolute w-full h-full p-6 rounded-xl flex flex-col justify-between text-white shadow-2xl",style:{backgroundColor:t.color,backfaceVisibility:"hidden"},children:[c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:l=>{l.stopPropagation(),a(t.id),n()},className:"bg-black/20 hover:bg-black/40 rounded-full p-2 transition-colors",children:c.jsx(Mr,{className:"w-5 h-5 text-white"})})}),c.jsx("div",{className:"flex-1 flex items-center justify-center",children:c.jsx("img",{src:$v(t.logo),alt:"Logo",className:"h-20 w-auto object-contain"})}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-2xl font-mono tracking-widest",children:t.brand})})]}),c.jsx("div",{className:"absolute w-full h-full rounded-xl bg-gray-100 shadow-2xl",style:{borderRadius:"12px",backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:c.jsx("div",{className:"bg-white rounded-xl h-full w-full flex items-center justify-center border-gray-200 shadow-inner overflow-hidden",style:{borderTop:"25px solid ".concat(t.color||"#6B7280"),borderRadius:"12px"},children:c.jsx("img",{src:h4(t.barcode||"123456789"),alt:"Barcode",className:"w-full h-auto object-contain px-4",style:{imageRendering:"pixelated"}})})})]})})]})},d0={WalletStats:J9e,FilterPanel:eBe,CompactFidelityCard:tBe,CardDetailModal:rBe},nBe=({onScanSuccess:t,onScanError:e,isActive:r=!0})=>{var S;const n=x.useRef(null),i=x.useRef(null),[a,o]=x.useState("unknown"),[s,l]=x.useState(!0),[u,d]=x.useState(null),[f,h]=x.useState(!1),[p,m]=x.useState([]),[g,v]=x.useState(0),y=(S=p[g])==null?void 0:S.id,b=p.length>1,w=x.useCallback(()=>{b&&(console.log(" Cambio fotocamera"),v(A=>(A+1)%p.length))},[b,p.length]);return x.useEffect(()=>{if(!r){l(!1);return}G(Gt,null,function*(){l(!0),d(null);try{(yield navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(O=>O.stop()),o("granted"),console.log(" Permessi camera ottenuti");const N=(yield navigator.mediaDevices.enumerateDevices()).filter(O=>O.kind==="videoinput").map((O,j)=>({id:O.deviceId,label:O.label||"Camera ".concat(j+1)}));if(N.length===0)throw new Error("Nessuna fotocamera trovata.");console.log(" Trovate ".concat(N.length," fotocamere.")),m(N);const T=N.findIndex(O=>/back|rear|environment/i.test(O.label));v(T!==-1?T:0)}catch(_){console.error(" Errore inizializzazione camera:",_),o("denied");const E=_ instanceof Error?_.message:String(_);d("Impossibile accedere alla fotocamera: ".concat(E))}finally{l(!1)}})},[r]),x.useEffect(()=>{if(!r||a!=="granted"||!n.current||!y)return;if(!i.current){const N=new Map,T=[Fe.CODE_39,Fe.CODE_128,Fe.EAN_13,Fe.EAN_8];N.set(hr.POSSIBLE_FORMATS,T),i.current=new Bz(N),console.log(" Reader ZXing inizializzato.")}const A=i.current;let _=!0;return G(Gt,null,function*(){try{console.log(" Avvio scansione sul dispositivo: ".concat(y)),h(!0),yield A.decodeFromVideoDevice(y,n.current,(N,T)=>{_&&(N?t(N):T&&!(T instanceof le)&&e(T))})}catch(N){console.error(" Errore critico avvio scansione:",N);const T=N instanceof Error?N.message:String(N);d("Errore scanner: ".concat(T)),h(!1)}}),()=>{_=!1,i.current&&i.current.reset(),h(!1)}},[r,a,y,t,e]),{videoRef:n,isLoading:s,error:u,permission:a,isScanning:f,hasMultipleCameras:b,switchCamera:w}},iBe=({onScanSuccess:t,onScanError:e,isActive:r})=>{const n=x.useCallback(f=>{const h={codeResult:{code:f.getText(),format:f.getBarcodeFormat()}};t(h)},[t]),{videoRef:i,isLoading:a,error:o,permission:s,isScanning:l,hasMultipleCameras:u,switchCamera:d}=nBe({onScanSuccess:n,onScanError:e,isActive:r});return a?c.jsx("div",{className:"w-full bg-gray-200 rounded-lg aspect-video flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(UW,{className:"w-12 h-12 text-gray-400 mx-auto mb-2 animate-pulse"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Inizializzazione scanner..."})]})}):s==="denied"||o?c.jsx("div",{className:"w-full bg-red-50 border border-red-200 rounded-lg aspect-video flex items-center justify-center",children:c.jsxs("div",{className:"text-center p-4",children:[c.jsx(ao,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-red-600 font-medium",children:"Errore Scanner"}),c.jsx("p",{className:"text-xs text-red-500 mt-1",children:o||"Accesso alla fotocamera negato."}),c.jsx(Q,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>window.location.reload(),children:"Riprova"})]})}):c.jsxs("div",{className:"w-full space-y-3",children:[c.jsxs("div",{className:"relative w-full bg-black rounded-lg overflow-hidden",children:[c.jsx("video",{ref:i,className:"w-full object-cover",style:{height:"250px"},playsInline:!0,muted:!0}),c.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[l&&c.jsx("div",{className:"absolute inset-x-4 top-1/2 -translate-y-1/2 h-0.5 bg-red-500 shadow-lg animate-pulse"}),c.jsxs("div",{className:"absolute inset-4 border-2 border-white/70 rounded-lg",children:[c.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-red-500 rounded-tl-lg"}),c.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-red-500 rounded-tr-lg"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-red-500 rounded-bl-lg"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-red-500 rounded-br-lg"})]})]})]}),c.jsx("div",{className:"flex justify-center items-center gap-3",children:u&&c.jsx(Q,{variant:"outline",size:"icon",onClick:d,title:"Cambia fotocamera",disabled:!l,children:c.jsx(R0,{size:20})})})]})},aBe=({searchQuery:t,setSearchQuery:e,selectedSupermarket:r,setSelectedSupermarket:n,selectedColor:i,setSelectedColor:a,handleClose:o,nextStep:s})=>{const l=x.useMemo(()=>Object.entries(zC).filter(([u,d])=>u==="altro"||d.name.toLowerCase().includes(t.toLowerCase())),[t]);return c.jsxs("div",{className:"flex flex-col",style:{height:"77vh"},children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4 pb-4 border-b border-gray-200",children:[c.jsx(Wt,{className:"text-base font-semibold text-gray-700",children:"Seleziona il Negozio"}),c.jsxs("div",{className:"relative",children:[c.jsx($u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),c.jsx("input",{type:"text",placeholder:"Cerca negozio...",value:t,onChange:u=>e(u.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#663EF3] focus:border-transparent"})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden py-4",children:[c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 w-72 mx-auto",children:l.map(([u,d])=>d.name==="ALTRO"?c.jsxs("button",{onClick:()=>n(u),className:ie("flex flex-col items-center justify-center w-full p-4 min-h-[6rem] bg-gray-100 rounded-lg border-2 border-dashed transition-all duration-300",r===u?"border-solid bg-indigo-50 border-[#663EF3]":"border-gray-300 hover:border-gray-400 hover:bg-gray-200"),children:[c.jsx(ar,{className:"w-6 h-6 mb-1 text-gray-500"}),c.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Altro"})]},u):c.jsx(Ie,{style:{backgroundColor:d.color},className:ie("cursor-pointer transform transition-all duration-300 hover:scale-105 rounded-xl overflow-hidden border-2",r===u?"ring-2 ring-offset-2 ring-[#663EF3] border-white":"border-transparent"),onClick:()=>n(u),children:c.jsxs(Ve,{className:"flex flex-col items-center justify-center p-2 text-center min-h-[6rem] text-white",children:[c.jsx("img",{src:$v(d.logo),alt:"".concat(d.name," Logo"),className:"h-16 w-auto object-contain mb-1 drop-shadow-md"}),c.jsx("span",{className:"text-xs font-semibold truncate w-full",children:d.name})]})},u))}),l.length===0&&c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx($u,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),c.jsxs("p",{children:['Nessun negozio trovato per "',t,'"']})]}),r==="altro"&&c.jsxs("div",{className:"mt-4 space-y-3 bg-gray-50 p-4 rounded-lg border",children:[c.jsxs(Wt,{className:"font-semibold text-gray-700 flex items-center gap-2",children:[c.jsx(Yk,{})," Personalizza Colore"]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("input",{type:"color",value:i,onChange:u=>a(u.target.value),className:"w-14 h-14 p-0 bg-transparent border-none rounded-lg cursor-pointer"}),c.jsx("div",{className:"grid grid-cols-7 gap-2 flex-1",children:fMe.map(u=>c.jsx("button",{type:"button",className:ie("w-8 h-8 rounded-full border-2 transition-all duration-200 hover:scale-110",i===u?"ring-2 ring-offset-2 ring-[#663EF3] border-white":"border-gray-300"),style:{backgroundColor:u},onClick:()=>a(u)},u))})]})]})]}),c.jsxs("div",{className:"flex-shrink-0 flex gap-4 pt-4 border-t border-gray-200",children:[c.jsx(Q,{variant:"ghost",onClick:o,className:"w-full",children:"Annulla"}),c.jsxs(Q,{onClick:s,disabled:!r,className:"w-full text-white",style:{background:"var(--burnt-newStyle)"},children:["Continua ",c.jsx(kv,{className:"w-4 h-4 ml-2"})]})]})]})},oBe=({scannedData:t,setScannedData:e,handleScanSuccess:r,handleManualInput:n,prevStep:i,nextStep:a,scanStepError:o,setScanStepError:s})=>{const l=x.useRef(null),u=d=>G(Gt,null,function*(){var v;const f=(v=d.target.files)==null?void 0:v[0];if(!f)return;s(null);const h=new Map,p=[Fe.CODE_39,Fe.CODE_128,Fe.EAN_13,Fe.EAN_8];h.set(hr.POSSIBLE_FORMATS,p);const m=new Bz(h),g=URL.createObjectURL(f);try{const y=yield m.decodeFromImageUrl(g),b={codeResult:{code:y.getText(),format:y.getBarcodeFormat()}};r(b)}catch(y){console.error("Errore durante la decodifica dell'immagine:",y),s("Nessun codice a barre trovato. Riprova con un'altra immagine.")}finally{URL.revokeObjectURL(g),d.target&&(d.target.value="")}});return c.jsxs("div",{className:"flex flex-col gap-4 text-center",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Inquadra il codice, caricalo da un file o inseriscilo a mano."}),t?c.jsxs("div",{className:"p-4 bg-green-50 text-green-800 rounded-lg flex flex-col items-center gap-3 border border-green-200",children:[c.jsx(No,{className:"w-10 h-10 text-green-500"}),c.jsx("p",{className:"font-semibold text-lg",children:"Codice Acquisito!"}),c.jsx("p",{className:"font-mono bg-white p-2 rounded",children:t}),c.jsx(Q,{variant:"link",size:"sm",onClick:()=>e(""),children:"Scansiona di nuovo"})]}):c.jsx(iBe,{onScanSuccess:r,onScanError:d=>s(d instanceof Error?d.message:"Si  verificato un errore durante la scansione."),isActive:!t}),o&&c.jsxs("div",{className:"p-3 bg-red-50 text-red-700 text-sm rounded-lg flex items-center gap-2",children:[c.jsx(ao,{className:"h-5 w-5"}),o]}),c.jsxs("div",{className:"relative flex items-center py-2",children:[c.jsx("div",{className:"flex-grow border-t border-gray-200"}),c.jsx("span",{className:"flex-shrink mx-4 text-xs text-gray-400",children:"OPPURE"}),c.jsx("div",{className:"flex-grow border-t border-gray-200"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs(Q,{variant:"outline",onClick:()=>{var d;return(d=l.current)==null?void 0:d.click()},children:[c.jsx(fH,{className:"w-4 h-4 mr-2"})," Carica File"]}),c.jsxs(Q,{variant:"outline",onClick:n,children:[c.jsx(zo,{className:"w-4 h-4 mr-2"})," Inserisci a Mano"]})]}),c.jsx("input",{type:"file",ref:l,onChange:u,accept:"image/*",className:"hidden"}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsxs(Q,{variant:"ghost",onClick:i,className:"w-full",children:[c.jsx(Hk,{className:"w-4 h-4 mr-2"})," Indietro"]}),c.jsxs(Q,{onClick:a,disabled:!t,className:"w-full text-white",style:{background:"var(--burnt-newStyle)"},children:["Continua ",c.jsx(kv,{className:"w-4 h-4 ml-2"})]})]})]})},sBe=({selectedSupermarket:t,scannedData:e,selectedColor:r,isPublic:n,setIsPublic:i,tag:a,setTag:o,prevStep:s,saveCard:l})=>{if(!t)return null;const u=zC[t],d=t==="altro"?r:u.color,f=e.length>12?e.replace(/(.{4})/g,"$1 ").trim():e;return c.jsxs("div",{className:"space-y-6 text-center",children:[c.jsx("p",{className:"text-gray-600",children:"Controlla i dati e salva la tua carta."}),c.jsx(Ie,{className:"mx-auto max-w-xs shadow-lg",style:{backgroundColor:d},children:c.jsxs(Ve,{className:"text-center text-white p-6 space-y-3",children:[c.jsx("img",{src:$v(u.logo),className:"h-14 mx-auto drop-shadow-lg",alt:u.name}),c.jsxs("h3",{className:"text-xl font-bold",children:[u.name," ",u.type]}),c.jsx("p",{className:"font-mono text-lg bg-white/20 px-2 py-1 rounded-md",children:f})]})}),c.jsxs("div",{className:"w-full space-y-1 text-left",children:[c.jsxs(Wt,{htmlFor:"card-tag",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[c.jsx(Va,{className:"h-4 w-4"}),"Tag (Opzionale)"]}),c.jsx("input",{id:"card-tag",type:"text",placeholder:"Es. Carta Famiglia, Lavoro...",value:a,onChange:h=>o(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#663EF3] focus:border-transparent"})]}),c.jsxs("div",{className:"flex flex-row items-center justify-between rounded-lg border p-4 bg-gray-50",children:[c.jsxs("div",{className:"space-y-0.5 text-left",children:[c.jsx(Wt,{className:"text-base flex items-center",children:n?c.jsxs(c.Fragment,{children:[c.jsx(Br,{className:"mr-2 h-4 w-4 text-green-600"}),"Carta Pubblica"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ir,{className:"mr-2 h-4 w-4 text-orange-600"}),"Carta Privata"]})}),c.jsx("p",{className:"text-xs text-gray-600",children:n?"Questa carta sar visibile a tutti i membri della famiglia":"Questa carta sar visibile solo a te"})]}),c.jsx(Kr,{checked:n,onCheckedChange:i})]}),c.jsxs("div",{className:"flex gap-4 pt-4",children:[c.jsxs(Q,{variant:"ghost",onClick:s,className:"w-full",children:[c.jsx(Hk,{className:"w-4 h-4 mr-2"})," Indietro"]}),c.jsxs(Q,{onClick:l,className:"w-full text-white bg-green-600 hover:bg-green-700",children:[c.jsx(No,{className:"w-4 h-4 mr-2"})," Salva Carta"]})]})]})},cBe=({isOpen:t,onClose:e,onSave:r})=>{const[n,i]=x.useState(1),[a,o]=x.useState(null),[s,l]=x.useState(""),[u,d]=x.useState("#536DFE"),[f,h]=x.useState(!1),[p,m]=x.useState(""),[g,v]=x.useState(""),[y,b]=x.useState(null),w=x.useCallback(()=>{i(1),o(null),l(""),d("#536DFE"),m(""),h(!1),v(""),b(null)},[]),S=()=>{w(),e()},A=()=>{b(null),i(O=>Math.min(O+1,3))},_=()=>{w(),b(null),i(O=>Math.max(O-1,1))},E=x.useCallback(O=>{b(null);let j=O.codeResult.code;O.codeResult.format===Fe.EAN_13&&j.length===12&&(console.log("Rilevato EAN-13 a 12 cifre. Aggiungo '0' iniziale."),j="0"+j),l(j)},[]),N=()=>{const O=prompt("Inserisci il codice manualmente:");O!=null&&O.trim()&&(b(null),l(O.trim()))},T=()=>{if(!a||!s)return;const O=zC[a];r({name:"".concat(O.name," ").concat(O.type),number:s,brand:O.name,logo:O.logo,barcode:s,color:a==="altro"?u:O.color,isPublic:f,tag:g}),S()};return c.jsx(Yt,{open:t,onOpenChange:O=>!O&&S(),children:c.jsxs(Ht,{className:"sm:max-w-md",children:[c.jsxs(Zt,{children:[c.jsxs(Qt,{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 rounded-lg",style:{background:"var(--burnt-newStyle)"},children:c.jsx(sH,{className:"w-6 h-6 text-white"})}),"Aggiungi Carta Fedelt"]}),c.jsxs(Oi,{children:["Passo ",n," di 3 - Seleziona, scansiona e conferma."]})]}),n===1&&c.jsx(aBe,{searchQuery:p,setSearchQuery:m,selectedSupermarket:a,setSelectedSupermarket:o,selectedColor:u,setSelectedColor:d,handleClose:S,nextStep:A}),n===2&&c.jsx(oBe,{scannedData:s,setScannedData:l,handleScanSuccess:E,handleManualInput:N,prevStep:_,nextStep:A,scanStepError:y,setScanStepError:b}),n===3&&c.jsx(sBe,{selectedSupermarket:a,scannedData:s,selectedColor:u,isPublic:f,setIsPublic:h,tag:g,setTag:v,prevStep:_,saveCard:T})]})})},lBe=()=>{const{user:t}=Bt(),{toast:e}=Nr(),r=Li(),{data:n,loading:i,add:a,update:o,remove:s}=Jt("fidelity_cards"),[l,u]=x.useState([]),[d,f]=x.useState(!r),[h,p]=x.useState(!1),[m,g]=x.useState(!1),[v,y]=x.useState(null),[b,w]=x.useState(!1),[S,A]=x.useState(!1),[_,E]=x.useState(""),[N,T]=x.useState("all"),[O,j]=x.useState("priority"),[P,D]=x.useState(!0),{showLoading:F}=dm(i,n);x.useEffect(()=>{if(n){const Y=n.map(te=>te instanceof Ja?te:Ja.fromFirestore(te));u(Y)}},[n]),x.useEffect(()=>{f(!r)},[r]);const{filteredCards:I,visibleCards:k}=x.useMemo(()=>{if(!l||!t)return{filteredCards:[],visibleCards:[]};const Y=l.filter(ae=>ae.isPublic||ae.createdBy===t.username||t.role==="admin");return{filteredCards:Y.filter(ae=>{var Pe,oe,_e;const X=!_||((Pe=ae.name)==null?void 0:Pe.toLowerCase().includes(_.toLowerCase()))||((oe=ae.brand)==null?void 0:oe.toLowerCase().includes(_.toLowerCase()))||((_e=ae.number)==null?void 0:_e.toLowerCase().includes(_.toLowerCase())),be=N==="all"||ae.brand===N,ue=P?!0:!ae.isNew();return X&&be&&ue}),visibleCards:Y}},[l,_,N,P,t]),R=x.useMemo(()=>{const Y=[...I];switch(O){case"name":return Y.sort((te,ae)=>te.name.localeCompare(ae.name));case"lastUsed":return Y.sort((te,ae)=>new Date(ae.lastUsed).getTime()-new Date(te.lastUsed).getTime());case"priority":default:return Ja.sortByPriority(Y)}},[I,O]),L=x.useMemo(()=>{if(!k||!t)return{totalCards:0,publicCards:0,privateCards:0,myCards:0,newCards:0,popularCards:0,brands:[],cardsWithPoints:0,oldestCardDate:null,newestCardDate:null};const Y=[...new Set(k.map(X=>X.brand))].filter(Boolean);let te=null,ae=null;if(k.length>0){const X=k.map(be=>be.createdAt instanceof Date?be.createdAt:new Date(be.createdAt));te=T5(X),ae=j5(X)}return{totalCards:k.length,publicCards:k.filter(X=>X.isPublic).length,privateCards:k.filter(X=>!X.isPublic).length,myCards:k.filter(X=>X.createdBy===t.username).length,newCards:k.filter(X=>X.isNew()).length,popularCards:k.filter(X=>X.isPopular()).length,brands:Y,oldestCardDate:te,newestCardDate:ae}},[k,t]),V=Y=>G(Gt,null,function*(){try{yield s(Y),e({title:"Carta eliminata",description:"Carta eliminata con successo!"})}catch(te){console.error("Errore nell'eliminazione carta:",te),e({title:"Errore",description:"Impossibile eliminare la carta",variant:"destructive"})}}),W=Y=>G(Gt,null,function*(){try{const te=Object.assign(Object.create(Object.getPrototypeOf(Y)),Y);te.incrementPriority(),yield o(Y.id,te),u(ae=>ae.map(X=>X.id===Y.id?te:X)),y(te),w(!0)}catch(te){console.error("Errore nell'aggiornamento carta:",te),y(Y),w(!0)}}),q=()=>{w(!1),y(null),A(!1)},H=()=>{A(!S)},J=()=>{g(!0)},de=()=>{g(!1)},se=()=>{E(""),T("all"),j("priority"),D(!0)},Ee=[_.length>0,N!=="all",O!=="priority",!P].filter(Boolean).length,Ue=()=>f(!d),ge=Y=>G(Gt,null,function*(){if(!t){e({title:"Errore",description:"Devi essere autenticato",variant:"destructive"});return}try{const te=rte.createFidelityCard(Y,t.username);yield a(te),de(),e({title:"Carta aggiunta",description:"Carta aggiunta con successo!"})}catch(te){console.error("Errore nel salvataggio carta:",te),e({title:"Errore",description:"Impossibile aggiungere la carta",variant:"destructive"})}});return c.jsx(gf,{isVisible:F,title:"Caricamento Portafoglio",subtitle:"Recupero delle tue carte...",children:c.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[c.jsxs("div",{className:ie("flex justify-between items-start gap-6 mb-8",r?"flex-col":"lg:flex-row lg:items-center"),children:[c.jsxs("div",{className:"flex-1 flex items-center gap-3 w-full",children:[c.jsx(m0,{className:"h-8 w-8 text-cambridge-newStyle"}),c.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"Wallet"}),r&&c.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[c.jsx(Q,{onClick:()=>p(!0),size:"sm",variant:"outline",className:"border-cambridge-newStyle",children:c.jsx(Cs,{className:"h-4 w-4 text-cambridge-newStyle"})}),c.jsx(Q,{onClick:J,size:"sm",className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white p-2",children:c.jsx(ar,{className:"h-4 w-4"})})]})]}),!r&&c.jsx(d0.WalletStats,{stats:L,isMobile:r}),!r&&c.jsxs(Q,{onClick:J,className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90 text-white",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Aggiungi Carta"]})]}),c.jsx(d0.FilterPanel,{searchTerm:_,setSearchTerm:E,brandFilter:N,setBrandFilter:T,sortBy:O,setSortBy:j,showNewCards:P,setShowNewCards:D,isFiltersExpanded:d,toggleFilters:Ue,activeFiltersCount:Ee,handleClearFilters:se,isMobile:r,brands:L.brands}),!i&&c.jsx("div",{className:"space-y-8",children:R.length>0?c.jsx("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-3",children:R.map(Y=>c.jsx(d0.CompactFidelityCard,{card:Y,onCardClick:W},Y.id))}):c.jsx(Ie,{className:"text-center py-16",children:c.jsxs(Ve,{children:[c.jsx(m0,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:t?"Nessuna carta trovata":"Accedi per gestire le tue carte"}),c.jsx("p",{className:"text-gray-500 mb-4",children:Ee>0?"Prova a modificare i filtri di ricerca.":"Inizia aggiungendo la tua prima carta fedelt."}),t&&(Ee>0?c.jsx(Q,{onClick:se,variant:"outline",children:"Pulisci Filtri"}):c.jsxs(Q,{onClick:J,className:"bg-cambridge-newStyle hover:bg-cambridge-newStyle/90",children:[c.jsx(ar,{className:"mr-2 h-4 w-4"}),"Aggiungi Prima Carta"]}))]})})}),c.jsx(d0.CardDetailModal,{selectedCard:v,isDetailModalOpen:b,showCardBack:S,handleCloseDetail:q,toggleCardView:H,handleDeleteCard:V}),c.jsx(cBe,{isOpen:m,onClose:de,onSave:ge}),c.jsx(Yt,{open:h,onOpenChange:p,children:c.jsxs(Ht,{className:"sm:max-w-md p-6",children:[c.jsxs(Zt,{className:"mb-4",children:[c.jsx(Qt,{className:"text-xl font-semibold text-delft-blue",children:"Statistiche Portafoglio"}),c.jsx(Oi,{className:"text-gray-600",children:"Riepilogo approfondito delle tue carte fedelt."})]}),c.jsxs("div",{className:"flex flex-wrap gap-3 py-4 border-t border-b border-gray-200 dark:border-gray-700",children:[c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-cambridge-newStyle/10 text-cambridge-newStyle border-cambridge-newStyle/20",children:[c.jsx(m0,{className:"w-4 h-4 mr-2"})," ",L.totalCards," ",L.totalCards===1?"carta":"carte"," totali"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-blue-100 text-blue-700 border-blue-200",children:[c.jsx(Br,{className:"w-4 h-4 mr-2"})," ",L.publicCards," ",L.publicCards===1?"pubblica":"pubbliche"]}),c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-orange-100 text-orange-700 border-orange-200",children:[c.jsx(Ir,{className:"w-4 h-4 mr-2"})," ",L.privateCards," ",L.privateCards===1?"privata":"private"]}),L.myCards>0&&c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-purple-100 text-purple-700 border-purple-200",children:[c.jsx(Lr,{className:"w-4 h-4 mr-2"})," ",L.myCards," ",L.myCards===1?"mia":"mie"]}),L.newCards>0&&c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-green-100 text-green-700 border-green-200",children:[c.jsx(R0,{className:"w-4 h-4 mr-2"})," ",L.newCards," ",L.newCards===1?"nuova":"nuove"," carte"]}),L.popularCards>0&&c.jsxs(ne,{variant:"secondary",className:"flex items-center justify-center p-2 text-sm font-medium bg-yellow-100 text-yellow-700 border-yellow-200",children:[c.jsx(Qk,{className:"w-4 h-4 mr-2"})," ",L.popularCards," ",L.popularCards===1?"carta":"carte"," popolari"]})]}),c.jsx("div",{className:"pt-4 flex justify-end",children:c.jsx(Q,{onClick:()=>p(!1),variant:"secondary",children:"Chiudi"})})]})})]})})};function uBe(){const[t,e]=x.useState(new Date);return c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"2rem",width:"100vw",height:"100vh",backgroundColor:"#111"},children:[c.jsxs("div",{children:[c.jsx("h1",{style:{color:"white",textAlign:"center",marginBottom:"1rem"},children:"Pagina di Test Isolata"}),c.jsxs(Yp,{children:[c.jsx(Zp,{asChild:!0,children:c.jsx(Q,{variant:"outline",children:"Apri in un Popover"})}),c.jsx(Hd,{className:"w-auto p-0",align:"start",children:c.jsx(Td,{mode:"single",selected:t,onSelect:e})})]})]}),c.jsx("div",{children:c.jsxs(Yt,{children:[c.jsx(BS,{asChild:!0,children:c.jsx(Q,{variant:"outline",children:"Apri in una Modale (Dialog)"})}),c.jsx(Ht,{className:"p-0 w-auto",children:c.jsx(Td,{mode:"single",selected:t,onSelect:e})})]})}),c.jsxs("p",{style:{color:"white",textAlign:"center",marginTop:"1rem"},children:["Data selezionata: ",t?t.toString():"Nessuna"]})]})}const Ma={CLIENT_ID:"bb760b3b8ee8426f97527e93f0d14e20",REDIRECT_URI:"https://127.0.0.1:3000/",SCOPES:["user-read-private","user-read-email","user-top-read","user-read-recently-played"].join(" "),API_BASE_URL:"https://api.spotify.com/v1",AUTH_URL:"https://accounts.spotify.com/authorize",TOKEN_URL:"https://accounts.spotify.com/api/token"},dBe={MEDIUM_TERM:"medium_term"},_b={ME:"/me",TOP_TRACKS:"/me/top/tracks",TOP_ARTISTS:"/me/top/artists",RECENTLY_PLAYED:"/me/player/recently-played",ARTISTS:"/artists"};class Cc{static getToken(){return localStorage.getItem(this.STORAGE_KEYS.ACCESS_TOKEN)}static setTokens(e,r,n){localStorage.setItem(this.STORAGE_KEYS.ACCESS_TOKEN,e),localStorage.setItem(this.STORAGE_KEYS.REFRESH_TOKEN,r),localStorage.setItem(this.STORAGE_KEYS.EXPIRES_IN,n.toString()),localStorage.setItem(this.STORAGE_KEYS.TIMESTAMP,Date.now().toString())}static clearTokens(){Object.values(this.STORAGE_KEYS).forEach(e=>localStorage.removeItem(e))}static isTokenExpired(){const e=localStorage.getItem(this.STORAGE_KEYS.TIMESTAMP),r=localStorage.getItem(this.STORAGE_KEYS.EXPIRES_IN);return!e||!r?!0:(Date.now()-parseInt(e))/1e3>=parseInt(r)-300}static refreshToken(){return G(this,null,function*(){const e=localStorage.getItem(this.STORAGE_KEYS.REFRESH_TOKEN);if(!e)throw new Error("No refresh token available");const r=yield fetch(Ma.TOKEN_URL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:Ma.CLIENT_ID})});if(!r.ok)throw new Error("Failed to refresh token");const n=yield r.json();return this.setTokens(n.access_token,n.refresh_token||e,n.expires_in),n.access_token})}static getValidToken(){return G(this,null,function*(){const e=this.getToken();return!e||this.isTokenExpired()?yield this.refreshToken():e})}}Rt(Cc,"STORAGE_KEYS",{ACCESS_TOKEN:"spotify_access_token",REFRESH_TOKEN:"spotify_refresh_token",EXPIRES_IN:"spotify_expires_in",TIMESTAMP:"spotify_token_timestamp"});const p4=10*60*1e3;class Sh{static makeRequest(n){return G(this,arguments,function*(e,r={}){try{const i=yield Cc.getValidToken(),a=e.startsWith("http")?e:"".concat(Ma.API_BASE_URL).concat(e),o=yield fetch(a,M(C({},r),{headers:C({Authorization:"Bearer ".concat(i),"Content-Type":"application/json"},r.headers)}));if(!o.ok){if(o.status===429){const s=o.headers.get("retry-after");throw new Error("RATE_LIMITED:".concat(s))}throw o.status===401?new Error("UNAUTHORIZED"):new Error("API_ERROR:".concat(o.status))}return o.status===204||o.headers.get("content-length")==="0"?null:yield o.json()}catch(i){throw console.error("Spotify API Error:",i),i}})}static getUserProfile(){return G(this,null,function*(){return this.makeRequest(_b.ME)})}static getTopArtists(e,r=20){return G(this,null,function*(){const n="top_artists-".concat(e,"-").concat(r);if(this.cache.has(n)){const a=this.cache.get(n);if(Date.now()-a.timestamp<p4)return a.data}if(this.pendingRequests.has(n))return this.pendingRequests.get(n);const i=G(this,null,function*(){try{const a=new URLSearchParams({time_range:e,limit:r.toString()}),o=yield this.makeRequest("".concat(_b.TOP_ARTISTS,"?").concat(a));return this.cache.set(n,{data:o,timestamp:Date.now()}),o}finally{this.pendingRequests.delete(n)}});return this.pendingRequests.set(n,i),i})}static getTopTracks(e,r=20){return G(this,null,function*(){const n="top_tracks-".concat(e,"-").concat(r);if(this.cache.has(n)){const a=this.cache.get(n);if(Date.now()-a.timestamp<p4)return a.data}if(this.pendingRequests.has(n))return this.pendingRequests.get(n);const i=G(this,null,function*(){try{const a=new URLSearchParams({time_range:e,limit:r.toString()}),o=yield this.makeRequest("".concat(_b.TOP_TRACKS,"?").concat(a));return this.cache.set(n,{data:o,timestamp:Date.now()}),o}finally{this.pendingRequests.delete(n)}});return this.pendingRequests.set(n,i),i})}}Rt(Sh,"cache",new Map),Rt(Sh,"pendingRequests",new Map);class xA{static initiateLogin(){return G(this,null,function*(){const e=m4(64),r=yield fBe(e),n=m4(16);localStorage.setItem("spotify_code_verifier",e),localStorage.setItem("spotify_auth_state",n);const i=new URLSearchParams({response_type:"code",client_id:Ma.CLIENT_ID,scope:Ma.SCOPES,code_challenge_method:"S256",code_challenge:r,redirect_uri:Ma.REDIRECT_URI,state:n}),a="".concat(Ma.AUTH_URL,"?").concat(i);console.log(" Redirecting to:",a),window.location.href=a})}static handleCallback(e,r){return G(this,null,function*(){if(this.isAuthenticated())return{access_token:Cc.getToken(),refresh_token:"",expires_in:3600,token_type:"Bearer"};if(this.exchangePromise)return this.exchangePromise;const n=localStorage.getItem("spotify_auth_state");if(r!==n)throw new Error("State mismatch - potential CSRF attack");const i=localStorage.getItem("spotify_code_verifier");if(!i)throw new Error("No code verifier found");return this.exchangePromise=G(this,null,function*(){try{const a=new URLSearchParams({client_id:Ma.CLIENT_ID,grant_type:"authorization_code",code:e,redirect_uri:Ma.REDIRECT_URI,code_verifier:i}),o=yield fetch(Ma.TOKEN_URL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:a});if(!o.ok){let l="";try{const u=yield o.json();console.error(" Spotify token error:",u),l=": ".concat(u.error," - ").concat(u.error_description)}catch(u){const d=yield o.text();console.error(" Response error text:",d),l=": ".concat(d)}throw new Error("Failed to exchange code for token (".concat(o.status,")").concat(l))}const s=yield o.json();return Cc.setTokens(s.access_token,s.refresh_token,s.expires_in),localStorage.removeItem("spotify_code_verifier"),localStorage.removeItem("spotify_auth_state"),s}finally{this.exchangePromise=null}}),this.exchangePromise})}static logout(){Cc.clearTokens(),this.exchangePromise=null}static isAuthenticated(){return!!(Cc.getToken()&&!Cc.isTokenExpired())}}Rt(xA,"exchangePromise",null);function m4(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return crypto.getRandomValues(new Uint8Array(t)).reduce((n,i)=>n+e[i%e.length],"")}function fBe(t){return G(this,null,function*(){const r=new TextEncoder().encode(t),n=yield window.crypto.subtle.digest("SHA-256",r);return btoa(String.fromCharCode(...new Uint8Array(n))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")})}function hBe({isOpen:t,onClose:e,onLogin:r,error:n}){const i=x.useCallback(()=>{wg("/shopping")},[]);return c.jsx(Yt,{open:t,onOpenChange:i,children:c.jsxs(Ht,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-black dark:text-white",children:[c.jsx(Zt,{children:c.jsxs(Qt,{className:"flex items-center gap-2 text-black dark:text-white",children:[c.jsx(zS,{className:"w-6 h-6 text-burnt-newStyle"})," ","Connetti Spotify"]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Connetti il tuo account Spotify per visualizzare le tue statistiche musicali personalizzate."}),n&&c.jsx("div",{className:"bg-red-100 dark:bg-red-900/50 border border-red-400 dark:border-red-500 rounded-lg p-3",children:c.jsx("p",{className:"text-red-700 dark:text-red-200 text-sm",children:n})}),c.jsx("div",{className:"flex gap-3",children:c.jsxs(Q,{onClick:r,className:"flex-1 bg-burnt-newStyle text-white",children:[c.jsx(Xk,{className:"w-4 h-4 mr-2"}),"Connetti con Spotify"]})}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Accesso sicuro tramite OAuth. Non memorizziamo le tue credenziali."})]})]})})}const pBe=()=>{const[t,e]=x.useState(!1);return x.useEffect(()=>{const r=()=>{e(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),t},g4={short_term:"4 settimane",medium_term:"6 mesi",long_term:"1 anno"};function mBe({currentTimeRange:t,onTimeRangeChange:e}){const r=pBe();return c.jsx("div",{children:c.jsx(Ie,{children:r?c.jsxs(Nt,{onValueChange:n=>e(n),value:t,children:[c.jsxs(St,{className:"w-[140px]",children:[" ",c.jsx(jt,{placeholder:"Seleziona un periodo"})]}),c.jsx(_t,{children:Object.entries(g4).map(([n,i])=>c.jsx(ye,{value:n,children:i},n))})]}):c.jsx("div",{className:"flex items-center gap-2",children:Object.entries(g4).map(([n,i])=>c.jsx(Q,{size:"sm",variant:t===n?"default":"ghost",onClick:()=>e(n),className:ie(t===n?"bg-burnt-newStyle text-white":"text-slate-400 hover:text-white hover:bg-slate-700"),children:i},n))})})})}function gBe({userName:t,currentTimeRangeLabel:e,currentTimeRange:r,onTimeRangeChange:n}){return c.jsx("div",{className:"",children:c.jsx("div",{className:"container mx-auto px-6 py-4",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex flex-col items-start",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(zS,{className:"h-8 w-8 text-cambridge-newStyle"}),c.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"SpotyStat"})]}),t&&c.jsxs("h5",{className:"text-burnt-newStyle text-sm mt-1 ml-11",children:[" ",t]})]}),c.jsxs("div",{className:"flex items-center gap-3 mt-2 sm:mt-0",children:[" ",c.jsx(mBe,{currentTimeRange:r,onTimeRangeChange:n})]})]})})})}function vBe({message:t,onRetry:e}){return c.jsx("div",{className:"container mx-auto px-6 py-6",children:c.jsxs(Ie,{className:"bg-red-900/50 border-red-500 p-4",children:[c.jsx("p",{className:"text-red-200",children:t}),c.jsx(Q,{onClick:e,className:"mt-3 bg-green-600 hover:bg-green-700",children:"Riprova"})]})})}function yBe({albums:t}){return c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.slice(0,100).map((e,r)=>{var n;return c.jsx(Ie,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-md dark:shadow-lg rounded-lg overflow-hidden\r\n                     hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-burnt-newStyle text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:r+1}),c.jsx("img",{src:((n=e.album.images[0])==null?void 0:n.url)||"/placeholder-album.png",alt:e.album.name,className:"w-16 h-16 rounded-lg object-cover"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-black dark:text-white text-sm truncate mb-1",children:e.album.name}),c.jsx("p",{className:"text-slate-400 dark:text-gray-300 text-xs truncate",children:e.album.artists.map(i=>i.name).join(", ")}),c.jsx("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-500 dark:text-gray-400",children:c.jsxs("span",{children:[" ",e.count," brani"]})})]})]})})},e.album.id)})})}function xBe({artists:t}){return c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.slice(0,100).map((e,r)=>{var o,s,l,u,d,f;const n=((s=(o=e.images)==null?void 0:o[0])==null?void 0:s.url)||"/placeholder-artist.png",i=((l=e.genres)==null?void 0:l.slice(0,2).join(", "))||"Genere non specificato",a=(f=(d=(u=e.followers)==null?void 0:u.total)==null?void 0:d.toLocaleString())!=null?f:"N/D";return c.jsx(Ie,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-md dark:shadow-lg rounded-lg overflow-hidden\r\n                       hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-burnt-newStyle text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center z-10",children:r+1}),c.jsx("img",{src:n,alt:e.name,className:"w-16 h-16 rounded-full object-cover border-2 dark:border-gray-600"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-black dark:text-white text-sm truncate mb-1",children:e.name}),c.jsx("p",{className:"text-slate-400 dark:text-gray-300 text-xs truncate",children:i}),c.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-slate-500 dark:text-gray-400",children:[c.jsx(Lr,{className:"w-3 h-3"}),c.jsx("span",{children:a})]})]})]})})},e.id)})})}function bBe({genres:t}){return c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.slice(0,100).map((e,r)=>c.jsx(Ie,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-md dark:shadow-lg rounded-lg overflow-hidden\r\n                     hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"relative",children:c.jsx("span",{className:"bg-burnt-newStyle text-white text-xs font-bold rounded-full w-8 h-8 flex items-center justify-center",children:r+1})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-black dark:text-white text-sm capitalize mb-1",children:e.genre}),c.jsxs("p",{className:"text-slate-400 dark:text-gray-300 text-xs",children:[e.count," artisti"]})]})]})})},e.genre))})}function wBe({tracks:t}){return c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.slice(0,100).map((e,r)=>{var n;return c.jsx(Ie,{className:"bg-white dark:bg-gray-800 shadow-md dark:shadow-lg rounded-lg overflow-hidden",children:c.jsx("div",{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute -top-2 -left-2 bg-burnt-newStyle text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:r+1}),c.jsx("img",{src:((n=e.album.images[0])==null?void 0:n.url)||"/placeholder-album.png",alt:e.name,className:"w-16 h-16 rounded-lg object-cover"})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-black dark:text-white text-sm truncate mb-1",children:e.name}),c.jsx("p",{className:"text-slate-400 dark:text-gray-300 text-xs truncate",children:e.artists.map(i=>i.name).join(", ")}),c.jsx("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-500 dark:text-gray-400",children:c.jsxs("span",{children:[" Popolarit ",e.popularity,"%"]})})]})]})})},e.id)})})}const ABe={tracks:{label:"Brani",icon:c.jsx(Xk,{className:"w-4 h-4"})},artists:{label:"Artisti",icon:c.jsx(Lr,{className:"w-4 h-4"})},albums:{label:"Album",icon:c.jsx(HW,{className:"w-4 h-4"})},genres:{label:"Generi",icon:c.jsx(Va,{className:"w-4 h-4"})}};function SBe({activeTab:t,onTabChange:e,data:r}){return c.jsxs(Z2,{value:t,onValueChange:n=>e(n),children:[c.jsx("div",{className:"flex justify-center sm:justify-start mb-6",children:c.jsx(PC,{children:Object.entries(ABe).map(([n,{label:i,icon:a}])=>c.jsx(Av,{value:n,className:ie("data-[state=active]:bg-burnt-newStyle text-white data-[state=active]:text-white","text-slate-400 hover:text-white transition-colors"),children:c.jsxs("span",{className:"flex items-center gap-2",children:[a,i]})},n))})}),c.jsx(Mc,{value:"tracks",children:c.jsx(wBe,{tracks:r.topTracks})}),c.jsx(Mc,{value:"artists",children:c.jsx(xBe,{artists:r.topArtists})}),c.jsx(Mc,{value:"albums",children:c.jsx(yBe,{albums:r.albumStats})}),c.jsx(Mc,{value:"genres",children:c.jsx(bBe,{genres:r.genreStats})})]})}function v4({message:t="Caricamento statistiche..."}){return c.jsxs("div",{className:"container mx-auto px-6 py-12 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto mb-4"}),c.jsx("p",{className:"text-white",children:t})]})}const _Be={short_term:"4 settimane",medium_term:"6 mesi",long_term:"1 anno"};function CBe(t){const e={};return t.forEach(r=>{r&&r.genres&&Array.isArray(r.genres)&&r.genres.forEach(n=>{e[n]=(e[n]||0)+1})}),Object.entries(e).sort(([,r],[,n])=>n-r).slice(0,20).map(([r,n])=>({genre:r,count:n}))}function EBe(t){const e={};return t&&Array.isArray(t)&&t.forEach(r=>{if(r&&r.album&&r.album.id){const n=r.album.id;e[n]||(e[n]={album:r.album,count:0,tracks:[]}),e[n].count++,e[n].tracks.push(r)}}),Object.values(e).sort((r,n)=>n.count-r.count).slice(0,20)}function NBe(){const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[i,a]=x.useState(!0),[o,s]=x.useState(null),[l,u]=x.useState({user:null,topTracks:[],topArtists:[],recentTracks:[],genreStats:[],albumStats:[]}),[d,f]=x.useState(dBe.MEDIUM_TERM),[h,p]=x.useState("tracks"),m=x.useRef(!1),g=x.useCallback(w=>G(this,null,function*(){a(!0),s(null);try{const[S,A]=yield Promise.all([Sh.getTopTracks(w,50),Sh.getTopArtists(w,50)]);u(_=>M(C({},_),{topTracks:S.items,topArtists:A.items,genreStats:CBe(A.items),albumStats:EBe(S.items)}))}catch(S){console.error("Data loading failed:",S),s(S instanceof Error?S.message:"Errore nel caricamento dei dati"),S instanceof Error&&S.message==="UNAUTHORIZED"&&(Io.logout(),e(!1),n(!0))}finally{a(!1)}}),[]);x.useEffect(()=>{G(this,null,function*(){if(!m.current){m.current=!0,a(!0);try{const S=new URLSearchParams(window.location.search).get("code"),A=new URLSearchParams(window.location.search).get("state");if(S&&A&&(yield xA.handleCallback(S,A),window.history.replaceState({},document.title,window.location.pathname)),Io.isAuthenticated()){e(!0);const _=yield Sh.getUserProfile();u(E=>M(C({},E),{user:_})),yield g(d)}else e(!1),n(!0),a(!1)}catch(S){console.error("Initialization failed",S),S instanceof Error?S.message!=="No refresh token available"&&s("Autenticazione fallita."):s("Autenticazione fallita."),e(!1),n(!0),a(!1)}}})},[g,d]);const v=x.useCallback(()=>G(this,null,function*(){try{s(null),yield xA.initiateLogin()}catch(w){s(w instanceof Error?w.message:"Errore durante il login")}}),[]),y=x.useCallback(()=>{Io.logout(),window.location.reload()},[]),b=x.useCallback(w=>{f(w),g(w)},[g]);return i&&!l.user?c.jsx(v4,{message:"Connessione a Spotify in corso..."}):c.jsxs(gf,{isVisible:i,title:"Caricamento SpotyStat",subtitle:"Recupero dei brani...",children:[c.jsx(hBe,{isOpen:r&&!t,onClose:()=>n(!1),onLogin:v,error:o}),t&&l.user&&c.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[c.jsx(gBe,{userName:l.user.display_name,currentTimeRange:d,onTimeRangeChange:b,onLogout:y,currentTimeRangeLabel:_Be[d]}),c.jsx("main",{className:"container mx-auto px-6 py-6",children:i?c.jsx(v4,{}):o?c.jsx(vBe,{message:o,onRetry:()=>g(d)}):c.jsx(SBe,{activeTab:h,onTabChange:p,data:l})})]})]})}function jBe(){const{user:t}=Bt(),r=Li()?fce:tce;return c.jsx(r,{children:c.jsxs(ck,{children:[c.jsx(li,{path:"/shopping",component:ADe}),c.jsx(li,{path:"/notes",component:ODe}),c.jsx(li,{path:"/calendar",component:Yke}),c.jsx(li,{path:"/shoppingfood",children:()=>c.jsx(uMe,{})}),c.jsx(li,{path:"/testpage",component:uBe}),c.jsx(li,{path:"/notification",children:()=>c.jsx(dMe,{})}),c.jsx(li,{path:"/notificationcenter",children:()=>c.jsx(dg,{})}),c.jsx(li,{path:"/digitalwallet",children:()=>c.jsx(lBe,{})}),c.jsx(li,{path:"/spotystat",children:()=>c.jsx(NBe,{})}),(t==null?void 0:t.role)==="admin"&&c.jsx(li,{path:"/admin/users",component:_z}),(t==null?void 0:t.role)==="admin"&&c.jsx(li,{path:"/admin/panel",component:rMe}),c.jsx(li,{path:"/",children:c.jsx(mU,{to:"/shopping"})})]})})}function TBe(){var h;const{user:t}=Bt(),{theme:e,toggleTheme:r}=hS(),{preferences:n,updatePreference:i,resetPreferences:a,isLoading:o}=FB(),[,s]=x.useState(!1),{toast:l}=Nr(),u=(p,m)=>{i(p,m),s(!1),l({title:"Aggiornamento",description:'Preferenza "'.concat(p,'" aggiornata')})},d=()=>{confirm("Sei sicuro di voler resettare tutte le preferenze ai valori default?")&&(a(),s(!1),l({title:"Reset",description:"Preferenze resettate ai valori default"}))},f=()=>{const p=JSON.stringify(n,null,2),m=new Blob([p],{type:"application/json"}),g=URL.createObjectURL(m),v=document.createElement("a");v.href=g,v.download="familytask-preferences-".concat(t==null?void 0:t.username,"-").concat(new Date().toISOString().split("T")[0],".json"),v.click(),URL.revokeObjectURL(g),l({title:"Esportazione",description:"Preferenze esportate"})};return o?c.jsx("div",{className:"flex items-center justify-center min-h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cambridge-newStyle mx-auto mb-4"}),c.jsx("p",{className:"text-delft-blue dark:text-eggshell",children:"Caricamento impostazioni..."})]})}):c.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl font-bold text-delft-blue dark:text-eggshell flex items-center gap-3",children:[c.jsx(Lu,{className:"h-8 w-8"}),"Impostazioni Utente"]}),c.jsx("p",{className:"text-delft-blue/70 dark:text-eggshell/70 mt-1",children:"Personalizza la tua esperienza FamilyTaskTracker"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(ne,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[c.jsx(ji,{className:"h-3 w-3 mr-1"}),t==null?void 0:t.username," (",t==null?void 0:t.role,")"]}),c.jsxs(ne,{variant:"secondary",className:"bg-green-100 text-green-700",children:[c.jsx(tu,{className:"h-3 w-3 mr-1"}),"Salvate in Sessione"]})]})]}),c.jsxs(Ie,{children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2",children:[c.jsx(D0,{className:"h-5 w-5"}),"Preferenze di Visualizzazione"]})}),c.jsxs(Ve,{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Modalit Vista Shopping List"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-eggshell/50 dark:bg-delft-blue/20",children:[c.jsx(JW,{className:"h-4 w-4 ".concat(n.viewMode==="compact"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx(Kr,{checked:n.viewMode==="images",onCheckedChange:p=>u("viewMode",p?"images":"compact"),className:"data-[state=checked]:bg-cambridge-newStyle"}),c.jsx(D0,{className:"h-4 w-4 ".concat(n.viewMode==="images"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx("span",{className:"font-medium",children:n.viewMode==="images"?"Vista Immagini":"Vista Compatta"})]}),c.jsx(ne,{variant:"outline",className:"bg-yellow-100 text-yellow-700",children:" Salvato automaticamente"})]}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"La modalit vista determina come vengono mostrati gli articoli nella shopping list."})]}),c.jsx(Ip,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Articoli per Pagina"}),c.jsxs(Nt,{value:n.itemsPerPage.toString(),onValueChange:p=>u("itemsPerPage",parseInt(p)),children:[c.jsx(St,{className:"w-48",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"10",children:"10 articoli"}),c.jsx(ye,{value:"20",children:"20 articoli"}),c.jsx(ye,{value:"30",children:"30 articoli"}),c.jsx(ye,{value:"50",children:"50 articoli"}),c.jsx(ye,{value:"100",children:"100 articoli"})]})]})]}),c.jsx(Ip,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Tema Applicazione"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-eggshell/50 dark:bg-delft-blue/20",children:[c.jsx(L0,{className:"h-4 w-4 ".concat(e==="light"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx(Kr,{checked:e==="dark",onCheckedChange:r,className:"data-[state=checked]:bg-cambridge-newStyle"}),c.jsx(k0,{className:"h-4 w-4 ".concat(e==="dark"?"text-cambridge-newStyle":"text-gray-400")}),c.jsx("span",{className:"font-medium",children:e==="light"?"Tema Chiaro":"Tema Scuro"})]}),c.jsxs(ne,{variant:"outline",className:"bg-blue-100 text-blue-700",children:[c.jsx(Kk,{className:"h-3 w-3 mr-1"}),"Sincronizzato con sistema"]})]})]})]})]}),c.jsxs(Ie,{children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2",children:[c.jsx(jh,{className:"h-5 w-5"}),"Filtri Predefiniti"]})}),c.jsxs(Ve,{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Categoria Predefinita"}),c.jsxs(Nt,{value:n.defaultCategory,onValueChange:p=>u("defaultCategory",p),children:[c.jsx(St,{className:"w-64",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutte le Categorie"}),c.jsx(ye,{value:"Alimentari",children:" Alimentari"}),c.jsx(ye,{value:"Casa",children:" Casa"}),c.jsx(ye,{value:"Elettronica",children:" Elettronica"}),c.jsx(ye,{value:"Abbigliamento",children:" Abbigliamento"}),c.jsx(ye,{value:"Salute",children:" Salute"})]})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Priorit Predefinita"}),c.jsxs(Nt,{value:n.defaultPriority,onValueChange:p=>u("defaultPriority",p),children:[c.jsx(St,{className:"w-64",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"all",children:"Tutte le Priorit"}),c.jsx(ye,{value:"high",children:" Alta"}),c.jsx(ye,{value:"medium",children:" Media"}),c.jsx(ye,{value:"low",children:" Bassa"})]})]})]}),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(Wt,{className:"text-base font-medium",children:"Mostra Articoli Completati"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Include gli articoli gi completati nella vista predefinita"})]}),c.jsx(Kr,{checked:n.showCompleted,onCheckedChange:p=>u("showCompleted",p),className:"data-[state=checked]:bg-cambridge-newStyle"})]})})]})]}),c.jsxs(Ie,{children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2",children:[c.jsx(In,{className:"h-5 w-5"}),"Impostazioni Notifiche"]})}),c.jsxs(Ve,{className:"space-y-6",children:[c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(Wt,{className:"text-base font-medium",children:"Abilita Notifiche"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Ricevi notifiche per aggiornamenti e promemoria"})]}),c.jsx(Kr,{checked:n.enableNotifications,onCheckedChange:p=>u("enableNotifications",p),className:"data-[state=checked]:bg-cambridge-newStyle"})]})}),c.jsx("div",{className:"space-y-3",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(Wt,{className:"text-base font-medium",children:"Notifiche Email"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Ricevi un riepilogo giornaliero via email"})]}),c.jsx(Kr,{checked:n.emailNotifications,onCheckedChange:p=>u("emailNotifications",p),className:"data-[state=checked]:bg-cambridge-newStyle",disabled:!n.enableNotifications})]})})]})]}),c.jsxs(Ie,{children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2",children:[c.jsx(Br,{className:"h-5 w-5"}),"Impostazioni Regionali"]})}),c.jsx(Ve,{className:"space-y-6",children:c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Lingua"}),c.jsxs(Nt,{value:n.language,onValueChange:p=>u("language",p),children:[c.jsx(St,{className:"w-48",children:c.jsx(jt,{})}),c.jsxs(_t,{children:[c.jsx(ye,{value:"it",children:" Italiano"}),c.jsx(ye,{value:"en",children:" English"})]})]})]})})]}),c.jsxs(Ie,{children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2",children:[c.jsx(tu,{className:"h-5 w-5"}),"Gestione Dati e Backup"]})}),c.jsxs(Ve,{className:"space-y-6",children:[c.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(tu,{className:"h-5 w-5 text-blue-600 mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Le tue preferenze sono salvate in SessionStorage"}),c.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"I dati vengono conservati per tutta la durata della sessione browser. Chiudendo il browser, le preferenze verranno perse."}),c.jsxs("div",{className:"mt-3 text-xs text-blue-600 dark:text-blue-400",children:[c.jsx("strong",{children:"Chiave storage:"})," familyTaskTracker_preferences_",t==null?void 0:t.username]})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Esporta Preferenze"}),c.jsxs(Q,{onClick:f,variant:"outline",className:"w-full",children:[c.jsx($0,{className:"mr-2 h-4 w-4"}),"Scarica Backup JSON"]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Salva le tue preferenze come file JSON"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Wt,{className:"text-base font-medium",children:"Spazio Utilizzato"}),c.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:c.jsxs("div",{className:"text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Preferenze:"}),c.jsxs("span",{className:"font-mono",children:[new Blob([JSON.stringify(n)]).size," bytes"]})]}),c.jsxs("div",{className:"flex justify-between text-gray-500",children:[c.jsx("span",{children:"Tema:"}),c.jsxs("span",{className:"font-mono",children:[((h=sessionStorage.getItem("theme"))==null?void 0:h.length)||0," bytes"]})]})]})})]})]})]})]}),c.jsxs(Ie,{className:"border-orange-200 dark:border-orange-800",children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2 text-orange-700 dark:text-orange-300",children:[c.jsx(R0,{className:"h-5 w-5"}),"Azioni Avanzate"]})}),c.jsxs(Ve,{className:"space-y-6",children:[c.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Reset Completo Preferenze"}),c.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:"Ripristina tutte le impostazioni ai valori predefiniti. Questa azione non pu essere annullata."})]}),c.jsxs(Q,{onClick:d,variant:"destructive",size:"sm",className:"ml-4",children:[c.jsx(R0,{className:"mr-2 h-4 w-4"}),"Reset Tutto"]})]})}),c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100",children:"Cancella Tutti i Dati di Sessione"}),c.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Rimuove completamente tutti i dati salvati in SessionStorage, incluse preferenze e tema. Richiede ricaricamento pagina."})]}),c.jsxs(Q,{onClick:()=>{confirm("Sei sicuro? Tutti i dati di sessione verranno persi e la pagina verr ricaricata.")&&(sessionStorage.clear(),window.location.reload())},variant:"destructive",size:"sm",className:"ml-4",children:[c.jsx(tu,{className:"mr-2 h-4 w-4"}),"Cancella Tutto"]})]})})]})]}),c.jsxs(Ie,{className:"border-green-200 dark:border-green-800",children:[c.jsx($r,{children:c.jsxs(Qn,{className:"flex items-center gap-2 text-green-700 dark:text-green-300",children:[c.jsx(jh,{className:"h-5 w-5"}),"Riepilogo Configurazione Attuale"]})}),c.jsx(Ve,{children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-delft-blue dark:text-eggshell",children:"Visualizzazione"}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Vista:"}),c.jsx(ne,{variant:"outline",className:n.viewMode==="images"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700",children:n.viewMode==="images"?" Immagini":" Compatta"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Items/Pagina:"}),c.jsx("span",{className:"font-mono",children:n.itemsPerPage})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Tema:"}),c.jsx(ne,{variant:"outline",className:e==="dark"?"bg-gray-800 text-gray-100":"bg-yellow-100 text-yellow-700",children:e==="dark"?" Scuro":" Chiaro"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-delft-blue dark:text-eggshell",children:"Filtri Default"}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Categoria:"}),c.jsx("span",{className:"font-mono text-xs",children:n.defaultCategory})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Priorit:"}),c.jsx("span",{className:"font-mono text-xs",children:n.defaultPriority})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Archiviati:"}),c.jsx(ne,{variant:"outline",className:n.showCompleted?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:n.showCompleted?" S":" No"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-medium text-delft-blue dark:text-eggshell",children:"Notifiche"}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Abilitate:"}),c.jsx(ne,{variant:"outline",className:n.enableNotifications?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:n.enableNotifications?" S":" No"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Email:"}),c.jsx(ne,{variant:"outline",className:n.emailNotifications?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",children:n.emailNotifications?" S":" No"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Lingua:"}),c.jsx("span",{className:"font-mono text-xs",children:n.language==="it"?" IT":" EN"})]})]})]})]})})]}),c.jsxs(Ie,{className:"border-purple-200 dark:border-purple-800",children:[c.jsx($r,{children:c.jsx(Qn,{className:"flex items-center gap-2 text-purple-700 dark:text-purple-300",children:" Tips e Suggerimenti"})}),c.jsx(Ve,{children:c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-blue-500",children:""}),c.jsxs("div",{children:[c.jsx("strong",{children:"Vista Immagini vs Compatta:"})," La vista immagini  ideale per prodotti con foto, mentre la vista compatta permette di vedere pi articoli contemporaneamente."]})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-green-500",children:""}),c.jsxs("div",{children:[c.jsx("strong",{children:"Salvataggio Automatico:"})," Tutte le modifiche alle preferenze vengono salvate automaticamente in SessionStorage senza bisogno di conferma."]})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-orange-500",children:""}),c.jsxs("div",{children:[c.jsx("strong",{children:"Sincronizzazione Multi-Device:"})," Per ora le preferenze sono salvate localmente. In futuro potrebbero essere sincronizzate con il cloud."]})]}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-purple-500",children:""}),c.jsxs("div",{children:[c.jsx("strong",{children:"Performance:"})," La vista compatta carica pi velocemente quando hai molti articoli, mentre la vista immagini offre un'esperienza pi ricca."]})]})]})})]}),c.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400 py-4",children:c.jsxs("p",{children:["FamilyTaskTracker v","1.0.0","  Preferenze User: ",t==null?void 0:t.username,"  Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")]})})]})}function PBe(){const[t,e]=x.useState(()=>window.location.hash.slice(1)||"/");x.useEffect(()=>{const n=()=>{const i=window.location.hash.slice(1)||"/";e(i)};return window.addEventListener("hashchange",n),()=>window.removeEventListener("hashchange",n)},[]);const r=x.useCallback(n=>{try{window.location.hash=n}catch(i){console.error("Navigation error:",i)}},[]);return[t,r]}function OBe(){const{user:t,isLoading:e}=Bt();return $.useEffect(()=>{const r=new URLSearchParams(window.location.search),n=r.get("code"),i=r.get("state"),a=r.get("error");a&&(localStorage.setItem("spotyerror",a),wg("/spotystat")),n&&i&&(localStorage.setItem("spotycode",n),localStorage.setItem("spotystate",i),wg("/spotystat"))},[]),e?c.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),c.jsx("span",{className:"ml-3 text-foreground font-medium",children:"Loading..."})]}):t?c.jsx(c.Fragment,{children:c.jsxs(ck,{children:[c.jsx(li,{path:"/settings",children:c.jsx("div",{className:"min-h-screen bg-background",children:c.jsx("div",{className:"container mx-auto p-6",children:c.jsx(TBe,{})})})}),c.jsx(li,{children:c.jsx(jBe,{})})]})}):c.jsx(ZZ,{})}function IBe(){return c.jsx(QZ,{children:c.jsx(BU,{client:UU,children:c.jsx(YA,{children:c.jsx(SX,{children:c.jsx(xDe,{children:c.jsxs(ok,{hook:PBe,children:[c.jsx(OBe,{}),c.jsx(ZH,{}),c.jsx(Jre,{})]})})})})})})}q4(document.getElementById("root")).render(c.jsx(IBe,{}))});export default DBe();
