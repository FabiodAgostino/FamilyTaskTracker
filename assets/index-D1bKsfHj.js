var w4=Object.defineProperty;var yE=t=>{throw TypeError(t)};var x4=(t,e,n)=>e in t?w4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Hc=(t,e,n)=>x4(t,typeof e!="symbol"?e+"":e,n),Jg=(t,e,n)=>e.has(t)||yE("Cannot "+n);var B=(t,e,n)=>(Jg(t,e,"read from private field"),n?n.call(t):e.get(t)),Ze=(t,e,n)=>e.has(t)?yE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Fe=(t,e,n,r)=>(Jg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),dn=(t,e,n)=>(Jg(t,e,"access private method"),n);var Eh=(t,e,n,r)=>({set _(s){Fe(t,e,s,n)},get _(){return B(t,e,r)}});function _4(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fI={exports:{}},ap={},mI={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed=Symbol.for("react.element"),b4=Symbol.for("react.portal"),E4=Symbol.for("react.fragment"),T4=Symbol.for("react.strict_mode"),S4=Symbol.for("react.profiler"),C4=Symbol.for("react.provider"),I4=Symbol.for("react.context"),k4=Symbol.for("react.forward_ref"),N4=Symbol.for("react.suspense"),A4=Symbol.for("react.memo"),P4=Symbol.for("react.lazy"),wE=Symbol.iterator;function R4(t){return t===null||typeof t!="object"?null:(t=wE&&t[wE]||t["@@iterator"],typeof t=="function"?t:null)}var pI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gI=Object.assign,vI={};function dc(t,e,n){this.props=t,this.context=e,this.refs=vI,this.updater=n||pI}dc.prototype.isReactComponent={};dc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yI(){}yI.prototype=dc.prototype;function xx(t,e,n){this.props=t,this.context=e,this.refs=vI,this.updater=n||pI}var _x=xx.prototype=new yI;_x.constructor=xx;gI(_x,dc.prototype);_x.isPureReactComponent=!0;var xE=Array.isArray,wI=Object.prototype.hasOwnProperty,bx={current:null},xI={key:!0,ref:!0,__self:!0,__source:!0};function _I(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wI.call(e,r)&&!xI.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ed,type:t,key:i,ref:o,props:s,_owner:bx.current}}function D4(t,e){return{$$typeof:Ed,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ex(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ed}function j4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _E=/\/+/g;function ev(t,e){return typeof t=="object"&&t!==null&&t.key!=null?j4(""+t.key):e.toString(36)}function sf(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ed:case b4:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ev(o,0):r,xE(s)?(n="",t!=null&&(n=t.replace(_E,"$&/")+"/"),sf(s,e,n,"",function(u){return u})):s!=null&&(Ex(s)&&(s=D4(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(_E,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",xE(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+ev(i,a);o+=sf(i,e,n,c,s)}else if(c=R4(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+ev(i,a++),o+=sf(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Th(t,e,n){if(t==null)return t;var r=[],s=0;return sf(t,r,"","",function(i){return e.call(n,i,s++)}),r}function M4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},of={transition:null},O4={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:of,ReactCurrentOwner:bx};function bI(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Th,forEach:function(t,e,n){Th(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Th(t,function(){e++}),e},toArray:function(t){return Th(t,function(e){return e})||[]},only:function(t){if(!Ex(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=dc;He.Fragment=E4;He.Profiler=S4;He.PureComponent=xx;He.StrictMode=T4;He.Suspense=N4;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O4;He.act=bI;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gI({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=bx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)wI.call(e,c)&&!xI.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ed,type:t.type,key:s,ref:i,props:r,_owner:o}};He.createContext=function(t){return t={$$typeof:I4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:C4,_context:t},t.Consumer=t};He.createElement=_I;He.createFactory=function(t){var e=_I.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:k4,render:t}};He.isValidElement=Ex;He.lazy=function(t){return{$$typeof:P4,_payload:{_status:-1,_result:t},_init:M4}};He.memo=function(t,e){return{$$typeof:A4,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=of.transition;of.transition={};try{t()}finally{of.transition=e}};He.unstable_act=bI;He.useCallback=function(t,e){return Rn.current.useCallback(t,e)};He.useContext=function(t){return Rn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};He.useEffect=function(t,e){return Rn.current.useEffect(t,e)};He.useId=function(){return Rn.current.useId()};He.useImperativeHandle=function(t,e,n){return Rn.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return Rn.current.useMemo(t,e)};He.useReducer=function(t,e,n){return Rn.current.useReducer(t,e,n)};He.useRef=function(t){return Rn.current.useRef(t)};He.useState=function(t){return Rn.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return Rn.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return Rn.current.useTransition()};He.version="18.3.1";mI.exports=He;var p=mI.exports;const Le=hI(p),Tx=_4({__proto__:null,default:Le},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L4=p,V4=Symbol.for("react.element"),F4=Symbol.for("react.fragment"),U4=Object.prototype.hasOwnProperty,$4=L4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,z4={key:!0,ref:!0,__self:!0,__source:!0};function EI(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)U4.call(e,r)&&!z4.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:V4,type:t,key:i,ref:o,props:s,_owner:$4.current}}ap.Fragment=F4;ap.jsx=EI;ap.jsxs=EI;fI.exports=ap;var l=fI.exports,TI={exports:{}},vr={},SI={exports:{}},CI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var X=O.length;O.push(F);e:for(;0<X;){var fe=X-1>>>1,G=O[fe];if(0<s(G,F))O[fe]=F,O[X]=G,X=fe;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],X=O.pop();if(X!==F){O[0]=X;e:for(var fe=0,G=O.length,ue=G>>>1;fe<ue;){var ze=2*(fe+1)-1,tt=O[ze],Oe=ze+1,he=O[Oe];if(0>s(tt,X))Oe<G&&0>s(he,tt)?(O[fe]=he,O[Oe]=X,fe=Oe):(O[fe]=tt,O[ze]=X,fe=ze);else if(Oe<G&&0>s(he,X))O[fe]=he,O[Oe]=X,fe=Oe;else break e}}return F}function s(O,F){var X=O.sortIndex-F.sortIndex;return X!==0?X:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,f=null,m=3,v=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(O){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=O)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function N(O){if(w=!1,T(O),!b)if(n(c)!==null)b=!0,J(j);else{var F=n(u);F!==null&&H(N,F.startTime-O)}}function j(O,F){b=!1,w&&(w=!1,_(k),k=-1),v=!0;var X=m;try{for(T(F),f=n(c);f!==null&&(!(f.expirationTime>F)||O&&!S());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,m=f.priorityLevel;var G=fe(f.expirationTime<=F);F=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(c)&&r(c),T(F)}else r(c);f=n(c)}if(f!==null)var ue=!0;else{var ze=n(u);ze!==null&&H(N,ze.startTime-F),ue=!1}return ue}finally{f=null,m=X,v=!1}}var M=!1,C=null,k=-1,R=5,I=-1;function S(){return!(t.unstable_now()-I<R)}function P(){if(C!==null){var O=t.unstable_now();I=O;var F=!0;try{F=C(!0,O)}finally{F?A():(M=!1,C=null)}}else M=!1}var A;if(typeof y=="function")A=function(){y(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Q=W.port2;W.port1.onmessage=P,A=function(){Q.postMessage(null)}}else A=function(){x(P,0)};function J(O){C=O,M||(M=!0,A())}function H(O,F){k=x(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,J(j))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var X=m;m=F;try{return O()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=m;m=O;try{return F()}finally{m=X}},t.unstable_scheduleCallback=function(O,F,X){var fe=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?fe+X:fe):X=fe,O){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=X+G,O={id:h++,callback:F,priorityLevel:O,startTime:X,expirationTime:G,sortIndex:-1},X>fe?(O.sortIndex=X,e(u,O),n(c)===null&&O===n(u)&&(w?(_(k),k=-1):w=!0,H(N,X-fe))):(O.sortIndex=G,e(c,O),b||v||(b=!0,J(j))),O},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(O){var F=m;return function(){var X=m;m=F;try{return O.apply(this,arguments)}finally{m=X}}}})(CI);SI.exports=CI;var B4=SI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W4=p,hr=B4;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var II=new Set,Ou={};function Ta(t,e){Ll(t,e),Ll(t+"Capture",e)}function Ll(t,e){for(Ou[t]=e,t=0;t<e.length;t++)II.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),my=Object.prototype.hasOwnProperty,H4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bE={},EE={};function q4(t){return my.call(EE,t)?!0:my.call(bE,t)?!1:H4.test(t)?EE[t]=!0:(bE[t]=!0,!1)}function G4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K4(t,e,n,r){if(e===null||typeof e>"u"||G4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sx=/[\-:]([a-z])/g;function Cx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sx,Cx);on[e]=new Dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sx,Cx);on[e]=new Dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sx,Cx);on[e]=new Dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Dn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ix(t,e,n,r){var s=on.hasOwnProperty(e)?on[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(K4(e,n,s,r)&&(n=null),r||s===null?q4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fi=W4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sh=Symbol.for("react.element"),Ja=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),kx=Symbol.for("react.strict_mode"),py=Symbol.for("react.profiler"),kI=Symbol.for("react.provider"),NI=Symbol.for("react.context"),Nx=Symbol.for("react.forward_ref"),gy=Symbol.for("react.suspense"),vy=Symbol.for("react.suspense_list"),Ax=Symbol.for("react.memo"),Ci=Symbol.for("react.lazy"),AI=Symbol.for("react.offscreen"),TE=Symbol.iterator;function qc(t){return t===null||typeof t!="object"?null:(t=TE&&t[TE]||t["@@iterator"],typeof t=="function"?t:null)}var Et=Object.assign,tv;function su(t){if(tv===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tv=e&&e[1]||""}return`
`+tv+t}var nv=!1;function rv(t,e){if(!t||nv)return"";nv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{nv=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?su(t):""}function Y4(t){switch(t.tag){case 5:return su(t.type);case 16:return su("Lazy");case 13:return su("Suspense");case 19:return su("SuspenseList");case 0:case 2:case 15:return t=rv(t.type,!1),t;case 11:return t=rv(t.type.render,!1),t;case 1:return t=rv(t.type,!0),t;default:return""}}function yy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case el:return"Fragment";case Ja:return"Portal";case py:return"Profiler";case kx:return"StrictMode";case gy:return"Suspense";case vy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NI:return(t.displayName||"Context")+".Consumer";case kI:return(t._context.displayName||"Context")+".Provider";case Nx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ax:return e=t.displayName||null,e!==null?e:yy(t.type)||"Memo";case Ci:e=t._payload,t=t._init;try{return yy(t(e))}catch{}}return null}function Q4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yy(e);case 8:return e===kx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function so(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function PI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function X4(t){var e=PI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ch(t){t._valueTracker||(t._valueTracker=X4(t))}function RI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=PI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wy(t,e){var n=e.checked;return Et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function SE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=so(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DI(t,e){e=e.checked,e!=null&&Ix(t,"checked",e,!1)}function xy(t,e){DI(t,e);var n=so(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_y(t,e.type,n):e.hasOwnProperty("defaultValue")&&_y(t,e.type,so(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function CE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _y(t,e,n){(e!=="number"||Vf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var iu=Array.isArray;function fl(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+so(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function by(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function IE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(iu(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:so(n)}}function jI(t,e){var n=so(e.value),r=so(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ey(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ih,OI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ih=Ih||document.createElement("div"),Ih.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ih.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z4=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(t){Z4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gu[e]=gu[t]})});function LI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gu.hasOwnProperty(t)&&gu[t]?(""+e).trim():e+"px"}function VI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=LI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var J4=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ty(t,e){if(e){if(J4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Sy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cy=null;function Px(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Iy=null,ml=null,pl=null;function NE(t){if(t=Cd(t)){if(typeof Iy!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=hp(e),Iy(t.stateNode,t.type,e))}}function FI(t){ml?pl?pl.push(t):pl=[t]:ml=t}function UI(){if(ml){var t=ml,e=pl;if(pl=ml=null,NE(t),e)for(t=0;t<e.length;t++)NE(e[t])}}function $I(t,e){return t(e)}function zI(){}var sv=!1;function BI(t,e,n){if(sv)return t(e,n);sv=!0;try{return $I(t,e,n)}finally{sv=!1,(ml!==null||pl!==null)&&(zI(),UI())}}function Vu(t,e){var n=t.stateNode;if(n===null)return null;var r=hp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var ky=!1;if(ti)try{var Gc={};Object.defineProperty(Gc,"passive",{get:function(){ky=!0}}),window.addEventListener("test",Gc,Gc),window.removeEventListener("test",Gc,Gc)}catch{ky=!1}function eL(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var vu=!1,Ff=null,Uf=!1,Ny=null,tL={onError:function(t){vu=!0,Ff=t}};function nL(t,e,n,r,s,i,o,a,c){vu=!1,Ff=null,eL.apply(tL,arguments)}function rL(t,e,n,r,s,i,o,a,c){if(nL.apply(this,arguments),vu){if(vu){var u=Ff;vu=!1,Ff=null}else throw Error(Y(198));Uf||(Uf=!0,Ny=u)}}function Sa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function WI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function AE(t){if(Sa(t)!==t)throw Error(Y(188))}function sL(t){var e=t.alternate;if(!e){if(e=Sa(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return AE(s),t;if(i===r)return AE(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function HI(t){return t=sL(t),t!==null?qI(t):null}function qI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qI(t);if(e!==null)return e;t=t.sibling}return null}var GI=hr.unstable_scheduleCallback,PE=hr.unstable_cancelCallback,iL=hr.unstable_shouldYield,oL=hr.unstable_requestPaint,Pt=hr.unstable_now,aL=hr.unstable_getCurrentPriorityLevel,Rx=hr.unstable_ImmediatePriority,KI=hr.unstable_UserBlockingPriority,$f=hr.unstable_NormalPriority,lL=hr.unstable_LowPriority,YI=hr.unstable_IdlePriority,lp=null,vs=null;function cL(t){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(lp,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:hL,uL=Math.log,dL=Math.LN2;function hL(t){return t>>>=0,t===0?32:31-(uL(t)/dL|0)|0}var kh=64,Nh=4194304;function ou(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ou(a):(i&=o,i!==0&&(r=ou(i)))}else o=n&~s,o!==0?r=ou(o):i!==0&&(r=ou(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),s=1<<n,r|=t[n],e&=~s;return r}function fL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gr(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=fL(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Ay(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function QI(){var t=kh;return kh<<=1,!(kh&4194240)&&(kh=64),t}function iv(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Td(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function pL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Dx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ot=0;function XI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZI,jx,JI,ek,tk,Py=!1,Ah=[],Hi=null,qi=null,Gi=null,Fu=new Map,Uu=new Map,Ni=[],gL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function RE(t,e){switch(t){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":qi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Fu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(e.pointerId)}}function Kc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Cd(e),e!==null&&jx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vL(t,e,n,r,s){switch(e){case"focusin":return Hi=Kc(Hi,t,e,n,r,s),!0;case"dragenter":return qi=Kc(qi,t,e,n,r,s),!0;case"mouseover":return Gi=Kc(Gi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Fu.set(i,Kc(Fu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Uu.set(i,Kc(Uu.get(i)||null,t,e,n,r,s)),!0}return!1}function nk(t){var e=qo(t.target);if(e!==null){var n=Sa(e);if(n!==null){if(e=n.tag,e===13){if(e=WI(n),e!==null){t.blockedOn=e,tk(t.priority,function(){JI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function af(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ry(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Cy=r,n.target.dispatchEvent(r),Cy=null}else return e=Cd(n),e!==null&&jx(e),t.blockedOn=n,!1;e.shift()}return!0}function DE(t,e,n){af(t)&&n.delete(e)}function yL(){Py=!1,Hi!==null&&af(Hi)&&(Hi=null),qi!==null&&af(qi)&&(qi=null),Gi!==null&&af(Gi)&&(Gi=null),Fu.forEach(DE),Uu.forEach(DE)}function Yc(t,e){t.blockedOn===e&&(t.blockedOn=null,Py||(Py=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,yL)))}function $u(t){function e(s){return Yc(s,t)}if(0<Ah.length){Yc(Ah[0],t);for(var n=1;n<Ah.length;n++){var r=Ah[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hi!==null&&Yc(Hi,t),qi!==null&&Yc(qi,t),Gi!==null&&Yc(Gi,t),Fu.forEach(e),Uu.forEach(e),n=0;n<Ni.length;n++)r=Ni[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ni.length&&(n=Ni[0],n.blockedOn===null);)nk(n),n.blockedOn===null&&Ni.shift()}var gl=fi.ReactCurrentBatchConfig,Bf=!0;function wL(t,e,n,r){var s=ot,i=gl.transition;gl.transition=null;try{ot=1,Mx(t,e,n,r)}finally{ot=s,gl.transition=i}}function xL(t,e,n,r){var s=ot,i=gl.transition;gl.transition=null;try{ot=4,Mx(t,e,n,r)}finally{ot=s,gl.transition=i}}function Mx(t,e,n,r){if(Bf){var s=Ry(t,e,n,r);if(s===null)pv(t,e,r,Wf,n),RE(t,r);else if(vL(s,t,e,n,r))r.stopPropagation();else if(RE(t,r),e&4&&-1<gL.indexOf(t)){for(;s!==null;){var i=Cd(s);if(i!==null&&ZI(i),i=Ry(t,e,n,r),i===null&&pv(t,e,r,Wf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else pv(t,e,r,null,n)}}var Wf=null;function Ry(t,e,n,r){if(Wf=null,t=Px(r),t=qo(t),t!==null)if(e=Sa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=WI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wf=t,null}function rk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aL()){case Rx:return 1;case KI:return 4;case $f:case lL:return 16;case YI:return 536870912;default:return 16}default:return 16}}var $i=null,Ox=null,lf=null;function sk(){if(lf)return lf;var t,e=Ox,n=e.length,r,s="value"in $i?$i.value:$i.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return lf=s.slice(t,1<r?1-r:void 0)}function cf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ph(){return!0}function jE(){return!1}function yr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ph:jE,this.isPropagationStopped=jE,this}return Et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ph)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ph)},persist:function(){},isPersistent:Ph}),e}var hc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lx=yr(hc),Sd=Et({},hc,{view:0,detail:0}),_L=yr(Sd),ov,av,Qc,cp=Et({},Sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qc&&(Qc&&t.type==="mousemove"?(ov=t.screenX-Qc.screenX,av=t.screenY-Qc.screenY):av=ov=0,Qc=t),ov)},movementY:function(t){return"movementY"in t?t.movementY:av}}),ME=yr(cp),bL=Et({},cp,{dataTransfer:0}),EL=yr(bL),TL=Et({},Sd,{relatedTarget:0}),lv=yr(TL),SL=Et({},hc,{animationName:0,elapsedTime:0,pseudoElement:0}),CL=yr(SL),IL=Et({},hc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kL=yr(IL),NL=Et({},hc,{data:0}),OE=yr(NL),AL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RL[t])?!!e[t]:!1}function Vx(){return DL}var jL=Et({},Sd,{key:function(t){if(t.key){var e=AL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=cf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vx,charCode:function(t){return t.type==="keypress"?cf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?cf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ML=yr(jL),OL=Et({},cp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LE=yr(OL),LL=Et({},Sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vx}),VL=yr(LL),FL=Et({},hc,{propertyName:0,elapsedTime:0,pseudoElement:0}),UL=yr(FL),$L=Et({},cp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zL=yr($L),BL=[9,13,27,32],Fx=ti&&"CompositionEvent"in window,yu=null;ti&&"documentMode"in document&&(yu=document.documentMode);var WL=ti&&"TextEvent"in window&&!yu,ik=ti&&(!Fx||yu&&8<yu&&11>=yu),VE=" ",FE=!1;function ok(t,e){switch(t){case"keyup":return BL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ak(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tl=!1;function HL(t,e){switch(t){case"compositionend":return ak(e);case"keypress":return e.which!==32?null:(FE=!0,VE);case"textInput":return t=e.data,t===VE&&FE?null:t;default:return null}}function qL(t,e){if(tl)return t==="compositionend"||!Fx&&ok(t,e)?(t=sk(),lf=Ox=$i=null,tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ik&&e.locale!=="ko"?null:e.data;default:return null}}var GL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GL[t.type]:e==="textarea"}function lk(t,e,n,r){FI(r),e=Hf(e,"onChange"),0<e.length&&(n=new Lx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wu=null,zu=null;function KL(t){wk(t,0)}function up(t){var e=sl(t);if(RI(e))return t}function YL(t,e){if(t==="change")return e}var ck=!1;if(ti){var cv;if(ti){var uv="oninput"in document;if(!uv){var $E=document.createElement("div");$E.setAttribute("oninput","return;"),uv=typeof $E.oninput=="function"}cv=uv}else cv=!1;ck=cv&&(!document.documentMode||9<document.documentMode)}function zE(){wu&&(wu.detachEvent("onpropertychange",uk),zu=wu=null)}function uk(t){if(t.propertyName==="value"&&up(zu)){var e=[];lk(e,zu,t,Px(t)),BI(KL,e)}}function QL(t,e,n){t==="focusin"?(zE(),wu=e,zu=n,wu.attachEvent("onpropertychange",uk)):t==="focusout"&&zE()}function XL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return up(zu)}function ZL(t,e){if(t==="click")return up(e)}function JL(t,e){if(t==="input"||t==="change")return up(e)}function eV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xr=typeof Object.is=="function"?Object.is:eV;function Bu(t,e){if(Xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!my.call(e,s)||!Xr(t[s],e[s]))return!1}return!0}function BE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function WE(t,e){var n=BE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=BE(n)}}function dk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hk(){for(var t=window,e=Vf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vf(t.document)}return e}function Ux(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tV(t){var e=hk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dk(n.ownerDocument.documentElement,n)){if(r!==null&&Ux(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=WE(n,i);var o=WE(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nV=ti&&"documentMode"in document&&11>=document.documentMode,nl=null,Dy=null,xu=null,jy=!1;function HE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jy||nl==null||nl!==Vf(r)||(r=nl,"selectionStart"in r&&Ux(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xu&&Bu(xu,r)||(xu=r,r=Hf(Dy,"onSelect"),0<r.length&&(e=new Lx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nl)))}function Rh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rl={animationend:Rh("Animation","AnimationEnd"),animationiteration:Rh("Animation","AnimationIteration"),animationstart:Rh("Animation","AnimationStart"),transitionend:Rh("Transition","TransitionEnd")},dv={},fk={};ti&&(fk=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function dp(t){if(dv[t])return dv[t];if(!rl[t])return t;var e=rl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fk)return dv[t]=e[n];return t}var mk=dp("animationend"),pk=dp("animationiteration"),gk=dp("animationstart"),vk=dp("transitionend"),yk=new Map,qE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(t,e){yk.set(t,e),Ta(e,[t])}for(var hv=0;hv<qE.length;hv++){var fv=qE[hv],rV=fv.toLowerCase(),sV=fv[0].toUpperCase()+fv.slice(1);bo(rV,"on"+sV)}bo(mk,"onAnimationEnd");bo(pk,"onAnimationIteration");bo(gk,"onAnimationStart");bo("dblclick","onDoubleClick");bo("focusin","onFocus");bo("focusout","onBlur");bo(vk,"onTransitionEnd");Ll("onMouseEnter",["mouseout","mouseover"]);Ll("onMouseLeave",["mouseout","mouseover"]);Ll("onPointerEnter",["pointerout","pointerover"]);Ll("onPointerLeave",["pointerout","pointerover"]);Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iV=new Set("cancel close invalid load scroll toggle".split(" ").concat(au));function GE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rL(r,e,void 0,t),t.currentTarget=null}function wk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;GE(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;GE(s,a,u),i=c}}}if(Uf)throw t=Ny,Uf=!1,Ny=null,t}function ft(t,e){var n=e[Fy];n===void 0&&(n=e[Fy]=new Set);var r=t+"__bubble";n.has(r)||(xk(e,t,2,!1),n.add(r))}function mv(t,e,n){var r=0;e&&(r|=4),xk(n,t,r,e)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function Wu(t){if(!t[Dh]){t[Dh]=!0,II.forEach(function(n){n!=="selectionchange"&&(iV.has(n)||mv(n,!1,t),mv(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dh]||(e[Dh]=!0,mv("selectionchange",!1,e))}}function xk(t,e,n,r){switch(rk(e)){case 1:var s=wL;break;case 4:s=xL;break;default:s=Mx}n=s.bind(null,e,n,t),s=void 0,!ky||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function pv(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=qo(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}BI(function(){var u=i,h=Px(n),f=[];e:{var m=yk.get(t);if(m!==void 0){var v=Lx,b=t;switch(t){case"keypress":if(cf(n)===0)break e;case"keydown":case"keyup":v=ML;break;case"focusin":b="focus",v=lv;break;case"focusout":b="blur",v=lv;break;case"beforeblur":case"afterblur":v=lv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ME;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=EL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=VL;break;case mk:case pk:case gk:v=CL;break;case vk:v=UL;break;case"scroll":v=_L;break;case"wheel":v=zL;break;case"copy":case"cut":case"paste":v=kL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=LE}var w=(e&4)!==0,x=!w&&t==="scroll",_=w?m!==null?m+"Capture":null:m;w=[];for(var y=u,T;y!==null;){T=y;var N=T.stateNode;if(T.tag===5&&N!==null&&(T=N,_!==null&&(N=Vu(y,_),N!=null&&w.push(Hu(y,N,T)))),x)break;y=y.return}0<w.length&&(m=new v(m,b,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Cy&&(b=n.relatedTarget||n.fromElement)&&(qo(b)||b[ni]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=u,b=b?qo(b):null,b!==null&&(x=Sa(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(w=ME,N="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(w=LE,N="onPointerLeave",_="onPointerEnter",y="pointer"),x=v==null?m:sl(v),T=b==null?m:sl(b),m=new w(N,y+"leave",v,n,h),m.target=x,m.relatedTarget=T,N=null,qo(h)===u&&(w=new w(_,y+"enter",b,n,h),w.target=T,w.relatedTarget=x,N=w),x=N,v&&b)t:{for(w=v,_=b,y=0,T=w;T;T=Fa(T))y++;for(T=0,N=_;N;N=Fa(N))T++;for(;0<y-T;)w=Fa(w),y--;for(;0<T-y;)_=Fa(_),T--;for(;y--;){if(w===_||_!==null&&w===_.alternate)break t;w=Fa(w),_=Fa(_)}w=null}else w=null;v!==null&&KE(f,m,v,w,!1),b!==null&&x!==null&&KE(f,x,b,w,!0)}}e:{if(m=u?sl(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var j=YL;else if(UE(m))if(ck)j=JL;else{j=XL;var M=QL}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=ZL);if(j&&(j=j(t,u))){lk(f,j,n,h);break e}M&&M(t,m,u),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&_y(m,"number",m.value)}switch(M=u?sl(u):window,t){case"focusin":(UE(M)||M.contentEditable==="true")&&(nl=M,Dy=u,xu=null);break;case"focusout":xu=Dy=nl=null;break;case"mousedown":jy=!0;break;case"contextmenu":case"mouseup":case"dragend":jy=!1,HE(f,n,h);break;case"selectionchange":if(nV)break;case"keydown":case"keyup":HE(f,n,h)}var C;if(Fx)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else tl?ok(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(ik&&n.locale!=="ko"&&(tl||k!=="onCompositionStart"?k==="onCompositionEnd"&&tl&&(C=sk()):($i=h,Ox="value"in $i?$i.value:$i.textContent,tl=!0)),M=Hf(u,k),0<M.length&&(k=new OE(k,t,null,n,h),f.push({event:k,listeners:M}),C?k.data=C:(C=ak(n),C!==null&&(k.data=C)))),(C=WL?HL(t,n):qL(t,n))&&(u=Hf(u,"onBeforeInput"),0<u.length&&(h=new OE("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=C))}wk(f,e)})}function Hu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vu(t,n),i!=null&&r.unshift(Hu(t,i,s)),i=Vu(t,e),i!=null&&r.push(Hu(t,i,s))),t=t.return}return r}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KE(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Vu(n,i),c!=null&&o.unshift(Hu(n,c,a))):s||(c=Vu(n,i),c!=null&&o.push(Hu(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oV=/\r\n?/g,aV=/\u0000|\uFFFD/g;function YE(t){return(typeof t=="string"?t:""+t).replace(oV,`
`).replace(aV,"")}function jh(t,e,n){if(e=YE(e),YE(t)!==e&&n)throw Error(Y(425))}function qf(){}var My=null,Oy=null;function Ly(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vy=typeof setTimeout=="function"?setTimeout:void 0,lV=typeof clearTimeout=="function"?clearTimeout:void 0,QE=typeof Promise=="function"?Promise:void 0,cV=typeof queueMicrotask=="function"?queueMicrotask:typeof QE<"u"?function(t){return QE.resolve(null).then(t).catch(uV)}:Vy;function uV(t){setTimeout(function(){throw t})}function gv(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),$u(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$u(e)}function Ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function XE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fc=Math.random().toString(36).slice(2),us="__reactFiber$"+fc,qu="__reactProps$"+fc,ni="__reactContainer$"+fc,Fy="__reactEvents$"+fc,dV="__reactListeners$"+fc,hV="__reactHandles$"+fc;function qo(t){var e=t[us];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[us]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=XE(t);t!==null;){if(n=t[us])return n;t=XE(t)}return e}t=n,n=t.parentNode}return null}function Cd(t){return t=t[us]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function hp(t){return t[qu]||null}var Uy=[],il=-1;function Eo(t){return{current:t}}function gt(t){0>il||(t.current=Uy[il],Uy[il]=null,il--)}function ct(t,e){il++,Uy[il]=t.current,t.current=e}var io={},bn=Eo(io),qn=Eo(!1),la=io;function Vl(t,e){var n=t.type.contextTypes;if(!n)return io;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gn(t){return t=t.childContextTypes,t!=null}function Gf(){gt(qn),gt(bn)}function ZE(t,e,n){if(bn.current!==io)throw Error(Y(168));ct(bn,e),ct(qn,n)}function _k(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,Q4(t)||"Unknown",s));return Et({},n,r)}function Kf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||io,la=bn.current,ct(bn,t),ct(qn,qn.current),!0}function JE(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=_k(t,e,la),r.__reactInternalMemoizedMergedChildContext=t,gt(qn),gt(bn),ct(bn,t)):gt(qn),ct(qn,n)}var Ws=null,fp=!1,vv=!1;function bk(t){Ws===null?Ws=[t]:Ws.push(t)}function fV(t){fp=!0,bk(t)}function To(){if(!vv&&Ws!==null){vv=!0;var t=0,e=ot;try{var n=Ws;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ws=null,fp=!1}catch(s){throw Ws!==null&&(Ws=Ws.slice(t+1)),GI(Rx,To),s}finally{ot=e,vv=!1}}return null}var ol=[],al=0,Yf=null,Qf=0,_r=[],br=0,ca=null,qs=1,Gs="";function Uo(t,e){ol[al++]=Qf,ol[al++]=Yf,Yf=t,Qf=e}function Ek(t,e,n){_r[br++]=qs,_r[br++]=Gs,_r[br++]=ca,ca=t;var r=qs;t=Gs;var s=32-Gr(r)-1;r&=~(1<<s),n+=1;var i=32-Gr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qs=1<<32-Gr(e)+s|n<<s|r,Gs=i+t}else qs=1<<i|n<<s|r,Gs=t}function $x(t){t.return!==null&&(Uo(t,1),Ek(t,1,0))}function zx(t){for(;t===Yf;)Yf=ol[--al],ol[al]=null,Qf=ol[--al],ol[al]=null;for(;t===ca;)ca=_r[--br],_r[br]=null,Gs=_r[--br],_r[br]=null,qs=_r[--br],_r[br]=null}var lr=null,sr=null,wt=!1,$r=null;function Tk(t,e){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,lr=t,sr=Ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,lr=t,sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ca!==null?{id:qs,overflow:Gs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,lr=t,sr=null,!0):!1;default:return!1}}function $y(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zy(t){if(wt){var e=sr;if(e){var n=e;if(!e1(t,e)){if($y(t))throw Error(Y(418));e=Ki(n.nextSibling);var r=lr;e&&e1(t,e)?Tk(r,n):(t.flags=t.flags&-4097|2,wt=!1,lr=t)}}else{if($y(t))throw Error(Y(418));t.flags=t.flags&-4097|2,wt=!1,lr=t}}}function t1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lr=t}function Mh(t){if(t!==lr)return!1;if(!wt)return t1(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ly(t.type,t.memoizedProps)),e&&(e=sr)){if($y(t))throw Sk(),Error(Y(418));for(;e;)Tk(t,e),e=Ki(e.nextSibling)}if(t1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sr=Ki(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sr=null}}else sr=lr?Ki(t.stateNode.nextSibling):null;return!0}function Sk(){for(var t=sr;t;)t=Ki(t.nextSibling)}function Fl(){sr=lr=null,wt=!1}function Bx(t){$r===null?$r=[t]:$r.push(t)}var mV=fi.ReactCurrentBatchConfig;function Xc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Oh(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n1(t){var e=t._init;return e(t._payload)}function Ck(t){function e(_,y){if(t){var T=_.deletions;T===null?(_.deletions=[y],_.flags|=16):T.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function s(_,y){return _=Zi(_,y),_.index=0,_.sibling=null,_}function i(_,y,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<y?(_.flags|=2,y):T):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,T,N){return y===null||y.tag!==6?(y=Tv(T,_.mode,N),y.return=_,y):(y=s(y,T),y.return=_,y)}function c(_,y,T,N){var j=T.type;return j===el?h(_,y,T.props.children,N,T.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ci&&n1(j)===y.type)?(N=s(y,T.props),N.ref=Xc(_,y,T),N.return=_,N):(N=gf(T.type,T.key,T.props,null,_.mode,N),N.ref=Xc(_,y,T),N.return=_,N)}function u(_,y,T,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==T.containerInfo||y.stateNode.implementation!==T.implementation?(y=Sv(T,_.mode,N),y.return=_,y):(y=s(y,T.children||[]),y.return=_,y)}function h(_,y,T,N,j){return y===null||y.tag!==7?(y=sa(T,_.mode,N,j),y.return=_,y):(y=s(y,T),y.return=_,y)}function f(_,y,T){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Tv(""+y,_.mode,T),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sh:return T=gf(y.type,y.key,y.props,null,_.mode,T),T.ref=Xc(_,null,y),T.return=_,T;case Ja:return y=Sv(y,_.mode,T),y.return=_,y;case Ci:var N=y._init;return f(_,N(y._payload),T)}if(iu(y)||qc(y))return y=sa(y,_.mode,T,null),y.return=_,y;Oh(_,y)}return null}function m(_,y,T,N){var j=y!==null?y.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return j!==null?null:a(_,y,""+T,N);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Sh:return T.key===j?c(_,y,T,N):null;case Ja:return T.key===j?u(_,y,T,N):null;case Ci:return j=T._init,m(_,y,j(T._payload),N)}if(iu(T)||qc(T))return j!==null?null:h(_,y,T,N,null);Oh(_,T)}return null}function v(_,y,T,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(T)||null,a(y,_,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Sh:return _=_.get(N.key===null?T:N.key)||null,c(y,_,N,j);case Ja:return _=_.get(N.key===null?T:N.key)||null,u(y,_,N,j);case Ci:var M=N._init;return v(_,y,T,M(N._payload),j)}if(iu(N)||qc(N))return _=_.get(T)||null,h(y,_,N,j,null);Oh(y,N)}return null}function b(_,y,T,N){for(var j=null,M=null,C=y,k=y=0,R=null;C!==null&&k<T.length;k++){C.index>k?(R=C,C=null):R=C.sibling;var I=m(_,C,T[k],N);if(I===null){C===null&&(C=R);break}t&&C&&I.alternate===null&&e(_,C),y=i(I,y,k),M===null?j=I:M.sibling=I,M=I,C=R}if(k===T.length)return n(_,C),wt&&Uo(_,k),j;if(C===null){for(;k<T.length;k++)C=f(_,T[k],N),C!==null&&(y=i(C,y,k),M===null?j=C:M.sibling=C,M=C);return wt&&Uo(_,k),j}for(C=r(_,C);k<T.length;k++)R=v(C,_,k,T[k],N),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?k:R.key),y=i(R,y,k),M===null?j=R:M.sibling=R,M=R);return t&&C.forEach(function(S){return e(_,S)}),wt&&Uo(_,k),j}function w(_,y,T,N){var j=qc(T);if(typeof j!="function")throw Error(Y(150));if(T=j.call(T),T==null)throw Error(Y(151));for(var M=j=null,C=y,k=y=0,R=null,I=T.next();C!==null&&!I.done;k++,I=T.next()){C.index>k?(R=C,C=null):R=C.sibling;var S=m(_,C,I.value,N);if(S===null){C===null&&(C=R);break}t&&C&&S.alternate===null&&e(_,C),y=i(S,y,k),M===null?j=S:M.sibling=S,M=S,C=R}if(I.done)return n(_,C),wt&&Uo(_,k),j;if(C===null){for(;!I.done;k++,I=T.next())I=f(_,I.value,N),I!==null&&(y=i(I,y,k),M===null?j=I:M.sibling=I,M=I);return wt&&Uo(_,k),j}for(C=r(_,C);!I.done;k++,I=T.next())I=v(C,_,k,I.value,N),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?k:I.key),y=i(I,y,k),M===null?j=I:M.sibling=I,M=I);return t&&C.forEach(function(P){return e(_,P)}),wt&&Uo(_,k),j}function x(_,y,T,N){if(typeof T=="object"&&T!==null&&T.type===el&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Sh:e:{for(var j=T.key,M=y;M!==null;){if(M.key===j){if(j=T.type,j===el){if(M.tag===7){n(_,M.sibling),y=s(M,T.props.children),y.return=_,_=y;break e}}else if(M.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ci&&n1(j)===M.type){n(_,M.sibling),y=s(M,T.props),y.ref=Xc(_,M,T),y.return=_,_=y;break e}n(_,M);break}else e(_,M);M=M.sibling}T.type===el?(y=sa(T.props.children,_.mode,N,T.key),y.return=_,_=y):(N=gf(T.type,T.key,T.props,null,_.mode,N),N.ref=Xc(_,y,T),N.return=_,_=N)}return o(_);case Ja:e:{for(M=T.key;y!==null;){if(y.key===M)if(y.tag===4&&y.stateNode.containerInfo===T.containerInfo&&y.stateNode.implementation===T.implementation){n(_,y.sibling),y=s(y,T.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Sv(T,_.mode,N),y.return=_,_=y}return o(_);case Ci:return M=T._init,x(_,y,M(T._payload),N)}if(iu(T))return b(_,y,T,N);if(qc(T))return w(_,y,T,N);Oh(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,y!==null&&y.tag===6?(n(_,y.sibling),y=s(y,T),y.return=_,_=y):(n(_,y),y=Tv(T,_.mode,N),y.return=_,_=y),o(_)):n(_,y)}return x}var Ul=Ck(!0),Ik=Ck(!1),Xf=Eo(null),Zf=null,ll=null,Wx=null;function Hx(){Wx=ll=Zf=null}function qx(t){var e=Xf.current;gt(Xf),t._currentValue=e}function By(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vl(t,e){Zf=t,Wx=ll=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function Ir(t){var e=t._currentValue;if(Wx!==t)if(t={context:t,memoizedValue:e,next:null},ll===null){if(Zf===null)throw Error(Y(308));ll=t,Zf.dependencies={lanes:0,firstContext:t}}else ll=ll.next=t;return e}var Go=null;function Gx(t){Go===null?Go=[t]:Go.push(t)}function kk(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gx(e)):(n.next=s.next,s.next=n),e.interleaved=n,ri(t,r)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ii=!1;function Kx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ri(t,n)}return s=r.interleaved,s===null?(e.next=e,Gx(r)):(e.next=s.next,s.next=e),r.interleaved=e,ri(t,n)}function uf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dx(t,n)}}function r1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jf(t,e,n,r){var s=t.updateQueue;Ii=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,a=i;do{var m=a.lane,v=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,w=a;switch(m=e,v=n,w.tag){case 1:if(b=w.payload,typeof b=="function"){f=b.call(v,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=w.payload,m=typeof b=="function"?b.call(v,f,m):b,m==null)break e;f=Et({},f,m);break e;case 2:Ii=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,c=f):h=h.next=v,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);da|=o,t.lanes=o,t.memoizedState=f}}function s1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Id={},ys=Eo(Id),Gu=Eo(Id),Ku=Eo(Id);function Ko(t){if(t===Id)throw Error(Y(174));return t}function Yx(t,e){switch(ct(Ku,e),ct(Gu,t),ct(ys,Id),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ey(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ey(e,t)}gt(ys),ct(ys,e)}function $l(){gt(ys),gt(Gu),gt(Ku)}function Ak(t){Ko(Ku.current);var e=Ko(ys.current),n=Ey(e,t.type);e!==n&&(ct(Gu,t),ct(ys,n))}function Qx(t){Gu.current===t&&(gt(ys),gt(Gu))}var _t=Eo(0);function em(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yv=[];function Xx(){for(var t=0;t<yv.length;t++)yv[t]._workInProgressVersionPrimary=null;yv.length=0}var df=fi.ReactCurrentDispatcher,wv=fi.ReactCurrentBatchConfig,ua=0,bt=null,Ut=null,qt=null,tm=!1,_u=!1,Yu=0,pV=0;function hn(){throw Error(Y(321))}function Zx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xr(t[n],e[n]))return!1;return!0}function Jx(t,e,n,r,s,i){if(ua=i,bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,df.current=t===null||t.memoizedState===null?wV:xV,t=n(r,s),_u){i=0;do{if(_u=!1,Yu=0,25<=i)throw Error(Y(301));i+=1,qt=Ut=null,e.updateQueue=null,df.current=_V,t=n(r,s)}while(_u)}if(df.current=nm,e=Ut!==null&&Ut.next!==null,ua=0,qt=Ut=bt=null,tm=!1,e)throw Error(Y(300));return t}function e0(){var t=Yu!==0;return Yu=0,t}function is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?bt.memoizedState=qt=t:qt=qt.next=t,qt}function kr(){if(Ut===null){var t=bt.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var e=qt===null?bt.memoizedState:qt.next;if(e!==null)qt=e,Ut=t;else{if(t===null)throw Error(Y(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},qt===null?bt.memoizedState=qt=t:qt=qt.next=t}return qt}function Qu(t,e){return typeof e=="function"?e(t):e}function xv(t){var e=kr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Ut,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((ua&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,bt.lanes|=h,da|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Xr(r,e.memoizedState)||(Bn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,bt.lanes|=i,da|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _v(t){var e=kr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Xr(i,e.memoizedState)||(Bn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Pk(){}function Rk(t,e){var n=bt,r=kr(),s=e(),i=!Xr(r.memoizedState,s);if(i&&(r.memoizedState=s,Bn=!0),r=r.queue,t0(Mk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qt!==null&&qt.memoizedState.tag&1){if(n.flags|=2048,Xu(9,jk.bind(null,n,r,s,e),void 0,null),Xt===null)throw Error(Y(349));ua&30||Dk(n,e,s)}return s}function Dk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jk(t,e,n,r){e.value=n,e.getSnapshot=r,Ok(e)&&Lk(t)}function Mk(t,e,n){return n(function(){Ok(e)&&Lk(t)})}function Ok(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xr(t,n)}catch{return!0}}function Lk(t){var e=ri(t,1);e!==null&&Kr(e,t,1,-1)}function i1(t){var e=is();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},e.queue=t,t=t.dispatch=yV.bind(null,bt,t),[e.memoizedState,t]}function Xu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Vk(){return kr().memoizedState}function hf(t,e,n,r){var s=is();bt.flags|=t,s.memoizedState=Xu(1|e,n,void 0,r===void 0?null:r)}function mp(t,e,n,r){var s=kr();r=r===void 0?null:r;var i=void 0;if(Ut!==null){var o=Ut.memoizedState;if(i=o.destroy,r!==null&&Zx(r,o.deps)){s.memoizedState=Xu(e,n,i,r);return}}bt.flags|=t,s.memoizedState=Xu(1|e,n,i,r)}function o1(t,e){return hf(8390656,8,t,e)}function t0(t,e){return mp(2048,8,t,e)}function Fk(t,e){return mp(4,2,t,e)}function Uk(t,e){return mp(4,4,t,e)}function $k(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zk(t,e,n){return n=n!=null?n.concat([t]):null,mp(4,4,$k.bind(null,e,t),n)}function n0(){}function Bk(t,e){var n=kr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wk(t,e){var n=kr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hk(t,e,n){return ua&21?(Xr(n,e)||(n=QI(),bt.lanes|=n,da|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=n)}function gV(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=wv.transition;wv.transition={};try{t(!1),e()}finally{ot=n,wv.transition=r}}function qk(){return kr().memoizedState}function vV(t,e,n){var r=Xi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gk(t))Kk(e,n);else if(n=kk(t,e,n,r),n!==null){var s=An();Kr(n,t,r,s),Yk(n,e,r)}}function yV(t,e,n){var r=Xi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gk(t))Kk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Xr(a,o)){var c=e.interleaved;c===null?(s.next=s,Gx(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=kk(t,e,s,r),n!==null&&(s=An(),Kr(n,t,r,s),Yk(n,e,r))}}function Gk(t){var e=t.alternate;return t===bt||e!==null&&e===bt}function Kk(t,e){_u=tm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dx(t,n)}}var nm={readContext:Ir,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useInsertionEffect:hn,useLayoutEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useMutableSource:hn,useSyncExternalStore:hn,useId:hn,unstable_isNewReconciler:!1},wV={readContext:Ir,useCallback:function(t,e){return is().memoizedState=[t,e===void 0?null:e],t},useContext:Ir,useEffect:o1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hf(4194308,4,$k.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hf(4194308,4,t,e)},useInsertionEffect:function(t,e){return hf(4,2,t,e)},useMemo:function(t,e){var n=is();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=is();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vV.bind(null,bt,t),[r.memoizedState,t]},useRef:function(t){var e=is();return t={current:t},e.memoizedState=t},useState:i1,useDebugValue:n0,useDeferredValue:function(t){return is().memoizedState=t},useTransition:function(){var t=i1(!1),e=t[0];return t=gV.bind(null,t[1]),is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=bt,s=is();if(wt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Xt===null)throw Error(Y(349));ua&30||Dk(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,o1(Mk.bind(null,r,i,t),[t]),r.flags|=2048,Xu(9,jk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=is(),e=Xt.identifierPrefix;if(wt){var n=Gs,r=qs;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xV={readContext:Ir,useCallback:Bk,useContext:Ir,useEffect:t0,useImperativeHandle:zk,useInsertionEffect:Fk,useLayoutEffect:Uk,useMemo:Wk,useReducer:xv,useRef:Vk,useState:function(){return xv(Qu)},useDebugValue:n0,useDeferredValue:function(t){var e=kr();return Hk(e,Ut.memoizedState,t)},useTransition:function(){var t=xv(Qu)[0],e=kr().memoizedState;return[t,e]},useMutableSource:Pk,useSyncExternalStore:Rk,useId:qk,unstable_isNewReconciler:!1},_V={readContext:Ir,useCallback:Bk,useContext:Ir,useEffect:t0,useImperativeHandle:zk,useInsertionEffect:Fk,useLayoutEffect:Uk,useMemo:Wk,useReducer:_v,useRef:Vk,useState:function(){return _v(Qu)},useDebugValue:n0,useDeferredValue:function(t){var e=kr();return Ut===null?e.memoizedState=t:Hk(e,Ut.memoizedState,t)},useTransition:function(){var t=_v(Qu)[0],e=kr().memoizedState;return[t,e]},useMutableSource:Pk,useSyncExternalStore:Rk,useId:qk,unstable_isNewReconciler:!1};function Or(t,e){if(t&&t.defaultProps){e=Et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pp={isMounted:function(t){return(t=t._reactInternals)?Sa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=An(),s=Xi(t),i=Zs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Yi(t,i,s),e!==null&&(Kr(e,t,s,r),uf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=An(),s=Xi(t),i=Zs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Yi(t,i,s),e!==null&&(Kr(e,t,s,r),uf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=An(),r=Xi(t),s=Zs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Yi(t,s,r),e!==null&&(Kr(e,t,r,n),uf(e,t,r))}};function a1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Bu(n,r)||!Bu(s,i):!0}function Qk(t,e,n){var r=!1,s=io,i=e.contextType;return typeof i=="object"&&i!==null?i=Ir(i):(s=Gn(e)?la:bn.current,r=e.contextTypes,i=(r=r!=null)?Vl(t,s):io),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function l1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pp.enqueueReplaceState(e,e.state,null)}function Hy(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Kx(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ir(i):(i=Gn(e)?la:bn.current,s.context=Vl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pp.enqueueReplaceState(s,s.state,null),Jf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zl(t,e){try{var n="",r=e;do n+=Y4(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bv(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bV=typeof WeakMap=="function"?WeakMap:Map;function Xk(t,e,n){n=Zs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sm||(sm=!0,nw=r),qy(t,e)},n}function Zk(t,e,n){n=Zs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qy(t,e),typeof r!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function c1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OV.bind(null,t,e,n),e.then(t,t))}function u1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zs(-1,1),e.tag=2,Yi(n,e,1))),n.lanes|=1),t)}var EV=fi.ReactCurrentOwner,Bn=!1;function In(t,e,n,r){e.child=t===null?Ik(e,null,n,r):Ul(e,t.child,n,r)}function h1(t,e,n,r,s){n=n.render;var i=e.ref;return vl(e,s),r=Jx(t,e,n,r,i,s),n=e0(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,si(t,e,s)):(wt&&n&&$x(e),e.flags|=1,In(t,e,r,s),e.child)}function f1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!u0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Jk(t,e,i,r,s)):(t=gf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Bu,n(o,r)&&t.ref===e.ref)return si(t,e,s)}return e.flags|=1,t=Zi(i,r),t.ref=e.ref,t.return=e,e.child=t}function Jk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Bu(i,r)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,si(t,e,s)}return Gy(t,e,n,r,s)}function eN(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(ul,er),er|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ct(ul,er),er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ct(ul,er),er|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ct(ul,er),er|=r;return In(t,e,s,n),e.child}function tN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gy(t,e,n,r,s){var i=Gn(n)?la:bn.current;return i=Vl(e,i),vl(e,s),n=Jx(t,e,n,r,i,s),r=e0(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,si(t,e,s)):(wt&&r&&$x(e),e.flags|=1,In(t,e,n,s),e.child)}function m1(t,e,n,r,s){if(Gn(n)){var i=!0;Kf(e)}else i=!1;if(vl(e,s),e.stateNode===null)ff(t,e),Qk(e,n,r),Hy(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ir(u):(u=Gn(n)?la:bn.current,u=Vl(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&l1(e,o,r,u),Ii=!1;var m=e.memoizedState;o.state=m,Jf(e,r,o,s),c=e.memoizedState,a!==r||m!==c||qn.current||Ii?(typeof h=="function"&&(Wy(e,n,h,r),c=e.memoizedState),(a=Ii||a1(e,n,a,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Nk(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Or(e.type,a),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ir(c):(c=Gn(n)?la:bn.current,c=Vl(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==c)&&l1(e,o,r,c),Ii=!1,m=e.memoizedState,o.state=m,Jf(e,r,o,s);var b=e.memoizedState;a!==f||m!==b||qn.current||Ii?(typeof v=="function"&&(Wy(e,n,v,r),b=e.memoizedState),(u=Ii||a1(e,n,u,r,m,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ky(t,e,n,r,i,s)}function Ky(t,e,n,r,s,i){tN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&JE(e,n,!1),si(t,e,i);r=e.stateNode,EV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ul(e,t.child,null,i),e.child=Ul(e,null,a,i)):In(t,e,a,i),e.memoizedState=r.state,s&&JE(e,n,!0),e.child}function nN(t){var e=t.stateNode;e.pendingContext?ZE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ZE(t,e.context,!1),Yx(t,e.containerInfo)}function p1(t,e,n,r,s){return Fl(),Bx(s),e.flags|=256,In(t,e,n,r),e.child}var Yy={dehydrated:null,treeContext:null,retryLane:0};function Qy(t){return{baseLanes:t,cachePool:null,transitions:null}}function rN(t,e,n){var r=e.pendingProps,s=_t.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ct(_t,s&1),t===null)return zy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yp(o,r,0,null),t=sa(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qy(n),e.memoizedState=Yy,t):r0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return TV(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Zi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Zi(a,i):(i=sa(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Qy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Yy,r}return i=t.child,t=i.sibling,r=Zi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function r0(t,e){return e=yp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Lh(t,e,n,r){return r!==null&&Bx(r),Ul(e,t.child,null,n),t=r0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TV(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bv(Error(Y(422))),Lh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=yp({mode:"visible",children:r.children},s,0,null),i=sa(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ul(e,t.child,null,o),e.child.memoizedState=Qy(o),e.memoizedState=Yy,i);if(!(e.mode&1))return Lh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=bv(i,r,void 0),Lh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bn||a){if(r=Xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ri(t,s),Kr(r,t,s,-1))}return c0(),r=bv(Error(Y(421))),Lh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LV.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,sr=Ki(s.nextSibling),lr=e,wt=!0,$r=null,t!==null&&(_r[br++]=qs,_r[br++]=Gs,_r[br++]=ca,qs=t.id,Gs=t.overflow,ca=e),e=r0(e,r.children),e.flags|=4096,e)}function g1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),By(t.return,e,n)}function Ev(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sN(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(In(t,e,r.children,n),r=_t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g1(t,n,e);else if(t.tag===19)g1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ct(_t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&em(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ev(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&em(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ev(e,!0,n,null,i);break;case"together":Ev(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ff(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),da|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Zi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SV(t,e,n){switch(e.tag){case 3:nN(e),Fl();break;case 5:Ak(e);break;case 1:Gn(e.type)&&Kf(e);break;case 4:Yx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ct(Xf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ct(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?rN(t,e,n):(ct(_t,_t.current&1),t=si(t,e,n),t!==null?t.sibling:null);ct(_t,_t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return sN(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ct(_t,_t.current),r)break;return null;case 22:case 23:return e.lanes=0,eN(t,e,n)}return si(t,e,n)}var iN,Xy,oN,aN;iN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xy=function(){};oN=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ko(ys.current);var i=null;switch(n){case"input":s=wy(t,s),r=wy(t,r),i=[];break;case"select":s=Et({},s,{value:void 0}),r=Et({},r,{value:void 0}),i=[];break;case"textarea":s=by(t,s),r=by(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qf)}Ty(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ou.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ou.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ft("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};aN=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zc(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function CV(t,e,n){var r=e.pendingProps;switch(zx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Gn(e.type)&&Gf(),fn(e),null;case 3:return r=e.stateNode,$l(),gt(qn),gt(bn),Xx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$r!==null&&(iw($r),$r=null))),Xy(t,e),fn(e),null;case 5:Qx(e);var s=Ko(Ku.current);if(n=e.type,t!==null&&e.stateNode!=null)oN(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return fn(e),null}if(t=Ko(ys.current),Mh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[us]=e,r[qu]=i,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(s=0;s<au.length;s++)ft(au[s],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":SE(r,i),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ft("invalid",r);break;case"textarea":IE(r,i),ft("invalid",r)}Ty(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&jh(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&jh(r.textContent,a,t),s=["children",""+a]):Ou.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ft("scroll",r)}switch(n){case"input":Ch(r),CE(r,i,!0);break;case"textarea":Ch(r),kE(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[us]=e,t[qu]=r,iN(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sy(n,r),n){case"dialog":ft("cancel",t),ft("close",t),s=r;break;case"iframe":case"object":case"embed":ft("load",t),s=r;break;case"video":case"audio":for(s=0;s<au.length;s++)ft(au[s],t);s=r;break;case"source":ft("error",t),s=r;break;case"img":case"image":case"link":ft("error",t),ft("load",t),s=r;break;case"details":ft("toggle",t),s=r;break;case"input":SE(t,r),s=wy(t,r),ft("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Et({},r,{value:void 0}),ft("invalid",t);break;case"textarea":IE(t,r),s=by(t,r),ft("invalid",t);break;default:s=r}Ty(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?VI(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&OI(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Lu(t,c):typeof c=="number"&&Lu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ou.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ft("scroll",t):c!=null&&Ix(t,i,c,o))}switch(n){case"input":Ch(t),CE(t,r,!1);break;case"textarea":Ch(t),kE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+so(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fl(t,!!r.multiple,i,!1):r.defaultValue!=null&&fl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)aN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Ko(Ku.current),Ko(ys.current),Mh(e)){if(r=e.stateNode,n=e.memoizedProps,r[us]=e,(i=r.nodeValue!==n)&&(t=lr,t!==null))switch(t.tag){case 3:jh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jh(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[us]=e,e.stateNode=r}return fn(e),null;case 13:if(gt(_t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&sr!==null&&e.mode&1&&!(e.flags&128))Sk(),Fl(),e.flags|=98560,i=!1;else if(i=Mh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[us]=e}else Fl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),i=!1}else $r!==null&&(iw($r),$r=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Bt===0&&(Bt=3):c0())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return $l(),Xy(t,e),t===null&&Wu(e.stateNode.containerInfo),fn(e),null;case 10:return qx(e.type._context),fn(e),null;case 17:return Gn(e.type)&&Gf(),fn(e),null;case 19:if(gt(_t),i=e.memoizedState,i===null)return fn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Zc(i,!1);else{if(Bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=em(t),o!==null){for(e.flags|=128,Zc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ct(_t,_t.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pt()>Bl&&(e.flags|=128,r=!0,Zc(i,!1),e.lanes=4194304)}else{if(!r)if(t=em(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!wt)return fn(e),null}else 2*Pt()-i.renderingStartTime>Bl&&n!==1073741824&&(e.flags|=128,r=!0,Zc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pt(),e.sibling=null,n=_t.current,ct(_t,r?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return l0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?er&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function IV(t,e){switch(zx(e),e.tag){case 1:return Gn(e.type)&&Gf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $l(),gt(qn),gt(bn),Xx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qx(e),null;case 13:if(gt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Fl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(_t),null;case 4:return $l(),null;case 10:return qx(e.type._context),null;case 22:case 23:return l0(),null;case 24:return null;default:return null}}var Vh=!1,yn=!1,kV=typeof WeakSet=="function"?WeakSet:Set,me=null;function cl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function Zy(t,e,n){try{n()}catch(r){It(t,e,r)}}var v1=!1;function NV(t,e){if(My=Bf,t=hk(),Ux(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(c=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oy={focusedElem:t,selectionRange:n},Bf=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var w=b.memoizedProps,x=b.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:Or(e.type,w),x);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(N){It(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return b=v1,v1=!1,b}function bu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Zy(e,n,i)}s=s.next}while(s!==r)}}function gp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lN(t){var e=t.alternate;e!==null&&(t.alternate=null,lN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[us],delete e[qu],delete e[Fy],delete e[dV],delete e[hV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cN(t){return t.tag===5||t.tag===3||t.tag===4}function y1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ew(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qf));else if(r!==4&&(t=t.child,t!==null))for(ew(t,e,n),t=t.sibling;t!==null;)ew(t,e,n),t=t.sibling}function tw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tw(t,e,n),t=t.sibling;t!==null;)tw(t,e,n),t=t.sibling}var en=null,Ur=!1;function wi(t,e,n){for(n=n.child;n!==null;)uN(t,e,n),n=n.sibling}function uN(t,e,n){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(lp,n)}catch{}switch(n.tag){case 5:yn||cl(n,e);case 6:var r=en,s=Ur;en=null,wi(t,e,n),en=r,Ur=s,en!==null&&(Ur?(t=en,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):en.removeChild(n.stateNode));break;case 18:en!==null&&(Ur?(t=en,n=n.stateNode,t.nodeType===8?gv(t.parentNode,n):t.nodeType===1&&gv(t,n),$u(t)):gv(en,n.stateNode));break;case 4:r=en,s=Ur,en=n.stateNode.containerInfo,Ur=!0,wi(t,e,n),en=r,Ur=s;break;case 0:case 11:case 14:case 15:if(!yn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Zy(n,e,o),s=s.next}while(s!==r)}wi(t,e,n);break;case 1:if(!yn&&(cl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}wi(t,e,n);break;case 21:wi(t,e,n);break;case 22:n.mode&1?(yn=(r=yn)||n.memoizedState!==null,wi(t,e,n),yn=r):wi(t,e,n);break;default:wi(t,e,n)}}function w1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kV),e.forEach(function(r){var s=VV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,Ur=!1;break e;case 3:en=a.stateNode.containerInfo,Ur=!0;break e;case 4:en=a.stateNode.containerInfo,Ur=!0;break e}a=a.return}if(en===null)throw Error(Y(160));uN(i,o,s),en=null,Ur=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){It(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dN(e,t),e=e.sibling}function dN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jr(e,t),ss(t),r&4){try{bu(3,t,t.return),gp(3,t)}catch(w){It(t,t.return,w)}try{bu(5,t,t.return)}catch(w){It(t,t.return,w)}}break;case 1:jr(e,t),ss(t),r&512&&n!==null&&cl(n,n.return);break;case 5:if(jr(e,t),ss(t),r&512&&n!==null&&cl(n,n.return),t.flags&32){var s=t.stateNode;try{Lu(s,"")}catch(w){It(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&DI(s,i),Sy(a,o);var u=Sy(a,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?VI(s,f):h==="dangerouslySetInnerHTML"?OI(s,f):h==="children"?Lu(s,f):Ix(s,h,f,u)}switch(a){case"input":xy(s,i);break;case"textarea":jI(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?fl(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?fl(s,!!i.multiple,i.defaultValue,!0):fl(s,!!i.multiple,i.multiple?[]:"",!1))}s[qu]=i}catch(w){It(t,t.return,w)}}break;case 6:if(jr(e,t),ss(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){It(t,t.return,w)}}break;case 3:if(jr(e,t),ss(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$u(e.containerInfo)}catch(w){It(t,t.return,w)}break;case 4:jr(e,t),ss(t);break;case 13:jr(e,t),ss(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(o0=Pt())),r&4&&w1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(yn=(u=yn)||h,jr(e,t),yn=u):jr(e,t),ss(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(me=t,h=t.child;h!==null;){for(f=me=h;me!==null;){switch(m=me,v=m.child,m.tag){case 0:case 11:case 14:case 15:bu(4,m,m.return);break;case 1:cl(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(w){It(r,n,w)}}break;case 5:cl(m,m.return);break;case 22:if(m.memoizedState!==null){_1(f);continue}}v!==null?(v.return=m,me=v):_1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=LI("display",o))}catch(w){It(t,t.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){It(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:jr(e,t),ss(t),r&4&&w1(t);break;case 21:break;default:jr(e,t),ss(t)}}function ss(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cN(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lu(s,""),r.flags&=-33);var i=y1(t);tw(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=y1(t);ew(t,a,o);break;default:throw Error(Y(161))}}catch(c){It(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AV(t,e,n){me=t,hN(t)}function hN(t,e,n){for(var r=(t.mode&1)!==0;me!==null;){var s=me,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Vh;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||yn;a=Vh;var u=yn;if(Vh=o,(yn=c)&&!u)for(me=s;me!==null;)o=me,c=o.child,o.tag===22&&o.memoizedState!==null?b1(s):c!==null?(c.return=o,me=c):b1(s);for(;i!==null;)me=i,hN(i),i=i.sibling;me=s,Vh=a,yn=u}x1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,me=i):x1(t)}}function x1(t){for(;me!==null;){var e=me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||gp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Or(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&s1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}s1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&$u(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}yn||e.flags&512&&Jy(e)}catch(m){It(e,e.return,m)}}if(e===t){me=null;break}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}}function _1(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,me=n;break}me=e.return}}function b1(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gp(4,e)}catch(c){It(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){It(e,s,c)}}var i=e.return;try{Jy(e)}catch(c){It(e,i,c)}break;case 5:var o=e.return;try{Jy(e)}catch(c){It(e,o,c)}}}catch(c){It(e,e.return,c)}if(e===t){me=null;break}var a=e.sibling;if(a!==null){a.return=e.return,me=a;break}me=e.return}}var PV=Math.ceil,rm=fi.ReactCurrentDispatcher,s0=fi.ReactCurrentOwner,Tr=fi.ReactCurrentBatchConfig,Ye=0,Xt=null,Lt=null,sn=0,er=0,ul=Eo(0),Bt=0,Zu=null,da=0,vp=0,i0=0,Eu=null,$n=null,o0=0,Bl=1/0,zs=null,sm=!1,nw=null,Qi=null,Fh=!1,zi=null,im=0,Tu=0,rw=null,mf=-1,pf=0;function An(){return Ye&6?Pt():mf!==-1?mf:mf=Pt()}function Xi(t){return t.mode&1?Ye&2&&sn!==0?sn&-sn:mV.transition!==null?(pf===0&&(pf=QI()),pf):(t=ot,t!==0||(t=window.event,t=t===void 0?16:rk(t.type)),t):1}function Kr(t,e,n,r){if(50<Tu)throw Tu=0,rw=null,Error(Y(185));Td(t,n,r),(!(Ye&2)||t!==Xt)&&(t===Xt&&(!(Ye&2)&&(vp|=n),Bt===4&&Ai(t,sn)),Kn(t,r),n===1&&Ye===0&&!(e.mode&1)&&(Bl=Pt()+500,fp&&To()))}function Kn(t,e){var n=t.callbackNode;mL(t,e);var r=zf(t,t===Xt?sn:0);if(r===0)n!==null&&PE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&PE(n),e===1)t.tag===0?fV(E1.bind(null,t)):bk(E1.bind(null,t)),cV(function(){!(Ye&6)&&To()}),n=null;else{switch(XI(r)){case 1:n=Rx;break;case 4:n=KI;break;case 16:n=$f;break;case 536870912:n=YI;break;default:n=$f}n=xN(n,fN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fN(t,e){if(mf=-1,pf=0,Ye&6)throw Error(Y(327));var n=t.callbackNode;if(yl()&&t.callbackNode!==n)return null;var r=zf(t,t===Xt?sn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=om(t,r);else{e=r;var s=Ye;Ye|=2;var i=pN();(Xt!==t||sn!==e)&&(zs=null,Bl=Pt()+500,ra(t,e));do try{jV();break}catch(a){mN(t,a)}while(!0);Hx(),rm.current=i,Ye=s,Lt!==null?e=0:(Xt=null,sn=0,e=Bt)}if(e!==0){if(e===2&&(s=Ay(t),s!==0&&(r=s,e=sw(t,s))),e===1)throw n=Zu,ra(t,0),Ai(t,r),Kn(t,Pt()),n;if(e===6)Ai(t,r);else{if(s=t.current.alternate,!(r&30)&&!RV(s)&&(e=om(t,r),e===2&&(i=Ay(t),i!==0&&(r=i,e=sw(t,i))),e===1))throw n=Zu,ra(t,0),Ai(t,r),Kn(t,Pt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:$o(t,$n,zs);break;case 3:if(Ai(t,r),(r&130023424)===r&&(e=o0+500-Pt(),10<e)){if(zf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){An(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Vy($o.bind(null,t,$n,zs),e);break}$o(t,$n,zs);break;case 4:if(Ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PV(r/1960))-r,10<r){t.timeoutHandle=Vy($o.bind(null,t,$n,zs),r);break}$o(t,$n,zs);break;case 5:$o(t,$n,zs);break;default:throw Error(Y(329))}}}return Kn(t,Pt()),t.callbackNode===n?fN.bind(null,t):null}function sw(t,e){var n=Eu;return t.current.memoizedState.isDehydrated&&(ra(t,e).flags|=256),t=om(t,e),t!==2&&(e=$n,$n=n,e!==null&&iw(e)),t}function iw(t){$n===null?$n=t:$n.push.apply($n,t)}function RV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Xr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ai(t,e){for(e&=~i0,e&=~vp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function E1(t){if(Ye&6)throw Error(Y(327));yl();var e=zf(t,0);if(!(e&1))return Kn(t,Pt()),null;var n=om(t,e);if(t.tag!==0&&n===2){var r=Ay(t);r!==0&&(e=r,n=sw(t,r))}if(n===1)throw n=Zu,ra(t,0),Ai(t,e),Kn(t,Pt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$o(t,$n,zs),Kn(t,Pt()),null}function a0(t,e){var n=Ye;Ye|=1;try{return t(e)}finally{Ye=n,Ye===0&&(Bl=Pt()+500,fp&&To())}}function ha(t){zi!==null&&zi.tag===0&&!(Ye&6)&&yl();var e=Ye;Ye|=1;var n=Tr.transition,r=ot;try{if(Tr.transition=null,ot=1,t)return t()}finally{ot=r,Tr.transition=n,Ye=e,!(Ye&6)&&To()}}function l0(){er=ul.current,gt(ul)}function ra(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lV(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(zx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gf();break;case 3:$l(),gt(qn),gt(bn),Xx();break;case 5:Qx(r);break;case 4:$l();break;case 13:gt(_t);break;case 19:gt(_t);break;case 10:qx(r.type._context);break;case 22:case 23:l0()}n=n.return}if(Xt=t,Lt=t=Zi(t.current,null),sn=er=e,Bt=0,Zu=null,i0=vp=da=0,$n=Eu=null,Go!==null){for(e=0;e<Go.length;e++)if(n=Go[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Go=null}return t}function mN(t,e){do{var n=Lt;try{if(Hx(),df.current=nm,tm){for(var r=bt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}tm=!1}if(ua=0,qt=Ut=bt=null,_u=!1,Yu=0,s0.current=null,n===null||n.return===null){Bt=1,Zu=e,Lt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=sn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=u1(o);if(v!==null){v.flags&=-257,d1(v,o,a,i,e),v.mode&1&&c1(i,u,e),e=v,c=u;var b=e.updateQueue;if(b===null){var w=new Set;w.add(c),e.updateQueue=w}else b.add(c);break e}else{if(!(e&1)){c1(i,u,e),c0();break e}c=Error(Y(426))}}else if(wt&&a.mode&1){var x=u1(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),d1(x,o,a,i,e),Bx(zl(c,a));break e}}i=c=zl(c,a),Bt!==4&&(Bt=2),Eu===null?Eu=[i]:Eu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=Xk(i,c,e);r1(i,_);break e;case 1:a=c;var y=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Qi===null||!Qi.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Zk(i,a,e);r1(i,N);break e}}i=i.return}while(i!==null)}vN(n)}catch(j){e=j,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(!0)}function pN(){var t=rm.current;return rm.current=nm,t===null?nm:t}function c0(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Xt===null||!(da&268435455)&&!(vp&268435455)||Ai(Xt,sn)}function om(t,e){var n=Ye;Ye|=2;var r=pN();(Xt!==t||sn!==e)&&(zs=null,ra(t,e));do try{DV();break}catch(s){mN(t,s)}while(!0);if(Hx(),Ye=n,rm.current=r,Lt!==null)throw Error(Y(261));return Xt=null,sn=0,Bt}function DV(){for(;Lt!==null;)gN(Lt)}function jV(){for(;Lt!==null&&!iL();)gN(Lt)}function gN(t){var e=wN(t.alternate,t,er);t.memoizedProps=t.pendingProps,e===null?vN(t):Lt=e,s0.current=null}function vN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IV(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,Lt=null;return}}else if(n=CV(n,e,er),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);Bt===0&&(Bt=5)}function $o(t,e,n){var r=ot,s=Tr.transition;try{Tr.transition=null,ot=1,MV(t,e,n,r)}finally{Tr.transition=s,ot=r}return null}function MV(t,e,n,r){do yl();while(zi!==null);if(Ye&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pL(t,i),t===Xt&&(Lt=Xt=null,sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fh||(Fh=!0,xN($f,function(){return yl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tr.transition,Tr.transition=null;var o=ot;ot=1;var a=Ye;Ye|=4,s0.current=null,NV(t,n),dN(n,t),tV(Oy),Bf=!!My,Oy=My=null,t.current=n,AV(n),oL(),Ye=a,ot=o,Tr.transition=i}else t.current=n;if(Fh&&(Fh=!1,zi=t,im=s),i=t.pendingLanes,i===0&&(Qi=null),cL(n.stateNode),Kn(t,Pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sm)throw sm=!1,t=nw,nw=null,t;return im&1&&t.tag!==0&&yl(),i=t.pendingLanes,i&1?t===rw?Tu++:(Tu=0,rw=t):Tu=0,To(),null}function yl(){if(zi!==null){var t=XI(im),e=Tr.transition,n=ot;try{if(Tr.transition=null,ot=16>t?16:t,zi===null)var r=!1;else{if(t=zi,zi=null,im=0,Ye&6)throw Error(Y(331));var s=Ye;for(Ye|=4,me=t.current;me!==null;){var i=me,o=i.child;if(me.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(me=u;me!==null;){var h=me;switch(h.tag){case 0:case 11:case 15:bu(8,h,i)}var f=h.child;if(f!==null)f.return=h,me=f;else for(;me!==null;){h=me;var m=h.sibling,v=h.return;if(lN(h),h===u){me=null;break}if(m!==null){m.return=v,me=m;break}me=v}}}var b=i.alternate;if(b!==null){var w=b.child;if(w!==null){b.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}me=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,me=o;else e:for(;me!==null;){if(i=me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bu(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,me=_;break e}me=i.return}}var y=t.current;for(me=y;me!==null;){o=me;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,me=T;else e:for(o=y;me!==null;){if(a=me,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gp(9,a)}}catch(j){It(a,a.return,j)}if(a===o){me=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,me=N;break e}me=a.return}}if(Ye=s,To(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(lp,t)}catch{}r=!0}return r}finally{ot=n,Tr.transition=e}}return!1}function T1(t,e,n){e=zl(n,e),e=Xk(t,e,1),t=Yi(t,e,1),e=An(),t!==null&&(Td(t,1,e),Kn(t,e))}function It(t,e,n){if(t.tag===3)T1(t,t,n);else for(;e!==null;){if(e.tag===3){T1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qi===null||!Qi.has(r))){t=zl(n,t),t=Zk(e,t,1),e=Yi(e,t,1),t=An(),e!==null&&(Td(e,1,t),Kn(e,t));break}}e=e.return}}function OV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=An(),t.pingedLanes|=t.suspendedLanes&n,Xt===t&&(sn&n)===n&&(Bt===4||Bt===3&&(sn&130023424)===sn&&500>Pt()-o0?ra(t,0):i0|=n),Kn(t,e)}function yN(t,e){e===0&&(t.mode&1?(e=Nh,Nh<<=1,!(Nh&130023424)&&(Nh=4194304)):e=1);var n=An();t=ri(t,e),t!==null&&(Td(t,e,n),Kn(t,n))}function LV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yN(t,n)}function VV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),yN(t,n)}var wN;wN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qn.current)Bn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bn=!1,SV(t,e,n);Bn=!!(t.flags&131072)}else Bn=!1,wt&&e.flags&1048576&&Ek(e,Qf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ff(t,e),t=e.pendingProps;var s=Vl(e,bn.current);vl(e,n),s=Jx(null,e,r,t,s,n);var i=e0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gn(r)?(i=!0,Kf(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kx(e),s.updater=pp,e.stateNode=s,s._reactInternals=e,Hy(e,r,t,n),e=Ky(null,e,r,!0,i,n)):(e.tag=0,wt&&i&&$x(e),In(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ff(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=UV(r),t=Or(r,t),s){case 0:e=Gy(null,e,r,t,n);break e;case 1:e=m1(null,e,r,t,n);break e;case 11:e=h1(null,e,r,t,n);break e;case 14:e=f1(null,e,r,Or(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),Gy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),m1(t,e,r,s,n);case 3:e:{if(nN(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Nk(t,e),Jf(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=zl(Error(Y(423)),e),e=p1(t,e,r,n,s);break e}else if(r!==s){s=zl(Error(Y(424)),e),e=p1(t,e,r,n,s);break e}else for(sr=Ki(e.stateNode.containerInfo.firstChild),lr=e,wt=!0,$r=null,n=Ik(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fl(),r===s){e=si(t,e,n);break e}In(t,e,r,n)}e=e.child}return e;case 5:return Ak(e),t===null&&zy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ly(r,s)?o=null:i!==null&&Ly(r,i)&&(e.flags|=32),tN(t,e),In(t,e,o,n),e.child;case 6:return t===null&&zy(e),null;case 13:return rN(t,e,n);case 4:return Yx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ul(e,null,r,n):In(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),h1(t,e,r,s,n);case 7:return In(t,e,e.pendingProps,n),e.child;case 8:return In(t,e,e.pendingProps.children,n),e.child;case 12:return In(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ct(Xf,r._currentValue),r._currentValue=o,i!==null)if(Xr(i.value,o)){if(i.children===s.children&&!qn.current){e=si(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Zs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),By(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),By(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}In(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vl(e,n),s=Ir(s),r=r(s),e.flags|=1,In(t,e,r,n),e.child;case 14:return r=e.type,s=Or(r,e.pendingProps),s=Or(r.type,s),f1(t,e,r,s,n);case 15:return Jk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Or(r,s),ff(t,e),e.tag=1,Gn(r)?(t=!0,Kf(e)):t=!1,vl(e,n),Qk(e,r,s),Hy(e,r,s,n),Ky(null,e,r,!0,t,n);case 19:return sN(t,e,n);case 22:return eN(t,e,n)}throw Error(Y(156,e.tag))};function xN(t,e){return GI(t,e)}function FV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(t,e,n,r){return new FV(t,e,n,r)}function u0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UV(t){if(typeof t=="function")return u0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nx)return 11;if(t===Ax)return 14}return 2}function Zi(t,e){var n=t.alternate;return n===null?(n=Er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gf(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")u0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case el:return sa(n.children,s,i,e);case kx:o=8,s|=8;break;case py:return t=Er(12,n,e,s|2),t.elementType=py,t.lanes=i,t;case gy:return t=Er(13,n,e,s),t.elementType=gy,t.lanes=i,t;case vy:return t=Er(19,n,e,s),t.elementType=vy,t.lanes=i,t;case AI:return yp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kI:o=10;break e;case NI:o=9;break e;case Nx:o=11;break e;case Ax:o=14;break e;case Ci:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function sa(t,e,n,r){return t=Er(7,t,r,e),t.lanes=n,t}function yp(t,e,n,r){return t=Er(22,t,r,e),t.elementType=AI,t.lanes=n,t.stateNode={isHidden:!1},t}function Tv(t,e,n){return t=Er(6,t,null,e),t.lanes=n,t}function Sv(t,e,n){return e=Er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $V(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iv(0),this.expirationTimes=iv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iv(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function d0(t,e,n,r,s,i,o,a,c){return t=new $V(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kx(i),t}function zV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ja,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _N(t){if(!t)return io;t=t._reactInternals;e:{if(Sa(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Gn(n))return _k(t,n,e)}return e}function bN(t,e,n,r,s,i,o,a,c){return t=d0(n,r,!0,t,s,i,o,a,c),t.context=_N(null),n=t.current,r=An(),s=Xi(n),i=Zs(r,s),i.callback=e??null,Yi(n,i,s),t.current.lanes=s,Td(t,s,r),Kn(t,r),t}function wp(t,e,n,r){var s=e.current,i=An(),o=Xi(s);return n=_N(n),e.context===null?e.context=n:e.pendingContext=n,e=Zs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yi(s,e,o),t!==null&&(Kr(t,s,o,i),uf(t,s,o)),o}function am(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function S1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function h0(t,e){S1(t,e),(t=t.alternate)&&S1(t,e)}function BV(){return null}var EN=typeof reportError=="function"?reportError:function(t){console.error(t)};function f0(t){this._internalRoot=t}xp.prototype.render=f0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));wp(t,e,null,null)};xp.prototype.unmount=f0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ha(function(){wp(null,t,null,null)}),e[ni]=null}};function xp(t){this._internalRoot=t}xp.prototype.unstable_scheduleHydration=function(t){if(t){var e=ek();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ni.length&&e!==0&&e<Ni[n].priority;n++);Ni.splice(n,0,t),n===0&&nk(t)}};function m0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function C1(){}function WV(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=am(o);i.call(u)}}var o=bN(e,r,t,0,null,!1,!1,"",C1);return t._reactRootContainer=o,t[ni]=o.current,Wu(t.nodeType===8?t.parentNode:t),ha(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=am(c);a.call(u)}}var c=d0(t,0,!1,null,null,!1,!1,"",C1);return t._reactRootContainer=c,t[ni]=c.current,Wu(t.nodeType===8?t.parentNode:t),ha(function(){wp(e,c,n,r)}),c}function bp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=am(o);a.call(c)}}wp(e,o,t,s)}else o=WV(n,e,t,s,r);return am(o)}ZI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ou(e.pendingLanes);n!==0&&(Dx(e,n|1),Kn(e,Pt()),!(Ye&6)&&(Bl=Pt()+500,To()))}break;case 13:ha(function(){var r=ri(t,1);if(r!==null){var s=An();Kr(r,t,1,s)}}),h0(t,1)}};jx=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=An();Kr(e,t,134217728,n)}h0(t,134217728)}};JI=function(t){if(t.tag===13){var e=Xi(t),n=ri(t,e);if(n!==null){var r=An();Kr(n,t,e,r)}h0(t,e)}};ek=function(){return ot};tk=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};Iy=function(t,e,n){switch(e){case"input":if(xy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hp(r);if(!s)throw Error(Y(90));RI(r),xy(r,s)}}}break;case"textarea":jI(t,n);break;case"select":e=n.value,e!=null&&fl(t,!!n.multiple,e,!1)}};$I=a0;zI=ha;var HV={usingClientEntryPoint:!1,Events:[Cd,sl,hp,FI,UI,a0]},Jc={findFiberByHostInstance:qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qV={bundleType:Jc.bundleType,version:Jc.version,rendererPackageName:Jc.rendererPackageName,rendererConfig:Jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=HI(t),t===null?null:t.stateNode},findFiberByHostInstance:Jc.findFiberByHostInstance||BV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{lp=Uh.inject(qV),vs=Uh}catch{}}vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HV;vr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m0(e))throw Error(Y(200));return zV(t,e,null,n)};vr.createRoot=function(t,e){if(!m0(t))throw Error(Y(299));var n=!1,r="",s=EN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=d0(t,1,!1,null,null,n,!1,r,s),t[ni]=e.current,Wu(t.nodeType===8?t.parentNode:t),new f0(e)};vr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=HI(e),t=t===null?null:t.stateNode,t};vr.flushSync=function(t){return ha(t)};vr.hydrate=function(t,e,n){if(!_p(e))throw Error(Y(200));return bp(null,t,e,!0,n)};vr.hydrateRoot=function(t,e,n){if(!m0(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=EN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bN(e,null,t,1,n??null,s,!1,i,o),t[ni]=e.current,Wu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new xp(e)};vr.render=function(t,e,n){if(!_p(e))throw Error(Y(200));return bp(null,t,e,!1,n)};vr.unmountComponentAtNode=function(t){if(!_p(t))throw Error(Y(40));return t._reactRootContainer?(ha(function(){bp(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};vr.unstable_batchedUpdates=a0;vr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_p(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return bp(t,e,n,!1,r)};vr.version="18.3.1-next-f1338f8080-20240426";function TN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TN)}catch(t){console.error(t)}}TN(),TI.exports=vr;var mc=TI.exports;const GV=hI(mc);var SN,I1=mc;SN=I1.createRoot,I1.hydrateRoot;function KV(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var CN={exports:{}},IN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wl=p;function YV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QV=typeof Object.is=="function"?Object.is:YV,XV=Wl.useState,ZV=Wl.useEffect,JV=Wl.useLayoutEffect,eF=Wl.useDebugValue;function tF(t,e){var n=e(),r=XV({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return JV(function(){s.value=n,s.getSnapshot=e,Cv(s)&&i({inst:s})},[t,n,e]),ZV(function(){return Cv(s)&&i({inst:s}),t(function(){Cv(s)&&i({inst:s})})},[t]),eF(n),n}function Cv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!QV(t,n)}catch{return!0}}function nF(t,e){return e()}var rF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?nF:tF;IN.useSyncExternalStore=Wl.useSyncExternalStore!==void 0?Wl.useSyncExternalStore:rF;CN.exports=IN;var sF=CN.exports;const iF=Tx.useInsertionEffect,oF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kN=oF?p.useLayoutEffect:p.useEffect,aF=iF||kN,p0=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return aF(()=>{e[0]=t}),e[1]},lF="popstate",g0="pushState",v0="replaceState",cF="hashchange",k1=[lF,g0,v0,cF],uF=t=>{for(const e of k1)addEventListener(e,t);return()=>{for(const e of k1)removeEventListener(e,t)}},NN=(t,e)=>sF.useSyncExternalStore(uF,t,e),dF=()=>location.search,hF=({ssrSearch:t=""}={})=>NN(dF,()=>t),N1=()=>location.pathname,fF=({ssrPath:t}={})=>NN(N1,t?()=>t:N1),mF=(t,{replace:e=!1,state:n=null}={})=>history[e?v0:g0](n,"",t),pF=(t={})=>[fF(t),mF],A1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[A1]>"u"){for(const t of[g0,v0]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,A1,{value:!0})}const gF=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",AN=(t="")=>t==="/"?"":t,vF=(t,e)=>t[0]==="~"?t.slice(1):AN(e)+t,yF=(t="",e)=>gF(P1(AN(t)),P1(e)),P1=t=>{try{return decodeURI(t)}catch{return t}},PN={hook:pF,searchHook:hF,parser:KV,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},RN=p.createContext(PN),pc=()=>p.useContext(RN),DN={},jN=p.createContext(DN),wF=()=>p.useContext(jN),kd=t=>{const[e,n]=t.hook(t);return[yF(t.base,e),p0((r,s)=>n(vF(r,t.base),s))]},MN=()=>kd(pc()),ON=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...c]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,m)=>[f,c[m]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[a]:[]]:[!1,null]},LN=({children:t,...e})=>{var h,f;const n=pc(),r=e.hook?PN:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=p.useRef({}),c=a.current,u=c;for(let m in r){const v=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===u&&v!==u[m]&&(a.current=u={...u}),u[m]=v,(v!==r[m]||v!==s[m])&&(s=u)}return p.createElement(RN.Provider,{value:s,children:t})},R1=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,xF=t=>{let e=p.useRef(DN);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,s])=>s!==n[r])?t:n},dl=({path:t,nest:e,match:n,...r})=>{const s=pc(),[i]=kd(s),[o,a,c]=n??ON(s.parser,t,i,e),u=xF({...wF(),...a});if(!o)return null;const h=c?p.createElement(LN,{base:c},R1(r,u)):R1(r,u);return p.createElement(jN.Provider,{value:u,children:h})},vf=p.forwardRef((t,e)=>{const n=pc(),[r,s]=kd(n),{to:i="",href:o=i,onClick:a,asChild:c,children:u,className:h,replace:f,state:m,...v}=t,b=p0(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(a==null||a(x),x.defaultPrevented||(x.preventDefault(),s(o,t)))}),w=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&p.isValidElement(u)?p.cloneElement(u,{onClick:b,href:w}):p.createElement("a",{...v,onClick:b,href:w,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),VN=t=>Array.isArray(t)?t.flatMap(e=>VN(e&&e.type===p.Fragment?e.props.children:e)):[t],FN=({children:t,location:e})=>{const n=pc(),[r]=kd(n);for(const s of VN(t)){let i=0;if(p.isValidElement(s)&&(i=ON(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:i})}return null},_F=t=>{const{to:e,href:n=e}=t,r=pc(),[,s]=kd(r),i=p0(()=>s(e||n,t)),{ssrContext:o}=r;return kN(()=>{i()},[]),o&&(o.redirectTo=e),null};var Ep=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Tp=typeof window>"u"||"Deno"in globalThis;function Lr(){}function bF(t,e){return typeof t=="function"?t(e):t}function EF(t){return typeof t=="number"&&t>=0&&t!==1/0}function TF(t,e){return Math.max(t+(e||0)-Date.now(),0)}function ow(t,e){return typeof t=="function"?t(e):t}function SF(t,e){return typeof t=="function"?t(e):t}function D1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==y0(o,e.options))return!1}else if(!ed(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function j1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ju(e.options.mutationKey)!==Ju(i))return!1}else if(!ed(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function y0(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ju)(t)}function Ju(t){return JSON.stringify(t,(e,n)=>aw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ed(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>ed(t[n],e[n])):!1}function UN(t,e){if(t===e)return t;const n=M1(t)&&M1(e);if(n||aw(t)&&aw(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let u=0;for(let h=0;h<o;h++){const f=n?h:i[h];(!n&&c.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(a[f]=void 0,u++):(a[f]=UN(t[f],e[f]),a[f]===t[f]&&t[f]!==void 0&&u++)}return s===o&&u===s?t:a}return e}function M1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function aw(t){if(!O1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!O1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function O1(t){return Object.prototype.toString.call(t)==="[object Object]"}function CF(t){return new Promise(e=>{setTimeout(e,t)})}function IF(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?UN(t,e):e}function kF(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function NF(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var w0=Symbol();function $N(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===w0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Zo,Oi,kl,sI,AF=(sI=class extends Ep{constructor(){super();Ze(this,Zo);Ze(this,Oi);Ze(this,kl);Fe(this,kl,e=>{if(!Tp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){B(this,Oi)||this.setEventListener(B(this,kl))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,Oi))==null||e.call(this),Fe(this,Oi,void 0))}setEventListener(e){var n;Fe(this,kl,e),(n=B(this,Oi))==null||n.call(this),Fe(this,Oi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){B(this,Zo)!==e&&(Fe(this,Zo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof B(this,Zo)=="boolean"?B(this,Zo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Zo=new WeakMap,Oi=new WeakMap,kl=new WeakMap,sI),zN=new AF,Nl,Li,Al,iI,PF=(iI=class extends Ep{constructor(){super();Ze(this,Nl,!0);Ze(this,Li);Ze(this,Al);Fe(this,Al,e=>{if(!Tp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){B(this,Li)||this.setEventListener(B(this,Al))}onUnsubscribe(){var e;this.hasListeners()||((e=B(this,Li))==null||e.call(this),Fe(this,Li,void 0))}setEventListener(e){var n;Fe(this,Al,e),(n=B(this,Li))==null||n.call(this),Fe(this,Li,e(this.setOnline.bind(this)))}setOnline(e){B(this,Nl)!==e&&(Fe(this,Nl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return B(this,Nl)}},Nl=new WeakMap,Li=new WeakMap,Al=new WeakMap,iI),lm=new PF;function RF(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function DF(t){return Math.min(1e3*2**t,3e4)}function BN(t){return(t??"online")==="online"?lm.isOnline():!0}var WN=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Iv(t){return t instanceof WN}function HN(t){let e=!1,n=0,r=!1,s;const i=RF(),o=w=>{var x;r||(m(new WN(w)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>zN.isFocused()&&(t.networkMode==="always"||lm.isOnline())&&t.canRun(),h=()=>BN(t.networkMode)&&t.canRun(),f=w=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,w),s==null||s(),i.resolve(w))},m=w=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,w),s==null||s(),i.reject(w))},v=()=>new Promise(w=>{var x;s=_=>{(r||u())&&w(_)},(x=t.onPause)==null||x.call(t)}).then(()=>{var w;s=void 0,r||(w=t.onContinue)==null||w.call(t)}),b=()=>{if(r)return;let w;const x=n===0?t.initialPromise:void 0;try{w=x??t.fn()}catch(_){w=Promise.reject(_)}Promise.resolve(w).then(f).catch(_=>{var M;if(r)return;const y=t.retry??(Tp?0:3),T=t.retryDelay??DF,N=typeof T=="function"?T(n,_):T,j=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,_);if(e||!j){m(_);return}n++,(M=t.onFail)==null||M.call(t,n,_),CF(N).then(()=>u()?void 0:v()).then(()=>{e?m(_):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?b():v().then(b),i)}}var jF=t=>setTimeout(t,0);function MF(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=jF;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Nn=MF(),Jo,oI,qN=(oI=class{constructor(){Ze(this,Jo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),EF(this.gcTime)&&Fe(this,Jo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Tp?1/0:5*60*1e3))}clearGcTimeout(){B(this,Jo)&&(clearTimeout(B(this,Jo)),Fe(this,Jo,void 0))}},Jo=new WeakMap,oI),Pl,Rl,xr,ea,pn,_d,ta,Vr,Vs,aI,OF=(aI=class extends qN{constructor(n){super();Ze(this,Vr);Ze(this,Pl);Ze(this,Rl);Ze(this,xr);Ze(this,ea);Ze(this,pn);Ze(this,_d);Ze(this,ta);Fe(this,ta,!1),Fe(this,_d,n.defaultOptions),this.setOptions(n.options),this.observers=[],Fe(this,ea,n.client),Fe(this,xr,B(this,ea).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Fe(this,Pl,VF(this.options)),this.state=n.state??B(this,Pl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=B(this,pn))==null?void 0:n.promise}setOptions(n){this.options={...B(this,_d),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&B(this,xr).remove(this)}setData(n,r){const s=IF(this.state.data,n,this.options);return dn(this,Vr,Vs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){dn(this,Vr,Vs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=B(this,pn))==null?void 0:s.promise;return(i=B(this,pn))==null||i.cancel(n),r?r.then(Lr).catch(Lr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(B(this,Pl))}isActive(){return this.observers.some(n=>SF(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>ow(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!TF(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=B(this,pn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=B(this,pn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),B(this,xr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(B(this,pn)&&(B(this,ta)?B(this,pn).cancel({revert:!0}):B(this,pn).cancelRetry()),this.scheduleGc()),B(this,xr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||dn(this,Vr,Vs).call(this,{type:"invalidate"})}fetch(n,r){var h,f,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(B(this,pn))return B(this,pn).continueRetry(),B(this,pn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const v=this.observers.find(b=>b.options.queryFn);v&&this.setOptions(v.options)}const s=new AbortController,i=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(Fe(this,ta,!0),s.signal)})},o=()=>{const v=$N(this.options,r),w=(()=>{const x={client:B(this,ea),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return Fe(this,ta,!1),this.options.persister?this.options.persister(v,w,this):v(w)},c=(()=>{const v={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:B(this,ea),state:this.state,fetchFn:o};return i(v),v})();(h=this.options.behavior)==null||h.onFetch(c,this),Fe(this,Rl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&dn(this,Vr,Vs).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta});const u=v=>{var b,w,x,_;Iv(v)&&v.silent||dn(this,Vr,Vs).call(this,{type:"error",error:v}),Iv(v)||((w=(b=B(this,xr).config).onError)==null||w.call(b,v,this),(_=(x=B(this,xr).config).onSettled)==null||_.call(x,this.state.data,v,this)),this.scheduleGc()};return Fe(this,pn,HN({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:v=>{var b,w,x,_;if(v===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(v)}catch(y){u(y);return}(w=(b=B(this,xr).config).onSuccess)==null||w.call(b,v,this),(_=(x=B(this,xr).config).onSettled)==null||_.call(x,v,this.state.error,this),this.scheduleGc()},onError:u,onFail:(v,b)=>{dn(this,Vr,Vs).call(this,{type:"failed",failureCount:v,error:b})},onPause:()=>{dn(this,Vr,Vs).call(this,{type:"pause"})},onContinue:()=>{dn(this,Vr,Vs).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),B(this,pn).start()}},Pl=new WeakMap,Rl=new WeakMap,xr=new WeakMap,ea=new WeakMap,pn=new WeakMap,_d=new WeakMap,ta=new WeakMap,Vr=new WeakSet,Vs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...LF(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Iv(i)&&i.revert&&B(this,Rl)?{...B(this,Rl),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Nn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),B(this,xr).notify({query:this,type:"updated",action:n})})},aI);function LF(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:BN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function VF(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var as,lI,FF=(lI=class extends Ep{constructor(e={}){super();Ze(this,as);this.config=e,Fe(this,as,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??y0(s,n);let o=this.get(i);return o||(o=new OF({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){B(this,as).has(e.queryHash)||(B(this,as).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=B(this,as).get(e.queryHash);n&&(e.destroy(),n===e&&B(this,as).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Nn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return B(this,as).get(e)}getAll(){return[...B(this,as).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>D1(e,r)):n}notify(e){Nn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Nn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Nn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},as=new WeakMap,lI),ls,Cn,na,cs,Ti,cI,UF=(cI=class extends qN{constructor(n){super();Ze(this,cs);Ze(this,ls);Ze(this,Cn);Ze(this,na);this.mutationId=n.mutationId,Fe(this,Cn,n.mutationCache),Fe(this,ls,[]),this.state=n.state||$F(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){B(this,ls).includes(n)||(B(this,ls).push(n),this.clearGcTimeout(),B(this,Cn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Fe(this,ls,B(this,ls).filter(r=>r!==n)),this.scheduleGc(),B(this,Cn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){B(this,ls).length||(this.state.status==="pending"?this.scheduleGc():B(this,Cn).remove(this))}continue(){var n;return((n=B(this,na))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,c,u,h,f,m,v,b,w,x,_,y,T,N,j,M,C,k,R;const r=()=>{dn(this,cs,Ti).call(this,{type:"continue"})};Fe(this,na,HN({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(I,S)=>{dn(this,cs,Ti).call(this,{type:"failed",failureCount:I,error:S})},onPause:()=>{dn(this,cs,Ti).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>B(this,Cn).canRun(this)}));const s=this.state.status==="pending",i=!B(this,na).canStart();try{if(s)r();else{dn(this,cs,Ti).call(this,{type:"pending",variables:n,isPaused:i}),await((a=(o=B(this,Cn).config).onMutate)==null?void 0:a.call(o,n,this));const S=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));S!==this.state.context&&dn(this,cs,Ti).call(this,{type:"pending",context:S,variables:n,isPaused:i})}const I=await B(this,na).start();return await((f=(h=B(this,Cn).config).onSuccess)==null?void 0:f.call(h,I,n,this.state.context,this)),await((v=(m=this.options).onSuccess)==null?void 0:v.call(m,I,n,this.state.context)),await((w=(b=B(this,Cn).config).onSettled)==null?void 0:w.call(b,I,null,this.state.variables,this.state.context,this)),await((_=(x=this.options).onSettled)==null?void 0:_.call(x,I,null,n,this.state.context)),dn(this,cs,Ti).call(this,{type:"success",data:I}),I}catch(I){try{throw await((T=(y=B(this,Cn).config).onError)==null?void 0:T.call(y,I,n,this.state.context,this)),await((j=(N=this.options).onError)==null?void 0:j.call(N,I,n,this.state.context)),await((C=(M=B(this,Cn).config).onSettled)==null?void 0:C.call(M,void 0,I,this.state.variables,this.state.context,this)),await((R=(k=this.options).onSettled)==null?void 0:R.call(k,void 0,I,n,this.state.context)),I}finally{dn(this,cs,Ti).call(this,{type:"error",error:I})}}finally{B(this,Cn).runNext(this)}}},ls=new WeakMap,Cn=new WeakMap,na=new WeakMap,cs=new WeakSet,Ti=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Nn.batch(()=>{B(this,ls).forEach(s=>{s.onMutationUpdate(n)}),B(this,Cn).notify({mutation:this,type:"updated",action:n})})},cI);function $F(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hs,Fr,bd,uI,zF=(uI=class extends Ep{constructor(e={}){super();Ze(this,Hs);Ze(this,Fr);Ze(this,bd);this.config=e,Fe(this,Hs,new Set),Fe(this,Fr,new Map),Fe(this,bd,0)}build(e,n,r){const s=new UF({mutationCache:this,mutationId:++Eh(this,bd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){B(this,Hs).add(e);const n=$h(e);if(typeof n=="string"){const r=B(this,Fr).get(n);r?r.push(e):B(this,Fr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(B(this,Hs).delete(e)){const n=$h(e);if(typeof n=="string"){const r=B(this,Fr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&B(this,Fr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=$h(e);if(typeof n=="string"){const r=B(this,Fr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=$h(e);if(typeof n=="string"){const s=(r=B(this,Fr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Nn.batch(()=>{B(this,Hs).forEach(e=>{this.notify({type:"removed",mutation:e})}),B(this,Hs).clear(),B(this,Fr).clear()})}getAll(){return Array.from(B(this,Hs))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>j1(n,r))}findAll(e={}){return this.getAll().filter(n=>j1(e,n))}notify(e){Nn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Nn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Lr))))}},Hs=new WeakMap,Fr=new WeakMap,bd=new WeakMap,uI);function $h(t){var e;return(e=t.options.scope)==null?void 0:e.id}function L1(t){return{onFetch:(e,n)=>{var h,f,m,v,b;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let w=!1;const x=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},_=$N(e.options,e.fetchOptions),y=async(T,N,j)=>{if(w)return Promise.reject();if(N==null&&T.pages.length)return Promise.resolve(T);const C=(()=>{const S={client:e.client,queryKey:e.queryKey,pageParam:N,direction:j?"backward":"forward",meta:e.options.meta};return x(S),S})(),k=await _(C),{maxPages:R}=e.options,I=j?NF:kF;return{pages:I(T.pages,k,R),pageParams:I(T.pageParams,N,R)}};if(s&&i.length){const T=s==="backward",N=T?BF:V1,j={pages:i,pageParams:o},M=N(r,j);a=await y(j,M,T)}else{const T=t??i.length;do{const N=c===0?o[0]??r.initialPageParam:V1(r,a);if(c>0&&N==null)break;a=await y(a,N),c++}while(c<T)}return a};e.options.persister?e.fetchFn=()=>{var w,x;return(x=(w=e.options).persister)==null?void 0:x.call(w,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function V1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function BF(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ct,Vi,Fi,Dl,jl,Ui,Ml,Ol,dI,WF=(dI=class{constructor(t={}){Ze(this,Ct);Ze(this,Vi);Ze(this,Fi);Ze(this,Dl);Ze(this,jl);Ze(this,Ui);Ze(this,Ml);Ze(this,Ol);Fe(this,Ct,t.queryCache||new FF),Fe(this,Vi,t.mutationCache||new zF),Fe(this,Fi,t.defaultOptions||{}),Fe(this,Dl,new Map),Fe(this,jl,new Map),Fe(this,Ui,0)}mount(){Eh(this,Ui)._++,B(this,Ui)===1&&(Fe(this,Ml,zN.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,Ct).onFocus())})),Fe(this,Ol,lm.subscribe(async t=>{t&&(await this.resumePausedMutations(),B(this,Ct).onOnline())})))}unmount(){var t,e;Eh(this,Ui)._--,B(this,Ui)===0&&((t=B(this,Ml))==null||t.call(this),Fe(this,Ml,void 0),(e=B(this,Ol))==null||e.call(this),Fe(this,Ol,void 0))}isFetching(t){return B(this,Ct).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return B(this,Vi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=B(this,Ct).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=B(this,Ct).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(ow(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return B(this,Ct).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=B(this,Ct).get(r.queryHash),i=s==null?void 0:s.state.data,o=bF(e,i);if(o!==void 0)return B(this,Ct).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Nn.batch(()=>B(this,Ct).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=B(this,Ct).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=B(this,Ct);Nn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=B(this,Ct);return Nn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Nn.batch(()=>B(this,Ct).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Lr).catch(Lr)}invalidateQueries(t,e={}){return Nn.batch(()=>(B(this,Ct).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Nn.batch(()=>B(this,Ct).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Lr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Lr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=B(this,Ct).build(this,e);return n.isStaleByTime(ow(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Lr).catch(Lr)}fetchInfiniteQuery(t){return t.behavior=L1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Lr).catch(Lr)}ensureInfiniteQueryData(t){return t.behavior=L1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return lm.isOnline()?B(this,Vi).resumePausedMutations():Promise.resolve()}getQueryCache(){return B(this,Ct)}getMutationCache(){return B(this,Vi)}getDefaultOptions(){return B(this,Fi)}setDefaultOptions(t){Fe(this,Fi,t)}setQueryDefaults(t,e){B(this,Dl).set(Ju(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...B(this,Dl).values()],n={};return e.forEach(r=>{ed(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){B(this,jl).set(Ju(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...B(this,jl).values()],n={};return e.forEach(r=>{ed(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...B(this,Fi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=y0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===w0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...B(this,Fi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){B(this,Ct).clear(),B(this,Vi).clear()}},Ct=new WeakMap,Vi=new WeakMap,Fi=new WeakMap,Dl=new WeakMap,jl=new WeakMap,Ui=new WeakMap,Ml=new WeakMap,Ol=new WeakMap,dI),HF=p.createContext(void 0),qF=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(HF.Provider,{value:t,children:e}));async function GF(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const KF=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return await GF(n),await n.json()},YF=new WF({defaultOptions:{queries:{queryFn:KF({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});function ie(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function F1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Sp(...t){return e=>{let n=!1;const r=t.map(s=>{const i=F1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():F1(t[s],null)}}}}function $e(...t){return p.useCallback(Sp(...t),t)}function QF(t,e){const n=p.createContext(e),r=i=>{const{children:o,...a}=i,c=p.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Nr(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:m,children:v,...b}=f,w=((_=m==null?void 0:m[t])==null?void 0:_[c])||a,x=p.useMemo(()=>b,Object.values(b));return l.jsx(w.Provider,{value:x,children:v})};u.displayName=i+"Provider";function h(f,m){var w;const v=((w=m==null?void 0:m[t])==null?void 0:w[c])||a,b=p.useContext(v);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,XF(s,...e)]}function XF(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function oo(t){const e=ZF(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),c=a.find(JF);if(c){const u=c.props.children,h=a.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return l.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return l.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var GN=oo("Slot");function ZF(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=t3(s),a=e3(i,s.props);return s.type!==p.Fragment&&(a.ref=r?Sp(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var KN=Symbol("radix.slottable");function YN(t){const e=({children:n})=>l.jsx(l.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=KN,e}function JF(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===KN}function e3(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function t3(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var n3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ne=n3.reduce((t,e)=>{const n=oo(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function QN(t,e){t&&mc.flushSync(()=>t.dispatchEvent(e))}function nn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function r3(t,e=globalThis==null?void 0:globalThis.document){const n=nn(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var s3="DismissableLayer",lw="dismissableLayer.update",i3="dismissableLayer.pointerDownOutside",o3="dismissableLayer.focusOutside",U1,XN=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gc=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=p.useContext(XN),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=p.useState({}),b=$e(e,C=>f(C)),w=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=w.indexOf(x),y=h?w.indexOf(h):-1,T=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=_,j=c3(C=>{const k=C.target,R=[...u.branches].some(I=>I.contains(k));!N||R||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},m),M=u3(C=>{const k=C.target;[...u.branches].some(I=>I.contains(k))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},m);return r3(C=>{y===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},m),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(U1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),$1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=U1)}},[h,m,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),$1())},[h,u]),p.useEffect(()=>{const C=()=>v({});return document.addEventListener(lw,C),()=>document.removeEventListener(lw,C)},[]),l.jsx(Ne.div,{...c,ref:b,style:{pointerEvents:T?N?"auto":"none":void 0,...t.style},onFocusCapture:ie(t.onFocusCapture,M.onFocusCapture),onBlurCapture:ie(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:ie(t.onPointerDownCapture,j.onPointerDownCapture)})});gc.displayName=s3;var a3="DismissableLayerBranch",l3=p.forwardRef((t,e)=>{const n=p.useContext(XN),r=p.useRef(null),s=$e(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(Ne.div,{...t,ref:s})});l3.displayName=a3;function c3(t,e=globalThis==null?void 0:globalThis.document){const n=nn(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){ZN(i3,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function u3(t,e=globalThis==null?void 0:globalThis.document){const n=nn(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&ZN(o3,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $1(){const t=new CustomEvent(lw);document.dispatchEvent(t)}function ZN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?QN(s,i):s.dispatchEvent(i)}var an=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},d3=Tx[" useId ".trim().toString()]||(()=>{}),h3=0;function Yr(t){const[e,n]=p.useState(d3());return an(()=>{n(r=>r??String(h3++))},[t]),e?`radix-${e}`:""}const f3=["top","right","bottom","left"],ao=Math.min,nr=Math.max,cm=Math.round,zh=Math.floor,ws=t=>({x:t,y:t}),m3={left:"right",right:"left",bottom:"top",top:"bottom"},p3={start:"end",end:"start"};function cw(t,e,n){return nr(t,ao(e,n))}function ii(t,e){return typeof t=="function"?t(e):t}function oi(t){return t.split("-")[0]}function vc(t){return t.split("-")[1]}function x0(t){return t==="x"?"y":"x"}function _0(t){return t==="y"?"height":"width"}function ms(t){return["top","bottom"].includes(oi(t))?"y":"x"}function b0(t){return x0(ms(t))}function g3(t,e,n){n===void 0&&(n=!1);const r=vc(t),s=b0(t),i=_0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=um(o)),[o,um(o)]}function v3(t){const e=um(t);return[uw(t),e,uw(e)]}function uw(t){return t.replace(/start|end/g,e=>p3[e])}function y3(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function w3(t,e,n,r){const s=vc(t);let i=y3(oi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(uw)))),i}function um(t){return t.replace(/left|right|bottom|top/g,e=>m3[e])}function x3(t){return{top:0,right:0,bottom:0,left:0,...t}}function JN(t){return typeof t!="number"?x3(t):{top:t,right:t,bottom:t,left:t}}function dm(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function z1(t,e,n){let{reference:r,floating:s}=t;const i=ms(e),o=b0(e),a=_0(o),c=oi(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let v;switch(c){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(vc(e)){case"start":v[o]-=m*(n&&u?-1:1);break;case"end":v[o]+=m*(n&&u?-1:1);break}return v}const _3=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=z1(u,r,c),m=r,v={},b=0;for(let w=0;w<a.length;w++){const{name:x,fn:_}=a[w],{x:y,y:T,data:N,reset:j}=await _({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});h=y??h,f=T??f,v={...v,[x]:{...v[x],...N}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:h,y:f}=z1(u,m,c)),w=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:v}};async function td(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=ii(e,t),b=JN(v),x=a[m?f==="floating"?"reference":"floating":f],_=dm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:c})),y=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),N=await(i.isElement==null?void 0:i.isElement(T))?await(i.getScale==null?void 0:i.getScale(T))||{x:1,y:1}:{x:1,y:1},j=dm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:T,strategy:c}):y);return{top:(_.top-j.top+b.top)/N.y,bottom:(j.bottom-_.bottom+b.bottom)/N.y,left:(_.left-j.left+b.left)/N.x,right:(j.right-_.right+b.right)/N.x}}const b3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:h=0}=ii(t,e)||{};if(u==null)return{};const f=JN(h),m={x:n,y:r},v=b0(s),b=_0(v),w=await o.getDimensions(u),x=v==="y",_=x?"top":"left",y=x?"bottom":"right",T=x?"clientHeight":"clientWidth",N=i.reference[b]+i.reference[v]-m[v]-i.floating[b],j=m[v]-i.reference[v],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=M?M[T]:0;(!C||!await(o.isElement==null?void 0:o.isElement(M)))&&(C=a.floating[T]||i.floating[b]);const k=N/2-j/2,R=C/2-w[b]/2-1,I=ao(f[_],R),S=ao(f[y],R),P=I,A=C-w[b]-S,W=C/2-w[b]/2+k,Q=cw(P,W,A),J=!c.arrow&&vc(s)!=null&&W!==Q&&i.reference[b]/2-(W<P?I:S)-w[b]/2<0,H=J?W<P?W-P:W-A:0;return{[v]:m[v]+H,data:{[v]:Q,centerOffset:W-Q-H,...J&&{alignmentOffset:H}},reset:J}}}),E3=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:w=!0,...x}=ii(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=oi(s),y=ms(a),T=oi(a)===a,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(T||!w?[um(a)]:v3(a)),M=b!=="none";!m&&M&&j.push(...w3(a,w,b,N));const C=[a,...j],k=await td(e,x),R=[];let I=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&R.push(k[_]),f){const W=g3(s,o,N);R.push(k[W[0]],k[W[1]])}if(I=[...I,{placement:s,overflows:R}],!R.every(W=>W<=0)){var S,P;const W=(((S=i.flip)==null?void 0:S.index)||0)+1,Q=C[W];if(Q&&(!(f==="alignment"?y!==ms(Q):!1)||I.every(O=>O.overflows[0]>0&&ms(O.placement)===y)))return{data:{index:W,overflows:I},reset:{placement:Q}};let J=(P=I.filter(H=>H.overflows[0]<=0).sort((H,O)=>H.overflows[1]-O.overflows[1])[0])==null?void 0:P.placement;if(!J)switch(v){case"bestFit":{var A;const H=(A=I.filter(O=>{if(M){const F=ms(O.placement);return F===y||F==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,X)=>F+X,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:A[0];H&&(J=H);break}case"initialPlacement":J=a;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function B1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function W1(t){return f3.some(e=>t[e]>=0)}const T3=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ii(t,e);switch(r){case"referenceHidden":{const i=await td(e,{...s,elementContext:"reference"}),o=B1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:W1(o)}}}case"escaped":{const i=await td(e,{...s,altBoundary:!0}),o=B1(i,n.floating);return{data:{escapedOffsets:o,escaped:W1(o)}}}default:return{}}}}};async function S3(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=oi(n),a=vc(n),c=ms(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=ii(e,t);let{mainAxis:m,crossAxis:v,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof b=="number"&&(v=a==="end"?b*-1:b),c?{x:v*h,y:m*u}:{x:m*u,y:v*h}}const C3=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await S3(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},I3=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:_,y}=x;return{x:_,y}}},...c}=ii(t,e),u={x:n,y:r},h=await td(e,c),f=ms(oi(s)),m=x0(f);let v=u[m],b=u[f];if(i){const x=m==="y"?"top":"left",_=m==="y"?"bottom":"right",y=v+h[x],T=v-h[_];v=cw(y,v,T)}if(o){const x=f==="y"?"top":"left",_=f==="y"?"bottom":"right",y=b+h[x],T=b-h[_];b=cw(y,b,T)}const w=a.fn({...e,[m]:v,[f]:b});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:i,[f]:o}}}}}},k3=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=ii(t,e),h={x:n,y:r},f=ms(s),m=x0(f);let v=h[m],b=h[f];const w=ii(a,e),x=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const T=m==="y"?"height":"width",N=i.reference[m]-i.floating[T]+x.mainAxis,j=i.reference[m]+i.reference[T]-x.mainAxis;v<N?v=N:v>j&&(v=j)}if(u){var _,y;const T=m==="y"?"width":"height",N=["top","left"].includes(oi(s)),j=i.reference[f]-i.floating[T]+(N&&((_=o.offset)==null?void 0:_[f])||0)+(N?0:x.crossAxis),M=i.reference[f]+i.reference[T]+(N?0:((y=o.offset)==null?void 0:y[f])||0)-(N?x.crossAxis:0);b<j?b=j:b>M&&(b=M)}return{[m]:v,[f]:b}}}},N3=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=ii(t,e),h=await td(e,u),f=oi(s),m=vc(s),v=ms(s)==="y",{width:b,height:w}=i.floating;let x,_;f==="top"||f==="bottom"?(x=f,_=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(_=f,x=m==="end"?"top":"bottom");const y=w-h.top-h.bottom,T=b-h.left-h.right,N=ao(w-h[x],y),j=ao(b-h[_],T),M=!e.middlewareData.shift;let C=N,k=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(k=T),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=y),M&&!m){const I=nr(h.left,0),S=nr(h.right,0),P=nr(h.top,0),A=nr(h.bottom,0);v?k=b-2*(I!==0||S!==0?I+S:nr(h.left,h.right)):C=w-2*(P!==0||A!==0?P+A:nr(h.top,h.bottom))}await c({...e,availableWidth:k,availableHeight:C});const R=await o.getDimensions(a.floating);return b!==R.width||w!==R.height?{reset:{rects:!0}}:{}}}};function Cp(){return typeof window<"u"}function yc(t){return eA(t)?(t.nodeName||"").toLowerCase():"#document"}function cr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ns(t){var e;return(e=(eA(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function eA(t){return Cp()?t instanceof Node||t instanceof cr(t).Node:!1}function Zr(t){return Cp()?t instanceof Element||t instanceof cr(t).Element:!1}function Ss(t){return Cp()?t instanceof HTMLElement||t instanceof cr(t).HTMLElement:!1}function H1(t){return!Cp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof cr(t).ShadowRoot}function Nd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Jr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function A3(t){return["table","td","th"].includes(yc(t))}function Ip(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function E0(t){const e=T0(),n=Zr(t)?Jr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function P3(t){let e=lo(t);for(;Ss(e)&&!Hl(e);){if(E0(e))return e;if(Ip(e))return null;e=lo(e)}return null}function T0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Hl(t){return["html","body","#document"].includes(yc(t))}function Jr(t){return cr(t).getComputedStyle(t)}function kp(t){return Zr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function lo(t){if(yc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||H1(t)&&t.host||Ns(t);return H1(e)?e.host:e}function tA(t){const e=lo(t);return Hl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ss(e)&&Nd(e)?e:tA(e)}function nd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=tA(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=cr(s);if(i){const a=dw(o);return e.concat(o,o.visualViewport||[],Nd(s)?s:[],a&&n?nd(a):[])}return e.concat(s,nd(s,[],n))}function dw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function nA(t){const e=Jr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ss(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=cm(n)!==i||cm(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function S0(t){return Zr(t)?t:t.contextElement}function wl(t){const e=S0(t);if(!Ss(e))return ws(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=nA(e);let o=(i?cm(n.width):n.width)/r,a=(i?cm(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const R3=ws(0);function rA(t){const e=cr(t);return!T0()||!e.visualViewport?R3:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function D3(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==cr(t)?!1:e}function fa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=S0(t);let o=ws(1);e&&(r?Zr(r)&&(o=wl(r)):o=wl(t));const a=D3(i,n,r)?rA(i):ws(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=cr(i),v=r&&Zr(r)?cr(r):r;let b=m,w=dw(b);for(;w&&r&&v!==b;){const x=wl(w),_=w.getBoundingClientRect(),y=Jr(w),T=_.left+(w.clientLeft+parseFloat(y.paddingLeft))*x.x,N=_.top+(w.clientTop+parseFloat(y.paddingTop))*x.y;c*=x.x,u*=x.y,h*=x.x,f*=x.y,c+=T,u+=N,b=cr(w),w=dw(b)}}return dm({width:h,height:f,x:c,y:u})}function C0(t,e){const n=kp(t).scrollLeft;return e?e.left+n:fa(Ns(t)).left+n}function sA(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:C0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function j3(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ns(r),a=e?Ip(e.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=ws(1);const h=ws(0),f=Ss(r);if((f||!f&&!i)&&((yc(r)!=="body"||Nd(o))&&(c=kp(r)),Ss(r))){const v=fa(r);u=wl(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const m=o&&!f&&!i?sA(o,c,!0):ws(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function M3(t){return Array.from(t.getClientRects())}function O3(t){const e=Ns(t),n=kp(t),r=t.ownerDocument.body,s=nr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=nr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+C0(t);const a=-n.scrollTop;return Jr(r).direction==="rtl"&&(o+=nr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function L3(t,e){const n=cr(t),r=Ns(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=T0();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function V3(t,e){const n=fa(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ss(t)?wl(t):ws(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function q1(t,e,n){let r;if(e==="viewport")r=L3(t,n);else if(e==="document")r=O3(Ns(t));else if(Zr(e))r=V3(e,n);else{const s=rA(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return dm(r)}function iA(t,e){const n=lo(t);return n===e||!Zr(n)||Hl(n)?!1:Jr(n).position==="fixed"||iA(n,e)}function F3(t,e){const n=e.get(t);if(n)return n;let r=nd(t,[],!1).filter(a=>Zr(a)&&yc(a)!=="body"),s=null;const i=Jr(t).position==="fixed";let o=i?lo(t):t;for(;Zr(o)&&!Hl(o);){const a=Jr(o),c=E0(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Nd(o)&&!c&&iA(t,o))?r=r.filter(h=>h!==o):s=a,o=lo(o)}return e.set(t,r),r}function U3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Ip(e)?[]:F3(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,h)=>{const f=q1(e,h,s);return u.top=nr(f.top,u.top),u.right=ao(f.right,u.right),u.bottom=ao(f.bottom,u.bottom),u.left=nr(f.left,u.left),u},q1(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $3(t){const{width:e,height:n}=nA(t);return{width:e,height:n}}function z3(t,e,n){const r=Ss(e),s=Ns(e),i=n==="fixed",o=fa(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=ws(0);function u(){c.x=C0(s)}if(r||!r&&!i)if((yc(e)!=="body"||Nd(s))&&(a=kp(e)),r){const v=fa(e,!0,i,e);c.x=v.x+e.clientLeft,c.y=v.y+e.clientTop}else s&&u();i&&!r&&s&&u();const h=s&&!r&&!i?sA(s,a):ws(0),f=o.left+a.scrollLeft-c.x-h.x,m=o.top+a.scrollTop-c.y-h.y;return{x:f,y:m,width:o.width,height:o.height}}function kv(t){return Jr(t).position==="static"}function G1(t,e){if(!Ss(t)||Jr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ns(t)===n&&(n=n.ownerDocument.body),n}function oA(t,e){const n=cr(t);if(Ip(t))return n;if(!Ss(t)){let s=lo(t);for(;s&&!Hl(s);){if(Zr(s)&&!kv(s))return s;s=lo(s)}return n}let r=G1(t,e);for(;r&&A3(r)&&kv(r);)r=G1(r,e);return r&&Hl(r)&&kv(r)&&!E0(r)?n:r||P3(t)||n}const B3=async function(t){const e=this.getOffsetParent||oA,n=this.getDimensions,r=await n(t.floating);return{reference:z3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function W3(t){return Jr(t).direction==="rtl"}const H3={convertOffsetParentRelativeRectToViewportRelativeRect:j3,getDocumentElement:Ns,getClippingRect:U3,getOffsetParent:oA,getElementRects:B3,getClientRects:M3,getDimensions:$3,getScale:wl,isElement:Zr,isRTL:W3};function aA(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function q3(t,e){let n=null,r;const s=Ns(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:m,height:v}=u;if(a||e(),!m||!v)return;const b=zh(f),w=zh(s.clientWidth-(h+m)),x=zh(s.clientHeight-(f+v)),_=zh(h),T={rootMargin:-b+"px "+-w+"px "+-x+"px "+-_+"px",threshold:nr(0,ao(1,c))||1};let N=!0;function j(M){const C=M[0].intersectionRatio;if(C!==c){if(!N)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!aA(u,t.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(j,{...T,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,T)}n.observe(t)}return o(!0),i}function G3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=S0(t),h=s||i?[...u?nd(u):[],...nd(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&a?q3(u,n):null;let m=-1,v=null;o&&(v=new ResizeObserver(_=>{let[y]=_;y&&y.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var T;(T=v)==null||T.observe(e)})),n()}),u&&!c&&v.observe(u),v.observe(e));let b,w=c?fa(t):null;c&&x();function x(){const _=fa(t);w&&!aA(w,_)&&n(),w=_,b=requestAnimationFrame(x)}return n(),()=>{var _;h.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),f==null||f(),(_=v)==null||_.disconnect(),v=null,c&&cancelAnimationFrame(b)}}const K3=C3,Y3=I3,Q3=E3,X3=N3,Z3=T3,K1=b3,J3=k3,e5=(t,e,n)=>{const r=new Map,s={platform:H3,...n},i={...s.platform,_c:r};return _3(t,e,{...s,platform:i})};var t5=typeof document<"u",n5=function(){},yf=t5?p.useLayoutEffect:n5;function hm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!hm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function lA(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Y1(t,e){const n=lA(t);return Math.round(e*n)/n}function Nv(t){const e=p.useRef(t);return yf(()=>{e.current=t}),e}function r5(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,v]=p.useState(r);hm(m,r)||v(r);const[b,w]=p.useState(null),[x,_]=p.useState(null),y=p.useCallback(O=>{O!==M.current&&(M.current=O,w(O))},[]),T=p.useCallback(O=>{O!==C.current&&(C.current=O,_(O))},[]),N=i||b,j=o||x,M=p.useRef(null),C=p.useRef(null),k=p.useRef(h),R=c!=null,I=Nv(c),S=Nv(s),P=Nv(u),A=p.useCallback(()=>{if(!M.current||!C.current)return;const O={placement:e,strategy:n,middleware:m};S.current&&(O.platform=S.current),e5(M.current,C.current,O).then(F=>{const X={...F,isPositioned:P.current!==!1};W.current&&!hm(k.current,X)&&(k.current=X,mc.flushSync(()=>{f(X)}))})},[m,e,n,S,P]);yf(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const W=p.useRef(!1);yf(()=>(W.current=!0,()=>{W.current=!1}),[]),yf(()=>{if(N&&(M.current=N),j&&(C.current=j),N&&j){if(I.current)return I.current(N,j,A);A()}},[N,j,A,I,R]);const Q=p.useMemo(()=>({reference:M,floating:C,setReference:y,setFloating:T}),[y,T]),J=p.useMemo(()=>({reference:N,floating:j}),[N,j]),H=p.useMemo(()=>{const O={position:n,left:0,top:0};if(!J.floating)return O;const F=Y1(J.floating,h.x),X=Y1(J.floating,h.y);return a?{...O,transform:"translate("+F+"px, "+X+"px)",...lA(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:X}},[n,a,J.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:A,refs:Q,elements:J,floatingStyles:H}),[h,A,Q,J,H])}const s5=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?K1({element:r.current,padding:s}).fn(n):{}:r?K1({element:r,padding:s}).fn(n):{}}}},i5=(t,e)=>({...K3(t),options:[t,e]}),o5=(t,e)=>({...Y3(t),options:[t,e]}),a5=(t,e)=>({...J3(t),options:[t,e]}),l5=(t,e)=>({...Q3(t),options:[t,e]}),c5=(t,e)=>({...X3(t),options:[t,e]}),u5=(t,e)=>({...Z3(t),options:[t,e]}),d5=(t,e)=>({...s5(t),options:[t,e]});var h5="Arrow",cA=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return l.jsx(Ne.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});cA.displayName=h5;var f5=cA;function uA(t){const[e,n]=p.useState(void 0);return an(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var I0="Popper",[dA,So]=Nr(I0),[m5,hA]=dA(I0),fA=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return l.jsx(m5,{scope:e,anchor:r,onAnchorChange:s,children:n})};fA.displayName=I0;var mA="PopperAnchor",pA=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=hA(mA,n),o=p.useRef(null),a=$e(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:l.jsx(Ne.div,{...s,ref:a})});pA.displayName=mA;var k0="PopperContent",[p5,g5]=dA(k0),gA=p.forwardRef((t,e)=>{var he,te,we,le,Ve,ye;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:v="optimized",onPlaced:b,...w}=t,x=hA(k0,n),[_,y]=p.useState(null),T=$e(e,lt=>y(lt)),[N,j]=p.useState(null),M=uA(N),C=(M==null?void 0:M.width)??0,k=(M==null?void 0:M.height)??0,R=r+(i!=="center"?"-"+i:""),I=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},S=Array.isArray(u)?u:[u],P=S.length>0,A={padding:I,boundary:S.filter(y5),altBoundary:P},{refs:W,floatingStyles:Q,placement:J,isPositioned:H,middlewareData:O}=r5({strategy:"fixed",placement:R,whileElementsMounted:(...lt)=>G3(...lt,{animationFrame:v==="always"}),elements:{reference:x.anchor},middleware:[i5({mainAxis:s+k,alignmentAxis:o}),c&&o5({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?a5():void 0,...A}),c&&l5({...A}),c5({...A,apply:({elements:lt,rects:Vt,availableWidth:Ln,availableHeight:Zn})=>{const{width:wr,height:Do}=Vt.reference,ns=lt.floating.style;ns.setProperty("--radix-popper-available-width",`${Ln}px`),ns.setProperty("--radix-popper-available-height",`${Zn}px`),ns.setProperty("--radix-popper-anchor-width",`${wr}px`),ns.setProperty("--radix-popper-anchor-height",`${Do}px`)}}),N&&d5({element:N,padding:a}),w5({arrowWidth:C,arrowHeight:k}),m&&u5({strategy:"referenceHidden",...A})]}),[F,X]=wA(J),fe=nn(b);an(()=>{H&&(fe==null||fe())},[H,fe]);const G=(he=O.arrow)==null?void 0:he.x,ue=(te=O.arrow)==null?void 0:te.y,ze=((we=O.arrow)==null?void 0:we.centerOffset)!==0,[tt,Oe]=p.useState();return an(()=>{_&&Oe(window.getComputedStyle(_).zIndex)},[_]),l.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:H?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:tt,"--radix-popper-transform-origin":[(le=O.transformOrigin)==null?void 0:le.x,(Ve=O.transformOrigin)==null?void 0:Ve.y].join(" "),...((ye=O.hide)==null?void 0:ye.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(p5,{scope:n,placedSide:F,onArrowChange:j,arrowX:G,arrowY:ue,shouldHideArrow:ze,children:l.jsx(Ne.div,{"data-side":F,"data-align":X,...w,ref:T,style:{...w.style,animation:H?void 0:"none"}})})})});gA.displayName=k0;var vA="PopperArrow",v5={top:"bottom",right:"left",bottom:"top",left:"right"},yA=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=g5(vA,r),o=v5[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(f5,{...s,ref:n,style:{...s.style,display:"block"}})})});yA.displayName=vA;function y5(t){return t!==null}var w5=t=>({name:"transformOrigin",options:t,fn(e){var x,_,y;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=wA(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((_=s.arrow)==null?void 0:_.x)??0)+a/2,v=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let b="",w="";return u==="bottom"?(b=o?f:`${m}px`,w=`${-c}px`):u==="top"?(b=o?f:`${m}px`,w=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,w=o?f:`${v}px`):u==="left"&&(b=`${r.floating.width+c}px`,w=o?f:`${v}px`),{data:{x:b,y:w}}}});function wA(t){const[e,n="center"]=t.split("-");return[e,n]}var Np=fA,Ad=pA,Ap=gA,Pp=yA,x5="Portal",Pd=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);an(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?GV.createPortal(l.jsx(Ne.div,{...r,ref:e}),o):null});Pd.displayName=x5;function _5(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var jn=t=>{const{present:e,children:n}=t,r=b5(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=$e(r.ref,E5(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};jn.displayName="Presence";function b5(t){const[e,n]=p.useState(),r=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,c]=_5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Bh(r.current);i.current=a==="mounted"?u:"none"},[a]),an(()=>{const u=r.current,h=s.current;if(h!==t){const m=i.current,v=Bh(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),an(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=v=>{const w=Bh(r.current).includes(v.animationName);if(v.target===e&&w&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=v=>{v.target===e&&(i.current=Bh(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Bh(t){return(t==null?void 0:t.animationName)||"none"}function E5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var T5=Tx[" useInsertionEffect ".trim().toString()]||an;function co({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=S5({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:s;{const h=p.useRef(t!==void 0);p.useEffect(()=>{const f=h.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const u=p.useCallback(h=>{var f;if(a){const m=C5(h)?h(t):h;m!==t&&((f=o.current)==null||f.call(o,m))}else i(h)},[a,t,i,o]);return[c,u]}function S5({defaultProp:t,onChange:e}){const[n,r]=p.useState(t),s=p.useRef(n),i=p.useRef(e);return T5(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function C5(t){return typeof t=="function"}var xA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),I5="VisuallyHidden",_A=p.forwardRef((t,e)=>l.jsx(Ne.span,{...t,ref:e,style:{...xA,...t.style}}));_A.displayName=I5;var k5=_A,[Rp,$te]=Nr("Tooltip",[So]),Dp=So(),bA="TooltipProvider",N5=700,hw="tooltip.open",[A5,N0]=Rp(bA),EA=t=>{const{__scopeTooltip:e,delayDuration:n=N5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),a=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(A5,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};EA.displayName=bA;var rd="Tooltip",[P5,jp]=Rp(rd),TA=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,c=N0(rd,t.__scopeTooltip),u=Dp(e),[h,f]=p.useState(null),m=Yr(),v=p.useRef(0),b=o??c.disableHoverableContent,w=a??c.delayDuration,x=p.useRef(!1),[_,y]=co({prop:r,defaultProp:s??!1,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(hw))):c.onClose(),i==null||i(C)},caller:rd}),T=p.useMemo(()=>_?x.current?"delayed-open":"instant-open":"closed",[_]),N=p.useCallback(()=>{window.clearTimeout(v.current),v.current=0,x.current=!1,y(!0)},[y]),j=p.useCallback(()=>{window.clearTimeout(v.current),v.current=0,y(!1)},[y]),M=p.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{x.current=!0,y(!0),v.current=0},w)},[w,y]);return p.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),l.jsx(Np,{...u,children:l.jsx(P5,{scope:e,contentId:m,open:_,stateAttribute:T,trigger:h,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?M():N()},[c.isOpenDelayedRef,M,N]),onTriggerLeave:p.useCallback(()=>{b?j():(window.clearTimeout(v.current),v.current=0)},[j,b]),onOpen:N,onClose:j,disableHoverableContent:b,children:n})})};TA.displayName=rd;var fw="TooltipTrigger",SA=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=jp(fw,n),i=N0(fw,n),o=Dp(n),a=p.useRef(null),c=$e(e,a,s.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),l.jsx(Ad,{asChild:!0,...o,children:l.jsx(Ne.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ie(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ie(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ie(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ie(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ie(t.onBlur,s.onClose),onClick:ie(t.onClick,s.onClose)})})});SA.displayName=fw;var R5="TooltipPortal",[zte,D5]=Rp(R5,{forceMount:void 0}),ql="TooltipContent",CA=p.forwardRef((t,e)=>{const n=D5(ql,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=jp(ql,t.__scopeTooltip);return l.jsx(jn,{present:r||o.open,children:o.disableHoverableContent?l.jsx(IA,{side:s,...i,ref:e}):l.jsx(j5,{side:s,...i,ref:e})})}),j5=p.forwardRef((t,e)=>{const n=jp(ql,t.__scopeTooltip),r=N0(ql,t.__scopeTooltip),s=p.useRef(null),i=$e(e,s),[o,a]=p.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{a(null),f(!1)},[f]),v=p.useCallback((b,w)=>{const x=b.currentTarget,_={x:b.clientX,y:b.clientY},y=F5(_,x.getBoundingClientRect()),T=U5(_,y),N=$5(w.getBoundingClientRect()),j=B5([...T,...N]);a(j),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&h){const b=x=>v(x,h),w=x=>v(x,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",w)}}},[c,h,v,m]),p.useEffect(()=>{if(o){const b=w=>{const x=w.target,_={x:w.clientX,y:w.clientY},y=(c==null?void 0:c.contains(x))||(h==null?void 0:h.contains(x)),T=!z5(_,o);y?m():T&&(m(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,o,u,m]),l.jsx(IA,{...t,ref:i})}),[M5,O5]=Rp(rd,{isInside:!1}),L5=YN("TooltipContent"),IA=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,c=jp(ql,n),u=Dp(n),{onClose:h}=c;return p.useEffect(()=>(document.addEventListener(hw,h),()=>document.removeEventListener(hw,h)),[h]),p.useEffect(()=>{if(c.trigger){const f=m=>{const v=m.target;v!=null&&v.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),l.jsx(gc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:l.jsxs(Ap,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(L5,{children:r}),l.jsx(M5,{scope:n,isInside:!0,children:l.jsx(k5,{id:c.contentId,role:"tooltip",children:s||r})})]})})});CA.displayName=ql;var kA="TooltipArrow",V5=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Dp(n);return O5(kA,n).isInside?null:l.jsx(Pp,{...s,...r,ref:e})});V5.displayName=kA;function F5(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function U5(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function $5(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function z5(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,h=a.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function B5(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),W5(e)}function W5(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var H5=EA,q5=TA,G5=SA,NA=CA;function AA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=AA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function PA(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=AA(t))&&(r&&(r+=" "),r+=e);return r}const A0="-",K5=t=>{const e=Q5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(A0);return a[0]===""&&a.length!==1&&a.shift(),RA(a,e)||Y5(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},RA=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?RA(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(A0);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Q1=/^\[(.+)\]$/,Y5=t=>{if(Q1.test(t)){const e=Q1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Q5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Z5(Object.entries(t.classGroups),n).forEach(([i,o])=>{mw(o,r,i,e)}),r},mw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:X1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(X5(s)){mw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{mw(o,X1(e,i),n,r)})})},X1=(t,e)=>{let n=t;return e.split(A0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},X5=t=>t.isThemeGetter,Z5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,J5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},DA="!",e6=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,h=0,f;for(let x=0;x<a.length;x++){let _=a[x];if(u===0){if(_===s&&(r||a.slice(x,x+i)===e)){c.push(a.slice(h,x)),h=x+i;continue}if(_==="/"){f=x;continue}}_==="["?u++:_==="]"&&u--}const m=c.length===0?a:a.substring(h),v=m.startsWith(DA),b=v?m.substring(1):m,w=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:w}};return n?a=>n({className:a,parseClassName:o}):o},t6=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},n6=t=>({cache:J5(t.cacheSize),parseClassName:e6(t),...K5(t)}),r6=/\s+/,s6=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(r6);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:v}=n(u);let b=!!v,w=r(b?m.substring(0,v):m);if(!w){if(!b){a=u+(a.length>0?" "+a:a);continue}if(w=r(m),!w){a=u+(a.length>0?" "+a:a);continue}b=!1}const x=t6(h).join(":"),_=f?x+DA:x,y=_+w;if(i.includes(y))continue;i.push(y);const T=s(w,b);for(let N=0;N<T.length;++N){const j=T[N];i.push(_+j)}a=u+(a.length>0?" "+a:a)}return a};function i6(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jA(e))&&(r&&(r+=" "),r+=n);return r}const jA=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jA(t[r]))&&(n&&(n+=" "),n+=e);return n};function o6(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=n6(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const h=s6(c,n);return s(c,h),h}return function(){return i(i6.apply(null,arguments))}}const ht=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},MA=/^\[(?:([a-z-]+):)?(.+)\]$/i,a6=/^\d+\/\d+$/,l6=new Set(["px","full","screen"]),c6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,u6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,d6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,h6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ms=t=>xl(t)||l6.has(t)||a6.test(t),xi=t=>wc(t,"length",_6),xl=t=>!!t&&!Number.isNaN(Number(t)),Av=t=>wc(t,"number",xl),eu=t=>!!t&&Number.isInteger(Number(t)),m6=t=>t.endsWith("%")&&xl(t.slice(0,-1)),Ue=t=>MA.test(t),_i=t=>c6.test(t),p6=new Set(["length","size","percentage"]),g6=t=>wc(t,p6,OA),v6=t=>wc(t,"position",OA),y6=new Set(["image","url"]),w6=t=>wc(t,y6,E6),x6=t=>wc(t,"",b6),tu=()=>!0,wc=(t,e,n)=>{const r=MA.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},_6=t=>u6.test(t)&&!d6.test(t),OA=()=>!1,b6=t=>h6.test(t),E6=t=>f6.test(t),T6=()=>{const t=ht("colors"),e=ht("spacing"),n=ht("blur"),r=ht("brightness"),s=ht("borderColor"),i=ht("borderRadius"),o=ht("borderSpacing"),a=ht("borderWidth"),c=ht("contrast"),u=ht("grayscale"),h=ht("hueRotate"),f=ht("invert"),m=ht("gap"),v=ht("gradientColorStops"),b=ht("gradientColorStopPositions"),w=ht("inset"),x=ht("margin"),_=ht("opacity"),y=ht("padding"),T=ht("saturate"),N=ht("scale"),j=ht("sepia"),M=ht("skew"),C=ht("space"),k=ht("translate"),R=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto",Ue,e],P=()=>[Ue,e],A=()=>["",Ms,xi],W=()=>["auto",xl,Ue],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Ue],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>[xl,Ue];return{cacheSize:500,separator:":",theme:{colors:[tu],spacing:[Ms,xi],blur:["none","",_i,Ue],brightness:fe(),borderColor:[t],borderRadius:["none","","full",_i,Ue],borderSpacing:P(),borderWidth:A(),contrast:fe(),grayscale:F(),hueRotate:fe(),invert:F(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[m6,xi],inset:S(),margin:S(),opacity:fe(),padding:P(),saturate:fe(),scale:fe(),sepia:F(),skew:fe(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ue]}],container:["container"],columns:[{columns:[_i]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),Ue]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",eu,Ue]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ue]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",eu,Ue]}],"grid-cols":[{"grid-cols":[tu]}],"col-start-end":[{col:["auto",{span:["full",eu,Ue]},Ue]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[tu]}],"row-start-end":[{row:["auto",{span:[eu,Ue]},Ue]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ue]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ue,e]}],"min-w":[{"min-w":[Ue,e,"min","max","fit"]}],"max-w":[{"max-w":[Ue,e,"none","full","min","max","fit","prose",{screen:[_i]},_i]}],h:[{h:[Ue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",_i,xi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Av]}],"font-family":[{font:[tu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ue]}],"line-clamp":[{"line-clamp":["none",xl,Av]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ms,Ue]}],"list-image":[{"list-image":["none",Ue]}],"list-style-type":[{list:["none","disc","decimal",Ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ms,xi]}],"underline-offset":[{"underline-offset":["auto",Ms,Ue]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),v6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",g6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},w6]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Ms,Ue]}],"outline-w":[{outline:[Ms,xi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Ms,xi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",_i,x6]}],"shadow-color":[{shadow:[tu]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",_i,Ue]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[T]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[T]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ue]}],duration:[{duration:fe()}],ease:[{ease:["linear","in","out","in-out",Ue]}],delay:[{delay:fe()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[eu,Ue]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ms,xi,Av]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},S6=o6(T6);function pe(...t){return S6(PA(t))}function xc(t){const e={};for(const[n,r]of Object.entries(t))if(r!==void 0)if(r&&typeof r=="object"&&!(r instanceof Date)){const s=xc(r);Object.keys(s).length>0&&(e[n]=s)}else e[n]=r;return e}function C6(t){try{const e=new URL(t);let n=e.pathname.startsWith("/")?e.pathname.slice(1):e.pathname;return e.search&&(n+=e.search),e.hash&&(n+=e.hash),n}catch(e){return console.error("Invalid URL:",e),null}}const P0=H5,qa=q5,Ga=G5,Ho=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(NA,{ref:r,sideOffset:e,className:pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Ho.displayName=NA.displayName;const I6=[{username:"admin",password:"ittopolini",role:"admin"},{username:"Fabio",password:"ittopolino",role:"user"},{username:"Ludovica",password:"ittopolina",role:"user"}];class wf{static async login(e){await new Promise(s=>setTimeout(s,1e3));const n=I6.find(s=>s.username===e.username&&s.password===e.password);if(!n)throw new Error("Invalid username or password");const r={user:{...n,password:""},isAuthenticated:!0};return localStorage.setItem(this.STORAGE_KEY,JSON.stringify(r)),{...n,password:""}}static logout(){localStorage.removeItem(this.STORAGE_KEY)}static getCurrentUser(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(!e)return null;const n=JSON.parse(e);return n.isAuthenticated?n.user:null}catch{return null}}static isAuthenticated(){return this.getCurrentUser()!==null}}Hc(wf,"STORAGE_KEY","familyTaskManager_auth");function LA(){const[t,e]=p.useState(null),[n,r]=p.useState(!0);return p.useEffect(()=>{const o=wf.getCurrentUser();e(o),r(!1)},[]),{user:t,isLoading:n,isAuthenticated:!!t,login:async o=>{const a=await wf.login(o);e(a)},logout:()=>{wf.logout(),e(null)}}}const VA=p.createContext(void 0);function k6({children:t}){const e=LA();return l.jsx(VA.Provider,{value:e,children:t})}function Mn(){const t=p.useContext(VA);if(t===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return t}var Rd=t=>t.type==="checkbox",Yo=t=>t instanceof Date,kn=t=>t==null;const FA=t=>typeof t=="object";var Rt=t=>!kn(t)&&!Array.isArray(t)&&FA(t)&&!Yo(t),UA=t=>Rt(t)&&t.target?Rd(t.target)?t.target.checked:t.target.value:t,N6=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,$A=(t,e)=>t.has(N6(e)),A6=t=>{const e=t.constructor&&t.constructor.prototype;return Rt(e)&&e.hasOwnProperty("isPrototypeOf")},R0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Jt(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(R0&&(t instanceof Blob||r))&&(n||Rt(t)))if(e=n?[]:{},!n&&!A6(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Jt(t[s]));else return t;return e}var Mp=t=>Array.isArray(t)?t.filter(Boolean):[],Nt=t=>t===void 0,se=(t,e,n)=>{if(!e||!Rt(t))return n;const r=Mp(e.split(/[,[\].]+?/)).reduce((s,i)=>kn(s)?s:s[i],t);return Nt(r)||r===t?Nt(t[e])?n:t[e]:r},tr=t=>typeof t=="boolean",D0=t=>/^\w*$/.test(t),zA=t=>Mp(t.replace(/["|']|\]/g,"").split(/\.|\[/)),nt=(t,e,n)=>{let r=-1;const s=D0(e)?[e]:zA(e),i=s.length,o=i-1;for(;++r<i;){const a=s[r];let c=n;if(r!==o){const u=t[a];c=Rt(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=c,t=t[a]}};const fm={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},zr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Os={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},BA=Le.createContext(null),Op=()=>Le.useContext(BA),P6=t=>{const{children:e,...n}=t;return Le.createElement(BA.Provider,{value:n},e)};var WA=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==zr.all&&(e._proxyFormState[o]=!r||zr.all),n&&(n[o]=!0),t[o]}});return s};const j0=typeof window<"u"?p.useLayoutEffect:p.useEffect;function R6(t){const e=Op(),{control:n=e.control,disabled:r,name:s,exact:i}=t||{},[o,a]=Le.useState(n._formState),c=Le.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return j0(()=>n._subscribe({name:s,formState:c.current,exact:i,callback:u=>{!r&&a({...n._formState,...u})}}),[s,r,i]),Le.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Le.useMemo(()=>WA(o,n,c.current,!1),[o,n])}var ps=t=>typeof t=="string",HA=(t,e,n,r,s)=>ps(t)?(r&&e.watch.add(t),se(n,t,s)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),se(n,i))):(r&&(e.watchAll=!0),n);function D6(t){const e=Op(),{control:n=e.control,name:r,defaultValue:s,disabled:i,exact:o}=t||{},a=Le.useRef(s),[c,u]=Le.useState(n._getWatch(r,a.current));return j0(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:h=>!i&&u(HA(r,n._names,h.values||n._formValues,!1,a.current))}),[r,n,i,o]),Le.useEffect(()=>n._removeUnmounted()),c}function j6(t){const e=Op(),{name:n,disabled:r,control:s=e.control,shouldUnregister:i}=t,o=$A(s._names.array,n),a=D6({control:s,name:n,defaultValue:se(s._formValues,n,se(s._defaultValues,n,t.defaultValue)),exact:!0}),c=R6({control:s,name:n,exact:!0}),u=Le.useRef(t),h=Le.useRef(s.register(n,{...t.rules,value:a,...tr(t.disabled)?{disabled:t.disabled}:{}})),f=Le.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!se(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!se(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!se(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!se(c.validatingFields,n)},error:{enumerable:!0,get:()=>se(c.errors,n)}}),[c,n]),m=Le.useCallback(x=>h.current.onChange({target:{value:UA(x),name:n},type:fm.CHANGE}),[n]),v=Le.useCallback(()=>h.current.onBlur({target:{value:se(s._formValues,n),name:n},type:fm.BLUR}),[n,s._formValues]),b=Le.useCallback(x=>{const _=se(s._fields,n);_&&x&&(_._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:y=>x.setCustomValidity(y),reportValidity:()=>x.reportValidity()})},[s._fields,n]),w=Le.useMemo(()=>({name:n,value:a,...tr(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:m,onBlur:v,ref:b}),[n,r,c.disabled,m,v,b,a]);return Le.useEffect(()=>{const x=s._options.shouldUnregister||i;s.register(n,{...u.current.rules,...tr(u.current.disabled)?{disabled:u.current.disabled}:{}});const _=(y,T)=>{const N=se(s._fields,y);N&&N._f&&(N._f.mount=T)};if(_(n,!0),x){const y=Jt(se(s._options.defaultValues,n));nt(s._defaultValues,n,y),Nt(se(s._formValues,n))&&nt(s._formValues,n,y)}return!o&&s.register(n),()=>{(o?x&&!s._state.action:x)?s.unregister(n):_(n,!1)}},[n,s,o,i]),Le.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),Le.useMemo(()=>({field:w,formState:c,fieldState:f}),[w,c,f])}const M6=t=>t.render(j6(t));var qA=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},Su=t=>Array.isArray(t)?t:[t],Z1=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},pw=t=>kn(t)||!FA(t);function Pi(t,e){if(pw(t)||pw(e))return t===e;if(Yo(t)&&Yo(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const i=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const o=e[s];if(Yo(i)&&Yo(o)||Rt(i)&&Rt(o)||Array.isArray(i)&&Array.isArray(o)?!Pi(i,o):i!==o)return!1}}return!0}var Fn=t=>Rt(t)&&!Object.keys(t).length,M0=t=>t.type==="file",Br=t=>typeof t=="function",mm=t=>{if(!R0)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},GA=t=>t.type==="select-multiple",O0=t=>t.type==="radio",O6=t=>O0(t)||Rd(t),Pv=t=>mm(t)&&t.isConnected;function L6(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Nt(t)?r++:t[e[r++]];return t}function V6(t){for(const e in t)if(t.hasOwnProperty(e)&&!Nt(t[e]))return!1;return!0}function Ft(t,e){const n=Array.isArray(e)?e:D0(e)?[e]:zA(e),r=n.length===1?t:L6(t,n),s=n.length-1,i=n[s];return r&&delete r[i],s!==0&&(Rt(r)&&Fn(r)||Array.isArray(r)&&V6(r))&&Ft(t,n.slice(0,-1)),t}var KA=t=>{for(const e in t)if(Br(t[e]))return!0;return!1};function pm(t,e={}){const n=Array.isArray(t);if(Rt(t)||n)for(const r in t)Array.isArray(t[r])||Rt(t[r])&&!KA(t[r])?(e[r]=Array.isArray(t[r])?[]:{},pm(t[r],e[r])):kn(t[r])||(e[r]=!0);return e}function YA(t,e,n){const r=Array.isArray(t);if(Rt(t)||r)for(const s in t)Array.isArray(t[s])||Rt(t[s])&&!KA(t[s])?Nt(e)||pw(n[s])?n[s]=Array.isArray(t[s])?pm(t[s],[]):{...pm(t[s])}:YA(t[s],kn(e)?{}:e[s],n[s]):n[s]=!Pi(t[s],e[s]);return n}var nu=(t,e)=>YA(t,e,pm(e));const J1={value:!1,isValid:!1},eT={value:!0,isValid:!0};var QA=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Nt(t[0].attributes.value)?Nt(t[0].value)||t[0].value===""?eT:{value:t[0].value,isValid:!0}:eT:J1}return J1},XA=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Nt(t)?t:e?t===""?NaN:t&&+t:n&&ps(t)?new Date(t):r?r(t):t;const tT={isValid:!1,value:null};var ZA=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,tT):tT;function nT(t){const e=t.ref;return M0(e)?e.files:O0(e)?ZA(t.refs).value:GA(e)?[...e.selectedOptions].map(({value:n})=>n):Rd(e)?QA(t.refs).value:XA(Nt(e.value)?t.ref.value:e.value,t)}var F6=(t,e,n,r)=>{const s={};for(const i of t){const o=se(e,i);o&&nt(s,i,o._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},gm=t=>t instanceof RegExp,ru=t=>Nt(t)?t:gm(t)?t.source:Rt(t)?gm(t.value)?t.value.source:t.value:t,rT=t=>({isOnSubmit:!t||t===zr.onSubmit,isOnBlur:t===zr.onBlur,isOnChange:t===zr.onChange,isOnAll:t===zr.all,isOnTouch:t===zr.onTouched});const sT="AsyncFunction";var U6=t=>!!t&&!!t.validate&&!!(Br(t.validate)&&t.validate.constructor.name===sT||Rt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===sT)),$6=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),iT=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Cu=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const i=se(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Cu(a,e))break}else if(Rt(a)&&Cu(a,e))break}}};function oT(t,e,n){const r=se(t,n);if(r||D0(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const i=s.join("."),o=se(e,i),a=se(t,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};s.pop()}return{name:n}}var z6=(t,e,n,r)=>{n(t);const{name:s,...i}=t;return Fn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!r||zr.all))},B6=(t,e,n)=>!t||!e||t===e||Su(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),W6=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,H6=(t,e)=>!Mp(se(t,e)).length&&Ft(t,e),q6=(t,e,n)=>{const r=Su(se(t,n));return nt(r,"root",e[n]),nt(t,n,r),t},xf=t=>ps(t);function aT(t,e,n="validate"){if(xf(t)||Array.isArray(t)&&t.every(xf)||tr(t)&&!t)return{type:n,message:xf(t)?t:"",ref:e}}var Ua=t=>Rt(t)&&!gm(t)?t:{value:t,message:""},lT=async(t,e,n,r,s,i)=>{const{ref:o,refs:a,required:c,maxLength:u,minLength:h,min:f,max:m,pattern:v,validate:b,name:w,valueAsNumber:x,mount:_}=t._f,y=se(n,w);if(!_||e.has(w))return{};const T=a?a[0]:o,N=P=>{s&&T.reportValidity&&(T.setCustomValidity(tr(P)?"":P||""),T.reportValidity())},j={},M=O0(o),C=Rd(o),k=M||C,R=(x||M0(o))&&Nt(o.value)&&Nt(y)||mm(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,I=qA.bind(null,w,r,j),S=(P,A,W,Q=Os.maxLength,J=Os.minLength)=>{const H=P?A:W;j[w]={type:P?Q:J,message:H,ref:o,...I(P?Q:J,H)}};if(i?!Array.isArray(y)||!y.length:c&&(!k&&(R||kn(y))||tr(y)&&!y||C&&!QA(a).isValid||M&&!ZA(a).isValid)){const{value:P,message:A}=xf(c)?{value:!!c,message:c}:Ua(c);if(P&&(j[w]={type:Os.required,message:A,ref:T,...I(Os.required,A)},!r))return N(A),j}if(!R&&(!kn(f)||!kn(m))){let P,A;const W=Ua(m),Q=Ua(f);if(!kn(y)&&!isNaN(y)){const J=o.valueAsNumber||y&&+y;kn(W.value)||(P=J>W.value),kn(Q.value)||(A=J<Q.value)}else{const J=o.valueAsDate||new Date(y),H=X=>new Date(new Date().toDateString()+" "+X),O=o.type=="time",F=o.type=="week";ps(W.value)&&y&&(P=O?H(y)>H(W.value):F?y>W.value:J>new Date(W.value)),ps(Q.value)&&y&&(A=O?H(y)<H(Q.value):F?y<Q.value:J<new Date(Q.value))}if((P||A)&&(S(!!P,W.message,Q.message,Os.max,Os.min),!r))return N(j[w].message),j}if((u||h)&&!R&&(ps(y)||i&&Array.isArray(y))){const P=Ua(u),A=Ua(h),W=!kn(P.value)&&y.length>+P.value,Q=!kn(A.value)&&y.length<+A.value;if((W||Q)&&(S(W,P.message,A.message),!r))return N(j[w].message),j}if(v&&!R&&ps(y)){const{value:P,message:A}=Ua(v);if(gm(P)&&!y.match(P)&&(j[w]={type:Os.pattern,message:A,ref:o,...I(Os.pattern,A)},!r))return N(A),j}if(b){if(Br(b)){const P=await b(y,n),A=aT(P,T);if(A&&(j[w]={...A,...I(Os.validate,A.message)},!r))return N(A.message),j}else if(Rt(b)){let P={};for(const A in b){if(!Fn(P)&&!r)break;const W=aT(await b[A](y,n),T,A);W&&(P={...W,...I(A,W.message)},N(W.message),r&&(j[w]=P))}if(!Fn(P)&&(j[w]={ref:T,...P},!r))return j}}return N(!0),j};const G6={mode:zr.onSubmit,reValidateMode:zr.onChange,shouldFocusError:!0};function K6(t={}){let e={...G6,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Br(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=Rt(e.defaultValues)||Rt(e.values)?Jt(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:Jt(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...h};const m={array:Z1(),state:Z1()},v=e.criteriaMode===zr.all,b=L=>U=>{clearTimeout(u),u=setTimeout(L,U)},w=async L=>{if(!e.disabled&&(h.isValid||f.isValid||L)){const U=e.resolver?Fn((await C()).errors):await R(r,!0);U!==n.isValid&&m.state.next({isValid:U})}},x=(L,U)=>{!e.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((L||Array.from(a.mount)).forEach(z=>{z&&(U?nt(n.validatingFields,z,U):Ft(n.validatingFields,z))}),m.state.next({validatingFields:n.validatingFields,isValidating:!Fn(n.validatingFields)}))},_=(L,U=[],z,oe,re=!0,ee=!0)=>{if(oe&&z&&!e.disabled){if(o.action=!0,ee&&Array.isArray(se(r,L))){const ae=z(se(r,L),oe.argA,oe.argB);re&&nt(r,L,ae)}if(ee&&Array.isArray(se(n.errors,L))){const ae=z(se(n.errors,L),oe.argA,oe.argB);re&&nt(n.errors,L,ae),H6(n.errors,L)}if((h.touchedFields||f.touchedFields)&&ee&&Array.isArray(se(n.touchedFields,L))){const ae=z(se(n.touchedFields,L),oe.argA,oe.argB);re&&nt(n.touchedFields,L,ae)}(h.dirtyFields||f.dirtyFields)&&(n.dirtyFields=nu(s,i)),m.state.next({name:L,isDirty:S(L,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else nt(i,L,U)},y=(L,U)=>{nt(n.errors,L,U),m.state.next({errors:n.errors})},T=L=>{n.errors=L,m.state.next({errors:n.errors,isValid:!1})},N=(L,U,z,oe)=>{const re=se(r,L);if(re){const ee=se(i,L,Nt(z)?se(s,L):z);Nt(ee)||oe&&oe.defaultChecked||U?nt(i,L,U?ee:nT(re._f)):W(L,ee),o.mount&&w()}},j=(L,U,z,oe,re)=>{let ee=!1,ae=!1;const Ae={name:L};if(!e.disabled){if(!z||oe){(h.isDirty||f.isDirty)&&(ae=n.isDirty,n.isDirty=Ae.isDirty=S(),ee=ae!==Ae.isDirty);const et=Pi(se(s,L),U);ae=!!se(n.dirtyFields,L),et?Ft(n.dirtyFields,L):nt(n.dirtyFields,L,!0),Ae.dirtyFields=n.dirtyFields,ee=ee||(h.dirtyFields||f.dirtyFields)&&ae!==!et}if(z){const et=se(n.touchedFields,L);et||(nt(n.touchedFields,L,z),Ae.touchedFields=n.touchedFields,ee=ee||(h.touchedFields||f.touchedFields)&&et!==z)}ee&&re&&m.state.next(Ae)}return ee?Ae:{}},M=(L,U,z,oe)=>{const re=se(n.errors,L),ee=(h.isValid||f.isValid)&&tr(U)&&n.isValid!==U;if(e.delayError&&z?(c=b(()=>y(L,z)),c(e.delayError)):(clearTimeout(u),c=null,z?nt(n.errors,L,z):Ft(n.errors,L)),(z?!Pi(re,z):re)||!Fn(oe)||ee){const ae={...oe,...ee&&tr(U)?{isValid:U}:{},errors:n.errors,name:L};n={...n,...ae},m.state.next(ae)}},C=async L=>{x(L,!0);const U=await e.resolver(i,e.context,F6(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(L),U},k=async L=>{const{errors:U}=await C(L);if(L)for(const z of L){const oe=se(U,z);oe?nt(n.errors,z,oe):Ft(n.errors,z)}else n.errors=U;return U},R=async(L,U,z={valid:!0})=>{for(const oe in L){const re=L[oe];if(re){const{_f:ee,...ae}=re;if(ee){const Ae=a.array.has(ee.name),et=re._f&&U6(re._f);et&&h.validatingFields&&x([oe],!0);const Tn=await lT(re,a.disabled,i,v,e.shouldUseNativeValidation&&!U,Ae);if(et&&h.validatingFields&&x([oe]),Tn[ee.name]&&(z.valid=!1,U))break;!U&&(se(Tn,ee.name)?Ae?q6(n.errors,Tn,ee.name):nt(n.errors,ee.name,Tn[ee.name]):Ft(n.errors,ee.name))}!Fn(ae)&&await R(ae,U,z)}}return z.valid},I=()=>{for(const L of a.unMount){const U=se(r,L);U&&(U._f.refs?U._f.refs.every(z=>!Pv(z)):!Pv(U._f.ref))&&he(L)}a.unMount=new Set},S=(L,U)=>!e.disabled&&(L&&U&&nt(i,L,U),!Pi(X(),s)),P=(L,U,z)=>HA(L,a,{...o.mount?i:Nt(U)?s:ps(L)?{[L]:U}:U},z,U),A=L=>Mp(se(o.mount?i:s,L,e.shouldUnregister?se(s,L,[]):[])),W=(L,U,z={})=>{const oe=se(r,L);let re=U;if(oe){const ee=oe._f;ee&&(!ee.disabled&&nt(i,L,XA(U,ee)),re=mm(ee.ref)&&kn(U)?"":U,GA(ee.ref)?[...ee.ref.options].forEach(ae=>ae.selected=re.includes(ae.value)):ee.refs?Rd(ee.ref)?ee.refs.forEach(ae=>{(!ae.defaultChecked||!ae.disabled)&&(Array.isArray(re)?ae.checked=!!re.find(Ae=>Ae===ae.value):ae.checked=re===ae.value||!!re)}):ee.refs.forEach(ae=>ae.checked=ae.value===re):M0(ee.ref)?ee.ref.value="":(ee.ref.value=re,ee.ref.type||m.state.next({name:L,values:Jt(i)})))}(z.shouldDirty||z.shouldTouch)&&j(L,re,z.shouldTouch,z.shouldDirty,!0),z.shouldValidate&&F(L)},Q=(L,U,z)=>{for(const oe in U){if(!U.hasOwnProperty(oe))return;const re=U[oe],ee=L+"."+oe,ae=se(r,ee);(a.array.has(L)||Rt(re)||ae&&!ae._f)&&!Yo(re)?Q(ee,re,z):W(ee,re,z)}},J=(L,U,z={})=>{const oe=se(r,L),re=a.array.has(L),ee=Jt(U);nt(i,L,ee),re?(m.array.next({name:L,values:Jt(i)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&z.shouldDirty&&m.state.next({name:L,dirtyFields:nu(s,i),isDirty:S(L,ee)})):oe&&!oe._f&&!kn(ee)?Q(L,ee,z):W(L,ee,z),iT(L,a)&&m.state.next({...n}),m.state.next({name:o.mount?L:void 0,values:Jt(i)})},H=async L=>{o.mount=!0;const U=L.target;let z=U.name,oe=!0;const re=se(r,z),ee=et=>{oe=Number.isNaN(et)||Yo(et)&&isNaN(et.getTime())||Pi(et,se(i,z,et))},ae=rT(e.mode),Ae=rT(e.reValidateMode);if(re){let et,Tn;const jo=U.type?nT(re._f):UA(L),rs=L.type===fm.BLUR||L.type===fm.FOCUS_OUT,Mo=!$6(re._f)&&!e.resolver&&!se(n.errors,z)&&!re._f.deps||W6(rs,se(n.touchedFields,z),n.isSubmitted,Ae,ae),Ra=iT(z,a,rs);nt(i,z,jo),rs?(re._f.onBlur&&re._f.onBlur(L),c&&c(0)):re._f.onChange&&re._f.onChange(L);const Da=j(z,jo,rs),Rc=!Fn(Da)||Ra;if(!rs&&m.state.next({name:z,type:L.type,values:Jt(i)}),Mo)return(h.isValid||f.isValid)&&(e.mode==="onBlur"?rs&&w():rs||w()),Rc&&m.state.next({name:z,...Ra?{}:Da});if(!rs&&Ra&&m.state.next({...n}),e.resolver){const{errors:ah}=await C([z]);if(ee(jo),oe){const Vg=oT(n.errors,r,z),ja=oT(ah,r,Vg.name||z);et=ja.error,z=ja.name,Tn=Fn(ah)}}else x([z],!0),et=(await lT(re,a.disabled,i,v,e.shouldUseNativeValidation))[z],x([z]),ee(jo),oe&&(et?Tn=!1:(h.isValid||f.isValid)&&(Tn=await R(r,!0)));oe&&(re._f.deps&&F(re._f.deps),M(z,Tn,et,Da))}},O=(L,U)=>{if(se(n.errors,U)&&L.focus)return L.focus(),1},F=async(L,U={})=>{let z,oe;const re=Su(L);if(e.resolver){const ee=await k(Nt(L)?L:re);z=Fn(ee),oe=L?!re.some(ae=>se(ee,ae)):z}else L?(oe=(await Promise.all(re.map(async ee=>{const ae=se(r,ee);return await R(ae&&ae._f?{[ee]:ae}:ae)}))).every(Boolean),!(!oe&&!n.isValid)&&w()):oe=z=await R(r);return m.state.next({...!ps(L)||(h.isValid||f.isValid)&&z!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:z}:{},errors:n.errors}),U.shouldFocus&&!oe&&Cu(r,O,L?re:a.mount),oe},X=L=>{const U={...o.mount?i:s};return Nt(L)?U:ps(L)?se(U,L):L.map(z=>se(U,z))},fe=(L,U)=>({invalid:!!se((U||n).errors,L),isDirty:!!se((U||n).dirtyFields,L),error:se((U||n).errors,L),isValidating:!!se(n.validatingFields,L),isTouched:!!se((U||n).touchedFields,L)}),G=L=>{L&&Su(L).forEach(U=>Ft(n.errors,U)),m.state.next({errors:L?n.errors:{}})},ue=(L,U,z)=>{const oe=(se(r,L,{_f:{}})._f||{}).ref,re=se(n.errors,L)||{},{ref:ee,message:ae,type:Ae,...et}=re;nt(n.errors,L,{...et,...U,ref:oe}),m.state.next({name:L,errors:n.errors,isValid:!1}),z&&z.shouldFocus&&oe&&oe.focus&&oe.focus()},ze=(L,U)=>Br(L)?m.state.subscribe({next:z=>L(P(void 0,U),z)}):P(L,U,!0),tt=L=>m.state.subscribe({next:U=>{B6(L.name,U.name,L.exact)&&z6(U,L.formState||h,wr,L.reRenderRoot)&&L.callback({values:{...i},...n,...U})}}).unsubscribe,Oe=L=>(o.mount=!0,f={...f,...L.formState},tt({...L,formState:f})),he=(L,U={})=>{for(const z of L?Su(L):a.mount)a.mount.delete(z),a.array.delete(z),U.keepValue||(Ft(r,z),Ft(i,z)),!U.keepError&&Ft(n.errors,z),!U.keepDirty&&Ft(n.dirtyFields,z),!U.keepTouched&&Ft(n.touchedFields,z),!U.keepIsValidating&&Ft(n.validatingFields,z),!e.shouldUnregister&&!U.keepDefaultValue&&Ft(s,z);m.state.next({values:Jt(i)}),m.state.next({...n,...U.keepDirty?{isDirty:S()}:{}}),!U.keepIsValid&&w()},te=({disabled:L,name:U})=>{(tr(L)&&o.mount||L||a.disabled.has(U))&&(L?a.disabled.add(U):a.disabled.delete(U))},we=(L,U={})=>{let z=se(r,L);const oe=tr(U.disabled)||tr(e.disabled);return nt(r,L,{...z||{},_f:{...z&&z._f?z._f:{ref:{name:L}},name:L,mount:!0,...U}}),a.mount.add(L),z?te({disabled:tr(U.disabled)?U.disabled:e.disabled,name:L}):N(L,!0,U.value),{...oe?{disabled:U.disabled||e.disabled}:{},...e.progressive?{required:!!U.required,min:ru(U.min),max:ru(U.max),minLength:ru(U.minLength),maxLength:ru(U.maxLength),pattern:ru(U.pattern)}:{},name:L,onChange:H,onBlur:H,ref:re=>{if(re){we(L,U),z=se(r,L);const ee=Nt(re.value)&&re.querySelectorAll&&re.querySelectorAll("input,select,textarea")[0]||re,ae=O6(ee),Ae=z._f.refs||[];if(ae?Ae.find(et=>et===ee):ee===z._f.ref)return;nt(r,L,{_f:{...z._f,...ae?{refs:[...Ae.filter(Pv),ee,...Array.isArray(se(s,L))?[{}]:[]],ref:{type:ee.type,name:L}}:{ref:ee}}}),N(L,!1,void 0,ee)}else z=se(r,L,{}),z._f&&(z._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!($A(a.array,L)&&o.action)&&a.unMount.add(L)}}},le=()=>e.shouldFocusError&&Cu(r,O,a.mount),Ve=L=>{tr(L)&&(m.state.next({disabled:L}),Cu(r,(U,z)=>{const oe=se(r,z);oe&&(U.disabled=oe._f.disabled||L,Array.isArray(oe._f.refs)&&oe._f.refs.forEach(re=>{re.disabled=oe._f.disabled||L}))},0,!1))},ye=(L,U)=>async z=>{let oe;z&&(z.preventDefault&&z.preventDefault(),z.persist&&z.persist());let re=Jt(i);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:ee,values:ae}=await C();n.errors=ee,re=ae}else await R(r);if(a.disabled.size)for(const ee of a.disabled)nt(re,ee,void 0);if(Ft(n.errors,"root"),Fn(n.errors)){m.state.next({errors:{}});try{await L(re,z)}catch(ee){oe=ee}}else U&&await U({...n.errors},z),le(),setTimeout(le);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fn(n.errors)&&!oe,submitCount:n.submitCount+1,errors:n.errors}),oe)throw oe},lt=(L,U={})=>{se(r,L)&&(Nt(U.defaultValue)?J(L,Jt(se(s,L))):(J(L,U.defaultValue),nt(s,L,Jt(U.defaultValue))),U.keepTouched||Ft(n.touchedFields,L),U.keepDirty||(Ft(n.dirtyFields,L),n.isDirty=U.defaultValue?S(L,Jt(se(s,L))):S()),U.keepError||(Ft(n.errors,L),h.isValid&&w()),m.state.next({...n}))},Vt=(L,U={})=>{const z=L?Jt(L):s,oe=Jt(z),re=Fn(L),ee=re?s:oe;if(U.keepDefaultValues||(s=z),!U.keepValues){if(U.keepDirtyValues){const ae=new Set([...a.mount,...Object.keys(nu(s,i))]);for(const Ae of Array.from(ae))se(n.dirtyFields,Ae)?nt(ee,Ae,se(i,Ae)):J(Ae,se(ee,Ae))}else{if(R0&&Nt(L))for(const ae of a.mount){const Ae=se(r,ae);if(Ae&&Ae._f){const et=Array.isArray(Ae._f.refs)?Ae._f.refs[0]:Ae._f.ref;if(mm(et)){const Tn=et.closest("form");if(Tn){Tn.reset();break}}}}for(const ae of a.mount)J(ae,se(ee,ae))}i=Jt(ee),m.array.next({values:{...ee}}),m.state.next({values:{...ee}})}a={mount:U.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!U.keepIsValid||!!U.keepDirtyValues,o.watch=!!e.shouldUnregister,m.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:re?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Pi(L,s)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:re?{}:U.keepDirtyValues?U.keepDefaultValues&&i?nu(s,i):n.dirtyFields:U.keepDefaultValues&&L?nu(s,L):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ln=(L,U)=>Vt(Br(L)?L(i):L,U),Zn=(L,U={})=>{const z=se(r,L),oe=z&&z._f;if(oe){const re=oe.refs?oe.refs[0]:oe.ref;re.focus&&(re.focus(),U.shouldSelect&&Br(re.select)&&re.select())}},wr=L=>{n={...n,...L}},ns={control:{register:we,unregister:he,getFieldState:fe,handleSubmit:ye,setError:ue,_subscribe:tt,_runSchema:C,_focusError:le,_getWatch:P,_getDirty:S,_setValid:w,_setFieldArray:_,_setDisabledField:te,_setErrors:T,_getFieldArray:A,_reset:Vt,_resetDefaultValues:()=>Br(e.defaultValues)&&e.defaultValues().then(L=>{Ln(L,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:Ve,_subjects:m,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return o},set _state(L){o=L},get _defaultValues(){return s},get _names(){return a},set _names(L){a=L},get _formState(){return n},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:Oe,trigger:F,register:we,handleSubmit:ye,watch:ze,setValue:J,getValues:X,reset:Ln,resetField:lt,clearErrors:G,unregister:he,setError:ue,setFocus:Zn,getFieldState:fe};return{...ns,formControl:ns}}function Lp(t={}){const e=Le.useRef(void 0),n=Le.useRef(void 0),[r,s]=Le.useState({isDirty:!1,isValidating:!1,isLoading:Br(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Br(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:K6(t),formState:r},t.formControl&&t.defaultValues&&!Br(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const i=e.current.control;return i._options=t,j0(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),i._formState.isReady=!0,o},[i]),Le.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Le.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Le.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Le.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Le.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==r.isDirty&&i._subjects.state.next({isDirty:o})}},[i,r.isDirty]),Le.useEffect(()=>{t.values&&!Pi(t.values,n.current)?(i._reset(t.values,i._options.resetOptions),n.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[i,t.values]),Le.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=WA(r,i),e.current}const cT=(t,e,n)=>{if(t&&"reportValidity"in t){const r=se(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},JA=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?cT(r.ref,n,t):r.refs&&r.refs.forEach(s=>cT(s,n,t))}},Y6=(t,e)=>{e.shouldUseNativeValidation&&JA(t,e);const n={};for(const r in t){const s=se(e.fields,r),i=Object.assign(t[r]||{},{ref:s&&s.ref});if(Q6(e.names||Object.keys(t),r)){const o=Object.assign({},se(n,r));nt(o,"root",i),nt(n,r,o)}else nt(n,r,i)}return n},Q6=(t,e)=>t.some(n=>n.startsWith(e+"."));var X6=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,i=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:i,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(h){return h.errors.forEach(function(f){return t.push(f)})}),e){var c=n[o].types,u=c&&c[r.code];n[o]=qA(o,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},Z6=function(t,e,n){return n===void 0&&(n={}),function(r,s,i){try{return Promise.resolve(function(o,a){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return i.shouldUseNativeValidation&&JA({},i),{errors:{},values:n.raw?r:u}})}catch(u){return a(u)}return c&&c.then?c.then(void 0,a):c}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:Y6(X6(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Je;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Je||(Je={}));var uT;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(uT||(uT={}));const ge=Je.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ki=t=>{switch(typeof t){case"undefined":return ge.undefined;case"string":return ge.string;case"number":return Number.isNaN(t)?ge.nan:ge.number;case"boolean":return ge.boolean;case"function":return ge.function;case"bigint":return ge.bigint;case"symbol":return ge.symbol;case"object":return Array.isArray(t)?ge.array:t===null?ge.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ge.promise:typeof Map<"u"&&t instanceof Map?ge.map:typeof Set<"u"&&t instanceof Set?ge.set:typeof Date<"u"&&t instanceof Date?ge.date:ge.object;default:return ge.unknown}},Z=Je.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ai extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof ai))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Je.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ai.create=t=>new ai(t);const gw=(t,e)=>{let n;switch(t.code){case Z.invalid_type:t.received===ge.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Z.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Je.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:n=`Unrecognized key(s) in object: ${Je.joinValues(t.keys,", ")}`;break;case Z.invalid_union:n="Invalid input";break;case Z.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Je.joinValues(t.options)}`;break;case Z.invalid_enum_value:n=`Invalid enum value. Expected ${Je.joinValues(t.options)}, received '${t.received}'`;break;case Z.invalid_arguments:n="Invalid function arguments";break;case Z.invalid_return_type:n="Invalid function return type";break;case Z.invalid_date:n="Invalid date";break;case Z.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Je.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Z.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Z.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Z.custom:n="Invalid input";break;case Z.invalid_intersection_types:n="Intersection results could not be merged";break;case Z.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Z.not_finite:n="Number must be finite";break;default:n=e.defaultError,Je.assertNever(t)}return{message:n}};let J6=gw;function e9(){return J6}const t9=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function ce(t,e){const n=e9(),r=t9({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===gw?void 0:gw].filter(s=>!!s)});t.common.issues.push(r)}class fr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return De;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const i=await s.key,o=await s.value;r.push({key:i,value:o})}return fr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return De;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const De=Object.freeze({status:"aborted"}),lu=t=>({status:"dirty",value:t}),Ar=t=>({status:"valid",value:t}),dT=t=>t.status==="aborted",hT=t=>t.status==="dirty",Gl=t=>t.status==="valid",vm=t=>typeof Promise<"u"&&t instanceof Promise;var ve;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ve||(ve={}));class uo{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const fT=(t,e)=>{if(Gl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ai(t.common.issues);return this._error=n,this._error}}};function We(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??r??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??n??a.defaultError}},description:s}}class Qe{get description(){return this._def.description}_getType(e){return ki(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ki(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fr,ctx:{common:e.parent.common,data:e.data,parsedType:ki(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(vm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ki(e)},s=this._parseSync({data:e,path:r.path,parent:r});return fT(r,s)}"~validate"(e){var r,s;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ki(e)};if(!this["~standard"].async)try{const i=this._parseSync({data:e,path:[],parent:n});return Gl(i)?{value:i.value}:{issues:n.common.issues}}catch(i){(s=(r=i==null?void 0:i.message)==null?void 0:r.toLowerCase())!=null&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>Gl(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ki(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(vm(s)?s:Promise.resolve(s));return fT(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Z.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Yl({schema:this,typeName:je.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ji.create(this,this._def)}nullable(){return Ql.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xs.create(this)}promise(){return _m.create(this,this._def)}or(e){return wm.create([this,e],this._def)}and(e){return xm.create(this,e,this._def)}transform(e){return new Yl({...We(this._def),schema:this,typeName:je.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new yw({...We(this._def),innerType:this,defaultValue:n,typeName:je.ZodDefault})}brand(){return new T9({typeName:je.ZodBranded,type:this,...We(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ww({...We(this._def),innerType:this,catchValue:n,typeName:je.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return L0.create(this,e)}readonly(){return xw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const n9=/^c[^\s-]{8,}$/i,r9=/^[0-9a-z]+$/,s9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,i9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,o9=/^[a-z0-9_-]{21}$/i,a9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,l9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,c9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,u9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Rv;const d9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,h9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,f9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,m9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,p9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,g9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eP="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",v9=new RegExp(`^${eP}$`);function tP(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function y9(t){return new RegExp(`^${tP(t)}$`)}function w9(t){let e=`${eP}T${tP(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function x9(t,e){return!!((e==="v4"||!e)&&d9.test(t)||(e==="v6"||!e)&&f9.test(t))}function _9(t,e){if(!a9.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||"typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function b9(t,e){return!!((e==="v4"||!e)&&h9.test(t)||(e==="v6"||!e)&&m9.test(t))}class Bi extends Qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ge.string){const i=this._getOrReturnCtx(e);return ce(i,{code:Z.invalid_type,expected:ge.string,received:i.parsedType}),De}const r=new fr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ce(s,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ce(s,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")c9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"email",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Rv||(Rv=new RegExp(u9,"u")),Rv.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"emoji",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")i9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"uuid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")o9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"nanoid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")n9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")r9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cuid2",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")s9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ulid",code:Z.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ce(s,{validation:"url",code:Z.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"regex",code:Z.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?w9(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?v9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?y9(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?l9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"duration",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?x9(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"ip",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?_9(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"jwt",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?b9(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"cidr",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?p9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"base64",code:Z.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?g9.test(e.data)||(s=this._getOrReturnCtx(e,s),ce(s,{validation:"base64url",code:Z.invalid_string,message:i.message}),r.dirty()):Je.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Z.invalid_string,...ve.errToObj(r)})}_addCheck(e){return new Bi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ve.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ve.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ve.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ve.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ve.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ve.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ve.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ve.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ve.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ve.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ve.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ve.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ve.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...ve.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ve.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ve.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ve.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ve.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ve.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ve.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ve.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ve.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ve.errToObj(n)})}nonempty(e){return this.min(1,ve.errToObj(e))}trim(){return new Bi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Bi.create=t=>new Bi({checks:[],typeName:je.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...We(t)});function E9(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class sd extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ge.number){const i=this._getOrReturnCtx(e);return ce(i,{code:Z.invalid_type,expected:ge.number,received:i.parsedType}),De}let r;const s=new fr;for(const i of this._def.checks)i.kind==="int"?Je.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?E9(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.not_finite,message:i.message}),s.dirty()):Je.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ve.toString(n))}setLimit(e,n,r,s){return new sd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ve.toString(s)}]})}_addCheck(e){return new sd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ve.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ve.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ve.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ve.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Je.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}sd.create=t=>new sd({checks:[],typeName:je.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...We(t)});class id extends Qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ge.bigint)return this._getInvalidInput(e);let r;const s=new fr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ce(r,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Je.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return ce(n,{code:Z.invalid_type,expected:ge.bigint,received:n.parsedType}),De}gte(e,n){return this.setLimit("min",e,!0,ve.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ve.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ve.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ve.toString(n))}setLimit(e,n,r,s){return new id({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ve.toString(s)}]})}_addCheck(e){return new id({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ve.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ve.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ve.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}id.create=t=>new id({checks:[],typeName:je.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...We(t)});class mT extends Qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ge.boolean){const r=this._getOrReturnCtx(e);return ce(r,{code:Z.invalid_type,expected:ge.boolean,received:r.parsedType}),De}return Ar(e.data)}}mT.create=t=>new mT({typeName:je.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...We(t)});class ym extends Qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ge.date){const i=this._getOrReturnCtx(e);return ce(i,{code:Z.invalid_type,expected:ge.date,received:i.parsedType}),De}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ce(i,{code:Z.invalid_date}),De}const r=new fr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ce(s,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Je.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ym({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ve.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ve.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ym.create=t=>new ym({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:je.ZodDate,...We(t)});class pT extends Qe{_parse(e){if(this._getType(e)!==ge.symbol){const r=this._getOrReturnCtx(e);return ce(r,{code:Z.invalid_type,expected:ge.symbol,received:r.parsedType}),De}return Ar(e.data)}}pT.create=t=>new pT({typeName:je.ZodSymbol,...We(t)});class gT extends Qe{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:Z.invalid_type,expected:ge.undefined,received:r.parsedType}),De}return Ar(e.data)}}gT.create=t=>new gT({typeName:je.ZodUndefined,...We(t)});class vT extends Qe{_parse(e){if(this._getType(e)!==ge.null){const r=this._getOrReturnCtx(e);return ce(r,{code:Z.invalid_type,expected:ge.null,received:r.parsedType}),De}return Ar(e.data)}}vT.create=t=>new vT({typeName:je.ZodNull,...We(t)});class yT extends Qe{constructor(){super(...arguments),this._any=!0}_parse(e){return Ar(e.data)}}yT.create=t=>new yT({typeName:je.ZodAny,...We(t)});class wT extends Qe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ar(e.data)}}wT.create=t=>new wT({typeName:je.ZodUnknown,...We(t)});class ho extends Qe{_parse(e){const n=this._getOrReturnCtx(e);return ce(n,{code:Z.invalid_type,expected:ge.never,received:n.parsedType}),De}}ho.create=t=>new ho({typeName:je.ZodNever,...We(t)});class xT extends Qe{_parse(e){if(this._getType(e)!==ge.undefined){const r=this._getOrReturnCtx(e);return ce(r,{code:Z.invalid_type,expected:ge.void,received:r.parsedType}),De}return Ar(e.data)}}xT.create=t=>new xT({typeName:je.ZodVoid,...We(t)});class xs extends Qe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==ge.array)return ce(n,{code:Z.invalid_type,expected:ge.array,received:n.parsedType}),De;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ce(n,{code:o?Z.too_big:Z.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ce(n,{code:Z.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ce(n,{code:Z.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new uo(n,o,n.path,a)))).then(o=>fr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new uo(n,o,n.path,a)));return fr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new xs({...this._def,minLength:{value:e,message:ve.toString(n)}})}max(e,n){return new xs({...this._def,maxLength:{value:e,message:ve.toString(n)}})}length(e,n){return new xs({...this._def,exactLength:{value:e,message:ve.toString(n)}})}nonempty(e){return this.min(1,e)}}xs.create=(t,e)=>new xs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:je.ZodArray,...We(e)});function Ka(t){if(t instanceof Mt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ji.create(Ka(r))}return new Mt({...t._def,shape:()=>e})}else return t instanceof xs?new xs({...t._def,type:Ka(t.element)}):t instanceof Ji?Ji.create(Ka(t.unwrap())):t instanceof Ql?Ql.create(Ka(t.unwrap())):t instanceof ma?ma.create(t.items.map(e=>Ka(e))):t}class Mt extends Qe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Je.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==ge.object){const u=this._getOrReturnCtx(e);return ce(u,{code:Z.invalid_type,expected:ge.object,received:u.parsedType}),De}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ho&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const h=i[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:h._parse(new uo(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof ho){const u=this._def.unknownKeys;if(u==="passthrough")for(const h of a)c.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(u==="strict")a.length>0&&(ce(s,{code:Z.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const h of a){const f=s.data[h];c.push({key:{status:"valid",value:h},value:u._parse(new uo(s,f,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const h of c){const f=await h.key,m=await h.value;u.push({key:f,value:m,alwaysSet:h.alwaysSet})}return u}).then(u=>fr.mergeObjectSync(r,u)):fr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ve.errToObj,new Mt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,o;const s=((o=(i=this._def).errorMap)==null?void 0:o.call(i,n,r).message)??r.defaultError;return n.code==="unrecognized_keys"?{message:ve.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Mt({...this._def,unknownKeys:"strip"})}passthrough(){return new Mt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Mt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Mt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:je.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Mt({...this._def,catchall:e})}pick(e){const n={};for(const r of Je.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Mt({...this._def,shape:()=>n})}omit(e){const n={};for(const r of Je.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Mt({...this._def,shape:()=>n})}deepPartial(){return Ka(this)}partial(e){const n={};for(const r of Je.objectKeys(this.shape)){const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}return new Mt({...this._def,shape:()=>n})}required(e){const n={};for(const r of Je.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ji;)i=i._def.innerType;n[r]=i}return new Mt({...this._def,shape:()=>n})}keyof(){return nP(Je.objectKeys(this.shape))}}Mt.create=(t,e)=>new Mt({shape:()=>t,unknownKeys:"strip",catchall:ho.create(),typeName:je.ZodObject,...We(e)});Mt.strictCreate=(t,e)=>new Mt({shape:()=>t,unknownKeys:"strict",catchall:ho.create(),typeName:je.ZodObject,...We(e)});Mt.lazycreate=(t,e)=>new Mt({shape:t,unknownKeys:"strip",catchall:ho.create(),typeName:je.ZodObject,...We(e)});class wm extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ai(a.ctx.common.issues));return ce(n,{code:Z.invalid_union,unionErrors:o}),De}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},h=c._parseSync({data:n.data,path:n.path,parent:u});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ai(c));return ce(n,{code:Z.invalid_union,unionErrors:a}),De}}get options(){return this._def.options}}wm.create=(t,e)=>new wm({options:t,typeName:je.ZodUnion,...We(e)});function vw(t,e){const n=ki(t),r=ki(e);if(t===e)return{valid:!0,data:t};if(n===ge.object&&r===ge.object){const s=Je.objectKeys(e),i=Je.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=vw(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===ge.array&&r===ge.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=vw(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===ge.date&&r===ge.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class xm extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(dT(i)||dT(o))return De;const a=vw(i.value,o.value);return a.valid?((hT(i)||hT(o))&&n.dirty(),{status:n.value,value:a.data}):(ce(r,{code:Z.invalid_intersection_types}),De)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}xm.create=(t,e,n)=>new xm({left:t,right:e,typeName:je.ZodIntersection,...We(n)});class ma extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.array)return ce(r,{code:Z.invalid_type,expected:ge.array,received:r.parsedType}),De;if(r.data.length<this._def.items.length)return ce(r,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),De;!this._def.rest&&r.data.length>this._def.items.length&&(ce(r,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new uo(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>fr.mergeArray(n,o)):fr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ma({...this._def,rest:e})}}ma.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ma({items:t,typeName:je.ZodTuple,rest:null,...We(e)})};class _T extends Qe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.map)return ce(r,{code:Z.invalid_type,expected:ge.map,received:r.parsedType}),De;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new uo(r,a,r.path,[u,"key"])),value:i._parse(new uo(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,h=await c.value;if(u.status==="aborted"||h.status==="aborted")return De;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(u.value,h.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,h=c.value;if(u.status==="aborted"||h.status==="aborted")return De;(u.status==="dirty"||h.status==="dirty")&&n.dirty(),a.set(u.value,h.value)}return{status:n.value,value:a}}}}_T.create=(t,e,n)=>new _T({valueType:e,keyType:t,typeName:je.ZodMap,...We(n)});class od extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ge.set)return ce(r,{code:Z.invalid_type,expected:ge.set,received:r.parsedType}),De;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ce(r,{code:Z.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ce(r,{code:Z.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const h of c){if(h.status==="aborted")return De;h.status==="dirty"&&n.dirty(),u.add(h.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new uo(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new od({...this._def,minSize:{value:e,message:ve.toString(n)}})}max(e,n){return new od({...this._def,maxSize:{value:e,message:ve.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}od.create=(t,e)=>new od({valueType:t,minSize:null,maxSize:null,typeName:je.ZodSet,...We(e)});class bT extends Qe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}bT.create=(t,e)=>new bT({getter:t,typeName:je.ZodLazy,...We(e)});class ET extends Qe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ce(n,{received:n.data,code:Z.invalid_literal,expected:this._def.value}),De}return{status:"valid",value:e.data}}get value(){return this._def.value}}ET.create=(t,e)=>new ET({value:t,typeName:je.ZodLiteral,...We(e)});function nP(t,e){return new Kl({values:t,typeName:je.ZodEnum,...We(e)})}class Kl extends Qe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ce(n,{expected:Je.joinValues(r),received:n.parsedType,code:Z.invalid_type}),De}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return ce(n,{received:n.data,code:Z.invalid_enum_value,options:r}),De}return Ar(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Kl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Kl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Kl.create=nP;class TT extends Qe{_parse(e){const n=Je.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ge.string&&r.parsedType!==ge.number){const s=Je.objectValues(n);return ce(r,{expected:Je.joinValues(s),received:r.parsedType,code:Z.invalid_type}),De}if(this._cache||(this._cache=new Set(Je.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=Je.objectValues(n);return ce(r,{received:r.data,code:Z.invalid_enum_value,options:s}),De}return Ar(e.data)}get enum(){return this._def.values}}TT.create=(t,e)=>new TT({values:t,typeName:je.ZodNativeEnum,...We(e)});class _m extends Qe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ge.promise&&n.common.async===!1)return ce(n,{code:Z.invalid_type,expected:ge.promise,received:n.parsedType}),De;const r=n.parsedType===ge.promise?n.data:Promise.resolve(n.data);return Ar(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_m.create=(t,e)=>new _m({type:t,typeName:je.ZodPromise,...We(e)});class Yl extends Qe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===je.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ce(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return De;const c=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return c.status==="aborted"?De:c.status==="dirty"||n.value==="dirty"?lu(c.value):c});{if(n.value==="aborted")return De;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?De:a.status==="dirty"||n.value==="dirty"?lu(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?De:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?De:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Gl(o))return De;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Gl(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):De);Je.assertNever(s)}}Yl.create=(t,e,n)=>new Yl({schema:t,typeName:je.ZodEffects,effect:e,...We(n)});Yl.createWithPreprocess=(t,e,n)=>new Yl({schema:e,effect:{type:"preprocess",transform:t},typeName:je.ZodEffects,...We(n)});class Ji extends Qe{_parse(e){return this._getType(e)===ge.undefined?Ar(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ji.create=(t,e)=>new Ji({innerType:t,typeName:je.ZodOptional,...We(e)});class Ql extends Qe{_parse(e){return this._getType(e)===ge.null?Ar(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ql.create=(t,e)=>new Ql({innerType:t,typeName:je.ZodNullable,...We(e)});class yw extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ge.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}yw.create=(t,e)=>new yw({innerType:t,typeName:je.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...We(e)});class ww extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return vm(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ai(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ai(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ww.create=(t,e)=>new ww({innerType:t,typeName:je.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...We(e)});class ST extends Qe{_parse(e){if(this._getType(e)!==ge.nan){const r=this._getOrReturnCtx(e);return ce(r,{code:Z.invalid_type,expected:ge.nan,received:r.parsedType}),De}return{status:"valid",value:e.data}}}ST.create=t=>new ST({typeName:je.ZodNaN,...We(t)});class T9 extends Qe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class L0 extends Qe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?De:i.status==="dirty"?(n.dirty(),lu(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?De:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new L0({in:e,out:n,typeName:je.ZodPipeline})}}class xw extends Qe{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Gl(s)&&(s.value=Object.freeze(s.value)),s);return vm(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}xw.create=(t,e)=>new xw({innerType:t,typeName:je.ZodReadonly,...We(e)});var je;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(je||(je={}));const CT=Bi.create;ho.create;xs.create;const S9=Mt.create;wm.create;xm.create;ma.create;Kl.create;_m.create;Ji.create;Ql.create;/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rP=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>p.createElement("svg",{ref:c,...I9,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:rP("lucide",s),...a},[...o.map(([u,h])=>p.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(k9,{ref:i,iconNode:e,className:rP(`lucide-${C9(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=_e("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=_e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=_e("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=_e("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=_e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=_e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=_e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=_e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=_e("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=_e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=_e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=_e("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=_e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=_e("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=_e("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=_e("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=_e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=_e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=_e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=_e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=_e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=_e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=_e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=_e("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=_e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=_e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=_e("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=_e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=_e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=_e("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=_e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=_e("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=_e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),AT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,PT=PA,Up=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return PT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const m=AT(h)||AT(f);return s[u][m]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...v}=h;return Object.entries(v).every(b=>{let[w,x]=b;return Array.isArray(x)?x.includes({...i,...a}[w]):{...i,...a}[w]===x})?[...u,f,m]:u},[]);return PT(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},ad=Up("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ee=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?GN:"button";return l.jsx(o,{className:pe(ad({variant:e,size:n,className:t})),ref:i,...s})});Ee.displayName="Button";const Ot=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ot.displayName="Card";const Fs=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:pe("flex flex-col space-y-1.5 p-6",t),...e}));Fs.displayName="CardHeader";const Us=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:pe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Us.displayName="CardTitle";const z9=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));z9.displayName="CardDescription";const Gt=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:pe("p-6 pt-0",t),...e}));Gt.displayName="CardContent";const B9=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:pe("flex items-center p-6 pt-0",t),...e}));B9.displayName="CardFooter";var W9="Label",dP=p.forwardRef((t,e)=>l.jsx(Ne.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));dP.displayName=W9;var hP=dP;const H9=Up("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vn=p.forwardRef(({className:t,...e},n)=>l.jsx(hP,{ref:n,className:pe(H9(),t),...e}));Vn.displayName=hP.displayName;const $p=P6,fP=p.createContext({}),vt=({...t})=>l.jsx(fP.Provider,{value:{name:t.name},children:l.jsx(M6,{...t})}),zp=()=>{const t=p.useContext(fP),e=p.useContext(mP),{getFieldState:n,formState:r}=Op(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},mP=p.createContext({}),mt=p.forwardRef(({className:t,...e},n)=>{const r=p.useId();return l.jsx(mP.Provider,{value:{id:r},children:l.jsx("div",{ref:n,className:pe("space-y-2",t),...e})})});mt.displayName="FormItem";const pt=p.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=zp();return l.jsx(Vn,{ref:n,className:pe(r&&"text-destructive",t),htmlFor:s,...e})});pt.displayName="FormLabel";const yt=p.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:i}=zp();return l.jsx(GN,{ref:e,id:r,"aria-describedby":n?`${s} ${i}`:`${s}`,"aria-invalid":!!n,...t})});yt.displayName="FormControl";const q9=p.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=zp();return l.jsx("p",{ref:n,id:r,className:pe("text-sm text-muted-foreground",t),...e})});q9.displayName="FormDescription";const Kt=p.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:i}=zp(),o=s?String((s==null?void 0:s.message)??""):e;return o?l.jsx("p",{ref:r,id:i,className:pe("text-sm font-medium text-destructive",t),...n,children:o}):null});Kt.displayName="FormMessage";function Aw(t,[e,n]){return Math.min(n,Math.max(e,t))}function W0(t){const e=t+"CollectionProvider",[n,r]=Nr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:x,children:_}=w,y=Le.useRef(null),T=Le.useRef(new Map).current;return l.jsx(s,{scope:x,itemMap:T,collectionRef:y,children:_})};o.displayName=e;const a=t+"CollectionSlot",c=oo(a),u=Le.forwardRef((w,x)=>{const{scope:_,children:y}=w,T=i(a,_),N=$e(x,T.collectionRef);return l.jsx(c,{ref:N,children:y})});u.displayName=a;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=oo(h),v=Le.forwardRef((w,x)=>{const{scope:_,children:y,...T}=w,N=Le.useRef(null),j=$e(x,N),M=i(h,_);return Le.useEffect(()=>(M.itemMap.set(N,{ref:N,...T}),()=>void M.itemMap.delete(N))),l.jsx(m,{[f]:"",ref:j,children:y})});v.displayName=h;function b(w){const x=i(t+"CollectionConsumer",w);return Le.useCallback(()=>{const y=x.collectionRef.current;if(!y)return[];const T=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((M,C)=>T.indexOf(M.ref.current)-T.indexOf(C.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:v},b,r]}var G9=p.createContext(void 0);function Bp(t){const e=p.useContext(G9);return t||e||"ltr"}var Dv=0;function Wp(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??RT()),document.body.insertAdjacentElement("beforeend",t[1]??RT()),Dv++,()=>{Dv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Dv--}},[])}function RT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var jv="focusScope.autoFocusOnMount",Mv="focusScope.autoFocusOnUnmount",DT={bubbles:!1,cancelable:!0},K9="FocusScope",Dd=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,c]=p.useState(null),u=nn(s),h=nn(i),f=p.useRef(null),m=$e(e,w=>c(w)),v=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let w=function(T){if(v.paused||!a)return;const N=T.target;a.contains(N)?f.current=N:Si(f.current,{select:!0})},x=function(T){if(v.paused||!a)return;const N=T.relatedTarget;N!==null&&(a.contains(N)||Si(f.current,{select:!0}))},_=function(T){if(document.activeElement===document.body)for(const j of T)j.removedNodes.length>0&&Si(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",x);const y=new MutationObserver(_);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",x),y.disconnect()}}},[r,a,v.paused]),p.useEffect(()=>{if(a){MT.add(v);const w=document.activeElement;if(!a.contains(w)){const _=new CustomEvent(jv,DT);a.addEventListener(jv,u),a.dispatchEvent(_),_.defaultPrevented||(Y9(eU(pP(a)),{select:!0}),document.activeElement===w&&Si(a))}return()=>{a.removeEventListener(jv,u),setTimeout(()=>{const _=new CustomEvent(Mv,DT);a.addEventListener(Mv,h),a.dispatchEvent(_),_.defaultPrevented||Si(w??document.body,{select:!0}),a.removeEventListener(Mv,h),MT.remove(v)},0)}}},[a,u,h,v]);const b=p.useCallback(w=>{if(!n&&!r||v.paused)return;const x=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,_=document.activeElement;if(x&&_){const y=w.currentTarget,[T,N]=Q9(y);T&&N?!w.shiftKey&&_===N?(w.preventDefault(),n&&Si(T,{select:!0})):w.shiftKey&&_===T&&(w.preventDefault(),n&&Si(N,{select:!0})):_===y&&w.preventDefault()}},[n,r,v.paused]);return l.jsx(Ne.div,{tabIndex:-1,...o,ref:m,onKeyDown:b})});Dd.displayName=K9;function Y9(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Si(r,{select:e}),document.activeElement!==n)return}function Q9(t){const e=pP(t),n=jT(e,t),r=jT(e.reverse(),t);return[n,r]}function pP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function jT(t,e){for(const n of t)if(!X9(n,{upTo:e}))return n}function X9(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Z9(t){return t instanceof HTMLInputElement&&"select"in t}function Si(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Z9(t)&&e&&t.select()}}var MT=J9();function J9(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=OT(t,e),t.unshift(e)},remove(e){var n;t=OT(t,e),(n=t[0])==null||n.resume()}}}function OT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function eU(t){return t.filter(e=>e.tagName!=="A")}function gP(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var tU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},$a=new WeakMap,Hh=new WeakMap,qh={},Ov=0,vP=function(t){return t&&(t.host||vP(t.parentNode))},nU=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=vP(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},rU=function(t,e,n,r){var s=nU(e,Array.isArray(t)?t:[t]);qh[n]||(qh[n]=new WeakMap);var i=qh[n],o=[],a=new Set,c=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))h(m);else try{var v=m.getAttribute(r),b=v!==null&&v!=="false",w=($a.get(m)||0)+1,x=(i.get(m)||0)+1;$a.set(m,w),i.set(m,x),o.push(m),w===1&&b&&Hh.set(m,!0),x===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return h(e),a.clear(),Ov++,function(){o.forEach(function(f){var m=$a.get(f)-1,v=i.get(f)-1;$a.set(f,m),i.set(f,v),m||(Hh.has(f)||f.removeAttribute(r),Hh.delete(f)),v||f.removeAttribute(n)}),Ov--,Ov||($a=new WeakMap,$a=new WeakMap,Hh=new WeakMap,qh={})}},Hp=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=tU(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),rU(r,s,n,"aria-hidden")):function(){return null}},ds=function(){return ds=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ds.apply(this,arguments)};function jd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function sU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var _f="right-scroll-bar-position",bf="width-before-scroll-bar",iU="with-scroll-bars-hidden",oU="--removed-body-scroll-bar-size";function Lv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function aU(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var lU=typeof window<"u"?p.useLayoutEffect:p.useEffect,LT=new WeakMap;function cU(t,e){var n=aU(null,function(r){return t.forEach(function(s){return Lv(s,r)})});return lU(function(){var r=LT.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Lv(a,null)}),i.forEach(function(a){s.has(a)||Lv(a,o)})}LT.set(n,t)},[t]),n}function uU(t){return t}function dU(t,e){e===void 0&&(e=uU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function hU(t){t===void 0&&(t={});var e=dU(null);return e.options=ds({async:!0,ssr:!1},t),e}var yP=function(t){var e=t.sideCar,n=jd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,ds({},n))};yP.isSideCarExport=!0;function fU(t,e){return t.useMedium(e),yP}var wP=hU(),Vv=function(){},qp=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Vv,onWheelCapture:Vv,onTouchMoveCapture:Vv}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,v=t.noRelative,b=t.noIsolation,w=t.inert,x=t.allowPinchZoom,_=t.as,y=_===void 0?"div":_,T=t.gapMode,N=jd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,M=cU([n,e]),C=ds(ds({},N),s);return p.createElement(p.Fragment,null,h&&p.createElement(j,{sideCar:wP,removeScrollBar:u,shards:f,noRelative:v,noIsolation:b,inert:w,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:T}),o?p.cloneElement(p.Children.only(a),ds(ds({},C),{ref:M})):p.createElement(y,ds({},C,{className:c,ref:M}),a))});qp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qp.classNames={fullWidth:bf,zeroRight:_f};var mU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=mU();return e&&t.setAttribute("nonce",e),t}function gU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function vU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var yU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=pU())&&(gU(e,n),vU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},wU=function(){var t=yU();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},xP=function(){var t=wU(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},xU={left:0,top:0,right:0,gap:0},Fv=function(t){return parseInt(t||"",10)||0},_U=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Fv(n),Fv(r),Fv(s)]},bU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return xU;var e=_U(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},EU=xP(),_l="data-scroll-locked",TU=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(iU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(_l,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_f,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(bf,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(_f," .").concat(_f,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(bf," .").concat(bf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_l,`] {
    `).concat(oU,": ").concat(a,`px;
  }
`)},VT=function(){var t=parseInt(document.body.getAttribute(_l)||"0",10);return isFinite(t)?t:0},SU=function(){p.useEffect(function(){return document.body.setAttribute(_l,(VT()+1).toString()),function(){var t=VT()-1;t<=0?document.body.removeAttribute(_l):document.body.setAttribute(_l,t.toString())}},[])},CU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;SU();var i=p.useMemo(function(){return bU(s)},[s]);return p.createElement(EU,{styles:TU(i,!e,s,n?"":"!important")})},Pw=!1;if(typeof window<"u")try{var Gh=Object.defineProperty({},"passive",{get:function(){return Pw=!0,!0}});window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{Pw=!1}var za=Pw?{passive:!1}:!1,IU=function(t){return t.tagName==="TEXTAREA"},_P=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!IU(t)&&n[e]==="visible")},kU=function(t){return _P(t,"overflowY")},NU=function(t){return _P(t,"overflowX")},FT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=bP(t,r);if(s){var i=EP(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},AU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},PU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},bP=function(t,e){return t==="v"?kU(e):NU(e)},EP=function(t,e){return t==="v"?AU(e):PU(e)},RU=function(t,e){return t==="h"&&e==="rtl"?-1:1},DU=function(t,e,n,r,s){var i=RU(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,c=e.contains(a),u=!1,h=o>0,f=0,m=0;do{if(!a)break;var v=EP(t,a),b=v[0],w=v[1],x=v[2],_=w-x-i*b;(b||_)&&bP(t,a)&&(f+=_,m+=b);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&Math.abs(f)<1||!h&&Math.abs(m)<1)&&(u=!0),u},Kh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},UT=function(t){return[t.deltaX,t.deltaY]},$T=function(t){return t&&"current"in t?t.current:t},jU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},MU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},OU=0,Ba=[];function LU(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(OU++)[0],i=p.useState(xP)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var w=sU([t.lockRef.current],(t.shards||[]).map($T),!0).filter(Boolean);return w.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(w,x){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var _=Kh(w),y=n.current,T="deltaX"in w?w.deltaX:y[0]-_[0],N="deltaY"in w?w.deltaY:y[1]-_[1],j,M=w.target,C=Math.abs(T)>Math.abs(N)?"h":"v";if("touches"in w&&C==="h"&&M.type==="range")return!1;var k=FT(C,M);if(!k)return!0;if(k?j=C:(j=C==="v"?"h":"v",k=FT(C,M)),!k)return!1;if(!r.current&&"changedTouches"in w&&(T||N)&&(r.current=j),!j)return!0;var R=r.current||j;return DU(R,x,w,R==="h"?T:N)},[]),c=p.useCallback(function(w){var x=w;if(!(!Ba.length||Ba[Ba.length-1]!==i)){var _="deltaY"in x?UT(x):Kh(x),y=e.current.filter(function(j){return j.name===x.type&&(j.target===x.target||x.target===j.shadowParent)&&jU(j.delta,_)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var T=(o.current.shards||[]).map($T).filter(Boolean).filter(function(j){return j.contains(x.target)}),N=T.length>0?a(x,T[0]):!o.current.noIsolation;N&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(w,x,_,y){var T={name:w,delta:x,target:_,should:y,shadowParent:VU(_)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(N){return N!==T})},1)},[]),h=p.useCallback(function(w){n.current=Kh(w),r.current=void 0},[]),f=p.useCallback(function(w){u(w.type,UT(w),w.target,a(w,t.lockRef.current))},[]),m=p.useCallback(function(w){u(w.type,Kh(w),w.target,a(w,t.lockRef.current))},[]);p.useEffect(function(){return Ba.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,za),document.addEventListener("touchmove",c,za),document.addEventListener("touchstart",h,za),function(){Ba=Ba.filter(function(w){return w!==i}),document.removeEventListener("wheel",c,za),document.removeEventListener("touchmove",c,za),document.removeEventListener("touchstart",h,za)}},[]);var v=t.removeScrollBar,b=t.inert;return p.createElement(p.Fragment,null,b?p.createElement(i,{styles:MU(s)}):null,v?p.createElement(CU,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function VU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const FU=fU(wP,LU);var Md=p.forwardRef(function(t,e){return p.createElement(qp,ds({},t,{ref:e,sideCar:FU}))});Md.classNames=qp.classNames;var UU=[" ","Enter","ArrowUp","ArrowDown"],$U=[" ","Enter"],pa="Select",[Gp,Kp,zU]=W0(pa),[bc,Bte]=Nr(pa,[zU,So]),Yp=So(),[BU,Io]=bc(pa),[WU,HU]=bc(pa),TP=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:v,form:b}=t,w=Yp(e),[x,_]=p.useState(null),[y,T]=p.useState(null),[N,j]=p.useState(!1),M=Bp(u),[C,k]=co({prop:r,defaultProp:s??!1,onChange:i,caller:pa}),[R,I]=co({prop:o,defaultProp:a,onChange:c,caller:pa}),S=p.useRef(null),P=x?b||!!x.closest("form"):!0,[A,W]=p.useState(new Set),Q=Array.from(A).map(J=>J.props.value).join(";");return l.jsx(Np,{...w,children:l.jsxs(BU,{required:v,scope:e,trigger:x,onTriggerChange:_,valueNode:y,onValueNodeChange:T,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:Yr(),value:R,onValueChange:I,open:C,onOpenChange:k,dir:M,triggerPointerDownPosRef:S,disabled:m,children:[l.jsx(Gp.Provider,{scope:e,children:l.jsx(WU,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(J=>{W(H=>new Set(H).add(J))},[]),onNativeOptionRemove:p.useCallback(J=>{W(H=>{const O=new Set(H);return O.delete(J),O})},[]),children:n})}),P?l.jsxs(KP,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:R,onChange:J=>I(J.target.value),disabled:m,form:b,children:[R===void 0?l.jsx("option",{value:""}):null,Array.from(A)]},Q):null]})})};TP.displayName=pa;var SP="SelectTrigger",CP=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Yp(n),o=Io(SP,n),a=o.disabled||r,c=$e(e,o.onTriggerChange),u=Kp(n),h=p.useRef("touch"),[f,m,v]=QP(w=>{const x=u().filter(T=>!T.disabled),_=x.find(T=>T.value===o.value),y=XP(x,w,_);y!==void 0&&o.onValueChange(y.value)}),b=w=>{a||(o.onOpenChange(!0),v()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return l.jsx(Ad,{asChild:!0,...i,children:l.jsx(Ne.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":YP(o.value)?"":void 0,...s,ref:c,onClick:ie(s.onClick,w=>{w.currentTarget.focus(),h.current!=="mouse"&&b(w)}),onPointerDown:ie(s.onPointerDown,w=>{h.current=w.pointerType;const x=w.target;x.hasPointerCapture(w.pointerId)&&x.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(b(w),w.preventDefault())}),onKeyDown:ie(s.onKeyDown,w=>{const x=f.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(x&&w.key===" ")&&UU.includes(w.key)&&(b(),w.preventDefault())})})})});CP.displayName=SP;var IP="SelectValue",kP=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,c=Io(IP,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=$e(e,c.onValueNodeChange);return an(()=>{u(h)},[u,h]),l.jsx(Ne.span,{...a,ref:f,style:{pointerEvents:"none"},children:YP(c.value)?l.jsx(l.Fragment,{children:o}):i})});kP.displayName=IP;var qU="SelectIcon",NP=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(Ne.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});NP.displayName=qU;var GU="SelectPortal",AP=t=>l.jsx(Pd,{asChild:!0,...t});AP.displayName=GU;var ga="SelectContent",PP=p.forwardRef((t,e)=>{const n=Io(ga,t.__scopeSelect),[r,s]=p.useState();if(an(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?mc.createPortal(l.jsx(RP,{scope:t.__scopeSelect,children:l.jsx(Gp.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),i):null}return l.jsx(DP,{...t,ref:e})});PP.displayName=ga;var Mr=10,[RP,ko]=bc(ga),KU="SelectContentImpl",YU=oo("SelectContent.RemoveScroll"),DP=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:b,hideWhenDetached:w,avoidCollisions:x,..._}=t,y=Io(ga,n),[T,N]=p.useState(null),[j,M]=p.useState(null),C=$e(e,he=>N(he)),[k,R]=p.useState(null),[I,S]=p.useState(null),P=Kp(n),[A,W]=p.useState(!1),Q=p.useRef(!1);p.useEffect(()=>{if(T)return Hp(T)},[T]),Wp();const J=p.useCallback(he=>{const[te,...we]=P().map(ye=>ye.ref.current),[le]=we.slice(-1),Ve=document.activeElement;for(const ye of he)if(ye===Ve||(ye==null||ye.scrollIntoView({block:"nearest"}),ye===te&&j&&(j.scrollTop=0),ye===le&&j&&(j.scrollTop=j.scrollHeight),ye==null||ye.focus(),document.activeElement!==Ve))return},[P,j]),H=p.useCallback(()=>J([k,T]),[J,k,T]);p.useEffect(()=>{A&&H()},[A,H]);const{onOpenChange:O,triggerPointerDownPosRef:F}=y;p.useEffect(()=>{if(T){let he={x:0,y:0};const te=le=>{var Ve,ye;he={x:Math.abs(Math.round(le.pageX)-(((Ve=F.current)==null?void 0:Ve.x)??0)),y:Math.abs(Math.round(le.pageY)-(((ye=F.current)==null?void 0:ye.y)??0))}},we=le=>{he.x<=10&&he.y<=10?le.preventDefault():T.contains(le.target)||O(!1),document.removeEventListener("pointermove",te),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",we,{capture:!0})}}},[T,O,F]),p.useEffect(()=>{const he=()=>O(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[O]);const[X,fe]=QP(he=>{const te=P().filter(Ve=>!Ve.disabled),we=te.find(Ve=>Ve.ref.current===document.activeElement),le=XP(te,he,we);le&&setTimeout(()=>le.ref.current.focus())}),G=p.useCallback((he,te,we)=>{const le=!Q.current&&!we;(y.value!==void 0&&y.value===te||le)&&(R(he),le&&(Q.current=!0))},[y.value]),ue=p.useCallback(()=>T==null?void 0:T.focus(),[T]),ze=p.useCallback((he,te,we)=>{const le=!Q.current&&!we;(y.value!==void 0&&y.value===te||le)&&S(he)},[y.value]),tt=r==="popper"?Rw:jP,Oe=tt===Rw?{side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:v,sticky:b,hideWhenDetached:w,avoidCollisions:x}:{};return l.jsx(RP,{scope:n,content:T,viewport:j,onViewportChange:M,itemRefCallback:G,selectedItem:k,onItemLeave:ue,itemTextRefCallback:ze,focusSelectedItem:H,selectedItemText:I,position:r,isPositioned:A,searchRef:X,children:l.jsx(Md,{as:YU,allowPinchZoom:!0,children:l.jsx(Dd,{asChild:!0,trapped:y.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:ie(s,he=>{var te;(te=y.trigger)==null||te.focus({preventScroll:!0}),he.preventDefault()}),children:l.jsx(gc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:l.jsx(tt,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:he=>he.preventDefault(),..._,...Oe,onPlaced:()=>W(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:ie(_.onKeyDown,he=>{const te=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!te&&he.key.length===1&&fe(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let le=P().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);if(["ArrowUp","End"].includes(he.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const Ve=he.target,ye=le.indexOf(Ve);le=le.slice(ye+1)}setTimeout(()=>J(le)),he.preventDefault()}})})})})})})});DP.displayName=KU;var QU="SelectItemAlignedPosition",jP=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Io(ga,n),o=ko(ga,n),[a,c]=p.useState(null),[u,h]=p.useState(null),f=$e(e,C=>h(C)),m=Kp(n),v=p.useRef(!1),b=p.useRef(!0),{viewport:w,selectedItem:x,selectedItemText:_,focusSelectedItem:y}=o,T=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&w&&x&&_){const C=i.trigger.getBoundingClientRect(),k=u.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),I=_.getBoundingClientRect();if(i.dir!=="rtl"){const Ve=I.left-k.left,ye=R.left-Ve,lt=C.left-ye,Vt=C.width+lt,Ln=Math.max(Vt,k.width),Zn=window.innerWidth-Mr,wr=Aw(ye,[Mr,Math.max(Mr,Zn-Ln)]);a.style.minWidth=Vt+"px",a.style.left=wr+"px"}else{const Ve=k.right-I.right,ye=window.innerWidth-R.right-Ve,lt=window.innerWidth-C.right-ye,Vt=C.width+lt,Ln=Math.max(Vt,k.width),Zn=window.innerWidth-Mr,wr=Aw(ye,[Mr,Math.max(Mr,Zn-Ln)]);a.style.minWidth=Vt+"px",a.style.right=wr+"px"}const S=m(),P=window.innerHeight-Mr*2,A=w.scrollHeight,W=window.getComputedStyle(u),Q=parseInt(W.borderTopWidth,10),J=parseInt(W.paddingTop,10),H=parseInt(W.borderBottomWidth,10),O=parseInt(W.paddingBottom,10),F=Q+J+A+O+H,X=Math.min(x.offsetHeight*5,F),fe=window.getComputedStyle(w),G=parseInt(fe.paddingTop,10),ue=parseInt(fe.paddingBottom,10),ze=C.top+C.height/2-Mr,tt=P-ze,Oe=x.offsetHeight/2,he=x.offsetTop+Oe,te=Q+J+he,we=F-te;if(te<=ze){const Ve=S.length>0&&x===S[S.length-1].ref.current;a.style.bottom="0px";const ye=u.clientHeight-w.offsetTop-w.offsetHeight,lt=Math.max(tt,Oe+(Ve?ue:0)+ye+H),Vt=te+lt;a.style.height=Vt+"px"}else{const Ve=S.length>0&&x===S[0].ref.current;a.style.top="0px";const lt=Math.max(ze,Q+w.offsetTop+(Ve?G:0)+Oe)+we;a.style.height=lt+"px",w.scrollTop=te-ze+w.offsetTop}a.style.margin=`${Mr}px 0`,a.style.minHeight=X+"px",a.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[m,i.trigger,i.valueNode,a,u,w,x,_,i.dir,r]);an(()=>T(),[T]);const[N,j]=p.useState();an(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const M=p.useCallback(C=>{C&&b.current===!0&&(T(),y==null||y(),b.current=!1)},[T,y]);return l.jsx(ZU,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:v,onScrollButtonChange:M,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:l.jsx(Ne.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});jP.displayName=QU;var XU="SelectPopperPosition",Rw=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Mr,...i}=t,o=Yp(n);return l.jsx(Ap,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rw.displayName=XU;var[ZU,H0]=bc(ga,{}),Dw="SelectViewport",MP=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ko(Dw,n),o=H0(Dw,n),a=$e(e,i.onViewportChange),c=p.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Gp.Slot,{scope:n,children:l.jsx(Ne.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ie(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const b=window.innerHeight-Mr*2,w=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),_=Math.max(w,x);if(_<b){const y=_+v,T=Math.min(b,y),N=y-T;f.style.height=T+"px",f.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});MP.displayName=Dw;var OP="SelectGroup",[JU,e$]=bc(OP),t$=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Yr();return l.jsx(JU,{scope:n,id:s,children:l.jsx(Ne.div,{role:"group","aria-labelledby":s,...r,ref:e})})});t$.displayName=OP;var LP="SelectLabel",VP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=e$(LP,n);return l.jsx(Ne.div,{id:s.id,...r,ref:e})});VP.displayName=LP;var Cm="SelectItem",[n$,FP]=bc(Cm),UP=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Io(Cm,n),c=ko(Cm,n),u=a.value===r,[h,f]=p.useState(i??""),[m,v]=p.useState(!1),b=$e(e,y=>{var T;return(T=c.itemRefCallback)==null?void 0:T.call(c,y,r,s)}),w=Yr(),x=p.useRef("touch"),_=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(n$,{scope:n,value:r,disabled:s,textId:w,isSelected:u,onItemTextChange:p.useCallback(y=>{f(T=>T||((y==null?void 0:y.textContent)??"").trim())},[]),children:l.jsx(Gp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:l.jsx(Ne.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:ie(o.onFocus,()=>v(!0)),onBlur:ie(o.onBlur,()=>v(!1)),onClick:ie(o.onClick,()=>{x.current!=="mouse"&&_()}),onPointerUp:ie(o.onPointerUp,()=>{x.current==="mouse"&&_()}),onPointerDown:ie(o.onPointerDown,y=>{x.current=y.pointerType}),onPointerMove:ie(o.onPointerMove,y=>{var T;x.current=y.pointerType,s?(T=c.onItemLeave)==null||T.call(c):x.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ie(o.onPointerLeave,y=>{var T;y.currentTarget===document.activeElement&&((T=c.onItemLeave)==null||T.call(c))}),onKeyDown:ie(o.onKeyDown,y=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&y.key===" "||($U.includes(y.key)&&_(),y.key===" "&&y.preventDefault())})})})})});UP.displayName=Cm;var cu="SelectItemText",$P=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Io(cu,n),a=ko(cu,n),c=FP(cu,n),u=HU(cu,n),[h,f]=p.useState(null),m=$e(e,_=>f(_),c.onItemTextChange,_=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,_,c.value,c.disabled)}),v=h==null?void 0:h.textContent,b=p.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:w,onNativeOptionRemove:x}=u;return an(()=>(w(b),()=>x(b)),[w,x,b]),l.jsxs(l.Fragment,{children:[l.jsx(Ne.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?mc.createPortal(i.children,o.valueNode):null]})});$P.displayName=cu;var zP="SelectItemIndicator",BP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return FP(zP,n).isSelected?l.jsx(Ne.span,{"aria-hidden":!0,...r,ref:e}):null});BP.displayName=zP;var jw="SelectScrollUpButton",WP=p.forwardRef((t,e)=>{const n=ko(jw,t.__scopeSelect),r=H0(jw,t.__scopeSelect),[s,i]=p.useState(!1),o=$e(e,r.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(qP,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});WP.displayName=jw;var Mw="SelectScrollDownButton",HP=p.forwardRef((t,e)=>{const n=ko(Mw,t.__scopeSelect),r=H0(Mw,t.__scopeSelect),[s,i]=p.useState(!1),o=$e(e,r.onScrollButtonChange);return an(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(qP,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});HP.displayName=Mw;var qP=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ko("SelectScrollButton",n),o=p.useRef(null),a=Kp(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),an(()=>{var h;const u=a().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),l.jsx(Ne.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ie(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ie(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ie(s.onPointerLeave,()=>{c()})})}),r$="SelectSeparator",GP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(Ne.div,{"aria-hidden":!0,...r,ref:e})});GP.displayName=r$;var Ow="SelectArrow",s$=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Yp(n),i=Io(Ow,n),o=ko(Ow,n);return i.open&&o.position==="popper"?l.jsx(Pp,{...s,...r,ref:e}):null});s$.displayName=Ow;var i$="SelectBubbleInput",KP=p.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=p.useRef(null),i=$e(r,s),o=gP(e);return p.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(f)}},[o,e]),l.jsx(Ne.select,{...n,style:{...xA,...n.style},ref:i,defaultValue:e})});KP.displayName=i$;function YP(t){return t===""||t===void 0}function QP(t){const e=nn(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=n.current+o;e(a),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function XP(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=o$(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function o$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var a$=TP,ZP=CP,l$=kP,c$=NP,u$=AP,JP=PP,d$=MP,eR=VP,tR=UP,h$=$P,f$=BP,nR=WP,rR=HP,sR=GP;const ir=a$,or=l$,Wn=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(ZP,{ref:r,className:pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(c$,{asChild:!0,children:l.jsx(F0,{className:"h-4 w-4 opacity-50"})})]}));Wn.displayName=ZP.displayName;const iR=p.forwardRef(({className:t,...e},n)=>l.jsx(nR,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(P9,{className:"h-4 w-4"})}));iR.displayName=nR.displayName;const oR=p.forwardRef(({className:t,...e},n)=>l.jsx(rR,{ref:n,className:pe("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(F0,{className:"h-4 w-4"})}));oR.displayName=rR.displayName;const Hn=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(u$,{children:l.jsxs(JP,{ref:s,className:pe("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(iR,{}),l.jsx(d$,{className:pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(oR,{})]})}));Hn.displayName=JP.displayName;const m$=p.forwardRef(({className:t,...e},n)=>l.jsx(eR,{ref:n,className:pe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));m$.displayName=eR.displayName;const Re=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(tR,{ref:r,className:pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(f$,{children:l.jsx(_c,{className:"h-4 w-4"})})}),l.jsx(h$,{children:e})]}));Re.displayName=tR.displayName;const p$=p.forwardRef(({className:t,...e},n)=>l.jsx(sR,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));p$.displayName=sR.displayName;const Yt=p.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Yt.displayName="Input";const g$=1,v$=1e6;let Uv=0;function y$(){return Uv=(Uv+1)%Number.MAX_SAFE_INTEGER,Uv.toString()}const $v=new Map,zT=t=>{if($v.has(t))return;const e=setTimeout(()=>{$v.delete(t),ku({type:"REMOVE_TOAST",toastId:t})},v$);$v.set(t,e)},w$=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,g$)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?zT(n):t.toasts.forEach(r=>{zT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ef=[];let Tf={toasts:[]};function ku(t){Tf=w$(Tf,t),Ef.forEach(e=>{e(Tf)})}function x$({...t}){const e=y$(),n=s=>ku({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ku({type:"DISMISS_TOAST",toastId:e});return ku({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function As(){const[t,e]=p.useState(Tf);return p.useEffect(()=>(Ef.push(e),()=>{const n=Ef.indexOf(e);n>-1&&Ef.splice(n,1)}),[t]),{...t,toast:x$,dismiss:n=>ku({type:"DISMISS_TOAST",toastId:n})}}const _$=S9({username:CT().min(1,"Seleziona un nome utente"),password:CT().min(1,"Inserisci una password")});function b$(){const{login:t}=Mn(),{toast:e}=As(),[n,r]=p.useState(!1),s=Lp({resolver:Z6(_$),defaultValues:{username:"",password:""}}),i=async o=>{r(!0);try{await t(o),e({title:"Bentornato!",description:"Accesso effettuato con successo."})}catch(a){e({title:"Accesso fallito",description:a instanceof Error?a.message:"Credenziali non valide",variant:"destructive"})}finally{r(!1)}};return l.jsx("div",{className:"min-h-screen bg-eggshell flex items-center justify-center p-4",children:l.jsx(Ot,{className:"w-full max-w-md",children:l.jsxs(Gt,{className:"pt-8 pb-8 px-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-16 h-16 bg-burnt-sienna rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(aP,{className:"h-8 w-8 text-white"})}),l.jsx("h1",{className:"text-3xl font-bold text-delft-blue mb-2",children:"HomeTask"}),l.jsx("p",{className:"text-gray-600",children:"Accedi per gestire le attività"})]}),l.jsx($p,{...s,children:l.jsxs("form",{onSubmit:s.handleSubmit(i),className:"space-y-6",children:[l.jsx(vt,{control:s.control,name:"username",render:({field:o})=>l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Nome utente"}),l.jsxs(ir,{onValueChange:o.onChange,defaultValue:o.value,children:[l.jsx(yt,{children:l.jsx(Wn,{children:l.jsx(or,{placeholder:"Seleziona un utente"})})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"admin",children:"admin (Amministratore)"}),l.jsx(Re,{value:"Fabio",children:"Fabio (Membro della famiglia)"}),l.jsx(Re,{value:"Ludovica",children:"Ludovica (Membro della famiglia)"})]})]}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:s.control,name:"password",render:({field:o})=>l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Password"}),l.jsx(yt,{children:l.jsx(Yt,{...o,type:"password",placeholder:"Inserisci la password"})}),l.jsx(Kt,{})]})}),l.jsxs(Ee,{type:"submit",className:"w-full bg-burnt-sienna hover:bg-burnt-sienna/90 text-white font-semibold py-3",disabled:n,children:[n&&l.jsx(fo,{className:"mr-2 h-4 w-4 animate-spin"}),"Accedi"]})]})})]})})})}function E$(){return l.jsx(b$,{})}const aR=p.createContext(void 0);function T$({children:t}){const[e,n]=p.useState(()=>typeof window<"u"&&sessionStorage.getItem("theme")||"light");p.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(e),sessionStorage.setItem("theme",e)},[e]);const r=i=>{n(i)},s=()=>{n(i=>i==="light"?"dark":"light")};return l.jsx(aR.Provider,{value:{theme:e,toggleTheme:s,setTheme:r},children:t})}function lR(){const t=p.useContext(aR);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const S$=()=>{};var BT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},C$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},uR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,v=u&63;c||(v=64,o||(m=64)),r.push(n[h],n[f],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new I$;const m=i<<2|a>>4;if(r.push(m),u!==64){const v=a<<4&240|u>>2;if(r.push(v),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class I$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k$=function(t){const e=cR(t);return uR.encodeByteArray(e,!0)},Im=function(t){return k$(t).replace(/\./g,"")},dR=function(t){try{return uR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$=()=>N$().__FIREBASE_DEFAULTS__,P$=()=>{if(typeof process>"u"||typeof BT>"u")return;const t=BT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dR(t[1]);return e&&JSON.parse(e)},Qp=()=>{try{return S$()||A$()||P$()||R$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hR=t=>{var e,n;return(n=(e=Qp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fR=t=>{const e=hR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mR=()=>{var t;return(t=Qp())===null||t===void 0?void 0:t.config},pR=t=>{var e;return(e=Qp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){return t.endsWith(".cloudworkstations.dev")}async function q0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Im(JSON.stringify(n)),Im(JSON.stringify(o)),""].join(".")}const Nu={};function j$(){const t={prod:[],emulator:[]};for(const e of Object.keys(Nu))Nu[e]?t.emulator.push(e):t.prod.push(e);return t}function M$(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let WT=!1;function G0(t,e){if(typeof window>"u"||typeof document>"u"||!Ca(window.location.host)||Nu[t]===e||Nu[t]||WT)return;Nu[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=j$().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{WT=!0,o()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=M$(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),w=n("learnmore"),x=document.getElementById(w)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const T=m.element;a(T),h(x,w);const N=u();c(y,_),T.append(y,b,x,N),document.body.appendChild(T)}i?(b.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O$(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function L$(){var t;const e=(t=Qp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V$(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F$(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U$(){const t=En();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $$(){return!L$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K0(){try{return typeof indexedDB=="object"}catch{return!1}}function Y0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function yR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$="FirebaseError";class Pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z$,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,No.prototype.create)}}class No{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?B$(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Pr(s,a,r)}}function B$(t,e){return t.replace(W$,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const W$=/\{\$([^}]+)}/g;function H$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function po(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(HT(i)&&HT(o)){if(!po(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function HT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function q$(t,e){const n=new G$(t,e);return n.subscribe.bind(n)}class G${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");K$(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=zv),s.error===void 0&&(s.error=zv),s.complete===void 0&&(s.complete=zv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zv(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$=1e3,Q$=2,X$=4*60*60*1e3,Z$=.5;function qT(t,e=Y$,n=Q$){const r=e*Math.pow(n,t),s=Math.round(Z$*r*(Math.random()-.5)*2);return Math.min(X$,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Qn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new D$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tz(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ez(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ez(t){return t===zo?void 0:t}function tz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const rz={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},sz=qe.INFO,iz={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},oz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=iz[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xp{constructor(e){this.name=e,this._logLevel=sz,this._logHandler=oz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const az=(t,e)=>e.some(n=>t instanceof n);let GT,KT;function lz(){return GT||(GT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cz(){return KT||(KT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wR=new WeakMap,Lw=new WeakMap,xR=new WeakMap,Bv=new WeakMap,Q0=new WeakMap;function uz(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Js(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wR.set(n,t)}).catch(()=>{}),Q0.set(e,t),e}function dz(t){if(Lw.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Lw.set(t,e)}let Vw={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lw.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hz(t){Vw=t(Vw)}function fz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wv(this),e,...n);return xR.set(r,e.sort?e.sort():[e]),Js(r)}:cz().includes(t)?function(...e){return t.apply(Wv(this),e),Js(wR.get(this))}:function(...e){return Js(t.apply(Wv(this),e))}}function mz(t){return typeof t=="function"?fz(t):(t instanceof IDBTransaction&&dz(t),az(t,lz())?new Proxy(t,Vw):t)}function Js(t){if(t instanceof IDBRequest)return uz(t);if(Bv.has(t))return Bv.get(t);const e=mz(t);return e!==t&&(Bv.set(t,e),Q0.set(e,t)),e}const Wv=t=>Q0.get(t);function Zp(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Js(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Js(o.result),c.oldVersion,c.newVersion,Js(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function Hv(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Js(n).then(()=>{})}const pz=["get","getKey","getAll","getAllKeys","count"],gz=["put","add","delete","clear"],qv=new Map;function YT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qv.get(e))return qv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=gz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pz.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return qv.set(e,i),i}hz(t=>({...t,get:(e,n,r)=>YT(e,n)||t.get(e,n,r),has:(e,n)=>!!YT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fw="@firebase/app",QT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new Xp("@firebase/app"),wz="@firebase/app-compat",xz="@firebase/analytics-compat",_z="@firebase/analytics",bz="@firebase/app-check-compat",Ez="@firebase/app-check",Tz="@firebase/auth",Sz="@firebase/auth-compat",Cz="@firebase/database",Iz="@firebase/data-connect",kz="@firebase/database-compat",Nz="@firebase/functions",Az="@firebase/functions-compat",Pz="@firebase/installations",Rz="@firebase/installations-compat",Dz="@firebase/messaging",jz="@firebase/messaging-compat",Mz="@firebase/performance",Oz="@firebase/performance-compat",Lz="@firebase/remote-config",Vz="@firebase/remote-config-compat",Fz="@firebase/storage",Uz="@firebase/storage-compat",$z="@firebase/firestore",zz="@firebase/ai",Bz="@firebase/firestore-compat",Wz="firebase",Hz="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="[DEFAULT]",qz={[Fw]:"fire-core",[wz]:"fire-core-compat",[_z]:"fire-analytics",[xz]:"fire-analytics-compat",[Ez]:"fire-app-check",[bz]:"fire-app-check-compat",[Tz]:"fire-auth",[Sz]:"fire-auth-compat",[Cz]:"fire-rtdb",[Iz]:"fire-data-connect",[kz]:"fire-rtdb-compat",[Nz]:"fire-fn",[Az]:"fire-fn-compat",[Pz]:"fire-iid",[Rz]:"fire-iid-compat",[Dz]:"fire-fcm",[jz]:"fire-fcm-compat",[Mz]:"fire-perf",[Oz]:"fire-perf-compat",[Lz]:"fire-rc",[Vz]:"fire-rc-compat",[Fz]:"fire-gcs",[Uz]:"fire-gcs-compat",[$z]:"fire-fst",[Bz]:"fire-fst-compat",[zz]:"fire-vertex","fire-js":"fire-js",[Wz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=new Map,Gz=new Map,$w=new Map;function XT(t,e){try{t.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mr(t){const e=t.name;if($w.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;$w.set(e,t);for(const n of km.values())XT(n,t);for(const n of Gz.values())XT(n,t);return!0}function mi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Wr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new No("app","Firebase",Kz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=Hz;function _R(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Uw,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw eo.create("bad-app-name",{appName:String(s)});if(n||(n=mR()),!n)throw eo.create("no-options");const i=km.get(s);if(i){if(po(n,i.options)&&po(r,i.config))return i;throw eo.create("duplicate-app",{appName:s})}const o=new nz(s);for(const c of $w.values())o.addComponent(c);const a=new Yz(n,r,o);return km.set(s,a),a}function Ld(t=Uw){const e=km.get(t);if(!e&&t===Uw&&mR())return _R();if(!e)throw eo.create("no-app",{appName:t});return e}function xn(t,e,n){var r;let s=(r=qz[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(a.join(" "));return}mr(new Qn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz="firebase-heartbeat-database",Xz=1,ld="firebase-heartbeat-store";let Gv=null;function bR(){return Gv||(Gv=Zp(Qz,Xz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ld)}catch(n){console.warn(n)}}}}).catch(t=>{throw eo.create("idb-open",{originalErrorMessage:t.message})})),Gv}async function Zz(t){try{const n=(await bR()).transaction(ld),r=await n.objectStore(ld).get(ER(t));return await n.done,r}catch(e){if(e instanceof Pr)li.warn(e.message);else{const n=eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(n.message)}}}async function ZT(t,e){try{const r=(await bR()).transaction(ld,"readwrite");await r.objectStore(ld).put(e,ER(t)),await r.done}catch(n){if(n instanceof Pr)li.warn(n.message);else{const r=eo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});li.warn(r.message)}}}function ER(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz=1024,eB=30;class tB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=JT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>eB){const o=sB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){li.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=JT(),{heartbeatsToSend:r,unsentEntries:s}=nB(this._heartbeatsCache.heartbeats),i=Im(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return li.warn(n),""}}}function JT(){return new Date().toISOString().substring(0,10)}function nB(t,e=Jz){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),eS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),eS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K0()?Y0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ZT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ZT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eS(t){return Im(JSON.stringify({version:2,heartbeats:t})).length}function sB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){mr(new Qn("platform-logger",e=>new vz(e),"PRIVATE")),mr(new Qn("heartbeat",e=>new tB(e),"PRIVATE")),xn(Fw,QT,t),xn(Fw,QT,"esm2017"),xn("fire-js","")}iB("");const TR="@firebase/installations",X0="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=1e4,CR=`w:${X0}`,IR="FIS_v2",oB="https://firebaseinstallations.googleapis.com/v1",aB=60*60*1e3,lB="installations",cB="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},va=new No(lB,cB,uB);function kR(t){return t instanceof Pr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR({projectId:t}){return`${oB}/projects/${t}/installations`}function AR(t){return{token:t.token,requestStatus:2,expiresIn:hB(t.expiresIn),creationTime:Date.now()}}async function PR(t,e){const r=(await e.json()).error;return va.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function RR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function dB(t,{refreshToken:e}){const n=RR(t);return n.append("Authorization",fB(e)),n}async function DR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function hB(t){return Number(t.replace("s","000"))}function fB(t){return`${IR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mB({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=NR(t),s=RR(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:IR,appId:t.appId,sdkVersion:CR},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await DR(()=>fetch(r,a));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:AR(u.authToken)}}else throw await PR("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pB(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=/^[cdef][\w-]{21}$/,zw="";function vB(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=yB(t);return gB.test(n)?n:zw}catch{return zw}}function yB(t){return pB(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new Map;function OR(t,e){const n=Jp(t);LR(n,e),wB(n,e)}function LR(t,e){const n=MR.get(t);if(n)for(const r of n)r(e)}function wB(t,e){const n=xB();n&&n.postMessage({key:t,fid:e}),_B()}let Qo=null;function xB(){return!Qo&&"BroadcastChannel"in self&&(Qo=new BroadcastChannel("[Firebase] FID Change"),Qo.onmessage=t=>{LR(t.data.key,t.data.fid)}),Qo}function _B(){MR.size===0&&Qo&&(Qo.close(),Qo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="firebase-installations-database",EB=1,ya="firebase-installations-store";let Kv=null;function Z0(){return Kv||(Kv=Zp(bB,EB,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ya)}}})),Kv}async function Nm(t,e){const n=Jp(t),s=(await Z0()).transaction(ya,"readwrite"),i=s.objectStore(ya),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&OR(t,e.fid),e}async function VR(t){const e=Jp(t),r=(await Z0()).transaction(ya,"readwrite");await r.objectStore(ya).delete(e),await r.done}async function eg(t,e){const n=Jp(t),s=(await Z0()).transaction(ya,"readwrite"),i=s.objectStore(ya),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&OR(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J0(t){let e;const n=await eg(t.appConfig,r=>{const s=TB(r),i=SB(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===zw?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function TB(t){const e=t||{fid:vB(),registrationStatus:0};return FR(e)}function SB(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(va.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=CB(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:IB(t)}:{installationEntry:e}}async function CB(t,e){try{const n=await mB(t,e);return Nm(t.appConfig,n)}catch(n){throw kR(n)&&n.customData.serverCode===409?await VR(t.appConfig):await Nm(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function IB(t){let e=await tS(t.appConfig);for(;e.registrationStatus===1;)await jR(100),e=await tS(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await J0(t);return r||n}return e}function tS(t){return eg(t,e=>{if(!e)throw va.create("installation-not-found");return FR(e)})}function FR(t){return kB(t)?{fid:t.fid,registrationStatus:0}:t}function kB(t){return t.registrationStatus===1&&t.registrationTime+SR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NB({appConfig:t,heartbeatServiceProvider:e},n){const r=AB(t,n),s=dB(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:CR,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},c=await DR(()=>fetch(r,a));if(c.ok){const u=await c.json();return AR(u)}else throw await PR("Generate Auth Token",c)}function AB(t,{fid:e}){return`${NR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(t,e=!1){let n;const r=await eg(t.appConfig,i=>{if(!UR(i))throw va.create("not-registered");const o=i.authToken;if(!e&&DB(o))return i;if(o.requestStatus===1)return n=PB(t,e),i;{if(!navigator.onLine)throw va.create("app-offline");const a=MB(i);return n=RB(t,a),a}});return n?await n:r.authToken}async function PB(t,e){let n=await nS(t.appConfig);for(;n.authToken.requestStatus===1;)await jR(100),n=await nS(t.appConfig);const r=n.authToken;return r.requestStatus===0?e_(t,e):r}function nS(t){return eg(t,e=>{if(!UR(e))throw va.create("not-registered");const n=e.authToken;return OB(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function RB(t,e){try{const n=await NB(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Nm(t.appConfig,r),n}catch(n){if(kR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await VR(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Nm(t.appConfig,r)}throw n}}function UR(t){return t!==void 0&&t.registrationStatus===2}function DB(t){return t.requestStatus===2&&!jB(t)}function jB(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+aB}function MB(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function OB(t){return t.requestStatus===1&&t.requestTime+SR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LB(t){const e=t,{installationEntry:n,registrationPromise:r}=await J0(e);return r?r.catch(console.error):e_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e=!1){const n=t;return await FB(n),(await e_(n,e)).token}async function FB(t){const{registrationPromise:e}=await J0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t){if(!t||!t.options)throw Yv("App Configuration");if(!t.name)throw Yv("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Yv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Yv(t){return va.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="installations",$B="installations-internal",zB=t=>{const e=t.getProvider("app").getImmediate(),n=UB(e),r=mi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},BB=t=>{const e=t.getProvider("app").getImmediate(),n=mi(e,$R).getImmediate();return{getId:()=>LB(n),getToken:s=>VB(n,s)}};function WB(){mr(new Qn($R,zB,"PUBLIC")),mr(new Qn($B,BB,"PRIVATE"))}WB();xn(TR,X0);xn(TR,X0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB="/firebase-messaging-sw.js",qB="/firebase-cloud-messaging-push-scope",zR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",GB="https://fcmregistrations.googleapis.com/v1",BR="google.c.a.c_id",KB="google.c.a.c_l",YB="google.c.a.ts",QB="google.c.a.e",rS=1e4;var sS;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(sS||(sS={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var cd;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(cd||(cd={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function XB(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="fcm_token_details_db",ZB=5,iS="fcm_token_object_Store";async function JB(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Qv))return null;let e=null;return(await Zp(Qv,ZB,{upgrade:async(r,s,i,o)=>{var a;if(s<2||!r.objectStoreNames.contains(iS))return;const c=o.objectStore(iS),u=await c.index("fcmSenderId").get(t);if(await c.clear(),!!u){if(s===2){const h=u;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Bs(h.vapidKey)}}}else if(s===3){const h=u;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Bs(h.auth),p256dh:Bs(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Bs(h.vapidKey)}}}else if(s===4){const h=u;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Bs(h.auth),p256dh:Bs(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Bs(h.vapidKey)}}}}}})).close(),await Hv(Qv),await Hv("fcm_vapid_details_db"),await Hv("undefined"),e8(e)?e:null}function e8(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8="firebase-messaging-database",n8=1,ud="firebase-messaging-store";let Xv=null;function WR(){return Xv||(Xv=Zp(t8,n8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ud)}}})),Xv}async function r8(t){const e=HR(t),r=await(await WR()).transaction(ud).objectStore(ud).get(e);if(r)return r;{const s=await JB(t.appConfig.senderId);if(s)return await t_(t,s),s}}async function t_(t,e){const n=HR(t),s=(await WR()).transaction(ud,"readwrite");return await s.objectStore(ud).put(e,n),await s.done,e}function HR({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},_n=new No("messaging","Messaging",s8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8(t,e){const n=await r_(t),r=qR(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(n_(t.appConfig),s)).json()}catch(o){throw _n.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw _n.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw _n.create("token-subscribe-no-token");return i.token}async function o8(t,e){const n=await r_(t),r=qR(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${n_(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw _n.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw _n.create("token-update-failed",{errorInfo:o})}if(!i.token)throw _n.create("token-update-no-token");return i.token}async function a8(t,e){const r={method:"DELETE",headers:await r_(t)};try{const i=await(await fetch(`${n_(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw _n.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw _n.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function n_({projectId:t}){return`${GB}/projects/${t}/registrations`}async function r_({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function qR({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==zR&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=7*24*60*60*1e3;async function c8(t){const e=await d8(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Bs(e.getKey("auth")),p256dh:Bs(e.getKey("p256dh"))},r=await r8(t.firebaseDependencies);if(r){if(h8(r.subscriptionOptions,n))return Date.now()>=r.createTime+l8?u8(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await a8(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return oS(t.firebaseDependencies,n)}else return oS(t.firebaseDependencies,n)}async function u8(t,e){try{const n=await o8(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await t_(t.firebaseDependencies,r),n}catch(n){throw n}}async function oS(t,e){const r={token:await i8(t,e),createTime:Date.now(),subscriptionOptions:e};return await t_(t,r),r.token}async function d8(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:XB(e)})}function h8(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return f8(e,t),m8(e,t),p8(e,t),e}function f8(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function m8(t,e){e.data&&(t.data=e.data)}function p8(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){return typeof t=="object"&&!!t&&BR in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t){if(!t||!t.options)throw Zv("App Configuration Object");if(!t.name)throw Zv("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Zv(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Zv(t){return _n.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=v8(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w8(t){try{t.swRegistration=await navigator.serviceWorker.register(HB,{scope:qB}),t.swRegistration.update().catch(()=>{}),await x8(t.swRegistration)}catch(e){throw _n.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function x8(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${rS} ms`)),rS),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=i=>{var o;((o=i.target)===null||o===void 0?void 0:o.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _8(t,e){if(!e&&!t.swRegistration&&await w8(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw _n.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b8(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=zR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){if(!navigator)throw _n.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw _n.create("permission-blocked");return await b8(t,e==null?void 0:e.vapidKey),await _8(t,e==null?void 0:e.serviceWorkerRegistration),c8(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E8(t,e,n){const r=T8(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[BR],message_name:n[KB],message_time:n[YB],message_device_time:Math.floor(Date.now()/1e3)})}function T8(t){switch(t){case cd.NOTIFICATION_CLICKED:return"notification_open";case cd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===cd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(aS(n)):t.onMessageHandler.next(aS(n)));const r=n.data;g8(r)&&r[QB]==="1"&&await E8(t,n.messageType,r)}const lS="@firebase/messaging",cS="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=t=>{const e=new y8(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>S8(e,n)),e},I8=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>GR(e,r)}};function k8(){mr(new Qn("messaging",C8,"PUBLIC")),mr(new Qn("messaging-internal",I8,"PRIVATE")),xn(lS,cS),xn(lS,cS,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N8(){try{await Y0()}catch{return!1}return typeof window<"u"&&K0()&&yR()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(t,e){if(!navigator)throw _n.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t=Ld()){return N8().then(e=>{if(!e)throw _n.create("unsupported-browser")},e=>{throw _n.create("indexed-db-unsupported")}),mi(Dt(t),"messaging").getImmediate()}async function R8(t,e){return t=Dt(t),GR(t,e)}function D8(t,e){return t=Dt(t),A8(t,e)}k8();const j8="BHvJqEIDOQuhXFouxEo9drLiqJpatiR-25GUZxorXO5GaA8viMvouU9N3oQ7wtmgCFCx3eDW_JP62fHHxAfGlNw";function M8(){const[t,e]=p.useState("default"),[n,r]=p.useState(null),{toast:s}=As();p.useEffect(()=>{e(Notification.permission),"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(c=>{}).catch(c=>{console.error("❌ Service Worker registration failed:",c)})},[]);const i=async()=>{try{const c=await Notification.requestPermission();e(c),c==="granted"&&(await o(),s({title:"🔔 Notifiche attivate",description:"Riceverai aggiornamenti famiglia!"}))}catch(c){console.error("Errore permessi:",c),s({title:"Errore notifiche",description:"Impossibile attivare le notifiche",variant:"destructive"})}},o=async()=>{try{const c=P8(),u=await R8(c,{vapidKey:j8});u&&(r(u),await a(u),D8(c,h=>{var f,m;s({title:((f=h.notification)==null?void 0:f.title)||"Nuovo aggiornamento",description:((m=h.notification)==null?void 0:m.body)||"Controlla l'app"})}))}catch(c){console.error("Errore FCM setup:",c)}},a=async c=>{};return{permission:t,token:n,requestPermission:i,isSupported:"Notification"in window&&"serviceWorker"in navigator}}var Jv="rovingFocusGroup.onEntryFocus",O8={bubbles:!1,cancelable:!0},Vd="RovingFocusGroup",[Bw,KR,L8]=W0(Vd),[V8,YR]=Nr(Vd,[L8]),[F8,U8]=V8(Vd),QR=p.forwardRef((t,e)=>l.jsx(Bw.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(Bw.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx($8,{...t,ref:e})})}));QR.displayName=Vd;var $8=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),v=$e(e,m),b=Bp(i),[w,x]=co({prop:o,defaultProp:a??null,onChange:c,caller:Vd}),[_,y]=p.useState(!1),T=nn(u),N=KR(n),j=p.useRef(!1),[M,C]=p.useState(0);return p.useEffect(()=>{const k=m.current;if(k)return k.addEventListener(Jv,T),()=>k.removeEventListener(Jv,T)},[T]),l.jsx(F8,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:w,onItemFocus:p.useCallback(k=>x(k),[x]),onItemShiftTab:p.useCallback(()=>y(!0),[]),onFocusableItemAdd:p.useCallback(()=>C(k=>k+1),[]),onFocusableItemRemove:p.useCallback(()=>C(k=>k-1),[]),children:l.jsx(Ne.div,{tabIndex:_||M===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:ie(t.onMouseDown,()=>{j.current=!0}),onFocus:ie(t.onFocus,k=>{const R=!j.current;if(k.target===k.currentTarget&&R&&!_){const I=new CustomEvent(Jv,O8);if(k.currentTarget.dispatchEvent(I),!I.defaultPrevented){const S=N().filter(J=>J.focusable),P=S.find(J=>J.active),A=S.find(J=>J.id===w),Q=[P,A,...S].filter(Boolean).map(J=>J.ref.current);JR(Q,h)}}j.current=!1}),onBlur:ie(t.onBlur,()=>y(!1))})})}),XR="RovingFocusGroupItem",ZR=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...a}=t,c=Yr(),u=i||c,h=U8(XR,n),f=h.currentTabStopId===u,m=KR(n),{onFocusableItemAdd:v,onFocusableItemRemove:b,currentTabStopId:w}=h;return p.useEffect(()=>{if(r)return v(),()=>b()},[r,v,b]),l.jsx(Bw.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(Ne.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:ie(t.onMouseDown,x=>{r?h.onItemFocus(u):x.preventDefault()}),onFocus:ie(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:ie(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){h.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const _=W8(x,h.orientation,h.dir);if(_!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let T=m().filter(N=>N.focusable).map(N=>N.ref.current);if(_==="last")T.reverse();else if(_==="prev"||_==="next"){_==="prev"&&T.reverse();const N=T.indexOf(x.currentTarget);T=h.loop?H8(T,N+1):T.slice(N+1)}setTimeout(()=>JR(T))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:w!=null}):o})})});ZR.displayName=XR;var z8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function B8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function W8(t,e,n){const r=B8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return z8[r]}function JR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function H8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var q8=QR,G8=ZR,Ww=["Enter"," "],K8=["ArrowDown","PageUp","Home"],eD=["ArrowUp","PageDown","End"],Y8=[...K8,...eD],Q8={ltr:[...Ww,"ArrowRight"],rtl:[...Ww,"ArrowLeft"]},X8={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fd="Menu",[dd,Z8,J8]=W0(Fd),[ka,tD]=Nr(Fd,[J8,So,YR]),tg=So(),nD=YR(),[e7,Na]=ka(Fd),[t7,Ud]=ka(Fd),rD=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=tg(e),[c,u]=p.useState(null),h=p.useRef(!1),f=nn(i),m=Bp(s);return p.useEffect(()=>{const v=()=>{h.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>h.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),l.jsx(Np,{...a,children:l.jsx(e7,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:l.jsx(t7,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};rD.displayName=Fd;var n7="MenuAnchor",s_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=tg(n);return l.jsx(Ad,{...s,...r,ref:e})});s_.displayName=n7;var i_="MenuPortal",[r7,sD]=ka(i_,{forceMount:void 0}),iD=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Na(i_,e);return l.jsx(r7,{scope:e,forceMount:n,children:l.jsx(jn,{present:n||i.open,children:l.jsx(Pd,{asChild:!0,container:s,children:r})})})};iD.displayName=i_;var Cr="MenuContent",[s7,o_]=ka(Cr),oD=p.forwardRef((t,e)=>{const n=sD(Cr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Na(Cr,t.__scopeMenu),o=Ud(Cr,t.__scopeMenu);return l.jsx(dd.Provider,{scope:t.__scopeMenu,children:l.jsx(jn,{present:r||i.open,children:l.jsx(dd.Slot,{scope:t.__scopeMenu,children:o.modal?l.jsx(i7,{...s,ref:e}):l.jsx(o7,{...s,ref:e})})})})}),i7=p.forwardRef((t,e)=>{const n=Na(Cr,t.__scopeMenu),r=p.useRef(null),s=$e(e,r);return p.useEffect(()=>{const i=r.current;if(i)return Hp(i)},[]),l.jsx(a_,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ie(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),o7=p.forwardRef((t,e)=>{const n=Na(Cr,t.__scopeMenu);return l.jsx(a_,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),a7=oo("MenuContent.ScrollLock"),a_=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:v,disableOutsideScroll:b,...w}=t,x=Na(Cr,n),_=Ud(Cr,n),y=tg(n),T=nD(n),N=Z8(n),[j,M]=p.useState(null),C=p.useRef(null),k=$e(e,C,x.onContentChange),R=p.useRef(0),I=p.useRef(""),S=p.useRef(0),P=p.useRef(null),A=p.useRef("right"),W=p.useRef(0),Q=b?Md:p.Fragment,J=b?{as:a7,allowPinchZoom:!0}:void 0,H=F=>{var he,te;const X=I.current+F,fe=N().filter(we=>!we.disabled),G=document.activeElement,ue=(he=fe.find(we=>we.ref.current===G))==null?void 0:he.textValue,ze=fe.map(we=>we.textValue),tt=w7(ze,X,ue),Oe=(te=fe.find(we=>we.textValue===tt))==null?void 0:te.ref.current;(function we(le){I.current=le,window.clearTimeout(R.current),le!==""&&(R.current=window.setTimeout(()=>we(""),1e3))})(X),Oe&&setTimeout(()=>Oe.focus())};p.useEffect(()=>()=>window.clearTimeout(R.current),[]),Wp();const O=p.useCallback(F=>{var fe,G;return A.current===((fe=P.current)==null?void 0:fe.side)&&_7(F,(G=P.current)==null?void 0:G.area)},[]);return l.jsx(s7,{scope:n,searchRef:I,onItemEnter:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),onItemLeave:p.useCallback(F=>{var X;O(F)||((X=C.current)==null||X.focus(),M(null))},[O]),onTriggerLeave:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),pointerGraceTimerRef:S,onPointerGraceIntentChange:p.useCallback(F=>{P.current=F},[]),children:l.jsx(Q,{...J,children:l.jsx(Dd,{asChild:!0,trapped:s,onMountAutoFocus:ie(i,F=>{var X;F.preventDefault(),(X=C.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:l.jsx(gc,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:v,children:l.jsx(q8,{asChild:!0,...T,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:M,onEntryFocus:ie(c,F=>{_.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(Ap,{role:"menu","aria-orientation":"vertical","data-state":bD(x.open),"data-radix-menu-content":"",dir:_.dir,...y,...w,ref:k,style:{outline:"none",...w.style},onKeyDown:ie(w.onKeyDown,F=>{const fe=F.target.closest("[data-radix-menu-content]")===F.currentTarget,G=F.ctrlKey||F.altKey||F.metaKey,ue=F.key.length===1;fe&&(F.key==="Tab"&&F.preventDefault(),!G&&ue&&H(F.key));const ze=C.current;if(F.target!==ze||!Y8.includes(F.key))return;F.preventDefault();const Oe=N().filter(he=>!he.disabled).map(he=>he.ref.current);eD.includes(F.key)&&Oe.reverse(),v7(Oe)}),onBlur:ie(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(R.current),I.current="")}),onPointerMove:ie(t.onPointerMove,hd(F=>{const X=F.target,fe=W.current!==F.clientX;if(F.currentTarget.contains(X)&&fe){const G=F.clientX>W.current?"right":"left";A.current=G,W.current=F.clientX}}))})})})})})})});oD.displayName=Cr;var l7="MenuGroup",l_=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ne.div,{role:"group",...r,ref:e})});l_.displayName=l7;var c7="MenuLabel",aD=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ne.div,{...r,ref:e})});aD.displayName=c7;var Am="MenuItem",uS="menu.itemSelect",ng=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=p.useRef(null),o=Ud(Am,t.__scopeMenu),a=o_(Am,t.__scopeMenu),c=$e(e,i),u=p.useRef(!1),h=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(uS,{bubbles:!0,cancelable:!0});f.addEventListener(uS,v=>r==null?void 0:r(v),{once:!0}),QN(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return l.jsx(lD,{...s,ref:c,disabled:n,onClick:ie(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:ie(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:ie(t.onKeyDown,f=>{const m=a.searchRef.current!=="";n||m&&f.key===" "||Ww.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});ng.displayName=Am;var lD=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=o_(Am,n),a=nD(n),c=p.useRef(null),u=$e(e,c),[h,f]=p.useState(!1),[m,v]=p.useState("");return p.useEffect(()=>{const b=c.current;b&&v((b.textContent??"").trim())},[i.children]),l.jsx(dd.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:l.jsx(G8,{asChild:!0,...a,focusable:!r,children:l.jsx(Ne.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:ie(t.onPointerMove,hd(b=>{r?o.onItemLeave(b):(o.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ie(t.onPointerLeave,hd(b=>o.onItemLeave(b))),onFocus:ie(t.onFocus,()=>f(!0)),onBlur:ie(t.onBlur,()=>f(!1))})})})}),u7="MenuCheckboxItem",cD=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return l.jsx(mD,{scope:t.__scopeMenu,checked:n,children:l.jsx(ng,{role:"menuitemcheckbox","aria-checked":Pm(n)?"mixed":n,...s,ref:e,"data-state":u_(n),onSelect:ie(s.onSelect,()=>r==null?void 0:r(Pm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});cD.displayName=u7;var uD="MenuRadioGroup",[d7,h7]=ka(uD,{value:void 0,onValueChange:()=>{}}),dD=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=nn(r);return l.jsx(d7,{scope:t.__scopeMenu,value:n,onValueChange:i,children:l.jsx(l_,{...s,ref:e})})});dD.displayName=uD;var hD="MenuRadioItem",fD=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=h7(hD,t.__scopeMenu),i=n===s.value;return l.jsx(mD,{scope:t.__scopeMenu,checked:i,children:l.jsx(ng,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":u_(i),onSelect:ie(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});fD.displayName=hD;var c_="MenuItemIndicator",[mD,f7]=ka(c_,{checked:!1}),pD=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=f7(c_,n);return l.jsx(jn,{present:r||Pm(i.checked)||i.checked===!0,children:l.jsx(Ne.span,{...s,ref:e,"data-state":u_(i.checked)})})});pD.displayName=c_;var m7="MenuSeparator",gD=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(Ne.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});gD.displayName=m7;var p7="MenuArrow",vD=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=tg(n);return l.jsx(Pp,{...s,...r,ref:e})});vD.displayName=p7;var g7="MenuSub",[Wte,yD]=ka(g7),uu="MenuSubTrigger",wD=p.forwardRef((t,e)=>{const n=Na(uu,t.__scopeMenu),r=Ud(uu,t.__scopeMenu),s=yD(uu,t.__scopeMenu),i=o_(uu,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>h,[h]),p.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),c(null)}},[a,c]),l.jsx(s_,{asChild:!0,...u,children:l.jsx(lD,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":bD(n.open),...t,ref:Sp(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ie(t.onPointerMove,hd(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:ie(t.onPointerLeave,hd(f=>{var v,b;h();const m=(v=n.content)==null?void 0:v.getBoundingClientRect();if(m){const w=(b=n.content)==null?void 0:b.dataset.side,x=w==="right",_=x?-5:5,y=m[x?"left":"right"],T=m[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:y,y:m.top},{x:T,y:m.top},{x:T,y:m.bottom},{x:y,y:m.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ie(t.onKeyDown,f=>{var v;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||Q8[r.dir].includes(f.key)&&(n.onOpenChange(!0),(v=n.content)==null||v.focus(),f.preventDefault())})})})});wD.displayName=uu;var xD="MenuSubContent",_D=p.forwardRef((t,e)=>{const n=sD(Cr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Na(Cr,t.__scopeMenu),o=Ud(Cr,t.__scopeMenu),a=yD(xD,t.__scopeMenu),c=p.useRef(null),u=$e(e,c);return l.jsx(dd.Provider,{scope:t.__scopeMenu,children:l.jsx(jn,{present:r||i.open,children:l.jsx(dd.Slot,{scope:t.__scopeMenu,children:l.jsx(a_,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ie(t.onFocusOutside,h=>{h.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ie(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:ie(t.onKeyDown,h=>{var v;const f=h.currentTarget.contains(h.target),m=X8[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(v=a.trigger)==null||v.focus(),h.preventDefault())})})})})})});_D.displayName=xD;function bD(t){return t?"open":"closed"}function Pm(t){return t==="indeterminate"}function u_(t){return Pm(t)?"indeterminate":t?"checked":"unchecked"}function v7(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function y7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function w7(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=y7(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function x7(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,h=a.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function _7(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return x7(n,e)}function hd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var b7=rD,E7=s_,T7=iD,S7=oD,C7=l_,I7=aD,k7=ng,N7=cD,A7=dD,P7=fD,R7=pD,D7=gD,j7=vD,M7=wD,O7=_D,rg="DropdownMenu",[L7,Hte]=Nr(rg,[tD]),On=tD(),[V7,ED]=L7(rg),TD=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,c=On(e),u=p.useRef(null),[h,f]=co({prop:s,defaultProp:i??!1,onChange:o,caller:rg});return l.jsx(V7,{scope:e,triggerId:Yr(),triggerRef:u,contentId:Yr(),open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:a,children:l.jsx(b7,{...c,open:h,onOpenChange:f,dir:r,modal:a,children:n})})};TD.displayName=rg;var SD="DropdownMenuTrigger",CD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=ED(SD,n),o=On(n);return l.jsx(E7,{asChild:!0,...o,children:l.jsx(Ne.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Sp(e,i.triggerRef),onPointerDown:ie(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:ie(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});CD.displayName=SD;var F7="DropdownMenuPortal",ID=t=>{const{__scopeDropdownMenu:e,...n}=t,r=On(e);return l.jsx(T7,{...r,...n})};ID.displayName=F7;var kD="DropdownMenuContent",ND=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ED(kD,n),i=On(n),o=p.useRef(!1);return l.jsx(S7,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:ie(t.onCloseAutoFocus,a=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ie(t.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ND.displayName=kD;var U7="DropdownMenuGroup",$7=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(C7,{...s,...r,ref:e})});$7.displayName=U7;var z7="DropdownMenuLabel",AD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(I7,{...s,...r,ref:e})});AD.displayName=z7;var B7="DropdownMenuItem",PD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(k7,{...s,...r,ref:e})});PD.displayName=B7;var W7="DropdownMenuCheckboxItem",RD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(N7,{...s,...r,ref:e})});RD.displayName=W7;var H7="DropdownMenuRadioGroup",q7=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(A7,{...s,...r,ref:e})});q7.displayName=H7;var G7="DropdownMenuRadioItem",DD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(P7,{...s,...r,ref:e})});DD.displayName=G7;var K7="DropdownMenuItemIndicator",jD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(R7,{...s,...r,ref:e})});jD.displayName=K7;var Y7="DropdownMenuSeparator",MD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(D7,{...s,...r,ref:e})});MD.displayName=Y7;var Q7="DropdownMenuArrow",X7=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(j7,{...s,...r,ref:e})});X7.displayName=Q7;var Z7="DropdownMenuSubTrigger",OD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(M7,{...s,...r,ref:e})});OD.displayName=Z7;var J7="DropdownMenuSubContent",LD=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=On(n);return l.jsx(O7,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});LD.displayName=J7;var eW=TD,tW=CD,nW=ID,VD=ND,FD=AD,UD=PD,$D=RD,zD=DD,BD=jD,WD=MD,HD=OD,qD=LD;const dS=eW,hS=tW,rW=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>l.jsxs(HD,{ref:s,className:pe("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,l.jsx(U0,{className:"ml-auto"})]}));rW.displayName=HD.displayName;const sW=p.forwardRef(({className:t,...e},n)=>l.jsx(qD,{ref:n,className:pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));sW.displayName=qD.displayName;const Hw=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(nW,{children:l.jsx(VD,{ref:r,sideOffset:e,className:pe("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));Hw.displayName=VD.displayName;const Bo=p.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(UD,{ref:r,className:pe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));Bo.displayName=UD.displayName;const iW=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>l.jsxs($D,{ref:s,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(BD,{children:l.jsx(_c,{className:"h-4 w-4"})})}),e]}));iW.displayName=$D.displayName;const oW=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(zD,{ref:r,className:pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(BD,{children:l.jsx(R9,{className:"h-2 w-2 fill-current"})})}),e]}));oW.displayName=zD.displayName;const qw=p.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(FD,{ref:r,className:pe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));qw.displayName=FD.displayName;const du=p.forwardRef(({className:t,...e},n)=>l.jsx(WD,{ref:n,className:pe("-mx-1 my-1 h-px bg-muted",t),...e}));du.displayName=WD.displayName;const aW=Up("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ce({className:t,variant:e,...n}){return l.jsx("div",{className:pe(aW({variant:e}),t),...n})}const Yh=({className:t})=>l.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/6457/6457403.png",alt:"rat icon",className:t,style:{filter:"brightness(0) invert(1)"}});function lW({onMenuToggle:t}){const{permission:e,requestPermission:n,isSupported:r}=M8(),{user:s,logout:i}=Mn(),{theme:o,toggleTheme:a}=lR(),[c]=MN(),u=[{name:"Lista della Spesa",path:"/shopping"},{name:"Note",path:"/notes"},{name:"Calendario",path:"/calendar"}],h=(s==null?void 0:s.username)==="Fabio"||(s==null?void 0:s.username)==="Ludovica",f=h?{icon:Yh,title:"TopiniTask",iconBgColor:"bg-burnt-sienna",iconTextColor:"text-white"}:{icon:aP,title:"HomeTask",iconBgColor:"bg-burnt-sienna",iconBgStyle:{},iconTextColor:"text-white"},m=f.icon;return l.jsx("header",{className:"bg-card shadow-md border-b border-border sticky top-0 z-40 transition-colors duration-200",children:l.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ee,{variant:"ghost",size:"sm",className:"lg:hidden p-2 text-delft-blue hover:bg-muted",onClick:t,children:l.jsx(L9,{className:"h-6 w-6"})}),l.jsxs("div",{className:"flex items-center ml-2 lg:ml-0",children:[l.jsx("div",{className:`w-8 h-8 ${f.iconBgColor} rounded-lg flex items-center justify-center mr-3 shadow-sm`,style:f.iconBgStyle,children:l.jsx(m,{className:`h-5 w-5 ${f.iconTextColor}`})}),l.jsx("h1",{className:"text-xl font-bold text-delft-blue",children:f.title}),h&&l.jsx("div",{className:"ml-2 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 text-xs rounded-full font-medium",children:"🐭 topiiiiiiii"})]})]}),l.jsxs("nav",{className:"hidden md:flex space-x-8",children:[u.map(v=>l.jsx(vf,{href:v.path,children:l.jsx("span",{className:`font-medium px-1 pb-4 border-b-2 transition-colors cursor-pointer block ${c===v.path?"text-burnt-sienna border-burnt-sienna":"text-muted-foreground hover:text-delft-blue border-transparent hover:border-muted"}`,children:v.name})},v.name)),l.jsxs("a",{href:"https://fabiodagostino.github.io/TripTaste/#/",target:"_blank",rel:"noopener noreferrer",className:"font-medium px-1 pb-4 border-b-2 transition-colors cursor-pointer block text-muted-foreground hover:text-delft-blue border-transparent hover:border-muted flex items-center gap-1",children:["TripTaste",l.jsx(Em,{className:"h-3 w-3"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"md:hidden",children:l.jsx(Ee,{variant:"ghost",size:"sm",asChild:!0,className:"text-muted-foreground hover:text-delft-blue w-9 h-9 rounded-full",children:l.jsx("a",{href:"https://fabiodagostino.github.io/TripTaste/#/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center",title:"TripTaste",children:l.jsx(Em,{className:"h-4 w-4"})})})}),l.jsx(Ee,{variant:"ghost",size:"sm",onClick:a,className:"w-9 h-9 rounded-full text-muted-foreground hover:text-delft-blue hover:bg-muted transition-colors",title:o==="light"?"Attiva modalità scura":"Attiva modalità chiara",children:o==="light"?l.jsx(Sw,{className:"h-4 w-4"}):l.jsx(Nw,{className:"h-4 w-4"})}),r&&l.jsx(Ee,{variant:"ghost",size:"sm",onClick:n,className:"w-9 h-9 rounded-full text-muted-foreground hover:text-delft-blue hover:bg-muted transition-colors",title:e==="granted"?"Notifiche attive":"Attiva notifiche",children:e==="granted"?l.jsx(_w,{className:"h-4 w-4"}):l.jsx(IT,{className:"h-4 w-4"})}),l.jsxs(dS,{children:[l.jsx(hS,{asChild:!0,children:l.jsxs(Ee,{variant:"ghost",className:"hidden sm:flex items-center space-x-2 ml-2 h-auto p-2 hover:bg-muted transition-colors rounded-lg",children:[l.jsx("div",{className:`w-8 h-8 ${h?"":"bg-cambridge-blue"} rounded-full flex items-center justify-center shadow-sm`,style:h?{backgroundColor:"rgb(37, 99, 235)"}:{},children:h?l.jsx(Yh,{className:"h-4 w-4 text-white"}):l.jsx(ia,{className:"h-4 w-4 text-white"})}),l.jsx("span",{className:"text-sm font-medium text-delft-blue",children:s==null?void 0:s.username}),l.jsx(F0,{className:"h-3 w-3 text-muted-foreground"})]})}),l.jsxs(Hw,{align:"end",className:"w-56",children:[l.jsxs(qw,{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-6 h-6 ${h?"":"bg-cambridge-blue"} rounded-full flex items-center justify-center`,style:h?{backgroundColor:"rgb(37, 99, 235)"}:{},children:h?l.jsx(Yh,{className:"h-3 w-3 text-white"}):l.jsx(ia,{className:"h-3 w-3 text-white"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:s==null?void 0:s.username}),l.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l.jsx(Ce,{variant:"outline",className:"px-1 py-0 text-xs",children:s==null?void 0:s.role}),h&&l.jsx("span",{children:"🐭"})]})]})]}),l.jsx(du,{}),l.jsx(Bo,{asChild:!0,children:l.jsxs(vf,{href:"/settings",className:"flex items-center cursor-pointer",children:[l.jsx(kw,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Impostazioni"})]})}),l.jsxs(Bo,{onClick:a,className:"flex items-center cursor-pointer",children:[o==="light"?l.jsx(Sw,{className:"mr-2 h-4 w-4"}):l.jsx(Nw,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:o==="light"?"Tema Scuro":"Tema Chiaro"})]}),r&&l.jsxs(Bo,{onClick:n,className:"flex items-center cursor-pointer",children:[e==="granted"?l.jsx(_w,{className:"mr-2 h-4 w-4"}):l.jsx(IT,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:e==="granted"?"Notifiche Attive":"Attiva Notifiche"})]}),l.jsx(du,{}),l.jsxs(Bo,{onClick:i,className:"flex items-center cursor-pointer text-destructive focus:text-destructive",children:[l.jsx(kT,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Esci"})]})]})]}),l.jsx("div",{className:"sm:hidden",children:l.jsxs(dS,{children:[l.jsx(hS,{asChild:!0,children:l.jsx(Ee,{variant:"ghost",size:"sm",className:"w-9 h-9 rounded-full text-muted-foreground hover:text-delft-blue hover:bg-muted transition-colors",children:l.jsx("div",{className:`w-6 h-6 ${h?"":"bg-cambridge-blue"} rounded-full flex items-center justify-center`,style:h?{backgroundColor:"rgb(37, 99, 235)"}:{},children:h?l.jsx(Yh,{className:"h-3 w-3 text-white"}):l.jsx(ia,{className:"h-3 w-3 text-white"})})})}),l.jsxs(Hw,{align:"end",className:"w-48",children:[l.jsxs(qw,{children:[l.jsx("div",{className:"font-medium",children:s==null?void 0:s.username}),l.jsx("div",{className:"text-xs text-muted-foreground",children:s==null?void 0:s.role})]}),l.jsx(du,{}),l.jsx(Bo,{asChild:!0,children:l.jsxs(vf,{href:"/settings",className:"flex items-center cursor-pointer",children:[l.jsx(kw,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Impostazioni"})]})}),l.jsx(du,{}),l.jsxs(Bo,{onClick:i,className:"flex items-center cursor-pointer text-destructive focus:text-destructive",children:[l.jsx(kT,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Esci"})]})]})]})})]})]})})})}var fS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var to,GD;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,k){function R(){}R.prototype=k.prototype,C.D=k.prototype,C.prototype=new R,C.prototype.constructor=C,C.C=function(I,S,P){for(var A=Array(arguments.length-2),W=2;W<arguments.length;W++)A[W-2]=arguments[W];return k.prototype[S].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,k,R){R||(R=0);var I=Array(16);if(typeof k=="string")for(var S=0;16>S;++S)I[S]=k.charCodeAt(R++)|k.charCodeAt(R++)<<8|k.charCodeAt(R++)<<16|k.charCodeAt(R++)<<24;else for(S=0;16>S;++S)I[S]=k[R++]|k[R++]<<8|k[R++]<<16|k[R++]<<24;k=C.g[0],R=C.g[1],S=C.g[2];var P=C.g[3],A=k+(P^R&(S^P))+I[0]+3614090360&4294967295;k=R+(A<<7&4294967295|A>>>25),A=P+(S^k&(R^S))+I[1]+3905402710&4294967295,P=k+(A<<12&4294967295|A>>>20),A=S+(R^P&(k^R))+I[2]+606105819&4294967295,S=P+(A<<17&4294967295|A>>>15),A=R+(k^S&(P^k))+I[3]+3250441966&4294967295,R=S+(A<<22&4294967295|A>>>10),A=k+(P^R&(S^P))+I[4]+4118548399&4294967295,k=R+(A<<7&4294967295|A>>>25),A=P+(S^k&(R^S))+I[5]+1200080426&4294967295,P=k+(A<<12&4294967295|A>>>20),A=S+(R^P&(k^R))+I[6]+2821735955&4294967295,S=P+(A<<17&4294967295|A>>>15),A=R+(k^S&(P^k))+I[7]+4249261313&4294967295,R=S+(A<<22&4294967295|A>>>10),A=k+(P^R&(S^P))+I[8]+1770035416&4294967295,k=R+(A<<7&4294967295|A>>>25),A=P+(S^k&(R^S))+I[9]+2336552879&4294967295,P=k+(A<<12&4294967295|A>>>20),A=S+(R^P&(k^R))+I[10]+4294925233&4294967295,S=P+(A<<17&4294967295|A>>>15),A=R+(k^S&(P^k))+I[11]+2304563134&4294967295,R=S+(A<<22&4294967295|A>>>10),A=k+(P^R&(S^P))+I[12]+1804603682&4294967295,k=R+(A<<7&4294967295|A>>>25),A=P+(S^k&(R^S))+I[13]+4254626195&4294967295,P=k+(A<<12&4294967295|A>>>20),A=S+(R^P&(k^R))+I[14]+2792965006&4294967295,S=P+(A<<17&4294967295|A>>>15),A=R+(k^S&(P^k))+I[15]+1236535329&4294967295,R=S+(A<<22&4294967295|A>>>10),A=k+(S^P&(R^S))+I[1]+4129170786&4294967295,k=R+(A<<5&4294967295|A>>>27),A=P+(R^S&(k^R))+I[6]+3225465664&4294967295,P=k+(A<<9&4294967295|A>>>23),A=S+(k^R&(P^k))+I[11]+643717713&4294967295,S=P+(A<<14&4294967295|A>>>18),A=R+(P^k&(S^P))+I[0]+3921069994&4294967295,R=S+(A<<20&4294967295|A>>>12),A=k+(S^P&(R^S))+I[5]+3593408605&4294967295,k=R+(A<<5&4294967295|A>>>27),A=P+(R^S&(k^R))+I[10]+38016083&4294967295,P=k+(A<<9&4294967295|A>>>23),A=S+(k^R&(P^k))+I[15]+3634488961&4294967295,S=P+(A<<14&4294967295|A>>>18),A=R+(P^k&(S^P))+I[4]+3889429448&4294967295,R=S+(A<<20&4294967295|A>>>12),A=k+(S^P&(R^S))+I[9]+568446438&4294967295,k=R+(A<<5&4294967295|A>>>27),A=P+(R^S&(k^R))+I[14]+3275163606&4294967295,P=k+(A<<9&4294967295|A>>>23),A=S+(k^R&(P^k))+I[3]+4107603335&4294967295,S=P+(A<<14&4294967295|A>>>18),A=R+(P^k&(S^P))+I[8]+1163531501&4294967295,R=S+(A<<20&4294967295|A>>>12),A=k+(S^P&(R^S))+I[13]+2850285829&4294967295,k=R+(A<<5&4294967295|A>>>27),A=P+(R^S&(k^R))+I[2]+4243563512&4294967295,P=k+(A<<9&4294967295|A>>>23),A=S+(k^R&(P^k))+I[7]+1735328473&4294967295,S=P+(A<<14&4294967295|A>>>18),A=R+(P^k&(S^P))+I[12]+2368359562&4294967295,R=S+(A<<20&4294967295|A>>>12),A=k+(R^S^P)+I[5]+4294588738&4294967295,k=R+(A<<4&4294967295|A>>>28),A=P+(k^R^S)+I[8]+2272392833&4294967295,P=k+(A<<11&4294967295|A>>>21),A=S+(P^k^R)+I[11]+1839030562&4294967295,S=P+(A<<16&4294967295|A>>>16),A=R+(S^P^k)+I[14]+4259657740&4294967295,R=S+(A<<23&4294967295|A>>>9),A=k+(R^S^P)+I[1]+2763975236&4294967295,k=R+(A<<4&4294967295|A>>>28),A=P+(k^R^S)+I[4]+1272893353&4294967295,P=k+(A<<11&4294967295|A>>>21),A=S+(P^k^R)+I[7]+4139469664&4294967295,S=P+(A<<16&4294967295|A>>>16),A=R+(S^P^k)+I[10]+3200236656&4294967295,R=S+(A<<23&4294967295|A>>>9),A=k+(R^S^P)+I[13]+681279174&4294967295,k=R+(A<<4&4294967295|A>>>28),A=P+(k^R^S)+I[0]+3936430074&4294967295,P=k+(A<<11&4294967295|A>>>21),A=S+(P^k^R)+I[3]+3572445317&4294967295,S=P+(A<<16&4294967295|A>>>16),A=R+(S^P^k)+I[6]+76029189&4294967295,R=S+(A<<23&4294967295|A>>>9),A=k+(R^S^P)+I[9]+3654602809&4294967295,k=R+(A<<4&4294967295|A>>>28),A=P+(k^R^S)+I[12]+3873151461&4294967295,P=k+(A<<11&4294967295|A>>>21),A=S+(P^k^R)+I[15]+530742520&4294967295,S=P+(A<<16&4294967295|A>>>16),A=R+(S^P^k)+I[2]+3299628645&4294967295,R=S+(A<<23&4294967295|A>>>9),A=k+(S^(R|~P))+I[0]+4096336452&4294967295,k=R+(A<<6&4294967295|A>>>26),A=P+(R^(k|~S))+I[7]+1126891415&4294967295,P=k+(A<<10&4294967295|A>>>22),A=S+(k^(P|~R))+I[14]+2878612391&4294967295,S=P+(A<<15&4294967295|A>>>17),A=R+(P^(S|~k))+I[5]+4237533241&4294967295,R=S+(A<<21&4294967295|A>>>11),A=k+(S^(R|~P))+I[12]+1700485571&4294967295,k=R+(A<<6&4294967295|A>>>26),A=P+(R^(k|~S))+I[3]+2399980690&4294967295,P=k+(A<<10&4294967295|A>>>22),A=S+(k^(P|~R))+I[10]+4293915773&4294967295,S=P+(A<<15&4294967295|A>>>17),A=R+(P^(S|~k))+I[1]+2240044497&4294967295,R=S+(A<<21&4294967295|A>>>11),A=k+(S^(R|~P))+I[8]+1873313359&4294967295,k=R+(A<<6&4294967295|A>>>26),A=P+(R^(k|~S))+I[15]+4264355552&4294967295,P=k+(A<<10&4294967295|A>>>22),A=S+(k^(P|~R))+I[6]+2734768916&4294967295,S=P+(A<<15&4294967295|A>>>17),A=R+(P^(S|~k))+I[13]+1309151649&4294967295,R=S+(A<<21&4294967295|A>>>11),A=k+(S^(R|~P))+I[4]+4149444226&4294967295,k=R+(A<<6&4294967295|A>>>26),A=P+(R^(k|~S))+I[11]+3174756917&4294967295,P=k+(A<<10&4294967295|A>>>22),A=S+(k^(P|~R))+I[2]+718787259&4294967295,S=P+(A<<15&4294967295|A>>>17),A=R+(P^(S|~k))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+k&4294967295,C.g[1]=C.g[1]+(S+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+P&4294967295}r.prototype.u=function(C,k){k===void 0&&(k=C.length);for(var R=k-this.blockSize,I=this.B,S=this.h,P=0;P<k;){if(S==0)for(;P<=R;)s(this,C,P),P+=this.blockSize;if(typeof C=="string"){for(;P<k;)if(I[S++]=C.charCodeAt(P++),S==this.blockSize){s(this,I),S=0;break}}else for(;P<k;)if(I[S++]=C[P++],S==this.blockSize){s(this,I),S=0;break}}this.h=S,this.o+=k},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var k=1;k<C.length-8;++k)C[k]=0;var R=8*this.o;for(k=C.length-8;k<C.length;++k)C[k]=R&255,R/=256;for(this.u(C),C=Array(16),k=R=0;4>k;++k)for(var I=0;32>I;I+=8)C[R++]=this.g[k]>>>I&255;return C};function i(C,k){var R=a;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=k(C)}function o(C,k){this.h=k;for(var R=[],I=!0,S=C.length-1;0<=S;S--){var P=C[S]|0;I&&P==k||(R[S]=P,I=!1)}this.g=R}var a={};function c(C){return-128<=C&&128>C?i(C,function(k){return new o([k|0],0>k?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return x(u(-C));for(var k=[],R=1,I=0;C>=R;I++)k[I]=C/R|0,R*=4294967296;return new o(k,0)}function h(C,k){if(C.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C.charAt(0)=="-")return x(h(C.substring(1),k));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(k,8)),I=f,S=0;S<C.length;S+=8){var P=Math.min(8,C.length-S),A=parseInt(C.substring(S,S+P),k);8>P?(P=u(Math.pow(k,P)),I=I.j(P).add(u(A))):(I=I.j(R),I=I.add(u(A)))}return I}var f=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-x(this).m();for(var C=0,k=1,R=0;R<this.g.length;R++){var I=this.i(R);C+=(0<=I?I:4294967296+I)*k,k*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(w(this))return"-"+x(this).toString(C);for(var k=u(Math.pow(C,6)),R=this,I="";;){var S=N(R,k).g;R=_(R,S.j(k));var P=((0<R.g.length?R.g[0]:R.h)>>>0).toString(C);if(R=S,b(R))return P+I;for(;6>P.length;)P="0"+P;I=P+I}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var k=0;k<C.g.length;k++)if(C.g[k]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=_(this,C),w(C)?-1:b(C)?0:1};function x(C){for(var k=C.g.length,R=[],I=0;I<k;I++)R[I]=~C.g[I];return new o(R,~C.h).add(m)}t.abs=function(){return w(this)?x(this):this},t.add=function(C){for(var k=Math.max(this.g.length,C.g.length),R=[],I=0,S=0;S<=k;S++){var P=I+(this.i(S)&65535)+(C.i(S)&65535),A=(P>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);I=A>>>16,P&=65535,A&=65535,R[S]=A<<16|P}return new o(R,R[R.length-1]&-2147483648?-1:0)};function _(C,k){return C.add(x(k))}t.j=function(C){if(b(this)||b(C))return f;if(w(this))return w(C)?x(this).j(x(C)):x(x(this).j(C));if(w(C))return x(this.j(x(C)));if(0>this.l(v)&&0>C.l(v))return u(this.m()*C.m());for(var k=this.g.length+C.g.length,R=[],I=0;I<2*k;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<C.g.length;S++){var P=this.i(I)>>>16,A=this.i(I)&65535,W=C.i(S)>>>16,Q=C.i(S)&65535;R[2*I+2*S]+=A*Q,y(R,2*I+2*S),R[2*I+2*S+1]+=P*Q,y(R,2*I+2*S+1),R[2*I+2*S+1]+=A*W,y(R,2*I+2*S+1),R[2*I+2*S+2]+=P*W,y(R,2*I+2*S+2)}for(I=0;I<k;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=k;I<2*k;I++)R[I]=0;return new o(R,0)};function y(C,k){for(;(C[k]&65535)!=C[k];)C[k+1]+=C[k]>>>16,C[k]&=65535,k++}function T(C,k){this.g=C,this.h=k}function N(C,k){if(b(k))throw Error("division by zero");if(b(C))return new T(f,f);if(w(C))return k=N(x(C),k),new T(x(k.g),x(k.h));if(w(k))return k=N(C,x(k)),new T(x(k.g),k.h);if(30<C.g.length){if(w(C)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var R=m,I=k;0>=I.l(C);)R=j(R),I=j(I);var S=M(R,1),P=M(I,1);for(I=M(I,2),R=M(R,2);!b(I);){var A=P.add(I);0>=A.l(C)&&(S=S.add(R),P=A),I=M(I,1),R=M(R,1)}return k=_(C,S.j(k)),new T(S,k)}for(S=f;0<=C.l(k);){for(R=Math.max(1,Math.floor(C.m()/k.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),P=u(R),A=P.j(k);w(A)||0<A.l(C);)R-=I,P=u(R),A=P.j(k);b(P)&&(P=m),S=S.add(P),C=_(C,A)}return new T(S,C)}t.A=function(C){return N(this,C).h},t.and=function(C){for(var k=Math.max(this.g.length,C.g.length),R=[],I=0;I<k;I++)R[I]=this.i(I)&C.i(I);return new o(R,this.h&C.h)},t.or=function(C){for(var k=Math.max(this.g.length,C.g.length),R=[],I=0;I<k;I++)R[I]=this.i(I)|C.i(I);return new o(R,this.h|C.h)},t.xor=function(C){for(var k=Math.max(this.g.length,C.g.length),R=[],I=0;I<k;I++)R[I]=this.i(I)^C.i(I);return new o(R,this.h^C.h)};function j(C){for(var k=C.g.length+1,R=[],I=0;I<k;I++)R[I]=C.i(I)<<1|C.i(I-1)>>>31;return new o(R,C.h)}function M(C,k){var R=k>>5;k%=32;for(var I=C.g.length-R,S=[],P=0;P<I;P++)S[P]=0<k?C.i(P+R)>>>k|C.i(P+R+1)<<32-k:C.i(P+R);return new o(S,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GD=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,to=o}).apply(typeof fS<"u"?fS:typeof self<"u"?self:typeof window<"u"?window:{});var Qh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KD,hu,YD,Sf,Gw,QD,XD,ZD;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,E){return d==Array.prototype||d==Object.prototype||(d[g]=E.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qh=="object"&&Qh];for(var g=0;g<d.length;++g){var E=d[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var E=r;d=d.split(".");for(var D=0;D<d.length-1;D++){var V=d[D];if(!(V in E))break e;E=E[V]}d=d[d.length-1],D=E[d],g=g(D),g!=D&&g!=null&&e(E,d,{configurable:!0,writable:!0,value:g})}}function i(d,g){d instanceof String&&(d+="");var E=0,D=!1,V={next:function(){if(!D&&E<d.length){var $=E++;return{value:g($,d[$]),done:!1}}return D=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(d){return d||function(){return i(this,function(g,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,E){return d.call.apply(d.bind,arguments)}function f(d,g,E){if(!d)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,D),d.apply(g,V)}}return function(){return d.apply(g,arguments)}}function m(d,g,E){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function v(d,g){var E=Array.prototype.slice.call(arguments,1);return function(){var D=E.slice();return D.push.apply(D,arguments),d.apply(this,D)}}function b(d,g){function E(){}E.prototype=g.prototype,d.aa=g.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(D,V,$){for(var ne=Array(arguments.length-2),at=2;at<arguments.length;at++)ne[at-2]=arguments[at];return g.prototype[V].apply(D,ne)}}function w(d){const g=d.length;if(0<g){const E=Array(g);for(let D=0;D<g;D++)E[D]=d[D];return E}return[]}function x(d,g){for(let E=1;E<arguments.length;E++){const D=arguments[E];if(c(D)){const V=d.length||0,$=D.length||0;d.length=V+$;for(let ne=0;ne<$;ne++)d[V+ne]=D[ne]}else d.push(D)}}class _{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function y(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function N(d){return N[" "](d),d}N[" "]=function(){};var j=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(d,g,E){for(const D in d)g.call(E,d[D],D,d)}function C(d,g){for(const E in d)g.call(void 0,d[E],E,d)}function k(d){const g={};for(const E in d)g[E]=d[E];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(d,g){let E,D;for(let V=1;V<arguments.length;V++){D=arguments[V];for(E in D)d[E]=D[E];for(let $=0;$<R.length;$++)E=R[$],Object.prototype.hasOwnProperty.call(D,E)&&(d[E]=D[E])}}function S(d){var g=1;d=d.split(":");const E=[];for(;0<g&&d.length;)E.push(d.shift()),g--;return d.length&&E.push(d.join(":")),E}function P(d){a.setTimeout(()=>{throw d},0)}function A(){var d=F;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class W{constructor(){this.h=this.g=null}add(g,E){const D=Q.get();D.set(g,E),this.h?this.h.next=D:this.g=D,this.h=D}}var Q=new _(()=>new J,d=>d.reset());class J{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let H,O=!1,F=new W,X=()=>{const d=a.Promise.resolve(void 0);H=()=>{d.then(fe)}};var fe=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(E){P(E)}var g=Q;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}O=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};a.addEventListener("test",E,g),a.removeEventListener("test",E,g)}catch{}return d}();function tt(d,g){if(ue.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,D=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(j){e:{try{N(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else E=="mouseover"?g=d.fromElement:E=="mouseout"&&(g=d.toElement);this.relatedTarget=g,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Oe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&tt.aa.h.call(this)}}b(tt,ue);var Oe={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),te=0;function we(d,g,E,D,V){this.listener=d,this.proxy=null,this.src=g,this.type=E,this.capture=!!D,this.ha=V,this.key=++te,this.da=this.fa=!1}function le(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ve(d){this.src=d,this.g={},this.h=0}Ve.prototype.add=function(d,g,E,D,V){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var ne=lt(d,g,D,V);return-1<ne?(g=d[ne],E||(g.fa=!1)):(g=new we(g,this.src,$,!!D,V),g.fa=E,d.push(g)),g};function ye(d,g){var E=g.type;if(E in d.g){var D=d.g[E],V=Array.prototype.indexOf.call(D,g,void 0),$;($=0<=V)&&Array.prototype.splice.call(D,V,1),$&&(le(g),d.g[E].length==0&&(delete d.g[E],d.h--))}}function lt(d,g,E,D){for(var V=0;V<d.length;++V){var $=d[V];if(!$.da&&$.listener==g&&$.capture==!!E&&$.ha==D)return V}return-1}var Vt="closure_lm_"+(1e6*Math.random()|0),Ln={};function Zn(d,g,E,D,V){if(Array.isArray(g)){for(var $=0;$<g.length;$++)Zn(d,g[$],E,D,V);return null}return E=ee(E),d&&d[he]?d.K(g,E,u(D)?!!D.capture:!1,V):wr(d,g,E,!1,D,V)}function wr(d,g,E,D,V,$){if(!g)throw Error("Invalid event type");var ne=u(V)?!!V.capture:!!V,at=oe(d);if(at||(d[Vt]=at=new Ve(d)),E=at.add(g,E,D,ne,$),E.proxy)return E;if(D=Do(),E.proxy=D,D.src=d,D.listener=E,d.addEventListener)ze||(V=ne),V===void 0&&(V=!1),d.addEventListener(g.toString(),D,V);else if(d.attachEvent)d.attachEvent(U(g.toString()),D);else if(d.addListener&&d.removeListener)d.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Do(){function d(E){return g.call(d.src,d.listener,E)}const g=z;return d}function ns(d,g,E,D,V){if(Array.isArray(g))for(var $=0;$<g.length;$++)ns(d,g[$],E,D,V);else D=u(D)?!!D.capture:!!D,E=ee(E),d&&d[he]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],E=lt($,E,D,V),-1<E&&(le($[E]),Array.prototype.splice.call($,E,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=oe(d))&&(g=d.g[g.toString()],d=-1,g&&(d=lt(g,E,D,V)),(E=-1<d?g[d]:null)&&L(E))}function L(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[he])ye(g.i,d);else{var E=d.type,D=d.proxy;g.removeEventListener?g.removeEventListener(E,D,d.capture):g.detachEvent?g.detachEvent(U(E),D):g.addListener&&g.removeListener&&g.removeListener(D),(E=oe(g))?(ye(E,d),E.h==0&&(E.src=null,g[Vt]=null)):le(d)}}}function U(d){return d in Ln?Ln[d]:Ln[d]="on"+d}function z(d,g){if(d.da)d=!0;else{g=new tt(g,this);var E=d.listener,D=d.ha||d.src;d.fa&&L(d),d=E.call(D,g)}return d}function oe(d){return d=d[Vt],d instanceof Ve?d:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(d){return typeof d=="function"?d:(d[re]||(d[re]=function(g){return d.handleEvent(g)}),d[re])}function ae(){G.call(this),this.i=new Ve(this),this.M=this,this.F=null}b(ae,G),ae.prototype[he]=!0,ae.prototype.removeEventListener=function(d,g,E,D){ns(this,d,g,E,D)};function Ae(d,g){var E,D=d.F;if(D)for(E=[];D;D=D.F)E.push(D);if(d=d.M,D=g.type||g,typeof g=="string")g=new ue(g,d);else if(g instanceof ue)g.target=g.target||d;else{var V=g;g=new ue(D,d),I(g,V)}if(V=!0,E)for(var $=E.length-1;0<=$;$--){var ne=g.g=E[$];V=et(ne,D,!0,g)&&V}if(ne=g.g=d,V=et(ne,D,!0,g)&&V,V=et(ne,D,!1,g)&&V,E)for($=0;$<E.length;$++)ne=g.g=E[$],V=et(ne,D,!1,g)&&V}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var E=d.g[g],D=0;D<E.length;D++)le(E[D]);delete d.g[g],d.h--}}this.F=null},ae.prototype.K=function(d,g,E,D){return this.i.add(String(d),g,!1,E,D)},ae.prototype.L=function(d,g,E,D){return this.i.add(String(d),g,!0,E,D)};function et(d,g,E,D){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,$=0;$<g.length;++$){var ne=g[$];if(ne&&!ne.da&&ne.capture==E){var at=ne.listener,Zt=ne.ha||ne.src;ne.fa&&ye(d.i,ne),V=at.call(Zt,D)!==!1&&V}}return V&&!D.defaultPrevented}function Tn(d,g,E){if(typeof d=="function")E&&(d=m(d,E));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function jo(d){d.g=Tn(()=>{d.g=null,d.i&&(d.i=!1,jo(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class rs extends G{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:jo(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mo(d){G.call(this),this.h=d,this.g={}}b(Mo,G);var Ra=[];function Da(d){M(d.g,function(g,E){this.g.hasOwnProperty(E)&&L(g)},d),d.g={}}Mo.prototype.N=function(){Mo.aa.N.call(this),Da(this)},Mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rc=a.JSON.stringify,ah=a.JSON.parse,Vg=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function ja(){}ja.prototype.h=null;function Ib(d){return d.h||(d.h=d.i())}function kb(){}var Dc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fg(){ue.call(this,"d")}b(Fg,ue);function Ug(){ue.call(this,"c")}b(Ug,ue);var Oo={},Nb=null;function lh(){return Nb=Nb||new ae}Oo.La="serverreachability";function Ab(d){ue.call(this,Oo.La,d)}b(Ab,ue);function jc(d){const g=lh();Ae(g,new Ab(g))}Oo.STAT_EVENT="statevent";function Pb(d,g){ue.call(this,Oo.STAT_EVENT,d),this.stat=g}b(Pb,ue);function Sn(d){const g=lh();Ae(g,new Pb(g,d))}Oo.Ma="timingevent";function Rb(d,g){ue.call(this,Oo.Ma,d),this.size=g}b(Rb,ue);function Mc(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Oc(){this.g=!0}Oc.prototype.xa=function(){this.g=!1};function QO(d,g,E,D,V,$){d.info(function(){if(d.g)if($)for(var ne="",at=$.split("&"),Zt=0;Zt<at.length;Zt++){var Xe=at[Zt].split("=");if(1<Xe.length){var cn=Xe[0];Xe=Xe[1];var un=cn.split("_");ne=2<=un.length&&un[1]=="type"?ne+(cn+"="+Xe+"&"):ne+(cn+"=redacted&")}}else ne=null;else ne=$;return"XMLHTTP REQ ("+D+") [attempt "+V+"]: "+g+`
`+E+`
`+ne})}function XO(d,g,E,D,V,$,ne){d.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+V+"]: "+g+`
`+E+`
`+$+" "+ne})}function Ma(d,g,E,D){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+JO(d,E)+(D?" "+D:"")})}function ZO(d,g){d.info(function(){return"TIMEOUT: "+g})}Oc.prototype.info=function(){};function JO(d,g){if(!d.g)return g;if(!g)return null;try{var E=JSON.parse(g);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var D=E[d];if(!(2>D.length)){var V=D[1];if(Array.isArray(V)&&!(1>V.length)){var $=V[0];if($!="noop"&&$!="stop"&&$!="close")for(var ne=1;ne<V.length;ne++)V[ne]=""}}}}return Rc(E)}catch{return g}}var ch={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Db={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$g;function uh(){}b(uh,ja),uh.prototype.g=function(){return new XMLHttpRequest},uh.prototype.i=function(){return{}},$g=new uh;function gi(d,g,E,D){this.j=d,this.i=g,this.l=E,this.R=D||1,this.U=new Mo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jb}function jb(){this.i=null,this.g="",this.h=!1}var Mb={},zg={};function Bg(d,g,E){d.L=1,d.v=mh(Ds(g)),d.m=E,d.P=!0,Ob(d,null)}function Ob(d,g){d.F=Date.now(),dh(d),d.A=Ds(d.v);var E=d.A,D=d.R;Array.isArray(D)||(D=[String(D)]),Qb(E.i,"t",D),d.C=0,E=d.j.J,d.h=new jb,d.g=mE(d.j,E?g:null,!d.m),0<d.O&&(d.M=new rs(m(d.Y,d,d.g),d.O)),g=d.U,E=d.g,D=d.ca;var V="readystatechange";Array.isArray(V)||(V&&(Ra[0]=V.toString()),V=Ra);for(var $=0;$<V.length;$++){var ne=Zn(E,V[$],D||g.handleEvent,!1,g.h||g);if(!ne)break;g.g[ne.key]=ne}g=d.H?k(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),jc(),QO(d.i,d.u,d.A,d.l,d.R,d.m)}gi.prototype.ca=function(d){d=d.target;const g=this.M;g&&js(d)==3?g.j():this.Y(d)},gi.prototype.Y=function(d){try{if(d==this.g)e:{const un=js(this.g);var g=this.g.Ba();const Va=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||rE(this.g)))){this.J||un!=4||g==7||(g==8||0>=Va?jc(3):jc(2)),Wg(this);var E=this.g.Z();this.X=E;t:if(Lb(this)){var D=rE(this.g);d="";var V=D.length,$=js(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lo(this),Lc(this);var ne="";break t}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,d+=this.h.i.decode(D[g],{stream:!($&&g==V-1)});D.length=0,this.h.g+=d,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=E==200,XO(this.i,this.u,this.A,this.l,this.R,un,E),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Zt=this.g;if((at=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(at)){var Xe=at;break t}}Xe=null}if(E=Xe)Ma(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hg(this,E);else{this.o=!1,this.s=3,Sn(12),Lo(this),Lc(this);break e}}if(this.P){E=!0;let Dr;for(;!this.J&&this.C<ne.length;)if(Dr=e4(this,ne),Dr==zg){un==4&&(this.s=4,Sn(14),E=!1),Ma(this.i,this.l,null,"[Incomplete Response]");break}else if(Dr==Mb){this.s=4,Sn(15),Ma(this.i,this.l,ne,"[Invalid Chunk]"),E=!1;break}else Ma(this.i,this.l,Dr,null),Hg(this,Dr);if(Lb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||ne.length!=0||this.h.h||(this.s=1,Sn(16),E=!1),this.o=this.o&&E,!E)Ma(this.i,this.l,ne,"[Invalid Chunked Response]"),Lo(this),Lc(this);else if(0<ne.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),Xg(cn),cn.M=!0,Sn(11))}}else Ma(this.i,this.l,ne,null),Hg(this,ne);un==4&&Lo(this),this.o&&!this.J&&(un==4?uE(this.j,this):(this.o=!1,dh(this)))}else v4(this.g),E==400&&0<ne.indexOf("Unknown SID")?(this.s=3,Sn(12)):(this.s=0,Sn(13)),Lo(this),Lc(this)}}}catch{}finally{}};function Lb(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function e4(d,g){var E=d.C,D=g.indexOf(`
`,E);return D==-1?zg:(E=Number(g.substring(E,D)),isNaN(E)?Mb:(D+=1,D+E>g.length?zg:(g=g.slice(D,D+E),d.C=D+E,g)))}gi.prototype.cancel=function(){this.J=!0,Lo(this)};function dh(d){d.S=Date.now()+d.I,Vb(d,d.I)}function Vb(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Mc(m(d.ba,d),g)}function Wg(d){d.B&&(a.clearTimeout(d.B),d.B=null)}gi.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(ZO(this.i,this.A),this.L!=2&&(jc(),Sn(17)),Lo(this),this.s=2,Lc(this)):Vb(this,this.S-d)};function Lc(d){d.j.G==0||d.J||uE(d.j,d)}function Lo(d){Wg(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Da(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Hg(d,g){try{var E=d.j;if(E.G!=0&&(E.g==d||qg(E.h,d))){if(!d.K&&qg(E.h,d)&&E.G==3){try{var D=E.Da.g.parse(g)}catch{D=null}if(Array.isArray(D)&&D.length==3){var V=D;if(V[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)xh(E),yh(E);else break e;Qg(E),Sn(18)}}else E.za=V[1],0<E.za-E.T&&37500>V[2]&&E.F&&E.v==0&&!E.C&&(E.C=Mc(m(E.Za,E),6e3));if(1>=$b(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Fo(E,11)}else if((d.K||E.g==d)&&xh(E),!y(g))for(V=E.Da.g.parse(g),g=0;g<V.length;g++){let Xe=V[g];if(E.T=Xe[0],Xe=Xe[1],E.G==2)if(Xe[0]=="c"){E.K=Xe[1],E.ia=Xe[2];const cn=Xe[3];cn!=null&&(E.la=cn,E.j.info("VER="+E.la));const un=Xe[4];un!=null&&(E.Aa=un,E.j.info("SVER="+E.Aa));const Va=Xe[5];Va!=null&&typeof Va=="number"&&0<Va&&(D=1.5*Va,E.L=D,E.j.info("backChannelRequestTimeoutMs_="+D)),D=E;const Dr=d.g;if(Dr){const bh=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bh){var $=D.h;$.g||bh.indexOf("spdy")==-1&&bh.indexOf("quic")==-1&&bh.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Gg($,$.h),$.h=null))}if(D.D){const Zg=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zg&&(D.ya=Zg,dt(D.I,D.D,Zg))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),D=E;var ne=d;if(D.qa=fE(D,D.J?D.ia:null,D.W),ne.K){zb(D.h,ne);var at=ne,Zt=D.L;Zt&&(at.I=Zt),at.B&&(Wg(at),dh(at)),D.g=ne}else lE(D);0<E.i.length&&wh(E)}else Xe[0]!="stop"&&Xe[0]!="close"||Fo(E,7);else E.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Fo(E,7):Yg(E):Xe[0]!="noop"&&E.l&&E.l.ta(Xe),E.v=0)}}jc(4)}catch{}}var t4=class{constructor(d,g){this.g=d,this.map=g}};function Fb(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ub(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function $b(d){return d.h?1:d.g?d.g.size:0}function qg(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Gg(d,g){d.g?d.g.add(g):d.h=g}function zb(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Fb.prototype.cancel=function(){if(this.i=Bb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bb(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const E of d.g.values())g=g.concat(E.D);return g}return w(d.i)}function n4(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var g=[],E=d.length,D=0;D<E;D++)g.push(d[D]);return g}g=[],E=0;for(D in d)g[E++]=d[D];return g}function r4(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var g=[];d=d.length;for(var E=0;E<d;E++)g.push(E);return g}g=[],E=0;for(const D in d)g[E++]=D;return g}}}function Wb(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var E=r4(d),D=n4(d),V=D.length,$=0;$<V;$++)g.call(void 0,D[$],E&&E[$],d)}var Hb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function s4(d,g){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var D=d[E].indexOf("="),V=null;if(0<=D){var $=d[E].substring(0,D);V=d[E].substring(D+1)}else $=d[E];g($,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Vo(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Vo){this.h=d.h,hh(this,d.j),this.o=d.o,this.g=d.g,fh(this,d.s),this.l=d.l;var g=d.i,E=new Uc;E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),qb(this,E),this.m=d.m}else d&&(g=String(d).match(Hb))?(this.h=!1,hh(this,g[1]||"",!0),this.o=Vc(g[2]||""),this.g=Vc(g[3]||"",!0),fh(this,g[4]),this.l=Vc(g[5]||"",!0),qb(this,g[6]||"",!0),this.m=Vc(g[7]||"")):(this.h=!1,this.i=new Uc(null,this.h))}Vo.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Fc(g,Gb,!0),":");var E=this.g;return(E||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Fc(g,Gb,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Fc(E,E.charAt(0)=="/"?a4:o4,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Fc(E,c4)),d.join("")};function Ds(d){return new Vo(d)}function hh(d,g,E){d.j=E?Vc(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function fh(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function qb(d,g,E){g instanceof Uc?(d.i=g,u4(d.i,d.h)):(E||(g=Fc(g,l4)),d.i=new Uc(g,d.h))}function dt(d,g,E){d.i.set(g,E)}function mh(d){return dt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Vc(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Fc(d,g,E){return typeof d=="string"?(d=encodeURI(d).replace(g,i4),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function i4(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Gb=/[#\/\?@]/g,o4=/[#\?:]/g,a4=/[#\?]/g,l4=/[#\?@]/g,c4=/#/g;function Uc(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function vi(d){d.g||(d.g=new Map,d.h=0,d.i&&s4(d.i,function(g,E){d.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=Uc.prototype,t.add=function(d,g){vi(this),this.i=null,d=Oa(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(g),this.h+=1,this};function Kb(d,g){vi(d),g=Oa(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Yb(d,g){return vi(d),g=Oa(d,g),d.g.has(g)}t.forEach=function(d,g){vi(this),this.g.forEach(function(E,D){E.forEach(function(V){d.call(g,V,D,this)},this)},this)},t.na=function(){vi(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),E=[];for(let D=0;D<g.length;D++){const V=d[D];for(let $=0;$<V.length;$++)E.push(g[D])}return E},t.V=function(d){vi(this);let g=[];if(typeof d=="string")Yb(this,d)&&(g=g.concat(this.g.get(Oa(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)g=g.concat(d[E])}return g},t.set=function(d,g){return vi(this),this.i=null,d=Oa(this,d),Yb(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Qb(d,g,E){Kb(d,g),0<E.length&&(d.i=null,d.g.set(Oa(d,g),w(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var E=0;E<g.length;E++){var D=g[E];const $=encodeURIComponent(String(D)),ne=this.V(D);for(D=0;D<ne.length;D++){var V=$;ne[D]!==""&&(V+="="+encodeURIComponent(String(ne[D]))),d.push(V)}}return this.i=d.join("&")};function Oa(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function u4(d,g){g&&!d.j&&(vi(d),d.i=null,d.g.forEach(function(E,D){var V=D.toLowerCase();D!=V&&(Kb(this,D),Qb(this,V,E))},d)),d.j=g}function d4(d,g){const E=new Oc;if(a.Image){const D=new Image;D.onload=v(yi,E,"TestLoadImage: loaded",!0,g,D),D.onerror=v(yi,E,"TestLoadImage: error",!1,g,D),D.onabort=v(yi,E,"TestLoadImage: abort",!1,g,D),D.ontimeout=v(yi,E,"TestLoadImage: timeout",!1,g,D),a.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=d}else g(!1)}function h4(d,g){const E=new Oc,D=new AbortController,V=setTimeout(()=>{D.abort(),yi(E,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:D.signal}).then($=>{clearTimeout(V),$.ok?yi(E,"TestPingServer: ok",!0,g):yi(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),yi(E,"TestPingServer: error",!1,g)})}function yi(d,g,E,D,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),D(E)}catch{}}function f4(){this.g=new Vg}function m4(d,g,E){const D=E||"";try{Wb(d,function(V,$){let ne=V;u(V)&&(ne=Rc(V)),g.push(D+$+"="+encodeURIComponent(ne))})}catch(V){throw g.push(D+"type="+encodeURIComponent("_badmap")),V}}function ph(d){this.l=d.Ub||null,this.j=d.eb||!1}b(ph,ja),ph.prototype.g=function(){return new gh(this.l,this.j)},ph.prototype.i=function(d){return function(){return d}}({});function gh(d,g){ae.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(gh,ae),t=gh.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,zc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$c(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,zc(this)),this.g&&(this.readyState=3,zc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xb(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xb(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?$c(this):zc(this),this.readyState==3&&Xb(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,$c(this))},t.Qa=function(d){this.g&&(this.response=d,$c(this))},t.ga=function(){this.g&&$c(this)};function $c(d){d.readyState=4,d.l=null,d.j=null,d.v=null,zc(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=g.next();return d.join(`\r
`)};function zc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(gh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zb(d){let g="";return M(d,function(E,D){g+=D,g+=":",g+=E,g+=`\r
`}),g}function Kg(d,g,E){e:{for(D in E){var D=!1;break e}D=!0}D||(E=Zb(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):dt(d,g,E))}function St(d){ae.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(St,ae);var p4=/^https?$/i,g4=["POST","PUT"];t=St.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,E,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$g.g(),this.v=this.o?Ib(this.o):Ib($g),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){Jb(this,$);return}if(d=E||"",E=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var V in D)E.set(V,D[V]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const $ of D.keys())E.set($,D.get($));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(g4,g,void 0))||D||V||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of E)this.g.setRequestHeader($,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nE(this),this.u=!0,this.g.send(d),this.u=!1}catch($){Jb(this,$)}};function Jb(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,eE(d),vh(d)}function eE(d){d.A||(d.A=!0,Ae(d,"complete"),Ae(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ae(this,"complete"),Ae(this,"abort"),vh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vh(this,!0)),St.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tE(this):this.bb())},t.bb=function(){tE(this)};function tE(d){if(d.h&&typeof o<"u"&&(!d.v[1]||js(d)!=4||d.Z()!=2)){if(d.u&&js(d)==4)Tn(d.Ea,0,d);else if(Ae(d,"readystatechange"),js(d)==4){d.h=!1;try{const ne=d.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var D;if(D=ne===0){var V=String(d.D).match(Hb)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),D=!p4.test(V?V.toLowerCase():"")}E=D}if(E)Ae(d,"complete"),Ae(d,"success");else{d.m=6;try{var $=2<js(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",eE(d)}}finally{vh(d)}}}}function vh(d,g){if(d.g){nE(d);const E=d.g,D=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Ae(d,"ready");try{E.onreadystatechange=D}catch{}}}function nE(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function js(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<js(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),ah(g)}};function rE(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function v4(d){const g={};d=(d.g&&2<=js(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<d.length;D++){if(y(d[D]))continue;var E=S(d[D]);const V=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=g[V]||[];g[V]=$,$.push(E)}C(g,function(D){return D.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bc(d,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||g}function sE(d){this.Aa=0,this.i=[],this.j=new Oc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Bc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Bc("baseRetryDelayMs",5e3,d),this.cb=Bc("retryDelaySeedMs",1e4,d),this.Wa=Bc("forwardChannelMaxRetries",2,d),this.wa=Bc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Fb(d&&d.concurrentRequestLimit),this.Da=new f4,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sE.prototype,t.la=8,t.G=1,t.connect=function(d,g,E,D){Sn(0),this.W=d,this.H=g||{},E&&D!==void 0&&(this.H.OSID=E,this.H.OAID=D),this.F=this.X,this.I=fE(this,null,this.W),wh(this)};function Yg(d){if(iE(d),d.G==3){var g=d.U++,E=Ds(d.I);if(dt(E,"SID",d.K),dt(E,"RID",g),dt(E,"TYPE","terminate"),Wc(d,E),g=new gi(d,d.j,g),g.L=2,g.v=mh(Ds(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=g.v,E=!0),E||(g.g=mE(g.j,null),g.g.ea(g.v)),g.F=Date.now(),dh(g)}hE(d)}function yh(d){d.g&&(Xg(d),d.g.cancel(),d.g=null)}function iE(d){yh(d),d.u&&(a.clearTimeout(d.u),d.u=null),xh(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function wh(d){if(!Ub(d.h)&&!d.s){d.s=!0;var g=d.Ga;H||X(),O||(H(),O=!0),F.add(g,d),d.B=0}}function y4(d,g){return $b(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Mc(m(d.Ga,d,g),dE(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const V=new gi(this,this.j,d);let $=this.o;if(this.S&&($?($=k($),I($,this.S)):$=this.S),this.m!==null||this.O||(V.H=$,$=null),this.P)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var D=this.i[E];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(g+=D,4096<g){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=aE(this,V,g),E=Ds(this.I),dt(E,"RID",d),dt(E,"CVER",22),this.D&&dt(E,"X-HTTP-Session-Id",this.D),Wc(this,E),$&&(this.O?g="headers="+encodeURIComponent(String(Zb($)))+"&"+g:this.m&&Kg(E,this.m,$)),Gg(this.h,V),this.Ua&&dt(E,"TYPE","init"),this.P?(dt(E,"$req",g),dt(E,"SID","null"),V.T=!0,Bg(V,E,null)):Bg(V,E,g),this.G=2}}else this.G==3&&(d?oE(this,d):this.i.length==0||Ub(this.h)||oE(this))};function oE(d,g){var E;g?E=g.l:E=d.U++;const D=Ds(d.I);dt(D,"SID",d.K),dt(D,"RID",E),dt(D,"AID",d.T),Wc(d,D),d.m&&d.o&&Kg(D,d.m,d.o),E=new gi(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),g&&(d.i=g.D.concat(d.i)),g=aE(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Gg(d.h,E),Bg(E,D,g)}function Wc(d,g){d.H&&M(d.H,function(E,D){dt(g,D,E)}),d.l&&Wb({},function(E,D){dt(g,D,E)})}function aE(d,g,E){E=Math.min(d.i.length,E);var D=d.l?m(d.l.Na,d.l,d):null;e:{var V=d.i;let $=-1;for(;;){const ne=["count="+E];$==-1?0<E?($=V[0].g,ne.push("ofs="+$)):$=0:ne.push("ofs="+$);let at=!0;for(let Zt=0;Zt<E;Zt++){let Xe=V[Zt].g;const cn=V[Zt].map;if(Xe-=$,0>Xe)$=Math.max(0,V[Zt].g-100),at=!1;else try{m4(cn,ne,"req"+Xe+"_")}catch{D&&D(cn)}}if(at){D=ne.join("&");break e}}}return d=d.i.splice(0,E),g.D=d,D}function lE(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;H||X(),O||(H(),O=!0),F.add(g,d),d.v=0}}function Qg(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Mc(m(d.Fa,d),dE(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,cE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Mc(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Sn(10),yh(this),cE(this))};function Xg(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function cE(d){d.g=new gi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Ds(d.qa);dt(g,"RID","rpc"),dt(g,"SID",d.K),dt(g,"AID",d.T),dt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&dt(g,"TO",d.ja),dt(g,"TYPE","xmlhttp"),Wc(d,g),d.m&&d.o&&Kg(g,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=mh(Ds(g)),E.m=null,E.P=!0,Ob(E,d)}t.Za=function(){this.C!=null&&(this.C=null,yh(this),Qg(this),Sn(19))};function xh(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function uE(d,g){var E=null;if(d.g==g){xh(d),Xg(d),d.g=null;var D=2}else if(qg(d.h,g))E=g.D,zb(d.h,g),D=1;else return;if(d.G!=0){if(g.o)if(D==1){E=g.m?g.m.length:0,g=Date.now()-g.F;var V=d.B;D=lh(),Ae(D,new Rb(D,E)),wh(d)}else lE(d);else if(V=g.s,V==3||V==0&&0<g.X||!(D==1&&y4(d,g)||D==2&&Qg(d)))switch(E&&0<E.length&&(g=d.h,g.i=g.i.concat(E)),V){case 1:Fo(d,5);break;case 4:Fo(d,10);break;case 3:Fo(d,6);break;default:Fo(d,2)}}}function dE(d,g){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*g}function Fo(d,g){if(d.j.info("Error code "+g),g==2){var E=m(d.fb,d),D=d.Xa;const V=!D;D=new Vo(D||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||hh(D,"https"),mh(D),V?d4(D.toString(),E):h4(D.toString(),E)}else Sn(2);d.G=0,d.l&&d.l.sa(g),hE(d),iE(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Sn(2)):(this.j.info("Failed to ping google.com"),Sn(1))};function hE(d){if(d.G=0,d.ka=[],d.l){const g=Bb(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ka,g),x(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function fE(d,g,E){var D=E instanceof Vo?Ds(E):new Vo(E);if(D.g!="")g&&(D.g=g+"."+D.g),fh(D,D.s);else{var V=a.location;D=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var $=new Vo(null);D&&hh($,D),g&&($.g=g),V&&fh($,V),E&&($.l=E),D=$}return E=d.D,g=d.ya,E&&g&&dt(D,E,g),dt(D,"VER",d.la),Wc(d,D),D}function mE(d,g,E){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new St(new ph({eb:E})):new St(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pE(){}t=pE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _h(){}_h.prototype.g=function(d,g){return new Jn(d,g)};function Jn(d,g){ae.call(this),this.g=new sE(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!y(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!y(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new La(this)}b(Jn,ae),Jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Yg(this.g)},Jn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Rc(d),d=E);g.i.push(new t4(g.Ya++,d)),g.G==3&&wh(g)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Yg(this.g),delete this.g,Jn.aa.N.call(this)};function gE(d){Fg.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const E in g){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}b(gE,Fg);function vE(){Ug.call(this),this.status=1}b(vE,Ug);function La(d){this.g=d}b(La,pE),La.prototype.ua=function(){Ae(this.g,"a")},La.prototype.ta=function(d){Ae(this.g,new gE(d))},La.prototype.sa=function(d){Ae(this.g,new vE)},La.prototype.ra=function(){Ae(this.g,"b")},_h.prototype.createWebChannel=_h.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,ZD=function(){return new _h},XD=function(){return lh()},QD=Oo,Gw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ch.NO_ERROR=0,ch.TIMEOUT=8,ch.HTTP_ERROR=6,Sf=ch,Db.COMPLETE="complete",YD=Db,kb.EventType=Dc,Dc.OPEN="a",Dc.CLOSE="b",Dc.ERROR="c",Dc.MESSAGE="d",ae.prototype.listen=ae.prototype.K,hu=kb,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,KD=St}).apply(typeof Qh<"u"?Qh:typeof self<"u"?self:typeof window<"u"?window:{});const mS="@firebase/firestore",pS="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Xp("@firebase/firestore");function Ya(){return wa.logLevel}function de(t,...e){if(wa.logLevel<=qe.DEBUG){const n=e.map(d_);wa.debug(`Firestore (${Ec}): ${t}`,...n)}}function ci(t,...e){if(wa.logLevel<=qe.ERROR){const n=e.map(d_);wa.error(`Firestore (${Ec}): ${t}`,...n)}}function Xl(t,...e){if(wa.logLevel<=qe.WARN){const n=e.map(d_);wa.warn(`Firestore (${Ec}): ${t}`,...n)}}function d_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,JD(t,r,n)}function JD(t,e,n){let r=`FIRESTORE (${Ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ci(r),new Error(r)}function st(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||JD(e,s,r)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}}class uW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dW{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new oa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new oa,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new oa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new e2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class hW{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fW{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const r=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=pW(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Be(t,e){return t<e?-1:t>e?1:0}function Kw(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Be(r,s);{const i=t2(),o=gW(i.encode(vS(t,n)),i.encode(vS(e,n)));return o!==0?o:Be(r,s)}}n+=r>65535?2:1}return Be(t.length,e.length)}function vS(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function gW(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Be(t[n],e[n]);return Be(t.length,e.length)}function Zl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=-62135596800,wS=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wS);return new kt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yS)throw new xe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wS}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-yS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new kt(0,0))}static max(){return new Pe(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="__name__";class os{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return os.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof os?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=os.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Be(e.length,n.length)}static compareSegments(e,n){const r=os.isNumericId(e),s=os.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?os.extractNumericId(e).compare(os.extractNumericId(n)):Kw(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return to.fromString(e.substring(4,e.length-2))}}class xt extends os{construct(e,n,r){return new xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const vW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends os{construct(e,n,r){return new rn(e,n,r)}static isValidIdentifier(e){return vW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xS}static keyField(){return new rn([xS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new xe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new xe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new xe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new xe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(xt.fromString(e))}static fromName(e){return new be(xt.fromString(e).popFirst(5))}static empty(){return new be(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new xt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=-1;function yW(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Pe.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new go(s,be.empty(),e)}function wW(t){return new go(t.readTime,t.key,fd)}class go{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new go(Pe.min(),be.empty(),fd)}static max(){return new go(Pe.max(),be.empty(),fd)}}function xW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tc(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==_W)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function EW(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}sg.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=-1;function ig(t){return t==null}function Rm(t){return t===0&&1/t==-1/0}function TW(t){return typeof t=="number"&&Number.isInteger(t)&&!Rm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="";function SW(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_S(e)),e=CW(t.get(n),e);return _S(e)}function CW(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case r2:n+="";break;default:n+=i}}return n}function _S(t){return t+r2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function s2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||tn.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xh(this.root,e,this.comparator,!0)}}class Xh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??tn.RED,this.left=s??tn.EMPTY,this.right=i??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new tn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ES(this.data.getIterator())}getIteratorFrom(e){return new ES(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class ES{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new ar([])}unionWith(e){let n=new Wt(rn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new i2("Invalid base64 string: "+i):i}}(e);return new ln(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ln(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const IW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(t){if(st(!!t,39018),typeof t=="string"){let e=0;const n=IW.exec(t);if(st(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yo(t){return typeof t=="string"?ln.fromBase64String(t):ln.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="server_timestamp",a2="__type__",l2="__previous_value__",c2="__local_write_time__";function f_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[a2])===null||n===void 0?void 0:n.stringValue)===o2}function og(t){const e=t.mapValue.fields[l2];return f_(e)?og(e):e}function md(t){const e=vo(t.mapValue.fields[c2].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kW{constructor(e,n,r,s,i,o,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Dm="(default)";class pd{constructor(e,n){this.projectId=e,this.database=n||Dm}static empty(){return new pd("","")}get isDefaultDatabase(){return this.database===Dm}isEqual(e){return e instanceof pd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="__type__",NW="__max__",Zh={mapValue:{}},d2="__vector__",jm="value";function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?f_(t)?4:PW(t)?9007199254740991:AW(t)?10:11:Te(28295,{value:t})}function Cs(t,e){if(t===e)return!0;const n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return md(t).isEqual(md(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=vo(s.timestampValue),a=vo(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return yo(s.bytesValue).isEqual(yo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return At(s.geoPointValue.latitude)===At(i.geoPointValue.latitude)&&At(s.geoPointValue.longitude)===At(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return At(s.integerValue)===At(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=At(s.doubleValue),a=At(i.doubleValue);return o===a?Rm(o)===Rm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Zl(t.arrayValue.values||[],e.arrayValue.values||[],Cs);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(bS(o)!==bS(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Cs(o[c],a[c])))return!1;return!0}(t,e);default:return Te(52216,{left:t})}}function gd(t,e){return(t.values||[]).find(n=>Cs(n,e))!==void 0}function Jl(t,e){if(t===e)return 0;const n=wo(t),r=wo(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=At(i.integerValue||i.doubleValue),c=At(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return TS(t.timestampValue,e.timestampValue);case 4:return TS(md(t),md(e));case 5:return Kw(t.stringValue,e.stringValue);case 6:return function(i,o){const a=yo(i),c=yo(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=Be(a[u],c[u]);if(h!==0)return h}return Be(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Be(At(i.latitude),At(o.latitude));return a!==0?a:Be(At(i.longitude),At(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return SS(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},m=o.fields||{},v=(a=f[jm])===null||a===void 0?void 0:a.arrayValue,b=(c=m[jm])===null||c===void 0?void 0:c.arrayValue,w=Be(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:SS(v,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Zh.mapValue&&o===Zh.mapValue)return 0;if(i===Zh.mapValue)return 1;if(o===Zh.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Kw(c[f],h[f]);if(m!==0)return m;const v=Jl(a[c[f]],u[h[f]]);if(v!==0)return v}return Be(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Te(23264,{Pe:n})}}function TS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=vo(t),r=vo(e),s=Be(n.seconds,r.seconds);return s!==0?s:Be(n.nanos,r.nanos)}function SS(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Jl(n[s],r[s]);if(i)return i}return Be(n.length,r.length)}function ec(t){return Yw(t)}function Yw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Yw(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Yw(n.fields[o])}`;return s+"}"}(t.mapValue):Te(61005,{value:t})}function Cf(t){switch(wo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=og(t);return e?16+Cf(e):16;case 5:return 2*t.stringValue.length;case 6:return yo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Cf(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ao(r.fields,(i,o)=>{s+=i.length+Cf(o)}),s}(t.mapValue);default:throw Te(13486,{value:t})}}function Qw(t){return!!t&&"integerValue"in t}function m_(t){return!!t&&"arrayValue"in t}function CS(t){return!!t&&"nullValue"in t}function IS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function If(t){return!!t&&"mapValue"in t}function AW(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[u2])===null||n===void 0?void 0:n.stringValue)===d2}function Au(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Au(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Au(t.arrayValue.values[n]);return e}return Object.assign({},t)}function PW(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===NW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!If(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Au(n)}setAll(e){let n=rn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Au(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());If(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];If(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ao(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new zn(Au(this.value))}}function h2(t){const e=[];return Ao(t.fields,(n,r)=>{const s=new rn([n]);if(If(r)){const i=h2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wn(e,0,Pe.min(),Pe.min(),Pe.min(),zn.empty(),0)}static newFoundDocument(e,n,r,s){return new wn(e,1,n,Pe.min(),r,s,0)}static newNoDocument(e,n){return new wn(e,2,n,Pe.min(),Pe.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new wn(e,3,n,Pe.min(),Pe.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.position=e,this.inclusive=n}}function kS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=Jl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function NS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n="asc"){this.field=e,this.dir=n}}function RW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{}class zt extends f2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jW(e,n,r):n==="array-contains"?new LW(e,r):n==="in"?new VW(e,r):n==="not-in"?new FW(e,r):n==="array-contains-any"?new UW(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new MW(e,r):new OW(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jl(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.matchesComparison(Jl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Is extends f2{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Is(e,n)}matches(e){return m2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function m2(t){return t.op==="and"}function p2(t){return DW(t)&&m2(t)}function DW(t){for(const e of t.filters)if(e instanceof Is)return!1;return!0}function Xw(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+ec(t.value);if(p2(t))return t.filters.map(e=>Xw(e)).join(",");{const e=t.filters.map(n=>Xw(n)).join(",");return`${t.op}(${e})`}}function g2(t,e){return t instanceof zt?function(r,s){return s instanceof zt&&r.op===s.op&&r.field.isEqual(s.field)&&Cs(r.value,s.value)}(t,e):t instanceof Is?function(r,s){return s instanceof Is&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&g2(o,s.filters[a]),!0):!1}(t,e):void Te(19439)}function v2(t){return t instanceof zt?function(n){return`${n.field.canonicalString()} ${n.op} ${ec(n.value)}`}(t):t instanceof Is?function(n){return n.op.toString()+" {"+n.getFilters().map(v2).join(" ,")+"}"}(t):"Filter"}class jW extends zt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class MW extends zt{constructor(e,n){super(e,"in",n),this.keys=y2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OW extends zt{constructor(e,n){super(e,"not-in",n),this.keys=y2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function y2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class LW extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return m_(n)&&gd(n.arrayValue,this.value)}}class VW extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gd(this.value.arrayValue,n)}}class FW extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gd(this.value.arrayValue,n)}}class UW extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!m_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function AS(t,e=null,n=[],r=[],s=null,i=null,o=null){return new $W(t,e,n,r,s,i,o)}function p_(t){const e=Me(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ig(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ec(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ec(r)).join(",")),e.Ie=n}return e.Ie}function g_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!g2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NS(t.startAt,e.startAt)&&NS(t.endAt,e.endAt)}function Zw(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function zW(t,e,n,r,s,i,o,a){return new ag(t,e,n,r,s,i,o,a)}function v_(t){return new ag(t)}function PS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BW(t){return t.collectionGroup!==null}function Pu(t){const e=Me(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Wt(rn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Om(i,r))}),n.has(rn.keyField().canonicalString())||e.Ee.push(new Om(rn.keyField(),r))}return e.Ee}function _s(t){const e=Me(t);return e.de||(e.de=WW(e,Pu(t))),e.de}function WW(t,e){if(t.limitType==="F")return AS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Om(s.field,i)});const n=t.endAt?new Mm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mm(t.startAt.position,t.startAt.inclusive):null;return AS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jw(t,e,n){return new ag(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lg(t,e){return g_(_s(t),_s(e))&&t.limitType===e.limitType}function w2(t){return`${p_(_s(t))}|lt:${t.limitType}`}function Qa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>v2(s)).join(", ")}]`),ig(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ec(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ec(s)).join(",")),`Target(${r})`}(_s(t))}; limitType=${t.limitType})`}function cg(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):be.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Pu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=kS(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Pu(r),s)||r.endAt&&!function(o,a,c){const u=kS(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Pu(r),s))}(t,e)}function HW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x2(t){return(e,n)=>{let r=!1;for(const s of Pu(t)){const i=qW(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qW(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Jl(c,u):Te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return s2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW=new Tt(be.comparator);function ui(){return GW}const _2=new Tt(be.comparator);function fu(...t){let e=_2;for(const n of t)e=e.insert(n.key,n);return e}function b2(t){let e=_2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xo(){return Ru()}function E2(){return Ru()}function Ru(){return new Aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const KW=new Tt(be.comparator),YW=new Wt(be.comparator);function Ge(...t){let e=YW;for(const n of t)e=e.add(n);return e}const QW=new Wt(Be);function XW(){return QW}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rm(e)?"-0":e}}function T2(t){return{integerValue:""+t}}function ZW(t,e){return TW(e)?T2(e):y_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(){this._=void 0}}function JW(t,e,n){return t instanceof Lm?function(s,i){const o={fields:{[a2]:{stringValue:o2},[c2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&f_(i)&&(i=og(i)),i&&(o.fields[l2]=i),{mapValue:o}}(n,e):t instanceof vd?C2(t,e):t instanceof yd?I2(t,e):function(s,i){const o=S2(s,i),a=RS(o)+RS(s.Re);return Qw(o)&&Qw(s.Re)?T2(a):y_(s.serializer,a)}(t,e)}function eH(t,e,n){return t instanceof vd?C2(t,e):t instanceof yd?I2(t,e):n}function S2(t,e){return t instanceof Vm?function(r){return Qw(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Lm extends ug{}class vd extends ug{constructor(e){super(),this.elements=e}}function C2(t,e){const n=k2(e);for(const r of t.elements)n.some(s=>Cs(s,r))||n.push(r);return{arrayValue:{values:n}}}class yd extends ug{constructor(e){super(),this.elements=e}}function I2(t,e){let n=k2(e);for(const r of t.elements)n=n.filter(s=>!Cs(s,r));return{arrayValue:{values:n}}}class Vm extends ug{constructor(e,n){super(),this.serializer=e,this.Re=n}}function RS(t){return At(t.integerValue||t.doubleValue)}function k2(t){return m_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tH(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vd&&s instanceof vd||r instanceof yd&&s instanceof yd?Zl(r.elements,s.elements,Cs):r instanceof Vm&&s instanceof Vm?Cs(r.Re,s.Re):r instanceof Lm&&s instanceof Lm}(t.transform,e.transform)}class nH{constructor(e,n){this.version=e,this.transformResults=n}}class Qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dg{}function N2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new w_(t.key,Qr.none()):new $d(t.key,t.data,Qr.none());{const n=t.data,r=zn.empty();let s=new Wt(rn.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Po(t.key,r,new ar(s.toArray()),Qr.none())}}function rH(t,e,n){t instanceof $d?function(s,i,o){const a=s.value.clone(),c=jS(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Po?function(s,i,o){if(!kf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=jS(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(A2(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Du(t,e,n,r){return t instanceof $d?function(i,o,a,c){if(!kf(i.precondition,o))return a;const u=i.value.clone(),h=MS(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Po?function(i,o,a,c){if(!kf(i.precondition,o))return a;const u=MS(i.fieldTransforms,c,o),h=o.data;return h.setAll(A2(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return kf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function sH(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=S2(r.transform,s||null);i!=null&&(n===null&&(n=zn.empty()),n.set(r.field,i))}return n||null}function DS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zl(r,s,(i,o)=>tH(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $d extends dg{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Po extends dg{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function A2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jS(t,e,n){const r=new Map;st(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,eH(o,a,n[s]))}return r}function MS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,JW(i,o,e))}return r}class w_ extends dg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iH extends dg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&rH(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=N2(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(n,r)=>DS(n,r))&&Zl(this.baseMutations,e.baseMutations,(n,r)=>DS(n,r))}}class x_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){st(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return KW}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new x_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aH=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Ke;function cH(t){switch(t){case K.OK:return Te(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function P2(t){if(t===void 0)return ci("GRPC error has no .code"),K.UNKNOWN;switch(t){case jt.OK:return K.OK;case jt.CANCELLED:return K.CANCELLED;case jt.UNKNOWN:return K.UNKNOWN;case jt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case jt.INTERNAL:return K.INTERNAL;case jt.UNAVAILABLE:return K.UNAVAILABLE;case jt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case jt.NOT_FOUND:return K.NOT_FOUND;case jt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case jt.ABORTED:return K.ABORTED;case jt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case jt.DATA_LOSS:return K.DATA_LOSS;default:return Te(39323,{code:t})}}(Ke=jt||(jt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=new to([4294967295,4294967295],0);function OS(t){const e=t2().encode(t),n=new GD;return n.update(e),new Uint8Array(n.digest())}function LS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new to([n,r],0),new to([s,i],0)]}class __{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mu(`Invalid padding: ${n}`);if(r<0)throw new mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mu(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=to.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(to.fromNumber(r)));return s.compare(uH)===1&&(s=new to([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=OS(e),[r,s]=LS(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new __(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=OS(e),[r,s]=LS(n);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,zd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hg(Pe.min(),s,new Tt(Be),ui(),Ge())}}class zd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zd(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class R2{constructor(e,n){this.targetId=e,this.Ce=n}}class D2{constructor(e,n,r=ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class VS{constructor(){this.Fe=0,this.Me=FS(),this.xe=ln.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ge(),n=Ge(),r=Ge();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:i})}}),new zd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=FS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,st(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class dH{constructor(e){this.ze=e,this.je=new Map,this.He=ui(),this.Je=Jh(),this.Ye=Jh(),this.Ze=new Tt(Be)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(Zw(i))if(r===0){const o=new be(i.path);this.tt(n,o,wn.newNoDocument(o,Pe.min()))}else st(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),c=a?this.lt(a,e,o):1;if(c!==0){this.st(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=yo(r).toUint8Array()}catch(c){if(c instanceof i2)return Xl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new __(o,s,i)}catch(c){return Xl(c instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Zw(a.target)){const c=new be(a.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,wn.newNoDocument(c,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let r=Ge();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new hg(e,n,this.Ze,this.He,r);return this.He=ui(),this.Je=Jh(),this.Ye=Jh(),this.Ze=new Tt(Be),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new VS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Wt(Be),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Wt(Be),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new VS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Jh(){return new Tt(be.comparator)}function FS(){return new Tt(be.comparator)}const hH={asc:"ASCENDING",desc:"DESCENDING"},fH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mH={and:"AND",or:"OR"};class pH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ex(t,e){return t.useProto3Json||ig(e)?e:{value:e}}function Fm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function j2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gH(t,e){return Fm(t,e.toTimestamp())}function bs(t){return st(!!t,49232),Pe.fromTimestamp(function(n){const r=vo(n);return new kt(r.seconds,r.nanos)}(t))}function b_(t,e){return tx(t,e).canonicalString()}function tx(t,e){const n=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function M2(t){const e=xt.fromString(t);return st(U2(e),10190,{key:e.toString()}),e}function nx(t,e){return b_(t.databaseId,e.path)}function ey(t,e){const n=M2(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(L2(n))}function O2(t,e){return b_(t.databaseId,e)}function vH(t){const e=M2(t);return e.length===4?xt.emptyPath():L2(e)}function rx(t){return new xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L2(t){return st(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function US(t,e,n){return{name:nx(t,e),fields:n.value.mapValue.fields}}function yH(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Te(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(st(h===void 0||typeof h=="string",58123),ln.fromBase64String(h||"")):(st(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ln.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?K.UNKNOWN:P2(u.code);return new xe(h,u.message||"")}(o);n=new D2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ey(t,r.document.name),i=bs(r.document.updateTime),o=r.document.createTime?bs(r.document.createTime):Pe.min(),a=new zn({mapValue:{fields:r.document.fields}}),c=wn.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Nf(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ey(t,r.document),i=r.readTime?bs(r.readTime):Pe.min(),o=wn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Nf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ey(t,r.document),i=r.removedTargetIds||[];n=new Nf([],i,s,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new lH(s,i),a=r.targetId;n=new R2(a,o)}}return n}function wH(t,e){let n;if(e instanceof $d)n={update:US(t,e.key,e.value)};else if(e instanceof w_)n={delete:nx(t,e.key)};else if(e instanceof Po)n={update:US(t,e.key,e.data),updateMask:kH(e.fieldMask)};else{if(!(e instanceof iH))return Te(16599,{ft:e.type});n={verify:nx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Lm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vm)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw Te(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:gH(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Te(27497)}(t,e.precondition)),n}function xH(t,e){return t&&t.length>0?(st(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?bs(s.updateTime):bs(i);return o.isEqual(Pe.min())&&(o=bs(i)),new nH(o,s.transformResults||[])}(n,e))):[]}function _H(t,e){return{documents:[O2(t,e.path)]}}function bH(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O2(t,s);const i=function(u){if(u.length!==0)return F2(Is.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Xa(m.field),direction:SH(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ex(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:s}}function EH(t){let e=vH(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){st(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=V2(f);return m instanceof Is&&p2(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new Om(Za(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,ig(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,v=f.values||[];return new Mm(v,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,v=f.values||[];return new Mm(v,m)}(n.endAt)),zW(e,s,o,i,a,"F",c,u)}function TH(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function V2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Za(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Za(n.unaryFilter.field);return zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Za(n.unaryFilter.field);return zt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Za(n.unaryFilter.field);return zt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(t):t.fieldFilter!==void 0?function(n){return zt.create(Za(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Is.create(n.compositeFilter.filters.map(r=>V2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(t):Te(30097,{filter:t})}function SH(t){return hH[t]}function CH(t){return fH[t]}function IH(t){return mH[t]}function Xa(t){return{fieldPath:t.canonicalString()}}function Za(t){return rn.fromServerFormat(t.fieldPath)}function F2(t){return t instanceof zt?function(n){if(n.op==="=="){if(IS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NAN"}};if(CS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(IS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NAN"}};if(CS(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(n.field),op:CH(n.op),value:n.value}}}(t):t instanceof Is?function(n){const r=n.getFilters().map(s=>F2(s));return r.length===1?r[0]:{compositeFilter:{op:IH(n.op),filters:r}}}(t):Te(54877,{filter:t})}function kH(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function U2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,r,s,i=Pe.min(),o=Pe.min(),a=ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NH{constructor(e){this.wt=e}}function AH(t){const e=EH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(){this.Cn=new RH}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(go.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(go.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class RH{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Wt(xt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Wt(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$2=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un($2,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new tc(0)}static lr(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="LruGarbageCollector",DH=1048576;function BS([t,e],[n,r]){const s=Be(t,n);return s===0?Be(e,r):s}class jH{constructor(e){this.Er=e,this.buffer=new Wt(BS),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();BS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){de(zS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Sc(n)?de(zS,"Ignoring IndexedDB error during garbage collection: ",n):await Tc(n)}await this.mr(3e5)})}}class OH{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(sg.le);const r=new jH(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve($S)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$S):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ya()<=qe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function LH(t,e){return new OH(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(){this.changes=new Aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Du(r.mutation,s,ar.empty(),kt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ge()){const s=Xo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=fu();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ui();const o=Ru(),a=function(){return Ru()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Po)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Du(h.mutation,u,h.mutation.getFieldMask(),kt.now())):o.set(u.key,ar.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new FH(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ru();let s=new Tt((o,a)=>o-a),i=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||ar.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||Ge()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=E2();h.forEach(m=>{if(!i.has(m)){const v=N2(n.get(m),r.get(m));v!==null&&f.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):BW(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Xo());let a=fd,c=i;return o.next(u=>q.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ge())).next(h=>({batchId:a,changes:b2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let s=fu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=fu();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,c=>{const u=function(f,m){return new ag(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,wn.newInvalidDocument(h)))});let a=fu();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Du(h.mutation,u,ar.empty(),kt.now()),cg(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return q.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bs(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:AH(s.bundledQuery),readTime:bs(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(){this.overlays=new Tt(be.comparator),this.Qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xo();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Xo(),i=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Tt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Xo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Xo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return q.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new aH(n,r));let i=this.Qr.get(n);i===void 0&&(i=Ge(),this.Qr.set(n,i)),this.Qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.$r=new Wt(Ht.Ur),this.Kr=new Wt(Ht.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Ht(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Ht(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new be(new xt([])),r=new Ht(n,e),s=new Ht(n,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new be(new xt([])),r=new Ht(n,e),s=new Ht(n,e+1);let i=Ge();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ht(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return be.comparator(e.key,n.key)||Be(e.Zr,n.Zr)}static Wr(e,n){return Be(e.Zr,n.Zr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Wt(Ht.Ur)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oH(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Xr=this.Xr.add(new Ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?h_:this.nr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const a=this.ei(o.Zr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt(Be);return n.forEach(s=>{const i=new Ht(s,0),o=new Ht(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{r=r.add(a.Zr)})}),q.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;be.isDocumentKey(i)||(i=i.child(""));const o=new Ht(new be(i),0);let a=new Wt(Be);return this.Xr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Zr)),!0)},o),q.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){st(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return q.forEach(n.mutations,s=>{const i=new Ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Ht(n,0),s=this.Xr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(e){this.ii=e,this.docs=function(){return new Tt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():wn.newInvalidDocument(n))}getEntries(e,n){let r=ui();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wn.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ui();const o=n.path,a=new be(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||xW(wW(h),r)<=0||(s.has(h.key)||cg(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Te(9500)}si(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qH(this)}getSize(e){return q.resolve(this.size)}}class qH extends VH{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(e){this.persistence=e,this.oi=new Aa(n=>p_(n),g_),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this._i=0,this.ai=new E_,this.targetCount=0,this.ui=tc.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),q.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new tc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Tr(n),q.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.ci={},this.overlays={},this.li=new sg(0),this.hi=!1,this.hi=!0,this.Pi=new BH,this.referenceDelegate=e(this),this.Ti=new GH(this),this.indexManager=new PH,this.remoteDocumentCache=function(s){return new HH(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new NH(n),this.Ei=new $H(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new WH(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new KH(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,n){return q.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class KH extends bW{constructor(e){super(),this.currentSequenceNumber=e}}class T_{constructor(e){this.persistence=e,this.Vi=new E_,this.mi=null}static fi(e){return new T_(e)}get gi(){if(this.mi)return this.mi;throw Te(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.gi,r=>{const s=be.fromPath(r);return this.pi(e,s).next(i=>{i||n.removeEntry(s,Pe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return q.or([()=>q.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Um{constructor(e,n){this.persistence=e,this.yi=new Aa(r=>SW(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=LH(this,n)}static fi(e,n){return new Um(e,n)}di(){}Ai(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return q.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Pe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),q.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cf(e.data.value)),n}Dr(e,n,r){return q.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=Ge(),s=Ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new S_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return $$()?8:EW(En())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new YH;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(Ya()<=qe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),q.resolve()):(Ya()<=qe.DEBUG&&de("QueryEngine","Query:",Qa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(Ya()<=qe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_s(n))):q.resolve())}ws(e,n){if(PS(n))return q.resolve(null);let r=_s(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jw(n,null,"F"),r=_s(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ge(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.vs(n,a);return this.Cs(n,u,o,c.readTime)?this.ws(e,Jw(n,null,"F")):this.Fs(e,u,n,c)}))})))}bs(e,n,r,s){return PS(n)||s.isEqual(Pe.min())?q.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(Ya()<=qe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qa(n)),this.Fs(e,o,n,yW(s,fd)).next(a=>a))})}vs(e,n){let r=new Wt(x2(e));return n.forEach((s,i)=>{cg(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ya()<=qe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.ys.getDocumentsMatchingQuery(e,n,go.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="LocalStore",XH=3e8;class ZH{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Tt(Be),this.Os=new Aa(i=>p_(i),g_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UH(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function JH(t,e,n,r){return new ZH(t,e,n,r)}async function B2(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=Ge();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:a}))})})}function eq(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,m=f.keys();let v=q.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(w=>{const x=u.docVersions.get(b);st(x!==null,48541),w.version.compareTo(x)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ge();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function W2(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function tq(t,e){const n=Me(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ti.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(i,h.addedDocuments,f)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(ln.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(w,x,_){return w.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=XH?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,v,h)&&a.push(n.Ti.updateTargetData(i,v))});let c=ui(),u=Ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(nq(i,o,e.documentUpdates).next(h=>{c=h.qs,u=h.Qs})),!r.isEqual(Pe.min())){const h=n.Ti.getLastRemoteSnapshotVersion(i).next(f=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.xs=s,i))}function nq(t,e,n){let r=Ge(),s=Ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ui();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(Pe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):de(C_,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{qs:o,Qs:s}})}function rq(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=h_),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sq(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Ti.allocateTargetId(r).next(o=>(s=new Wi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function sx(t,e,n){const r=Me(t),s=r.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Sc(o))throw o;de(C_,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function WS(t,e,n){const r=Me(t);let s=Pe.min(),i=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Me(c),m=f.Os.get(h);return m!==void 0?q.resolve(f.xs.get(m)):f.Ti.getTargetData(u,h)}(r,o,_s(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?s:Pe.min(),n?i:Ge())).next(a=>(iq(r,HW(e),a),{documents:a,$s:i})))}function iq(t,e,n){let r=t.Ns.get(e)||Pe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ns.set(e,r)}class HS{constructor(){this.activeTargetIds=XW()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oq{constructor(){this.xo=new HS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new HS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="ConnectivityMonitor";class GS{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){de(qS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){de(qS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function ix(){return ef===null?ef=function(){return 268435456+Math.round(2147483648*Math.random())}():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="RestConnection",lq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cq{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Dm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,i){const o=ix(),a=this.jo(e,n.toUriEncodedString());de(ty,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:u}=new URL(a),h=Ca(u);return this.Jo(e,a,c,r,h).then(f=>(de(ty,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Xl(ty,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Yo(e,n,r,s,i,o){return this.zo(e,n,r,s,i)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ec}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,n){const r=lq[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class dq extends cq{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=ix();return new Promise((a,c)=>{const u=new KD;u.setWithCredentials(!0),u.listenOnce(YD.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Sf.NO_ERROR:const f=u.getResponseJson();de(mn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Sf.TIMEOUT:de(mn,`RPC '${e}' ${o} timed out`),c(new xe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Sf.HTTP_ERROR:const m=u.getStatus();if(de(mn,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const w=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(y)>=0?y:K.UNKNOWN}(b.status);c(new xe(w,b.message))}else c(new xe(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new xe(K.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{h_:e,streamId:o,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{de(mn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);de(mn,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}I_(e,n,r){const s=ix(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ZD(),a=XD(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");de(mn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.E_(f);let m=!1,v=!1;const b=new uq({Zo:x=>{v?de(mn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(de(mn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),de(mn,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Xo:()=>f.close()}),w=(x,_,y)=>{x.listen(_,T=>{try{y(T)}catch(N){setTimeout(()=>{throw N},0)}})};return w(f,hu.EventType.OPEN,()=>{v||(de(mn,`RPC '${e}' stream ${s} transport opened.`),b.__())}),w(f,hu.EventType.CLOSE,()=>{v||(v=!0,de(mn,`RPC '${e}' stream ${s} transport closed`),b.u_(),this.d_(f))}),w(f,hu.EventType.ERROR,x=>{v||(v=!0,Xl(mn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),b.u_(new xe(K.UNAVAILABLE,"The operation could not be completed")))}),w(f,hu.EventType.MESSAGE,x=>{var _;if(!v){const y=x.data[0];st(!!y,16349);const T=y,N=(T==null?void 0:T.error)||((_=T[0])===null||_===void 0?void 0:_.error);if(N){de(mn,`RPC '${e}' stream ${s} received error:`,N);const j=N.status;let M=function(R){const I=jt[R];if(I!==void 0)return P2(I)}(j),C=N.message;M===void 0&&(M=K.INTERNAL,C="Unknown error status: "+j+" with message "+N.message),v=!0,b.u_(new xe(M,C)),f.close()}else de(mn,`RPC '${e}' stream ${s} received:`,y),b.c_(y)}}),w(a,QD.STAT_EVENT,x=>{x.stat===Gw.PROXY?de(mn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Gw.NOPROXY&&de(mn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function ny(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){return new pH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="PersistentStream";class q2{constructor(e,n,r,s,i,o,a,c){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new H2(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new xe(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return de(KS,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(de(KS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hq extends q2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=yH(this.serializer,e),r=function(i){if(!("targetChange"in i))return Pe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Pe.min():o.readTime?bs(o.readTime):Pe.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=rx(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=Zw(c)?{documents:_H(i,c)}:{query:bH(i,c).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=j2(i,o.resumeToken);const u=ex(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Pe.min())>0){a.readTime=Fm(i,o.snapshotVersion.toTimestamp());const u=ex(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=TH(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=rx(this.serializer),n.removeTarget=e,this.Q_(n)}}class fq extends q2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=xH(e.writeResults,e.commitTime),r=bs(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=rx(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wH(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{}class pq extends mq{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new xe(K.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,tx(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(K.UNKNOWN,i.toString())})}Yo(e,n,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,tx(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(K.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class gq{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(ci(n),this.ua=!1):de("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="RemoteStore";class vq{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{Pa(this)&&(de(xa,"Restarting streams for network reachability change."),await async function(c){const u=Me(c);u.da.add(4),await Bd(u),u.Va.set("Unknown"),u.da.delete(4),await mg(u)}(this))})}),this.Va=new gq(r,s)}}async function mg(t){if(Pa(t))for(const e of t.Aa)await e(!0)}async function Bd(t){for(const e of t.Aa)await e(!1)}function G2(t,e){const n=Me(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),A_(n)?N_(n):Cc(n).N_()&&k_(n,e))}function I_(t,e){const n=Me(t),r=Cc(n);n.Ea.delete(e),r.N_()&&K2(n,e),n.Ea.size===0&&(r.N_()?r.k_():Pa(n)&&n.Va.set("Unknown"))}function k_(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cc(t).Z_(e)}function K2(t,e){t.ma.Ke(e),Cc(t).X_(e)}function N_(t){t.ma=new dH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Cc(t).start(),t.Va.ca()}function A_(t){return Pa(t)&&!Cc(t).O_()&&t.Ea.size>0}function Pa(t){return Me(t).da.size===0}function Y2(t){t.ma=void 0}async function yq(t){t.Va.set("Online")}async function wq(t){t.Ea.forEach((e,n)=>{k_(t,e)})}async function xq(t,e){Y2(t),A_(t)?(t.Va.Pa(e),N_(t)):t.Va.set("Unknown")}async function _q(t,e,n){if(t.Va.set("Online"),e instanceof D2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ea.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ea.delete(a),s.ma.removeTarget(a))}(t,e)}catch(r){de(xa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $m(t,r)}else if(e instanceof Nf?t.ma.Xe(e):e instanceof R2?t.ma.ot(e):t.ma.nt(e),!n.isEqual(Pe.min()))try{const r=await W2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.ma.It(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ea.get(u);h&&i.Ea.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.Ea.get(c);if(!h)return;i.Ea.set(c,h.withResumeToken(ln.EMPTY_BYTE_STRING,h.snapshotVersion)),K2(i,c);const f=new Wi(h.target,c,u,h.sequenceNumber);k_(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){de(xa,"Failed to raise snapshot:",r),await $m(t,r)}}async function $m(t,e,n){if(!Sc(e))throw e;t.da.add(1),await Bd(t),t.Va.set("Offline"),n||(n=()=>W2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(xa,"Retrying IndexedDB access"),await n(),t.da.delete(1),await mg(t)})}function Q2(t,e){return e().catch(n=>$m(t,n,e))}async function pg(t){const e=Me(t),n=xo(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:h_;for(;bq(e);)try{const s=await rq(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,Eq(e,s)}catch(s){await $m(e,s)}X2(e)&&Z2(e)}function bq(t){return Pa(t)&&t.Ia.length<10}function Eq(t,e){t.Ia.push(e);const n=xo(t);n.N_()&&n.ea&&n.ta(e.mutations)}function X2(t){return Pa(t)&&!xo(t).O_()&&t.Ia.length>0}function Z2(t){xo(t).start()}async function Tq(t){xo(t).ia()}async function Sq(t){const e=xo(t);for(const n of t.Ia)e.ta(n.mutations)}async function Cq(t,e,n){const r=t.Ia.shift(),s=x_.from(r,e,n);await Q2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await pg(t)}async function Iq(t,e){e&&xo(t).ea&&await async function(r,s){if(function(o){return cH(o)&&o!==K.ABORTED}(s.code)){const i=r.Ia.shift();xo(r).L_(),await Q2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await pg(r)}}(t,e),X2(t)&&Z2(t)}async function YS(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),de(xa,"RemoteStore received new credentials");const r=Pa(n);n.da.add(3),await Bd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await mg(n)}async function kq(t,e){const n=Me(t);e?(n.da.delete(2),await mg(n)):e||(n.da.add(2),await Bd(n),n.Va.set("Unknown"))}function Cc(t){return t.fa||(t.fa=function(n,r,s){const i=Me(n);return i.oa(),new hq(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:yq.bind(null,t),n_:wq.bind(null,t),i_:xq.bind(null,t),Y_:_q.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),A_(t)?N_(t):t.Va.set("Unknown")):(await t.fa.stop(),Y2(t))})),t.fa}function xo(t){return t.ga||(t.ga=function(n,r,s){const i=Me(n);return i.oa(),new fq(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:Tq.bind(null,t),i_:Iq.bind(null,t),na:Sq.bind(null,t),ra:Cq.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await pg(t)):(await t.ga.stop(),t.Ia.length>0&&(de(xa,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new P_(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R_(t,e){if(ci("AsyncQueue",`${e}: ${t}`),Sc(t))return new xe(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{static emptySet(e){return new bl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=fu(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.pa=new Tt(be.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Te(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class nc{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new nc(e,n,bl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Aq{constructor(){this.queries=XS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Me(n),i=s.queries;s.queries=XS(),i.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new xe(K.ABORTED,"Firestore shutting down"))}}function XS(){return new Aa(t=>w2(t),lg)}async function Pq(t,e){const n=Me(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new Nq,r=e.va()?0:1);try{switch(r){case 0:i.ba=await n.onListen(s,!0);break;case 1:i.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=R_(o,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.Fa(n.onlineState),i.ba&&e.Ma(i.ba)&&D_(n)}async function Rq(t,e){const n=Me(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dq(t,e){const n=Me(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Ma(s)&&(r=!0);o.ba=s}}r&&D_(n)}function jq(t,e,n){const r=Me(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function D_(t){t.Ca.forEach(e=>{e.next()})}var ox,ZS;(ZS=ox||(ox={})).xa="default",ZS.Cache="cache";class Mq{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ox.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e){this.key=e}}class ej{constructor(e){this.key=e}}class Oq{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ge(),this.mutatedKeys=Ge(),this.Za=x2(e),this.Xa=new bl(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new QS,s=n?n.Xa:this.Xa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),v=cg(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let x=!1;m&&v?m.data.isEqual(v.data)?b!==w&&(r.track({type:3,doc:v}),x=!0):this.ru(m,v)||(r.track({type:2,doc:v}),x=!0,(c&&this.Za(v,c)>0||u&&this.Za(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),x=!0):m&&!v&&(r.track({type:1,doc:m}),x=!0,(c||u)&&(a=!0)),x&&(v?(o=o.add(v),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Xa:o,nu:r,Cs:a,mutatedKeys:i}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((h,f)=>function(v,b){const w=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:x})}};return w(v)-w(b)}(h.type,f.type)||this.Za(h.doc,f.doc)),this.iu(r),s=s!=null&&s;const a=n&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Ja;return this.Ja=c,o.length!==0||u?{snapshot:new nc(this.query,e.Xa,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:a}:{ou:a}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new QS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ge(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new ej(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new J2(r))}),n}au(e){this.Ha=e.$s,this.Ya=Ge();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return nc.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const j_="SyncEngine";class Lq{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Vq{constructor(e){this.key=e,this.cu=!1}}class Fq{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new Aa(a=>w2(a),lg),this.Pu=new Map,this.Tu=new Set,this.Iu=new Tt(be.comparator),this.Eu=new Map,this.du=new E_,this.Au={},this.Ru=new Map,this.Vu=tc.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Uq(t,e,n=!0){const r=oj(t);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await tj(r,e,n,!0),s}async function $q(t,e){const n=oj(t);await tj(n,e,!0,!1)}async function tj(t,e,n,r){const s=await sq(t.localStore,_s(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await zq(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&G2(t.remoteStore,s),a}async function zq(t,e,n,r,s){t.fu=(f,m,v)=>async function(w,x,_,y){let T=x.view.tu(_);T.Cs&&(T=await WS(w.localStore,x.query,!1).then(({documents:C})=>x.view.tu(C,T)));const N=y&&y.targetChanges.get(x.targetId),j=y&&y.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(T,w.isPrimaryClient,N,j);return eC(w,x.targetId,M.ou),M.snapshot}(t,f,m,v);const i=await WS(t.localStore,e,!0),o=new Oq(e,i.$s),a=o.tu(i.documents),c=zd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);eC(t,n,u.ou);const h=new Lq(e,n,o);return t.hu.set(e,h),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),u.snapshot}async function Bq(t,e,n){const r=Me(t),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!lg(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sx(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&I_(r.remoteStore,s.targetId),ax(r,s.targetId)}).catch(Tc)):(ax(r,s.targetId),await sx(r.localStore,s.targetId,!0))}async function Wq(t,e){const n=Me(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),I_(n.remoteStore,r.targetId))}async function Hq(t,e,n){const r=Zq(t);try{const s=await function(o,a){const c=Me(o),u=kt.now(),h=a.reduce((v,b)=>v.add(b.key),Ge());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=ui(),w=Ge();return c.Bs.getEntries(v,h).next(x=>{b=x,b.forEach((_,y)=>{y.isValidDocument()||(w=w.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(x=>{f=x;const _=[];for(const y of a){const T=sH(y,f.get(y.key).overlayedDocument);T!=null&&_.push(new Po(y.key,T,h2(T.value.mapValue),Qr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,_,a)}).next(x=>{m=x;const _=x.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(v,x.batchId,_)})}).then(()=>({batchId:m.batchId,changes:b2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Au[o.currentUser.toKey()];u||(u=new Tt(Be)),u=u.insert(a,c),o.Au[o.currentUser.toKey()]=u}(r,s.batchId,n),await Wd(r,s.changes),await pg(r.remoteStore)}catch(s){const i=R_(s,"Failed to persist write");n.reject(i)}}async function nj(t,e){const n=Me(t);try{const r=await tq(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Eu.get(i);o&&(st(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?st(o.cu,14607):s.removedDocuments.size>0&&(st(o.cu,42227),o.cu=!1))}),await Wd(n,r,e)}catch(r){await Tc(r)}}function JS(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((i,o)=>{const a=o.view.Fa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Me(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.Fa(a)&&(u=!0)}),u&&D_(c)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qq(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new Tt(be.comparator);o=o.insert(i,wn.newNoDocument(i,Pe.min()));const a=Ge().add(i),c=new hg(Pe.min(),new Map,new Tt(Be),o,a);await nj(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(e),M_(r)}else await sx(r.localStore,e,!1).then(()=>ax(r,e,n)).catch(Tc)}async function Gq(t,e){const n=Me(t),r=e.batch.batchId;try{const s=await eq(n.localStore,e);sj(n,r,null),rj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wd(n,s)}catch(s){await Tc(s)}}async function Kq(t,e,n){const r=Me(t);try{const s=await function(o,a){const c=Me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(st(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);sj(r,e,n),rj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wd(r,s)}catch(s){await Tc(s)}}function rj(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function sj(t,e,n){const r=Me(t);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function ax(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||ij(t,r)})}function ij(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(I_(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),M_(t))}function eC(t,e,n){for(const r of n)r instanceof J2?(t.du.addReference(r.key,e),Yq(t,r)):r instanceof ej?(de(j_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||ij(t,r.key)):Te(19791,{pu:r})}function Yq(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(de(j_,"New document in limbo: "+n),t.Tu.add(r),M_(t))}function M_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new be(xt.fromString(e)),r=t.Vu.next();t.Eu.set(r,new Vq(n)),t.Iu=t.Iu.insert(n,r),G2(t.remoteStore,new Wi(_s(v_(n.path)),r,"TargetPurposeLimboResolution",sg.le))}}async function Wd(t,e,n){const r=Me(t),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((a,c)=>{o.push(r.fu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=S_.Rs(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(c,u){const h=Me(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(u,m=>q.forEach(m.ds,v=>h.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>q.forEach(m.As,v=>h.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Sc(f))throw f;de(C_,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const v=h.xs.get(m),b=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(b);h.xs=h.xs.insert(m,w)}}}(r.localStore,i))}async function Qq(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){de(j_,"User change. New user:",e.toKey());const r=await B2(n.localStore,e);n.currentUser=e,function(i,o){i.Ru.forEach(a=>{a.forEach(c=>{c.reject(new xe(K.CANCELLED,o))})}),i.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wd(n,r.ks)}}function Xq(t,e){const n=Me(t),r=n.Eu.get(e);if(r&&r.cu)return Ge().add(r.key);{let s=Ge();const i=n.Pu.get(e);if(!i)return s;for(const o of i){const a=n.hu.get(o);s=s.unionWith(a.view.eu)}return s}}function oj(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qq.bind(null,e),e.lu.Y_=Dq.bind(null,e.eventManager),e.lu.gu=jq.bind(null,e.eventManager),e}function Zq(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kq.bind(null,e),e}class zm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return JH(this.persistence,new QH,e.initialUser,this.serializer)}Su(e){return new z2(T_.fi,this.serializer)}bu(e){return new oq}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zm.provider={build:()=>new zm};class Jq extends zm{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){st(this.persistence.referenceDelegate instanceof Um,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MH(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new z2(r=>Um.fi(r,n),this.serializer)}}class lx{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qq.bind(null,this.syncEngine),await kq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Aq}()}createDatastore(e){const n=fg(e.databaseInfo.databaseId),r=function(i){return new dq(i)}(e.databaseInfo);return function(i,o,a,c){return new pq(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new vq(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JS(this.syncEngine,n,0),function(){return GS.C()?new GS:new aq}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const f=new Fq(s,i,o,a,c,u);return h&&(f.mu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Me(s);de(xa,"RemoteStore shutting down."),i.da.add(5),await Bd(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lx.provider={build:()=>new lx};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eG{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="FirestoreClient";class tG{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gn.UNAUTHENTICATED,this.clientId=n2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{de(_o,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(de(_o,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=R_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ry(t,e){t.asyncQueue.verifyOperationInProgress(),de(_o,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await B2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function tC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nG(t);de(_o,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>YS(e.remoteStore,s)),t._onlineComponents=e}async function nG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(_o,"Using user provided OfflineComponentProvider");try{await ry(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Xl("Error using user provided cache. Falling back to memory cache: "+n),await ry(t,new zm)}}else de(_o,"Using default OfflineComponentProvider"),await ry(t,new Jq(void 0));return t._offlineComponents}async function aj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(_o,"Using user provided OnlineComponentProvider"),await tC(t,t._uninitializedComponentsProvider._online)):(de(_o,"Using default OnlineComponentProvider"),await tC(t,new lx))),t._onlineComponents}function rG(t){return aj(t).then(e=>e.syncEngine)}async function nC(t){const e=await aj(t),n=e.eventManager;return n.onListen=Uq.bind(null,e.syncEngine),n.onUnlisten=Bq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$q.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Wq.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(t,e,n){if(!n)throw new xe(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sG(t,e,n,r){if(e===!0&&r===!0)throw new xe(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sC(t){if(!be.isDocumentKey(t))throw new xe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function iC(t){if(be.isDocumentKey(t))throw new xe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function O_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function no(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=O_(t);throw new xe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj="firestore.googleapis.com",oC=!0;class aC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uj,this.ssl=oC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:oC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DH)throw new xe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lj((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new xe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gg{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cW;switch(r.type){case"firstParty":return new fW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rC.get(n);r&&(de("ComponentProvider","Removing Datastore"),rC.delete(n),r.terminate())}(this),Promise.resolve()}}function iG(t,e,n,r={}){var s;t=no(t,gg);const i=Ca(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(q0(`https://${c}`),G0("Firestore",!0)),o.host!==uj&&o.host!==c&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!po(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=gn.MOCK_USER;else{h=gR(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new xe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new gn(m)}t._authCredentials=new uW(new e2(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vg(this.firestore,e,this._query)}}class ur{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class ro extends vg{constructor(e,n,r){super(e,n,v_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new be(e))}withConverter(e){return new ro(this.firestore,e,this._path)}}function lC(t,e,...n){if(t=Dt(t),cj("collection","path",e),t instanceof gg){const r=xt.fromString(e,...n);return iC(r),new ro(t,null,r)}{if(!(t instanceof ur||t instanceof ro))throw new xe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return iC(r),new ro(t.firestore,null,r)}}function Bm(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=n2.newId()),cj("doc","path",e),t instanceof gg){const r=xt.fromString(e,...n);return sC(r),new ur(t,null,new be(r))}{if(!(t instanceof ur||t instanceof ro))throw new xe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return sC(r),new ur(t.firestore,t instanceof ro?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="AsyncQueue";class uC{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new H2(this,"async_queue_retry"),this.rc=()=>{const r=ny();r&&de(cC,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=ny();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=ny();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new oa;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Sc(e))throw e;de(cC,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,ci("INTERNAL UNHANDLED ERROR: ",dC(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=P_.createAndSchedule(this,e,n,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&Te(47125,{cc:dC(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function dC(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class rc extends gg{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new uC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uC(e),this._firestoreClient=void 0,await e}}}function oG(t,e){const n=typeof t=="object"?t:Ld(),r=typeof t=="string"?t:Dm,s=mi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=fR("firestore");i&&iG(s,...i)}return s}function dj(t){if(t._terminated)throw new xe(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aG(t),t._firestoreClient}function aG(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,h){return new kW(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,lj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new tG(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sc(ln.fromBase64String(e))}catch(n){throw new xe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sc(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG=/^__.*__$/;class cG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,n,this.fieldTransforms):new $d(e,this.data,n,this.fieldTransforms)}}class hj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Po(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ic:t})}}class U_{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new U_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Wm(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(fj(this.Ic)&&lG.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class uG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fg(e)}bc(e,n,r,s=!1){return new U_({Ic:e,methodName:n,wc:r,path:rn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mj(t){const e=t._freezeSettings(),n=fg(t._databaseId);return new uG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dG(t,e,n,r,s,i={}){const o=t.bc(i.merge||i.mergeFields?2:0,e,n,s);$_("Data must be an object, but it was:",o,r);const a=pj(r,o);let c,u;if(i.merge)c=new ar(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=cx(e,f,n);if(!o.contains(m))throw new xe(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vj(h,m)||h.push(m)}c=new ar(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new cG(new zn(a),c,u)}class wg extends L_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wg}}function hG(t,e,n,r){const s=t.bc(1,e,n);$_("Data must be an object, but it was:",s,r);const i=[],o=zn.empty();Ao(r,(c,u)=>{const h=z_(e,c,n);u=Dt(u);const f=s.mc(h);if(u instanceof wg)i.push(h);else{const m=xg(u,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new ar(i);return new hj(o,a,s.fieldTransforms)}function fG(t,e,n,r,s,i){const o=t.bc(1,e,n),a=[cx(e,r,n)],c=[s];if(i.length%2!=0)throw new xe(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(cx(e,i[m])),c.push(i[m+1]);const u=[],h=zn.empty();for(let m=a.length-1;m>=0;--m)if(!vj(u,a[m])){const v=a[m];let b=c[m];b=Dt(b);const w=o.mc(v);if(b instanceof wg)u.push(v);else{const x=xg(b,w);x!=null&&(u.push(v),h.set(v,x))}}const f=new ar(u);return new hj(h,f,o.fieldTransforms)}function xg(t,e){if(gj(t=Dt(t)))return $_("Unsupported field value:",e,t),pj(t,e);if(t instanceof L_)return function(r,s){if(!fj(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=xg(a,s.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZW(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=kt.fromDate(r);return{timestampValue:Fm(s.serializer,i)}}if(r instanceof kt){const i=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fm(s.serializer,i)}}if(r instanceof V_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sc)return{bytesValue:j2(s.serializer,r._byteString)};if(r instanceof ur){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:b_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof F_)return function(o,a){return{mapValue:{fields:{[u2]:{stringValue:d2},[jm]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.gc("VectorValues must only contain numeric values.");return y_(a.serializer,u)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${O_(r)}`)}(t,e)}function pj(t,e){const n={};return s2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(r,s)=>{const i=xg(s,e.Ac(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function gj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof kt||t instanceof V_||t instanceof sc||t instanceof ur||t instanceof L_||t instanceof F_)}function $_(t,e,n){if(!gj(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=O_(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function cx(t,e,n){if((e=Dt(e))instanceof yg)return e._internalPath;if(typeof e=="string")return z_(t,e);throw Wm("Field path arguments must be of type string or ",t,!1,void 0,n)}const mG=new RegExp("[~\\*/\\[\\]]");function z_(t,e,n){if(e.search(mG)>=0)throw Wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yg(...e.split("."))._internalPath}catch{throw Wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wm(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new xe(K.INVALID_ARGUMENT,a+t+c)}function vj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wj("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pG extends yj{data(){return super.data()}}function wj(t,e){return typeof e=="string"?z_(t,e):e instanceof yg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vG{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ao(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[jm].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>At(o.doubleValue));return new F_(i)}convertGeoPoint(e){return new V_(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=og(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){const n=vo(e);return new kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xt.fromString(e);st(U2(r),9688,{name:e});const s=new pd(r.get(1),r.get(3)),i=new be(r.popFirst(5));return s.isEqual(n)||ci(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yG(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xj extends yj{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Af(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wj("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Af extends xj{data(e={}){return super.data(e)}}class wG{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new pu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Af(this._firestore,this._userDataWriter,r.key,r,new pu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new Af(s._firestore,s._userDataWriter,a.doc.key,a.doc,new pu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Af(s._firestore,s._userDataWriter,a.doc.key,a.doc,new pu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:xG(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}class _j extends vG{constructor(e){super(),this.firestore=e}convertBytes(e){return new sc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,n)}}function bj(t,e,n,...r){t=no(t,ur);const s=no(t.firestore,rc),i=mj(s);let o;return o=typeof(e=Dt(e))=="string"||e instanceof yg?fG(i,"updateDoc",t._key,e,n,r):hG(i,"updateDoc",t._key,e),B_(s,[o.toMutation(t._key,Qr.exists(!0))])}function _G(t){return B_(no(t.firestore,rc),[new w_(t._key,Qr.none())])}function bG(t,e){const n=no(t.firestore,rc),r=Bm(t),s=yG(t.converter,e);return B_(n,[dG(mj(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qr.exists(!1))]).then(()=>r)}function EG(t,...e){var n,r,s;t=Dt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||hC(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(hC(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof ur)u=no(t.firestore,rc),h=v_(t._key.path),c={next:f=>{e[o]&&e[o](TG(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=no(t,vg);u=no(f.firestore,rc),h=f._query;const m=new _j(u);c={next:v=>{e[o]&&e[o](new wG(u,m,f,v))},error:e[o+1],complete:e[o+2]},gG(t._query)}return function(m,v,b,w){const x=new eG(w),_=new Mq(v,x,b);return m.asyncQueue.enqueueAndForget(async()=>Pq(await nC(m),_)),()=>{x.xu(),m.asyncQueue.enqueueAndForget(async()=>Rq(await nC(m),_))}}(dj(u),h,a,c)}function B_(t,e){return function(r,s){const i=new oa;return r.asyncQueue.enqueueAndForget(async()=>Hq(await rG(r),s,i)),i.promise}(dj(t),e)}function TG(t,e,n){const r=n.docs.get(e._key),s=new _j(t);return new xj(t,s,e._key,r,new pu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ec=s})(Ia),mr(new Qn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new rc(new dW(r.getProvider("auth-internal")),new mW(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new xe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pd(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),xn(mS,pS,e),xn(mS,pS,"esm2017")})();var SG="firebase",CG="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(SG,CG,"app");function Ej(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IG=Ej,Tj=new No("auth","Firebase",Ej());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=new Xp("@firebase/auth");function kG(t,...e){Hm.logLevel<=qe.WARN&&Hm.warn(`Auth (${Ia}): ${t}`,...e)}function Pf(t,...e){Hm.logLevel<=qe.ERROR&&Hm.error(`Auth (${Ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,...e){throw W_(t,...e)}function Es(t,...e){return W_(t,...e)}function Sj(t,e,n){const r=Object.assign(Object.assign({},IG()),{[e]:n});return new No("auth","Firebase",r).create(e,{appName:t.name})}function aa(t){return Sj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Tj.create(t,...e)}function Ie(t,e,...n){if(!t)throw W_(e,...n)}function Ys(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pf(e),new Error(e)}function hi(t,e){t||Ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NG(){return fC()==="http:"||fC()==="https:"}function fC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NG()||vR()||"connection"in navigator)?navigator.onLine:!0}function PG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this.shortDelay=e,this.longDelay=n,hi(n>e,"Short delay should be less than long delay!"),this.isMobile=O$()||F$()}get(){return AG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jG=new Hd(3e4,6e4);function q_(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ic(t,e,n,r,s={}){return Ij(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Od(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return V$()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ca(t.emulatorConfig.host)&&(u.credentials="include"),Cj.fetch()(await kj(t,t.config.apiHost,n,a),u)})}async function Ij(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},RG),e);try{const s=new OG(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw tf(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw tf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw tf(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Sj(t,h,u);di(t,h)}}catch(s){if(s instanceof Pr)throw s;di(t,"network-request-failed",{message:String(s)})}}async function MG(t,e,n,r,s={}){const i=await Ic(t,e,n,r,s);return"mfaPendingCredential"in i&&di(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function kj(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?H_(t.config,s):`${t.config.apiScheme}://${s}`;return DG.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class OG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Es(this.auth,"network-request-failed")),jG.get())})}}function tf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Es(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LG(t,e){return Ic(t,"POST","/v1/accounts:delete",e)}async function qm(t,e){return Ic(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VG(t,e=!1){const n=Dt(t),r=await n.getIdToken(e),s=G_(r);Ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ju(sy(s.auth_time)),issuedAtTime:ju(sy(s.iat)),expirationTime:ju(sy(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function sy(t){return Number(t)*1e3}function G_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const s=dR(n);return s?JSON.parse(s):(Pf("Failed to decode base64 JWT payload"),null)}catch(s){return Pf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function mC(t){const e=G_(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pr&&FG(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gm(t){var e;const n=t.auth,r=await t.getIdToken(),s=await wd(t,qm(n,{idToken:r}));Ie(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Nj(i.providerUserInfo):[],a=zG(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new dx(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function $G(t){const e=Dt(t);await Gm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zG(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Nj(t){return t.map(e=>{var{providerId:n}=e,r=jd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BG(t,e){const n=await Ij(t,{},async()=>{const r=Od({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await kj(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ca(t.emulatorConfig.host)&&(c.credentials="include"),Cj.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WG(t,e){return Ic(t,"POST","/v2/accounts:revokeToken",q_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=mC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await BG(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new El;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ie(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await wd(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VG(this,e)}reload(){return $G(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wr(this.auth.app))return Promise.reject(aa(this.auth));const e=await this.getIdToken();return await wd(this,LG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:N,isAnonymous:j,providerData:M,stsTokenManager:C}=n;Ie(T&&C,e,"internal-error");const k=El.fromJSON(this.name,C);Ie(typeof T=="string",e,"internal-error"),bi(f,e.name),bi(m,e.name),Ie(typeof N=="boolean",e,"internal-error"),Ie(typeof j=="boolean",e,"internal-error"),bi(v,e.name),bi(b,e.name),bi(w,e.name),bi(x,e.name),bi(_,e.name),bi(y,e.name);const R=new Hr({uid:T,auth:e,email:m,emailVerified:N,displayName:f,isAnonymous:j,photoURL:b,phoneNumber:v,tenantId:w,stsTokenManager:k,createdAt:_,lastLoginAt:y});return M&&Array.isArray(M)&&(R.providerData=M.map(I=>Object.assign({},I))),x&&(R._redirectEventId=x),R}static async _fromIdTokenResponse(e,n,r=!1){const s=new El;s.updateFromServerResponse(n);const i=new Hr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Nj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new El;a.updateFromIdToken(r);const c=new Hr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new dx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=new Map;function Qs(t){hi(t instanceof Function,"Expected a class definition");let e=pC.get(t);return e?(hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Aj.type="NONE";const gC=Aj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e,n){return`firebase:${t}:${e}:${n}`}class Tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Rf(this.userKey,s.apiKey,i),this.fullPersistenceKey=Rf("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await qm(this.auth,{idToken:e}).catch(()=>{});return n?Hr._fromGetAccountInfoResponse(this.auth,n,e):null}return Hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tl(Qs(gC),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Qs(gC);const o=Rf(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await qm(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Hr._fromGetAccountInfoResponse(e,m,h)}else f=Hr._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Tl(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Tl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Oj(e))return"Blackberry";if(Lj(e))return"Webos";if(Rj(e))return"Safari";if((e.includes("chrome/")||Dj(e))&&!e.includes("edge/"))return"Chrome";if(Mj(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Pj(t=En()){return/firefox\//i.test(t)}function Rj(t=En()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dj(t=En()){return/crios\//i.test(t)}function jj(t=En()){return/iemobile/i.test(t)}function Mj(t=En()){return/android/i.test(t)}function Oj(t=En()){return/blackberry/i.test(t)}function Lj(t=En()){return/webos/i.test(t)}function K_(t=En()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HG(t=En()){var e;return K_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qG(){return U$()&&document.documentMode===10}function Vj(t=En()){return K_(t)||Mj(t)||Lj(t)||Oj(t)||/windows phone/i.test(t)||jj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e=[]){let n;switch(t){case"Browser":n=vC(En());break;case"Worker":n=`${vC(En())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KG(t,e={}){return Ic(t,"GET","/v2/passwordPolicy",q_(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YG=6;class QG{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yC(this),this.idTokenSubscription=new yC(this),this.beforeStateQueue=new GG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qm(this,{idToken:e}),r=await Hr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Wr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wr(this.app))return Promise.reject(aa(this));const n=e?Dt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wr(this.app)?Promise.reject(aa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wr(this.app)?Promise.reject(aa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KG(this),n=new QG(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new No("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WG(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qs(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Qs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kG(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Y_(t){return Dt(t)}class yC{constructor(e){this.auth=e,this.observer=null,this.addObserver=q$(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZG(t){Q_=t}function JG(t){return Q_.loadJS(t)}function eK(){return Q_.gapiScript}function tK(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t,e){const n=mi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(po(i,e??{}))return s;di(s,"already-initialized")}return n.initialize({options:e})}function rK(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sK(t,e,n){const r=Y_(t);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Uj(e),{host:o,port:a}=iK(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(po(u,r.config.emulator)&&po(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ca(o)?(q0(`${i}//${o}${c}`),G0("Auth",!0)):oK()}function Uj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iK(t){const e=Uj(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:wC(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:wC(o)}}}function wC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,n){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t,e){return MG(t,"POST","/v1/accounts:signInWithIdp",q_(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aK="http://localhost";class _a extends $j{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=jd(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new _a(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Sl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Sl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sl(e,n)}buildRequest(){const e={requestUri:aK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Od(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends zj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends qd{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends qd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Di.credential(n,r)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends qd{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends qd{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mi.credential(n,r)}catch{return null}}}Mi.TWITTER_SIGN_IN_METHOD="twitter.com";Mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Hr._fromIdTokenResponse(e,r,s),o=xC(r);return new ic({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=xC(r);return new ic({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function xC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends Pr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Km.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Km(e,n,r,s)}}function Bj(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Km._fromErrorAndOperation(t,i,e,r):i})}async function lK(t,e,n=!1){const r=await wd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ic._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cK(t,e,n=!1){const{auth:r}=t;if(Wr(r.app))return Promise.reject(aa(r));const s="reauthenticate";try{const i=await wd(t,Bj(r,s,e,t),n);Ie(i.idToken,r,"internal-error");const o=G_(i.idToken);Ie(o,r,"internal-error");const{sub:a}=o;return Ie(t.uid===a,r,"user-mismatch"),ic._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&di(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uK(t,e,n=!1){if(Wr(t.app))return Promise.reject(aa(t));const r="signIn",s=await Bj(t,r,e),i=await ic._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function dK(t,e,n,r){return Dt(t).onIdTokenChanged(e,n,r)}function hK(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}const Ym="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ym,"1"),this.storage.removeItem(Ym),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK=1e3,mK=10;class Hj extends Wj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);qG()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,mK):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hj.type="LOCAL";const pK=Hj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj extends Wj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qj.type="SESSION";const Gj=qj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _g(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await gK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_g.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=X_("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function yK(t){Ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function wK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _K(){return Kj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj="firebaseLocalStorageDb",bK=1,Qm="firebaseLocalStorage",Qj="fbase_key";class Gd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bg(t,e){return t.transaction([Qm],e?"readwrite":"readonly").objectStore(Qm)}function EK(){const t=indexedDB.deleteDatabase(Yj);return new Gd(t).toPromise()}function hx(){const t=indexedDB.open(Yj,bK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qm,{keyPath:Qj})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qm)?e(r):(r.close(),await EK(),e(await hx()))})})}async function _C(t,e,n){const r=bg(t,!0).put({[Qj]:e,value:n});return new Gd(r).toPromise()}async function TK(t,e){const n=bg(t,!1).get(e),r=await new Gd(n).toPromise();return r===void 0?null:r.value}function bC(t,e){const n=bg(t,!0).delete(e);return new Gd(n).toPromise()}const SK=800,CK=3;class Xj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_g._getInstance(_K()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await wK(),!this.activeServiceWorker)return;this.sender=new vK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hx();return await _C(e,Ym,"1"),await bC(e,Ym),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_C(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bC(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bg(s,!1).getAll();return new Gd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xj.type="LOCAL";const IK=Xj;new Hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kK(t,e){return e?Qs(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_ extends $j{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function NK(t){return uK(t.auth,new Z_(t),t.bypassAuthState)}function AK(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),cK(n,new Z_(t),t.bypassAuthState)}async function PK(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),lK(n,new Z_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NK;case"linkViaPopup":case"linkViaRedirect":return PK;case"reauthViaPopup":case"reauthViaRedirect":return AK;default:di(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=new Hd(2e3,1e4);class hl extends Zj{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,hl.currentPopupAction&&hl.currentPopupAction.cancel(),hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const e=X_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RK.get())};e()}}hl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DK="pendingRedirect",Df=new Map;class jK extends Zj{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Df.get(this.auth._key());if(!e){try{const r=await MK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Df.set(this.auth._key(),e)}return this.bypassAuthState||Df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MK(t,e){const n=VK(e),r=LK(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function OK(t,e){Df.set(t._key(),e)}function LK(t){return Qs(t._redirectPersistence)}function VK(t){return Rf(DK,t.config.apiKey,t.name)}async function FK(t,e,n=!1){if(Wr(t.app))return Promise.reject(aa(t));const r=Y_(t),s=kK(r,e),o=await new jK(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK=10*60*1e3;class $K{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Jj(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Es(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UK&&this.cachedEventUids.clear(),this.cachedEventUids.has(EC(e))}saveEventToCache(e){this.cachedEventUids.add(EC(e)),this.lastProcessedEventTime=Date.now()}}function EC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Jj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BK(t,e={}){return Ic(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HK=/^https?/;async function qK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await BK(t);for(const n of e)try{if(GK(n))return}catch{}di(t,"unauthorized-domain")}function GK(t){const e=ux(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!HK.test(n))return!1;if(WK.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=new Hd(3e4,6e4);function TC(){const t=Ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function YK(t){return new Promise((e,n)=>{var r,s,i;function o(){TC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TC(),n(Es(t,"network-request-failed"))},timeout:KK.get()})}if(!((s=(r=Ts().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ts().gapi)===null||i===void 0)&&i.load)o();else{const a=tK("iframefcb");return Ts()[a]=()=>{gapi.load?o():n(Es(t,"network-request-failed"))},JG(`${eK()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw jf=null,e})}let jf=null;function QK(t){return jf=jf||YK(t),jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XK=new Hd(5e3,15e3),ZK="__/auth/iframe",JK="emulator/auth/iframe",eY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nY(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?H_(e,JK):`https://${t.config.authDomain}/${ZK}`,r={apiKey:e.apiKey,appName:t.name,v:Ia},s=tY.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Od(r).slice(1)}`}async function rY(t){const e=await QK(t),n=Ts().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:nY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eY,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Es(t,"network-request-failed"),a=Ts().setTimeout(()=>{i(o)},XK.get());function c(){Ts().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iY=500,oY=600,aY="_blank",lY="http://localhost";class SC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cY(t,e,n,r=iY,s=oY){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},sY),{width:r.toString(),height:s.toString(),top:i,left:o}),u=En().toLowerCase();n&&(a=Dj(u)?aY:n),Pj(u)&&(e=e||lY,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[v,b])=>`${m}${v}=${b},`,"");if(HG(u)&&a!=="_self")return uY(e||"",a),new SC(null);const f=window.open(e||"",a,h);Ie(f,t,"popup-blocked");try{f.focus()}catch{}return new SC(f)}function uY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dY="__/auth/handler",hY="emulator/auth/handler",fY=encodeURIComponent("fac");async function CC(t,e,n,r,s,i){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ia,eventId:s};if(e instanceof zj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",H$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof qd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${fY}=${encodeURIComponent(c)}`:"";return`${mY(t)}?${Od(a).slice(1)}${u}`}function mY({config:t}){return t.emulator?H_(t,hY):`https://${t.authDomain}/${dY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="webStorageSupport";class pY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gj,this._completeRedirectFn=FK,this._overrideRedirectResult=OK}async _openPopup(e,n,r,s){var i;hi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await CC(e,n,r,ux(),s);return cY(e,o,X_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await CC(e,n,r,ux(),s);return yK(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(hi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rY(e),r=new $K(e);return n.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iy,{type:iy},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[iy];o!==void 0&&n(!!o),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vj()||Rj()||K_()}}const gY=pY;var IC="@firebase/auth",kC="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wY(t){mr(new Qn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fj(t)},u=new XG(r,s,i,c);return rK(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mr(new Qn("auth-internal",e=>{const n=Y_(e.getProvider("auth").getImmediate());return(r=>new vY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(IC,kC,yY(t)),xn(IC,kC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xY=5*60,_Y=pR("authIdTokenMaxAge")||xY;let NC=null;const bY=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_Y)return;const s=n==null?void 0:n.token;NC!==s&&(NC=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function EY(t=Ld()){const e=mi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nK(t,{popupRedirectResolver:gY,persistence:[IK,pK,Gj]}),r=pR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=bY(i.toString());hK(n,o,()=>o(n.currentUser)),dK(n,a=>o(a))}}const s=hR("auth");return s&&sK(n,`http://${s}`),n}function TY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZG({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Es("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",TY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wY("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="firebasestorage.googleapis.com",SY="storageBucket",CY=2*60*1e3,IY=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Pr{constructor(e,n,r=0){super(oy(e),`Firebase Storage: ${n} (${oy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ps.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ks;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ks||(ks={}));function oy(t){return"storage/"+t}function kY(){const t="An unknown error occurred, please check the error payload for server response.";return new Ps(ks.UNKNOWN,t)}function NY(){return new Ps(ks.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function AY(){return new Ps(ks.CANCELED,"User canceled the upload/download.")}function PY(t){return new Ps(ks.INVALID_URL,"Invalid URL '"+t+"'.")}function RY(t){return new Ps(ks.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function AC(t){return new Ps(ks.INVALID_ARGUMENT,t)}function tM(){return new Ps(ks.APP_DELETED,"The Firebase app was deleted.")}function DY(t){return new Ps(ks.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=qr.makeFromUrl(e,n)}catch{return new qr(e,"")}if(r.path==="")return r;throw RY(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),b={bucket:1,path:3},w=n===eM?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",_=new RegExp(`^https?://${w}/${s}/${x}`,"i"),T=[{regex:a,indices:c,postModify:i},{regex:v,indices:b,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<T.length;N++){const j=T[N],M=j.regex.exec(e);if(M){const C=M[j.indices.bucket];let k=M[j.indices.path];k||(k=""),r=new qr(C,k),j.postModify(r);break}}if(r==null)throw PY(e);return r}}class jY{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(...x){u||(u=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(v,c())},x)}function m(){i&&clearTimeout(i)}function v(x,..._){if(u){m();return}if(x){m(),h.call(null,x,..._);return}if(c()||o){m(),h.call(null,x,..._);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,f(T)}let b=!1;function w(x){b||(b=!0,m(),!u&&(s!==null?(x||(a=2),clearTimeout(s),f(0)):x||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function OY(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(t){return t!==void 0}function PC(t,e,n,r){if(r<e)throw AC(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw AC(`Invalid value for '${t}'. Expected ${n} or less.`)}function VY(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Xm;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xm||(Xm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FY(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e,n,r,s,i,o,a,c,u,h,f,m=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,w)=>{this.resolve_=b,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new nf(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Xm.NO_ERROR,c=i.getStatus();if(!a||FY(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Xm.ABORT;r(!1,new nf(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new nf(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());LY(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=kY();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?tM():AY();o(c)}else{const c=NY();o(c)}};this.canceled_?n(!1,new nf(!1,null,!0)):this.backoffId_=MY(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OY(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $Y(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zY(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BY(t,e){e&&(t["X-Firebase-GMPID"]=e)}function WY(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function HY(t,e,n,r,s,i,o=!0,a=!1){const c=VY(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return BY(h,e),$Y(h,n),zY(h,i),WY(h,r),new UY(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GY(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){this._service=e,n instanceof qr?this._location=n:this._location=qr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zm(e,n)}get root(){const e=new qr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GY(this._location.path)}get storage(){return this._service}get parent(){const e=qY(this._location.path);if(e===null)return null;const n=new qr(this._location.bucket,e);return new Zm(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw DY(e)}}function RC(t,e){const n=e==null?void 0:e[SY];return n==null?null:qr.makeFromBucketSpec(n,t)}function KY(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ca(e);s&&(q0(`https://${t.host}/b`),G0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:gR(i,t.app.options.projectId))}class YY{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=eM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CY,this._maxUploadRetryTime=IY,this._requests=new Set,s!=null?this._bucket=qr.makeFromBucketSpec(s,this._host):this._bucket=RC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qr.makeFromBucketSpec(this._url,e):this._bucket=RC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zm(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new jY(tM());{const o=HY(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const DC="@firebase/storage",jC="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="storage";function QY(t=Ld(),e){t=Dt(t);const r=mi(t,nM).getImmediate({identifier:e}),s=fR("storage");return s&&XY(r,...s),r}function XY(t,e,n,r={}){KY(t,e,n,r)}function ZY(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new YY(n,r,s,e,Ia)}function JY(){mr(new Qn(nM,ZY,"PUBLIC").setMultipleInstances(!0)),xn(DC,jC,""),xn(DC,jC,"esm2017")}JY();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="analytics",eQ="firebase_id",tQ="origin",nQ=60*1e3,rQ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",J_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new Xp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},dr=new No("analytics","Analytics",sQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iQ(t){if(!t.startsWith(J_)){const e=dr.create("invalid-gtag-resource",{gtagURL:t});return Yn.warn(e.message),""}return t}function rM(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function oQ(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function aQ(t,e){const n=oQ("firebase-js-sdk-policy",{createScriptURL:iQ}),r=document.createElement("script"),s=`${J_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function lQ(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function cQ(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await rM(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(a){Yn.error(a)}t("config",s,i)}async function uQ(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await rM(n);for(const c of o){const u=a.find(f=>f.measurementId===c),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Yn.error(i)}}function dQ(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,c]=o;await uQ(t,e,n,a,c)}else if(i==="config"){const[a,c]=o;await cQ(t,e,n,r,a,c)}else if(i==="consent"){const[a,c]=o;t("consent",a,c)}else if(i==="get"){const[a,c,u]=o;t("get",a,c,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Yn.error(a)}}return s}function hQ(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=dQ(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function fQ(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(J_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ=30,pQ=1e3;class gQ{constructor(e={},n=pQ){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sM=new gQ;function vQ(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function yQ(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:vQ(r)},i=rQ.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw dr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function wQ(t,e=sM,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw dr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw dr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new bQ;return setTimeout(async()=>{a.abort()},nQ),iM({appId:r,apiKey:s,measurementId:i},o,a,e)}async function iM(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=sM){var i;const{appId:o,measurementId:a}=t;try{await xQ(r,e)}catch(c){if(a)return Yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await yQ(t);return s.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!_Q(u)){if(s.deleteThrottleMetadata(o),a)return Yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const h=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?qT(n,s.intervalMillis,mQ):qT(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(o,f),Yn.debug(`Calling attemptFetch again in ${h} millis`),iM(t,f,r,s)}}function xQ(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(dr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _Q(t){if(!(t instanceof Pr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class bQ{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function EQ(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TQ(){if(K0())try{await Y0()}catch(t){return Yn.warn(dr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Yn.warn(dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function SQ(t,e,n,r,s,i,o){var a;const c=wQ(t);c.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&Yn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Yn.error(v)),e.push(c);const u=TQ().then(v=>{if(v)return r.getId()}),[h,f]=await Promise.all([c,u]);fQ(i)||aQ(i,h.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[tQ]="firebase",m.update=!0,f!=null&&(m[eQ]=f),s("config",h.measurementId,m),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{constructor(e){this.app=e}_delete(){return delete Mu[this.app.options.appId],Promise.resolve()}}let Mu={},MC=[];const OC={};let ay="dataLayer",IQ="gtag",LC,oM,VC=!1;function kQ(){const t=[];if(vR()&&t.push("This is a browser extension environment."),yR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=dr.create("invalid-analytics-context",{errorInfo:e});Yn.warn(n.message)}}function NQ(t,e,n){kQ();const r=t.options.appId;if(!r)throw dr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw dr.create("no-api-key");if(Mu[r]!=null)throw dr.create("already-exists",{id:r});if(!VC){lQ(ay);const{wrappedGtag:i,gtagCore:o}=hQ(Mu,MC,OC,ay,IQ);oM=i,LC=o,VC=!0}return Mu[r]=SQ(t,MC,OC,e,LC,ay,n),new CQ(t)}function AQ(t=Ld()){t=Dt(t);const e=mi(t,Jm);return e.isInitialized()?e.getImmediate():PQ(t)}function PQ(t,e={}){const n=mi(t,Jm);if(n.isInitialized()){const s=n.getImmediate();if(po(e,n.getOptions()))return s;throw dr.create("already-initialized")}return n.initialize({options:e})}function RQ(t,e,n,r){t=Dt(t),EQ(oM,Mu[t.app.options.appId],e,n,r).catch(s=>Yn.error(s))}const FC="@firebase/analytics",UC="0.10.16";function DQ(){mr(new Qn(Jm,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return NQ(r,s,n)},"PUBLIC")),mr(new Qn("analytics-internal",t,"PRIVATE")),xn(FC,UC),xn(FC,UC,"esm2017");function t(e){try{const n=e.getProvider(Jm).getImmediate();return{logEvent:(r,s,i)=>RQ(n,r,s,i)}}catch(n){throw dr.create("interop-component-reg-failed",{reason:n})}}}DQ();const jQ={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_NAME:"Family Task Tracker",VITE_APP_VERSION:"1.0.0",VITE_FIREBASE_API_KEY:"AIzaSyDnuuXIHf37jS4syWsolJa0YTg_4bN-VUE",VITE_FIREBASE_APP_ID:"1:984085570940:web:ddc61b61702341939130f9",VITE_FIREBASE_AUTH_DOMAIN:"familytasktracker-c2dfe.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-2TFQZKTN8G",VITE_FIREBASE_MESSAGING_SENDER_ID:"984085570940",VITE_FIREBASE_PROJECT_ID:"familytasktracker-c2dfe",VITE_FIREBASE_STORAGE_BUCKET:"",VITE_GOOGLE_SEARCH_API_KEY:"AIzaSyDPrsjzwVQQv-XdsBMRtthrnmq_20eOpKM",VITE_GOOGLE_SEARCH_ENGINE_ID:"45bf48bbd17764d52",VITE_USER_NODE_ENV:"production"},MQ={apiKey:"AIzaSyDnuuXIHf37jS4syWsolJa0YTg_4bN-VUE",authDomain:"familytasktracker-c2dfe.firebaseapp.com",projectId:"familytasktracker-c2dfe",storageBucket:"",messagingSenderId:"984085570940",appId:"1:984085570940:web:ddc61b61702341939130f9",measurementId:"G-2TFQZKTN8G"},OQ=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"],$C=OQ.filter(t=>!jQ[t]);if($C.length>0)throw new Error(`Missing required environment variables: ${$C.join(", ")}`);const Eg=_R(MQ);EY(Eg);const $s=oG(Eg);QY(Eg);AQ(Eg);class eb{constructor(e,n,r="user",s,i,o,a=new Date,c,u){this.id=e,this.username=n,this.role=r,this.email=s,this.displayName=i,this.photoURL=o,this.createdAt=a,this.lastLoginAt=c,this.updatedAt=u}static fromFirestore(e){var n,r;return new eb(e.id,e.username,e.role,e.email,e.displayName,e.photoURL,((n=e.createdAt)==null?void 0:n.toDate())||new Date,(r=e.lastLoginAt)==null?void 0:r.toDate())}toFirestore(){const e={username:this.username,role:this.role,email:this.email,displayName:this.displayName,photoURL:this.photoURL,createdAt:this.createdAt,lastLoginAt:this.lastLoginAt};return xc(e)}isAdmin(){return this.role==="admin"}}class rt extends Error{constructor(e,n){super(e),this.errors=n,this.name="ValidationError"}}class xd{constructor(e,n,r,s,i,o=new Date,a=!1,c,u,h="medium",f,m,v=new Date,b=!0,w,x,_,y){this.id=e,this.category=n,this.createdBy=r,this.link=s,this.name=i,this.createdAt=o,this.completed=a,this.completedBy=c,this.completedAt=u,this.priority=h,this.estimatedPrice=f,this.notes=m,this.updatedAt=v,this.isPublic=b,this.scrapingData=w,this.brandName=x,this.imageUrl=_,this.imageUpdated=y,this.validate&&this.validate()}canUpdateImage(){return!this.imageUpdated}validate(){var r,s,i;const e=[];if((r=this.category)!=null&&r.trim()||e.push("La categoria è obbligatoria"),(s=this.createdBy)!=null&&s.trim()||e.push("Il creatore è obbligatorio"),!((i=this.link)!=null&&i.trim()))e.push("Il link è obbligatorio");else try{new URL(this.link)}catch{e.push("Il link deve essere un URL valido")}this.estimatedPrice!==void 0&&this.estimatedPrice<0&&e.push("Il prezzo stimato non può essere negativo");const n={isValid:e.length===0,errors:e};if(!n.isValid)throw new rt(`Validazione fallita: ${e.join(", ")}`,e);return n}static fromFirestore(e){try{const n=a=>{if(!a)return new Date;if(a instanceof Date)return a;if(typeof a=="object"&&a.toDate)return a.toDate();const c=new Date(a);return isNaN(c.getTime())?new Date:c},r=e.category||"Articoli",s=e.createdBy||"Unknown",i=e.link||"",o=Object.create(xd.prototype);if(o.id=e.id,o.category=r,o.createdBy=s,o.link=i,o.name=e.name,o.createdAt=n(e.createdAt),o.completed=e.completed||!1,o.completedBy=e.completedBy,o.completedAt=e.completedAt?n(e.completedAt):void 0,o.priority=e.priority||"medium",o.estimatedPrice=e.estimatedPrice,o.notes=e.notes,o.updatedAt=n(e.updatedAt),o.isPublic=e.isPublic!==void 0?e.isPublic:!0,o.scrapingData=e.scrapingData,o.brandName=e.brandName,o.imageUrl=e.imageUrl,o.imageUpdated=e.imageUpdated||!1,i&&r&&s)try{o.validate()}catch(a){console.warn("Validation warning for existing document:",e.id,a)}return o}catch(n){console.error("Error in fromFirestore for ShoppingItem:",n,e);const r=Object.create(xd.prototype);return r.id=e.id||"unknown",r.category=e.category||"Articoli",r.createdBy=e.createdBy||"Unknown",r.link=e.link||"https://example.com",r.name=e.name||"Prodotto sconosciuto",r.createdAt=new Date,r.completed=!1,r.priority="medium",r.updatedAt=new Date,r.isPublic=!0,r.imageUpdated=!1,r}}toFirestore(){const e={category:this.category,createdBy:this.createdBy,link:this.link,name:this.name,createdAt:this.createdAt,completed:this.completed,completedBy:this.completedBy,completedAt:this.completedAt,priority:this.priority,estimatedPrice:this.estimatedPrice,notes:this.notes,updatedAt:new Date,isPublic:this.isPublic,scrapingData:this.scrapingData,brandName:this.brandName,imageUrl:this.imageUrl,imageUpdated:this.imageUpdated};return xc(e)}complete(e){this.completed=!0,this.completedBy=e,this.completedAt=new Date,this.updatedAt=new Date}uncomplete(){this.completed=!1,this.completedBy=void 0,this.completedAt=void 0,this.updatedAt=new Date}updateName(e){this.name=e,this.updatedAt=new Date,this.validate()}isValidLink(){if(!this.link)return!1;try{return new URL(this.link),!0}catch{return!1}}isValidImageUrl(){if(!this.imageUrl)return!0;try{const e=new URL(this.imageUrl);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}}updateWithScrapingData(e){if(e.nameProduct&&!this.name&&(this.name=e.nameProduct),e.nameBrand&&!this.brandName&&(this.brandName=e.nameBrand),e.category&&this.category==="Articoli"&&(this.category=e.category),e.price&&!this.estimatedPrice){const n=e.price.match(/(\d+[.,]\d+|\d+)/);n&&(this.estimatedPrice=parseFloat(n[1].replace(",",".")))}e.imageUrl&&!this.imageUrl&&(this.imageUrl=e.imageUrl),this.scrapingData={lastScraped:new Date,scrapingMode:e.mode||"html_analysis",scrapingSuccess:!0,scrapingText:e.scrapingText||JSON.stringify(e),errors:null},this.updatedAt=new Date;try{this.validate()}catch(n){console.warn("Validation warning after scraping update:",n),this.imageUrl&&!this.isValidImageUrl()&&(this.imageUrl=void 0)}}}class Tg{constructor(e,n,r,s=new Date,i,o="#6B7280",a,c=!1,u=0,h){this.id=e,this.name=n,this.createdBy=r,this.createdAt=s,this.description=i,this.color=o,this.icon=a,this.isDefault=c,this.itemCount=u,this.updatedAt=h}static fromFirestore(e){var n;return new Tg(e.id,e.name,e.createdBy,((n=e.createdAt)==null?void 0:n.toDate())||new Date,e.description,e.color||"#6B7280",e.icon,e.isDefault||!1,e.itemCount||0)}toFirestore(){const e={name:this.name,createdBy:this.createdBy,createdAt:this.createdAt,description:this.description,color:this.color,icon:this.icon,isDefault:this.isDefault,itemCount:this.itemCount};return xc(e)}incrementItemCount(){this.itemCount++}decrementItemCount(){this.itemCount>0&&this.itemCount--}isValidColor(){return/^#[0-9A-F]{6}$/i.test(this.color)}}class Sg{constructor(e,n,r,s,i=new Date,o=new Date,a=!1,c=[],u=!1,h="#F3F4F6",f=[],m){this.id=e,this.title=n,this.content=r,this.createdBy=s,this.createdAt=i,this.updatedAt=o,this.isPublic=a,this.tags=c,this.isPinned=u,this.color=h,this.sharedWith=f,this.lastViewedAt=m,this.validate()}validate(){const e=[];if((!this.title||this.title.trim().length===0)&&e.push("Title is required"),this.title&&this.title.length>100&&e.push("Title must be less than 100 characters"),(!this.content||this.content.trim().length===0)&&e.push("Content is required"),(!this.createdBy||this.createdBy.trim().length===0)&&e.push("Created by is required"),this.isValidColor()||e.push("Invalid color format"),e.length>0)throw new rt("Note validation failed",e);return{isValid:!0,errors:[]}}static fromFirestore(e){var n,r,s;return new Sg(e.id,e.title,e.content,e.createdBy,((n=e.createdAt)==null?void 0:n.toDate())||new Date,((r=e.updatedAt)==null?void 0:r.toDate())||new Date,e.isPublic||!1,e.tags||[],e.isPinned||!1,e.color||"#F3F4F6",e.sharedWith||[],(s=e.lastViewedAt)==null?void 0:s.toDate())}toFirestore(){const e={title:this.title,content:this.content,createdBy:this.createdBy,createdAt:this.createdAt,updatedAt:this.updatedAt,isPublic:this.isPublic,tags:this.tags,isPinned:this.isPinned,color:this.color,sharedWith:this.sharedWith,lastViewedAt:this.lastViewedAt};return xc(e)}update(e,n){e&&(this.title=e),n&&(this.content=n),this.updatedAt=new Date,this.validate()}isValidColor(){return/^#[0-9A-F]{6}$/i.test(this.color)}addTag(e){this.tags.includes(e)||(this.tags.push(e),this.updatedAt=new Date)}removeTag(e){this.tags=this.tags.filter(n=>n!==e),this.updatedAt=new Date}shareWith(e){this.sharedWith.includes(e)||(this.sharedWith.push(e),this.updatedAt=new Date)}unshareWith(e){this.sharedWith=this.sharedWith.filter(n=>n!==e),this.updatedAt=new Date}togglePin(){this.isPinned=!this.isPinned,this.updatedAt=new Date}togglePublic(){this.isPublic=!this.isPublic,this.updatedAt=new Date}markAsViewed(){this.lastViewedAt=new Date}canBeViewedBy(e){return this.isPublic||this.createdBy===e||this.sharedWith.includes(e)}canBeEditedBy(e){return this.createdBy===e}}class Cg{constructor(e,n,r,s,i,o,a=!1,c=!1,u="personal",h="#E07A5F",f,m=[],v=new Date,b=new Date){this.id=e,this.title=n,this.startDate=r,this.endDate=s,this.createdBy=i,this.description=o,this.isAllDay=a,this.isPublic=c,this.eventType=u,this.color=h,this.location=f,this.attendees=m,this.createdAt=v,this.updatedAt=b,this.validate()}validate(){const e=[];if((!this.title||this.title.trim().length===0)&&e.push("Title is required"),this.title&&this.title.length>100&&e.push("Title must be less than 100 characters"),(!this.createdBy||this.createdBy.trim().length===0)&&e.push("Created by is required"),this.endDate<=this.startDate&&e.push("End date must be after start date"),this.isValidColor()||e.push("Invalid color format"),e.length>0)throw new rt("Calendar event validation failed",e);return{isValid:!0,errors:[]}}isValidColor(){return/^#[0-9A-F]{6}$/i.test(this.color)}static fromFirestore(e){var n,r,s,i;return new Cg(e.id,e.title,((n=e.startDate)==null?void 0:n.toDate())||new Date,((r=e.endDate)==null?void 0:r.toDate())||new Date,e.createdBy,e.description,e.isAllDay||!1,e.isPublic||!1,e.eventType||"personal",e.color||"#E07A5F",e.location,e.attendees||[],((s=e.createdAt)==null?void 0:s.toDate())||new Date,((i=e.updatedAt)==null?void 0:i.toDate())||new Date)}toFirestore(){const e={title:this.title,startDate:this.startDate,endDate:this.endDate,createdBy:this.createdBy,description:this.description,isAllDay:this.isAllDay,isPublic:this.isPublic,eventType:this.eventType,color:this.color,location:this.location,attendees:this.attendees,createdAt:this.createdAt,updatedAt:this.updatedAt};return xc(e)}getDuration(){return this.endDate.getTime()-this.startDate.getTime()}getDurationInHours(){return this.getDuration()/(1e3*60*60)}isOnDate(e){const n=new Date(this.startDate),r=new Date(this.endDate),s=new Date(e);return n.setHours(0,0,0,0),r.setHours(23,59,59,999),s.setHours(12,0,0,0),s>=n&&s<=r}isInRange(e,n){return this.startDate<=n&&this.endDate>=e}addAttendee(e){this.attendees.includes(e)||(this.attendees.push(e),this.updatedAt=new Date)}removeAttendee(e){this.attendees=this.attendees.filter(n=>n!==e),this.updatedAt=new Date}updateDates(e,n){this.startDate=e,this.endDate=n,this.updatedAt=new Date,this.validate()}canBeViewedBy(e){return this.isPublic||this.createdBy===e||this.attendees.includes(e)}canBeEditedBy(e){return this.createdBy===e}isUpcoming(){return this.startDate>new Date}isPast(){return this.endDate<new Date}isOngoing(){const e=new Date;return this.startDate<=e&&this.endDate>=e}}class ep{static createCategory(e){var n;try{if(!e.name||e.name.trim().length===0)throw new rt("Category validation failed",["Category name is required"]);if(e.name.length>50)throw new rt("Category validation failed",["Category name must be less than 50 characters"]);if(!e.createdBy||e.createdBy.trim().length===0)throw new rt("Category validation failed",["Created by is required"]);if(e.color&&!/^#[0-9A-F]{6}$/i.test(e.color))throw new rt("Category validation failed",["Invalid color format - must be hex color (e.g., #FF0000)"]);if(e.description&&e.description.length>100)throw new rt("Category validation failed",["Description must be less than 100 characters"]);if(e.icon&&e.icon.length>2)throw new rt("Category validation failed",["Icon must be less than 2 characters"]);const r=new Tg(e.id||`category_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,e.name.trim(),e.createdBy,e.createdAt||new Date,((n=e.description)==null?void 0:n.trim())||void 0,e.color||"#6B7280",e.icon||"🏷️",e.isDefault||!1,e.itemCount||0);if(!r.isValidColor())throw new rt("Category validation failed",["Invalid color format"]);return r}catch(r){throw r instanceof rt?r:new rt("Failed to create category",["Unknown validation error"])}}static createNote(e){try{return new Sg(e.id||"",e.title||"",e.content||"",e.createdBy||"",e.createdAt||new Date,e.updatedAt||new Date,e.isPublic||!1,e.tags||[],e.isPinned||!1,e.color||"#F3F4F6",e.sharedWith||[],e.lastViewedAt)}catch(n){throw n instanceof rt?n:new rt("Failed to create note",["Unknown validation error"])}}static createShoppingItem(e){try{if(!e.link||!e.link.startsWith("http"))throw new rt("Shopping item validation failed",["Valid URL is required"]);if(!e.category||e.category.trim().length===0)throw new rt("Shopping item validation failed",["Category is required"]);if(!e.createdBy||e.createdBy.trim().length===0)throw new rt("Shopping item validation failed",["Created by is required"]);if(e.imageUrl&&e.imageUrl.trim().length>0)try{const n=new URL(e.imageUrl);if(n.protocol!=="http:"&&n.protocol!=="https:")throw new rt("Shopping item validation failed",["Image URL must use http or https protocol"])}catch{throw new rt("Shopping item validation failed",["Invalid image URL format"])}return new xd(e.id||`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,e.category,e.createdBy,e.link,e.name,e.createdAt||new Date,e.completed||!1,e.completedBy,e.completedAt,e.priority||"medium",e.estimatedPrice,e.notes,e.updatedAt||new Date,e.isPublic!==void 0?e.isPublic:!0,e.scrapingData,e.brandName,e.imageUrl)}catch(n){throw n instanceof rt?n:new rt("Failed to create shopping item",["Unknown validation error"])}}static createCalendarEvent(e){try{return new Cg(e.id||"",e.title||"",e.startDate||new Date,e.endDate||new Date,e.createdBy||"",e.description,e.isAllDay||!1,e.isPublic||!1,e.eventType||"personal",e.color||"#E07A5F",e.location,e.attendees||[],e.createdAt||new Date,e.updatedAt||new Date)}catch(n){throw n instanceof rt?n:new rt("Failed to create calendar event",["Unknown validation error"])}}}function LQ(t,e){const n={...e,createdAt:e.createdAt||new Date,updatedAt:e.updatedAt||new Date,startDate:e.startDate||void 0,endDate:e.endDate||void 0,completedAt:e.completedAt||void 0,lastLoginAt:e.lastLoginAt||void 0,lastViewedAt:e.lastViewedAt||void 0};try{switch(t){case"shopping_items":return xd.fromFirestore(n);case"categories":return Tg.fromFirestore(n);case"notes":return Sg.fromFirestore(n);case"calendar_events":return Cg.fromFirestore(n);case"users":return eb.fromFirestore(n);default:return console.warn(`Collection "${t}" non riconosciuta, usando deserializzazione di default`),n}}catch(r){return console.error(`Errore deserializzazione per collection "${t}":`,r),n}}function zC(t){if(typeof t.toFirestore=="function")return t.toFirestore();const{id:e,...n}=t;return n}function ei(t){const[e,n]=p.useState([]),[r,s]=p.useState(!0),[i,o]=p.useState(null),{user:a}=LA();return p.useEffect(()=>{if(!a){n([]),s(!1);return}if(!$s){o("Firebase not configured"),s(!1);return}const w=lC($s,t),x=EG(w,_=>{try{const y=_.docs.map(T=>{const N={id:T.id,...T.data()};return LQ(t,N)});n(y),s(!1),o(null)}catch(y){console.error("Errore durante la deserializzazione batch:",y),o("Errore durante il caricamento dei dati"),s(!1)}},_=>{console.error("Errore Firebase onSnapshot:",_),o(_.message),s(!1)});return()=>x()},[t,a]),{data:e,loading:r,error:i,add:async w=>{if(!a)throw new Error("User not authenticated");if(!$s)throw new Error("Firebase not configured");try{const _={...zC(w),createdBy:a.username,createdAt:kt.now(),updatedAt:kt.now()};return(await bG(lC($s,t),_)).id}catch(x){throw console.error("Errore durante l'aggiunta:",x),new Error(`Impossibile aggiungere l'elemento: ${x instanceof Error?x.message:"Errore sconosciuto"}`)}},update:async(w,x)=>{if(!$s)throw new Error("Firebase not configured");try{const y=Bm($s,t,w);let T;typeof x.toFirestore=="function"?T=zC(x):T={...x};var _=T;_.updatedAt=kt.now(),await bj(y,_)}catch(y){throw console.error("Errore durante l'aggiornamento:",y),new Error(`Impossibile aggiornare l'elemento: ${y instanceof Error?y.message:"Errore sconosciuto"}`)}},remove:async w=>{if(!$s)throw new Error("Firebase not configured");try{const x=Bm($s,t,w);await _G(x)}catch(x){throw console.error("Errore durante l'eliminazione:",x),new Error(`Impossibile eliminare l'elemento: ${x instanceof Error?x.message:"Errore sconosciuto"}`)}},getByUser:w=>{var x=e.filter(_=>_.createdBy===w||_.isPublic===!0||(a==null?void 0:a.role)==="admin");return x},getById:w=>e.find(x=>x.id===w),getByCategory:w=>e.filter(x=>x.category===w),search:(w,x=["name","title"])=>{const _=w.toLowerCase();return e.filter(y=>x.some(T=>{var N,j;return(j=(N=y[T])==null?void 0:N.toLowerCase)==null?void 0:j.call(N).includes(_)}))}}}function ke(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Xn(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function vn(t,e){const n=ke(t);return isNaN(e)?Xn(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function pr(t,e){const n=ke(t);if(isNaN(e))return Xn(t,NaN);if(!e)return n;const r=n.getDate(),s=Xn(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const tb=6048e5,VQ=864e5,rf=43200,BC=1440;let FQ={};function kc(){return FQ}function gr(t,e){var a,c,u,h;const n=kc(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=ke(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function ba(t){return gr(t,{weekStartsOn:1})}function aM(t){const e=ke(t),n=e.getFullYear(),r=Xn(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=ba(r),i=Xn(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=ba(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function oc(t){const e=ke(t);return e.setHours(0,0,0,0),e}function ac(t){const e=ke(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function gs(t,e){const n=oc(t),r=oc(e),s=+n-ac(n),i=+r-ac(r);return Math.round((s-i)/VQ)}function UQ(t){const e=aM(t),n=Xn(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),ba(n)}function fx(t,e){const n=e*7;return vn(t,n)}function $Q(t,e){return pr(t,e*12)}function zQ(t){let e;return t.forEach(function(n){const r=ke(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function BQ(t){let e;return t.forEach(n=>{const r=ke(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Mf(t,e){const n=ke(t),r=ke(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function lM(t){return Xn(t,Date.now())}function Qt(t,e){const n=oc(t),r=oc(e);return+n==+r}function nb(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function rb(t){if(!nb(t)&&typeof t!="number")return!1;const e=ke(t);return!isNaN(Number(e))}function lc(t,e){const n=ke(t),r=ke(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function WQ(t,e,n){const r=gr(t,n),s=gr(e,n),i=+r-ac(r),o=+s-ac(s);return Math.round((i-o)/tb)}function HQ(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function qQ(t,e){return+ke(t)-+ke(e)}function GQ(t){const e=ke(t);return e.setHours(23,59,59,999),e}function Kd(t){const e=ke(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function KQ(t){const e=ke(t);return+GQ(e)==+Kd(e)}function YQ(t,e){const n=ke(t),r=ke(e),s=Mf(n,r),i=Math.abs(lc(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let a=Mf(n,r)===-s;KQ(ke(t))&&i===1&&Mf(t,r)===1&&(a=!1),o=s*(i-Number(a))}return o===0?0:o}function QQ(t,e,n){const r=qQ(t,e)/1e3;return HQ(n==null?void 0:n.roundingMethod)(r)}function Pn(t){const e=ke(t);return e.setDate(1),e.setHours(0,0,0,0),e}function cM(t){const e=ke(t),n=Xn(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ig(t,e){var a,c,u,h;const n=kc(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=ke(t),i=s.getDay(),o=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}function uM(t){return Ig(t,{weekStartsOn:1})}const XQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ZQ=(t,e,n)=>{let r;const s=XQ[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Cl(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const JQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},eX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nX={date:Cl({formats:JQ,defaultWidth:"full"}),time:Cl({formats:eX,defaultWidth:"full"}),dateTime:Cl({formats:tX,defaultWidth:"full"})},rX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sX=(t,e,n,r)=>rX[t];function hs(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const iX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dX=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},hX={ordinalNumber:dX,era:hs({values:iX,defaultWidth:"wide"}),quarter:hs({values:oX,defaultWidth:"wide",argumentCallback:t=>t-1}),month:hs({values:aX,defaultWidth:"wide"}),day:hs({values:lX,defaultWidth:"wide"}),dayPeriod:hs({values:cX,defaultWidth:"wide",formattingValues:uX,defaultFormattingWidth:"wide"})};function fs(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?mX(a,f=>f.test(o)):fX(a,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function fX(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function mX(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function dM(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(s.length);return{value:o,rest:a}}}const pX=/^(\d+)(th|st|nd|rd)?/i,gX=/\d+/i,vX={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yX={any:[/^b/i,/^(a|c)/i]},wX={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xX={any:[/1/i,/2/i,/3/i,/4/i]},_X={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},EX={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TX={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SX={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CX={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},IX={ordinalNumber:dM({matchPattern:pX,parsePattern:gX,valueCallback:t=>parseInt(t,10)}),era:fs({matchPatterns:vX,defaultMatchWidth:"wide",parsePatterns:yX,defaultParseWidth:"any"}),quarter:fs({matchPatterns:wX,defaultMatchWidth:"wide",parsePatterns:xX,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fs({matchPatterns:_X,defaultMatchWidth:"wide",parsePatterns:bX,defaultParseWidth:"any"}),day:fs({matchPatterns:EX,defaultMatchWidth:"wide",parsePatterns:TX,defaultParseWidth:"any"}),dayPeriod:fs({matchPatterns:SX,defaultMatchWidth:"any",parsePatterns:CX,defaultParseWidth:"any"})},sb={code:"en-US",formatDistance:ZQ,formatLong:nX,formatRelative:sX,localize:hX,match:IX,options:{weekStartsOn:0,firstWeekContainsDate:1}};function kX(t){const e=ke(t);return gs(e,cM(e))+1}function hM(t){const e=ke(t),n=+ba(e)-+UQ(e);return Math.round(n/tb)+1}function fM(t,e){var h,f,m,v;const n=ke(t),r=n.getFullYear(),s=kc(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((v=(m=s.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=Xn(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=gr(o,e),c=Xn(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=gr(c,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function NX(t,e){var a,c,u,h;const n=kc(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(u=n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=fM(t,e),i=Xn(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),gr(i,e)}function mM(t,e){const n=ke(t),r=+gr(n,e)-+NX(n,e);return Math.round(r/tb)+1}function it(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ei={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return it(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):it(n+1,2)},d(t,e){return it(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return it(t.getHours()%12||12,e.length)},H(t,e){return it(t.getHours(),e.length)},m(t,e){return it(t.getMinutes(),e.length)},s(t,e){return it(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return it(s,e.length)}},Wa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},WC={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ei.y(t,e)},Y:function(t,e,n,r){const s=fM(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return it(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):it(i,e.length)},R:function(t,e){const n=aM(t);return it(n,e.length)},u:function(t,e){const n=t.getFullYear();return it(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return it(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return it(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ei.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return it(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=mM(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):it(s,e.length)},I:function(t,e,n){const r=hM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):it(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ei.d(t,e)},D:function(t,e,n){const r=kX(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):it(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return it(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return it(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return it(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Wa.noon:r===0?s=Wa.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Wa.evening:r>=12?s=Wa.afternoon:r>=4?s=Wa.morning:s=Wa.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ei.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ei.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):it(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):it(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ei.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ei.s(t,e)},S:function(t,e){return Ei.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return qC(r);case"XXXX":case"XX":return Wo(r);case"XXXXX":case"XXX":default:return Wo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return qC(r);case"xxxx":case"xx":return Wo(r);case"xxxxx":case"xxx":default:return Wo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+HC(r,":");case"OOOO":default:return"GMT"+Wo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+HC(r,":");case"zzzz":default:return"GMT"+Wo(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return it(r,e.length)},T:function(t,e,n){const r=t.getTime();return it(r,e.length)}};function HC(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+it(i,2)}function qC(t,e){return t%60===0?(t>0?"-":"+")+it(Math.abs(t)/60,2):Wo(t,e)}function Wo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=it(Math.trunc(r/60),2),i=it(r%60,2);return n+s+e+i}const GC=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},AX=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return GC(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",GC(r,e)).replace("{{time}}",pM(s,e))},PX={p:pM,P:AX},RX=/^D+$/,DX=/^Y+$/,jX=["D","DD","YY","YYYY"];function MX(t){return RX.test(t)}function OX(t){return DX.test(t)}function LX(t,e,n){const r=VX(t,e,n);if(console.warn(r),jX.includes(t))throw new RangeError(r)}function VX(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const FX=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,UX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$X=/^'([^]*?)'?$/,zX=/''/g,BX=/[a-zA-Z]/;function $t(t,e,n){var h,f,m,v,b,w,x,_;const r=kc(),s=(n==null?void 0:n.locale)??r.locale??sb,i=(n==null?void 0:n.firstWeekContainsDate)??((f=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((w=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((_=(x=r.locale)==null?void 0:x.options)==null?void 0:_.weekStartsOn)??0,a=ke(t);if(!rb(a))throw new RangeError("Invalid time value");let c=e.match(UX).map(y=>{const T=y[0];if(T==="p"||T==="P"){const N=PX[T];return N(y,s.formatLong)}return y}).join("").match(FX).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const T=y[0];if(T==="'")return{isToken:!1,value:WX(y)};if(WC[T])return{isToken:!0,value:y};if(T.match(BX))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(a,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const T=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&OX(T)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&MX(T))&&LX(T,e,String(t));const N=WC[T[0]];return N(a,T,s.localize,u)}).join("")}function WX(t){const e=t.match($X);return e?e[1].replace(zX,"'"):t}function HX(t,e,n){const r=kc(),s=(n==null?void 0:n.locale)??r.locale??sb,i=2520,o=Mf(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=ke(e),u=ke(t)):(c=ke(t),u=ke(e));const h=QQ(u,c),f=(ac(u)-ac(c))/1e3,m=Math.round((h-f)/60);let v;if(m<2)return n!=null&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,a):h<10?s.formatDistance("lessThanXSeconds",10,a):h<20?s.formatDistance("lessThanXSeconds",20,a):h<40?s.formatDistance("halfAMinute",0,a):h<60?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",1,a):m===0?s.formatDistance("lessThanXMinutes",1,a):s.formatDistance("xMinutes",m,a);if(m<45)return s.formatDistance("xMinutes",m,a);if(m<90)return s.formatDistance("aboutXHours",1,a);if(m<BC){const b=Math.round(m/60);return s.formatDistance("aboutXHours",b,a)}else{if(m<i)return s.formatDistance("xDays",1,a);if(m<rf){const b=Math.round(m/BC);return s.formatDistance("xDays",b,a)}else if(m<rf*2)return v=Math.round(m/rf),s.formatDistance("aboutXMonths",v,a)}if(v=YQ(u,c),v<12){const b=Math.round(m/rf);return s.formatDistance("xMonths",b,a)}else{const b=v%12,w=Math.trunc(v/12);return b<3?s.formatDistance("aboutXYears",w,a):b<9?s.formatDistance("overXYears",w,a):s.formatDistance("almostXYears",w+1,a)}}function ib(t,e){return HX(t,lM(t),e)}function KC(t){return ke(t).getDay()}function qX(t){const e=ke(t),n=e.getFullYear(),r=e.getMonth(),s=Xn(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function GX(t){return Math.trunc(+ke(t)/1e3)}function KX(t){const e=ke(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function YX(t,e){return WQ(KX(t),Pn(t),e)+1}function tp(t,e){const n=ke(t),r=ke(e);return n.getTime()>r.getTime()}function gM(t,e){const n=ke(t),r=ke(e);return+n<+r}function YC(t,e,n){const r=gr(t,n),s=gr(e,n);return+r==+s}function kg(t,e){const n=ke(t),r=ke(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function QX(t,e){const n=ke(t),r=ke(e);return n.getFullYear()===r.getFullYear()}function XX(t){return Qt(t,lM(t))}function ly(t,e){return vn(t,-e)}function cy(t,e){const n=ke(t),r=n.getFullYear(),s=n.getDate(),i=Xn(t,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const o=qX(i);return n.setMonth(e,Math.min(s,o)),n}function QC(t,e){const n=ke(t);return isNaN(+n)?Xn(t,NaN):(n.setFullYear(e),n)}function ZX(t,e){return pr(t,-1)}function JX({isOpen:t,onClose:e}){const[n]=MN(),{user:r}=Mn(),{data:s}=ei("shopping_items"),{data:i}=ei("notes"),{data:o}=ei("calendar_events"),a=p.useMemo(()=>{const u=new Date,h=s.filter(_=>_.isPublic||_.createdBy===(r==null?void 0:r.username)||(r==null?void 0:r.role)==="admin"),f=i.filter(_=>_.isPublic||_.createdBy===(r==null?void 0:r.username)||(r==null?void 0:r.role)==="admin"),m=o.filter(_=>_.isPublic||_.createdBy===(r==null?void 0:r.username)||(r==null?void 0:r.role)==="admin"),v=h.filter(_=>!_.completed).length,b=h.filter(_=>_.completed&&_.completedAt&&Qt(_.completedAt,u)).length,w=f.length,x=m.filter(_=>tp(_.startDate,u)).length;return{shopping:v,notes:w,calendar:x,completedToday:b,upcomingEvents:x}},[s,i,o,r]),c=[{name:"Lista della Spesa",path:"/shopping",icon:Tm,count:a.shopping,color:"bg-burnt-sienna"},{name:"Note",path:"/notes",icon:Vp,count:a.notes,color:"bg-cambridge-blue"},{name:"Calendario",path:"/calendar",icon:Iu,count:a.calendar,color:"bg-sunset"}];return l.jsxs(l.Fragment,{children:[t&&l.jsx("div",{className:"fixed inset-0 z-20 bg-black/50 lg:hidden",onClick:e}),l.jsx("aside",{className:pe("fixed inset-y-0 left-0 z-30 w-64 bg-card border-r border-border shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:w-64",t?"translate-x-0":"-translate-x-full"),children:l.jsxs("div",{className:"flex flex-col h-full pt-16 lg:pt-0",children:[l.jsx("div",{className:"hidden lg:block px-6 py-4 border-b border-border",children:l.jsx("h2",{className:"text-lg font-semibold text-card-foreground",children:"Menu"})}),l.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:c.map(u=>{const h=u.icon,f=n===u.path;return l.jsx(vf,{href:u.path,children:l.jsxs("div",{className:pe("group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 cursor-pointer",f?"bg-burnt-sienna/10 text-burnt-sienna border border-burnt-sienna/20":"text-muted-foreground hover:bg-muted hover:text-card-foreground border border-transparent"),onClick:()=>window.innerWidth<1024&&e(),children:[l.jsx(h,{className:pe("mr-3 h-5 w-5 transition-colors",f?"text-burnt-sienna":"text-muted-foreground group-hover:text-card-foreground")}),l.jsx("span",{className:"flex-1",children:u.name}),u.count>0&&l.jsx("span",{className:pe("text-xs px-2 py-1 rounded-full font-medium transition-colors",f?"bg-burnt-sienna text-white":"bg-muted text-muted-foreground group-hover:bg-muted-foreground/10"),children:u.count})]})},u.name)})}),l.jsx("div",{className:"px-4 py-4 border-t border-border mt-auto",children:l.jsxs("div",{className:"bg-cambridge-blue/10 dark:bg-cambridge-blue/20 rounded-lg p-4 border border-cambridge-blue/20",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx(Ks,{className:"h-4 w-4 text-cambridge-blue mr-2"}),l.jsx("h3",{className:"text-sm font-semibold text-card-foreground",children:"Statistiche Rapide"})]}),l.jsxs("div",{className:"space-y-2 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-muted-foreground",children:"Completati Oggi"}),l.jsx("span",{className:"font-medium text-cambridge-blue bg-cambridge-blue/10 px-2 py-1 rounded-full",children:a.completedToday})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-muted-foreground",children:"Eventi Prossimi"}),l.jsx("span",{className:"font-medium text-sunset bg-sunset/10 px-2 py-1 rounded-full",children:a.upcomingEvents})]})]})]})})]})})]})}function eZ({children:t}){const[e,n]=p.useState(!1);return l.jsxs("div",{className:"h-screen bg-background flex flex-col",children:[l.jsx(lW,{onMenuToggle:()=>n(!e)}),l.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[l.jsx(JX,{isOpen:e,onClose:()=>n(!1)}),l.jsx("main",{className:"flex-1 overflow-auto bg-background",children:t})]})]})}var Ng="Switch",[tZ,Yte]=Nr(Ng),[nZ,rZ]=tZ(Ng),vM=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:h,...f}=t,[m,v]=p.useState(null),b=$e(e,T=>v(T)),w=p.useRef(!1),x=m?h||!!m.closest("form"):!0,[_,y]=co({prop:s,defaultProp:i??!1,onChange:u,caller:Ng});return l.jsxs(nZ,{scope:n,checked:_,disabled:a,children:[l.jsx(Ne.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":_M(_),"data-disabled":a?"":void 0,disabled:a,value:c,...f,ref:b,onClick:ie(t.onClick,T=>{y(N=>!N),x&&(w.current=T.isPropagationStopped(),w.current||T.stopPropagation())})}),x&&l.jsx(xM,{control:m,bubbles:!w.current,name:r,value:c,checked:_,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});vM.displayName=Ng;var yM="SwitchThumb",wM=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=rZ(yM,n);return l.jsx(Ne.span,{"data-state":_M(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});wM.displayName=yM;var sZ="SwitchBubbleInput",xM=p.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const o=p.useRef(null),a=$e(o,i),c=gP(n),u=uA(e);return p.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&v){const b=new Event("click",{bubbles:r});v.call(h,n),h.dispatchEvent(b)}},[c,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});xM.displayName=sZ;function _M(t){return t?"checked":"unchecked"}var bM=vM,iZ=wM;const rr=p.forwardRef(({className:t,...e},n)=>l.jsx(bM,{className:pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:l.jsx(iZ,{className:pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));rr.displayName=bM.displayName;const oZ={lessThanXSeconds:{one:"meno di un secondo",other:"meno di {{count}} secondi"},xSeconds:{one:"un secondo",other:"{{count}} secondi"},halfAMinute:"alcuni secondi",lessThanXMinutes:{one:"meno di un minuto",other:"meno di {{count}} minuti"},xMinutes:{one:"un minuto",other:"{{count}} minuti"},aboutXHours:{one:"circa un'ora",other:"circa {{count}} ore"},xHours:{one:"un'ora",other:"{{count}} ore"},xDays:{one:"un giorno",other:"{{count}} giorni"},aboutXWeeks:{one:"circa una settimana",other:"circa {{count}} settimane"},xWeeks:{one:"una settimana",other:"{{count}} settimane"},aboutXMonths:{one:"circa un mese",other:"circa {{count}} mesi"},xMonths:{one:"un mese",other:"{{count}} mesi"},aboutXYears:{one:"circa un anno",other:"circa {{count}} anni"},xYears:{one:"un anno",other:"{{count}} anni"},overXYears:{one:"più di un anno",other:"più di {{count}} anni"},almostXYears:{one:"quasi un anno",other:"quasi {{count}} anni"}},aZ=(t,e,n)=>{let r;const s=oZ[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"tra "+r:r+" fa":r},lZ={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},cZ={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},uZ={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},dZ={date:Cl({formats:lZ,defaultWidth:"full"}),time:Cl({formats:cZ,defaultWidth:"full"}),dateTime:Cl({formats:uZ,defaultWidth:"full"})},ob=["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"];function hZ(t){switch(t){case 0:return"'domenica scorsa alle' p";default:return"'"+ob[t]+" scorso alle' p"}}function XC(t){return"'"+ob[t]+" alle' p"}function fZ(t){switch(t){case 0:return"'domenica prossima alle' p";default:return"'"+ob[t]+" prossimo alle' p"}}const mZ={lastWeek:(t,e,n)=>{const r=t.getDay();return YC(t,e,n)?XC(r):hZ(r)},yesterday:"'ieri alle' p",today:"'oggi alle' p",tomorrow:"'domani alle' p",nextWeek:(t,e,n)=>{const r=t.getDay();return YC(t,e,n)?XC(r):fZ(r)},other:"P"},pZ=(t,e,n,r)=>{const s=mZ[t];return typeof s=="function"?s(e,n,r):s},gZ={narrow:["aC","dC"],abbreviated:["a.C.","d.C."],wide:["avanti Cristo","dopo Cristo"]},vZ={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},yZ={narrow:["G","F","M","A","M","G","L","A","S","O","N","D"],abbreviated:["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic"],wide:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"]},wZ={narrow:["D","L","M","M","G","V","S"],short:["dom","lun","mar","mer","gio","ven","sab"],abbreviated:["dom","lun","mar","mer","gio","ven","sab"],wide:["domenica","lunedì","martedì","mercoledì","giovedì","venerdì","sabato"]},xZ={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"mattina",afternoon:"pomeriggio",evening:"sera",night:"notte"}},_Z={narrow:{am:"m.",pm:"p.",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},abbreviated:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"},wide:{am:"AM",pm:"PM",midnight:"mezzanotte",noon:"mezzogiorno",morning:"di mattina",afternoon:"del pomeriggio",evening:"di sera",night:"di notte"}},bZ=(t,e)=>{const n=Number(t);return String(n)},EZ={ordinalNumber:bZ,era:hs({values:gZ,defaultWidth:"wide"}),quarter:hs({values:vZ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:hs({values:yZ,defaultWidth:"wide"}),day:hs({values:wZ,defaultWidth:"wide"}),dayPeriod:hs({values:xZ,defaultWidth:"wide",formattingValues:_Z,defaultFormattingWidth:"wide"})},TZ=/^(\d+)(º)?/i,SZ=/\d+/i,CZ={narrow:/^(aC|dC)/i,abbreviated:/^(a\.?\s?C\.?|a\.?\s?e\.?\s?v\.?|d\.?\s?C\.?|e\.?\s?v\.?)/i,wide:/^(avanti Cristo|avanti Era Volgare|dopo Cristo|Era Volgare)/i},IZ={any:[/^a/i,/^(d|e)/i]},kZ={narrow:/^[1234]/i,abbreviated:/^t[1234]/i,wide:/^[1234](º)? trimestre/i},NZ={any:[/1/i,/2/i,/3/i,/4/i]},AZ={narrow:/^[gfmalsond]/i,abbreviated:/^(gen|feb|mar|apr|mag|giu|lug|ago|set|ott|nov|dic)/i,wide:/^(gennaio|febbraio|marzo|aprile|maggio|giugno|luglio|agosto|settembre|ottobre|novembre|dicembre)/i},PZ={narrow:[/^g/i,/^f/i,/^m/i,/^a/i,/^m/i,/^g/i,/^l/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ge/i,/^f/i,/^mar/i,/^ap/i,/^mag/i,/^gi/i,/^l/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},RZ={narrow:/^[dlmgvs]/i,short:/^(do|lu|ma|me|gi|ve|sa)/i,abbreviated:/^(dom|lun|mar|mer|gio|ven|sab)/i,wide:/^(domenica|luned[i|ì]|marted[i|ì]|mercoled[i|ì]|gioved[i|ì]|venerd[i|ì]|sabato)/i},DZ={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^g/i,/^v/i,/^s/i],any:[/^d/i,/^l/i,/^ma/i,/^me/i,/^g/i,/^v/i,/^s/i]},jZ={narrow:/^(a|m\.|p|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i,any:/^([ap]\.?\s?m\.?|mezzanotte|mezzogiorno|(di|del) (mattina|pomeriggio|sera|notte))/i},MZ={any:{am:/^a/i,pm:/^p/i,midnight:/^mezza/i,noon:/^mezzo/i,morning:/mattina/i,afternoon:/pomeriggio/i,evening:/sera/i,night:/notte/i}},OZ={ordinalNumber:dM({matchPattern:TZ,parsePattern:SZ,valueCallback:t=>parseInt(t,10)}),era:fs({matchPatterns:CZ,defaultMatchWidth:"wide",parsePatterns:IZ,defaultParseWidth:"any"}),quarter:fs({matchPatterns:kZ,defaultMatchWidth:"wide",parsePatterns:NZ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fs({matchPatterns:AZ,defaultMatchWidth:"wide",parsePatterns:PZ,defaultParseWidth:"any"}),day:fs({matchPatterns:RZ,defaultMatchWidth:"wide",parsePatterns:DZ,defaultParseWidth:"any"}),dayPeriod:fs({matchPatterns:jZ,defaultMatchWidth:"any",parsePatterns:MZ,defaultParseWidth:"any"})},Xs={code:"it",formatDistance:aZ,formatLong:dZ,formatRelative:pZ,localize:EZ,match:OZ,options:{weekStartsOn:1,firstWeekContainsDate:4}};var Ag="Dialog",[EM,TM]=Nr(Ag),[LZ,ts]=EM(Ag),SM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),c=p.useRef(null),[u,h]=co({prop:r,defaultProp:s??!1,onChange:i,caller:Ag});return l.jsx(LZ,{scope:e,triggerRef:a,contentRef:c,contentId:Yr(),titleId:Yr(),descriptionId:Yr(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};SM.displayName=Ag;var CM="DialogTrigger",IM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(CM,n),i=$e(e,s.triggerRef);return l.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":cb(s.open),...r,ref:i,onClick:ie(t.onClick,s.onOpenToggle)})});IM.displayName=CM;var ab="DialogPortal",[VZ,kM]=EM(ab,{forceMount:void 0}),NM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=ts(ab,e);return l.jsx(VZ,{scope:e,forceMount:n,children:p.Children.map(r,o=>l.jsx(jn,{present:n||i.open,children:l.jsx(Pd,{asChild:!0,container:s,children:o})}))})};NM.displayName=ab;var np="DialogOverlay",AM=p.forwardRef((t,e)=>{const n=kM(np,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ts(np,t.__scopeDialog);return i.modal?l.jsx(jn,{present:r||i.open,children:l.jsx(UZ,{...s,ref:e})}):null});AM.displayName=np;var FZ=oo("DialogOverlay.RemoveScroll"),UZ=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(np,n);return l.jsx(Md,{as:FZ,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(Ne.div,{"data-state":cb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ea="DialogContent",PM=p.forwardRef((t,e)=>{const n=kM(Ea,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=ts(Ea,t.__scopeDialog);return l.jsx(jn,{present:r||i.open,children:i.modal?l.jsx($Z,{...s,ref:e}):l.jsx(zZ,{...s,ref:e})})});PM.displayName=Ea;var $Z=p.forwardRef((t,e)=>{const n=ts(Ea,t.__scopeDialog),r=p.useRef(null),s=$e(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return Hp(i)},[]),l.jsx(RM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ie(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ie(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ie(t.onFocusOutside,i=>i.preventDefault())})}),zZ=p.forwardRef((t,e)=>{const n=ts(Ea,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return l.jsx(RM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),RM=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=ts(Ea,n),c=p.useRef(null),u=$e(e,c);return Wp(),l.jsxs(l.Fragment,{children:[l.jsx(Dd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(gc,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":cb(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(WZ,{titleId:a.titleId}),l.jsx(qZ,{contentRef:c,descriptionId:a.descriptionId})]})]})}),lb="DialogTitle",DM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(lb,n);return l.jsx(Ne.h2,{id:s.titleId,...r,ref:e})});DM.displayName=lb;var jM="DialogDescription",MM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(jM,n);return l.jsx(Ne.p,{id:s.descriptionId,...r,ref:e})});MM.displayName=jM;var OM="DialogClose",LM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ts(OM,n);return l.jsx(Ne.button,{type:"button",...r,ref:e,onClick:ie(t.onClick,()=>s.onOpenChange(!1))})});LM.displayName=OM;function cb(t){return t?"open":"closed"}var VM="DialogTitleWarning",[BZ,FM]=QF(VM,{contentName:Ea,titleName:lb,docsSlug:"dialog"}),WZ=({titleId:t})=>{const e=FM(VM),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},HZ="DialogDescriptionWarning",qZ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${FM(HZ).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},UM=SM,GZ=IM,$M=NM,ub=AM,db=PM,hb=DM,fb=MM,mb=LM,zM="AlertDialog",[KZ,Qte]=Nr(zM,[TM]),pi=TM(),BM=t=>{const{__scopeAlertDialog:e,...n}=t,r=pi(e);return l.jsx(UM,{...r,...n,modal:!0})};BM.displayName=zM;var YZ="AlertDialogTrigger",WM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=pi(n);return l.jsx(GZ,{...s,...r,ref:e})});WM.displayName=YZ;var QZ="AlertDialogPortal",HM=t=>{const{__scopeAlertDialog:e,...n}=t,r=pi(e);return l.jsx($M,{...r,...n})};HM.displayName=QZ;var XZ="AlertDialogOverlay",qM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=pi(n);return l.jsx(ub,{...s,...r,ref:e})});qM.displayName=XZ;var Il="AlertDialogContent",[ZZ,JZ]=KZ(Il),eJ=YN("AlertDialogContent"),GM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=pi(n),o=p.useRef(null),a=$e(e,o),c=p.useRef(null);return l.jsx(BZ,{contentName:Il,titleName:KM,docsSlug:"alert-dialog",children:l.jsx(ZZ,{scope:n,cancelRef:c,children:l.jsxs(db,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:ie(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(eJ,{children:r}),l.jsx(nJ,{contentRef:o})]})})})});GM.displayName=Il;var KM="AlertDialogTitle",YM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=pi(n);return l.jsx(hb,{...s,...r,ref:e})});YM.displayName=KM;var QM="AlertDialogDescription",XM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=pi(n);return l.jsx(fb,{...s,...r,ref:e})});XM.displayName=QM;var tJ="AlertDialogAction",ZM=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=pi(n);return l.jsx(mb,{...s,...r,ref:e})});ZM.displayName=tJ;var JM="AlertDialogCancel",eO=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=JZ(JM,n),i=pi(n),o=$e(e,s);return l.jsx(mb,{...i,...r,ref:o})});eO.displayName=JM;var nJ=({contentRef:t})=>{const e=`\`${Il}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Il}\` by passing a \`${QM}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Il}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},rJ=BM,sJ=WM,iJ=HM,tO=qM,nO=GM,rO=ZM,sO=eO,iO=YM,oO=XM;const Pg=rJ,Rg=sJ,oJ=iJ,aO=p.forwardRef(({className:t,...e},n)=>l.jsx(tO,{className:pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));aO.displayName=tO.displayName;const Yd=p.forwardRef(({className:t,...e},n)=>l.jsxs(oJ,{children:[l.jsx(aO,{}),l.jsx(nO,{ref:n,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Yd.displayName=nO.displayName;const Qd=({className:t,...e})=>l.jsx("div",{className:pe("flex flex-col space-y-2 text-center sm:text-left",t),...e});Qd.displayName="AlertDialogHeader";const Xd=({className:t,...e})=>l.jsx("div",{className:pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Xd.displayName="AlertDialogFooter";const Zd=p.forwardRef(({className:t,...e},n)=>l.jsx(iO,{ref:n,className:pe("text-lg font-semibold",t),...e}));Zd.displayName=iO.displayName;const Jd=p.forwardRef(({className:t,...e},n)=>l.jsx(oO,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));Jd.displayName=oO.displayName;const eh=p.forwardRef(({className:t,...e},n)=>l.jsx(rO,{ref:n,className:pe(ad(),t),...e}));eh.displayName=rO.displayName;const th=p.forwardRef(({className:t,...e},n)=>l.jsx(sO,{ref:n,className:pe(ad({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));th.displayName=sO.displayName;function aJ({item:t,categories:e,onEdit:n,onDelete:r,onComplete:s}){const{user:i}=Mn(),{toast:o}=As(),[a,c]=p.useState(!1),u=(i==null?void 0:i.username)===t.createdBy||(i==null?void 0:i.role)==="admin",f=((C,k=32)=>C.length<=k?{display:C,isTruncated:!1}:{display:C.substring(0,k)+"...",isTruncated:!0})(t.name||"Prodotto senza nome"),m=t.scrapingData&&t.scrapingData.scrapingSuccess!==!0,v=t.scrapingData&&t.scrapingData.scrapingSuccess===!0,b=C=>{if(!C||!rb(C))return"Data non disponibile";try{return ib(C,{addSuffix:!0,locale:Xs})}catch(k){return console.warn("Error formatting date:",k),"Data non valida"}},w=async()=>{c(!0);try{await s(t.id),o({title:"Elemento completato",description:"Elemento della lista della spesa segnato come completato!"})}catch{o({title:"Errore",description:"Impossibile segnare l'elemento come completato",variant:"destructive"})}finally{c(!1)}},x=async()=>{try{await r(t.id),o({title:"Elemento eliminato",description:"Elemento della lista della spesa eliminato con successo!"})}catch{o({title:"Errore",description:"Impossibile eliminare l'elemento",variant:"destructive"})}},_=C=>typeof C=="string"?C:C.toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2})+" €",y=e==null?void 0:e.find(C=>C.name===t.category),T=y?{backgroundColor:`${y.color}20`,color:y.color,className:"border-current"}:{className:"text-gray-600 border-gray-300"},j={high:{icon:sP,label:"Alta",color:"text-red-600 border-red-300 bg-red-50",className:"badge-high-priority"},medium:{icon:A9,label:"Media",color:"text-yellow-600 border-yellow-300 bg-yellow-50",className:"badge-medium-priority"},low:{icon:N9,label:"Bassa",color:"text-green-600 border-green-300 bg-green-50",className:"badge-low-priority"}}[t.priority],M=j.icon;return l.jsx(P0,{children:l.jsx(Ot,{className:`
        transition-all duration-300 hover:shadow-lg border h-full flex flex-col
        ${t.completed?"opacity-60":""} 
        ${t.priority==="high"?"ring-2 ring-red-400 dark:ring-red-500":""}
        ${m?"ring-2 ring-blue-400":""}
      `,children:l.jsxs(Gt,{className:"p-4 flex flex-col flex-1",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center mb-1",children:[t.isPublic?l.jsx(Co,{className:"w-3 h-3 mr-1 text-green-600 flex-shrink-0"}):l.jsx(mo,{className:"w-3 h-3 mr-1 text-orange-600 flex-shrink-0"}),m&&l.jsxs(Ce,{variant:"outline",className:"text-blue-600 border-blue-300 bg-blue-50 mr-1 text-xs px-1 py-0 h-5",children:[l.jsx(lP,{className:"mr-1 h-2 w-2 animate-slow-spin"}),"AI"]}),v&&l.jsxs(Ce,{variant:"outline",className:"text-purple-600 border-purple-300 bg-purple-50 mr-1 text-xs px-1 py-0 h-5",children:[l.jsx(Sm,{className:"mr-1 h-2 w-2"}),"AI"]})]}),l.jsx("div",{className:"mb-1",children:f.isTruncated?l.jsxs(qa,{children:[l.jsx(Ga,{asChild:!0,children:l.jsx("h3",{className:`font-semibold text-card-foreground cursor-help text-sm leading-tight ${t.completed?"line-through":""}`,children:f.display})}),l.jsx(Ho,{children:l.jsx("p",{className:"max-w-xs",children:t.name})})]}):l.jsx("h3",{className:`font-semibold text-card-foreground text-sm leading-tight ${t.completed?"line-through":""}`,children:f.display})}),t.brandName&&l.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1",children:[l.jsx(V0,{className:"h-2.5 w-2.5 mr-1 flex-shrink-0"}),l.jsx("span",{className:"font-medium truncate",children:t.brandName})]})]}),l.jsxs("div",{className:"flex items-start space-x-1 ml-2 flex-shrink-0",children:[t.estimatedPrice&&l.jsx("div",{className:"flex items-center text-green-600 dark:text-green-400 font-semibold text-sm",children:_(t.estimatedPrice)}),u&&l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>n(t),className:"text-gray-400 hover:text-cambridge-blue h-6 w-6 p-0",children:l.jsx(z0,{className:"h-3 w-3"})}),l.jsxs(Pg,{children:[l.jsx(Rg,{asChild:!0,children:l.jsx(Ee,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 h-6 w-6 p-0",children:l.jsx(Fp,{className:"h-3 w-3"})})}),l.jsxs(Yd,{children:[l.jsxs(Qd,{children:[l.jsx(Zd,{children:"Conferma eliminazione"}),l.jsxs(Jd,{children:['Sei sicuro di voler eliminare "',t.name||"questo elemento",'"? Questa azione non può essere annullata.']})]}),l.jsxs(Xd,{children:[l.jsx(th,{children:"Annulla"}),l.jsx(eh,{onClick:x,className:"bg-red-500 hover:bg-red-600",children:"Elimina"})]})]})]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap mb-3",children:[l.jsxs(Ce,{variant:"outline",style:T.className?void 0:T,className:`${T.className||"border"} text-xs px-2 py-0 h-5`,children:[(y==null?void 0:y.icon)&&l.jsx("span",{className:"mr-1 text-xs",children:y.icon}),t.category]}),l.jsxs(Ce,{variant:"outline",className:`${j.color} border-current ${j.className} text-xs px-2 py-0 h-5`,children:[l.jsx(M,{className:"h-2.5 w-2.5 mr-1"}),j.label]})]}),t.notes&&l.jsx("div",{className:"mb-3 p-2 bg-gray-50 dark:bg-gray-800 rounded-md flex-grow",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Vp,{className:"h-3 w-3 mr-1.5 text-gray-500 mt-0.5 flex-shrink-0"}),l.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 line-clamp-2 leading-relaxed",children:t.notes})]})}),t.link&&l.jsx("div",{className:"mb-3",children:l.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-xs text-cambridge-blue hover:text-cambridge-blue/80 hover:underline",children:[l.jsx(Em,{className:"h-3 w-3 mr-1"}),"Vedi prodotto"]})}),l.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100",children:[l.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[l.jsx(ia,{className:"h-2.5 w-2.5 mr-1 flex-shrink-0"}),l.jsx("span",{className:"truncate",children:t.createdBy})]}),l.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[l.jsx(Ks,{className:"h-2.5 w-2.5 mr-1"}),l.jsx("span",{className:"truncate",children:b(t.createdAt)})]})]}),!t.completed&&l.jsx("div",{className:"flex justify-center mt-3",children:l.jsx(Ee,{onClick:w,disabled:a,variant:"outline",size:"sm",className:"w-full h-8 bg-green-50 hover:bg-green-100 text-green-700 border-green-300 dark:bg-green-950/20 dark:text-green-400 dark:border-green-800 text-xs",children:a?"Segnando...":l.jsxs(l.Fragment,{children:[l.jsx(_c,{className:"mr-1 h-3 w-3"}),"Completato"]})})})]})})})}const lJ=`
  @keyframes slow-bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-2px); }
  }
  
  @keyframes slow-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  .animate-slow-bounce {
    animation: slow-bounce 2s ease-in-out infinite;
  }
  
  .animate-slow-spin {
    animation: slow-spin 3s linear infinite;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* ✅ Ottimizzazioni per badge compatti */
  .badge-high-priority {
    font-size: 10px;
    padding: 1px 6px;
  }
  
  .badge-medium-priority {
    font-size: 10px;
    padding: 1px 6px;
  }
  
  .badge-low-priority {
    font-size: 10px;
    padding: 1px 6px;
  }
`;if(typeof document<"u"&&!document.getElementById("shopping-card-styles")){const t=document.createElement("style");t.id="shopping-card-styles",t.textContent=lJ,document.head.appendChild(t)}class cJ{constructor(){Hc(this,"apiKey");Hc(this,"searchEngineId");Hc(this,"baseUrl","https://www.googleapis.com/customsearch/v1");if(this.apiKey="AIzaSyDPrsjzwVQQv-XdsBMRtthrnmq_20eOpKM",this.searchEngineId="45bf48bbd17764d52",!this.apiKey||!this.searchEngineId)throw new Error("Google Search API Key o Search Engine ID mancanti. Assicurati di aver configurato VITE_GOOGLE_SEARCH_API_KEY e VITE_GOOGLE_SEARCH_ENGINE_ID nelle variabili d'ambiente.")}async searchProductImages(e,n=10){try{let r=C6(e);if(r===null)throw"searchQuery null";const s=new URLSearchParams({key:this.apiKey,cx:this.searchEngineId,q:r,searchType:"image",num:Math.min(n,10).toString(),fileType:"jpg,png,webp"}),i=await fetch(`${this.baseUrl}?${s.toString()}`);if(!i.ok){const c=await i.text();throw console.error("❌ Errore API Google Search:",i.status,c),new Error(`Errore API Google Search: ${i.status} - ${i.statusText}`)}const o=await i.json();return!o.items||o.items.length===0?(console.warn("⚠️ Nessuna immagine trovata per:",r),[]):o.items.map((c,u)=>({id:`img_${u}_${Date.now()}`,url:c.link,thumbnailUrl:c.image.thumbnailLink,title:c.title,width:c.image.width,height:c.image.height,contextLink:c.image.contextLink}))}catch(r){throw console.error("❌ Errore durante la ricerca immagini:",r),new Error(r instanceof Error?`Errore ricerca immagini: ${r.message}`:"Errore sconosciuto durante la ricerca immagini")}}}const uJ=new cJ,nh=UM,dJ=$M,lO=p.forwardRef(({className:t,...e},n)=>l.jsx(ub,{ref:n,className:pe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));lO.displayName=ub.displayName;const Nc=p.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(dJ,{children:[l.jsx(lO,{}),l.jsxs(db,{ref:r,className:pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(mb,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(B0,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nc.displayName=db.displayName;const Ac=({className:t,...e})=>l.jsx("div",{className:pe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ac.displayName="DialogHeader";const Pc=p.forwardRef(({className:t,...e},n)=>l.jsx(hb,{ref:n,className:pe("text-lg font-semibold leading-none tracking-tight",t),...e}));Pc.displayName=hb.displayName;const cO=p.forwardRef(({className:t,...e},n)=>l.jsx(fb,{ref:n,className:pe("text-sm text-muted-foreground",t),...e}));cO.displayName=fb.displayName;function hJ(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var pb="ScrollArea",[uO,Xte]=Nr(pb),[fJ,Rr]=uO(pb),dO=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,c]=p.useState(null),[u,h]=p.useState(null),[f,m]=p.useState(null),[v,b]=p.useState(null),[w,x]=p.useState(null),[_,y]=p.useState(0),[T,N]=p.useState(0),[j,M]=p.useState(!1),[C,k]=p.useState(!1),R=$e(e,S=>c(S)),I=Bp(s);return l.jsx(fJ,{scope:n,type:r,dir:I,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:h,content:f,onContentChange:m,scrollbarX:v,onScrollbarXChange:b,scrollbarXEnabled:j,onScrollbarXEnabledChange:M,scrollbarY:w,onScrollbarYChange:x,scrollbarYEnabled:C,onScrollbarYEnabledChange:k,onCornerWidthChange:y,onCornerHeightChange:N,children:l.jsx(Ne.div,{dir:I,...o,ref:R,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":T+"px",...t.style}})})});dO.displayName=pb;var hO="ScrollAreaViewport",fO=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Rr(hO,n),a=p.useRef(null),c=$e(e,a,o.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(Ne.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:l.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});fO.displayName=hO;var Rs="ScrollAreaScrollbar",gb=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Rr(Rs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return p.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?l.jsx(mJ,{...r,ref:e,forceMount:n}):s.type==="scroll"?l.jsx(pJ,{...r,ref:e,forceMount:n}):s.type==="auto"?l.jsx(mO,{...r,ref:e,forceMount:n}):s.type==="always"?l.jsx(vb,{...r,ref:e}):null});gb.displayName=Rs;var mJ=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Rr(Rs,t.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(jn,{present:n||i,children:l.jsx(mO,{"data-state":i?"visible":"hidden",...r,ref:e})})}),pJ=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Rr(Rs,t.__scopeScrollArea),i=t.orientation==="horizontal",o=jg(()=>c("SCROLL_END"),100),[a,c]=hJ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const m=()=>{const v=u[h];f!==v&&(c("SCROLL"),o()),f=v};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,i,c,o]),l.jsx(jn,{present:n||a!=="hidden",children:l.jsx(vb,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ie(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ie(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),mO=p.forwardRef((t,e)=>{const n=Rr(Rs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=p.useState(!1),a=t.orientation==="horizontal",c=jg(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:h)}},10);return cc(n.viewport,c),cc(n.content,c),l.jsx(jn,{present:r||i,children:l.jsx(vb,{"data-state":i?"visible":"hidden",...s,ref:e})})}),vb=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Rr(Rs,t.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[a,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=wO(a.viewport,a.content),h={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,v){return _J(m,o.current,a,v)}return n==="horizontal"?l.jsx(gJ,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollLeft,v=ZC(m,a,s.dir);i.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):n==="vertical"?l.jsx(vJ,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollTop,v=ZC(m,a);i.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),gJ=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Rr(Rs,t.__scopeScrollArea),[o,a]=p.useState(),c=p.useRef(null),u=$e(e,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(gO,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Dg(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(m),_O(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:sp(o.paddingLeft),paddingEnd:sp(o.paddingRight)}})}})}),vJ=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Rr(Rs,t.__scopeScrollArea),[o,a]=p.useState(),c=p.useRef(null),u=$e(e,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(gO,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Dg(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(m),_O(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:sp(o.paddingTop),paddingEnd:sp(o.paddingBottom)}})}})}),[yJ,pO]=uO(Rs),gO=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...m}=t,v=Rr(Rs,n),[b,w]=p.useState(null),x=$e(e,R=>w(R)),_=p.useRef(null),y=p.useRef(""),T=v.viewport,N=r.content-r.viewport,j=nn(h),M=nn(c),C=jg(f,10);function k(R){if(_.current){const I=R.clientX-_.current.left,S=R.clientY-_.current.top;u({x:I,y:S})}}return p.useEffect(()=>{const R=I=>{const S=I.target;(b==null?void 0:b.contains(S))&&j(I,N)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[T,b,N,j]),p.useEffect(M,[r,M]),cc(b,C),cc(v.content,C),l.jsx(yJ,{scope:n,scrollbar:b,hasThumb:s,onThumbChange:nn(i),onThumbPointerUp:nn(o),onThumbPositionChange:M,onThumbPointerDown:nn(a),children:l.jsx(Ne.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:ie(t.onPointerDown,R=>{R.button===0&&(R.target.setPointerCapture(R.pointerId),_.current=b.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),k(R))}),onPointerMove:ie(t.onPointerMove,k),onPointerUp:ie(t.onPointerUp,R=>{const I=R.target;I.hasPointerCapture(R.pointerId)&&I.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=y.current,v.viewport&&(v.viewport.style.scrollBehavior=""),_.current=null})})})}),rp="ScrollAreaThumb",vO=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=pO(rp,t.__scopeScrollArea);return l.jsx(jn,{present:n||s.hasThumb,children:l.jsx(wJ,{ref:e,...r})})}),wJ=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Rr(rp,n),o=pO(rp,n),{onThumbPositionChange:a}=o,c=$e(e,f=>o.onThumbChange(f)),u=p.useRef(void 0),h=jg(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!u.current){const v=bJ(f,a);u.current=v,a()}};return a(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,a]),l.jsx(Ne.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ie(t.onPointerDownCapture,f=>{const v=f.target.getBoundingClientRect(),b=f.clientX-v.left,w=f.clientY-v.top;o.onThumbPointerDown({x:b,y:w})}),onPointerUp:ie(t.onPointerUp,o.onThumbPointerUp)})});vO.displayName=rp;var yb="ScrollAreaCorner",yO=p.forwardRef((t,e)=>{const n=Rr(yb,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(xJ,{...t,ref:e}):null});yO.displayName=yb;var xJ=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Rr(yb,n),[i,o]=p.useState(0),[a,c]=p.useState(0),u=!!(i&&a);return cc(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),cc(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),u?l.jsx(Ne.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function sp(t){return t?parseInt(t,10):0}function wO(t,e){const n=t/e;return isNaN(n)?0:n}function Dg(t){const e=wO(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function _J(t,e,n,r="ltr"){const s=Dg(n),i=s/2,o=e||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return xO([c,u],f)(t)}function ZC(t,e,n="ltr"){const r=Dg(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=Aw(t,c);return xO([0,o],[0,a])(u)}function xO(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function _O(t,e){return t>0&&t<e}var bJ=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function jg(t,e){const n=nn(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function cc(t,e){const n=nn(e);an(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var bO=dO,EJ=fO,TJ=yO;const EO=Le.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(bO,{ref:r,className:pe("relative overflow-hidden",t),...n,children:[l.jsx(EJ,{className:"h-full w-full rounded-[inherit]",children:e}),l.jsx(TO,{}),l.jsx(TJ,{})]}));EO.displayName=bO.displayName;const TO=Le.forwardRef(({className:t,orientation:e="vertical",...n},r)=>l.jsx(gb,{ref:r,orientation:e,className:pe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:l.jsx(vO,{className:"relative flex-1 rounded-full bg-border"})}));TO.displayName=gb.displayName;function Of({className:t,...e}){return l.jsx("div",{className:pe("animate-pulse rounded-md bg-muted",t),...e})}const SJ=({image:t,isSelected:e,onSelect:n})=>{const[r,s]=p.useState(!1),[i,o]=p.useState(!0),a=()=>{o(!1)},c=()=>{s(!0),o(!1)};return l.jsxs(Ot,{className:`
        relative overflow-hidden cursor-pointer transition-all duration-300 group
        hover:shadow-lg hover:scale-[1.02]
        ${e?"ring-2 ring-blue-500 shadow-xl":"hover:shadow-md"}
      `,onClick:n,children:[l.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[i&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(Of,{className:"w-full h-full"})}),r?l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 text-gray-500",children:[l.jsx(bm,{className:"h-8 w-8 mb-2"}),l.jsx("span",{className:"text-xs text-center px-2",children:"Errore caricamento"})]}):l.jsx("img",{src:t.url,alt:t.title,className:`
              w-full h-full object-cover transition-all duration-300
              ${i?"opacity-0":"opacity-100"}
              ${e?"brightness-110":"group-hover:brightness-105"}
            `,onLoad:a,onError:c,loading:"lazy"}),l.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300",children:[e&&l.jsx("div",{className:"absolute top-2 right-2",children:l.jsx("div",{className:"bg-blue-500 text-white rounded-full p-1.5 shadow-lg",children:l.jsx(_c,{className:"h-4 w-4"})})}),l.jsx("div",{className:"absolute bottom-2 left-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:l.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded px-2 py-1 text-xs truncate",children:l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Em,{className:"h-3 w-3 flex-shrink-0"}),l.jsx("span",{className:"truncate",children:new URL(t.contextLink).hostname})]})})})]})]}),l.jsxs("div",{className:"p-3",children:[l.jsx("p",{className:"text-xs text-gray-600 truncate",title:t.title,children:t.title}),l.jsx("div",{className:"flex items-center justify-between mt-1",children:l.jsxs(Ce,{variant:"outline",className:"text-xs",children:[t.width," × ",t.height]})})]})]})},CJ=({isOpen:t,onClose:e,onSelectImage:n,productName:r,brandName:s,images:i,isLoading:o,error:a})=>{const[c,u]=p.useState("");p.useEffect(()=>{t&&u("")},[t]);const h=()=>{c&&(n(c),e())},f=()=>{u(""),e()};return l.jsx(nh,{open:t,onOpenChange:f,children:l.jsxs(Nc,{className:"max-w-4xl max-h-[90vh] p-0",children:[l.jsx(Ac,{className:"p-6 pb-4 border-b",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx(Pc,{className:"text-xl font-semibold",children:"Seleziona un'immagine"}),l.jsxs(cO,{className:"mt-1",children:["Scegli l'immagine per ",l.jsx("span",{className:"font-medium",children:r}),s&&l.jsxs("span",{className:"text-gray-500",children:[" di ",s]})]})]})})}),l.jsxs("div",{className:"flex-1 overflow-hidden",children:[o&&l.jsxs("div",{className:"p-6",children:[l.jsx("div",{className:"flex items-center justify-center mb-4",children:l.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[l.jsx($0,{className:"h-5 w-5 animate-spin"}),l.jsx("span",{children:"Ricerca immagini in corso..."})]})}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Array.from({length:8}).map((m,v)=>l.jsxs(Ot,{className:"overflow-hidden",children:[l.jsx(Of,{className:"aspect-square w-full"}),l.jsxs("div",{className:"p-3",children:[l.jsx(Of,{className:"h-3 w-3/4 mb-2"}),l.jsx(Of,{className:"h-4 w-16"})]})]},v))})]}),a&&!o&&l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-8",children:[l.jsx(bm,{className:"h-12 w-12 text-red-500 mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Errore durante la ricerca"}),l.jsx("p",{className:"text-gray-600 mb-4 max-w-md",children:a}),l.jsx(Ee,{onClick:f,variant:"outline",children:"Chiudi"})]})}),!o&&!a&&l.jsx(EO,{className:"h-[60vh]",children:l.jsx("div",{className:"p-6",children:i.length===0?l.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-8",children:[l.jsx(D9,{className:"h-12 w-12 text-gray-400 mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nessuna immagine trovata"}),l.jsx("p",{className:"text-gray-600 mb-4 max-w-md",children:"Non siamo riusciti a trovare immagini per questo prodotto. Prova a modificare il nome del prodotto o riprova più tardi."}),l.jsx(Ee,{onClick:f,variant:"outline",children:"Chiudi"})]}):l.jsx(l.Fragment,{children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:i.map(m=>l.jsx(SJ,{image:m,isSelected:c===m.url,onSelect:()=>u(m.url)},m.id))})})})})]}),!o&&!a&&i.length>0&&l.jsx("div",{className:"border-t p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-sm text-gray-500",children:c?l.jsx("span",{className:"text-green-600 font-medium",children:"✓ Immagine selezionata"}):"Seleziona un'immagine per continuare"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Ee,{variant:"outline",onClick:f,children:"Annulla"}),l.jsx(Ee,{onClick:h,disabled:!c,className:"bg-blue-600 hover:bg-blue-700",children:"Conferma selezione"})]})]})})]})})};function IJ({item:t,categories:e,onEdit:n,onDelete:r,onComplete:s,onUpdate:i}){const{user:o}=Mn(),{toast:a}=As(),[c,u]=p.useState(!1),[h,f]=p.useState(!1),[m,v]=p.useState(!1),[b,w]=p.useState(!1),[x,_]=p.useState([]),[y,T]=p.useState(""),N=(o==null?void 0:o.username)===t.createdBy||(o==null?void 0:o.role)==="admin",j=N&&t.canUpdateImage(),C=((O,F=35)=>O.length<=F?{display:O,isTruncated:!1}:{display:O.substring(0,F)+"...",isTruncated:!0})(t.name||"Prodotto senza nome"),k=t.scrapingData&&t.scrapingData.scrapingSuccess!==!0,R=t.scrapingData&&t.scrapingData.scrapingSuccess===!0,I=O=>{if(!O||!rb(O))return"Data non disponibile";try{return ib(O,{addSuffix:!0,locale:Xs})}catch{return"Data non valida"}},S=async()=>{u(!0);try{await s(t.id),a({title:"Elemento completato",description:"Elemento della lista della spesa segnato come completato!"})}catch{a({title:"Errore",description:"Impossibile segnare l'elemento come completato",variant:"destructive"})}finally{u(!1)}},P=async()=>{try{await r(t.id),a({title:"Elemento eliminato",description:"Elemento della lista della spesa eliminato con successo!"})}catch{a({title:"Errore",description:"Impossibile eliminare l'elemento",variant:"destructive"})}},A=async()=>{var O;if(!j){a({title:"Operazione non consentita",description:"L'immagine di questo prodotto è stata bloccata e non può essere modificata.",variant:"destructive"});return}if(!((O=t.name)!=null&&O.trim())){a({title:"Nome prodotto richiesto",description:"È necessario specificare un nome per il prodotto per cercare le immagini.",variant:"destructive"});return}v(!0),T(""),_([]);try{const F=await uJ.searchProductImages(t.link,10);if(F.length===0){a({title:"Nessuna immagine trovata",description:"Non sono state trovate immagini per questo prodotto. Prova a modificare il nome.",variant:"destructive"});return}_(F),w(!0),a({title:"Ricerca completata",description:`Trovate ${F.length} immagini. Seleziona quella che preferisci.`})}catch(F){console.error("❌ Errore ricerca immagini:",F);const X=F instanceof Error?F.message:"Errore sconosciuto";T(X),a({title:"Errore ricerca immagini",description:X,variant:"destructive"})}finally{v(!1)}},W=async O=>{try{const F=Bm($s,"shopping_items",t.id);if(await bj(F,{imageUrl:O,imageUpdated:!0,updatedAt:new Date}),i){const X=Object.assign(Object.create(Object.getPrototypeOf(t)),t,{imageUrl:O,imageUpdated:!0,updatedAt:new Date});i(X)}w(!1),_([]),T(""),a({title:"Immagine aggiornata",description:"L'immagine del prodotto è stata aggiornata con successo!"})}catch(F){console.error("❌ Errore aggiornamento immagine:",F),a({title:"Errore aggiornamento",description:"Impossibile aggiornare l'immagine del prodotto.",variant:"destructive"})}},Q=O=>typeof O=="string"?O:O.toLocaleString("it-IT",{minimumFractionDigits:2,maximumFractionDigits:2})+" €",J=e==null?void 0:e.find(O=>O.name===t.category),H=t.imageUrl&&!h;return l.jsx(P0,{children:l.jsxs(Ot,{className:`
        transition-all duration-300 hover:shadow-xl border group relative overflow-hidden
        ${t.completed?"opacity-60":""} 
        ${t.priority==="high"?"ring-2 ring-red-400 dark:ring-red-500":""}
        ${k?"ring-2 ring-blue-400":""}
      `,children:[l.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden bg-gray-100",children:[H?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:t.imageUrl,alt:t.name||"Prodotto",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:()=>f(!0),loading:"lazy"}),t.estimatedPrice&&l.jsx("div",{className:"absolute bottom-2 right-2 bg-white/95 backdrop-blur-sm rounded-md px-2 py-1 shadow-md",children:l.jsx("span",{className:"font-bold text-green-600 text-sm",children:Q(t.estimatedPrice)})})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx(V0,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"Nessuna immagine"})]})}),t.estimatedPrice&&l.jsx("div",{className:"absolute bottom-2 right-2 bg-white/95 backdrop-blur-sm rounded-md px-2 py-1 shadow-md",children:l.jsx("span",{className:"font-bold text-green-600 text-sm",children:Q(t.estimatedPrice)})})]}),l.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-300",children:[l.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[t.link&&l.jsxs(qa,{children:[l.jsx(Ga,{asChild:!0,children:l.jsx(Ee,{variant:"secondary",size:"sm",className:"h-8 w-8 p-0 bg-white/90 hover:bg-white shadow-md",asChild:!0,children:l.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",children:l.jsx(bw,{className:"h-4 w-4 text-gray-500 dark:text-black-300"})})})}),l.jsx(Ho,{children:l.jsx("p",{children:"Vedi prodotto"})})]}),N&&l.jsxs(l.Fragment,{children:[l.jsxs(qa,{children:[l.jsx(Ga,{asChild:!0,children:l.jsx(Ee,{variant:"secondary",size:"sm",onClick:()=>n(t),className:"h-8 w-8 p-0 bg-white/90 hover:bg-white shadow-md",children:l.jsx(z0,{className:"h-4 w-4 text-gray-500 dark:text-black-300"})})}),l.jsx(Ho,{children:l.jsx("p",{children:"Modifica"})})]}),l.jsxs(Pg,{children:[l.jsxs(qa,{children:[l.jsx(Ga,{asChild:!0,children:l.jsx(Rg,{asChild:!0,children:l.jsx(Ee,{variant:"secondary",size:"sm",className:"h-8 w-8 p-0 bg-white/90 hover:bg-red-100 shadow-md text-red-600",children:l.jsx(Fp,{className:"h-4 w-4 text-gray-500 dark:text-black-300"})})})}),l.jsx(Ho,{children:l.jsx("p",{children:"Elimina"})})]}),l.jsxs(Yd,{children:[l.jsxs(Qd,{children:[l.jsx(Zd,{children:"Conferma eliminazione"}),l.jsxs(Jd,{children:['Sei sicuro di voler eliminare "',t.name||"questo elemento",'"? Questa azione non può essere annullata.']})]}),l.jsxs(Xd,{children:[l.jsx(th,{children:"Annulla"}),l.jsx(eh,{onClick:P,className:"bg-red-500 hover:bg-red-600",children:"Elimina"})]})]})]})]})]}),N&&l.jsx("div",{className:"absolute bottom-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:l.jsxs(qa,{children:[l.jsx(Ga,{asChild:!0,children:l.jsx(Ee,{variant:"secondary",size:"sm",onClick:A,disabled:m||!j,className:`
                        h-8 w-8 p-0 bg-white/90 shadow-md transition-colors
                        ${j?"hover:bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-400 cursor-not-allowed"}
                      `,children:m?l.jsx(fo,{className:"h-4 w-4 animate-spin"}):l.jsx(U9,{className:"h-4 w-4"})})}),l.jsx(Ho,{children:l.jsx("p",{children:j?m?"Ricerca in corso...":"Rigenera immagine":"Immagine bloccata"})})]})})]}),l.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[t.priority==="high"&&l.jsxs(Ce,{variant:"outline",className:"bg-red-500 text-white border-red-500 text-xs",children:[l.jsx(sP,{className:"h-2 w-2 mr-1"}),"Urgente"]}),k&&l.jsxs(Ce,{variant:"outline",className:"bg-blue-500 text-white border-blue-500 text-xs animate-pulse",children:[l.jsx(lP,{className:"h-2 w-2 mr-1"}),"AI"]}),R&&l.jsxs(Ce,{variant:"outline",className:"bg-purple-500 text-white border-purple-500 text-xs",children:[l.jsx(Sm,{className:"h-2 w-2 mr-1"}),"AI"]}),t.imageUpdated&&l.jsxs(Ce,{variant:"outline",className:"bg-orange-500 text-white border-orange-500 text-xs",children:[l.jsx(mo,{className:"h-2 w-2 mr-1"}),"IMG"]})]}),m&&l.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:l.jsxs("div",{className:"bg-white rounded-lg p-4 flex items-center gap-3 shadow-lg",children:[l.jsx(fo,{className:"h-5 w-5 animate-spin text-blue-600"}),l.jsx("span",{className:"text-sm font-medium",children:"Ricerca immagini..."})]})})]}),l.jsxs(Gt,{className:"p-4",children:[l.jsxs("div",{className:"mb-2",children:[t.brandName&&l.jsx("p",{className:"text-xs text-gray-500 mb-1 truncate",children:t.brandName}),C.isTruncated?l.jsxs(qa,{children:[l.jsx(Ga,{asChild:!0,children:l.jsx("h3",{className:`font-medium text-sm leading-tight cursor-help ${t.completed?"line-through":""}`,children:C.display})}),l.jsx(Ho,{children:l.jsx("p",{className:"max-w-xs",children:t.name})})]}):l.jsx("h3",{className:`font-medium text-sm leading-tight ${t.completed?"line-through":""}`,children:C.display})]}),l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs(Ce,{variant:"outline",className:"text-xs px-2 py-0.5",style:J?{backgroundColor:`${J.color}20`,color:J.color,borderColor:J.color}:void 0,children:[(J==null?void 0:J.icon)&&l.jsx("span",{className:"mr-1 text-xs",children:J.icon}),t.category]}),l.jsx("div",{className:"flex items-center gap-1",children:t.isPublic?l.jsx(Co,{className:"w-3 h-3 text-green-600"}):l.jsx(mo,{className:"w-3 h-3 text-orange-600"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[l.jsx(ia,{className:"h-2.5 w-2.5 mr-1 flex-shrink-0"}),l.jsx("span",{className:"truncate",children:t.createdBy})]}),l.jsxs("div",{className:"flex items-center ml-2 flex-shrink-0",children:[l.jsx(Ks,{className:"h-2.5 w-2.5 mr-1"}),l.jsx("span",{className:"truncate",children:I(t.createdAt)})]})]}),!t.completed&&l.jsx(Ee,{onClick:S,disabled:c,variant:"outline",size:"sm",className:"w-full h-8 bg-green-50 hover:bg-green-100 text-green-700 border-green-300 text-xs",children:c?"Segnando...":l.jsxs(l.Fragment,{children:[l.jsx(_c,{className:"mr-1 h-3 w-3"}),"Completato"]})})]})]}),l.jsx(CJ,{isOpen:b,onClose:()=>w(!1),onSelectImage:W,productName:t.name||"Prodotto",brandName:t.brandName,images:x,isLoading:m,error:y})]})})}const Mg=p.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Mg.displayName="Textarea";var Og="Popover",[SO,Zte]=Nr(Og,[So]),rh=So(),[kJ,Ro]=SO(Og),CO=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,a=rh(e),c=p.useRef(null),[u,h]=p.useState(!1),[f,m]=co({prop:r,defaultProp:s??!1,onChange:i,caller:Og});return l.jsx(Np,{...a,children:l.jsx(kJ,{scope:e,contentId:Yr(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>h(!0),[]),onCustomAnchorRemove:p.useCallback(()=>h(!1),[]),modal:o,children:n})})};CO.displayName=Og;var IO="PopoverAnchor",NJ=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ro(IO,n),i=rh(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=s;return p.useEffect(()=>(o(),()=>a()),[o,a]),l.jsx(Ad,{...i,...r,ref:e})});NJ.displayName=IO;var kO="PopoverTrigger",NO=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ro(kO,n),i=rh(n),o=$e(e,s.triggerRef),a=l.jsx(Ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":jO(s.open),...r,ref:o,onClick:ie(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:l.jsx(Ad,{asChild:!0,...i,children:a})});NO.displayName=kO;var wb="PopoverPortal",[AJ,PJ]=SO(wb,{forceMount:void 0}),AO=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=Ro(wb,e);return l.jsx(AJ,{scope:e,forceMount:n,children:l.jsx(jn,{present:n||i.open,children:l.jsx(Pd,{asChild:!0,container:s,children:r})})})};AO.displayName=wb;var uc="PopoverContent",PO=p.forwardRef((t,e)=>{const n=PJ(uc,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=Ro(uc,t.__scopePopover);return l.jsx(jn,{present:r||i.open,children:i.modal?l.jsx(DJ,{...s,ref:e}):l.jsx(jJ,{...s,ref:e})})});PO.displayName=uc;var RJ=oo("PopoverContent.RemoveScroll"),DJ=p.forwardRef((t,e)=>{const n=Ro(uc,t.__scopePopover),r=p.useRef(null),s=$e(e,r),i=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return Hp(o)},[]),l.jsx(Md,{as:RJ,allowPinchZoom:!0,children:l.jsx(RO,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ie(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ie(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,u=a.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ie(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),jJ=p.forwardRef((t,e)=>{const n=Ro(uc,t.__scopePopover),r=p.useRef(!1),s=p.useRef(!1);return l.jsx(RO,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),RO=p.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...f}=t,m=Ro(uc,n),v=rh(n);return Wp(),l.jsx(Dd,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(gc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:l.jsx(Ap,{"data-state":jO(m.open),role:"dialog",id:m.contentId,...v,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),DO="PopoverClose",MJ=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ro(DO,n);return l.jsx(Ne.button,{type:"button",...r,ref:e,onClick:ie(t.onClick,()=>s.onOpenChange(!1))})});MJ.displayName=DO;var OJ="PopoverArrow",LJ=p.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=rh(n);return l.jsx(Pp,{...s,...r,ref:e})});LJ.displayName=OJ;function jO(t){return t?"open":"closed"}var VJ=CO,FJ=NO,UJ=AO,MO=PO;const mx=VJ,px=FJ,ip=p.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>l.jsx(UJ,{children:l.jsx(MO,{ref:s,align:e,sideOffset:n,className:pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));ip.displayName=MO.displayName;const $J=Up("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),gx=p.forwardRef(({className:t,variant:e,...n},r)=>l.jsx("div",{ref:r,role:"alert",className:pe($J({variant:e}),t),...n}));gx.displayName="Alert";const zJ=p.forwardRef(({className:t,...e},n)=>l.jsx("h5",{ref:n,className:pe("mb-1 font-medium leading-none tracking-tight",t),...e}));zJ.displayName="AlertTitle";const vx=p.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:pe("text-sm [&_p]:leading-relaxed",t),...e}));vx.displayName="AlertDescription";const BJ=["🛒","📱","🏠","👕","🧴","🚗","📚","⚽","💊","🎮","🍕","🧽","💰","🎨","🔧","📦"];function WJ({isOpen:t,onClose:e,onAdd:n,editItem:r}){const{user:s}=Mn(),{toast:i}=As(),[o,a]=p.useState(!1),[c,u]=p.useState(!1),[h,f]=p.useState(!1),[m,v]=p.useState(!1),{data:b,add:w}=ei("categories"),{data:x}=ei("shopping_items"),_="https://europe-west1-familytasktracker-c2dfe.cloudfunctions.net/onShoppingItemCreated",y=Lp({defaultValues:{name:"",link:"",category:"",brandName:"",createdBy:(s==null?void 0:s.username)||"",completed:!1,priority:"medium",estimatedPrice:void 0,notes:"",isPublic:!0,useAI:!0}}),[T,N]=p.useState({name:"",icon:"🏷️",description:"",color:"#6B7280"}),j=p.useMemo(()=>{const S=y.watch("link");return!S||!S.startsWith("http")?!1:((x==null?void 0:x.filter(A=>r?A.id!==r.id:!0))||[]).some(A=>A.link===S)},[y.watch("link"),x,r]),M=p.useMemo(()=>{if(!j)return null;const S=x==null?void 0:x.find(P=>P.link===y.watch("link")&&(r?P.id!==r.id:!0));return S?`Questo URL è già stato aggiunto per "${S.name||"un altro prodotto"}"`:"Questo URL è già stato aggiunto"},[j,x,y.watch("link"),r]);p.useEffect(()=>{r?y.reset({name:r.name,link:r.link||"",category:r.category,brandName:r.brandName||"",createdBy:r.createdBy,completed:r.completed,priority:r.priority,estimatedPrice:r.estimatedPrice,notes:r.notes||"",isPublic:r.isPublic!==void 0?r.isPublic:!0,useAI:!1}):y.reset({name:"",link:"",category:"",brandName:"",createdBy:(s==null?void 0:s.username)||"",completed:!1,priority:"medium",estimatedPrice:void 0,notes:"",isPublic:!0,useAI:!0})},[r,y,s]);const C=async S=>{try{const P=await fetch(_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:S,updateFirestore:!0,collectionName:"shopping_items"})});if(!P.ok)throw new Error(`Errore HTTP: ${P.status}`);const A=await P.json();if(A.success&&A.data){const W=A.data.nameProduct||A.data.name||"il prodotto";i({title:"Prodotto aggiornato!",description:`Informazioni estratte automaticamente per "${W}"`})}else console.warn("Scraping parzialmente riuscito:",A),i({title:"Scraping completato",description:"Alcuni dati potrebbero non essere stati estratti completamente"})}catch(P){console.error("Errore durante lo scraping asincrono:",P),i({title:"Scraping fallito",description:"Non è stato possibile estrarre automaticamente i dati del prodotto",variant:"destructive"})}},k=S=>{S==="add_new"?f(!0):y.setValue("category",S)},R=async()=>{if(!T.name.trim()){i({title:"Errore",description:"Il nome della categoria è obbligatorio",variant:"destructive"});return}if(b!=null&&b.find(S=>S.name.toLowerCase()===T.name.toLowerCase())){i({title:"Errore",description:"Una categoria con questo nome esiste già",variant:"destructive"});return}u(!0);try{const S=ep.createCategory({id:`category_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:T.name.trim(),createdBy:(s==null?void 0:s.username)||"",createdAt:new Date,description:T.description||void 0,color:T.color,icon:T.icon,isDefault:!1,itemCount:0});await w(S),y.setValue("category",T.name),N({name:"",icon:"🏷️",description:"",color:"#6B7280"}),f(!1),i({title:"Categoria aggiunta",description:`La categoria "${T.name}" è stata aggiunta con successo`})}catch(S){S instanceof rt?i({title:"Errore di validazione categoria",description:S.errors.join(", "),variant:"destructive"}):i({title:"Errore",description:"Impossibile aggiungere la categoria",variant:"destructive"})}finally{u(!1)}},I=async S=>{if(!S.link||!S.link.startsWith("http")){S.link&&S.link.trim().length>0&&i({title:"URL richiesto",description:"L'URL del prodotto è obbligatorio e deve iniziare con http:// o https://",variant:"destructive"});return}if(j){i({title:"URL duplicato",description:M||"Questo URL è già stato aggiunto",variant:"destructive"});return}a(!0);try{let P;if(r){P=r;try{P.name=S.name||r.name,P.link=S.link,P.category=S.category||r.category,P.brandName=S.brandName||r.brandName,P.priority=S.priority,P.estimatedPrice=S.estimatedPrice,P.notes=S.notes,P.isPublic=S.isPublic,P.updatedAt=new Date,await n(P),i({title:"Elemento aggiornato",description:"Le modifiche sono state salvate con successo!"})}catch(A){if(A instanceof rt){i({title:"Errore di validazione",description:A.errors.join(", "),variant:"destructive"});return}throw A}}else try{const A=S.useAI?{lastScraped:new Date,scrapingMode:"pending",scrapingSuccess:!1,scrapingText:void 0,errors:void 0}:void 0;P=ep.createShoppingItem({id:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,category:S.category||"Articoli",createdBy:S.createdBy,link:S.link,name:S.name,brandName:S.brandName,completed:S.completed,priority:S.priority,estimatedPrice:S.estimatedPrice,notes:S.notes,isPublic:S.isPublic,createdAt:new Date,updatedAt:new Date,scrapingData:A}),await n(P),S.useAI?(C(S.link),i({title:"Elemento aggiunto!",description:"Analisi AI in corso..."})):i({title:"Elemento aggiunto!",description:"Elemento salvato senza analisi AI."})}catch(A){if(A instanceof rt){i({title:"Errore di validazione",description:A.errors.join(", "),variant:"destructive"});return}throw A}y.reset(),N({name:"",icon:"🏷️",description:"",color:"#6B7280"}),f(!1),e()}catch(P){console.error("Errore nel salvataggio:",P),i({title:"Errore",description:"Impossibile salvare l'elemento",variant:"destructive"})}finally{a(!1)}};return l.jsx(nh,{open:t,onOpenChange:e,children:l.jsxs(Nc,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Ac,{children:l.jsxs(Pc,{className:"flex items-center text-xl text-delft-blue",children:[l.jsx(Tm,{className:"mr-3 h-6 w-6"}),r?"Modifica Articolo":"Aggiungi Articolo"]})}),l.jsx($p,{...y,children:l.jsxs("form",{onSubmit:y.handleSubmit(I),className:"space-y-6",children:["  ",l.jsx(vt,{control:y.control,name:"link",render:({field:S})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(M9,{className:"mr-2 h-4 w-4"}),"URL Prodotto *"]}),l.jsx(yt,{children:l.jsx(Yt,{...S,type:"url",placeholder:"https://esempio.com/prodotto"})}),S.value&&l.jsx("p",{className:"text-xs text-blue-600",children:l.jsx("a",{href:S.value,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"🔗 Apri link"})}),l.jsx(Kt,{})]})}),!r&&l.jsx(vt,{control:y.control,name:"useAI",render:({field:S})=>l.jsxs(mt,{className:"flex flex-row items-center justify-between rounded-lg border p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30 dark:border-gray-700",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pt,{className:"text-base flex items-center text-gray-900 dark:text-gray-100",children:S.value?l.jsxs(l.Fragment,{children:[l.jsx(Sm,{className:"mr-2 h-4 w-4 text-blue-600 dark:text-blue-400"}),"Analisi AI Attiva"]}):l.jsxs(l.Fragment,{children:[l.jsx(Iw,{className:"mr-2 h-4 w-4 text-gray-600 dark:text-gray-400"}),"Inserimento Manuale"]})}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:S.value?"I dati del prodotto verranno estratti automaticamente":"Inserimento rapido senza analisi automatica"})]}),l.jsx(yt,{children:l.jsx(rr,{checked:S.value,onCheckedChange:S.onChange})})]})}),l.jsx(vt,{control:y.control,name:"name",render:({field:S})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue",children:["Nome Prodotto ",!r&&y.watch("useAI")?"(Opzionale)":""]}),l.jsx(yt,{children:l.jsx(Yt,{...S,placeholder:!r&&y.watch("useAI")?"Lascia vuoto per estrazione automatica":"Inserisci nome prodotto",maxLength:100,className:"text-base"})}),l.jsxs("p",{className:"text-xs text-gray-500",children:[(S.value||"").length,"/100 caratteri",!r&&y.watch("useAI")&&" • Se vuoto, verrà estratto automaticamente"]}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:y.control,name:"brandName",render:({field:S})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(V0,{className:"mr-2 h-4 w-4"}),"Brand ",!r&&y.watch("useAI")?"(Opzionale)":""]}),l.jsx(yt,{children:l.jsx(Yt,{...S,placeholder:!r&&y.watch("useAI")?"Lascia vuoto per estrazione automatica":"Inserisci il brand del prodotto",maxLength:50,className:"text-base"})}),l.jsxs("p",{className:"text-xs text-gray-500",children:[(S.value||"").length,"/50 caratteri",!r&&y.watch("useAI")&&" • Se vuoto, verrà estratto automaticamente"]}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:y.control,name:"category",render:({field:S})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(cP,{className:"mr-2 h-4 w-4"}),"Categoria ",!r&&y.watch("useAI")?"(Opzionale)":""]}),l.jsxs(ir,{onValueChange:k,value:S.value,children:[l.jsx(yt,{children:l.jsx(Wn,{children:l.jsx(or,{placeholder:!r&&y.watch("useAI")?"Lascia vuoto per estrazione automatica":"Seleziona categoria"})})}),l.jsxs(Hn,{children:[b==null?void 0:b.map(P=>l.jsx(Re,{value:P.name,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"mr-2",children:P.icon||"🏷️"}),l.jsx("span",{children:P.name}),l.jsx(Ce,{variant:"outline",className:"ml-2 text-xs",children:P.itemCount})]})},P.id)),l.jsx(Re,{value:"add_new",children:l.jsxs("div",{className:"flex items-center text-cambridge-blue",children:[l.jsx(Sr,{className:"mr-2 h-4 w-4"}),l.jsx("span",{children:"Aggiungi nuova categoria"})]})})]})]}),l.jsx(Kt,{})]})}),h&&l.jsxs("div",{className:"p-4 border border-cambridge-blue/20 rounded-lg bg-cambridge-blue/5",children:[l.jsxs("h4",{className:"font-medium text-delft-blue mb-3 flex items-center",children:[l.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Nuova Categoria"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Nome *"}),l.jsx(Yt,{value:T.name,onChange:S=>N(P=>({...P,name:S.target.value})),placeholder:"Nome categoria",maxLength:50})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Icona"}),l.jsxs(mx,{open:m,onOpenChange:v,children:[l.jsx(px,{asChild:!0,children:l.jsxs(Ee,{variant:"outline",className:"w-full justify-start",children:[l.jsx("span",{className:"mr-2",children:T.icon}),"Seleziona icona"]})}),l.jsx(ip,{className:"w-64",children:l.jsx("div",{className:"grid grid-cols-8 gap-2",children:BJ.map(S=>l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>{N(P=>({...P,icon:S})),v(!1)},className:"h-8 w-8 p-0",children:S},S))})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Descrizione"}),l.jsx(Yt,{value:T.description,onChange:S=>N(P=>({...P,description:S.target.value})),placeholder:"Descrizione opzionale",maxLength:100})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Colore"}),l.jsx(Yt,{type:"color",value:T.color,onChange:S=>N(P=>({...P,color:S.target.value})),className:"h-10"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[l.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>f(!1),disabled:c,children:"Annulla"}),l.jsxs(Ee,{size:"sm",onClick:R,disabled:c||!T.name.trim(),children:[c?l.jsx(fo,{className:"animate-spin h-4 w-4 mr-2"}):l.jsx(_c,{className:"h-4 w-4 mr-2"}),c?"Aggiungendo...":"Aggiungi"]})]})]}),l.jsx(vt,{control:y.control,name:"priority",render:({field:S})=>l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Priorità"}),l.jsxs(ir,{onValueChange:S.onChange,value:S.value,children:[l.jsx(yt,{children:l.jsx(Wn,{children:l.jsx(or,{placeholder:"Seleziona priorità"})})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"low",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),"Bassa"]})}),l.jsx(Re,{value:"medium",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),"Media"]})}),l.jsx(Re,{value:"high",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),"Alta"]})})]})]}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:y.control,name:"estimatedPrice",render:({field:S})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(oP,{className:"mr-2 h-4 w-4"}),"Prezzo Stimato (€) ",!r&&y.watch("useAI")?"(Opzionale)":""]}),l.jsx(yt,{children:l.jsx(Yt,{...S,type:"number",step:"0.01",min:"0",placeholder:!r&&y.watch("useAI")?"Lascia vuoto per estrazione automatica":"0.00",value:S.value||"",onChange:P=>S.onChange(P.target.value?parseFloat(P.target.value):void 0)})}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:y.control,name:"notes",render:({field:S})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(Vp,{className:"mr-2 h-4 w-4"}),"Note (Opzionale)"]}),l.jsx(yt,{children:l.jsx(Mg,{...S,placeholder:"Aggiungi note o dettagli aggiuntivi...",rows:3,maxLength:500})}),l.jsxs("p",{className:"text-xs text-gray-500",children:[(S.value||"").length,"/500 caratteri"]}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:y.control,name:"isPublic",render:({field:S})=>l.jsxs(mt,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pt,{className:"text-base flex items-center",children:S.value?l.jsxs(l.Fragment,{children:[l.jsx(Co,{className:"mr-2 h-4 w-4 text-green-600"}),"Articolo Pubblico"]}):l.jsxs(l.Fragment,{children:[l.jsx(mo,{className:"mr-2 h-4 w-4 text-orange-600"}),"Articolo Privato"]})}),l.jsx("p",{className:"text-xs text-gray-600",children:S.value?"Questo articolo sarà visibile a tutti i membri della famiglia":"Questo articolo sarà visibile solo a te"})]}),l.jsx(yt,{children:l.jsx(rr,{checked:S.value,onCheckedChange:S.onChange})})]})}),j&&l.jsxs(gx,{className:"border-red-200 bg-red-50",children:[l.jsx(bm,{className:"h-4 w-4 text-red-600"}),l.jsxs(vx,{className:"text-red-800",children:[l.jsx("strong",{children:"URL duplicato!"})," ",M]})]}),!y.watch("link")&&l.jsxs(gx,{className:"border-orange-200 bg-orange-50",children:[l.jsx(bm,{className:"h-4 w-4 text-orange-600"}),l.jsxs(vx,{className:"text-orange-800",children:["L'URL del prodotto è ",l.jsx("strong",{children:"obbligatorio"}),". Inserisci un link valido per procedere."]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(Ee,{variant:"secondary",onClick:()=>{e(),y.reset(),N({name:"",icon:"🏷️",description:"",color:"#6B7280"}),f(!1)},disabled:o,children:"Annulla"}),l.jsxs(Ee,{type:"submit",disabled:o||!y.watch("link")||!y.watch("link").startsWith("http")||j,className:`min-w-[140px] ${!r&&y.watch("useAI")?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700":""}`,children:[o?l.jsx(fo,{className:"animate-spin h-5 w-5 mr-2"}):!r&&y.watch("useAI")?l.jsx(Sm,{className:"h-5 w-5 mr-2"}):l.jsx(Iw,{className:"h-5 w-5 mr-2"}),o?r?"Aggiornando...":"Salvando...":r?"Aggiorna":y.watch("useAI")?"Salva con AI":"Salva"]})]})]})})]})})}const Ha={viewMode:"images",showImages:!0,compactMode:!1,defaultCategory:"all",defaultPriority:"all",showCompleted:!1,theme:"light",language:"it",itemsPerPage:20,enableNotifications:!0,emailNotifications:!1},OO=p.createContext(void 0);function HJ({children:t}){const{user:e}=Mn(),[n,r]=p.useState(Ha),[s,i]=p.useState(!0),o=()=>e!=null&&e.username?`familyTaskTracker_preferences_${e.username}`:"familyTaskTracker_preferences_guest",a=()=>{try{const v=o(),b=sessionStorage.getItem(v);if(b){const w=JSON.parse(b),x={...Ha,...w};r(x)}else r(Ha)}catch(v){console.error("❌ Errore nel caricamento delle preferenze:",v),r(Ha)}finally{i(!1)}},c=v=>{try{const b=o();sessionStorage.setItem(b,JSON.stringify(v))}catch(b){console.error("❌ Errore nel salvataggio delle preferenze:",b)}},u=(v,b)=>{const w={...n,[v]:b};r(w),c(w)},h=v=>{const b={...n,...v};r(b),c(b)},f=()=>{r(Ha),c(Ha)};p.useEffect(()=>{e&&(i(!0),a())},[e==null?void 0:e.username]),p.useEffect(()=>{const v=sessionStorage.getItem("theme");v&&v!==n.theme&&u("theme",v)},[]);const m={preferences:n,updatePreference:u,updatePreferences:h,resetPreferences:f,isLoading:s};return l.jsx(OO.Provider,{value:m,children:t})}function LO(){const t=p.useContext(OO);if(t===void 0)throw new Error("useUserPreferences must be used within a UserPreferencesProvider");return t}function qJ(){const{user:t}=Mn(),{toast:e}=As(),{preferences:n,updatePreference:r}=LO(),s=n.viewMode,i=te=>{r("viewMode",te)},[o,a]=p.useState(!1),[c,u]=p.useState(null),[h,f]=p.useState(""),[m,v]=p.useState(n.defaultCategory),[b,w]=p.useState(n.defaultPriority),[x,_]=p.useState("all"),[y,T]=p.useState(n.showCompleted),[N,j]=p.useState([]);Le.useEffect(()=>{v(n.defaultCategory),w(n.defaultPriority),T(n.showCompleted)},[n.defaultCategory,n.defaultPriority,n.showCompleted]);const{data:M,loading:C,add:k,update:R,remove:I}=ei("shopping_items"),{data:S}=ei("categories"),P=Le.useCallback(te=>{j(we=>we.map(le=>le.id===te.id?te:le))},[]);Le.useEffect(()=>{j(M||[])},[M]);const{filteredItems:A,visibleItems:W}=p.useMemo(()=>{if(!N)return{filteredItems:[],visibleItems:[]};const te=N.filter(le=>le.isPublic||le.createdBy===(t==null?void 0:t.username)||(t==null?void 0:t.role)==="admin");return{filteredItems:te.filter(le=>{var Zn,wr,Do;const Ve=!h||((Zn=le.name)==null?void 0:Zn.toLowerCase().includes(h.toLowerCase()))||((wr=le.brandName)==null?void 0:wr.toLowerCase().includes(h.toLowerCase()))||((Do=le.notes)==null?void 0:Do.toLowerCase().includes(h.toLowerCase())),ye=m==="all"||le.category===m,lt=b==="all"||le.priority===b,Vt=x==="all"||x==="public"&&le.isPublic||x==="private"&&!le.isPublic,Ln=y?le.completed:!le.completed;return Ve&&ye&&lt&&Vt&&Ln}),visibleItems:te}},[N,h,m,b,x,y,t]),Q=p.useMemo(()=>{if(!W||!A)return{totalPending:0,totalCompleted:0,totalVisible:0,publicItems:0,privateItems:0,myItems:0,highPriority:0,totalCost:0,pending:0,completed:0,pendingItems:[],completedItems:[]};const te=W.filter(ye=>!ye.completed),we=W.filter(ye=>ye.completed),le=A.filter(ye=>!ye.completed),Ve=A.filter(ye=>ye.completed);return{totalPending:te.length,totalCompleted:we.length,totalVisible:W.length,publicItems:W.filter(ye=>ye.isPublic).length,privateItems:W.filter(ye=>!ye.isPublic).length,myItems:W.filter(ye=>ye.createdBy===(t==null?void 0:t.username)).length,highPriority:te.filter(ye=>ye.priority==="high").length,totalCost:te.reduce((ye,lt)=>ye+(lt.estimatedPrice||0),0),pending:le.length,completed:Ve.length,pendingItems:le,completedItems:Ve}},[W,A,t]),J=()=>{f(""),v("all"),w("all"),_("all"),T(!1),r("defaultCategory","all"),r("defaultPriority","all"),r("showCompleted",!1)},H=[h.length>0,m!=="all",b!=="all",x!=="all",y].filter(Boolean).length,O=te=>{u(te||null),a(!0)},F=()=>{a(!1),u(null)},X=async te=>{try{c?(await R(c.id,te),e({title:"Elemento aggiornato",description:"Elemento aggiornato con successo!"})):(await k(te),e({title:"Elemento aggiunto",description:"Nuovo elemento aggiunto alla lista!"})),F()}catch(we){console.error("Errore nel salvataggio:",we),e({title:"Errore",description:c?"Impossibile aggiornare l'elemento":"Impossibile aggiungere l'elemento",variant:"destructive"})}},fe=async te=>{try{await I(te),e({title:"Elemento eliminato",description:"Elemento eliminato con successo!"})}catch(we){console.error("Errore nell'eliminazione:",we),e({title:"Errore",description:"Impossibile eliminare l'elemento",variant:"destructive"})}},G=async te=>{const we=N==null?void 0:N.find(le=>le.id===te);if(we)try{const le=Object.assign(Object.create(Object.getPrototypeOf(we)),we,{completed:!we.completed,completedBy:we.completed||t==null?void 0:t.username,completedAt:we.completed?void 0:new Date,updatedAt:new Date});await R(te,le),P(le),e({title:le.completed?"Elemento completato":"Elemento ripristinato",description:le.completed?"Elemento segnato come completato!":"Elemento ripristinato nella lista!"})}catch(le){console.error("Errore nel toggle complete:",le),e({title:"Errore",description:"Impossibile aggiornare l'elemento",variant:"destructive"})}},ue=()=>s==="images"?"grid gap-4 grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5":"grid gap-4 md:grid-cols-2 lg:grid-cols-3",ze=te=>{const we={item:te,categories:S||[],onEdit:()=>O(te),onDelete:fe,onComplete:G,onUpdate:P};return s==="images"?l.jsx(IJ,{...we},te.id):l.jsx(aJ,{...we},te.id)},tt=te=>{v(te),r("defaultCategory",te)},Oe=te=>{w(te),r("defaultPriority",te)},he=te=>{T(te),r("showCompleted",te)};return C?l.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:l.jsxs("div",{className:"flex justify-center items-center py-20",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cambridge-blue"}),l.jsx("span",{className:"ml-3 text-gray-600",children:"Caricamento lista della spesa..."})]})}):l.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-8",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(Tm,{className:"h-8 w-8 text-cambridge-blue"}),l.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"Lista della Spesa"})]}),l.jsxs("div",{className:"flex flex-wrap gap-4",children:[l.jsxs(Ce,{variant:"outline",className:"text-cambridge-blue border-cambridge-blue",children:[Q.totalVisible," ",Q.totalVisible===1?"articolo":"articoli"]}),l.jsxs(Ce,{variant:"outline",className:"text-cambridge-blue border-cambridge-blue",children:[Q.totalPending," da comprare"]}),l.jsxs(Ce,{variant:"outline",className:"text-green-600 border-green-300",children:[Q.totalCompleted," completati"]}),l.jsxs(Ce,{variant:"outline",className:"text-blue-600 border-blue-300",children:[l.jsx(Co,{className:"w-3 h-3 mr-1"}),Q.publicItems," pubblici"]}),l.jsxs(Ce,{variant:"outline",className:"text-orange-600 border-orange-300",children:[l.jsx(mo,{className:"w-3 h-3 mr-1"}),Q.privateItems," privati"]}),l.jsxs(Ce,{variant:"outline",className:"text-purple-600 border-purple-300",children:[Q.myItems," miei"]}),Q.highPriority>0&&l.jsxs(Ce,{variant:"destructive",className:"bg-red-100 text-red-700",children:[l.jsx($9,{className:"w-3 h-3 mr-1"}),Q.highPriority," urgenti"]}),Q.totalCost>0&&l.jsxs(Ce,{variant:"outline",className:"text-green-600 border-green-300",children:[l.jsx(oP,{className:"w-3 h-3 mr-1"}),"€",Q.totalCost.toFixed(2)," stimati"]}),l.jsxs(Ce,{variant:"outline",className:"text-indigo-600 border-indigo-300 bg-indigo-50",children:["💾 ",s==="images"?"Immagini":"Compatta"," (salvata)"]})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg",children:[l.jsx(O9,{className:`h-4 w-4 ${s==="compact"?"text-cambridge-blue":"text-gray-400"}`}),l.jsx(rr,{id:"view-mode",checked:s==="images",onCheckedChange:te=>i(te?"images":"compact"),className:"data-[state=checked]:bg-cambridge-blue"}),l.jsx(Ew,{className:`h-4 w-4 ${s==="images"?"text-cambridge-blue":"text-gray-400"}`}),l.jsx(Vn,{htmlFor:"view-mode",className:"text-sm font-medium cursor-pointer",children:s==="images"?"Vista Immagini":"Vista Compatta"})]}),l.jsxs(Ee,{onClick:()=>O(),className:"bg-cambridge-blue hover:bg-cambridge-blue/90 text-white",children:[l.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Aggiungi Articolo"]})]})]}),l.jsx(Ot,{className:"mb-8",children:l.jsx(Gt,{className:"p-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"relative",children:[l.jsx($0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),l.jsx(Yt,{placeholder:"Cerca articoli, brand, note...",value:h,onChange:te=>f(te.target.value),className:"pl-10"})]})}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[l.jsxs(ir,{value:m,onValueChange:tt,children:[l.jsx(Wn,{className:"w-[140px]",children:l.jsx(or,{placeholder:"Categoria"})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"all",children:"Tutte"}),S==null?void 0:S.map(te=>l.jsxs(Re,{value:te.name,children:[te.icon," ",te.name]},te.id))]})]}),l.jsxs(ir,{value:b,onValueChange:Oe,children:[l.jsx(Wn,{className:"w-[120px]",children:l.jsx(or,{placeholder:"Priorità"})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"all",children:"Tutte"}),l.jsx(Re,{value:"high",children:"Alta"}),l.jsx(Re,{value:"medium",children:"Media"}),l.jsx(Re,{value:"low",children:"Bassa"})]})]}),l.jsxs(ir,{value:x,onValueChange:_,children:[l.jsx(Wn,{className:"w-[120px]",children:l.jsx(or,{placeholder:"Visibilità"})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"all",children:"Tutte"}),l.jsx(Re,{value:"public",children:"Pubbliche"}),l.jsx(Re,{value:"private",children:"Private"})]})]}),l.jsxs(Ee,{variant:y?"default":"outline",onClick:()=>he(!y),size:"sm",children:[y?"✅":"⬜"," Completati"]}),H>0&&l.jsxs(Ee,{variant:"ghost",onClick:J,size:"sm",className:"text-gray-500",children:["Pulisci (",H,")"]})]})]})})}),l.jsxs("div",{className:"space-y-8",children:[Q.pendingItems.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-delft-blue",children:"Da Comprare"}),l.jsx(Ce,{variant:"secondary",children:Q.pending})]}),l.jsx("div",{className:ue(),children:Q.pendingItems.sort((te,we)=>{const le=new Date(te.createdAt).getTime(),ye=new Date(we.createdAt).getTime()-le;if(ye===0){const lt={high:3,medium:2,low:1};return lt[we.priority]-lt[te.priority]}return ye}).map(ze)})]}),y&&Q.completedItems.length>0&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-600",children:"Completati"}),l.jsx(Ce,{variant:"outline",className:"text-green-600",children:Q.completed})]}),l.jsx("div",{className:`${ue()} opacity-75`,children:Q.completedItems.sort((te,we)=>{const le=te.completedAt?new Date(te.completedAt).getTime():0;return(we.completedAt?new Date(we.completedAt).getTime():0)-le}).map(ze)})]}),Q.pendingItems.length===0&&Q.completedItems.length===0&&l.jsx(Ot,{className:"text-center py-16",children:l.jsxs(Gt,{children:[l.jsx(Tm,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),l.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Nessun elemento trovato"}),l.jsx("p",{className:"text-gray-500 mb-4",children:H>0?"Prova a modificare i filtri di ricerca.":"Inizia aggiungendo il tuo primo articolo alla lista della spesa."}),H>0?l.jsx(Ee,{onClick:J,variant:"outline",children:"Pulisci Filtri"}):l.jsxs(Ee,{onClick:()=>O(),children:[l.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Aggiungi Primo Articolo"]})]})})]}),l.jsx(WJ,{isOpen:o,onClose:F,onAdd:X,editItem:c})]})}function GJ({note:t,onEdit:e,onDelete:n}){const{user:r}=Mn(),{toast:s}=As(),[i,o]=p.useState(!1),a=(r==null?void 0:r.username)===t.createdBy||(r==null?void 0:r.role)==="admin",c=async()=>{o(!0);try{await n(t.id),s({title:"Nota eliminata",description:"La nota è stata eliminata con successo!"})}catch{s({title:"Errore",description:"Impossibile eliminare la nota",variant:"destructive"})}finally{o(!1)}},u=(f,m=120)=>f.length<=m?f:f.substring(0,m)+"...",h=()=>t.isPublic?l.jsxs(Ce,{className:"bg-green-100 text-green-700 border-green-200",children:[l.jsx(Co,{className:"mr-1 h-3 w-3"}),"Pubblica"]}):l.jsxs(Ce,{className:"bg-orange-100 text-orange-700 border-orange-200",children:[l.jsx(mo,{className:"mr-1 h-3 w-3"}),"Privata"]});return l.jsx(Ot,{className:"hover:shadow-md transition-all duration-200 border-l-4",style:{borderLeftColor:t.color||"#F3F4F6",backgroundColor:t.color?`${t.color}08`:"white"},children:l.jsxs(Gt,{className:"p-6",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.isPinned&&l.jsx(Cw,{className:"h-4 w-4 text-burnt-sienna flex-shrink-0"}),l.jsx("h3",{className:"font-semibold text-delft-blue truncate",children:t.title})]}),h()]}),a&&l.jsxs("div",{className:"flex space-x-1 ml-2",children:[l.jsx(Ee,{variant:"ghost",size:"sm",onClick:()=>e(t),className:"h-8 w-8 p-0 text-gray-400 hover:text-cambridge-blue",children:l.jsx(z0,{className:"h-4 w-4"})}),l.jsxs(Pg,{children:[l.jsx(Rg,{asChild:!0,children:l.jsx(Ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-gray-400 hover:text-red-500",disabled:i,children:l.jsx(Fp,{className:"h-4 w-4"})})}),l.jsxs(Yd,{children:[l.jsxs(Qd,{children:[l.jsx(Zd,{children:"Conferma Eliminazione"}),l.jsxs(Jd,{children:['Sei sicuro di voler eliminare la nota "',t.title,'"? Questa azione non può essere annullata.']})]}),l.jsxs(Xd,{children:[l.jsx(th,{children:"Annulla"}),l.jsx(eh,{onClick:c,className:"bg-red-500 hover:bg-red-600",children:"Elimina"})]})]})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:u(t.content)}),t.tags&&t.tags.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags.slice(0,3).map((f,m)=>l.jsxs(Ce,{variant:"outline",className:"text-xs px-2 py-0.5 bg-gray-50",children:["#",f]},m)),t.tags.length>3&&l.jsxs(Ce,{variant:"outline",className:"text-xs px-2 py-0.5 bg-gray-50",children:["+",t.tags.length-3]})]}),l.jsxs("div",{className:"space-y-2 text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ia,{className:"mr-2 h-3 w-3"}),"Creata da ",t.createdBy]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ks,{className:"mr-2 h-3 w-3"}),ib(new Date(t.updatedAt),{addSuffix:!0,locale:Xs})]})]})]})]})})}function KJ({isOpen:t,onClose:e,onSave:n,editNote:r}){const{user:s}=Mn(),{toast:i}=As(),[o,a]=p.useState(!1),[c,u]=p.useState(""),[h,f]=p.useState([]),m=[{name:"Predefinito",value:"#F3F4F6",textColor:"#111827"},{name:"Giallo",value:"#FEF3C7",textColor:"#92400E"},{name:"Verde",value:"#D1FAE5",textColor:"#065F46"},{name:"Azzurro",value:"#DBEAFE",textColor:"#1E40AF"},{name:"Viola",value:"#E9D5FF",textColor:"#7C2D12"},{name:"Rosa",value:"#FCE7F3",textColor:"#BE185D"},{name:"Arancione",value:"#FED7AA",textColor:"#C2410C"},{name:"Rosso",value:"#FECACA",textColor:"#DC2626"}],v=Lp({defaultValues:{title:"",content:"",isPublic:!1,createdBy:(s==null?void 0:s.username)||"",tags:[],isPinned:!1,color:"#F3F4F6"}});p.useEffect(()=>{t&&(r?(v.reset({title:r.title,content:r.content,isPublic:r.isPublic,createdBy:r.createdBy,tags:r.tags,isPinned:r.isPinned,color:r.color}),f(r.tags)):(v.reset({title:"",content:"",isPublic:!1,createdBy:(s==null?void 0:s.username)||"",tags:[],isPinned:!1,color:"#F3F4F6"}),f([])),u(""))},[r,v,s,t]);const b=()=>{e(),setTimeout(()=>{v.reset(),f([]),u("")},150)},w=async N=>{if(!N.title.trim()){i({title:"Errore",description:"Il titolo è obbligatorio",variant:"destructive"});return}if(!N.content.trim()){i({title:"Errore",description:"Il contenuto è obbligatorio",variant:"destructive"});return}a(!0);try{const j={...N,title:N.title.trim(),content:N.content.trim(),tags:h.filter(C=>C.trim()!=="")};let M;if(r){M=r;try{M.update(j.title,j.content),M.isPublic=j.isPublic,M.color=j.color,M.isPinned=j.isPinned,M.tags=[],j.tags.forEach(C=>M.addTag(C.trim()))}catch(C){if(C instanceof rt){i({title:"Errore di Validazione",description:C.errors.join(", "),variant:"destructive"});return}throw C}}else try{M=ep.createNote({id:`note_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:j.title,content:j.content,isPublic:j.isPublic,createdBy:j.createdBy,tags:j.tags,isPinned:j.isPinned,color:j.color})}catch(C){if(C instanceof rt){i({title:"Errore di Validazione",description:C.errors.join(", "),variant:"destructive"});return}throw C}await n(M),i({title:r?"Nota aggiornata":"Nota creata",description:r?"La nota è stata aggiornata con successo!":"La nota è stata creata con successo!"}),b()}catch(j){console.error("Errore nel salvare la nota:",j),i({title:"Errore",description:r?"Impossibile aggiornare la nota":"Impossibile creare la nota",variant:"destructive"})}finally{a(!1)}},x=()=>{const N=c.trim();N&&!h.includes(N)&&h.length<10&&(f([...h,N]),u(""))},_=N=>{f(h.filter(j=>j!==N))},y=N=>{N.key==="Enter"?(N.preventDefault(),x()):N.key==="Backspace"&&c===""&&h.length>0&&_(h[h.length-1])},T=()=>{const N=m.find(j=>j.value===v.watch("color"));return(N==null?void 0:N.name)||"Predefinito"};return l.jsx(nh,{open:t,onOpenChange:b,children:l.jsxs(Nc,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Ac,{children:l.jsx(Pc,{className:"text-2xl font-bold text-delft-blue flex items-center",children:r?l.jsxs(l.Fragment,{children:[l.jsx(Cw,{className:"mr-3 h-6 w-6 text-burnt-sienna"}),"Modifica Nota"]}):l.jsxs(l.Fragment,{children:[l.jsx(Sr,{className:"mr-3 h-6 w-6 text-burnt-sienna"}),"Crea Nuova Nota"]})})}),l.jsx($p,{...v,children:l.jsxs("form",{onSubmit:v.handleSubmit(w),className:"space-y-6",children:[l.jsx(vt,{control:v.control,name:"title",render:({field:N})=>{var j;return l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Titolo della Nota *"}),l.jsx(yt,{children:l.jsx(Yt,{...N,placeholder:"Inserisci un titolo significativo...",maxLength:100,className:"text-lg"})}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((j=N.value)==null?void 0:j.length)||0,"/100 caratteri"]}),l.jsx(Kt,{})]})}}),l.jsx(vt,{control:v.control,name:"content",render:({field:N})=>{var j;return l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Contenuto *"}),l.jsx(yt,{children:l.jsx(Mg,{...N,placeholder:"Scrivi qui il contenuto della tua nota...",rows:5,className:"resize-y min-h-[100px]"})}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((j=N.value)==null?void 0:j.length)||0," caratteri"]}),l.jsx(Kt,{})]})}}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(cP,{className:"mr-2 h-4 w-4"}),"Tag ",h.length>0&&l.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",h.length,"/10)"]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Yt,{placeholder:"Aggiungi un tag e premi Invio...",value:c,onChange:N=>u(N.target.value),onKeyDown:y,className:"flex-1",maxLength:20,disabled:h.length>=10}),l.jsx(Ee,{type:"button",variant:"outline",onClick:x,disabled:!c.trim()||h.length>=10,children:l.jsx(Sr,{className:"h-4 w-4"})})]}),h.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((N,j)=>l.jsxs(Ce,{variant:"secondary",className:"cursor-pointer hover:bg-red-50 transition-colors",children:["#",N,l.jsx("button",{type:"button",onClick:()=>_(N),className:"ml-2 text-gray-500 hover:text-red-500 transition-colors",children:l.jsx(B0,{className:"h-3 w-3"})})]},j))})]}),l.jsx(vt,{control:v.control,name:"color",render:({field:N})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(F9,{className:"mr-2 h-4 w-4"}),"Colore Nota: ",l.jsx("span",{className:"ml-2 font-normal text-gray-600",children:T()})]}),l.jsx("div",{className:"grid grid-cols-4 gap-3",children:m.map(j=>l.jsx("button",{type:"button",onClick:()=>N.onChange(j.value),className:`p-4 rounded-xl border-2 text-sm font-medium transition-all hover:scale-105 ${N.value===j.value?"border-burnt-sienna ring-2 ring-burnt-sienna/30 shadow-md":"border-gray-200 hover:border-gray-300 hover:shadow-sm"}`,style:{backgroundColor:j.value,color:j.textColor},children:j.name},j.value))})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(vt,{control:v.control,name:"isPinned",render:({field:N})=>l.jsxs(mt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:[l.jsx(Cw,{className:"mr-2 h-4 w-4"}),"Fissa in Alto"]}),l.jsx("p",{className:"text-xs text-gray-600",children:"Appare sempre in cima"})]}),l.jsx(yt,{children:l.jsx(rr,{checked:N.value,onCheckedChange:N.onChange})})]})}),l.jsx(vt,{control:v.control,name:"isPublic",render:({field:N})=>l.jsxs(mt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:N.value?l.jsxs(l.Fragment,{children:[l.jsx(Co,{className:"mr-2 h-4 w-4 text-green-600"}),"Pubblica"]}):l.jsxs(l.Fragment,{children:[l.jsx(mo,{className:"mr-2 h-4 w-4 text-orange-600"}),"Privata"]})}),l.jsx("p",{className:"text-xs text-gray-600",children:N.value?"Visibile a tutti":"Solo per te"})]}),l.jsx(yt,{children:l.jsx(rr,{checked:N.value,onCheckedChange:N.onChange})})]})})]}),l.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[l.jsx(Ee,{type:"button",variant:"outline",className:"flex-1",onClick:b,disabled:o,children:"Annulla"}),l.jsxs(Ee,{type:"submit",disabled:o,className:"flex-1 bg-burnt-sienna hover:bg-burnt-sienna/90 text-white font-semibold",children:[o&&l.jsx(fo,{className:"mr-2 h-4 w-4 animate-spin"}),r?"Aggiorna Nota":"Crea Nota"]})]})]})})]})})}function YJ(){const{user:t}=Mn(),[e,n]=p.useState(!1),[r,s]=p.useState(null),[i,o]=p.useState(""),[a,c]=p.useState("all"),[u,h]=p.useState("newest"),{data:f,loading:m,add:v,update:b,remove:w}=ei("notes"),x=p.useMemo(()=>{const M=f.length,C=f.filter(I=>I.isPublic).length,k=f.filter(I=>!I.isPublic).length,R=f.filter(I=>I.createdBy===(t==null?void 0:t.username)).length;return{total:M,publicNotes:C,privateNotes:k,myNotes:R}},[f,t]),_=p.useMemo(()=>{let M=f.filter(C=>{if(!(C.isPublic||C.createdBy===(t==null?void 0:t.username)||(t==null?void 0:t.role)==="admin"))return!1;if(i){const R=i.toLowerCase(),I=C.title.toLowerCase().includes(R),S=C.content.toLowerCase().includes(R),P=C.tags.some(A=>A.toLowerCase().includes(R));if(!I&&!S&&!P)return!1}return!(a==="public"&&!C.isPublic||a==="private"&&C.isPublic||a==="mine"&&C.createdBy!==(t==null?void 0:t.username))});switch(u){case"oldest":M.sort((C,k)=>new Date(C.createdAt).getTime()-new Date(k.createdAt).getTime());break;case"title":M.sort((C,k)=>C.title.localeCompare(k.title));break;case"updated":M.sort((C,k)=>new Date(k.updatedAt).getTime()-new Date(C.updatedAt).getTime());break;default:M.sort((C,k)=>new Date(k.createdAt).getTime()-new Date(C.createdAt).getTime())}return M},[f,t,i,a,u]),y=async M=>{r?(await b(r.id,M),s(null)):await v(M),n(!1)},T=M=>{s(M),n(!0)},N=async M=>{await w(M)},j=()=>{n(!1),s(null)};return m?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-burnt-sienna"}),l.jsx("span",{className:"ml-3 text-delft-blue font-medium",children:"Loading..."})]}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(Vp,{className:"h-8 w-8 text-cambridge-blue"}),l.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"Note"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(Ce,{variant:"secondary",className:"bg-cambridge-blue/10 text-cambridge-blue border-cambridge-blue/20",children:[x.total," ",x.total===1?"nota":"note"]}),l.jsxs(Ce,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[x.publicNotes," ",x.publicNotes===1?"pubblica":"pubbliche"]}),l.jsxs(Ce,{variant:"secondary",className:"bg-orange-100 text-orange-700 border-orange-200",children:[x.privateNotes," ",x.privateNotes===1?"privata":"private"]}),(t==null?void 0:t.role)==="admin"&&l.jsxs(Ce,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[x.myNotes," ",x.myNotes===1?"mia":"mie"]})]})]}),l.jsxs(Ee,{onClick:()=>n(!0),className:"bg-cambridge-blue hover:bg-cambridge-blue/90 text-white dark:text-black shadow-lg",children:[l.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Nuova Nota"]})]})}),l.jsx(Ot,{className:"mb-6",children:l.jsx(Gt,{className:"p-4",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-center",children:[l.jsx("div",{className:"w-full md:flex-1 max-w-2xl",children:l.jsxs("div",{className:"relative",children:[l.jsx($0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),l.jsx(Yt,{placeholder:"Cerca titoli, contenuto o tag...",value:i,onChange:M=>o(M.target.value),className:"pl-10"})]})}),l.jsxs("div",{className:"flex gap-3 w-full md:w-auto",children:[l.jsxs(ir,{value:a,onValueChange:c,children:[l.jsx(Wn,{className:"w-full md:w-40",children:l.jsx(or,{})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"all",children:"Tutte le Note"}),l.jsx(Re,{value:"public",children:"Pubbliche"}),l.jsx(Re,{value:"private",children:"Private"}),l.jsx(Re,{value:"mine",children:"Le Mie"})]})]}),l.jsxs(ir,{value:u,onValueChange:h,children:[l.jsx(Wn,{className:"w-full md:w-40",children:l.jsx(or,{})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"newest",children:"Più Recenti"}),l.jsx(Re,{value:"oldest",children:"Più Vecchie"}),l.jsx(Re,{value:"title",children:"Titolo A-Z"}),l.jsx(Re,{value:"updated",children:"Aggiornate"})]})]})]})]})})}),_.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.sort((M,C)=>Number(C.isPinned)-Number(M.isPinned)).map(M=>l.jsx(GJ,{note:M,onEdit:T,onDelete:N},M.id))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Sr,{className:"h-12 w-12 text-gray-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-delft-blue mb-2",children:"Nessuna nota trovata"}),l.jsx("p",{className:"text-gray-600 mb-6",children:i||a!=="all"?"Prova ad aggiustare i filtri di ricerca.":"Crea la tua prima nota per condividere pensieri e informazioni importanti."}),l.jsxs(Ee,{onClick:()=>n(!0),className:"bg-burnt-sienna hover:bg-burnt-sienna/90 text-white font-semibold",children:[l.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Crea Prima Nota"]})]}),l.jsx(KJ,{isOpen:e,onClose:j,onSave:y,editNote:r})]})}var Se=function(){return Se=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Se.apply(this,arguments)};function QJ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function VO(t,e,n){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function sh(t){return t.mode==="multiple"}function ih(t){return t.mode==="range"}function Lg(t){return t.mode==="single"}var XJ={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ZJ(t,e){return $t(t,"LLLL y",e)}function JJ(t,e){return $t(t,"d",e)}function eee(t,e){return $t(t,"LLLL",e)}function tee(t){return"".concat(t)}function nee(t,e){return $t(t,"cccccc",e)}function ree(t,e){return $t(t,"yyyy",e)}var see=Object.freeze({__proto__:null,formatCaption:ZJ,formatDay:JJ,formatMonthCaption:eee,formatWeekNumber:tee,formatWeekdayName:nee,formatYearCaption:ree}),iee=function(t,e,n){return $t(t,"do MMMM (EEEE)",n)},oee=function(){return"Month: "},aee=function(){return"Go to next month"},lee=function(){return"Go to previous month"},cee=function(t,e){return $t(t,"cccc",e)},uee=function(t){return"Week n. ".concat(t)},dee=function(){return"Year: "},hee=Object.freeze({__proto__:null,labelDay:iee,labelMonthDropdown:oee,labelNext:aee,labelPrevious:lee,labelWeekNumber:uee,labelWeekday:cee,labelYearDropdown:dee});function fee(){var t="buttons",e=XJ,n=sb,r={},s={},i=1,o={},a=new Date;return{captionLayout:t,classNames:e,formatters:see,labels:hee,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:o,today:a,mode:"default"}}function mee(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,i=t.fromDate,o=t.toDate;return r?i=Pn(r):e&&(i=new Date(e,0,1)),s?o=Kd(s):n&&(o=new Date(n,11,31)),{fromDate:i?oc(i):void 0,toDate:o?oc(o):void 0}}var FO=p.createContext(void 0);function pee(t){var e,n=t.initialProps,r=fee(),s=mee(n),i=s.fromDate,o=s.toDate,a=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;a!=="buttons"&&(!i||!o)&&(a="buttons");var c;(Lg(n)||sh(n)||ih(n))&&(c=n.onSelect);var u=Se(Se(Se({},r),n),{captionLayout:a,classNames:Se(Se({},r.classNames),n.classNames),components:Se({},n.components),formatters:Se(Se({},r.formatters),n.formatters),fromDate:i,labels:Se(Se({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Se(Se({},r.modifiers),n.modifiers),modifiersClassNames:Se(Se({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Se(Se({},r.styles),n.styles),toDate:o});return l.jsx(FO.Provider,{value:u,children:t.children})}function ut(){var t=p.useContext(FO);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function UO(t){var e=ut(),n=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:i(t.displayMonth,{locale:n})})}function gee(t){return l.jsx("svg",Se({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function $O(t){var e,n,r=t.onChange,s=t.value,i=t.children,o=t.caption,a=t.className,c=t.style,u=ut(),h=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:gee;return l.jsxs("div",{className:a,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),l.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r,children:i}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,l.jsx(h,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function vee(t){var e,n=ut(),r=n.fromDate,s=n.toDate,i=n.styles,o=n.locale,a=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,h=n.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});var f=[];if(QX(r,s))for(var m=Pn(r),v=r.getMonth();v<=s.getMonth();v++)f.push(cy(m,v));else for(var m=Pn(new Date),v=0;v<=11;v++)f.push(cy(m,v));var b=function(x){var _=Number(x.target.value),y=cy(Pn(t.displayMonth),_);t.onChange(y)},w=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:$O;return l.jsx(w,{name:"months","aria-label":h(),className:c.dropdown_month,style:i.dropdown_month,onChange:b,value:t.displayMonth.getMonth(),caption:a(t.displayMonth,{locale:o}),children:f.map(function(x){return l.jsx("option",{value:x.getMonth(),children:a(x,{locale:o})},x.getMonth())})})}function yee(t){var e,n=t.displayMonth,r=ut(),s=r.fromDate,i=r.toDate,o=r.locale,a=r.styles,c=r.classNames,u=r.components,h=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,m=[];if(!s)return l.jsx(l.Fragment,{});if(!i)return l.jsx(l.Fragment,{});for(var v=s.getFullYear(),b=i.getFullYear(),w=v;w<=b;w++)m.push(QC(cM(new Date),w));var x=function(y){var T=QC(Pn(n),Number(y.target.value));t.onChange(T)},_=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:$O;return l.jsx(_,{name:"years","aria-label":f(),className:c.dropdown_year,style:a.dropdown_year,onChange:x,value:n.getFullYear(),caption:h(n,{locale:o}),children:m.map(function(y){return l.jsx("option",{value:y.getFullYear(),children:h(y,{locale:o})},y.getFullYear())})})}function wee(t,e){var n=p.useState(t),r=n[0],s=n[1],i=e===void 0?r:e;return[i,s]}function xee(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,i=t.toDate,o=t.fromDate,a=t.numberOfMonths,c=a===void 0?1:a;if(i&&lc(i,s)<0){var u=-1*(c-1);s=pr(i,u)}return o&&lc(s,o)<0&&(s=o),Pn(s)}function _ee(){var t=ut(),e=xee(t),n=wee(e,t.month),r=n[0],s=n[1],i=function(o){var a;if(!t.disableNavigation){var c=Pn(o);s(c),(a=t.onMonthChange)===null||a===void 0||a.call(t,c)}};return[r,i]}function bee(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=Pn(t),i=Pn(pr(s,r)),o=lc(i,s),a=[],c=0;c<o;c++){var u=pr(s,c);a.push(u)}return n&&(a=a.reverse()),a}function Eee(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,a=Pn(t);if(!n)return pr(a,o);var c=lc(n,t);if(!(c<i))return pr(a,o)}}function Tee(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,o=r?i:1,a=Pn(t);if(!n)return pr(a,-o);var c=lc(a,n);if(!(c<=0))return pr(a,-o)}}var zO=p.createContext(void 0);function See(t){var e=ut(),n=_ee(),r=n[0],s=n[1],i=bee(r,e),o=Eee(r,e),a=Tee(r,e),c=function(f){return i.some(function(m){return kg(f,m)})},u=function(f,m){c(f)||(m&&gM(f,m)?s(pr(f,1+e.numberOfMonths*-1)):s(f))},h={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:u,previousMonth:a,nextMonth:o,isDateDisplayed:c};return l.jsx(zO.Provider,{value:h,children:t.children})}function oh(){var t=p.useContext(zO);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function JC(t){var e,n=ut(),r=n.classNames,s=n.styles,i=n.components,o=oh().goToMonth,a=function(h){o(pr(h,t.displayIndex?-t.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:UO,u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:u}),l.jsx(vee,{onChange:a,displayMonth:t.displayMonth}),l.jsx(yee,{onChange:a,displayMonth:t.displayMonth})]})}function Cee(t){return l.jsx("svg",Se({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Iee(t){return l.jsx("svg",Se({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var op=p.forwardRef(function(t,e){var n=ut(),r=n.classNames,s=n.styles,i=[r.button_reset,r.button];t.className&&i.push(t.className);var o=i.join(" "),a=Se(Se({},s.button_reset),s.button);return t.style&&Object.assign(a,t.style),l.jsx("button",Se({},t,{ref:e,type:"button",className:o,style:a}))});function kee(t){var e,n,r=ut(),s=r.dir,i=r.locale,o=r.classNames,a=r.styles,c=r.labels,u=c.labelPrevious,h=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return l.jsx(l.Fragment,{});var m=u(t.previousMonth,{locale:i}),v=[o.nav_button,o.nav_button_previous].join(" "),b=h(t.nextMonth,{locale:i}),w=[o.nav_button,o.nav_button_next].join(" "),x=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:Iee,_=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:Cee;return l.jsxs("div",{className:o.nav,style:a.nav,children:[!t.hidePrevious&&l.jsx(op,{name:"previous-month","aria-label":m,className:v,style:a.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?l.jsx(x,{className:o.nav_icon,style:a.nav_icon}):l.jsx(_,{className:o.nav_icon,style:a.nav_icon})}),!t.hideNext&&l.jsx(op,{name:"next-month","aria-label":b,className:w,style:a.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?l.jsx(_,{className:o.nav_icon,style:a.nav_icon}):l.jsx(x,{className:o.nav_icon,style:a.nav_icon})})]})}function eI(t){var e=ut().numberOfMonths,n=oh(),r=n.previousMonth,s=n.nextMonth,i=n.goToMonth,o=n.displayMonths,a=o.findIndex(function(b){return kg(t.displayMonth,b)}),c=a===0,u=a===o.length-1,h=e>1&&(c||!u),f=e>1&&(u||!c),m=function(){r&&i(r)},v=function(){s&&i(s)};return l.jsx(kee,{displayMonth:t.displayMonth,hideNext:h,hidePrevious:f,nextMonth:s,previousMonth:r,onPreviousClick:m,onNextClick:v})}function Nee(t){var e,n=ut(),r=n.classNames,s=n.disableNavigation,i=n.styles,o=n.captionLayout,a=n.components,c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:UO,u;return s?u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?u=l.jsx(JC,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(JC,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),l.jsx(eI,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(eI,{displayMonth:t.displayMonth,id:t.id})]}),l.jsx("div",{className:r.caption,style:i.caption,children:u})}function Aee(t){var e=ut(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?l.jsx("tfoot",{className:s,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:n})})}):l.jsx(l.Fragment,{})}function Pee(t,e,n){for(var r=n?ba(new Date):gr(new Date,{locale:t,weekStartsOn:e}),s=[],i=0;i<7;i++){var o=vn(r,i);s.push(o)}return s}function Ree(){var t=ut(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,i=t.weekStartsOn,o=t.ISOWeek,a=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=Pee(s,i,o);return l.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&l.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(h,f){return l.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(h,{locale:s}),children:a(h,{locale:s})},f)})]})}function Dee(){var t,e=ut(),n=e.classNames,r=e.styles,s=e.components,i=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:Ree;return l.jsx("thead",{style:r.head,className:n.head,children:l.jsx(i,{})})}function jee(t){var e=ut(),n=e.locale,r=e.formatters.formatDay;return l.jsx(l.Fragment,{children:r(t.date,{locale:n})})}var xb=p.createContext(void 0);function Mee(t){if(!sh(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(xb.Provider,{value:e,children:t.children})}return l.jsx(Oee,{initialProps:t.initialProps,children:t.children})}function Oee(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,i=e.max,o=function(u,h,f){var m,v;(m=e.onDayClick)===null||m===void 0||m.call(e,u,h,f);var b=!!(h.selected&&s&&(r==null?void 0:r.length)===s);if(!b){var w=!!(!h.selected&&i&&(r==null?void 0:r.length)===i);if(!w){var x=r?VO([],r):[];if(h.selected){var _=x.findIndex(function(y){return Qt(u,y)});x.splice(_,1)}else x.push(u);(v=e.onSelect)===null||v===void 0||v.call(e,x,u,h,f)}}},a={disabled:[]};r&&a.disabled.push(function(u){var h=i&&r.length>i-1,f=r.some(function(m){return Qt(m,u)});return!!(h&&!f)});var c={selected:r,onDayClick:o,modifiers:a};return l.jsx(xb.Provider,{value:c,children:n})}function _b(){var t=p.useContext(xb);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Lee(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?Qt(s,t)&&Qt(r,t)?void 0:Qt(s,t)?{from:s,to:void 0}:Qt(r,t)?void 0:tp(r,t)?{from:t,to:s}:{from:r,to:t}:s?tp(t,s)?{from:s,to:t}:{from:t,to:s}:r?gM(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var bb=p.createContext(void 0);function Vee(t){if(!ih(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(bb.Provider,{value:e,children:t.children})}return l.jsx(Fee,{initialProps:t.initialProps,children:t.children})}function Fee(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},i=s.from,o=s.to,a=e.min,c=e.max,u=function(v,b,w){var x,_;(x=e.onDayClick)===null||x===void 0||x.call(e,v,b,w);var y=Lee(v,r);(_=e.onSelect)===null||_===void 0||_.call(e,y,v,b,w)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],o?(h.range_end=[o],Qt(i,o)||(h.range_middle=[{after:i,before:o}])):h.range_end=[i]):o&&(h.range_start=[o],h.range_end=[o]),a&&(i&&!o&&h.disabled.push({after:ly(i,a-1),before:vn(i,a-1)}),i&&o&&h.disabled.push({after:i,before:vn(i,a-1)}),!i&&o&&h.disabled.push({after:ly(o,a-1),before:vn(o,a-1)})),c){if(i&&!o&&(h.disabled.push({before:vn(i,-c+1)}),h.disabled.push({after:vn(i,c-1)})),i&&o){var f=gs(o,i)+1,m=c-f;h.disabled.push({before:ly(i,m)}),h.disabled.push({after:vn(o,m)})}!i&&o&&(h.disabled.push({before:vn(o,-c+1)}),h.disabled.push({after:vn(o,c-1)}))}return l.jsx(bb.Provider,{value:{selected:r,onDayClick:u,modifiers:h},children:n})}function Eb(){var t=p.useContext(bb);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Lf(t){return Array.isArray(t)?VO([],t):t!==void 0?[t]:[]}function Uee(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=Lf(s)}),e}var es;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(es||(es={}));var $ee=es.Selected,Ls=es.Disabled,zee=es.Hidden,Bee=es.Today,uy=es.RangeEnd,dy=es.RangeMiddle,hy=es.RangeStart,Wee=es.Outside;function Hee(t,e,n){var r,s=(r={},r[$ee]=Lf(t.selected),r[Ls]=Lf(t.disabled),r[zee]=Lf(t.hidden),r[Bee]=[t.today],r[uy]=[],r[dy]=[],r[hy]=[],r[Wee]=[],r);return t.fromDate&&s[Ls].push({before:t.fromDate}),t.toDate&&s[Ls].push({after:t.toDate}),sh(t)?s[Ls]=s[Ls].concat(e.modifiers[Ls]):ih(t)&&(s[Ls]=s[Ls].concat(n.modifiers[Ls]),s[hy]=n.modifiers[hy],s[dy]=n.modifiers[dy],s[uy]=n.modifiers[uy]),s}var BO=p.createContext(void 0);function qee(t){var e=ut(),n=_b(),r=Eb(),s=Hee(e,n,r),i=Uee(e.modifiers),o=Se(Se({},s),i);return l.jsx(BO.Provider,{value:o,children:t.children})}function WO(){var t=p.useContext(BO);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Gee(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Kee(t){return!!(t&&typeof t=="object"&&"from"in t)}function Yee(t){return!!(t&&typeof t=="object"&&"after"in t)}function Qee(t){return!!(t&&typeof t=="object"&&"before"in t)}function Xee(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Zee(t,e){var n,r=e.from,s=e.to;if(r&&s){var i=gs(s,r)<0;i&&(n=[s,r],r=n[0],s=n[1]);var o=gs(t,r)>=0&&gs(s,t)>=0;return o}return s?Qt(s,t):r?Qt(r,t):!1}function Jee(t){return nb(t)}function ete(t){return Array.isArray(t)&&t.every(nb)}function tte(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(Jee(n))return Qt(t,n);if(ete(n))return n.includes(t);if(Kee(n))return Zee(t,n);if(Xee(n))return n.dayOfWeek.includes(t.getDay());if(Gee(n)){var r=gs(n.before,t),s=gs(n.after,t),i=r>0,o=s<0,a=tp(n.before,n.after);return a?o&&i:i||o}return Yee(n)?gs(t,n.after)>0:Qee(n)?gs(n.before,t)>0:typeof n=="function"?n(t):!1})}function Tb(t,e,n){var r=Object.keys(e).reduce(function(i,o){var a=e[o];return tte(t,a)&&i.push(o),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),n&&!kg(t,n)&&(s.outside=!0),s}function nte(t,e){for(var n=Pn(t[0]),r=Kd(t[t.length-1]),s,i,o=n;o<=r;){var a=Tb(o,e),c=!a.disabled&&!a.hidden;if(!c){o=vn(o,1);continue}if(a.selected)return o;a.today&&!i&&(i=o),s||(s=o),o=vn(o,1)}return i||s}var rte=365;function HO(t,e){var n=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,o=e.retry,a=o===void 0?{count:0,lastFocused:t}:o,c=s.weekStartsOn,u=s.fromDate,h=s.toDate,f=s.locale,m={day:vn,week:fx,month:pr,year:$Q,startOfWeek:function(x){return s.ISOWeek?ba(x):gr(x,{locale:f,weekStartsOn:c})},endOfWeek:function(x){return s.ISOWeek?uM(x):Ig(x,{locale:f,weekStartsOn:c})}},v=m[n](t,r==="after"?1:-1);r==="before"&&u?v=zQ([u,v]):r==="after"&&h&&(v=BQ([h,v]));var b=!0;if(i){var w=Tb(v,i);b=!w.disabled&&!w.hidden}return b?v:a.count>rte?a.lastFocused:HO(v,{moveBy:n,direction:r,context:s,modifiers:i,retry:Se(Se({},a),{count:a.count+1})})}var qO=p.createContext(void 0);function ste(t){var e=oh(),n=WO(),r=p.useState(),s=r[0],i=r[1],o=p.useState(),a=o[0],c=o[1],u=nte(e.displayMonths,n),h=s??(a&&e.isDateDisplayed(a))?a:u,f=function(){c(s),i(void 0)},m=function(x){i(x)},v=ut(),b=function(x,_){if(s){var y=HO(s,{moveBy:x,direction:_,context:v,modifiers:n});Qt(s,y)||(e.goToDate(y,s),m(y))}},w={focusedDay:s,focusTarget:h,blur:f,focus:m,focusDayAfter:function(){return b("day","after")},focusDayBefore:function(){return b("day","before")},focusWeekAfter:function(){return b("week","after")},focusWeekBefore:function(){return b("week","before")},focusMonthBefore:function(){return b("month","before")},focusMonthAfter:function(){return b("month","after")},focusYearBefore:function(){return b("year","before")},focusYearAfter:function(){return b("year","after")},focusStartOfWeek:function(){return b("startOfWeek","before")},focusEndOfWeek:function(){return b("endOfWeek","after")}};return l.jsx(qO.Provider,{value:w,children:t.children})}function Sb(){var t=p.useContext(qO);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function ite(t,e){var n=WO(),r=Tb(t,n,e);return r}var Cb=p.createContext(void 0);function ote(t){if(!Lg(t.initialProps)){var e={selected:void 0};return l.jsx(Cb.Provider,{value:e,children:t.children})}return l.jsx(ate,{initialProps:t.initialProps,children:t.children})}function ate(t){var e=t.initialProps,n=t.children,r=function(i,o,a){var c,u,h;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,o,a),o.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,i,o,a);return}(h=e.onSelect)===null||h===void 0||h.call(e,i,i,o,a)},s={selected:e.selected,onDayClick:r};return l.jsx(Cb.Provider,{value:s,children:n})}function GO(){var t=p.useContext(Cb);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function lte(t,e){var n=ut(),r=GO(),s=_b(),i=Eb(),o=Sb(),a=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,h=o.focusWeekBefore,f=o.blur,m=o.focus,v=o.focusMonthBefore,b=o.focusMonthAfter,w=o.focusYearBefore,x=o.focusYearAfter,_=o.focusStartOfWeek,y=o.focusEndOfWeek,T=function(H){var O,F,X,fe;Lg(n)?(O=r.onDayClick)===null||O===void 0||O.call(r,t,e,H):sh(n)?(F=s.onDayClick)===null||F===void 0||F.call(s,t,e,H):ih(n)?(X=i.onDayClick)===null||X===void 0||X.call(i,t,e,H):(fe=n.onDayClick)===null||fe===void 0||fe.call(n,t,e,H)},N=function(H){var O;m(t),(O=n.onDayFocus)===null||O===void 0||O.call(n,t,e,H)},j=function(H){var O;f(),(O=n.onDayBlur)===null||O===void 0||O.call(n,t,e,H)},M=function(H){var O;(O=n.onDayMouseEnter)===null||O===void 0||O.call(n,t,e,H)},C=function(H){var O;(O=n.onDayMouseLeave)===null||O===void 0||O.call(n,t,e,H)},k=function(H){var O;(O=n.onDayPointerEnter)===null||O===void 0||O.call(n,t,e,H)},R=function(H){var O;(O=n.onDayPointerLeave)===null||O===void 0||O.call(n,t,e,H)},I=function(H){var O;(O=n.onDayTouchCancel)===null||O===void 0||O.call(n,t,e,H)},S=function(H){var O;(O=n.onDayTouchEnd)===null||O===void 0||O.call(n,t,e,H)},P=function(H){var O;(O=n.onDayTouchMove)===null||O===void 0||O.call(n,t,e,H)},A=function(H){var O;(O=n.onDayTouchStart)===null||O===void 0||O.call(n,t,e,H)},W=function(H){var O;(O=n.onDayKeyUp)===null||O===void 0||O.call(n,t,e,H)},Q=function(H){var O;switch(H.key){case"ArrowLeft":H.preventDefault(),H.stopPropagation(),n.dir==="rtl"?a():c();break;case"ArrowRight":H.preventDefault(),H.stopPropagation(),n.dir==="rtl"?c():a();break;case"ArrowDown":H.preventDefault(),H.stopPropagation(),u();break;case"ArrowUp":H.preventDefault(),H.stopPropagation(),h();break;case"PageUp":H.preventDefault(),H.stopPropagation(),H.shiftKey?w():v();break;case"PageDown":H.preventDefault(),H.stopPropagation(),H.shiftKey?x():b();break;case"Home":H.preventDefault(),H.stopPropagation(),_();break;case"End":H.preventDefault(),H.stopPropagation(),y();break}(O=n.onDayKeyDown)===null||O===void 0||O.call(n,t,e,H)},J={onClick:T,onFocus:N,onBlur:j,onKeyDown:Q,onKeyUp:W,onMouseEnter:M,onMouseLeave:C,onPointerEnter:k,onPointerLeave:R,onTouchCancel:I,onTouchEnd:S,onTouchMove:P,onTouchStart:A};return J}function cte(){var t=ut(),e=GO(),n=_b(),r=Eb(),s=Lg(t)?e.selected:sh(t)?n.selected:ih(t)?r.selected:void 0;return s}function ute(t){return Object.values(es).includes(t)}function dte(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(ute(r)){var i=t.classNames["day_".concat(r)];i&&n.push(i)}}),n}function hte(t,e){var n=Se({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=Se(Se({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function fte(t,e,n){var r,s,i,o=ut(),a=Sb(),c=ite(t,e),u=lte(t,c),h=cte(),f=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var M;c.outside||a.focusedDay&&f&&Qt(a.focusedDay,t)&&((M=n.current)===null||M===void 0||M.focus())},[a.focusedDay,t,n,f,c.outside]);var m=dte(o,c).join(" "),v=hte(o,c),b=!!(c.outside&&!o.showOutsideDays||c.hidden),w=(i=(s=o.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:jee,x=l.jsx(w,{date:t,displayMonth:e,activeModifiers:c}),_={style:v,className:m,children:x,role:"gridcell"},y=a.focusTarget&&Qt(a.focusTarget,t)&&!c.outside,T=a.focusedDay&&Qt(a.focusedDay,t),N=Se(Se(Se({},_),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=T||y?0:-1,r)),u),j={isButton:f,isHidden:b,activeModifiers:c,selectedDays:h,buttonProps:N,divProps:_};return j}function mte(t){var e=p.useRef(null),n=fte(t.date,t.displayMonth,e);return n.isHidden?l.jsx("div",{role:"gridcell"}):n.isButton?l.jsx(op,Se({name:"day",ref:e},n.buttonProps)):l.jsx("div",Se({},n.divProps))}function pte(t){var e=t.number,n=t.dates,r=ut(),s=r.onWeekNumberClick,i=r.styles,o=r.classNames,a=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,h=u(Number(e),{locale:a});if(!s)return l.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:h});var f=c(Number(e),{locale:a}),m=function(v){s(e,n,v)};return l.jsx(op,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:m,children:h})}function gte(t){var e,n,r=ut(),s=r.styles,i=r.classNames,o=r.showWeekNumber,a=r.components,c=(e=a==null?void 0:a.Day)!==null&&e!==void 0?e:mte,u=(n=a==null?void 0:a.WeekNumber)!==null&&n!==void 0?n:pte,h;return o&&(h=l.jsx("td",{className:i.cell,style:s.cell,children:l.jsx(u,{number:t.weekNumber,dates:t.dates})})),l.jsxs("tr",{className:i.row,style:s.row,children:[h,t.dates.map(function(f){return l.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:l.jsx(c,{displayMonth:t.displayMonth,date:f})},GX(f))})]})}function tI(t,e,n){for(var r=n!=null&&n.ISOWeek?uM(e):Ig(e,n),s=n!=null&&n.ISOWeek?ba(t):gr(t,n),i=gs(r,s),o=[],a=0;a<=i;a++)o.push(vn(s,a));var c=o.reduce(function(u,h){var f=n!=null&&n.ISOWeek?hM(h):mM(h,n),m=u.find(function(v){return v.weekNumber===f});return m?(m.dates.push(h),u):(u.push({weekNumber:f,dates:[h]}),u)},[]);return c}function vte(t,e){var n=tI(Pn(t),Kd(t),e);if(e!=null&&e.useFixedWeeks){var r=YX(t,e);if(r<6){var s=n[n.length-1],i=s.dates[s.dates.length-1],o=fx(i,6-r),a=tI(fx(i,1),o,e);n.push.apply(n,a)}}return n}function yte(t){var e,n,r,s=ut(),i=s.locale,o=s.classNames,a=s.styles,c=s.hideHead,u=s.fixedWeeks,h=s.components,f=s.weekStartsOn,m=s.firstWeekContainsDate,v=s.ISOWeek,b=vte(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:v,locale:i,weekStartsOn:f,firstWeekContainsDate:m}),w=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:Dee,x=(n=h==null?void 0:h.Row)!==null&&n!==void 0?n:gte,_=(r=h==null?void 0:h.Footer)!==null&&r!==void 0?r:Aee;return l.jsxs("table",{id:t.id,className:o.table,style:a.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&l.jsx(w,{}),l.jsx("tbody",{className:o.tbody,style:a.tbody,children:b.map(function(y){return l.jsx(x,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),l.jsx(_,{displayMonth:t.displayMonth})]})}function wte(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var xte=wte()?p.useLayoutEffect:p.useEffect,fy=!1,_te=0;function nI(){return"react-day-picker-".concat(++_te)}function bte(t){var e,n=t??(fy?nI():null),r=p.useState(n),s=r[0],i=r[1];return xte(function(){s===null&&i(nI())},[]),p.useEffect(function(){fy===!1&&(fy=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function Ete(t){var e,n,r=ut(),s=r.dir,i=r.classNames,o=r.styles,a=r.components,c=oh().displayMonths,u=bte(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),h=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[i.month],m=o.month,v=t.displayIndex===0,b=t.displayIndex===c.length-1,w=!v&&!b;s==="rtl"&&(e=[v,b],b=e[0],v=e[1]),v&&(f.push(i.caption_start),m=Se(Se({},m),o.caption_start)),b&&(f.push(i.caption_end),m=Se(Se({},m),o.caption_end)),w&&(f.push(i.caption_between),m=Se(Se({},m),o.caption_between));var x=(n=a==null?void 0:a.Caption)!==null&&n!==void 0?n:Nee;return l.jsxs("div",{className:f.join(" "),style:m,children:[l.jsx(x,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(yte,{id:h,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Tte(t){var e=ut(),n=e.classNames,r=e.styles;return l.jsx("div",{className:n.months,style:r.months,children:t.children})}function Ste(t){var e,n,r=t.initialProps,s=ut(),i=Sb(),o=oh(),a=p.useState(!1),c=a[0],u=a[1];p.useEffect(function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[s.initialFocus,c,i.focus,i.focusTarget,i]);var h=[s.classNames.root,s.className];s.numberOfMonths>1&&h.push(s.classNames.multiple_months),s.showWeekNumber&&h.push(s.classNames.with_weeknumber);var f=Se(Se({},s.styles.root),s.style),m=Object.keys(r).filter(function(b){return b.startsWith("data-")}).reduce(function(b,w){var x;return Se(Se({},b),(x={},x[w]=r[w],x))},{}),v=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Tte;return l.jsx("div",Se({className:h.join(" "),style:f,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},m,{children:l.jsx(v,{children:o.displayMonths.map(function(b,w){return l.jsx(Ete,{displayIndex:w,displayMonth:b},w)})})}))}function Cte(t){var e=t.children,n=QJ(t,["children"]);return l.jsx(pee,{initialProps:n,children:l.jsx(See,{children:l.jsx(ote,{initialProps:n,children:l.jsx(Mee,{initialProps:n,children:l.jsx(Vee,{initialProps:n,children:l.jsx(qee,{children:l.jsx(ste,{children:e})})})})})})})}function Ite(t){return l.jsx(Cte,Se({},t,{children:l.jsx(Ste,{initialProps:t})}))}function yx({className:t,classNames:e,showOutsideDays:n=!0,...r}){return l.jsx(Ite,{showOutsideDays:n,className:pe("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:pe(ad({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:pe(ad({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:s,...i})=>l.jsx(iP,{className:pe("h-4 w-4",s),...i}),IconRight:({className:s,...i})=>l.jsx(U0,{className:pe("h-4 w-4",s),...i})},...r})}yx.displayName="Calendar";function kte({isOpen:t,onClose:e,onSave:n,onDelete:r,editEvent:s,selectedDate:i}){const{user:o}=Mn(),{toast:a}=As(),[c,u]=p.useState(!1),[h,f]=p.useState(!1),[m,v]=p.useState(""),b=[{value:"personal",label:"Personale",color:"#81B29A",icon:"👤"},{value:"family",label:"Famiglia",color:"#E07A5F",icon:"👨‍👩‍👧‍👦"},{value:"work",label:"Lavoro",color:"#3D405B",icon:"💼"},{value:"appointment",label:"Appuntamento",color:"#F4A261",icon:"📅"},{value:"reminder",label:"Promemoria",color:"#2A9D8F",icon:"⏰"}],w=Lp({defaultValues:{title:"",description:"",startDate:i||new Date,endDate:i||new Date,isAllDay:!1,isPublic:!1,createdBy:(o==null?void 0:o.username)||"",eventType:"personal",color:"#E07A5F",location:"",attendees:[]}}),x=w.watch("startDate"),_=w.watch("isAllDay"),y=s&&((o==null?void 0:o.username)===s.createdBy||(o==null?void 0:o.role)==="admin");p.useEffect(()=>{if(t){if(s)w.reset({title:s.title,description:s.description||"",startDate:s.startDate,endDate:s.endDate,isAllDay:s.isAllDay,isPublic:s.isPublic,createdBy:s.createdBy,eventType:s.eventType,color:s.color,location:s.location||"",attendees:s.attendees||[]});else{const I=i||new Date,S=new Date(I);S.setHours(I.getHours()+1),w.reset({title:"",description:"",startDate:I,endDate:S,isAllDay:!1,isPublic:!1,createdBy:(o==null?void 0:o.username)||"",eventType:"personal",color:"#E07A5F",location:"",attendees:[]})}v("")}},[s,i,w,o,t]),p.useEffect(()=>{const I=w.getValues("endDate");if(x&&I<=x){const S=new Date(x);S.setHours(x.getHours()+1),w.setValue("endDate",S)}},[x,w]),p.useEffect(()=>{if(_){const I=new Date(w.getValues("startDate")),S=new Date(w.getValues("endDate"));I.setHours(0,0,0,0),S.setHours(23,59,59,999),w.setValue("startDate",I),w.setValue("endDate",S)}},[_,w]);const T=()=>{e(),setTimeout(()=>{w.reset(),v("")},150)},N=async()=>{if(!(!s||!r)){f(!0);try{await r(s.id),a({title:"Evento eliminato",description:"L'evento è stato eliminato con successo!"}),T()}catch(I){console.error("Errore nell'eliminare l'evento:",I),a({title:"Errore",description:"Impossibile eliminare l'evento",variant:"destructive"})}finally{f(!1)}}},j=async I=>{var S,P;if(!I.title.trim()){a({title:"Errore",description:"Il titolo dell'evento è obbligatorio",variant:"destructive"});return}u(!0);try{const A={...I,title:I.title.trim(),description:(S=I.description)==null?void 0:S.trim(),location:(P=I.location)==null?void 0:P.trim(),attendees:I.attendees.filter(Q=>Q.trim()!=="")};let W;if(s){W=s;try{W.title=A.title,W.description=A.description,W.updateDates(A.startDate,A.endDate),W.isAllDay=A.isAllDay,W.isPublic=A.isPublic,W.eventType=A.eventType,W.color=A.color,W.location=A.location,W.attendees=A.attendees,W.updatedAt=new Date,W.validate()}catch(Q){if(Q instanceof rt){a({title:"Errore di Validazione",description:Q.errors.join(", "),variant:"destructive"});return}throw Q}}else try{W=ep.createCalendarEvent({id:`event_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:A.title,description:A.description,startDate:A.startDate,endDate:A.endDate,isAllDay:A.isAllDay,isPublic:A.isPublic,createdBy:A.createdBy,eventType:A.eventType,color:A.color,location:A.location,attendees:A.attendees})}catch(Q){if(Q instanceof rt){a({title:"Errore di Validazione",description:Q.errors.join(", "),variant:"destructive"});return}throw Q}await n(W),a({title:s?"Evento aggiornato":"Evento creato",description:s?"L'evento è stato aggiornato con successo!":"L'evento è stato creato con successo!"}),T()}catch(A){console.error("Errore nel salvare l'evento:",A),a({title:"Errore",description:s?"Impossibile aggiornare l'evento":"Impossibile creare l'evento",variant:"destructive"})}finally{u(!1)}},M=I=>{const S=b.find(P=>P.value===I);S&&(w.setValue("eventType",I),w.setValue("color",S.color))},C=()=>{const I=m.trim();if(I){const S=w.getValues("attendees");!S.includes(I)&&S.length<20&&(w.setValue("attendees",[...S,I]),v(""))}},k=I=>{const S=w.getValues("attendees");w.setValue("attendees",S.filter(P=>P!==I))},R=I=>{if(I.key==="Enter")I.preventDefault(),C();else if(I.key==="Backspace"&&m===""&&w.getValues("attendees").length>0){const S=w.getValues("attendees");k(S[S.length-1])}};return l.jsx(nh,{open:t,onOpenChange:T,children:l.jsxs(Nc,{className:"sm:max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Ac,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Pc,{className:"text-2xl font-bold text-delft-blue flex items-center",children:s?l.jsxs(l.Fragment,{children:[l.jsx(Iu,{className:"mr-3 h-6 w-6 text-burnt-sienna"}),"Modifica Evento"]}):l.jsxs(l.Fragment,{children:[l.jsx(Sr,{className:"mr-3 h-6 w-6 text-burnt-sienna"}),"Crea Nuovo Evento"]})}),s&&y&&r&&l.jsxs(Pg,{children:[l.jsx(Rg,{asChild:!0,children:l.jsx(Ee,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-500 transition-colors",disabled:c||h,children:l.jsx(Fp,{className:"h-5 w-5"})})}),l.jsxs(Yd,{children:[l.jsxs(Qd,{children:[l.jsx(Zd,{children:"Conferma Eliminazione"}),l.jsxs(Jd,{children:[`Sei sicuro di voler eliminare l'evento "`,s.title,'"? Questa azione non può essere annullata.']})]}),l.jsxs(Xd,{children:[l.jsx(th,{disabled:h,children:"Annulla"}),l.jsx(eh,{onClick:N,disabled:h,className:"bg-red-500 hover:bg-red-600 text-white",children:h?l.jsxs(l.Fragment,{children:[l.jsx(fo,{className:"mr-2 h-4 w-4 animate-spin"}),"Eliminando..."]}):"Elimina"})]})]})]})]})}),l.jsx($p,{...w,children:l.jsxs("form",{onSubmit:w.handleSubmit(j),className:"space-y-6",children:[l.jsx(vt,{control:w.control,name:"title",render:({field:I})=>{var S;return l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Titolo Evento *"}),l.jsx(yt,{children:l.jsx(Yt,{...I,placeholder:"Inserisci il titolo dell'evento...",maxLength:100,className:"text-lg"})}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((S=I.value)==null?void 0:S.length)||0,"/100 caratteri"]}),l.jsx(Kt,{})]})}}),l.jsx(vt,{control:w.control,name:"description",render:({field:I})=>l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Descrizione"}),l.jsx(yt,{children:l.jsx(Mg,{...I,placeholder:"Descrizione dell'evento (opzionale)...",rows:4,className:"resize-y"})}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:w.control,name:"isAllDay",render:({field:I})=>l.jsxs(mt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:[l.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Evento Giornata Intera"]}),l.jsx("p",{className:"text-xs text-gray-600",children:"L'evento dura tutto il giorno"})]}),l.jsx(yt,{children:l.jsx(rr,{checked:I.value,onCheckedChange:I.onChange})})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(vt,{control:w.control,name:"startDate",render:({field:I})=>l.jsxs(mt,{className:"flex flex-col",children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Data e Ora Inizio"}),l.jsxs(mx,{children:[l.jsx(px,{asChild:!0,children:l.jsx(yt,{children:l.jsxs(Ee,{variant:"outline",className:pe("w-full pl-3 text-left font-normal",!I.value&&"text-muted-foreground"),children:[I.value?$t(I.value,_?"PPP":"PPP p",{locale:Xs}):l.jsx("span",{children:"Seleziona una data"}),l.jsx(Iu,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),l.jsxs(ip,{className:"w-auto p-0",align:"start",children:[l.jsx(yx,{mode:"single",selected:I.value,onSelect:S=>{if(S)if(_)I.onChange(S);else{const P=new Date(S),A=I.value;A&&P.setHours(A.getHours(),A.getMinutes()),I.onChange(P)}},disabled:S=>S<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0}),!_&&l.jsx("div",{className:"p-3 border-t",children:l.jsx(Yt,{type:"time",value:I.value?$t(I.value,"HH:mm"):"",onChange:S=>{if(I.value&&S.target.value){const[P,A]=S.target.value.split(":"),W=new Date(I.value);W.setHours(parseInt(P),parseInt(A)),I.onChange(W)}}})})]})]}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:w.control,name:"endDate",render:({field:I})=>l.jsxs(mt,{className:"flex flex-col",children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Data e Ora Fine"}),l.jsxs(mx,{children:[l.jsx(px,{asChild:!0,children:l.jsx(yt,{children:l.jsxs(Ee,{variant:"outline",className:pe("w-full pl-3 text-left font-normal",!I.value&&"text-muted-foreground"),children:[I.value?$t(I.value,_?"PPP":"PPP p",{locale:Xs}):l.jsx("span",{children:"Seleziona una data"}),l.jsx(Iu,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),l.jsxs(ip,{className:"w-auto p-0",align:"start",children:[l.jsx(yx,{mode:"single",selected:I.value,onSelect:S=>{if(S)if(_)I.onChange(S);else{const P=new Date(S),A=I.value;A&&P.setHours(A.getHours(),A.getMinutes()),I.onChange(P)}},disabled:S=>{const P=w.getValues("startDate");return S<P},initialFocus:!0}),!_&&l.jsx("div",{className:"p-3 border-t",children:l.jsx(Yt,{type:"time",value:I.value?$t(I.value,"HH:mm"):"",onChange:S=>{if(I.value&&S.target.value){const[P,A]=S.target.value.split(":"),W=new Date(I.value);W.setHours(parseInt(P),parseInt(A)),I.onChange(W)}}})})]})]}),l.jsx(Kt,{})]})})]}),l.jsx(vt,{control:w.control,name:"eventType",render:({field:I})=>l.jsxs(mt,{children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue",children:"Tipo di Evento"}),l.jsxs(ir,{onValueChange:M,defaultValue:I.value,children:[l.jsx(yt,{children:l.jsx(Wn,{children:l.jsx(or,{placeholder:"Seleziona il tipo di evento"})})}),l.jsx(Hn,{children:b.map(S=>l.jsx(Re,{value:S.value,children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-lg",children:S.icon}),l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:S.color}}),l.jsx("span",{className:"font-medium",children:S.label})]})},S.value))})]}),l.jsx(Kt,{})]})}),l.jsx(vt,{control:w.control,name:"location",render:({field:I})=>l.jsxs(mt,{children:[l.jsxs(pt,{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(Tw,{className:"mr-2 h-4 w-4"}),"Luogo (Opzionale)"]}),l.jsx(yt,{children:l.jsx(Yt,{...I,placeholder:"Inserisci il luogo dell'evento..."})}),l.jsx(Kt,{})]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:"text-sm font-medium text-delft-blue flex items-center",children:[l.jsx(uP,{className:"mr-2 h-4 w-4"}),"Partecipanti ",w.watch("attendees").length>0&&l.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",w.watch("attendees").length,"/20)"]})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Yt,{placeholder:"Aggiungi email o nome partecipante...",value:m,onChange:I=>v(I.target.value),onKeyDown:R,className:"flex-1",disabled:w.watch("attendees").length>=20}),l.jsx(Ee,{type:"button",variant:"outline",onClick:C,disabled:!m.trim()||w.watch("attendees").length>=20,children:l.jsx(Sr,{className:"h-4 w-4"})})]}),w.watch("attendees").length>0&&l.jsx("div",{className:"flex flex-wrap gap-2",children:w.watch("attendees").map((I,S)=>l.jsxs("div",{className:"bg-cambridge-blue/10 text-cambridge-blue px-3 py-1 rounded-full text-sm flex items-center border border-cambridge-blue/20",children:[I,l.jsx("button",{type:"button",onClick:()=>k(I),className:"ml-2 text-cambridge-blue hover:text-red-500 transition-colors",children:l.jsx(B0,{className:"h-3 w-3"})})]},S))})]}),l.jsx(vt,{control:w.control,name:"isPublic",render:({field:I})=>l.jsxs(mt,{className:"flex flex-row items-center justify-between rounded-lg border border-gray-200 p-4 hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx(pt,{className:"text-sm font-medium text-delft-blue flex items-center cursor-pointer",children:I.value?l.jsxs(l.Fragment,{children:[l.jsx(Co,{className:"mr-2 h-4 w-4 text-green-600"}),"Evento Pubblico"]}):l.jsxs(l.Fragment,{children:[l.jsx(mo,{className:"mr-2 h-4 w-4 text-orange-600"}),"Evento Privato"]})}),l.jsx("p",{className:"text-xs text-gray-600",children:I.value?"Questo evento sarà visibile a tutti i membri della famiglia":"Questo evento sarà visibile solo a te"})]}),l.jsx(yt,{children:l.jsx(rr,{checked:I.value,onCheckedChange:I.onChange})})]})}),l.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[l.jsx(Ee,{type:"button",variant:"outline",className:"flex-1",onClick:T,disabled:c||h,children:"Annulla"}),l.jsxs(Ee,{type:"submit",disabled:c||h,className:"flex-1 bg-burnt-sienna hover:bg-burnt-sienna/90 text-white font-semibold",children:[c&&l.jsx(fo,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Aggiorna Evento":"Crea Evento"]})]})]})})]})})}function Nte(){const{user:t}=Mn(),[e,n]=p.useState(new Date),[r,s]=p.useState(!1),[i,o]=p.useState(null),[a,c]=p.useState(),[u,h]=p.useState(!1),[f,m]=p.useState([]),{data:v,loading:b,add:w,update:x,remove:_}=ei("calendar_events"),y=p.useMemo(()=>v.filter(G=>G.isPublic||G.createdBy===(t==null?void 0:t.username)||(t==null?void 0:t.role)==="admin"),[v,t]),T=p.useMemo(()=>{const G=y.length,ue=y.filter(Oe=>Oe.isPublic).length,ze=y.filter(Oe=>!Oe.isPublic).length,tt=y.filter(Oe=>Oe.createdBy===(t==null?void 0:t.username)).length;return{total:G,publicEvents:ue,privateEvents:ze,myEvents:tt}},[y,t]),N=p.useMemo(()=>{const G=new Date;return y.filter(ue=>(ue.startDate instanceof Date?ue.startDate:new Date(ue.startDate))>=G||ue.endDate&&(ue.endDate instanceof Date?ue.endDate:new Date(ue.endDate))>=G).sort((ue,ze)=>{const tt=ue.startDate instanceof Date?ue.startDate:new Date(ue.startDate),Oe=ze.startDate instanceof Date?ze.startDate:new Date(ze.startDate);return tt.getTime()-Oe.getTime()})},[y]),j=Pn(e),M=Kd(j),C=gr(j,{weekStartsOn:1}),k=Ig(M,{weekStartsOn:1}),R="d",I=[];let S=[],P=C;const A=[{name:"Lun",isWeekend:!1},{name:"Mar",isWeekend:!1},{name:"Mer",isWeekend:!1},{name:"Gio",isWeekend:!1},{name:"Ven",isWeekend:!1},{name:"Sab",isWeekend:!0},{name:"Dom",isWeekend:!0}];for(;P<=k;){for(let G=0;G<7;G++){const ue=P,ze=y.filter(Oe=>Qt(Oe.startDate,ue)||Oe.startDate<=ue&&Oe.endDate>=ue),tt=KC(ue)===0||KC(ue)===6;S.push(l.jsxs("div",{className:`p-2 text-center text-sm cursor-pointer transition-all duration-200 relative h-16 border border-gray-200 dark:border-gray-600 flex flex-col justify-between ${kg(P,j)?XX(P)?"bg-burnt-sienna text-white font-bold shadow-md dark:bg-burnt-sienna dark:text-white":tt?"bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/30":"text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-800 hover:bg-cambridge-blue/10 dark:hover:bg-cambridge-blue/20":"text-gray-300 dark:text-gray-600 bg-gray-50 dark:bg-gray-800/50"}`,onClick:()=>{ze.length>0?(m(ze),c(ue),h(!0)):(c(ue),s(!0))},children:[l.jsx("div",{className:"font-semibold text-xs",children:$t(P,R)}),ze.length>0&&l.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[ze.slice(0,2).map(Oe=>l.jsx("div",{className:"w-1.5 h-1.5 rounded-full shadow-sm",style:{backgroundColor:Oe.color},title:Oe.title},Oe.id)),ze.length>2&&l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-500 dark:bg-gray-400"})]})]},P.toString())),P=vn(P,1)}I.push(l.jsx("div",{className:"grid grid-cols-7 flex-1",children:S},P.toString())),S=[]}const W=async G=>{i?(await x(i.id,G),o(null)):await w(G),s(!1),c(void 0)},Q=async G=>{try{await _(G),s(!1),o(null),c(void 0)}catch(ue){throw console.error("Errore nell'eliminare l'evento:",ue),ue}},J=G=>{o(G),s(!0),h(!1)},H=()=>{s(!1),o(null),c(void 0)},O=()=>{h(!1),m([]),c(void 0)},F=()=>{n(pr(e,1))},X=()=>{n(ZX(e))},fe=G=>({personal:{label:"Personale",icon:"👤"},family:{label:"Famiglia",icon:"👨‍👩‍👧‍👦"},work:{label:"Lavoro",icon:"💼"},appointment:{label:"Appuntamento",icon:"📅"},reminder:{label:"Promemoria",icon:"⏰"}})[G]||{label:G,icon:"📅"};return b?l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-burnt-sienna"}),l.jsx("span",{className:"ml-3 text-delft-blue font-medium",children:"Caricamento..."})]}):l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(Iu,{className:"h-8 w-8 text-cambridge-blue"}),l.jsx("h1",{className:"text-3xl font-bold text-delft-blue",children:"Eventi"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(Ce,{variant:"secondary",className:"bg-cambridge-blue/10 text-cambridge-blue border-cambridge-blue/20",children:[T.total," ",T.total===1?"evento":"eventi"]}),l.jsxs(Ce,{variant:"secondary",className:"bg-green-100 text-green-700 border-green-200",children:[T.publicEvents," ",T.publicEvents===1?"pubblico":"pubblici"]}),l.jsxs(Ce,{variant:"secondary",className:"bg-orange-100 text-orange-700 border-orange-200",children:[T.privateEvents," ",T.privateEvents===1?"privato":"privati"]}),(t==null?void 0:t.role)==="admin"&&l.jsxs(Ce,{variant:"secondary",className:"bg-purple-100 text-purple-700 border-purple-200",children:[T.myEvents," ",T.myEvents===1?"mio":"miei"]})]})]}),l.jsxs(Ee,{onClick:()=>s(!0),className:"bg-cambridge-blue hover:bg-cambridge-blue/90 text-white dark:text-black shadow-lg",children:[l.jsx(Sr,{className:"mr-2 h-4 w-4"}),"Nuovo Evento"]})]})}),l.jsx(Ot,{className:"mb-6",children:l.jsxs(Gt,{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-delft-blue",children:$t(e,"MMMM yyyy",{locale:Xs})}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Ee,{variant:"outline",size:"sm",onClick:X,className:"p-2",children:l.jsx(iP,{className:"h-4 w-4"})}),l.jsx(Ee,{variant:"outline",size:"sm",onClick:F,className:"p-2",children:l.jsx(U0,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"h-96 flex flex-col",children:[l.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200 dark:border-gray-700",children:A.map(G=>l.jsx("div",{className:`p-3 text-center text-sm font-semibold ${G.isWeekend?"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20":"text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:G.name},G.name))}),l.jsx("div",{className:"flex-1 overflow-hidden",children:I})]})]})}),l.jsx(Ot,{children:l.jsxs(Gt,{className:"p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-delft-blue mb-4 flex items-center",children:[l.jsx(Ks,{className:"mr-2 h-5 w-5"}),"Prossimi Eventi",N.length>0&&l.jsx(Ce,{variant:"secondary",className:"ml-2 bg-cambridge-blue/10 text-cambridge-blue",children:N.length})]}),N.length>0?l.jsx("div",{className:"space-y-3 md:overflow-y-auto md:scrollbar-thin md:scrollbar-thumb-burnt-sienna md:scrollbar-track-gray-100",style:{maxHeight:"165px"},children:N.map(G=>{const ue=fe(G.eventType);return l.jsxs("div",{className:"flex items-center space-x-4 p-4 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200 border border-gray-100",style:{backgroundColor:`${G.color}08`},onClick:()=>J(G),children:[l.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0 shadow-sm",style:{backgroundColor:G.color}}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h4",{className:"font-semibold text-delft-blue truncate",children:G.title}),l.jsx("span",{className:"text-lg",children:ue.icon})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ks,{className:"mr-1 h-3 w-3"}),$t(G.startDate,"d MMM yyyy",{locale:Xs}),G.isAllDay?"":` ${$t(G.startDate,"HH:mm")}`,!Qt(G.startDate,G.endDate)&&l.jsxs("span",{children:[" - ",$t(G.endDate,"d MMM yyyy",{locale:Xs})]})]}),G.location&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(Tw,{className:"mr-1 h-3 w-3"}),l.jsx("span",{className:"truncate max-w-32",children:G.location})]}),G.attendees&&G.attendees.length>0&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(uP,{className:"mr-1 h-3 w-3"}),l.jsx("span",{children:G.attendees.length})]})]})]}),l.jsx(Ce,{variant:"outline",className:"capitalize text-xs border-2",style:{borderColor:G.color,color:G.color},children:ue.label})]},G.id)})}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Ks,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-600",children:"Nessun evento in arrivo"}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aggiungi un evento per iniziare"})]})]})}),l.jsx(nh,{open:u,onOpenChange:O,children:l.jsxs(Nc,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsx(Ac,{children:l.jsxs(Pc,{className:"text-xl font-bold text-delft-blue",children:["Eventi del ",a&&$t(a,"d MMMM yyyy",{locale:Xs})]})}),l.jsx("div",{className:"space-y-4",children:f.map(G=>{const ue=fe(G.eventType);return l.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 hover:shadow-md transition-all cursor-pointer",style:{backgroundColor:`${G.color}08`},onClick:()=>J(G),children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:G.color}}),l.jsx("h4",{className:"font-semibold text-delft-blue",children:G.title}),l.jsx("span",{className:"text-lg",children:ue.icon})]}),l.jsx(Ce,{variant:"outline",style:{borderColor:G.color,color:G.color},children:ue.label})]}),l.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ks,{className:"mr-2 h-3 w-3"}),G.isAllDay?"Tutto il giorno":`${$t(G.startDate,"HH:mm")} - ${$t(G.endDate,"HH:mm")}`]}),G.location&&l.jsxs("div",{className:"flex items-center",children:[l.jsx(Tw,{className:"mr-2 h-3 w-3"}),G.location]}),G.description&&l.jsx("p",{className:"mt-2 text-gray-700",children:G.description})]})]},G.id)})})]})}),l.jsx(kte,{isOpen:r,onClose:H,onSave:W,onDelete:Q,editEvent:i,selectedDate:a})]})}function Ate(){return l.jsx(eZ,{children:l.jsxs(FN,{children:[l.jsx(dl,{path:"/shopping",component:qJ}),l.jsx(dl,{path:"/notes",component:YJ}),l.jsx(dl,{path:"/calendar",component:Nte}),l.jsx(dl,{path:"/",children:l.jsx(_F,{to:"/shopping"})})]})})}var Pte="Separator",rI="horizontal",Rte=["horizontal","vertical"],KO=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=rI,...s}=t,i=Dte(r)?r:rI,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return l.jsx(Ne.div,{"data-orientation":i,...a,...s,ref:e})});KO.displayName=Pte;function Dte(t){return Rte.includes(t)}var YO=KO;const wx=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>l.jsx(YO,{ref:s,decorative:n,orientation:e,className:pe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));wx.displayName=YO.displayName;function jte(){var b;const{user:t}=Mn(),{theme:e,toggleTheme:n}=lR(),{preferences:r,updatePreference:s,updatePreferences:i,resetPreferences:o,isLoading:a}=LO(),[c,u]=p.useState(!1),{toast:h}=As(),f=(w,x)=>{s(w,x),u(!1),h({title:"Aggiornamento",description:`Preferenza "${w}" aggiornata`})},m=()=>{confirm("Sei sicuro di voler resettare tutte le preferenze ai valori default?")&&(o(),u(!1),h({title:"Reset",description:"Preferenze resettate ai valori default"}))},v=()=>{const w=JSON.stringify(r,null,2),x=new Blob([w],{type:"application/json"}),_=URL.createObjectURL(x),y=document.createElement("a");y.href=_,y.download=`familytask-preferences-${t==null?void 0:t.username}-${new Date().toISOString().split("T")[0]}.json`,y.click(),URL.revokeObjectURL(_),h({title:"Esportazione",description:"Preferenze esportate"})};return a?l.jsx("div",{className:"flex items-center justify-center min-h-64",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cambridge-blue mx-auto mb-4"}),l.jsx("p",{className:"text-delft-blue dark:text-eggshell",children:"Caricamento impostazioni..."})]})}):l.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-delft-blue dark:text-eggshell flex items-center gap-3",children:[l.jsx(kw,{className:"h-8 w-8"}),"Impostazioni Utente"]}),l.jsx("p",{className:"text-delft-blue/70 dark:text-eggshell/70 mt-1",children:"Personalizza la tua esperienza FamilyTaskTracker"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(Ce,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[l.jsx(ia,{className:"h-3 w-3 mr-1"}),t==null?void 0:t.username," (",t==null?void 0:t.role,")"]}),l.jsxs(Ce,{variant:"secondary",className:"bg-green-100 text-green-700",children:[l.jsx(Wh,{className:"h-3 w-3 mr-1"}),"Salvate in Sessione"]})]})]}),l.jsxs(Ot,{children:[l.jsx(Fs,{children:l.jsxs(Us,{className:"flex items-center gap-2",children:[l.jsx(Ew,{className:"h-5 w-5"}),"Preferenze di Visualizzazione"]})}),l.jsxs(Gt,{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Modalità Vista Shopping List"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-eggshell/50 dark:bg-delft-blue/20",children:[l.jsx(j9,{className:`h-4 w-4 ${r.viewMode==="compact"?"text-cambridge-blue":"text-gray-400"}`}),l.jsx(rr,{checked:r.viewMode==="images",onCheckedChange:w=>f("viewMode",w?"images":"compact"),className:"data-[state=checked]:bg-cambridge-blue"}),l.jsx(Ew,{className:`h-4 w-4 ${r.viewMode==="images"?"text-cambridge-blue":"text-gray-400"}`}),l.jsx("span",{className:"font-medium",children:r.viewMode==="images"?"Vista Immagini":"Vista Compatta"})]}),l.jsx(Ce,{variant:"outline",className:"bg-yellow-100 text-yellow-700",children:"💾 Salvato automaticamente"})]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"La modalità vista determina come vengono mostrati gli articoli nella shopping list."})]}),l.jsx(wx,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Articoli per Pagina"}),l.jsxs(ir,{value:r.itemsPerPage.toString(),onValueChange:w=>f("itemsPerPage",parseInt(w)),children:[l.jsx(Wn,{className:"w-48",children:l.jsx(or,{})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"10",children:"10 articoli"}),l.jsx(Re,{value:"20",children:"20 articoli"}),l.jsx(Re,{value:"30",children:"30 articoli"}),l.jsx(Re,{value:"50",children:"50 articoli"}),l.jsx(Re,{value:"100",children:"100 articoli"})]})]})]}),l.jsx(wx,{}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Tema Applicazione"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-eggshell/50 dark:bg-delft-blue/20",children:[l.jsx(Nw,{className:`h-4 w-4 ${e==="light"?"text-cambridge-blue":"text-gray-400"}`}),l.jsx(rr,{checked:e==="dark",onCheckedChange:n,className:"data-[state=checked]:bg-cambridge-blue"}),l.jsx(Sw,{className:`h-4 w-4 ${e==="dark"?"text-cambridge-blue":"text-gray-400"}`}),l.jsx("span",{className:"font-medium",children:e==="light"?"Tema Chiaro":"Tema Scuro"})]}),l.jsxs(Ce,{variant:"outline",className:"bg-blue-100 text-blue-700",children:[l.jsx(V9,{className:"h-3 w-3 mr-1"}),"Sincronizzato con sistema"]})]})]})]})]}),l.jsxs(Ot,{children:[l.jsx(Fs,{children:l.jsxs(Us,{className:"flex items-center gap-2",children:[l.jsx(bw,{className:"h-5 w-5"}),"Filtri Predefiniti"]})}),l.jsxs(Gt,{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Categoria Predefinita"}),l.jsxs(ir,{value:r.defaultCategory,onValueChange:w=>f("defaultCategory",w),children:[l.jsx(Wn,{className:"w-64",children:l.jsx(or,{})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"all",children:"Tutte le Categorie"}),l.jsx(Re,{value:"Alimentari",children:"🥘 Alimentari"}),l.jsx(Re,{value:"Casa",children:"🏠 Casa"}),l.jsx(Re,{value:"Elettronica",children:"💻 Elettronica"}),l.jsx(Re,{value:"Abbigliamento",children:"👕 Abbigliamento"}),l.jsx(Re,{value:"Salute",children:"💊 Salute"})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Priorità Predefinita"}),l.jsxs(ir,{value:r.defaultPriority,onValueChange:w=>f("defaultPriority",w),children:[l.jsx(Wn,{className:"w-64",children:l.jsx(or,{})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"all",children:"Tutte le Priorità"}),l.jsx(Re,{value:"high",children:"🔴 Alta"}),l.jsx(Re,{value:"medium",children:"🟡 Media"}),l.jsx(Re,{value:"low",children:"🟢 Bassa"})]})]})]}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Vn,{className:"text-base font-medium",children:"Mostra Articoli Completati"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Include gli articoli già completati nella vista predefinita"})]}),l.jsx(rr,{checked:r.showCompleted,onCheckedChange:w=>f("showCompleted",w),className:"data-[state=checked]:bg-cambridge-blue"})]})})]})]}),l.jsxs(Ot,{children:[l.jsx(Fs,{children:l.jsxs(Us,{className:"flex items-center gap-2",children:[l.jsx(_w,{className:"h-5 w-5"}),"Impostazioni Notifiche"]})}),l.jsxs(Gt,{className:"space-y-6",children:[l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Vn,{className:"text-base font-medium",children:"Abilita Notifiche"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Ricevi notifiche per aggiornamenti e promemoria"})]}),l.jsx(rr,{checked:r.enableNotifications,onCheckedChange:w=>f("enableNotifications",w),className:"data-[state=checked]:bg-cambridge-blue"})]})}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx(Vn,{className:"text-base font-medium",children:"Notifiche Email"}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Ricevi un riepilogo giornaliero via email"})]}),l.jsx(rr,{checked:r.emailNotifications,onCheckedChange:w=>f("emailNotifications",w),className:"data-[state=checked]:bg-cambridge-blue",disabled:!r.enableNotifications})]})})]})]}),l.jsxs(Ot,{children:[l.jsx(Fs,{children:l.jsxs(Us,{className:"flex items-center gap-2",children:[l.jsx(Co,{className:"h-5 w-5"}),"Impostazioni Regionali"]})}),l.jsx(Gt,{className:"space-y-6",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Lingua"}),l.jsxs(ir,{value:r.language,onValueChange:w=>f("language",w),children:[l.jsx(Wn,{className:"w-48",children:l.jsx(or,{})}),l.jsxs(Hn,{children:[l.jsx(Re,{value:"it",children:"🇮🇹 Italiano"}),l.jsx(Re,{value:"en",children:"🇺🇸 English"})]})]})]})})]}),l.jsxs(Ot,{children:[l.jsx(Fs,{children:l.jsxs(Us,{className:"flex items-center gap-2",children:[l.jsx(Wh,{className:"h-5 w-5"}),"Gestione Dati e Backup"]})}),l.jsxs(Gt,{className:"space-y-6",children:[l.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Wh,{className:"h-5 w-5 text-blue-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Le tue preferenze sono salvate in SessionStorage"}),l.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:"I dati vengono conservati per tutta la durata della sessione browser. Chiudendo il browser, le preferenze verranno perse."}),l.jsxs("div",{className:"mt-3 text-xs text-blue-600 dark:text-blue-400",children:[l.jsx("strong",{children:"Chiave storage:"})," familyTaskTracker_preferences_",t==null?void 0:t.username]})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Esporta Preferenze"}),l.jsxs(Ee,{onClick:v,variant:"outline",className:"w-full",children:[l.jsx(Iw,{className:"mr-2 h-4 w-4"}),"Scarica Backup JSON"]}),l.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Salva le tue preferenze come file JSON"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Vn,{className:"text-base font-medium",children:"Spazio Utilizzato"}),l.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Preferenze:"}),l.jsxs("span",{className:"font-mono",children:[new Blob([JSON.stringify(r)]).size," bytes"]})]}),l.jsxs("div",{className:"flex justify-between text-gray-500",children:[l.jsx("span",{children:"Tema:"}),l.jsxs("span",{className:"font-mono",children:[((b=sessionStorage.getItem("theme"))==null?void 0:b.length)||0," bytes"]})]})]})})]})]})]})]}),l.jsxs(Ot,{className:"border-orange-200 dark:border-orange-800",children:[l.jsx(Fs,{children:l.jsxs(Us,{className:"flex items-center gap-2 text-orange-700 dark:text-orange-300",children:[l.jsx(NT,{className:"h-5 w-5"}),"Azioni Avanzate"]})}),l.jsxs(Gt,{className:"space-y-6",children:[l.jsx("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Reset Completo Preferenze"}),l.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300 mt-1",children:"Ripristina tutte le impostazioni ai valori predefiniti. Questa azione non può essere annullata."})]}),l.jsxs(Ee,{onClick:m,variant:"destructive",size:"sm",className:"ml-4",children:[l.jsx(NT,{className:"mr-2 h-4 w-4"}),"Reset Tutto"]})]})}),l.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100",children:"Cancella Tutti i Dati di Sessione"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:"Rimuove completamente tutti i dati salvati in SessionStorage, incluse preferenze e tema. Richiede ricaricamento pagina."})]}),l.jsxs(Ee,{onClick:()=>{confirm("Sei sicuro? Tutti i dati di sessione verranno persi e la pagina verrà ricaricata.")&&(sessionStorage.clear(),window.location.reload())},variant:"destructive",size:"sm",className:"ml-4",children:[l.jsx(Wh,{className:"mr-2 h-4 w-4"}),"Cancella Tutto"]})]})})]})]}),l.jsxs(Ot,{className:"border-green-200 dark:border-green-800",children:[l.jsx(Fs,{children:l.jsxs(Us,{className:"flex items-center gap-2 text-green-700 dark:text-green-300",children:[l.jsx(bw,{className:"h-5 w-5"}),"Riepilogo Configurazione Attuale"]})}),l.jsx(Gt,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium text-delft-blue dark:text-eggshell",children:"Visualizzazione"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Vista:"}),l.jsx(Ce,{variant:"outline",className:r.viewMode==="images"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700",children:r.viewMode==="images"?"🖼️ Immagini":"📝 Compatta"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Items/Pagina:"}),l.jsx("span",{className:"font-mono",children:r.itemsPerPage})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Tema:"}),l.jsx(Ce,{variant:"outline",className:e==="dark"?"bg-gray-800 text-gray-100":"bg-yellow-100 text-yellow-700",children:e==="dark"?"🌙 Scuro":"☀️ Chiaro"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium text-delft-blue dark:text-eggshell",children:"Filtri Default"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Categoria:"}),l.jsx("span",{className:"font-mono text-xs",children:r.defaultCategory})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Priorità:"}),l.jsx("span",{className:"font-mono text-xs",children:r.defaultPriority})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Completati:"}),l.jsx(Ce,{variant:"outline",className:r.showCompleted?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:r.showCompleted?"✅ Sì":"❌ No"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium text-delft-blue dark:text-eggshell",children:"Notifiche"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Abilitate:"}),l.jsx(Ce,{variant:"outline",className:r.enableNotifications?"bg-green-100 text-green-700":"bg-red-100 text-red-700",children:r.enableNotifications?"🔔 Sì":"🔕 No"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Email:"}),l.jsx(Ce,{variant:"outline",className:r.emailNotifications?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",children:r.emailNotifications?"📧 Sì":"📭 No"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Lingua:"}),l.jsx("span",{className:"font-mono text-xs",children:r.language==="it"?"🇮🇹 IT":"🇺🇸 EN"})]})]})]})]})})]}),l.jsxs(Ot,{className:"border-purple-200 dark:border-purple-800",children:[l.jsx(Fs,{children:l.jsx(Us,{className:"flex items-center gap-2 text-purple-700 dark:text-purple-300",children:"💡 Tips e Suggerimenti"})}),l.jsx(Gt,{children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-blue-500",children:"📱"}),l.jsxs("div",{children:[l.jsx("strong",{children:"Vista Immagini vs Compatta:"})," La vista immagini è ideale per prodotti con foto, mentre la vista compatta permette di vedere più articoli contemporaneamente."]})]}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-green-500",children:"💾"}),l.jsxs("div",{children:[l.jsx("strong",{children:"Salvataggio Automatico:"})," Tutte le modifiche alle preferenze vengono salvate automaticamente in SessionStorage senza bisogno di conferma."]})]}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-orange-500",children:"🔄"}),l.jsxs("div",{children:[l.jsx("strong",{children:"Sincronizzazione Multi-Device:"})," Per ora le preferenze sono salvate localmente. In futuro potrebbero essere sincronizzate con il cloud."]})]}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-purple-500",children:"⚡"}),l.jsxs("div",{children:[l.jsx("strong",{children:"Performance:"})," La vista compatta carica più velocemente quando hai molti articoli, mentre la vista immagini offre un'esperienza più ricca."]})]})]})})]}),l.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400 py-4",children:l.jsxs("p",{children:["FamilyTaskTracker v","1.0.0"," • Preferenze User: ",t==null?void 0:t.username," • Ultimo aggiornamento: ",new Date().toLocaleDateString("it-IT")]})})]})}function Mte(){const[t,e]=p.useState(window.location.hash.slice(1)||"/");p.useEffect(()=>{const r=()=>e(window.location.hash.slice(1)||"/");return window.addEventListener("hashchange",r),()=>window.removeEventListener("hashchange",r)},[]);const n=p.useCallback(r=>{window.location.hash=r},[]);return[t,n]}function Ote(){const{user:t,isLoading:e}=Mn();return e?l.jsxs("div",{className:"min-h-screen bg-eggshell flex items-center justify-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-burnt-sienna"}),l.jsx("span",{className:"ml-3 text-delft-blue font-medium",children:"Loading..."})]}):t?l.jsxs(FN,{children:[l.jsx(dl,{path:"/settings",children:l.jsx("div",{className:"min-h-screen bg-eggshell dark:bg-delft-blue",children:l.jsx("div",{className:"container mx-auto p-6",children:l.jsx(jte,{})})})}),l.jsx(dl,{children:l.jsx(Ate,{})})]}):l.jsx(E$,{})}function Lte(){return l.jsx(T$,{children:l.jsx(qF,{client:YF,children:l.jsx(P0,{children:l.jsx(k6,{children:l.jsx(HJ,{children:l.jsx(LN,{hook:Mte,children:l.jsx(Ote,{})})})})})})})}SN(document.getElementById("root")).render(l.jsx(Lte,{}));
